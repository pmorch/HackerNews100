<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Mon, 30 Dec 2024 00:30:05 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[President Jimmy Carter has passed away (687 pts)]]></title>
            <link>https://www.washingtonpost.com/obituaries/2024/12/29/jimmy-carter-president-dead/</link>
            <guid>42543128</guid>
            <pubDate>Sun, 29 Dec 2024 21:08:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.washingtonpost.com/obituaries/2024/12/29/jimmy-carter-president-dead/">https://www.washingtonpost.com/obituaries/2024/12/29/jimmy-carter-president-dead/</a>, See on <a href="https://news.ycombinator.com/item?id=42543128">Hacker News</a></p>
Couldn't get https://www.washingtonpost.com/obituaries/2024/12/29/jimmy-carter-president-dead/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Are PC hardware companies driving technology into restricted closed ecosystems? (160 pts)]]></title>
            <link>https://www.scottrlarson.com/updates/update-closed-technology-ecosystems-storage-configuration-lockdown/</link>
            <guid>42542138</guid>
            <pubDate>Sun, 29 Dec 2024 19:11:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.scottrlarson.com/updates/update-closed-technology-ecosystems-storage-configuration-lockdown/">https://www.scottrlarson.com/updates/update-closed-technology-ecosystems-storage-configuration-lockdown/</a>, See on <a href="https://news.ycombinator.com/item?id=42542138">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody">
        

<p>I am a Computer Hardware professional. I started working with computer technology in the early eighties. I have seen the evolution of technology starting with closed platforms like the game console era and then the move toward open platforms like the <a href="https://www.scottrlarson.com/memorials/memorial-my-home-computer-reflections-part-1/" target="_blank">Home Computer Golden Age</a>. In the last 5 or 10 years, I have witnessed technology changes that are slowly moving away from open hardware designs towards hardware that is locked down and can’t be modified by the user.  For more articles on this subject, see my  <a href="https://www.scottrlarson.com/categories/deceptivetechnology/" target="_blank">DeceptiveTechnology</a> section.</p>

<h2 id="is-dell-limiting-access-to-drivers-and-designing-bios-to-minimize-os-changes">Is Dell limiting access to drivers and designing BIOS to minimize OS changes?</h2>

<p>In the last few years, I have noticed a trend where Dell does not provide RST storage drivers for NVME SSDs (the software that allows a user to cleanly install an operating system from media) on Laptops and Desktops. Normally, you can just go into the BIOS, switch from NVME Raid to ACHI, and be done with it—or can you?</p>

<p>I recently purchased a Dell Inspiron 16 Plus 7640 Laptop with a BIOS that does not have an option to change to an AHCI storage configuration. Without the RST storage driver not being made available on Dell’s website, and no ability to switch to ACHI, you cannot reinstall Windows in a clean state from a installation disk because the install requires that the RST driver be manually loaded befoe it can see the storage device.</p>

<p><img src="https://www.scottrlarson.com/img/publications/oem-rst-driver-debacle-or-intentional/dell-inspiron-16-plus-bios-storage-configuration-missing-ahci-mode.jpeg" alt="Dell Inspiron 16plus bios storage configuration missing AHCI mode"></p>

<p>Normally, you would see this screen that allows you to switch storage modes
<img src="https://www.scottrlarson.com/img/publications/oem-rst-driver-debacle-or-intentional/dell-inspiron-3030-bios-storage-configuration.jpeg" alt="Dell Inspiron 3030 bios storage configuration AHCI mode"></p>

<p>I tried the key combinations to enable advanced BIOS configuration that worked on previous models, but no dice. Is it a coincidence that Dell has not been releasing the RST storage drivers for most of these models in the last couple of years, and is now deciding that the BIOS storage configuration should not be changable?</p>

<p>If you check Dell’s website for drivers, you probably will not see RST drivers for many models listed. I checked the driver listing for my model and so far I don’t see it.</p>

<p><img src="https://www.scottrlarson.com/img/publications/oem-rst-driver-debacle-or-intentional/dell.com-support-storage-driver-listings-lack-RST.resized.jpeg" alt="Dell.com Support Storage Driver Listings Lack RST"></p>

<p>Here is a different model with no RST listing.</p>

<p><img src="https://www.scottrlarson.com/img/publications/oem-rst-driver-debacle-or-intentional/dell.com-support-storage-driver-listings-lack-RST-different-model.jpeg" alt="Dell.com Support Storage Driver Listings Lack RST Differnt Model"></p>

<p>You can try to find drivers online, based on the hardware id’s, especially from Intel’s website, but they don’t always work for your particular model. I even tried to extract the drivers from the OS but I wasn’t able to find a .inf configuration profile to make it work.</p>

<p>These changes effectively prevents a user from cleanly reinstalling the operating system from media. The only option, that I can see, is to install from the service partition on the device, or from Dell’s BIOS re-installation technology, which contains bloatware, targeted advertising, and data collection.</p>

<p>I’m open to being wrong, please let me know if I am missing something.</p>

<p>Short of evidence to the contrary. I believe this is one small part of a bigger and long-term planned effort within the PC hardware and software industries to control the user experience for consumer hardware. Apple is also moving in this direction with the MacOS by limiting non-approved software from being installed. Yes, you can work around it, but it’s getting harder and harder to do so with every iteration of the Operating System.</p>

<p>We are slowly being boiled to the point of no return. We need some kind of consortium for users to represent our interests otherwise in 10 or 20 years we will have very limited choice when it comes to computer technology.</p>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Toronto man creates tiny mobile homes to help unhoused people escape the cold (174 pts)]]></title>
            <link>https://www.cbc.ca/lite/story/1.7419805</link>
            <guid>42541173</guid>
            <pubDate>Sun, 29 Dec 2024 17:06:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cbc.ca/lite/story/1.7419805">https://www.cbc.ca/lite/story/1.7419805</a>, See on <a href="https://news.ycombinator.com/item?id=42541173">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="__next"><main><div><article id="article"><p>CBC News | Posted: December 28, 2024 10:23 PM | Last Updated: 21 hours ago</p><p>Homes are attached to bicycles; include heat, electricity and safety features </p><div role="figure" data-pw="imageEmbed"><p>Image  |  ryan donais tiny homes </p><p>Caption: Ryan Donais build his first tiny mobile home this summer, and has now built three homes — one of which is pictured behind him — that can act as temporary shelters for those experiencing homelessness.  (Saeed Dehghani/CBC)</p></div><p>After seeing people sleeping outside in the cold year-after-year, a Toronto man is building tiny mobile homes attached to bicycles to give temporary relief to those who are unhoused.</p><p>Ryan Donais started building the small modular homes this summer as he watched the city's housing crisis becoming more dire. He said he didn't want to go through another winter seeing people living on the streets, so he put his background in construction to use. </p><p>"I just don't see any changes. It's been many years with people outside and it's not changing. I couldn't imagine being outside for years, you know?"</p><p>Since then, Donais has built three homes at a cost of about $10,000 each, most of which has been paid for through donations to his GoFundMe page. </p><div role="figure" data-pw="imageEmbed" dir="ltr"><p>Image  |  tiny tiny homes example </p><p>Caption: Each home built by Donais has heat, electricity and running water, plus safety features including a smoke detector and carbon monoxide alarm.  (Saeed Dehghani/CBC)</p></div><p>He took inspiration form <a href="https://www.cbc.ca/lite/story/1.5920822">Khaleel Seivwright</a>, a carpenter who built wooden shelters during the pandemic — until the city removed them, claiming they were a fire hazard. </p><p>Not wanting his tiny homes to suffer the same fate, Donais said he designed his mobile shelters to hopefully avoid backlash from the city. </p><p>Each of the small units have electricity and heat, running water and a bed, as well as safety features like smoke and carbon monoxide detectors and a fire extinguisher. Donais said the units are also designed with Ontario's e-bike regulations in mind so that they can legally travel on the city's bike lanes if they have to be moved. </p><p><em><strong>WATCH | Step inside his 1st tiny mobile home prototype: </strong></em><span><div role="figure" aria-label="Media Video | CBC News Toronto :  Tiny mobile home creator hopes to offer temporary relief to unhoused people"><p>Media Video | CBC News Toronto :  Tiny mobile home creator hopes to offer temporary relief to unhoused people</p><p>Caption: A Toronto man is building tiny mobile homes attached to bicycles with the hope of offering temporary relief to those who are unhoused. CBC’s Dale Manucdoc has the details.</p><a aria-label="Open full embed in new tab (external link)" href="https://www.cbc.ca/player/play/9.6517158" target="_blank" rel="noreferrer">Open Full Embed in New Tab <svg xmlns="http://www.w3.org/2000/svg" viewBox="-125 -125 600 450" height="1em" width="1em"><title>(external link)</title><path d="M216 12.1v24c0 6.6 5.4 12 12 12h74L194.1 156c-2.3 2.3-3.6 5.3-3.6 8.5s1.3 6.2 3.6 8.5l16.9 16.9c2.3 2.3 5.3 3.6 8.5 3.6s6.3-1.3 8.5-3.6L335.9 82l.1 74c0 6.6 5.4 12 12 12h24c6.6 0 12-5.4 12-12V12c0-6.6-5.4-12-12-12L228 .1c-6.6 0-12 5.4-12 12z"></path><path d="M288 192v132c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V108c0-6.6 5.4-12 12-12h132V48H12C5.4 48 0 53.4 0 60v312c0 6.6 5.4 12 12 12h312c6.6 0 12-5.4 12-12V192h-48z"></path></svg></a><p><span>Loading external pages may require significantly more data usage.</span></p></div></span></p><p>So far, Donais said he hasn't encountered any issues. </p><p>Terra Sawler moved into one of Donais' mobile homes about a month and a half ago after spending close to three years living on the street. </p><p>"This is definitely the safest and warmest I've been since I've been out here."</p><div role="figure" data-pw="imageEmbed" dir="ltr"><p>Image  |  Terra Sawler </p><p>Caption: Terra Sawler has been living one of the tiny mobile homes built by Ryan Donais for more than a month.  (Saeed Dehghani/CBC)</p></div><p>After burning down two tents just trying to stay warm, Sawler says this is definitely a safer option. In addition to keeping her warm, Sawler says the tiny home has also allowed her to have something she hadn't had in years — a good night's sleep. </p><p>"When you're out on the street, you don't sleep every night. You sleep every couple nights," she said. </p><p>"And you gotta take turns and shifts with people, right? 'Cause I mean, I've had my shoes stolen off my feet, I've had my [sleeping] bag cut off, it's a dog-eat-dog world out here." </p><p><em><strong>WATCH | Woman experiencing homelessness grateful for tiny mobile home: </strong></em><span><div role="figure" aria-label="Media Video | CBC News Toronto :  'Tiny Tiny Homes' builder presents another Toronto resident with place to stay"><p>Media Video | CBC News Toronto :  'Tiny Tiny Homes' builder presents another Toronto resident with place to stay</p><p>Caption: A Toronto man who started building small shelters for those in need gave someone a new place to live today. As Naama Weingarten reports, while unhoused people appreciate his efforts, he wishes he never had to build the homes.</p><a aria-label="Open full embed in new tab (external link)" href="https://www.cbc.ca/player/play/9.6601656" target="_blank" rel="noreferrer">Open Full Embed in New Tab <svg xmlns="http://www.w3.org/2000/svg" viewBox="-125 -125 600 450" height="1em" width="1em"><title>(external link)</title><path d="M216 12.1v24c0 6.6 5.4 12 12 12h74L194.1 156c-2.3 2.3-3.6 5.3-3.6 8.5s1.3 6.2 3.6 8.5l16.9 16.9c2.3 2.3 5.3 3.6 8.5 3.6s6.3-1.3 8.5-3.6L335.9 82l.1 74c0 6.6 5.4 12 12 12h24c6.6 0 12-5.4 12-12V12c0-6.6-5.4-12-12-12L228 .1c-6.6 0-12 5.4-12 12z"></path><path d="M288 192v132c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V108c0-6.6 5.4-12 12-12h132V48H12C5.4 48 0 53.4 0 60v312c0 6.6 5.4 12 12 12h312c6.6 0 12-5.4 12-12V192h-48z"></path></svg></a><p><span>Loading external pages may require significantly more data usage.</span></p></div></span></p><div dir="ltr"><p>As part of its </p><a href="https://www.toronto.ca/community-people/housing-shelter/affordable-housing-developments/modular-housing-initiative/#:~:text=The%20City%20of%20Toronto%20is,new%20modular%20homes%20in%20Toronto." target="_blank" rel="noreferrer">housing action plan<svg xmlns="http://www.w3.org/2000/svg" viewBox="-125 -125 600 450" height="1em" width="1em"><title>(external link)</title><path d="M216 12.1v24c0 6.6 5.4 12 12 12h74L194.1 156c-2.3 2.3-3.6 5.3-3.6 8.5s1.3 6.2 3.6 8.5l16.9 16.9c2.3 2.3 5.3 3.6 8.5 3.6s6.3-1.3 8.5-3.6L335.9 82l.1 74c0 6.6 5.4 12 12 12h24c6.6 0 12-5.4 12-12V12c0-6.6-5.4-12-12-12L228 .1c-6.6 0-12 5.4-12 12z"></path><path d="M288 192v132c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V108c0-6.6 5.4-12 12-12h132V48H12C5.4 48 0 53.4 0 60v312c0 6.6 5.4 12 12 12h312c6.6 0 12-5.4 12-12V192h-48z"></path></svg></a><p> released in 2020, the City of Toronto has committed to creating 1,000 new modular homes for people experiencing homelessness. So far, the city has completed 216 homes on city-owned sites, its website says. </p></div><p>Other municipalities in Ontario have started to use modular homes to address a lack of housing. </p><div dir="ltr"><a href="https://www.cbc.ca/lite/story/1.7138608"><u>Peterborough started a modular housing community</u></a><p> filled with cabins in the site of a former parking lot </p></div><div dir="ltr"><a href="https://www.cbc.ca/lite/story/1.7347274"><u>Waterloo also</u></a><p> has a tiny home shelter run by the region that opened last year, while </p><a href="https://www.cbc.ca/lite/story/1.7414830"><u>Hamilton </u></a><p>is expected to open an outdoor shelter made up of tiny modular homes next month following some delays. </p></div><p>Since building his first tiny home in the summer, Donais has since registered his own not-for-profit organization, Tiny Tiny Homes, to help create more. </p><p>He says he's happy to be able to give people like Sawler an escape from the cold with his mini modular homes. But his homes aren't meant to be permanent, and he wishes he didn't have to build them at all. </p><p>"It's a terrible that we're letting people sleep outside. Housing is the answer."</p></article></div></main></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I Was Wrong about the Ethics Crisis (Moshe Vardi, CACM) (196 pts)]]></title>
            <link>https://cacm.acm.org/opinion/i-was-wrong-about-the-ethics-crisis/</link>
            <guid>42540862</guid>
            <pubDate>Sun, 29 Dec 2024 16:23:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://cacm.acm.org/opinion/i-was-wrong-about-the-ethics-crisis/">https://cacm.acm.org/opinion/i-was-wrong-about-the-ethics-crisis/</a>, See on <a href="https://news.ycombinator.com/item?id=42540862">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		
		
		
					<p>Is Big Tech supporting the public good, and if not, what should Big Tech workers do about it?</p>
		
		

			<figure>
			<p><img width="1024" height="576" src="https://cacm.acm.org/wp-content/uploads/2024/08/080224.OP_.Moshe-Vardi-2400x1350-1.jpg" alt="Moshe Y. Vardi" loading="eager" decoding="async" srcset="https://cacm.acm.org/wp-content/uploads/2024/08/080224.OP_.Moshe-Vardi-2400x1350-1.jpg 2400w, https://cacm.acm.org/wp-content/uploads/2024/08/080224.OP_.Moshe-Vardi-2400x1350-1.jpg?resize=300,169 300w, https://cacm.acm.org/wp-content/uploads/2024/08/080224.OP_.Moshe-Vardi-2400x1350-1.jpg?resize=768,432 768w, https://cacm.acm.org/wp-content/uploads/2024/08/080224.OP_.Moshe-Vardi-2400x1350-1.jpg?resize=1024,576 1024w, https://cacm.acm.org/wp-content/uploads/2024/08/080224.OP_.Moshe-Vardi-2400x1350-1.jpg?resize=1536,864 1536w, https://cacm.acm.org/wp-content/uploads/2024/08/080224.OP_.Moshe-Vardi-2400x1350-1.jpg?resize=2048,1152 2048w" sizes="(max-width: 1024px) 100vw, 1024px"></p>		</figure>

		
	</div><div>
		<article><section id="sec1" lang="en"><p id="p-1">The ethics crisis in computing was “launched” in 2018. In March of that year,&nbsp;<i>The Boston Globe</i> asserted, “Computer science faces an ethics crisis. The Cambridge Analytica scandal proves it!” This was in response to the <a href="https://www.brookings.edu/books/techlash/" data-jats-ext-link-type="uri">Techlash</a>,<a href="#fn1" data-jats-ref-type="fn" data-jats-rid="fn1"><sup>a</sup></a> where <i>Wall Street Journal</i> columnist Peggy Noonan described Silicon Valley executives as “moral Martians who operate on some weird new postmodern ethical wavelength” and Niall Ferguson, a Hoover Institution historian, described cyberspace as “cyberia, a dark and lawless realm where malevolent actors range.”</p><p id="p-2">But in my January 2019 <i>Communications</i> <a href="https://cacm.acm.org/opinion/are-we-having-an-ethical-crisis-in-computing/" data-jats-ext-link-type="uri">column</a>,<a href="#fn2" data-jats-ref-type="fn" data-jats-rid="fn2"><sup>b</sup></a> I dismissed the ethical-crisis vibe. I wrote, “If society finds the surveillance business model offensive, then the remedy is public policy, in the form of laws and regulations, rather than an ethics outrage.” I now think, however, I was wrong. I think I was right to advocate for laws and regulation to address the adverse impacts of computing, but I now believe we do have an ethics crisis in computing.</p><p id="p-3">What changed my mind? First, my anxiety about the ills brought on by computing has risen dramatically, as a perusal of my column over the past five years shows.<a href="#fn3" data-jats-ref-type="fn" data-jats-rid="fn3"><sup>c</sup></a> I <a href="https://cacm.acm.org/opinion/to-serve-humanity/" data-jats-ext-link-type="uri">bemoaned</a> that humanity seems to be serving technology rather than the other way around. I <a href="https://cacm.acm.org/opinion/the-winner-takes-all-tech-corporation/" data-jats-ext-link-type="uri">argued</a> that tech corporations have become too powerful and their power must be <a href="https://cacm.acm.org/opinion/the-people-vs-tech/" data-jats-ext-link-type="uri">curtailed</a>. I <a href="https://cacm.acm.org/opinion/advancing-computing-as-a-science-and-profession-but-to-what-end/" data-jats-ext-link-type="uri">asked</a> that ACM dedicate itself to the public good. I <a href="https://cacm.acm.org/opinion/acm-ethics-and-corporate-behavior/" data-jats-ext-link-type="uri">pointed out</a> that Big Tech’s business models are unethical. I explained how technology <a href="https://cacm.acm.org/opinion/technology-and-democracy/" data-jats-ext-link-type="uri">increases</a> societal polarization. I wailed that computing has blood on its hands. About two years ago, I started giving <a href="https://www.youtube.com/watch?v=OF3GlEwQBRg" data-jats-ext-link-type="uri">talks</a><a href="#fn4" data-jats-ref-type="fn" data-jats-rid="fn4"><sup>d</sup></a> on how to be an ethical computing technologist.</p><p id="p-4">But I have yet, until now, to point at the elephant in the room and ask whether it is ethical to work for Big Tech, taking all of the above into consideration. ACM’s Code of Ethics<a href="#fn5" data-jats-ref-type="fn" data-jats-rid="fn5"><sup>e</sup></a> does offer a clear ethical guideline. It opens with the following sentences: “Computing professionals’ actions change the world. To act responsibly, they should reflect upon the wider impacts of their work, consistently supporting the public good.” So, the ethical star we should follow is the support of the public good.</p><p id="p-5">Supporting the public good is not always straightforward. All of us must navigate the trade-off between “me” and “we.” A famous Talmudic quote states: “If I am not for myself, who will be for me? If I am only for myself, what am I?” We must balance optimizing for oneself with optimizing for others, including the public good. So how does working for Big Tech thread this needle? This is the question that people who work for Big Tech must ask themselves.</p><p id="p-6">The profit motive is not inherently against the public good. As Adam Smith pointed out, “They are led by an invisible hand…and thus without intending it, without knowing it, advance the interest of the society.” But the belief in the magical power of the free market always to serve the public good has <a href="https://cacm.acm.org/opinion/a-computational-lens-on-economics/" data-jats-ext-link-type="uri">no theoretical basis</a>.<a href="#fn6" data-jats-ref-type="fn" data-jats-rid="fn6"><sup>f</sup></a> In fact, our current climate crisis is a demonstrated <a href="https://www.amazon.com/Big-Myth-American-Business-Government/dp/1635573572" data-jats-ext-link-type="uri">market failure</a>.<a href="#fn7" data-jats-ref-type="fn" data-jats-rid="fn7"><sup>g</sup></a> To take an extreme example, Big Tobacco surely does not support the public good, and most of us would agree that it is unethical to work for Big Tobacco. The question, thus, is whether Big Tech is supporting the public good, and if not, what should Big Tech workers do about it.</p><p id="p-7">Of course, there is no simple answer to such a question, and the only reasonable answer to the question of whether it is ethical to work for Big Tech is, “It depends.” But consider Uber. In 2023, <i>Wired</i> magazine <a href="https://www.wired.com/story/uber-ceo-will-always-say-his-company-sucks/" data-jats-ext-link-type="uri">reported</a><a href="#fn8" data-jats-ref-type="fn" data-jats-rid="fn8"><sup>h</sup></a> that “…Travis Kalanick, had built an enormous, enthusiastic user base by subsidizing rides with the company’s vast reservoir of VC funding. Under Kalanick, Uber skirted regulations, shrugged off safety issues, and presided over a workplace rife with sexual harassment.” Was it ethical to have worked at Uber under Kalanick? I am sure many Uber employees were not aware of Kalanick’s shenanigans, but many were, and yet they continued to work at Uber. It was only in 2022 that a whistleblower leaked more than 124,000 company files to the <em>Guardian</em>, exposing its misdeeds.</p><p id="p-8">“It is difficult to get a man to understand something, when his salary depends on his not understanding it,” said the writer and political activist Upton Sinclair. By and large, Big Tech workers do not seem to be asking themselves hard questions, I believe, hence my conclusion that we do indeed suffer from an ethics crisis.</p></section></article>
</div><div>
			<div>
			<p>
				Submit an Article to CACM			</p>
			<p>
				CACM welcomes unsolicited <a href="https://cacm.acm.org/author-guidelines/#CACMsubmission">submissions</a> on topics of relevance and value to the computing community.			</p>
		</div>

<section>
	<div>
		<p>
			You Just Read		</p>
		<h4>
			I Was Wrong about the Ethics Crisis		</h4>
					<a href="https://dl.acm.org/doi/10.1145/3704959">
								View in the ACM Digital Library							</a>
			</div>
	<p>© 2024 Copyright held by the owner/author(s).</p>
</section>
		</div><div data-component="ctaMembership">
	
		<div>
				<h3>
					Shape the Future of Computing				</h3>
									<p>
						ACM encourages its members to take a direct hand in shaping the future of the association. There are more ways than ever to get involved.					</p>
													<p><a href="https://www.acm.org/about-acm/get-involved">
						Get Involved											</a>
							</p></div>

		
		<div>
				<h3>
					Communications of the ACM (CACM) is now a fully Open Access publication.				</h3>
									<p>
						By opening CACM to the world, we hope to increase engagement among the broader computer science community and encourage non-members to discover the rich resources ACM has to offer.					</p>
													<p><a href="https://cacm.acm.org/news/cacm-is-becoming-open-access">
						Learn More											</a>
							</p></div>

		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[BSD kqueue is a mountain of technical debt (2021) (111 pts)]]></title>
            <link>https://ariadne.space/2021/06/06/actually-bsd-kqueue-is-a-mountain-of-technical-debt/</link>
            <guid>42540442</guid>
            <pubDate>Sun, 29 Dec 2024 15:20:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ariadne.space/2021/06/06/actually-bsd-kqueue-is-a-mountain-of-technical-debt/">https://ariadne.space/2021/06/06/actually-bsd-kqueue-is-a-mountain-of-technical-debt/</a>, See on <a href="https://news.ycombinator.com/item?id=42540442">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p>A side effect of <a href="https://ariadne.space/2021/05/20/the-whole-freenode-kerfluffle/">the whole freenode kerfluffle</a> is that I’ve been looking at IRCD again.&nbsp; IRC, is of course a very weird and interesting place, and the smaller community of people who run IRCDs are largely weirder and even more interesting.</p>
<p>However, in that community of IRCD administrators there happens to be a few incorrect systems programming opinions that have been cargo culted around for years.&nbsp; This particular blog is about one of these bikesheds, namely the <em>kqueue vs epoll debate</em>.</p>
<p>You’ve probably heard it before.&nbsp; It goes something like this, <em>“BSD is better for networking, because it has kqueue.&nbsp; Linux has nothing like kqueue, epoll doesn’t come close."</em>&nbsp; While I agree that epoll doesn’t come close, I think that’s actually a feature that has lead to a much more flexible and composable design.</p>
<h2 id="in-the-beginning">In the beginning…</h2>
<p>Originally, IRCD like most daemons used <code>select</code> for polling sockets for readiness, as this was the first polling API available on systems with BSD sockets.&nbsp; The <code>select</code> syscall works by taking a set of three bitmaps, with each bit describing a file descriptor number: bit 1 refers to file descriptor 1 and so on.&nbsp; The bitmaps are the <code>read_set</code>, <code>write_set</code> and <code>err_set</code>, which map to sockets that can be read, written to or have errors accordingly.&nbsp; Due to design defects with the <code>select</code> syscalls, it can only support up to <code>FD_SETSIZE</code> file descriptors on most systems.&nbsp; This can be mitigated by making <code>fd_set</code> an arbitrarily large bitmap and depending on <code>fdmax</code> to be the upper bound, which is what WinSock has traditionally done on Windows.</p>
<p>The <code>select</code> syscall clearly had some design deficits that negatively affected scalability, so AT&amp;T introduced the <code>poll</code> syscall in System V UNIX.&nbsp; The <code>poll</code> syscall takes an array of <code>struct pollfd</code> of user-specified length, and updates a bitmap of flags in each <code>struct pollfd</code> entry with the current status of each socket.&nbsp; Then you iterate over the <code>struct pollfd</code> list.&nbsp; This is naturally a lot more efficient than <code>select</code>, where you have to iterate over all file descriptors up to <code>fdmax</code> and test for membership in each of the three bitmaps to ascertain each socket’s status.</p>
<p>It can be argued that <code>select</code> was bounded by <code>FD_SETSIZE</code> (which is usually 1024 sockets), while <code>poll</code> begins to have serious scalability issues at around <code>10240</code> sockets.&nbsp; These arbitrary benchmarks have been referred to as the C1K and C10K problems accordingly.&nbsp; Dan Kegel has a <a href="http://www.kegel.com/c10k.html">very lengthy post on his website</a> about his experiences mitigating the C10K problem in the context of running an FTP site.</p>
<h2 id="then-there-was-kqueue">Then there was kqueue…</h2>
<p>In July 2000, Jonathan Lemon introduced kqueue into FreeBSD, which quickly propagated into the other BSD forks as well.&nbsp; kqueue is a kernel-assisted event notification system using two syscalls: <code>kqueue</code> and <code>kevent</code>.&nbsp; The <code>kqueue</code> syscall creates a handle in the kernel represented as a file descriptor, which a developer uses with <code>kevent</code> to add and remove <em>event filters</em>.&nbsp; Event filters can match against file descriptors, processes, filesystem paths, timers, and so on.</p>
<p>This design allows for a single-threaded server to process hundreds of thousands of connections at once, because it can register all of the sockets it wishes to monitor with the kernel and then lazily iterate over the sockets as they have events.</p>
<p>Most IRCDs have supported <code>kqueue</code> for the past 15 to 20 years.</p>
<h2 id="and-then-epoll">And then epoll…</h2>
<p>In October 2002, Davide Libenzi got <a href="http://www.xmailserver.org/linux-patches/nio-improve.html">his <code>epoll</code> patch</a> merged into Linux 2.5.44.&nbsp; Like with kqueue, you use the <code>epoll_create</code> syscall to create a kernel handle which represents the set of descriptors to monitor.&nbsp; You use the <code>epoll_ctl</code> syscall to add or remove descriptors from that set.&nbsp; And finally, you use <code>epoll_wait</code> to wait for kernel events.</p>
<p>In general, the scalability aspects are the same to the application programmer: you have your sockets, you use <code>epoll_ctl</code> to add them to the kernel’s <code>epoll</code> handle, and then you wait for events, just like you would with <code>kevent</code>.</p>
<p>Like <code>kqueue</code>, most IRCDs have supported <code>epoll</code> for the past 15 years.</p>
<h2 id="what-is-a-file-descriptor-anyway">What is a file descriptor, anyway?</h2>
<p>To understand the argument I am about to make, we need to talk about <em>file descriptors</em>.&nbsp; UNIX uses the term <em>file descriptor</em> a lot, even when referring to things which are clearly <em>not</em> files, like network sockets.&nbsp; Outside the UNIX world, a file descriptor is usually referred to as a <em>kernel handle</em>.&nbsp; Indeed, in Windows, kernel-managed resources are given the <code>HANDLE</code> type, which makes this relationship more clear.&nbsp; Essentially, a kernel handle is basically an opaque reference to an object in kernel space, and the astute reader may notice some similarities to the <a href="https://en.wikipedia.org/wiki/Object-capability_model">object-capability model</a> as a result.</p>
<p>Now that we understand that file descriptors are actually just kernel handles, we can now talk about <code>kqueue</code> and <code>epoll</code>, and why <code>epoll</code> is actually the correct design.</p>
<h2 id="the-problem-with-event-filters">The problem with event filters</h2>
<p>The key difference between <code>epoll</code> and <code>kqueue</code> is that <code>kqueue</code> operates on the notion of <em>event filters</em> instead of <em>kernel handles</em>.&nbsp; This means that any time you want <code>kqueue</code> to do something new, you have to add a new type of <em>event filter</em>.</p>
<p><a href="https://www.freebsd.org/cgi/man.cgi?query=kqueue&amp;sektion=2">FreeBSD presently has 10 different event filter types</a>: <code>EVFILT_READ</code>, <code>EVFILT_WRITE</code>, <code>EVFILT_EMPTY</code>, <code>EVFILT_AIO</code>, <code>EVFILT_VNODE</code>, <code>EVFILT_PROC</code>, <code>EVFILT_PROCDESC</code>, <code>EVFILT_SIGNAL</code>, <code>EVFILT_TIMER</code> and <code>EVFILT_USER</code>.&nbsp; Darwin has additional event filters concerning monitoring Mach ports.</p>
<p>Other than <code>EVFILT_READ</code>, <code>EVFILT_WRITE</code> and <code>EVFILT_EMPTY</code>, all of these different event filter types are related to entirely different concerns in the kernel: they don’t monitor kernel handles, but instead other specific subsystems than sockets.</p>
<p>This makes for a powerful API, but one which lacks <a href="https://en.wikipedia.org/wiki/Composability">composability</a>.</p>
<h2 id="epoll-is-better-because-it-is-composable"><code>epoll</code> is better because it is composable</h2>
<p>It is possible to do almost everything that <code>kqueue</code> can do on FreeBSD in Linux, but instead of having a single monolithic syscall to handle <em>everything</em>, Linux takes the approach of providing syscalls which allow almost anything to be represented as a <em>kernel handle</em>.</p>
<p>Since <code>epoll</code> strictly monitors <em>kernel handles</em>, you can register <em>any</em> kernel handle you have with it and get events back when its state changes.&nbsp; As a comparison to Windows, this basically means that <code>epoll</code> is a kernel-accelerated form of <code>WaitForMultipleObjects</code> in the Win32 API.</p>
<p>You are probably wondering how this works, so here’s a table of commonly used <code>kqueue</code> event filters and the Linux syscall used to get a kernel handle for use with <code>epoll</code>.</p>
<table>
<thead>
<tr>
<th>BSD event filter</th>
<th>Linux equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>EVFILT_READ</code>, <code>EVFILT_WRITE</code>, <code>EVFILT_EMPTY</code></td>
<td>Pass the socket with <code>EPOLLIN</code> etc.</td>
</tr>
<tr>
<td><code>EVFILT_VNODE</code></td>
<td><code>inotify</code></td>
</tr>
<tr>
<td><code>EVFILT_SIGNAL</code></td>
<td><code>signalfd</code></td>
</tr>
<tr>
<td><code>EVFILT_TIMER</code></td>
<td><code>timerfd</code></td>
</tr>
<tr>
<td><code>EVFILT_USER</code></td>
<td><code>eventfd</code></td>
</tr>
<tr>
<td><code>EVFILT_PROC</code>, <code>EVFILT_PROCDESC</code></td>
<td><code>pidfd</code>, alternatively bind processes to a <code>cgroup</code> and monitor <code>cgroup.events</code></td>
</tr>
<tr>
<td><code>EVFILT_AIO</code></td>
<td><code>aiocb.aio_fildes</code> (treat as socket)</td>
</tr>
</tbody>
</table>
<p>Hopefully, as you can see, <code>epoll</code> can automatically monitor <em>any</em> kind of kernel resource without having to be modified, due to its composable design, which makes it superior to <code>kqueue</code> from the perspective of having less technical debt.</p>
<p>Interestingly, <a href="https://www.freebsd.org/cgi/man.cgi?query=eventfd&amp;apropos=0&amp;sektion=2&amp;manpath=FreeBSD+13.0-RELEASE+and+Ports&amp;arch=default&amp;format=html">FreeBSD has added support for Linux’s <code>eventfd</code> recently</a>, so it appears that they may take <code>kqueue</code> in this direction as well.&nbsp; Between that and FreeBSD’s <a href="https://www.freebsd.org/cgi/man.cgi?query=procdesc&amp;sektion=4&amp;apropos=0&amp;manpath=FreeBSD+13.0-RELEASE+and+Ports">process descriptors</a>, it seems likely.</p>

  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[China turns members of its diaspora into spies (215 pts)]]></title>
            <link>https://www.economist.com/china/2024/12/26/how-china-turns-members-of-its-diaspora-into-spies</link>
            <guid>42540427</guid>
            <pubDate>Sun, 29 Dec 2024 15:18:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.economist.com/china/2024/12/26/how-china-turns-members-of-its-diaspora-into-spies">https://www.economist.com/china/2024/12/26/how-china-turns-members-of-its-diaspora-into-spies</a>, See on <a href="https://news.ycombinator.com/item?id=42540427">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><main role="main" id="content"><article data-test-id="Article" id="new-article-template"><div data-test-id="standard-article-template"><section><p><span><a href="https://www.economist.com/china" data-analytics="sidebar:section"><span>China</span></a></span><span> | <!-- -->Eyes everywhere</span></p><h2>America is on the hunt for these non-traditional agents. But its efforts risk backfiring</h2></section><section><figure><img alt="Illustration depicting a stylized eye with the Chinese flag as the iris, connected by yellow network lines to two red-tinted globes on either side, symbolizing global surveillance or influence. The background is black with red dots, creating a striking and" fetchpriority="high" width="1280" height="720" decoding="async" data-nimg="1" sizes="(min-width: 960px) 700px, 95vw" srcset="https://www.economist.com/cdn-cgi/image/width=360,quality=80,format=auto/content-assets/images/20250104_CND001.jpg 360w, https://www.economist.com/cdn-cgi/image/width=384,quality=80,format=auto/content-assets/images/20250104_CND001.jpg 384w, https://www.economist.com/cdn-cgi/image/width=480,quality=80,format=auto/content-assets/images/20250104_CND001.jpg 480w, https://www.economist.com/cdn-cgi/image/width=600,quality=80,format=auto/content-assets/images/20250104_CND001.jpg 600w, https://www.economist.com/cdn-cgi/image/width=834,quality=80,format=auto/content-assets/images/20250104_CND001.jpg 834w, https://www.economist.com/cdn-cgi/image/width=960,quality=80,format=auto/content-assets/images/20250104_CND001.jpg 960w, https://www.economist.com/cdn-cgi/image/width=1096,quality=80,format=auto/content-assets/images/20250104_CND001.jpg 1096w, https://www.economist.com/cdn-cgi/image/width=1280,quality=80,format=auto/content-assets/images/20250104_CND001.jpg 1280w, https://www.economist.com/cdn-cgi/image/width=1424,quality=80,format=auto/content-assets/images/20250104_CND001.jpg 1424w" src="https://www.economist.com/cdn-cgi/image/width=1424,quality=80,format=auto/content-assets/images/20250104_CND001.jpg"><figcaption><span>Illustration: Ben Jones</span></figcaption></figure></section><div><section data-body-id="cp2"><p data-component="paragraph"><span data-caps="initial">A</span><small>MONG EXILED</small> Chinese dissidents, Tang Yuanjun was well known. He had participated in the Tiananmen Square protests of 1989 and landed in prison as a result. He later defected to Taiwan, swimming to one of its outlying islands from a fishing boat. America granted him asylum and he settled in New York, becoming the leader of Chinese pro-democracy groups. But in August 2024 he was arrested by the <small>FBI</small>. He admits to having used his position to collect information for the Chinese government and to report on his fellow activists. He did this so that the government would allow him to return to China to see his ailing parents.</p></section><p><h3 id="article-tags">Explore more</h3><nav aria-labelledby="article-tags"><a href="https://www.economist.com/topics/china" data-analytics="tags:china"><span>China</span></a><a href="https://www.economist.com/topics/united-states" data-analytics="tags:united_states"><span>United States</span></a></nav></p></div></div></article></main></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Is Iceland getting ready to join the EU? (156 pts)]]></title>
            <link>https://mikegalsworthy.substack.com/p/is-iceland-getting-ready-to-join</link>
            <guid>42539987</guid>
            <pubDate>Sun, 29 Dec 2024 14:00:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mikegalsworthy.substack.com/p/is-iceland-getting-ready-to-join">https://mikegalsworthy.substack.com/p/is-iceland-getting-ready-to-join</a>, See on <a href="https://news.ycombinator.com/item?id=42539987">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p>Polling shows that the Icelandic public are keener on it than ever before, with more Icelanders wanting to join the EU than stay out. The turnaround happened with Putin’s second invasion of Ukraine in Feb 2022, but other domestic and international dynamics also come into play.</p><p><span>Things are moving fast, as Iceland’s new Foreign Minister </span><a href="https://www.euronews.com/my-europe/2024/12/22/icelands-incoming-government-says-it-will-put-eu-membership-to-referendum-by-2027" rel="">has just announced</a><span> “a referendum on the continuation of Iceland's European Union accession talks and that this referendum be held no later than 2027”. You might ask what is meant by a “continuation”. Ah, well that’s a whole fascinating historical story which I’ll gladly set out below. But basically, the last social democratic government started accession talks in 2009, then a conservative-led government came into power and put talks on pause in 2013, then tried to cancel it outright in 2015, but without parliamentary approval. That led to anger and an open question on whether the accession talks have indeed been cancelled or are still formally open and ready to be picked up again! In the meantime, the national polling has gone from being against joining the EU to being for joining the EU (see graph further down), so the time could be ripe for Iceland to finally join.</span></p><p>But firstly, let’s look at the election that just happened, then this history of Iceland’s place in EFTA, the EEA and its stalled attempt to join the EU. Then we’ll look at what happens now and what the current push means for Iceland, EFTA, Norway and the UK.</p><p>The Icelandic parliament is called the Alþingi (pronounced “Althingi”). It is the oldest surviving parliament (founded in 930 AD) and currently has 63 seats to represent the Icelandic population of nearly 400,000.</p><p>Elections were held in Iceland on 30 November 2024 and the results were:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png" width="1196" height="456" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:456,&quot;width&quot;:1196,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:47383,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F04f2582e-d876-49a2-a2d2-c0f459cea738_1196x456.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The previous government had been comprised of a coalition of Independence (16 seats), Progressive (13) and Left-Green (8). So in the table above, you can see just how badly they all crashed out.</p><p>The last government was an odd mix, with both Independence (named after Icelandic independence movement from Denmark, which happened in 1918) and Progressive parties both being centre-right parties - but Left-Green doing what it says on the tin and being left wing. In October, prime minister Bjarni Benediktsson announced that the government had collapsed due to disagreements on several fronts and called the general election.</p><p>Note that the Reform Party is nothing like Reform UK – it is liberal, increasingly called “Liberal Reform Party” and staunchly pro-EU. Also, just as the “Progressive Party” is not progressive, the “People’s Party” may sound reactionary, but they are very centrist. Conversely, the “Centre Party” are right-wing populists. Finally, the Pirate Party likes direct democracy.</p><p><span>The new prime minister is </span><a href="https://en.wikipedia.org/wiki/Kristr%C3%BAn_Frostad%C3%B3ttir" rel="">Kristrún Frostadóttir</a><span> (age 36), leader of the Social Democratic Alliance (15 seats). </span><a href="https://grapevine.is/news/2024/12/04/kristrun-frostadottir-begins-formal-government-formation/" rel=""><span>On Dec 4</span><sup>th</sup><span>, she began coalition negotiations</span></a><span> with the Reform Party (11 seats) and People's Party (10 seats) and on Dec 21</span><sup>st</sup><span> they </span><a href="https://icelandmonitor.mbl.is/news/news/2024/12/21/these_are_the_ministers_of_the_government/" rel="">announced their government and ministers</a><span>. The new government now holds 36 out of the 63 seats in the Alþingi.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png" width="496" height="592" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/ae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:592,&quot;width&quot;:496,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:450520,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae1c3334-86c6-49ec-8421-470f8bbe8c61_496x592.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><h6>                               Kristrún Frostadóttir, official portrait.</h6><p><span>Given previously-expressed concerns by Frostadóttir that any referendum could be divisive, </span><a href="https://www.reuters.com/world/europe/icelands-pro-eu-parties-lead-polls-ahead-snap-election-2024-11-28/" rel="">alluding to the narrow margin of Brexit</a><span> in her commentary on the matter, it is surprising how quicky they announced that there would indeed be a referendum on picking up EU accession talks – and the choice of word being “continuation” rather than “starting”, “restarting” or “renewed” indicates very strongly that they believe that the EU will let them continue from where they left off, should they gain the popular mandate for it.</span></p><p>To understand the debate that will happen in Iceland now, it’s very useful to understand Iceland’s relationship with EFTA, the EEA, the EU and even the US.</p><p>Iceland joined EFTA in 1970. At that time, EFTA had been around for ten years, initially founded in 1960 by the “outer seven” of the UK, Portugal, Austria, Switzerland and the Nordic countries Denmark, Sweden and Norway. These “outer seven” counterbalanced the “inner six” of Belgium, France, West Germany, Italy, Luxembourg, and the Netherlands. Those “inner six” had all signed the Treaty of Paris in 1952 to make the European Coal and Steel Community (ECSC), which then developed into just the “European Communities (EC)” in 1967, comprising also the European Atomic Energy Community (Euratom) and the European Economic Community (EEC).</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png" width="460" height="752" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:752,&quot;width&quot;:460,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:162941,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F496c61ce-588b-4a6d-b53e-83c1d7c1d308_460x752.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>In 1972, the UK and Denmark left EFTA to join the EC. Then in 1985, Portugal also left EFTA to join the EC. The 8 members of EFTA (“outer seven” plus Iceland) were now down to 5. In the late 1980s, the EFTA countries began discussing options to join the EEC part of the European Communities. This was while two new members joined EFTA – Finland (1986) and Liechtenstein (1991). By May 1992, the EEC had been renamed the EEA (European Economic Area) and all 7 member states of EFTA signed “The EEA Agreement” alongside the 12 member states of the EC.</p><p>So far, so good… but Switzerland then held a referendum on EEA entry in December 1992 in which its population voted “no” by 50.3% to 49.7%. This is why Switzerland has been out of the EEA and just had messy bilateral arrangements with the EEA/Single Market ever since.</p><p>In 1994 Sweden, Finland and Austria jumped ship from EFTA into the brand-new European Union (the Maastricht Treaty came into force in 1993, forming the “European Union”). The Norwegian government also tried to jump the EFTA ship into the EC in 1972 and then into the EU in 1994, but both times the public stopped them in a referendum. In 1972, “No” won with 53.5% of the vote and in 1994, “No” won with 52.2% of the vote.</p><p>So by the end of 1994, just Norway, Switzerland, Iceland and Liechtenstein were left in EFTA, which remains the case 30 years later. Referendums explain why Norway and Switzerland were kept out of moving into the EU, but as for Liechtenstein and Iceland, they both felt they were too small to have any influence in the EU and with the EEA covering their basic needs, they just never mustered the political will to attempt the move when the bigger countries did.</p><p><span>The mood music changed dramatically in 2008 with the banking crisis. Iceland was particularly badly hit. All three of the country's major privately owned commercial banks (Kaupthing, Glitnir and Landsbankinn) defaulted in late 2008. This made it, in terms of relativity to the size of the nation’s economy, the </span><a href="https://harris.uchicago.edu/news-events/events/2008-icelandic-financial-crisis-arni-mathiesen" rel="">largest systemic banking collapse in economic history</a><span>. According to Gudrun Johnsen, who was on the special commission set up to learn lessons from Iceland's banking collapse: </span><a href="https://www.bbc.co.uk/news/business-35485876" rel="">“80% of the stock market was wiped out overnight</a><span>... About every other business in Iceland became technically bankrupt. 97% of the banking sector collapsed in a matter of three days.” The banks were far too big to save by the small nation’s economy and were just allowed to fail.</span></p><p><span>The currency (</span><a href="https://en.wikipedia.org/wiki/Icelandic_kr%C3%B3na" rel="">Icelandic króna</a><span>) had already been seen to be extremely volatile and vulnerable before that stage. Icelanders had, before the banking collapse, started thinking about the safety of the Euro as an alternative. </span><a href="https://www.reuters.com/article/bondsNews/idUSL1111656420070911/" rel="">A poll in 2007</a><span> had found 53% of Icelanders favoured adopting the Euro and </span><a href="https://www.sedlabanki.is/uploads/files/WP-26.pdf" rel="">a paper in 2004</a><span> had calculated that Iceland joining the EU and Euro could boost trade with other Euro countries by 60% leading to a 4% increase in GDP per capita. Additionally, Iceland felt alone and started wishing that it had close friends to help handle such turbulence.</span></p><p>All of this was precipitated when, under public pressure, snap parliamentary elections were held in Iceland on 25 April 2009. The (Conservative) Independence Party, which had been governing and which had constantly been the most voted-for party since 1937 suddenly found itself in second place (16 seats) to the Social Democratic Party (20 seats). A government was formed between the Social Democratic Party and the Left-Green movement (14 seats).</p><p><span>Iceland </span><a href="https://www.reuters.com/article/world/factbox-iceland-to-begin-eu-accession-talks-idUSLF250651/" rel="">applied to join the European Union</a><span> in July 2009. Formal negotiations began a year later in July 2010.</span></p><p><span>Iceland’s economy started stabilising and then growing by mid 2011. Emergency legislation to take over the domestic running of the three largest banks, the IMF IMF led a $10 billion financial aid package to pull Iceland out crisis, the application to EU membership and the tourism boom (driven largely by </span><a href="https://www.britannica.com/video/did-you-know-Eyjafjallajokull-volcano-Iceland/-257511" rel="">spectacular volcanic eruptions 2010</a><span> and the use of Iceland in the Game of Thrones series) </span><a href="https://en.wikipedia.org/wiki/2008%E2%80%932011_Icelandic_financial_crisis" rel="">all helped</a><span>. In particular, Iceland’s tourism boom was dramatic and Iceland now has several times as many tourists per annum as its entire population.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png" width="460" height="534" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/ed99b737-f135-4229-b352-98a6ca699d8d_460x534.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:534,&quot;width&quot;:460,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:52901,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed99b737-f135-4229-b352-98a6ca699d8d_460x534.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>(Picture from: https://en.wikipedia.org/wiki/Tourism_in_Iceland)</p><p><span>Ironically, financial recovery seems to have helped the political party (Independence) who had been blamed for the 2008 banking crisis. Parliamentary elections were held in April 2013 and Independence </span><a href="https://www.bbc.co.uk/news/world-europe-22320282" rel="">stormed back to power</a><span>. With their fellow Eurosceptic party, the Progressive Party, which also won 19 seats, they formed a coalition government which held 38 seats of the Alþingi’s 63 seats. In September 2013 the </span><a href="https://www.euractiv.com/section/eu-priorities-2020/news/iceland-walks-out-on-eu-membership-talks/" rel="">Eurosceptic government dissolved its accession team</a><span> and suspended its application to join the EU. Then in March 2015, the Foreign Minister, Gunnar Bragi Sveinsson, announced he had written a letter to Brussels saying that Iceland’s application to join the EU was cancelled. This caused huge political blowback in Iceland because the Alþingi had note voted for this action to be taken, so there were huge questions about the power of the Foreign Minister and the legitimacy of this action. On the EU side, a spokesperson for the European Union's Enlargement Commissioner said that the EU has taken note of the letter from the Icelandic government </span><a href="https://www.ruv.is/frettir/erlent/umsoknin-ekki-formlega-dregin-til-baka" rel="">but that the application had yet to be formally withdrawn</a><span>. Three days later, on March 15 2015, there were protests against the government’s unilateral behaviour in front of the Icelandic Parliament building.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png" width="600" height="445" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:445,&quot;width&quot;:600,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:661956,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8902c189-fdbf-413d-9f39-4e43e3c834f0_600x445.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><h6>Picture from anti-withdrawal protest on March 15, 2015 in front of Icelandic Parliament building. The sign reads “Við ráðum”, which means “We decide” or “We are in charge”, referring to the will of the people vs the Minister’s lone action. Photographer: G. Pétur Matthíasson</h6><p>However, despite the protests, this action effectively ended the EU accession negotiations until the revival in the last few days – nearly a decade later. In the 2016 elections, Independence increased its lead to 21 seats (although Progressive Party tumbled), in the 2017 elections they led again with 16 seats forming a coalition with Progressives and Left-Green, and then in 2021, that coalition held. So 2024 has provided the second break from decades long dominance of the Independence Party. Through all this time, there was broad agreement in the public that a referendum was needed on whether to continue or cancel the accession talks.</p><p>Since the opening of accession talks, there has been polling on whether the public at large are, in principle, for or against joining the EU. From 2010 through to 2022, the answer was “no”. Although that “no” was declining slowly over time, it was clearly “no” until 2022 when a remarkable crossover happened:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png" width="1456" height="975" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/fa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:975,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:672190,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa9470a8-12c4-4225-b5bd-0c6ee15757df_2008x1344.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><h6>Polling data courtesy of Jón Steindór Valdimarsson</h6><p><span>Putin’s invasion of Ukraine shocked many in Europe – and in Iceland it reignited the sense of vulnerability that Icelanders felt about Russia and also their currency in a turbulent world. Since that point, the polling lead for “yes” has been sustained consistently over several time points during the last two years. In the latest poll, the &gt;11% gap would translate into a 57% yes vs 43% no in a referendum where “don’t knows” are excluded. Beyond concerns about Russia and the more unstable world that can knock around their currency so easily, there is the relationship with the US. After WWII, the US became something of the protector of Iceland, with </span><a href="https://www.government.is/diplomatic-missions/embassy-of-iceland-in-washington-d.c/iceland-and-the-us" rel="">a bilateral defence agreement in 1951</a><span> and a US military base in Iceland. In fact, the cod wars against the British fishing fleets were finally resolved in Iceland’s favour by the US wading in to protect Iceland and its geographic strategic importance in NATO. With Russian threats menacing norther Europe, but a new president in the US who shows very little interest in NATO or keeping back Russia, Icelanders worry that Trump would have no interest in defending Iceland, especially given that the US base in Iceland no longer hosts army troops. I’m sure Icelanders were not enamoured to hear Trump’s </span><a href="https://www.nbcnews.com/politics/donald-trump/trump-says-ownership-greenland-absolute-necessity-rcna185197" rel="">very recent rekindled pronouncements on Greenland</a><span> either.</span></p><p><span>The “Yes, Iceland” campaign that started in 2009 had shut down in 2015, following the Foreign Minister’s letter. So </span><a href="https://en.wikipedia.org/wiki/J%C3%B3n_Steind%C3%B3r_Valdimarsson" rel="">Jón Steindór Valdimarsson</a><span>, and Icelandic ex-MP (2017-2021) from the Social Democratic Alliance set up </span><a href="https://evropa.is/" rel="">Evrópuhreyfingin</a><span> (European Movement Iceland) in May 2022 to campaign firstly for a referendum on continuing Iceland’s EU accession talks and then to campaign for Iceland to join the EU. They have 1,600 members I am told and I’ve just received their Christmas email celebrating the announcement of the referendum and looking to mobilise their base.</span></p><p><span>I’ll be blunt – I wrote this section header before it was announced that there will be a referendum before 2027. That announcement caught me off-guard. I began writing this piece on Dec 9</span><sup>th</sup><span> after a long chat with Jón (the European Movement Iceland founder) and I started documenting the history of Iceland-EU relations and requesting data and materials from Jón for a write up. I had been under the impression that the whole question of *whether* the new government would tackle the issue of joining the EU would happen in the new year, maybe even in Feb.</span></p><p><span>So, it’s clearly “game on” already. Note that the new Icelandic government also announced that it would </span><a href="https://schengen.news/icelands-new-government-plans-to-put-eu-accession-to-referendum-by-2027" rel="">assemble a panel of experts to analyse</a><span> the advantages and disadvantages of adopting the Euro. I do not know whether this would happen in parallel to a referendum on accession talks, but I imagine it would be planned that major conclusions of this panel would be presented to the public ahead of any vote on accession talks.</span></p><p><span>Also, a note of caution. When David Cameron came to power in 2015 on the promise of a referendum on the UK’s membership of the EU, he had promised that the referendum would happen </span><a href="https://www.bbc.co.uk/news/uk-politics-21148282" rel="">before the end of 2017</a><span>. In reality, he </span><a href="https://www.theguardian.com/politics/2016/feb/20/cameron-set-to-name-eu-referendum-date-after-cabinet-meeting" rel="">decided in Feb 2016</a><span> that the referendum would be held in four months’ time. Similarly in Iceland, the government have the power to announce the referendum at any point between now and the end of 2017 and may feel that sooner rather than later they want to put the issue to the people and not let the debate drag on for three long years, likely consuming a huge amount of the political bandwidth during that time and impeding progress in other areas of policy. All governments fall out of favour over time, so getting the balance right between not rushing it to the detriment of public education and good referendum structure (as Cameron did) but not letting it string out until it feels more like a burden than an opportunity, will be important.</span></p><p><span>One thing that few people (at least in the UK) have considered is what Iceland joining the EU would mean for EFTA (4 members) and the EEA agreement (3 EFTA members). According to Per Christiansen, a professor of European law &amp; judge at the EFTA Court from 2011-2023, the </span><a href="https://www.ruv.is/english/2024-11-22-norway-keenly-watching-icelandic-election-428442" rel="">days of the EEA Agreement would be numbered</a><span> if Iceland became an EU member. Essentially, to reduce the EEA agreement to just Norway and the Principality of Liechtenstein (population under 40,000) would make the institutions difficult to maintain with any real meaning. Similarly with EFTA per se, are they really going to maintain the EFTA Court and the negotiators to effectively keep just copying EU trade deals?</span></p><p>Beyond a departing Iceland taking EFTA and the EEA agreements to under critical mass for any notion of a club of members, there are also the other aspects that could cause a domino effect upon Norway in particular. Norway and Iceland are culturally close. Norway also has a European Movement, which is aiming to get Norway into the EU and which talks regularly with European Movement Iceland. They watch each other.</p><p><span>Like in Iceland, the 2022 invasion of Ukraine by Putin shifted the conversation in Norway about potentially joining the EU and shifted the dial on polling. Some 30 years after Norway last shut down the option (in 1994) there’s bubbling conversation about whether the </span><a href="https://www.newsinenglish.no/2024/11/29/new-eu-debate-rises-in-norway/" rel="">newest generation of Norwegians should have their say</a><span>. A report published in April 2024 on the Norwegian-EEA relationship has also added to the debate, with the leader of the Liberal Party saying that </span><a href="http://www.nordiclabourjournal.org/i-fokus/in-focus-2024/theme-the-nordic-region-and-the-eu/article.2024-04-25.6671548437" rel="">Norway is better off participating in the politics</a><span> that decide the rules of its labour market rather than just receiving them from other countries.</span></p><p>And resistance to EU membership is falling in Norway - 48% would now vote no to the EU, down from 54% three years ago and 70% in 2016. That’s still ahead of the 32% that would vote yes, but the gap is shrinking quickly. The general wisdom is that if there were an external factor (such as Iceland leaving EEA &amp; EFTA – and joining the EU and, with it, the EU’s fishing policy), then that could be enough for Norway to get shaken out of its comfortably rich-but-obsolete model and also seriously consider joining the EU.</p><p>There are lots of potential dynamics here for European Movement UK’s drive for the UK to join the EU. Firstly, of course, there’s the story that alongside Moldova, Ukraine, Georgia and Eastern European countries looking to join the team of the European Union, there’s also the western European countries of Iceland and Norway. That changes how the EU is perceived and it points to the fact the attraction of the EU is very real to an increasing number of nations and, far from “falling apart”, the EU is fundamentally growing as a perceived guarantor of stability and shared strength.</p><p>There is also the fascinating dynamic of EFTA-EEA and what it means if those associations collapse in favour of the EU. I don’t believe it was ever a realistic proposition that the UK joined EFTA, however, the notion that there’s some half-way house to land in would somewhat vapourise if EFTA became no more. That may remove a stepping-stone to the EU… but it could also remove the potential to get stuck in an inadequate compromise position that we languish in, when full EU membership was always the thing to go for.</p><p>Finally, the model that Iceland is pursuing in its journey mirrors the one that I currently believe we should take – namely an initial referendum (simple majority) on giving our government licence/permission to engage in negotiations… to be followed at a later date by a referendum (probably with a set of thresholds) on an actual deal to be set before the UK public for their approval. Either way, the fact that others in our neighbourhood are moving in a similar direction means that Iceland, Norway and the UK have pro-European contingents that have a shared vision and can learn from each other as we work together over the next years to join the neighbourhood team and strengthen this great continent of ours.</p><p><em>A special note of thanks to Jón Steindór Valdimarsson for taking the time to walk me through so many fascinating stories and dynamics around Iceland’s relationship with Europe and the EU.</em></p></div></article></div><div id="discussion"><h4>Discussion about this post</h4></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why I don't do Domain Driven Design (2018) (101 pts)]]></title>
            <link>https://www.tonymarston.net/php-mysql/dont-do-domain-driven-design.html</link>
            <guid>42539477</guid>
            <pubDate>Sun, 29 Dec 2024 12:17:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.tonymarston.net/php-mysql/dont-do-domain-driven-design.html">https://www.tonymarston.net/php-mysql/dont-do-domain-driven-design.html</a>, See on <a href="https://news.ycombinator.com/item?id=42539477">Hacker News</a></p>
<div id="readability-page-1" class="page">

  <!-- header -->

<div id="navigation">
<ul>
  <li><a href="https://www.tonymarston.net/index.html" target="_top">Home</a></li>
  <li><a href="https://www.tonymarston.net/aboutme/index.html" target="_top">About Me</a></li>
  
  <li id="current"><a href="https://www.tonymarston.net/php-mysql/index.html" target="_top">PHP/MySQL</a></li>
</ul>
</div> <!-- navigation -->





<dl id="index">
<dt><a href="#introduction">Introduction</a></dt>
<p>
	<dt><a href="#table1">Table 1: Features of Domain Driven Design</a></dt>
	<dt><a href="#definitions">DDD Definitions</a></dt>
</p>
<dt><a href="#standard.design.process">A standard design process</a></dt>

<dt><a href="#my.personal.approach">Features of my personal approach</a></dt>


<dt><a href="#advice.which.i.ignore">DDD "advice" which I ignore</a></dt>
<p>
	<dt><a href="#ignore.associations">Associations</a></dt>
	<dt><a href="#ignore.aggregates">Aggregates</a></dt>
	<dt><a href="#ignore.compositions">Compositions</a></dt>
	<dt><a href="#ignore.class.hierarchies">Class hierarchies</a></dt>
	<dt><a href="#ignore.cqrs">CQRS</a></dt>
	<dt><a href="#ignore.factories">Factories</a></dt>
	<dt><a href="#ignore.getters.setters">Getters and Setters</a></dt>
	<dt><a href="#ignore.interfaces">Interfaces</a></dt>
	<dt><a href="#ignore.method.names">Method names</a></dt>
	<dt><a href="#ignore.repositories">Repositories</a></dt>
</p>

<dt><a href="#implementing.the.different">My implementation - Dealing with the differences</a></dt>
<p>
	<dt><a href="#entity.differences">Entity/Table differences</a></dt>
	<dt><a href="#html.differences">HTML differences</a></dt>
	<dt><a href="#transaction.differences">Transaction (use case) differences</a></dt>
	<dt><a href="#validation.differences">Validation differences</a></dt>
</p>

<dt><a href="#implementing.the.similar">My implementation - Dealing with the similarities</a></dt>
<p>
	<dt><a href="#entity.similarities">Entity/Table similarities</a></dt>
	<dt><a href="#sql.similarities">SQL query similarities</a></dt>
	<dt><a href="#html.similarities">HTML similarities</a></dt>
	<dt><a href="#transaction.similarities">Transaction (use case) similarities</a></dt>
	<dt><a href="#validation.similarities">Validation similarities</a></dt>
</p>

<dt><a href="#conclusion">Conclusion</a></dt>
<dt><a href="#references">References</a></dt>
<dt><a href="#history">Amendment History</a></dt>
<dt><a href="#comments">Comments</a></dt>
</dl>

<h2><a name="introduction">Introduction</a></h2>

<p>What is Domain Driven Design (DDD)? If you read <a href="https://en.wikipedia.org/wiki/Domain-driven_design">this Wikipedia article</a>, which is based on the contents of <a href="https://www.domainlanguage.com/wp-content/uploads/2016/05/DDD_Reference_2015-03.pdf">Domain-Driven Design Reference (PDF)</a> which was written by Eric Evans, you will see that it talks about DDD consisting of a number of high-level concepts and practices such as those which I have itemised in <a href="#table1">Table 1</a> below:</p>

<a name="table1"></a>
<table summary="features of Domain Driven Design">
<caption>Table 1: Features of Domain Driven Design</caption>
<colgroup>
  <col width="10px">
	<col width="*">
	<col width="300px">
</colgroup>
<tbody><tr>
	<th></th>
	<th>Feature</th>
	<th>My implementation</th>
</tr>

<tr>
	<td>1</td>
	<td>DDD is against the idea of having a single unified model; instead it divides a large system into <a href="#bounded-context.definition">bounded contexts</a>, each of which have their own model.</td>
	<td>Refer to <a href="#subsystems">A system of subsystems</a></td>
</tr>
<tr>
	<td>2</td>
	<td>The structure and language of software code (class names, class methods, class variables) should match the business <a href="#domain.definition">domain</a>. For example: if software processes loan applications, it might have classes like "loan application", "customers", and methods such as "accept offer" and "withdraw".</td>
	<td>Refer to <a href="#class.names">Class names</a>
	<br>Refer to <a href="#method.names">Method names</a>
	<br>Refer to <a href="#class.variables">Class variables</a></td>
</tr>

<tr>
	<td>3</td>
	<td>Domain-driven design is based on the following goals:
	<ul>
	<li>placing the project's primary focus on the core domain and domain logic layer</li>
	<li>basing complex designs on a model of the domain</li>
	<li>initiating a creative collaboration between technical and domain experts to iteratively refine a conceptual model that addresses particular domain problems</li>
	</ul>
	</td>
	<td>Refer to <a href="#one.class.per.table">A separate class for each table</a></td>
</tr>

<tr>
	<td>4</td>
	<td>Of primary importance is a <i>domain</i> of the software, the subject area to which the user applies a program. Software's developers build a domain model: a system of abstractions that describes selected aspects of a domain and can be used to solve problems related to that domain.
<p>These aspects of domain-driven design aim to foster a <i>common language</i> shared by domain experts, users, and developers - the<i> ubiquitous language</i>. The <i>ubiquitous language</i> is used in the domain model and for describing system requirements. </p>
<p><i>Ubiquitous language</i> is one of the pillars of DDD together with <i>strategic design</i> and <i>tactical design</i>.</p></td>
	<td>Refer to <a href="#domain.definition">domain</a>
	<br>Refer to <a href="#ubiquitous-language.definition">ubiquitous language</a>
	<br>Refer to <a href="#abstraction.definition">Abstraction</a></td>
</tr>

<tr>
	<td>5</td>
	<td>In domain-driven design, the Domain layer is one of the common layers in an object-oriented multi-layered architecture.</td>
	<td>Refer to <a href="#layered.architecture">A layered architecture</a></td>
</tr>

<tr>
	<td>6</td>
	<td>Domain-driven design recognizes multiple kinds of models:
	<ul>
	<li>An <b>entity</b> is an object defined not by its attributes, but its identity.</li>
	<li>A <b>value object</b> is an immutable object that contains attributes but has no conceptual identity.</li>
	</ul>
	</td>
	<td>Refer to <a href="#object.classification">Object classification</a></td>
</tr>

<tr>
	<td>7</td>
	<td>Models can also define <i>events</i> (something that happened in the past). A domain event is an event that domain experts care about.  Models can be bound together by a root entity to become an aggregate. Objects outside the aggregate are allowed to hold references to the root but not to any other object of the aggregate. The aggregate root checks the consistency of changes in the aggregate. Drivers do not have to individually control each wheel of a car, for instance: they simply drive the car. In this context, a car is an aggregate of several other objects (the engine, the brakes, the headlights, etc.).</td>
	<td>Refer to <a href="#domain.events">Domain events</a>
	<br>Refer to <a href="#ignore.aggregates">Aggregates</a>
	<br>Refer to <a href="#ignore.compositions">Compositions</a></td>
</tr>

<tr>
	<td>8</td>
	<td>In domain-driven design, an object's creation is often separated from the object itself.
	<ul>
	<li>A <a href="https://en.wikipedia.org/wiki/Information_repository">repository</a>, for instance, is an object with methods for retrieving domain objects from a data store (e.g. a database).</li>
	<li>A <a href="https://en.wikipedia.org/wiki/Factory_(object-oriented_programming)">factory</a> is an object with methods for directly creating domain objects.</li>
	<li>When part of a program's functionality does not conceptually belong to any object, it is typically expressed as a <a href="https://en.wikipedia.org/wiki/Service_(systems_architecture)">service</a>.</li>
	</ul></td>
	<td>Refer to <a href="#ignore.repositories">Repositories</a>
	<br>Refer to <a href="#ignore.factories">Factories</a></td>
</tr>

<tr>
	<td>9</td>
	<td>A bounded context is analogous to a <a href="https://en.wikipedia.org/wiki/Microservices">microservice</a>. In software engineering, a microservice architecture is an architectural pattern that arranges an application as a collection of loosely coupled, fine-grained services, communicating through lightweight protocols. One of its goals is to enable teams to develop and deploy their services independently. This is achieved by creating components which exhibit <a href="https://en.wikipedia.org/wiki/Loose_coupling">loose coupling</a> instead of <a href="https://en.wikipedia.org/wiki/Coupling_(computer_programming)#Disadvantages_of_tight_coupling">tight coupling</a>.</td>
	<td>Refer to <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#coupling">Coupling</a>
	<br>Refer to <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#loose.coupling">Loose coupling (good)</a>
	<br>Refer to <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#tight.coupling">Tight coupling (bad)</a></td>
</tr>

<tr>
	<td>10</td>
	<td>Although domain-driven design is not inherently tied to object-oriented approaches, in practice, it exploits the advantages of such techniques. These include entities/aggregate roots as receivers of commands/method invocations, the encapsulation of state within foremost aggregate roots, and on a higher architectural level, bounded contexts.
<p>As a result, domain-driven design is often associated with <a href="https://en.wikipedia.org/wiki/Plain_old_Java_object">Plain Old Java Objects</a> and <a href="https://en.wikipedia.org/wiki/Plain_old_CLR_object">Plain Old CLR Objects</a>, which are technically technical implementation details, specific to Java and the .NET Framework respectively. These terms reflect a growing view that domain objects should be defined purely by the business behavior of the domain, rather than by a more specific technology framework.</p>
<p>Similarly, the <a href="https://en.wikipedia.org/wiki/Naked_objects">naked objects</a> pattern holds that the user interface can simply be a reflection of a good enough domain model. Requiring the user interface to be a direct reflection of the domain model will force the design of a better domain model.</p>
  </td>
	<td>Refer to <a href="#one.class.per.table">A separate class for each table</a>
	<br>Refer to <a href="#inheritance">Inheritance</a>
	<br>Refer to <a href="#subclassing">Subclassing</a>
	<br>Refer to <a href="#ignore.aggregates">Aggregates</a>
	<br>Refer to <a href="#ignore.compositions">Compositions</a>
	<br>Refer to <a href="#ignore.class.hierarchies">Class hierarchies</a></td>
</tr>

<tr>
	<td>11</td>
	<td>While domain-driven design is compatible with <a href="https://en.wikipedia.org/wiki/Model-driven_engineering">model-driven engineering</a> and <a href="https://en.wikipedia.org/wiki/Model-driven_architecture">model-driven architecture</a>, the intent behind the two concepts is different. Model-driven architecture is more concerned with translating a model into code for different technology platforms than defining better domain models.
<p>However, the techniques provided by model-driven engineering (to model domains, to create domain-specific languages to facilitate the communication between domain experts and developers,...) facilitate domain-driven design in practice and help practitioners get more out of their models. Thanks to model-driven engineering's model transformation and code generation techniques, the domain model can be used to generate the actual software system that will manage it.</p></td>
	<td>Refer to <a href="#standard.design.process">A standard design process</a></td>
</tr>

<tr>
	<td>12</td>
	<td><a href="https://en.wikipedia.org/wiki/Command_Query_Responsibility_Segregation">Command Query Responsibility Segregation (CQRS)</a> is an architectural pattern for separating reading data (a 'query') from writing to data (a 'command').
<p>Commands mutate state and are approximately equivalent to method invocation on aggregate roots or entities. Queries read state but do not mutate it.</p>
<p>While CQRS does not require domain-driven design, it makes the distinction between commands and queries explicit with the concept of an aggregate root. The idea is that a given aggregate root has a method that corresponds to a command and a command handler invokes the method on the aggregate root.</p>
<p>The aggregate root is responsible for performing the logic of the operation and either yielding a failure response or just mutating its own state that can be written to a data store. The command handler pulls in infrastructure concerns related to saving the aggregate root's state and creating needed contexts (e.g., transactions).</p></td>
	<td>Refer to <a href="#ignore.cqrs">CQRS</a></td>
</tr>

<tr>
	<td>13</td>
	<td>Event sourcing is an architectural pattern in which entities track their internal state not by means of direct serialization or object-relational mapping, but by reading and committing events to an <a href="https://en.wikipedia.org/wiki/Event_store">event store</a>.
<p>When event sourcing is combined with <a href="https://en.wikipedia.org/wiki/Command_Query_Responsibility_Segregation">CQRS</a> and domain-driven design, aggregate roots are responsible for validating and applying commands (often by having their instance methods invoked from a Command Handler), and then publishing events. This is also the foundation upon which the aggregate roots base their logic for dealing with method invocations. Hence, the input is a command and the output is one or many events which are saved to an event store, and then often published on a message broker for those interested (such as an application's view).</p>
<p>Modeling aggregate roots to output events can isolate internal state even further than when projecting read-data from entities, as in standard n-tier data-passing architectures. One significant benefit is that axiomatic theorem provers are easier to apply, as the aggregate root comprehensively hides its internal state. Events are often persisted based on the version of the aggregate root instance, which yields a domain model that synchronizes in distributed systems through <a href="https://en.wikipedia.org/wiki/Optimistic_concurrency_control">optimistic concurrency</a>.</p></td>
	<td>Refer to <a href="https://www.tonymarston.net/php-mysql/object-relational-mappers-are-evil.html">Object Relational Mappers</a>
	<br>Refer to <a href="#ignore.aggregates">Aggregates</a>
	<br>Refer to <a href="#ignore.compositions">Compositions</a></td>
</tr>
</tbody></table>

<p>Although domain-driven design does not depend on any particular tool or framework, there are various open source frameworks available which can help design the data model and possibly offer code generation abilities. <a href="https://radicore.org/">RADICORE</a> is an open source framework specifically designed to help build and then run web-based database applications for the enterprise which are also known as <a href="https://en.wikipedia.org/wiki/Enterprise_software">Enterprise Applications</a>.</p>

<hr>
<h3><a name="definitions">DDD Definitions</a></h3>

<dl>
<dt><a name="domain.definition">domain</a></dt>
<dd>A sphere of knowledge, influence, or activity. The subject area to which the user applies a program is the domain of the software.
<p>A more detailed definition can be found on <a href="https://en.wikipedia.org/wiki/Domain_(software_engineering)">this wikipedia page</a>.</p>
<p>In a large system which is comprised of a number of small subsystems, is the system a single domain, or is each subsystem a separate domain?</p>
</dd>

<dt><a name="model.definition">model</a></dt>
<dd>A system of abstractions that describes selected aspects of a domain and can be used to solve problems related to that domain.</dd>

<dt><a name="ubiquitous-language.definition">ubiquitous language</a></dt>
<dd>A language structured around the domain model and used by all team members within a bounded context to connect all the activities of the team with the software.
<p>If each <a href="#bounded-context.definition">bounded context</a> is a separate subsystem it means that the users of each subsystem may use terminology or jargon which is unknown to users of other subsystems. While this may be important in the design phase to help ensure that it meets the requirements of its users it should have no effect on the implementation as software engineers have their own jargon.</p>
</dd>

<dt><a name="context.definition">context</a></dt>
<dd>The setting in which a word or statement appears that determines its meaning. <i>Statements about a model can only be understood in a context</i>.</dd>

<dt><a name="bounded-context.definition">bounded context</a></dt>
<dd>A description of a boundary (typically a <a href="#subsystems">subsystem</a>, or the work of a particular team) within which a particular model is defined and applicable.
<p>According to the <a href="https://en.wikipedia.org/wiki/Domain-driven_design#Relationship_to_other_ideas">wikipedia page </a>a bounded context is analogous to a <a href="#microservice.definition">microservice</a>.</p>
</dd>

<dt><a name="microservice.definition">microservice</a></dt>
<dd>A <a href="https://en.wikipedia.org/wiki/Microservices">microservice</a> is defined as follows:
<blockquote>
In software engineering, a microservice architecture is an architectural pattern that arranges an application as a collection of loosely coupled, fine-grained services, communicating through lightweight protocols. One of its goals is to enable teams to develop and deploy their services independently. This is achieved by reducing several dependencies in the codebase, allowing developers to evolve their services with limited restrictions, and hiding additional complexity from users. Consequently, organizations can develop software with rapid growth and scalability, as well as use off-the-shelf services more easily.
<p>Services in a microservice architecture are often processes that communicate over a network to fulfill a goal using technology-agnostic protocols such as HTTP.</p>
<p>A microservice is not a layer within a monolithic application (for example, the web controller or the backend-for-frontend). Rather, it is a self-contained piece of business functionality with clear interfaces, and may, through its own internal components, implement a layered architecture.</p>
</blockquote>
</dd>

<dt><a name="abstraction.definition">abstraction</a></dt>
<dd>Abstraction is the act of separating the abstract from the concrete, the similar from the different.
<p>As explained in <a href="http://www.laputan.org/drc/drc.html">Designing Reusable Classes</a> this leads to a style of programming known as <i>programming-by-difference</i> in which you define the <i>similar</i> in some sort of reusable module and the <i>different</i> in a unique module which has some sort of communication with the <i>similar</i> module. For example, if you have several <a href="#entity.definition">entities</a> which share the same protocols (methods) you can define those methods in an abstract class which can then be inherited by every concrete class.</p>
<p>This topic is explained in more detail in <a href="https://www.tonymarston.net/php-mysql/abstraction.html">The meaning of "abstraction"</a>.</p>
</dd>

</dl> <!-- end list -->

<hr>
<h2><a name="standard.design.process">A standard design process</a></h2>

<p>While working for various software houses where our job was to design and build bespoke systems for our clients I became very familiar with the steps needed to convert a set of requirements into a working system. Regardless of the business area involved - order processing, invoicing, stock control, shipments, timesheets, etc - these steps were always the same.</p>

<ul>
<li><a name="gather.requirements"></a><b>Gather Requirements</b> - This is always the trickiest part as some clients have only a vague idea of what they want and may assume that what they want is quite common and can be satisfied with standard software. It is only when you show them a system written for a different organisation that they can say "We don't do it like <i>that</i>, we do it like <i>this</i>". They are often quite surprised at the level of detail which is required, but they have to understand that we, as software builders, can only write software that does what we were asked to make it do. If we are asked to build a system that does A, B and C and that is what we deliver, then when somebody complains that it doesn't do X, Y and Z our only response can be "X, Y and Z were not on the list of requirements". This is why the <a href="https://en.wikipedia.org/wiki/Software_requirements_specification">Software Requirements Specification (SRS)</a> or Specification of Requirements (SOR) as supplied by the client has to be reworked in order to flesh out the outline requirements with those ever-so-important little details. It is quite common for the SOR to highlight only the common/usual scenarios and either gloss over, or omit entirely, the uncommon/unusual scenarios or <a href="https://en.wikipedia.org/wiki/Edge_case">edge cases</a>. If the designers are not told about these then how can they possibly provide a system that deals with them?
</li>

<li><a name="analyse.requirements"></a><b>Analyse Requirements</b> - This means going through all the requirements one by one to ensure that the terminology used by the client is understood by the designer(s), that anything assumed by the customer is stated explicitly. This sometimes means asking probing questions to ensure that not only are the normal situations covered, but also the exceptions. The number of different events is also important, as is their complexity and frequency.
</li>

<li><a name="logical.design"></a><b>Logical Design</b> - This may only exist on paper as a <a href="https://en.wikipedia.org/wiki/Website_wireframe">wireframe</a> or a <a href="https://en.wikipedia.org/wiki/Paper_prototyping">paper prototype</a> which gives some indication of what the eventual system will look like and how it will operate. Better than that would be a <a href="https://en.wikipedia.org/wiki/Software_prototyping">software prototype</a> which can act as a visual aid which provides a better level of interactivity, but which does not process any business rules. It can be constructed and modified very quickly using a prototyping tool, but it cannot be extended to produce the final system. It also helps to identify the logical database design, which can be expressed in an <a href="https://www.tonymarston.net/php-mysql/database-design.html#erd">Entity Relationship Diagram (ERD)</a>, and all the inputs and outputs to deal with that data. It is also essential to ensure that the design of the database is properly <a href="https://www.tonymarston.net/php-mysql/database-design.html#normalisation">normalised</a> in order to identify where a single conceptual "object" will actually require a group of tables in a hierarchy of relationships. Each of these tables should be regarded as a separate entity with its own structure and its own rules, and each parent-child relationship should be handled separately. The client is given a walk-through of this Logical Design in order to verify that it meets all his requirements.
</li>

<li><a name="gather-analyse-design"></a>The <b>Gather-Analyse-Design</b> cycle is usually an iterative process which is repeated several times until the client is sure that they have stated everything they require, that the designer(s) have fully understood each of those requirements, and that the logical design identifies to the client how those requirements will be met. It is very important that the users of the system play a part in this process. If only their managers identify the requirements they may only give a vague idea of the common situations and gloss over the exceptions. This is where the managers ask for a system that does A, B and C whereas the users want a system that does X, Y and Z. If the users who actually perform the day-to-day tasks are not given a system that helps them deal adequately with the exceptions as well as the normal then they may regard the system as being unusable and fight against its adoption.
<p>One the design has been signed off by the customer, meaning that they are satisfied that it will meet their requirements, the designers can produce an implementation schedule which shows the projected start and end dates for each piece of work. Resources for each piece can also be identified and costed. As each piece of work is completed, the actual dates can be compared with the planned dates to see if the project is on schedule, ahead of schedule or, more often than not, behind schedule.</p>
</li>

<li><a name="physical.design"></a><b>Physical Design</b> - This can only be produced after the logical design has been signed off by the client. It identifies what hardware will be needed, what software tools will be needed (such as the DBMS, programming language, framework and libraries), what programming resources will be needed, in what order the software components will be built, and the Test Plan. This is also the stage at which detailed program specifications can be written so the the programmers know precisely what they are supposed to build. The logical database design is then turned into a physical database using the chosen DBMS.</li>

<li><a name="implementation"></a><b>Implementation</b> - This is where the program specifications are turned into working code so that they can be assembled into the final product. The chosen framework may provide a certain number of reusable components, so the more it provides the less will have to be developed separately. This is where the classes and their methods which will exist in the Business layer are built, the business rules are coded, and the individual events/tasks are built and tested. Testing usually has several phases:
	<ul>
	<li>Unit Testing - where the analyst who wrote the program specification checks that what the developer wrote matches the specification.</li>
	<li>Integration Testing - where multiple parts of a system are tested as a group.</li>
	<li><a href="https://en.wikipedia.org/wiki/Acceptance_testing#User_acceptance_testing">User Acceptance Testing (UAT)</a> - where the users verify that the system meets their needs.</li>
	</ul>
</li>
</ul>

<p>The <a href="#gather-analyse-design">gather-analyse-design</a> cycle is undertaken without reference to what structure the software will finally take as that is nothing more than an implementation detail. It is vitally important that the designer(s) know <i>what</i> needs to be done before they start defining <i>how</i> it can or will be done. The design of the database is far more important than the design of the software, or, as Eric S. Raymond wrote in his book <a href="https://en.wikipedia.org/wiki/The_Cathedral_and_the_Bazaar">The Cathedral and the Bazaar</a>:</p>

<blockquote>
Smart data structures and dumb code works a lot better than the other way around.
</blockquote>

<p>The objective of the <a href="#gather-analyse-design">gather-analyse-design</a> cycle is to avoid the situation depicted in the following cartoon:</p>



<p>This is why it is vitally important that the customer provides detailed and exact descriptions of their needs. Anything which is assumed or implied must be converted into an exact, precise and unambiguous statement so that if an issue arises as a later date it can be traced backwards through UAT, the design phase, all the way up to the SRS/SOR.</p>

<p>Those developers who are taught OO theory before they have any experience in working with databases can very easily fall into the trap of assuming these OO theories were carved in stone by some god-like beings and brought down from the mountain top. I have examined lots of these theories, and I can see very little evidence that the authors have ever worked on an enterprise application with large numbers of database tables and input/output screens, so I take everything they say with a pinch of salt (and sometimes a bucket of disinfectant and a scrubbing brush). Refer to <a href="#advice.which.i.ignore">Advice which I ignore</a> for details.</p>

<hr>
<h2><a name="my.personal.approach">Features of my personal approach</a></h2>

<p>I have been designing and building enterprise applications for four decades, with the last two being dedicated to web-based enterprise applications using an object oriented language, and I do not follow the "advice" given in <a href="https://en.wikipedia.org/wiki/Domain-driven_design">Domain Driven Design</a>. I say "advice" because I cannot accept them as "rules which must be obeyed".</p>

<hr>
<h3><a name="layered.architecture">A layered architecture</a></h3>

<p>When I started programming with COBOL it was standard practice to use the monolithic <a href="https://www.tonymarston.net/php-mysql/3-tier-architecture.html#1-tier">1-Tier architecture</a>, then when I switched to UNIFACE I was exposed to first the <a href="https://www.tonymarston.net/php-mysql/3-tier-architecture.html#2-tier">2-Tier</a> and then the <a href="https://www.tonymarston.net/php-mysql/3-tier-architecture.html#3-tier">3-Tier Architecture</a> which has the following layers:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#presentation.layer">Presentation layer</a> - User Interface, displaying data to the user, accepting input from the user</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#business.layer">Business layer</a> - Business Rules, handles data validation and task-specific behaviour</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#data.access.layer">Data Access layer</a> -  Database Communication, constructing SQL queries and executing them via the relevant API</li>
</ul>

<p>When I switched to PHP I decided to keep using the 3-Tier Architecture, but because I separated out the construction of all HTML documents into a separate component in the Presentation layer I discovered that I had also implemented the <a href="https://www.tonymarston.net/php-mysql/model-view-controller.html">Model-View-Controller (MVC)</a> design pattern, but this was by accident, not by design (pun intended). This has the following components:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller">Controller</a> - receives requests and converts them into calls on one or more Models, after which it calls the View</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#model">Model</a> - handles the validation and business rules for each entity within the application</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#view">View</a> - converts data from the Model into the format required by the user (HTML, CSV or PDF)</li>
</ul>

<p>The combined architecture is shown in <a href="#figure1">Figure 1</a> below:</p>



<hr>
<h3><a name="object.classification">Object classification</a></h3>

<p>Objects in the RADICORE framework fall into one of the following categories:</p>

<ul>
<li><a name="entity.definition"></a><b>Entities</b> (also known as <b>Domain Objects</b>)
<p>An Entity's job is also mainly holding state and associated behavior. Examples of Entities could be Account or User. In a database application each table is a separate entity in the database, with its own business rules, so its methods and properties should be encapsulated in its own class. That class will typically have several public methods which allow the state to be loaded, updated and queried.</p>
<p>Entities will exist as objects in the Business layer shown in <a href="#figure1">Figure 1</a> above.</p>
</li>

<li><a name="service.definition"></a><b>Services</b>
<p>A Service performs an operation. It encapsulates an activity but has no encapsulated state (that is, it is stateless). It usually performs its operation on data obtained from an entity. Examples of Services could include a parser, an authenticator, a validator and a transformer. The class for a service will typically have a single public method so that it will produce a single output from a single input.</p>
<p>Services will exist as objects in the Presentation and Data Access layers shown in <a href="#figure1">Figure 1</a> above, but there may also be some in the Business layer.</p>
</li>
</ul>

<p>While <b>Value Objects</b> may exist in other languages they do not exist in PHP. Instead all <a href="https://en.wikipedia.org/wiki/Variable_(computer_science)">variables/properties</a> are held as <a href="https://en.wikipedia.org/wiki/Primitive_data_type">primitive data types</a> (aka <a href="https://en.wikipedia.org/wiki/Scalar_processor#Scalar_data_type">scalars</a>).</p>

<p>The components in the RADICORE framework fall into the following categories:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#model">Models</a> are <b>Entities</b>, with a separate class for each table in the application database</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#view">Views</a> are <b>Services</b>, with a separate component for HTML, PDF and CSV output.</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller">Controllers</a> are <b>Services</b>, with a separate component for each <a href="https://www.tonymarston.net/php-mysql/dialog-types.html">Transaction Pattern</a>.</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#dml.class">Data Access Objects (DAO)</a> are <b>Services</b>, with a separate class for each supported DBMS engine (MySQL, PostgreSQL, Oracle and SQL Server).</li>
</ul>

<p>It should also be noted that:</p>

<ul>
<li><b>Services</b> are supplied within the framework and do not have to be created or modified by the developer. Services are also application-agnostic in that they do not contain any knowledge of any part of any application, they do not contain any business rules.</li>

<li><b>Entities</b> are generated by the application developer, one for each database table, using functions within the <a href="https://www.tonymarston.net/php-mysql/data-dictionary.html">Data Dictionary</a>, and are the only components which contain information regarding the application. Each <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">concrete table class</a> inherits standard code from an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a>, table metadata from a <a href="https://www.tonymarston.net/php-mysql/data-dictionary.html#table.dict.inc">table structure file</a>, but uses <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">"hook" methods</a> to define application-specific business rules.</li>
</ul>

<hr>
<h3><a name="one.class.per.table">A separate class for each table</a></h3>

<p>When I started to use PHP with its OO capabilities it was obvious to me that I would need to use a <a href="#layered.architecture">layered architecture</a> and that I would need a separate class/object in the Business layer for every entity that was of interest to the business. By the time the <a href="#implementation">implementation</a> stage is reached all these entities have been identified as tables in the database. This is why I create a separate class for each table. This simple practice leads to the following:</p>

<ul>
<li>Each table is subject to exactly the same <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> operations in the database, so these can be converted into a set of methods which can be implemented in every table class.</li>
<li>These common methods/operations/protocols can then be defined in an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a> so that they can be shared by every concrete class using <a href="#inheritance">inheritance</a>.</li>
<li>The use of an abstract class enables the use of the <a href="https://en.wikipedia.org/wiki/Template_method_pattern">Template Method Pattern</a> which allows the abstract class to contain the fixed/invariant methods while each <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">concrete subclass</a> can interrupt the processing with custom code in any of the <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">"hook" methods</a>.</li>
<li>The fact that each table (Model) class shares the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">same set of methods</a> it means that any <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">Controller</a> which calls those methods can work with any Model.</li>
<li>As each table class follows a <a href="#class.constructor">standard template</a> it is then possible to have them generated by the framework instead of having to be created manually.</li>
</ul>

<p>Note that while some programmers regard <a href="#ignore.aggregates">aggregates</a> or <a href="#ignore.compositions">compositions</a>, which deal with several tables in a hierarchy, as being a single entity and therefore requiring its own class, I do not. I regard a single object being responsible for more than one table as being a violation of the <a href="https://www.tonymarston.net/php-mysql/not-so-solid-oo-principles.html#srp">Single Responsibility Principle (SRP)</a>.</p>

<hr>
<h3><a name="subsystems">A system of subsystems</a></h3>

<p>A large system, such as an <a href="https://en.wikipedia.org/wiki/Enterprise_resource_planning">Enterprise Resource Planning (ERP)</a> system is often comprised of a number of interconnected subsystems. If they are built using the same framework or toolset then a user will be able to move through one subsystem to another without noticing the difference.</p>

<p>The RADICORE framework itself is comprised of four subsystems:</p>

<a name="multiple.domains"></a>
<ol>
<li><a href="https://www.tonymarston.net/php-mysql/role-based-access-control.html">Role Based Access Control</a> - users, events/tasks, permissions, menus.</li>
<li><a href="https://www.tonymarston.net/php-mysql/auditlog.html">Audit</a> - logs all database changes.</li>
<li><a href="https://www.tonymarston.net/php-mysql/workflow.html">Workflow</a> - activity based workflows.</li>
<li><a href="https://www.tonymarston.net/php-mysql/data-dictionary.html">Data Dictionary</a> - class generation and task generation.</li>
</ol>

<p>Each subsystem has its own database, its own directory in the file system for all its files, and its own entries in the <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html">MENU database</a>.</p>

<p>A single logon screen gives access to all these subsystems which makes them appear as one unified system.</p>

<a name="application.subsystems"></a>
<p>Additional application subsystems can be developed as add-ins whenever the need arises. For example, the <a href="https://geoprise.com/content/gm-x-application-suite">GM-X Application Suite</a> contains the following subsystems:</p>

<ol start="5">
<li><a href="https://geoprise.com/content/gm-x-party-subsystem">Party</a> - people and organisations, customers and suppliers.</li>
<li><a href="https://geoprise.com/content/gm-x-product-subsystem">Product</a> - products, components, features, prices.</li>
<li><a href="https://geoprise.com/content/gm-x-order-subsystem">Order</a> - sales orders, purchase orders, transfer orders.</li>
<li><a href="https://geoprise.com/content/gm-x-invoice-subsystem">Invoice</a> - sales invoices, purchase invoices, debit notes and credit notes.</li>
<li><a href="https://geoprise.com/content/gm-x-inventory-subsystem">Inventory</a> - products in inventory, issuances, receipts, facilities, containers, lots.</li>
<li><a href="https://geoprise.com/content/gm-x-shipment-subsystem">Shipment</a> - outbound shipments, inbound shipments, customer shipments, supplier shipments.</li>
<li><a href="https://geoprise.com/content/gm-x-request-subsystem">Request</a> - requirements, requests and quotations.</li>
<li><a href="https://geoprise.com/content/gm-x-survey-subsystem">Survey</a> - surveys and questionnaires.</li>
<li><a href="https://geoprise.com/content/gm-x-content-subsystem">Content</a> - miscellaneous content.</li>
<li><a href="https://geoprise.com/content/gm-x-work-effort-subsystem">Work Effort</a> - timesheets and expenses.</li>
<li><a href="https://geoprise.com/content/gm-x-alert-subsystem">Alert</a> - document management and entity-based workflow</li>
<li><a href="https://geoprise.com/content/gm-x-blockchain">Blockchain</a> - administers the exchange of data with cooperating organisations.</li>
<li><a href="https://geoprise.com/content/gm-x-strategic-hr-subsystem">Personnel</a> - strategic HR, performance reviews.</li>
<li><a href="https://geoprise.com/content/gm-x-project-subsystem">Project</a> - project management</li>
<li>Finance - <a href="https://geoprise.com/content/gm-x-general-ledger-subsystem">general ledger</a></li>
<li>Finance - <a href="https://geoprise.com/content/gm-x-accounts-receivable-subsystem">accounts receivable</a></li>
<li>Finance - <a href="https://geoprise.com/content/gm-x-accounts-payable-subsystem">accounts payable</a></li>
<li>Finance - <a href="https://geoprise.com/content/gm-x-fixed-assets-subsystem">fixed assets</a></li>
</ol>

<p>Each of theses subsystems is optional so that client organisations need only pay licence fees for those subsystems they actually need. They are also customisable as the RADICORE framework has built-in facilities which allow different screen and report layouts to be supplied at runtime, and even different versions of the business logic for individual table classes.</p>

<hr>
<h3><a name="what.is.a.domain">What is a "domain"?</a></h3>

<p>If the definition of a <a href="#domain.definition">domain</a> is <q>A sphere of knowledge and activity around which the application logic revolves</q> does it mean that in a large system which is comprised of a collection of <a href="#subsystems">smaller subsystems</a> that the system is the domain, or is each subsystem a separate domain? If each subsystem is a separate domain then this would imply that each would require its own separate and unique design process. In this I would have to disagree. While each of the <a href="#subsystems">subsystems</a> mentioned previously has its <a href="#domain.differences">differences</a> there are also a large number of <a href="#domain.similarities">similarities</a>.</p>

<h4><a name="domain.differences">Domains - the differences</a></h4>

<p>When a novice looks at the requirements for different subsystems/domains he/she should immediately notice that there are significant differences, such as the following:</p>

<ul>
<li>Each has its own database with its own set of tables and columns.</li>
<li>Each has its own set of inputs.</li>
<li>Each has its own set of outputs.</li>
<li>Each has its own set of business rules.</li>
<li>Each has its own set of user transactions (use cases).</li>
</ul>

<h4><a name="domain.similarities">Domains - the similarities</a></h4>

<p>While those differences appear to be significant an experienced developer will be be able to spot areas in the eventual implementation which are similar enough to be satisfied by reusable modules. Among these similarities are the following:</p>

<ul>
<li>Each table in the database, being an <a href="#entity.definition">entity</a>, will require its own class/object in the <a href="#layered.architecture">Business layer</a>. While each table has its <a href="#entity.differences">differences</a>, there are a number of <a href="#entity.similarities">similarities</a>.</li>
<li>Regardless of the different structure of each table the rules for <a href="#sql.similarities">generating SQL queries</a> are exactly the same.</li>
<li>Regardless of the <a href="#html.differences">different data</a> which may be displayed on an HTML form there are a significant number of <a href="#html.similarities">similarities</a>.</li>
<li>Each table in the database will have its own set of business and validation rules, some of which will be <a href="#validation.similarities">similar</a> while others will be <a href="#validation.differences">different</a>.</li>
<li>Each table in the database will have its own collection user transactions (use cases) to handle the different operations which can be performed on it, but while each will have its own unique <a href="#transaction.differences">differences</a> there will be some <a href="#transaction.similarities">similarities</a>.</li>
</ul>

<p>There are also some similarities which are common to each domain which can be supplied from a single central source, commonly known as a <a href="https://www.tonymarston.net/php-mysql/what-is-a-framework.html">framework</a>, such as:</p>

<ul>
<li>A <a href="https://www.tonymarston.net/php-mysql/menuguide/mnu_logon.html">LOGON</a> screen through which all users must pass before they can access the system.</li>
<li>A central system of <a href="https://www.tonymarston.net/php-mysql/menuguide/appendixa.html">MENUS</a> which informs the user what actions are available to him/her.</li>
<li>A central system of identifying which actions are <a href="https://www.tonymarston.net/php-mysql/menuguide/appendixb.html">available</a> to which user.</li>
<li>A central system of <a href="https://www.tonymarston.net/php-mysql/auditlog.html">logging</a> and viewing all database changes.</li>
<li>A central activity-based <a href="https://www.tonymarston.net/php-mysql/workflow.html">Workflow</a> system.</li>
</ul>

<hr>
<h3><a name="domain.events">Domain events</a></h3>

<p>An event is something that happened which caused an entity to change its state. An event is triggered by a user by activating a task (<b>user transaction</b> or<b> use case</b>) which changes the state of one or more entities.</p>

<p>Eric Evan's article <a href="https://www.domainlanguage.com/wp-content/uploads/2016/05/DDD_Reference_2015-03.pdf">Domain-Driven Design
Reference</a> has this to say on the subject:</p>

<blockquote>
An entity is responsible for tracking its state and the rules regulating its lifecycle. But if you need to know the actual causes of the state changes, this is typically not explicit, and it may be difficult to explain how the system got the way it is. Audit trails can allow tracing, but are not usually suited to being used for the logic of the program itself.
<br>...<br>
Domain events are ordinarily immutable, as they are a record of something in the past. In addition to a description of the event, a domain event typically contains a timestamp for the time the event occurred and the identity of entities involved in the event. Also, a domain event often has a separate timestamp indicating when the event was entered into the system and the identity of the person who entered it. 
</blockquote>

<p>The RADICORE framework deals with this "requirement" in the following ways:</p>

<ul>
<li>Every database update is logged to the standard <a href="https://www.tonymarston.net/php-mysql/auditlog.html">AUDIT</a> database which has a standard set of viewing screens.</li>
<li>Every database table that I design contains the columns <b>created_date</b>, <b>created_user</b>, <b>revised_date</b> and <b>revised_user</b> which are set automatically by the framework.</li>
<li>In the case of an aggregate, such as an Order or an Invoice, which is actually comprised of several database tables in a hierarchy, significant changes in state result in a change to that object's <b>status</b> column, which is maintained on the table which is the aggregate root. Changes to this value are also recorded in a separate &lt;root&gt;_STATUS_HISTORY table so that it can easily be determined who changed the status and when. </li>
</ul>

<p>Note also that there may be business rules which identify which status changes are valid and which are not, or that certain status changes can only be performed by users with the appropriate level of security (which are known as <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#role">ROLES</a> in the framework).</p>

<hr>
<h3><a name="class.names">Class names</a></h3>

<p>My standard practice is to create a separate Model class for each entity in the <a href="#layered.architecture">Business/Domain layer</a>, which equates to a separate class for each table in the database. I do not play around with <a href="#ignore.aggregates">object aggregations</a> or <a href="#ignore.compositions">object compositions</a>.</p>

<p>Once the logical design has been completed and the database has been designed, with all its tables and columns, I then proceed to use my <a href="https://www.tonymarston.net/php-mysql/data-dictionary.html">Data Dictionary </a>to build the subsystem's class files to mirror the database structure. I <a href="https://www.tonymarston.net/php-mysql/menuguide/dict_table(add4)import.html">import</a> each table's structure into the Data Dictionary, adjust the details if necessary, then <a href="https://www.tonymarston.net/php-mysql/menuguide/dict_table(upd4)export.html">export</a> them into the file system. This function will produce the following files in the <b>&lt;document_root&gt;/&lt;subsystem&gt;/classes</b> directory:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/data-dictionary.html#table.class.inc">&lt;tablename&gt;.class.inc</a> - the class file, which inherits all its <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">standard methods</a> from the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a>.</li>
<li><a href="https://www.tonymarston.net/php-mysql/data-dictionary.html#table.dict.inc">&lt;tablename&gt;.dict.inc</a> - the table's structure file, whose details are loaded into the table's <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.properties">standard properties</a> when the class is instantiated into an object.</li>
</ul>

<p>This technique makes it very easy, should the need arise, to change the structure of a table, then redo the import/export process to recreate the <b>&lt;tablename&gt;.dict.inc</b> file. The <b>&lt;tablename&gt;.class.inc</b> file is never overwritten as it may have been amended to include some <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">"hook" methods</a>. Because no table names or columns names are built into any APIs there is no ripple effect by such a change.</p>

<hr>
<h3><a name="method.names">Method names</a></h3>

<p>This is in contrast to <a href="#ignore.method.names">suggestions which I ignore</a>.</p>

<p>As each entity in the <a href="#layered.architecture">business/domain layer</a> exists in the outside world as a database table, and each table, regardless of its contents, is subject to exactly the same set of <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> operations, it made sense to me to translate each of there operations into equivalent methods which are as follows:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#insertrecord">$object-&gt;insertRecord($_POST)</a> - add a record to a database table.</li>
<li><a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#getdata">$object-&gt;getData($where)</a> - read records from the database. May return zero or more rows depending on the contents of the <b>$where</b> argument and the contents of the database.</li>
<li><a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#updaterecord">$object-&gt;updateRecord($_POST)</a> - update a record in a database table.</li>
<li><a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#deleterecord">$object-&gt;deleteRecord($_POST)</a> - delete a record from a database table.</li>
</ul>

<p>These are documented in <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">common table methods</a>. Note that for each of these operations the identity of the database table in question will be obtained from the <a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes.$tablename">$tablename</a> property within that table's object.</p>

<p>Because each table class has exactly the same method signatures this provides a significant amount of <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#polymorphism">polymorphism</a> which I can utilise using that mechanism known as <a href="https://www.tonymarston.net/php-mysql/dependency-injection-is-evil.html#where.i.do.use.di">dependency injection</a>. This is why I ignore DDD's "suggestions" for <a href="#ignore.method.names">method names</a> as they destroy any hope of polymorphism and the reusability which it provides.</p>


<hr>
<h3><a name="class.variables">Class variables</a></h3>

<p>These are also known as <i>properties</i>, and in a database application there is usually one for each column in the database. It is usual practice to give each of these properties the same name as its column as to do otherwise would lead to confusion.</p>

<p>These properties can be accessed either directly or using getters and setters (also known as <a href="https://en.wikipedia.org/wiki/Mutator_method">accessors and mutators</a>):</p>

<table summary="" widt="100%">
<colgroup>
	<col width="150px">
	<col width="300px">
	<col width="300px">
</colgroup>
<tbody><tr>
	<th>Access</th>
	<th>Directly</th>
	<th>Indirectly</th>
</tr>
<tr>
	<td>Writing</td>
	<td>$object-&gt;foo = 'bar';</td>
	<td>$object-&gt;setFoo('bar');</td>
</tr>
<tr>
	<td>Reading</td>
	<td>$foo = $object-&gt;foo;</td>
	<td>$foo = $object-&gt;getFoo();</td>
</tr>
</tbody></table>

<p>Note that is also possible to specify these properties as arguments on a method/function call.</p>

<p>For reasons explained in <a href="#ignore.getters.setters">Getters and Setters</a> I do not have a separate property for each column as that produces <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#tight.coupling">tight coupling</a>. I prefer to pass all column data around as a single <a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes.$fieldarray">$fieldarray</a> argument as that produces <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#loose.coupling">loose coupling</a> which in turn produces components which are more reusable.</p>

<hr>
<h3><a name="inheritance">Inheritance</a></h3>

<p><a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#inheritance">Inheritance</a> is a method of sharing code whereby a subclass can share the methods and properties of a superclass. The subclass may override (modify) any of the inherited methods, it may add new methods of its own, but it cannot remove or "un-inherit" any of those methods. A superclass may be inherited by any number of subclasses.</p>

<p>While building a small <a href="https://www.tonymarston.net/php-mysql/sample-application.html">sample application</a> as a prototype before building the RADICORE framework I had decided to create a separate class for each database table. After creating another class for a second table I noticed a great deal of duplicated code, so I decided to move this code to an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a> so that it could be inherited by every <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">concrete table class</a>. I ended up with lots of code in the abstract class, namely a set of <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">common table methods</a> and a set of <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.properties">common table properties</a>, and nothing in each concrete class except for the <a href="#class.constructor">constructor</a>. Notice that unlike some developers who employ separate methods such as <code>load()</code>, <code>validate()</code> and <code>store()</code> I learned back in by COBOL days that when a group of functions always had to be called in a specific sequence that it was more efficient to put that group into separate function which could act as a <a href="https://en.wikipedia.org/wiki/Wrapper_function">wrapper</a>, thus replacing several functions calls with a single call.</p>

<p>While the abstract class could provide all the standard code required by each concrete class, even the <a href="https://www.tonymarston.net/php-mysql/infrastructure-faq.html#faq12">primary validation</a>, it quickly became obvious that I sometimes needed to inject some non-standard code into the processing sequence for certain user transactions. My knowledge of inheritance told me that I could add some calls to some dummy methods within the existing wrapper methods in the abstract class which I could then override in any concrete subclass. These dummy methods were defined in the abstract class but did nothing, but if they were redefined in a subclass then they could be programmed to do whatever was necessary in that subclass. I discovered later that I had actually implemented the <a href="https://en.wikipedia.org/wiki/Template_method_pattern">Template Method Pattern</a> and that my dummy methods were called <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">"hook" methods.</a></p>

<p>When I was later informed that I should be using <a href="https://en.wikipedia.org/wiki/Composition_over_inheritance">composition instead of inheritance</a> I thought it was a joke as nobody could explain why inheritance was bad and why "object composition", whatever it was, was supposed to be better. Nobody could supply me with any examples which demonstrated that what I had achieved with inheritance could be better achieved with "object composition". I later discovered that the so-called "problems" with inheritance were caused by inheriting from one concrete class to create a different concrete class which meant that some of the inherited methods could be completely inappropriate for the subclass. As I never encountered any of these "problems" I saw no reason to stop using inheritance. I later read in the <a href="https://en.wikipedia.org/wiki/Design_Patterns">Gang of Four (GoF)</a> book on design patterns that the recommended way to avoid problems was to only ever inherit from an abstract class. This meant that what I had been doing all along was correct and that it was everybody else that was wrong.</p>

<p>My principle of creating a separate class for each database table was a step in the right direction as it enabled me to share the common methods and properties by inheriting them from an abstract class. As I now have a single set of methods which are shared by hundreds of subclasses this produces a large amount of <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#polymorphism">polymorphism</a> which I can utilise using <a href="https://www.tonymarston.net/php-mysql/dependency-injection-is-evil.html#where.i.do.use.di">dependency injection</a> in my library of reusable <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">Controller scripts</a>. The abstract class has also enabled me to use the <a href="https://en.wikipedia.org/wiki/Template_method_pattern">Template Method Pattern</a> so that I can easily inject custom code into any table subclass.</p>

<p>As far as I am concerned inheritance has provided me with zero problems and bucket loads of benefits.</p>

<hr>
<h3><a name="subclassing">Subclassing</a></h3>

<p>It is quite possible that it some circumstances you may wish to perform some processing in a particular <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">hook method</a> for a particular task that is totally different from the code used in the same method for a different task. In this situation I use a standard OO technique called <a href="https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)#Subclasses_and_superclasses">subclassing</a>. I create a subclass of the table class with a name such as <code>&lt;table&gt;_sNN</code> where "s" denotes a subclass and "NN" is an incrementing number. This automatically inherits all the methods in the superclass but allows me to override any of those methods with a different implementation. Note that the subclass deals with the same table as the superclass, it just provides different business rules for that table. I then change that task's <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#component.script">component script</a> to point to this subclass. You can see working examples of this in the Data Dictionary subsystem of the framework where you will find the following class files:</p>

<ul>
<li>dict_table.class.inc - for standard processing</li>
<li>dict_table_s01.class.inc - to import table names into the Data Dictionary database.</li>
<li>dict_table_s02.class.inc - to export table data to a PHP script.</li>
<li>dict_table_s03.class.inc - to display list of <a href="https://www.tonymarston.net/php-mysql/dialog-types.html">Transaction Patterns</a>.</li>
<li>dict_table_s04.class.inc - to generate the scripts and update the MENU database for the selected Pattern.</li>
</ul>

<hr>
<h3><a name="separate.controllers">Separate Controllers for each use case</a></h3>

<p>In my early days as a developer when I was working with <a href="https://www.tonymarston.net/cobol">COBOL</a> it was common practice to create a program called "Maintain XXX" where "XXX" was a particular entity (table) which was of interest to the business. This could handle all the <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> operations which could be performed on that entity, so it needed a mechanism to switch from one operation to another. A typical set of operations was List, Create/Add, Read/Enquire, Update and Delete where each had its own screen and its own business logic. The difference between "List" and "Read" is that "List" can display multiple rows on the screen whereas "Read" (and all the others) can only deal with one row at a time. We called each of there operations a "mode" and had function keys (with labels) on the each screen so the user could switch from one mode to another. The program would always start in "List" mode, and the functions for the other modes were always available.</p>

<p>This practice was continued until the mid-1980s when a customer came up with the requirement for access to individual modes to be denied to certain users, and for the function labels to disappear when access was denied. This had be configurable on the database rather than in code so that it could be modified more easily. Creating a new database table, then modifying the code to act upon the contents of this table proved to be rather tricky, so after a while I decided that the best solution would be to break apart each multi-mode/multi-screen program and create a separate sub-program for each mode. This meant that instead of a large complex program I ended up with a collection of smaller but simpler subprograms each of which dealt with a single mode and a single screen. This resulted in the structure shown in <a href="#figure2">Figure 2</a> below:</p>



<p>In this collection, which I now call a "family" because of the parent-child relationships, The <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#list1">LIST1</a> form is usually activated from a <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#menu-bar">menu button</a>, although the <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#list2">LIST2</a> variant is usually activated from a <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#navigation-bar">navigation button</a>. All the child forms are activated from <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#navigation-bar">navigation buttons</a>. This means that the user has to go through the parent form in order to get to a child form. The advantage of having all the members of this family being separate tasks (user transactions) with their own entries on the <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#task">TASK</a> table is that their positions in any <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#menu-bar">menu bar</a> or <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#navigation-bar">navigation bar</a> is not hard-coded, it is completely dynamic. The features of the <a href="https://www.tonymarston.net/php-mysql/role-based-access-control.html#current-design">Role Based Access Control (RBAC)</a> system which is built into the framework means that access to individual members of the form family can be turned ON or OFF at will without the need for any code changes.</p>

<p>An additional advantage of having a separate component for each member of the forms family, coupled with the fact that each <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">Model (table)</a> class shares the same set of <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">common table methods</a>, thus providing <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#polymorphism">polymorphism</a>, is that once a <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">Controller</a> has been built to perform a series of method calls on its table class(es) it can be made to call exactly the same methods on a different table class through that mechanism known as <a href="https://www.tonymarston.net/php-mysql/dependency-injection-is-evil.html#where.i.do.use.di">dependency injection</a>. This mechanism means that each <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">Controller script</a> can be used with any <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">table class</a>.</p>

<p>It should also be noted that in <a href="https://www.tonymarston.net/php-mysql/object-associations-are-evil.html#object.composition">aggregate compositions</a> I do not have a single class for the aggregate to handle all the use cases for that aggregate. No matter how many tables are in that aggregate all I see are a number of pairs of tables which are joined in a parent-child relationship, and each pair is dealt with using its own family of forms.</p>

<p>Please also refer to <a href="#transaction.similarities">Transaction (use case) similarities</a> and <a href="#transaction.differences">Transaction (use case) differences</a>.</p>

<hr>
<h3><a name="reusability.productivity">More Reusability = Higher Productivity</a></h3>

<p>Before I started using the OO capabilities of PHP I asked myself "why I should bother? What's so great about OOP?" I found the answer in the following statement:</p>

<blockquote>
Object Oriented Programming involves programming which is oriented around objects, thus taking advantage of <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#encapsulation">Encapsulation</a>, <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#inheritance">Inheritance</a> and <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#polymorphism">Polymorphism</a> to increase code reuse and decrease code maintenance. 
</blockquote>

<p>This rang a bell with me as the frameworks which I had developed in my two previous languages had helped increase the productivity of the whole development team by replacing the need to write chunks of identical or similar code with pre-written and reusable code. The less code you have to write to get the job done then the less time it takes to get the job done and the more productive you can be. I therefore set out to use these features of PHP to increase as much as possible the amount of reusable code I could have at my disposal.</p>

<p>While using a <a href="#layered.architecture">layered architecture</a> is a step in the right direction, it is how you construct each of the different components in that architecture which indicates if you are taking proper advantage of the features which OOP has to offer. By following my own version of "best practices", and ignoring those which have a dubious pedigree, I have been able to provide the following amounts of reusability which help reduce development times and increase my rate of productivity:</p>

<table summary="">
<colgroup>
	<col width="125px">
	<col width="*">
</colgroup>
<tbody><tr>
	<td><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#model">Models</a></td>
	<td>Each <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">table class</a> inherits all its standard code from a single <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a> while any non-standard code can be inserted into the available <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">"hook" methods</a>.</td>
</tr>
<tr>
	<td><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#view">Views</a></td>
	<td>There is a single reusable component for each type of View:
  	<ul>
  	<li>The HTML View component works by transferring all data from the Model(s) into an XML file, then performs an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#xsl.transformation">XSL Transformation</a> using an XSL stylesheet. I have just 12 <a href="https://www.tonymarston.net/xml-xsl/reusable-xsl.html">reusable XSL Stylesheets</a> where the differences are supplied in separate <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#screen.structure">screen structure files</a>.</li>
  	<li>The PDF view component works by reading the raw data one row at a time and placing it in the document using instructions in a <a href="https://www.tonymarston.net/php-mysql/output-to-pdf.html#report.structure.file">report structure file</a>.</li>
		<li>The CSV view component works by reading the raw data one row at a time and writing it to the output file. The first row in the output file contains the column names as labels while all subsequent rows contain the column values.</li>
  	</ul>
	</td>
</tr>
<tr>
	<td><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller">Controllers</a></td>
	<td>Each of the reusable Controllers calls a predetermined series of methods on an unknown Model (or Models) where the identity of those Model(s) is passed down at run time from a <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#component.script">component script</a>. There is a separate version of this script for each user transaction (use case). Each Controller is paired with no more than one View, as documented in <a href="https://www.tonymarston.net/php-mysql/dialog-types.html">Transaction Patterns</a>, but there are some which have no View at all.</td>
</tr>
<tr>
	<td><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#data.access.layer">DAOs</a></td>
	<td>Each of the reusable <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#dml.class">Data Access Objects</a> generates the queries for the common <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> operations for a particular DBMS. Each method will build its query based on the information passed to it by the Model, then call the API which is specific to that DBMS.</td>
</tr>
</tbody></table>

<p>You should notice here that every Model class supports the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">same set of methods</a> as every other Model class, and every Controller communicates with its Model(s) using those methods. This is a prime example of <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#polymorphism">polymorphism</a>, and it allows any Model to be used with any Controller.</p>

<p>You should also notice that as much standard code (often referred to as <a href="https://en.wikipedia.org/wiki/Boilerplate_code">boilerplate code</a>) as possible is supplied by the framework, which means that the bulk of the developer's time can be spent on the important code which deals with the business rules.</p>

<hr>
<h2><a name="advice.which.i.ignore">DDD "advice" which I ignore</a></h2>

<p>While DDD contains many principles and practices, I regard these as "suggestions" and not "rules", which means that I am free to either follow them, in whole or in part, or ignore them altogether. Where I find a simpler way to achieve an objective then I will follow the <a href="https://simple.wikipedia.org/wiki/KISS_principle">KISS principle</a> and ignore the <a href="https://www.tonymarston.net/php-mysql/kick-principle.html">KICK</a> alternative.</p>

<p>While some of these topics are not explicitly mentioned as being part of DDD I have included them because they are part of the OO family of practices and therefore may be implied.</p>

<h3><a name="ignore.associations">Associations</a></h3>

<p>When I first encountered the term <a href="https://en.wikipedia.org/wiki/Association_(object-oriented_programming)">association</a> in various newsgroup postings all I saw was a complicated way of dealing with relationships. It does not matter to me how many tables are linked together in a hierarchy, that hierarchy is nothing more than a collections of tables where different pairs of tables are linked together in a parent-child relationship, and each relationship can be dealt with by standard code in the framework and not custom code in any table class.</p>

<p>You can read more of my thoughts on this topic in <a href="https://www.tonymarston.net/php-mysql/object-associations-are-evil.html">Object Associations are EVIL</a>.</p>

<hr>
<h3><a name="ignore.aggregates">Aggregates</a></h3>

<p>OO afficionados like to use the "<a href="https://en.wikipedia.org/wiki/Has-a">HAS-A</a>" test to help them recognise things called "object compositions". The wikipedia article contains the following description:</p>

<blockquote>
Has-a is a composition relationship where one object (often called the constituted object, or part/constituent/member object) "belongs to" (is part or member of) another object (called the composite type), and behaves according to the rules of ownership. In simple words, has-a relationship in an object is called a member field of an object. Multiple has-a relationships will combine to form a possessive hierarchy.
</blockquote>

<p>An <b>Aggregation</b> implies that the contained class can exist independently of the container. If the container is destroyed, the child is not destroyed as it can exist independently of the parent.</p>

<p>It does not matter to me how many objects are linked together in some sort of hierarchy, at the end of the day it is just a collection of tables which are arranged in a number of one-to-many/parent-child relations, and in the RADICORE framework there are standard patterns for dealing with parent-child relationships which do not require any custom code in any table class.</p>

<p>I have written more on this topic in <a href="https://www.tonymarston.net/php-mysql/object-associations-are-evil.html#object.aggregation">Object Associations - Aggregations</a> and <a href="https://www.tonymarston.net/php-mysql/object-associations-are-evil.html#single.class.aggregation">A single class for an Aggregation is a mistake</a>.</p>

<hr>
<h3><a name="ignore.compositions">Compositions</a></h3>

<p>A <b>Composition</b> is a type of <a href="#ignore.aggregates">aggregation</a> in which the contained class cannot exist independently of the container. If the container is destroyed, the child is also destroyed.</p>

<p>I have written more on this topic in <a href="https://www.tonymarston.net/php-mysql/object-associations-are-evil.html#object.composition">Object Associations - Compositions</a>.</p>

<p>There is a different type of composition which is supposed to be an alternative to <a href="https://en.wikipedia.org/wiki/Composition_over_inheritance">inheritance</a> which I have written about in <a href="https://www.tonymarston.net/php-mysql/composition-is-a-procedural-technique-for-code-reuse.html">Composition is a Procedural Technique for Code Reuse</a>.</p>

<hr>
<h3><a name="ignore.class.hierarchies">Class hierarchies</a></h3>

<p>I have seen where more than a few developers use the "<a href="https://en.wikipedia.org/wiki/Is-a">IS-A</a>" test to identify the existence of class hierarchies. They make statements such as "a CAR is-a VEHICLE", "a BEAGLE is-a DOG" and "a CUSTOMER is-a PERSON", and this causes some developers to ask the question:</p>

<blockquote>
If object 'B' <b>is a</b> type of object 'A', then surely 'B' must be a subclass of 'A'?
</blockquote>

<p>This can lead to statements such as: <q>A Car and a Train and a Truck can all inherit behavior from a Vehicle object, adding their subtle differences. A Firetruck can inherit from the Truck object, and so on.</q> which would produce hierarchies of classes which are multiple levels deep.</p>

<p>This is not how it is handled in a database, so it is not how it should be handled in the code.</p>

<p>Expanding on the "a BEAGLE is-a DOG" statement from above someone who has been trained to think in the "object oriented way" would identify <b>dog_type</b> as the differentiator and create a separate subclass for each possible value, as shown in <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#is-a.relationships">Using "IS-A" to identify class hierarchies</a>.</p>

<p>If <b>dog_type</b> is identified as the differentiator then it should become a column on the DOG table which can be used as the foreign key to an entry on the DOG_TYPE table. In this way it is possible to introduce as many different types of dog that you can think of without having to create a separate class for each.</p>

<p>In database applications every entity in the <a href="#layered.architecture">Business/Domain layer</a> IS-A database table, and because every table shares the same <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> operations every <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">table class</a> shares the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">same table methods</a> which are inherited from the same <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a>. This means that I do not have any deep inheritance hierarchies, with the only exception being when I need <a href="#subclassing">subclasses</a> to deal with different implementations for the standard <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">"hook" methods</a>.</p>

<hr>
<h3><a name="ignore.cqrs">CQRS</a></h3>

<p>This is what it says in the <a href="https://en.wikipedia.org/wiki/Domain-driven_design#Command_Query_Responsibility_Segregation">wikipedia page</a>:</p>

<blockquote>
<a href="https://en.wikipedia.org/wiki/Command_Query_Responsibility_Segregation">Command Query Responsibility Segregation (CQRS)</a> is an architectural pattern for separating reading data (a 'query') from writing to data (a 'command'). CQRS derives from Command and Query Separation (CQS), coined by Bertrand Meyer.
<p>Commands mutate state and are approximately equivalent to method invocation on aggregate roots or entities. Queries read state but do not mutate it.</p>
</blockquote>

<p>This is the description for <a href="https://en.wikipedia.org/wiki/Command_Query_Responsibility_Segregation">Command Query Responsibility Segregation (CQRS)</a>:</p>

<blockquote>
In information technology, <b>Command Query Responsibility Segregation (CQRS)</b> is a system architecture that extends the idea behind command-query separation to the level of services. Such a system will have separate interfaces to send queries and to send commands. As in CQS, fulfilling a query request will only retrieve data and will not modify the state of the system (with some exceptions like logging access), while fulfilling a command request will modify the state of the system.
<p>Many systems push the segregation to the data models used by the system. The models used to process queries are usually called <i>read models</i> and the models used to process commands <i>write models</i>.</p>
</blockquote>

<p>The idea that I should have one model for reading and another Model for writing is unacceptable to me. As far as I am concerned this violates the principle of <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#encapsulation">encapsulation</a> which states that ALL the methods and ALL the properties for an entity should be maintained in the SAME class. This means that you do not split those methods and properties across multiple classes, nor do you put methods and properties for multiple entities in the same class.</p>

<p>In a database application each entity in the <a href="#layered.architecture">Business layer</a> IS-A database table, and the only operations which can be performed on a database table are <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">Create, Read, Update and Delete (CRUD)</a>. This is why I created a <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">set of methods</a> to perform these operations, and because they are common to every table I make them available in every table class by <a href="#inheritance">inheriting</a> them from an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract class</a>. </p>



<hr>
<h3><a name="ignore.factories">Factories</a></h3>

<p>In this paper <a href="https://www.domainlanguage.com/wp-content/uploads/2016/05/DDD_Reference_2015-03.pdf">Domain-Driven Design Reference</a> Eric Evans wrote the following:</p>

<blockquote>
When creation of an entire, internally consistent aggregate, or a large value object, becomes complicated or reveals too much of the internal structure, factories provide encapsulation.
</blockquote>

<p>I do not use <a href="#ignore.aggregates">object aggregations</a>, therefore I do not need any factories.</p>

<p>I do not need a method of creating objects with different configurations as each of my table objects has only one possible configuration, and that is dealt with in the <a href="#class.constructor">class constructor</a>.</p>

<hr>
<h3><a name="ignore.getters.setters">Getters and Setters</a></h3>

<p>While learning how PHP worked I saw that it was common practice to create classes with separate properties for each table column, and to access them using separate getters and setters. I did not like this idea as it would mean that each table (Model) class would require its own set of properties with their getters and setters and that each of these classes would then require its own Controller with the necessary code to access these unique properties. This would therefore make each Controller <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#tight.coupling">tightly coupled</a> to a particular Model and throw out of the window any opportunity of having reusable code. I had already noticed that data being sent in from an HTML form was presented in an associative array, and that data read from the database was also presented in an associative array (actually an indexed array of associative arrays), so I decided not to unpick this array into its components parts but to pass it around in its array form as a single argument on every method call. This is shown in the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">common table methods</a> as the <a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes.$fieldarray">$fieldarray</a> argument. This simple idea provided several benefits:</p>

<ul>
<li>As neither the Model nor the Controller required individual table columns to be defined it meant less code to write.</li>
<li>As the Controller did not have to contain any references to any columns in its Model it then made them <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#loose.coupling">loosely coupled</a> which meant that any Controller could use any Model.</li>
<li>Because none of the method calls between the Controller and the Model reference any column names it meant that I could change the columns on any table without having to change any method signatures, thus avoiding the ripple effect.</li>
</ul>

<p>Note that each table class "knows" what columns belong in its table as they are list in the <a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes.$fieldspec">$fieldspec</a> array.</p>

<hr>
<h3><a name="ignore.interfaces">Interfaces</a></h3>

<p>By "interfaces" I mean <a href="https://www.php.net/manual/en/language.oop5.interfaces.php">object interfaces</a> which require the use of those keywords <b>interface</b> and <b>implements</b>. These did not exist in PHP4 so I could not use them. They were introduced in PHP5, but after reading their description in the manual I decided that as I was already using an abstract class to great affect I had no need for them.</p>

<p>I later discovered that they were added to other languages to provide a way of allowing <a href="http://accelerateddevelopment.blogspot.com/2012/06/polymorphism-and-inheritance-are.html">polymorphism without inheritance</a> in certain strictly typed languages. They were added to PHP just because some not-so-bright programmers said <q>Other OO languages support interfaces, so PHP should support them as well.</q> This is a ridiculous argument as PHP is not strictly typed, nor does it require any mechanism to support polymorphism other than several classes containing the same method signatures. This means that they are totally redundant in PHP and a complete waste of time as they serve no useful purpose.</p>

<p>This topic is covered in more detail in <a href="https://www.tonymarston.net/php-mysql/object-interfaces-are-evil.html">Object Interfaces are EVIL</a>.</p>

<hr>
<h3><a name="ignore.method.names">Method names</a></h3>

<p>I have seen many examples where method names are constructed to reflect an action which has been identified in the design process, such as "createCustomer", "SignUpForMagazineSubscription", "accept offer" and "withdraw", but I never followed this practice. My aim of switching to an OO language was to use the facilities offered by <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#encapsulation">encapsulation</a>, <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#inheritance">inheritance</a> and <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#polymorphism">polymorphism</a> to create as much reusable code as possible. I therefore creating <a href="#method.names">my own convention for naming methods</a>.</p>

<p>I also knew two things from my previous experience:</p>

<ul>
<li>The only operations which can be performed on a table are <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">Create, Read, Update and Delete (CRUD)</a>, which is why I have <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">methods which support these operations</a> in every <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">table class</a> which are inherited from an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a>.</li>
<li>Regardless of the different effect that each user transaction (use case) will have, it achieves that effect by following the same pattern - it calls one or more of the CRUD operations on one or more tables, and these operations may be interspersed with the processing of business rules.</li>
</ul>

<p>This means that names such as "createCustomer", "SignUpForMagazineSubscription", "accept offer" and "withdraw" I consider to be nothing more than labels which may be beneficial to the user but which are irrelevant details in the software. By stripping away the irrelevant and concentrating on the essential I make it easy for the developer to quickly understand the effects of each user transaction and to identify the components that will produce that effect. The labels made available to users are nothing more than names held on the <a href="https://www.tonymarston.net/php-mysql/menuguide/mnu_task(upd1).html">TASK table</a> in the <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html">MENU database</a>.</p>

<table summary="">
<colgroup>
	<col width="15%">
	<col width="35%">
	<col width="50%">
</colgroup>
<tbody><tr>
	<th>OO purists</th>
  <th>effect on the database</th>
	<th>the Tony Marston way</th>
</tr>

<tr>
	<td>createProduct($_POST)</td>
	<td>insert a record into the PRODUCT table</td>
	<td>
<pre><span>$table_id</span> = <span>'product'</span>;
....
require <span>"classes/<span>$table_id</span>.class.inc"</span>;
<span>$dbobject</span> = new <span>$table_id</span>;
<span>$result</span> = <span>$dbobject</span>-&gt;insertRecord(<span>$_POST</span>);
</pre>
	</td>
</tr>

<tr>
	<td>createCustomer($_POST)</td>
	<td>insert a record into the CUSTOMER table</td>
	<td>
<pre><span>$table_id</span> = <span>'customer'</span>;
....
require <span>"classes/<span>$table_id</span>.class.inc"</span>;
<span>$dbobject</span> = new <span>$table_id</span>;
<span>$result</span> = <span>$dbobject</span>-&gt;insertRecord(<span>$_POST</span>);
</pre>
  </td>
</tr>

<tr>
	<td>createInvoice($_POST)</td>
	<td>insert a record into the INVOICE table</td>
	<td>
<pre><span>$table_id</span> = <span>'invoice'</span>;
....
require <span>"classes/<span>$table_id</span>.class.inc"</span>;
<span>$dbobject</span> = new <span>$table_id</span>;
<span>$result</span> = <span>$dbobject</span>-&gt;insertRecord(<span>$_POST</span>);
</pre>
	</td>
</tr>

<tr>
	<td>payInvoice($_POST)</td>
	<td>insert a record into the PAYMENT table</td>
	<td>
<pre><span>$table_id</span> = <span>'payment'</span>;
....
require <span>"classes/<span>$table_id</span>.class.inc"</span>;
<span>$dbobject</span> = new <span>$table_id</span>;
<span>$result</span> = <span>$dbobject</span>-&gt;insertRecord(<span>$_POST</span>);
</pre>
	</td>
</tr>

</tbody></table>

<p>In my method the value for <b>$table_id</b> is provided in a <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#component.script">component script</a> and this is instantiated into an object in the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">controller script</a>.</p>

<p>The use of an abstract class also provides the means to have methods for standard processing interspersed with methods for custom business rules. This is called the <a href="https://en.wikipedia.org/wiki/Template_method_pattern">Template Method Pattern</a> and involves a mixture of invariant/fixed methods and variable/customisable or <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">"hook" methods</a> which can have different implementations in different concrete classes. Every public method in the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a> is an example of a Template Method.</p>

<hr>
<h3><a name="ignore.repositories">Repositories</a></h3>

<p>In this paper <a href="https://www.domainlanguage.com/wp-content/uploads/2016/05/DDD_Reference_2015-03.pdf">Domain-Driven Design Reference</a> Eric Evans wrote the following:</p>

<blockquote>
Query access to aggregates expressed in the ubiquitous language. Proliferation of traversable associations used only for finding things muddles the model. In mature models, queries often express domain concepts. Yet queries can cause problems. The sheer technical complexity of applying most database access infrastructure quickly swamps the client code, which leads developers to dumb-down the domain layer, which makes the model irrelevant.
</blockquote>

<p>I do not deal with <a href="#ignore.aggregates">aggregates</a> in the DDD way.</p>


<hr>
<h2><a name="implementing.the.different">My implementation - Dealing with the differences</a></h2>

<p>Abstraction is a process whereby you separate the abstract from the concrete, the similar from the different, with the aim of putting the similar into a reusable object and the different into unique objects. This section identifies what I recognise as "different" and how I have isolated them from the "similar".</p>

<h3><a name="entity.differences">Entity/Table differences</a></h3>

<p>While each database can contain any number of tables each one will have its differences which can be categorised under the following headings:</p>

<ul>
<li>Database name.</li>
<li>Table name, which must be unique within the database.</li>
<li>A list of columns, where each has:
	<ul>
	<li>A name which must be unique within that table.</li>
	<li>A data type (character, integer, float, date, time, etc.</li>
	<li>An optional size.</li>
	</ul>
</li>
<li>A primary key, which may contain one or more columns.</li>
<li>Zero or more candidate keys, where each may contain one or more columns.</li>
<li>A list of one-to-many/parent-child relationships with other tables:
	<ul>
	<li>A list of child relationships where this table is the parent.</li>
	<li>A list of parent relationships where this table is the child.</li>
	</ul>
</li>
<li>Column values which can vary depending on the table and the operation being performed. Instead of having a separately named class property for each column I prefer to use a single array variable as it promotes <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#loose.coupling">loose coupling</a> which is better than <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#tight.coupling">tight coupling</a>.</li>
</ul>

<p>These have been implemented as a set of <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.properties">common table properties</a> which are inherited from an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a>. Each of these properties will be loaded in when the class file is instantiated into an object.</p>

<hr>
<h3><a name="html.differences">HTML differences</a></h3>

<p>Having abstracted out all the <a href="#html.similarities">similarities</a> in every <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#html.output">HTML document</a> I am left with the differences. While the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#xsl.stylesheet">XSL Stylesheet</a> contains the necessary instructions to construct all the standard elements on the HTML page I am left with the one variable which is the zone which handles the application data. This is where I have to identify which piece of table data goes where in that zone. Because I have to copy all the necessary framework and application data to an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#xml.file">XML document</a> I discovered, after a bit of experimentation, that I could also include a description of this application zone in this XML. This meant that instead of having a separate version of an XSL stylesheet for each different screen I could use a standard stylesheet and load data from an external <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#screen.structure">screen structure file</a> like the one shown below:</p>

<pre>&lt;?php

<span>$structure</span>['<span>xsl_file</span>'] = '<span>std.detail1.xsl</span>';


<span>$structure</span>['<span>tables</span>']['<span>main</span>'] = '<span>person</span>';


<span>$structure</span>['<span>main</span>']['<span>columns</span>'][] = array('<span>width</span>' =&gt; <span>150</span>);
<span>$structure</span>['<span>main</span>']['<span>columns</span>'][] = array('<span>width</span>' =&gt; '<span>*</span>');


<span>$structure</span>['<span>main</span>']['<span>columns</span>'][] = array('<span>class</span>' =&gt; '<span>classname</span>');


<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>person_id</span>' =&gt; '<span>ID</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>first_name</span>' =&gt; '<span>First Name</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>last_name</span>' =&gt; '<span>Last Name</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>initials</span>' =&gt; '<span>Initials</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>nat_ins_no</span>' =&gt; '<span>Nat. Ins. No.</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>pers_type_id</span>' =&gt; '<span>Person Type</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>star_sign</span>' =&gt; '<span>Star Sign</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>email_addr</span>' =&gt; '<span>E-mail</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>value1</span>' =&gt; '<span>Value 1</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>value2</span>' =&gt; '<span>Value 2</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>start_date</span>' =&gt; '<span>Start Date</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>end_date</span>' =&gt; '<span>End Date</span>');
<span>$structure</span>['<span>main</span>']['<span>fields</span>'][] = array('<span>selected</span>' =&gt; '<span>Selected</span>');
?&gt;
</pre>

<p>Note that for input and update screens I will need to include for each application column the identity of the HTML control (textbox, radiogroup, dropdown, checkbox, etc) which should be used. This information is obtained from the <a href="https://www.tonymarston.net/php-mysql/data-dictionary.html#$fieldspec">$fieldspec</a> array which has been loaded into the object's memory from the <a href="https://www.tonymarston.net/php-mysql/data-dictionary.html#table.dict.inc">table structure file</a>.</p>

<hr>
<h3><a name="transaction.differences">Transaction (use case) differences</a></h3>

<p>As explained in <a href="#transaction.similarities">Transaction (use case) similarities</a> each user transaction (use case) will require a <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#model">Model</a>, a <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#view">View</a> and a <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller">Controller</a> to act in unison to carry out the task required by the user.</p>

<p>While each subsystem will require its own set of user transactions (use cases) these can be generated by the framework by linking a table class with any of the <a href="https://www.tonymarston.net/php-mysql/transaction-patterns.html">Transaction Patterns</a> which are supplied by the framework. Each user transaction which then have its own <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#component.script">component script</a> in the file system which looks like the following:</p>

<pre>&lt;?php
<span>$table_id</span> = <span>"person"</span>;                      
<span>$screen</span>   = <span>'person.detail.screen.inc'</span>;    
require <span>'std.enquire1.inc'</span>;                
?&gt;
</pre>

<p>As you can see this is a simple script whose purpose is to identify the following:</p>

<ol>
<li><code>$table_id</code> identifies the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#model">Model</a> part of <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#mvc">MVC</a>. This is one of the generated <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">database table classes</a>.</li>
<li><code>$screen</code> identifies the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#view">View</a> part of <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#mvc">MVC</a>. This is one of the generated <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#screen.structure">screen structure scripts</a> which identifies the <a href="#html.differences">HTML differences</a>.</li>
<li><code>include</code> identifies the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller">Controller</a> part of <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#mvc">MVC</a>. This is one of the pre-written <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">controller scripts</a>.</li>
</ol>

<p>Each Controller is designed to work with only a single View, but a small number of Controllers do not have a View at all. For a complete list of the available Controllers and the Views which they support please refer to <a href="https://www.tonymarston.net/php-mysql/dialog-types.html">Transaction Patterns for web applications</a>.</p>

<p>Note that each <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">Controller</a> can work with any Model, but it does not know which one until it is given a value for <code>$table_id</code> at run-time. It also means that each Model can work with any Controller.</p>

<p>Use these links for the <a href="#validation.similarities">validation similarities</a> and <a href="#validation.differences">validation differences</a>.</p>

<hr>
<h3><a name="validation.differences">Validation differences</a></h3>

<p>While the <a href="#validation.similarities">similarities</a> can be handled by a standard component within the framework it is often necessary for a particular operation on a particular table to be interrupted at a particular point in order to execute some custom code, either for some non-standard data validation or to apply a particular business rule. This can be done in the RADICORE framework by locating the relevant <a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#customisable.methods">customisable method</a> which has been been into the processing flow for that operation, then copying that empty method into the subclass so that it can be filled with the necessary code. Various methods are available, such as:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes._cm_commonvalidation">_cm_commonValidation()</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes._cm_validateinsert">_cm_validateInsert()</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes._cm_validateupdate">_cm_validateUpdate()</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes.validatedelete">_cm_validateDelete()</a></li>
</ul>

<p>There are also other customisable methods with names such as the following:</p>

<ul>
<li><code>_cm_pre_&lt;operation&gt;()</code> - for processing "before" the operation, such as <a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes._cm_pre_insertrecord">_cm_pre_insertRecord()</a>.</li>
<li><code>_cm_post_&lt;operation&gt;()</code> - for processing "after" the operation, such as <a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes._cm_post_insertrecord">_cm_post_insertRecord()</a>.</li>
</ul>

<p>Note that these customisable methods are available because of my implementation of the <a href="https://www.tonymarston.net/php-mysql/template-method-pattern-as-a-framework.html">Template Method Pattern</a> which was made possible because of my decision for all <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">concrete table classes</a> to inherit from an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a>.</p>

<hr>
<h2><a name="implementing.the.similar">My implementation - Dealing with the similarities</a></h2>

<p>Abstraction is a process whereby you separate the abstract from the concrete, the similar from the different, with the aim of putting the similar into a reusable object and the different into unique objects. This section identifies what I recognise as "similar" and how I have turned them into reusable components.</p>

<h3><a name="entity.similarities">Entity/Table similarities</a></h3>

<p>Although each database table holds different data they are all subject to exactly the same set of operations which are <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">Create, Read, Update and Delete (CRUD)</a>. These have been implemented as a set of <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">common table methods</a> which are inherited from an <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a>. Instead of having separate methods for <code>load()</code>, <code>validate()</code> and <code>store()</code> I have grouped them together into wrapper methods as they always have to be called in the same sequence, and it is more efficient to write a single call to a wrapper method instead of a number of calls to the low-level methods. It also makes it easier to modify the contents of a wrapper method without having to modify any code which calls that method.</p>

<p>The advantage of being able to inherit these methods from an abstract class is that they do not have to be defined in each concrete class as they are automatically there when the class is instantiated into an object. This is why each table class file can be <a href="https://www.tonymarston.net/php-mysql/menuguide/dict_table(upd4)export.html">generated</a> from the same template, as shown below:</p>

<a name="class.constructor"></a>
<pre><span>&lt;?php</span>
<span>require_once</span> <span>'std.table.class.inc'</span>;
<span>class</span> #tablename# extends Default_Table
{
    
    <span>function</span> __construct ()
    {
        
        <span>$this-&gt;</span>dirname   = dirname(<span>__file__</span>);
        
        <span>$this-&gt;</span>dbname    = <span>'#dbname#'</span>;
        <span>$this-&gt;</span>tablename = <span>'#tablename#'</span>;
        
        
        <span>$this-&gt;</span>fieldspec = <span>$this-&gt;</span>loadFieldSpec();
        
    } 
    

} 

<span>?&gt;</span>
</pre>

<p>The <a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes.loadfieldspec">loadFieldSpec()</a> method is responsible for transferring the contents of the <a href="https://www.tonymarston.net/php-mysql/data-dictionary.html#table.dict.inc">table structure file</a> into the object's <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.properties">common table properties</a> which configures the object with all the knowledge it requires so that it can deal effectively with that particular table.</p>

<p>Note that the table class file, when it is first created, does not contain any methods other than the constructor as all the standard processing is performed by the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">common table methods</a> which are inherited from the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#generic.table.class">abstract table class</a>. The use of an abstract class enables the <a href="https://en.wikipedia.org/wiki/Template_method_pattern">Template Method Pattern</a> to be implemented. This involves the use of invariant/fixed methods to be defined in the superclass which can be interspersed with variable/customisable <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">"hook" methods</a> which can be overridden within each subclass to provide custom behaviour.</p>

<hr>
<h3><a name="sql.similarities">SQL query similarities</a></h3>

<p>Communicating with a relational database is very straightforward. It is a simple matter of constructing an <a href="https://en.wikipedia.org/wiki/SQL">SQL</a> query, which is a string of text, and sending to the database using the relevant <code>&lt;dbms&gt;_query()</code> function. There are only four basic methods for manipulating data, part of the <a href="https://en.wikipedia.org/wiki/Data_manipulation_language">Data Manipulation Language (DML)</a>, and they are:</p>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Insert_(SQL)">CREATE/INSERT</a></li>
<li><a href="https://en.wikipedia.org/wiki/Select_(SQL)">READ/SELECT</a></li>
<li><a href="https://en.wikipedia.org/wiki/Update_(SQL)">UPDATE</a></li>
<li><a href="https://en.wikipedia.org/wiki/Delete_(SQL)">DELETE</a></li>
</ul>

<p>The query string which is constructed for each of these operations/methods follows the same pattern regardless of what data is being processed.</p>

<a name="common.sql.protocols"></a>
<table summary="">
<caption>Common SQL protocols</caption>
<colgroup>
  <col width="100px">
	<col width="*">
</colgroup>
<tbody><tr>
	<th>Operation</th>
	<th>Code</th>
</tr>
<tr>
	<td>Create</td>
	<td><pre>INSERT INTO &lt;tablename&gt; (column1, column2, column3) VALUES ('value1', 'value2', 'value3');
</pre>
	</td>
</tr>
<tr>
	<td>Read</td>
	<td><pre><b>simple:</b>
SELECT * FROM &lt;tablename&gt; [WHERE &lt;condition&gt;]

<b>advanced:</b>
SELECT &lt;select list&gt;
FROM &lt;tablename&gt;
[JOIN &lt;tablename2&gt; ON (...)]
[WHERE &lt;condition&gt;]
[GROUP BY ...]
[HAVING ...]
[ORDER BY ...]
[LIMIT ... OFFSET ...]
</pre>
  </td>
</tr>
<tr>
	<td>Update</td>
	<td><pre>UPDATE &lt;tablename&gt; SET column1='value1', column2='value2', column3='value3' WHERE &lt;condition&gt;
</pre>
	</td>
</tr>
<tr>
	<td>Delete</td>
	<td><pre>DELETE FROM &lt;tablename&gt; WHERE &lt;condition&gt;
</pre>
	</td>
</tr>
</tbody></table>

<p>Note that the <code>Create</code>, <code>Update</code> and <code>Delete</code> operations function on only one table at a time whereas the <code>Read</code> operation can obtain data from several tables.</p>

<p>As you should see the table names, column names and column values are nothing more than pieces of text which appear in the query string along with various keywords, so none of these names have to be specified in separate arguments on the function call to the DBMS. As PHP has excellent string handling functions I found it very easy to create a single <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#dml.class">Data Access Object (DAO)</a> which can handle the generation and execution of any query for any table in any database. Each of the four methods - one for each of the above operations - is fairly basic as it responds to the instruction "take <i>this</i> data and construct and execute an SQL query for the DBMS". All I have is a separate DAO class for each supported DBMS (MySQL, PostgreSQL, Oracle and SQL Server) as the query strings may be similar but the function calls are not.</p>

<p>I have seen other people's implementations where they have a separate DAO for each table, but my method is far easier as I can add, remove or modify tables at will without having to add, remove or modify any DAOs.</p>

<hr>
<h3><a name="html.similarities">HTML similarities</a></h3>

<p>Unlike in my previous languages where each screen had to be built using a special tool and then compiled, I knew that each web page was nothing more than a text file, with a mixture of tags and values, that had to be constructed from scratch before it could be sent to the client device. I also knew that I did not want to follow the examples I encountered in various books and online tutorials and build each HTML document by spitting out little fragments one piece at a time during the execution of each script.</p>

<p>Because in my previous languages I had built hundreds of different screens for dozens of different applications I had already begun to spot a number of similarities between them. While each screen had different values they each had a structure that was common to other screens, so I looked for a way to hold each different structure in some sort of template so that at run time all I needed to do was fill that template with values. I did not bother searching for templating systems as I had already encountered XML and XSL Transformations in UNIFACE. I played with these on my home computer and discovered that I could easily transform XML into HTML, so after confirming that PHP had the ability to <a href="https://www.tonymarston.net/php-mysql/domxml.html">create XML documents from SQL data</a> and perform <a href="https://www.tonymarston.net/php-mysql/sablotron.html">XSL Transformations</a>, I decided to build all my web pages in this way.</p>

<p>For this I built a standard service object which took as its input one or more entities from the Business/Domain layer and the identity of an XSL stylesheet. Its function was to copy each entity's data into the XML document, add various framework data into that document, load the nominated XSL stylesheet into memory, then perform the XSL transformation. The output from this process was then sent to the client device. In my initial version, which is described in <a href="https://www.tonymarston.net/xml-xsl/xml-and-xsl.html">Generating dynamic web pages using XSL and XML</a>, I had a separate XSL stylesheet for each screen as I had to specify which piece of data went where. After some experimentation and refactoring I found a way to replace these custom-built XSL stylesheets with a smaller collection of <a href="https://www.tonymarston.net/xml-xsl/reusable-xsl.html">Reusable XSL Stylesheets and Templates</a> which make use of a separate <a href="#html.differences">screen structure file</a> to identify which piece of application data goes where.</p>

<p>The areas of each web page which area common and can be supplied by the framework without any intervention by the developer are as follows:</p>

<ul>
  <li><a href="https://www.tonymarston.net/php-mysql/dialog-types.html#menu-bar">Menu Bar</a></li>
  <li><a href="https://www.tonymarston.net/php-mysql/dialog-types.html#title-bar">Title &amp; QuickSearch Bar</a></li>
  <li><a href="https://www.tonymarston.net/php-mysql/dialog-types.html#navigation-bar">Navigation Bar</a></li>
  <li><a href="https://www.tonymarston.net/php-mysql/dialog-types.html#column-headings">Column Headings</a> (for data areas containing <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#data-area.multiple">multiple rows</a>)</li>
  <li><a href="https://www.tonymarston.net/php-mysql/dialog-types.html#message-area">Message Area</a></li>
  <li><a href="https://www.tonymarston.net/php-mysql/dialog-types.html#pagination">Pagination Area</a> (for data areas containing <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#data-area.multiple">multiple rows</a>)</li>
  <li><a href="https://www.tonymarston.net/php-mysql/dialog-types.html#scrolling">Scrolling Area</a> for data areas containing <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#data-area.single">single rows</a></li>
  <li><a href="https://www.tonymarston.net/php-mysql/dialog-types.html#action-bar">Action Bar</a></li>
</ul>

<p>Each screen has its own <a href="https://www.tonymarston.net/php-mysql/dialog-types.html#data-area">Data area</a> which is supplied by each table class.</p>

<p>I had observed earlier that after building a user transaction which did <i>something</i> to a particular database table that I often needed to produce another transaction which did the <i>same thing</i> to a different table. On closer examination I was able to split each transaction into three categories - <a href="https://www.tonymarston.net/php-mysql/transaction-patterns.html#transaction.pattern">structure, behaviour and content</a> - where the structure and behaviour were the same with just the content being different. I first documented this idea from my experience with <a href="https://www.tonymarston.net/uniface/componenttemplates.html">Component Templates</a> in UNIFACE which, for my PHP implementation, I later updated to <a href="https://www.tonymarston.net/php-mysql/transaction-patterns.html">What are Transaction Patterns?</a> This collection of patterns works as follows:</p>

<ul>
<li>the <b>structure</b> is provided by the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#xsl.stylesheet">XSL stylesheet</a></li>
<li>the <b>behaviour</b> is provided  the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">Controller script</a></li>
<li>the <b>content</b> is provided by the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">Model/Table</a></li>
</ul>

<p>Note that each screen structure is documented in the RADICORE library of <a href="https://www.tonymarston.net/php-mysql/dialog-types.html">Transaction Patterns for web applications</a> where it is coupled with a reusable <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">Controller script</a> to provide a standard pattern for user transactions (use cases). Note that any Controller script can be used with any <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">Model (table) class</a> as they all use the same set of <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">common table methods</a>. This provides vast amounts of <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#polymorphism">polymorphism</a> which is a vital ingredient of <a href="https://www.tonymarston.net/php-mysql/dependency-injection-is-evil.html#where.i.do.use.di">Dependency Injection</a>.</p>

<hr>
<h3><a name="transaction.similarities">Transaction (use case) similarities</a></h3>

<p>Note that when I use the word "transaction" I mean "user transaction" or "business transaction" (to differentiate from a <a href="https://en.wikipedia.org/wiki/Database_transaction">database transaction</a>) which is also known as <a href="https://en.wikipedia.org/wiki/Use_case">use case</a> or <a href="https://en.wikipedia.org/wiki/Unit_of_work">unit of work</a>. In the RADICORE framework I also use the name "task" (because it's nice and short) as details of each task are stored in the framework's <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#task">TASK</a> table.</p>

<p>Using the structure shown in <a href="#figure1">Figure 1</a> it follows that every task in the system will need one component from each of those component types, and each of these components will be provided from different sources as follows:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#model">Model</a> - a <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#table.class">table class file</a> for that subsystem which was <a href="https://www.tonymarston.net/php-mysql/menuguide/dict_table(upd4)export.html">generated</a> from the <a href="https://www.tonymarston.net/php-mysql/data-dictionary.html">Data Dictionary</a>.</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#view">View</a> - one of the HTML, CSV or PDF components supplied by the framework. Note that some Controllers do not use a View.</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller">Controller</a> - one of the <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">Controller scripts</a> supplied by the framework.</li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html#dml.class">DAO</a> - one of the DBMS drivers supplied by the framework. This is identified in the applications CONFIG file.</li>
</ul>

<p>Note that it does not matter how much data is submitted on the HTML form or what the column/field names are, it is all made available in the <a href="https://www.php.net/manual/en/reserved.variables.post">$_POST</a> variable which is an associative array. In order to remove the need for code to deconstruct this array and feed in the data one piece at a time, which would automatically produce <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#tight.coupling">tight coupling</a>, I leave this array intact as pass it around as a standard <code>$fieldarray</code> argument on all method calls, as shown in <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#common.table.methods">common table methods</a>.</p>

<p>Note that a particular <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#controller.script">Controller scripts</a> and a particular <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#view">View</a> are paired together to form a <a href="https://www.tonymarston.net/php-mysql/dialog-types.html">Transaction Pattern</a>.</p>

<p>The identity of each of these components is documented in the <a href="#transaction.differences">Transaction (use case) differences</a>.</p>

<p>Each of these user transactions (tasks) will require entries in the framework's <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html">MENU database</a> as follows:</p>

<ul>
<li>An entry on the <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#task">TASK</a> table to provide a user-friendly title and other settings.</li>
<li>An entry on the <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#menu">MENU</a> table if it is to appear in the <a href="https://www.tonymarston.net/php-mysql/menuguide/section03.html#menu-bar">Menu bar</a>.</li>
<li>An entry on the <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#menu">NAVIGATION_BUTTON</a> table if it is to appear in the <a href="https://www.tonymarston.net/php-mysql/menuguide/section03.html#navigation-bar">Navigation bar</a> for a parent task.</li>
<li>An entry on the <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#role-task">ROLE_TASK</a> table to grant access to this task to user with this <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#role">ROLE</a>.</li>
</ul>

<p>Each user of the system will require the following entries in the framework's <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html">MENU database</a>:</p>

<ul>
<li>An entry on the <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#user">USER</a> table to identity each person who is authorised to access the system.</li>
<li>One or more entries on the <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#user-role">USER_ROLE</a> table to identify the different <a href="https://www.tonymarston.net/php-mysql/menuguide/section04.html#role">ROLES</a> that the user may have.</li>
</ul>

<p>It is only necessary to construct one set of <a href="https://www.tonymarston.net/php-mysql/menuguide/appendixa.html">Menus</a> and Navigation buttons as it is a function of the <a href="https://www.tonymarston.net/php-mysql/role-based-access-control.html#current-design">Role Based Access Control (RBAC)</a> software which is built into the framework to filter out any task to which the user does not have access. If the user cannot see a button to activate the task then it cannot be activated.</p>

<p>Use these links for the <a href="#validation.similarities">similarities</a> and <a href="#validation.differences">differences</a> in the validation and business rules.</p>

<hr>
<h3><a name="validation.similarities">Validation similarities</a></h3>

<p>There is one universal rule that every developer SHOULD follow when writing software which takes input from a user and adds it to the database and that is to check that each piece of data is compatible with its column specifications BEFORE it is sent to the database otherwise the query will not execute and the software will come to a grinding halt. The correct behaviour is to check each column's value against its specifications, and if this check fails in any way it should be sent back to the user with a suitable error message so that the mistake can be corrected so that the operation can be tried again.</p>

<p>Because this is a universal requirement it should be possible to perform this checking in a standard component. This can be done within the RADICORE framework because of two simple design decisions:</p>

<ul>
<li>I do not have a separate class property for each column's data. Instead I pass all the data into and out of each table's object as an associative array. This is to take advantage of the fact that data sent in from an HTML form is presented in the <a href="https://www.php.net/manual/en/reserved.variables.post">$_POST</a> array, and data retrieved from the database using the <a href="https://www.php.net/manual/en/mysqli-result.fetch-assoc.php">&lt;dbms&gt;_fetch_assoc()</a> method will also be returned as an associative array.</li>
<li>Each column's specifications are available in the <a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html#notes.$fieldspec">$fieldspec</a> array.</li>
</ul>

<p>Note that the use of separate class properties for each column leads to <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#tight.coupling">tight coupling</a> (which is bad) whereas a single array property leads to <a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html#loose.coupling">loose coupling</a> (which is good)</p>

<p>The existence of these two arrays then makes it a simple process to write a <a href="https://www.tonymarston.net/php-mysql/infrastructure.html#validation.class">standard validation object</a> which can compare the contents of the two arrays to verify that each column's value matches its specifications.</p>

<hr>
<h2><a name="conclusion">Conclusion</a></h2>

<p>I have designed and built numerous enterprise applications from scratch using totally different languages over several decades, so I have more than a passing knowledge of the steps which are required to undertake such a task. The iterative <a href="#gather-analyse-design">Gather-Analyse-Design</a> cycle is always the same, it is only the results of those iterations, the database design, the business rules, and the tasks required to maintain the contents of that database which are different. The deciding factors for a successful implementation are always the same - the accuracy of the design closely followed by the ability of the development team to implement this design using the tools at their disposal. These tools will include the programming language, the DBMS, the code editor, the debugger, and the framework. If any of these is not up to par - either the design, the developers or the development tools - then the result will also not be up to par.</p>

<p>An experienced developer should realise that, despite the differences in the databases, every table is subject to exactly the same operations and can therefore be handled in the same way. Despite the differences in the business rules they can all be handled in the same way. Because these differences can be handled in similar ways it should be possible to reduce these patterns of similarities into reusable code.</p>

<p>I have encountered numerous formalised design methodologies over the years, but neither I nor my fellow developers could ever be persuaded to commit ourselves 100% to a single methodology. We have always chosen the <a href="https://www.ldoceonline.com/dictionary/pick-and-mix">pick-and-mix</a> approach whereby we picked the parts that we liked, ignored the parts that we didn't like, and mixed them together in a way that suited us. I particularly dislike those parts of DDD which are biased towards the way that OO thinkers are taught to build their solutions, such as <a href="#ignore.associations">associations</a>, <a href="#ignore.aggregates">aggregations</a>, <a href="#ignore.compositions">compositions</a>, <a href="#ignore.factories">factories</a> and <a href="#ignore.repositories">repositories</a>. Those are <i>implementation details</i> and should have no effect on the design process.</p>

<p>A large <a href="https://en.wikipedia.org/wiki/Enterprise_software">Enterprise Application</a> often has to cover a collection of different business areas, but it would be wrong to think of each of these areas as a separate <a href="#what.is.a.domain">domain</a> as they have their <a href="#domain.similarities">similarities</a> as well as their <a href="#domain.differences">differences</a>. It is precisely because of the volume of similarities that I think of this collection of business areas to be a complete system while each member of this collection is just a <a href="#subsystems">subsystem</a>. The domain/system is therefore a database application while each subdomain/subsystem is just an implementation of that domain which deals with its particular <a href="#domain.differences">differences</a>.</p>

<p>I designed and built the RADICORE framework specifically to deal with the domain of database application, which means that it has standard ways of dealing with database tables and their relationships, and each subsystem/subdomain can deal with its own set of tables and relationships using these standard ways. The framework also has standard ways of generating HTML pages, CSV files and PDF reports. Once the database has been designed and built the framework's <a href="https://www.tonymarston.net/php-mysql/data-dictionary.html">Data Dictionary</a> can be used to generate both the table classes and, using its library of <a href="https://www.tonymarston.net/php-mysql/dialog-types.html">Transaction Patterns</a>, the user transactions necessary to maintain the contents of those tables. While each of these transactions can be run immediately from the framework's system of menus they do not contain any business rules, but the developer can add these later by inserting the necessary code into the <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">"hook" methods</a> which are available in every table's class. Each subsystem is therefore generated by the framework as an add-on and run from the framework as just another part of an integrated system.</p>

<p>The current <a href="https://radicore.org/">RADICORE</a> framework is actually the third iteration of a framework which I first developed in the mid-1980s in <a href="https://www.tonymarston.net/cobol">COBOL</a> and in the 1990s in <a href="https://www.tonymarston.net/uniface">UNIFACE</a>, and each iteration has improved my levels of productivity. For example, the time taken to implement <a href="#figure2">this family of forms</a> for a single database table has been reduced as follows:</p>

<ul>
<li>In COBOL it would take 5 (five) days.</li>
<li>In UNIFACE it would take 1 (one) day.</li>
<li>In PHP it takes 5 (five) minutes. (yes, I did write MINUTES and not DAYS).</li>
</ul>

<p>No matter what the OO afficionados say I ALWAYS start writing code AFTER I have designed and constructed a properly <a href="https://www.tonymarston.net/php-mysql/database-design.html#normalisation">normalised</a> database, then I use RADICORE's code generation facilities to construct the basic components which I then season to taste. When I came to build the <a href="http://web.archive.org/web/20140105143230/http://transitionengineering.com/">TRANSIX</a> application in 2007, my first ERP package I started with some comprehensive database designs which I found in Len Silverston's <a href="https://www.amazon.com/Data-Model-Resource-Book-Vol/dp/0471380237">Data Model Resource Book</a>. These database were PARTY, PRODUCT, ORDER, INVOICE, INVENTORY and SHIPMENTS. I built the components, added the business rules, and demonstrated the first working version to a customer after just 6 man-months. That is an average of one man-month per database. If I were to change my methods and follow the "advice" given by these pseudo-experts and their so-called "best practices" then my levels of productivity would plummet like a lead balloon, so excuse me if I don't follow the crowd and become a <a href="https://en.wikipedia.org/wiki/Cargo_cult_programming">Cargo Cult Programmer</a> like so many others in the programming community.</p>

<p>Here endeth the lesson. Don't applaud, just throw money.</p>

<hr>
<h2><a name="references">References</a></h2>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Domain-driven_design">Domain-Driven Design</a> from wikipedia</li>
<li><a href="https://www.domainlanguage.com/wp-content/uploads/2016/05/DDD_Reference_2015-03.pdf">Domain-Driven Design Reference (PDF)</a> by Eric Evans</li>
<li><a href="https://martinfowler.com/bliki/DomainDrivenDesign.html">Domain-Driven Design</a> by Martin Fowler</li>
<li><a href="http://web.archive.org/web/20191224181536/https://techbeacon.com/app-dev-testing/get-your-feet-wet-domain-driven-design-3-guiding-principles">Get your feet wet with domain-driven design: 3 guiding principles</a> from techbeacon.com</li>
<li><a href="https://www.geeksforgeeks.org/domain-driven-design-ddd/">Domain-Driven Design (DDD)</a> from GeeksforGeeks</li>
<li><a href="https://medium.com/microtica/the-concept-of-domain-driven-design-explained-3184c0fd7c3f">The Concept of Domain-Driven Design Explained</a> from medium.com</li>
</ul>

<p>The following articles describe aspects of my framework:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/menuguide/index.html">User Guide to the Menu and Security (RBAC) System</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/menuguide/appendixl.html">User Guide to the Audit Logging System</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/menuguide/appendixm.html">User Guide to the Workflow System</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/menuguide/appendixn.html">User Guide to the Data Dictionary</a></li>
</ul>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure.html">RADICORE - A Development Infrastructure for PHP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/dialog-types.html">Transaction Patterns for Web Applications</a></li>
<li><a href="https://www.tonymarston.net/xml-xsl/reusable-xsl.html">Reusable XSL Stylesheets and Templates</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/model-view-controller.html">The Model-View-Controller (MVC) Design Pattern for PHP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/role-based-access-control.html">A Role-Based Access Control (RBAC) system for PHP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/infrastructure-faq.html">FAQ on the Radicore Development Infrastructure</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/auditlog.html">Creating an Audit Log with an online viewing facility</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/workflow.html">An activity based Workflow Engine for PHP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/uml-diagrams.html">UML diagrams for the Radicore Development Infrastructure</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/data-dictionary.html">A Data Dictionary for PHP Applications</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/internationalisation.html">Internationalisation and the Radicore Development Infrastructure (Part 1)</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/internationalisation2.html">Internationalisation and the Radicore Development Infrastructure (Part 2)</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/functions-and-variables.html">RADICORE for PHP - Functions, Methods and Variables</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/radicore-security.html">The RADICORE Security Model</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/output-to-pdf.html">RADICORE for PHP - creating PDF output</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/what-is-a-framework.html">What is a framework?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/3-tier-architecture.html">What is the 3-Tier Architecture?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/blockchain-for-blockheads.html">Blockchain for Blockheads</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/anatomy-of-an-enterprise-application.html">Anatomy of an Enterprise Application</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/template-method-pattern-as-a-framework.html">The Template Method Pattern as a Framework</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html">How Radicore's Hook System Works</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/evolution-of-the-radicore-framework.html">Evolution of the RADICORE framework</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/road-to-rad.html">The Road to Rapid Application Development (RAD)</a></li>
</ul>

<p>The following articles express my heretical views on the topic of OOP:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/design-patterns.html">Design Patterns - a personal perspective</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/oop-for-heretics.html">Object-Oriented Programming for Heretics</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/standards.html">Development Standards - Limitation or Inspiration?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/design-patterns-are-dead.html">Design Patterns are dead! Long live Transaction Patterns!</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/what-is-oop.html">What is Object Oriented Programming (OOP)?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/not-the-three-greatest-paragraphs-ever-written-on-encapsulation.html">Not the three greatest paragraphs ever written on encapsulation</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/table-oriented-programming.html">Table Oriented Programming (TOP)</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/minimalist-approach-to-oop-with-php.html">A minimalist approach to Object Oriented Programming with PHP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/using-object-composition-for-has-a-relationships.html">Using object composition for "has-a" relationships is not such a good idea</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/oo-design-is-incompatible-with-db-design.html">OO Design is incompatible with Database Design</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/how-not-to-validate-data.html">How NOT to Validate Data</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/object-oriented-database-programming.html">Object Oriented Database Programming</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/lets-make-it-more-complicated-than-it-really-is.html">Let's Make It More Complicated Than It Really Is Just To Prove How Clever We Are</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/difference-between-procedural-and-oo-programming.html">What is the difference between Procedural and OO programming?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/interface-and-abstract-class.html">The difference between an interface and an abstract class</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/separate-class-for-each-table-is-good-oo.html">Having a separate class for each database table *IS* good OO</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/concept-is-ok-but-implementation-is-not.html">The concept is OK but your implementation is not</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/objects-should-be-constructed-in-one-go.html">Re: Objects should be constructed in one go</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/whats-so-great-about-oop.html">Re: What's so great about OOP?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/to-there-and-back-but-still-in-the-wrong-place.html">To There and Back - but still in the wrong place</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/exceptions-and-talking-back-to-the-user.html">Re: Exceptions and talking back to the user</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/are-you-achieving-the-aims-of-oop.html">Are you achieving the aims of OOP?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/improving-PHPs-object-ergonomics.html">RE: Improving PHP's Object Ergonomics</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/pop-quiz-on-oop.html">Pop Quiz on OOP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/the-purpose-of-inheritance-is-code-reuse.html">RE: The purpose of inheritance is code reuse</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/fat-model-skinny-controller.html">Fat Model, Skinny Controller</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/decouple-business-logic.html">How to decouple business logic from UI logic</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/from-oop-to-poop.html">From Oop to Poop, from Excellent to Excrement</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/db-is-not-just-an-implementation-detail.html">The database is NOT just an implementation detail</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/abstraction.html">The meaning of "abstraction"</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/active-record-getting-it-right.html">Active Record: Getting it Right</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/active-record-rich-domain-model.html">How to Produce a Rich Domain Model with Active Record</a></li>
</ul>

<p>These are reasons why I consider some ideas on how to do OOP "properly" to be complete rubbish:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/case-sensitive-software-is-evil.html">Case Sensitive Software is EVIL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/software-patents-are-evil.html">Software Patents are EVIL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/stored-procedures-are-evil.html">Stored Procedures are EVIL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/object-relational-mappers-are-evil.html">Object Relational Mappers are EVIL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/dependency-injection-is-evil.html">Dependency Injection is EVIL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/not-so-solid-oo-principles.html">Not-so-SOLID OO Principles</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/fail-to-grasp-these-principles.html">I fail to GRASP these principles</a>
</li><li><a href="https://www.tonymarston.net/php-mysql/singletons-are-not-evil.html">Singletons are NOT evil</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/getters-and-setters-are-evil.html">Getters and Setters are EVIL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/object-interfaces-are-evil.html">Object Interfaces are EVIL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/object-associations-are-evil.html">Object Associations are EVIL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/inheritance-is-not-evil.html">Inheritance is NOT evil</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/namespaces-are-for-numpties.html">Namespaces are for numpties</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/against-static-typing-in-php.html">The case against static typing in PHP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/against-overloading-in-php.html">The case against overloading in PHP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/attributes-are-atrocious.html">Attributes are atrocious</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/autoloaders-are-abominations.html">Autoloaders are abominations</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/composition-is-a-procedural-technique-for-code-reuse.html">Composition is a procedural technique for code reuse</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/decoupling-is-delusional.html">Decoupling is delusional</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/strict-typing-is-for-stick-in-the-muds.html">Strict typing is for stick-in-the-muds</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/value-objects-are-worthless.html">Value objects are worthless</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/programmer-productivity-takes-precedence-over-paradigm-purity.html">Programmer Productivity takes Precedence over Paradigm Purity</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/the-fallacy-of-reuse.html">The Fallacy Of ReUse</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/three-or-four-oop-pillars.html">RE: Back to Basics - Three or Four OOP Pillars?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/dtos-are-diabolical.html">DTOs are Diabolical</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/true-purpose-of-dependency-injection.html">The true purpose of Dependency Injection</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/oo-practices-which-save-time.html">OOP practices which save time</a></li>
</ul>

<p>Here are my views on changes to the PHP language and Backwards Compatibility:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/breaking-bc-is-evil.html">Breaking Backwards Compatibility is EVIL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/please-do-not-break-our-language.html">Please do not break our language</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/bc-break-in-7.2.html">BC break in 7.2 caused by undocumented and unauthorised change</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/changing-fundamental-language-behaviors.html">Changing fundamental language behaviors</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/is-php-too-verbose.html">Is PHP too verbose?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/improving-PHPs-object-ergonomics.html">RE: Improving PHP's Object Ergonomics</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/core-developers-are-idiots.html">The PHP core developers are lazy, incompetent idiots</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/namespaces-in-php-core.html">Is there a case for adding namespaces to PHP core?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/against-static-typing-in-php.html">The case against static typing in PHP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/against-overloading-in-php.html">The case against function overloading in PHP</a></li>
</ul>

<p>The following are responses to criticisms of my methods:</p>

<ul>
<li><a href="https://www.tonymarston.net/php-mysql/good-bad-oop.html">What is/is not considered to be good OO programming</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/hero-or-heretic.html">In the world of OOP am I Hero or Heretic?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/your-code-is-crap.html">Your code is crap!</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/not-using-the-right-standards.html">On not using the "right" standards</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/your-rules-are-rubbish.html">Your rules are RUBBISH!
</a></li><li><a href="https://www.tonymarston.net/php-mysql/attack-on-reddit.com.html">Response to personal attack on reddit.com</a></li>
</ul>

<p>Here are some miscellaneous articles:</p>

<ul>
<li><a href="https://www.tonymarston.net/uniface/largevssmall.html">Component Design - Large and Complex vs. Small and Simple</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/many-to-many.html">How to handle a Many-to-Many relationship with PHP and MySQL</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/dateclass.html">A class for validating and formatting dates</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/errorhandler.html">Customising the PHP error handler</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/technicalkeys.html">Technical Keys - Their Uses and Abuses</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/pagination.html">Pagination - what it is and how to do it</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/database-design.html">The Relational Data Model, Normalisation and effective Database Design</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/standards.html">Development Standards - Limitation or Inspiration?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/session-handler.html">Saving PHP's Session data to a database</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/code-monkey.html">Are you a Code Monkey?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/singleton.html">The Singleton Design Pattern for PHP</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/stateless-protocol.html">Working with a stateless protocol</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/control-data.html">A flexible method of storing control data</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/web-site-vs-web-application.html">Web Site vs Web Application</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/radicore-front-end.html">Using Radicore components in a front-end website</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/an-end-to-end-ecommerce-solution-requires-more-than-a-fancy-website.html">An end-to-end eCommerce solution requires more than a fancy website</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/database-design-ru-novice-ninja-or-nincompoop.html">Database Design - are you Novice, Ninja or Nincompoop?</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/back-to-front.html">Why you should build your web application back-to-front</a></li>
<li><a href="https://www.tonymarston.net/php-mysql/php-is-not-suitable-for-enterprise-applications.html">Why PHP is not suitable for enterprise grade web applications</a></li>
</ul>

<hr>
<h2><a name="history">Amendment History</a></h2>

<div>

<table>
<colgroup>
<col width="150">
<col>
</colgroup>

<tbody><tr>
  <td><a name="2024-07-27">27 Jul 2024</a></td>
	<td>Restructured the entire document into the following headings:
	<br><a href="#table1">Features of Domain Driven Design</a> and <a href="#definitions">DDD Definitions</a>
	<br><a href="#standard.design.process">A standard design process</a>
	<br><a href="#my.personal.approach">Features of my personal approach</a>
	<br><a href="#advice.which.i.ignore">DDD "advice" which I ignore</a>
	<br><a href="#implementing.the.different">My implementation - Dealing with the differences</a>
	<br><a href="#implementing.the.similar">My implementation - Dealing with the similarities</a></td>
</tr>

<tr>
  <td><a name="2021-05-16">16 May 2021</a></td>
	<td>Added <a href="#object.aggregation">The dark side of object aggregation</a></td>
</tr>

<tr>
  <td><a name="2021-05-01">01 May 2021</a></td>
	<td>Added <a href="#separate.controller">Separate controller for each Use Cases</a></td>
</tr>

<tr>
  <td><a name="2019-03-02">02 Mar 2019</a></td>
	<td>Included references to <a href="https://www.tonymarston.net/php-mysql/template-method-pattern-as-a-framework.html">The Template Method Pattern as a Framework</a>
	<br>Added <a href="#what.is.a.domain">What is a "domain"?</a></td>
</tr>

<tr>
  <td><a name="2019-01-24">24 Jan 2019</a></td>
	<td>Added <a href="#differences.and.similarities">The biggest differences with the most similarities</a></td>
</tr>

<tr>
  <td><a name="2018-12-02">02 Dec 2018</a></td>
	<td>Added a <a href="#comparison.matrix">Comparison Matrix</a> to summarise the differences between the "approved" approach and my "heretical" approach.</td>
</tr>

<tr>
  <td><a name="2018-10-01">01 Oct 2018</a></td>
	<td>Added <a href="#build.a.library">Build a library of reusable components</a>
	<br>Added <a href="#library.then.framework">Turning a library into a framework</a>
	<br>Added <a href="#optimise.the.ui">Optimise the User Interface</a>
	<br>Reworded the article to emphasize the fact that DDD starts with the domain-specific logic and adds in the domain-agnostic logic afterwards whereas my framework does the exact opposite. It is an implementation of the <a href="https://www.tonymarston.net/php-mysql/radicore-hooks.html#template.method">Template Method pattern</a> which starts with domain-agnostic logic and allows domain-specific logic to be added in later via a pre-defined collection of "hook" methods.</td>
</tr>

</tbody></table>
</div>

<hr>
<a name="comments"></a>






<p><img src="https://www.tonymarston.net/counter.php?noshow&amp;page=/php-mysql/dont-do-domain-driven-design.html" alt="counter"></p>



</div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Average American Spent 2.5 Months on Their Phone in 2024 (153 pts)]]></title>
            <link>https://www.pcmag.com/articles/yikes-the-average-american-spent-25-months-on-their-phone-in-2024</link>
            <guid>42539474</guid>
            <pubDate>Sun, 29 Dec 2024 12:16:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.pcmag.com/articles/yikes-the-average-american-spent-25-months-on-their-phone-in-2024">https://www.pcmag.com/articles/yikes-the-average-american-spent-25-months-on-their-phone-in-2024</a>, See on <a href="https://news.ycombinator.com/item?id=42539474">Hacker News</a></p>
Couldn't get https://www.pcmag.com/articles/yikes-the-average-american-spent-25-months-on-their-phone-in-2024: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Trying to use Bluesky without getting burned again (108 pts)]]></title>
            <link>https://chrisholdgraf.com/blog/2024/bluesky</link>
            <guid>42539462</guid>
            <pubDate>Sun, 29 Dec 2024 12:13:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://chrisholdgraf.com/blog/2024/bluesky">https://chrisholdgraf.com/blog/2024/bluesky</a>, See on <a href="https://news.ycombinator.com/item?id=42539462">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="sZb5Hx9MFS"><p>I see a lot of individuals and communities in my network moving their primary social media presence over to <a target="_blank" href="https://bsky.social/" rel="noreferrer">BlueSky</a> in the last few weeks.
I’ve decided to give BlueSky a shot myself, and thought I’d share some of my rationale for why, and how I’m approaching it.</p><h2 id="dont-build-castles-in-other-peoples-kingdoms"><span>Don’t build castles in other people’s kingdoms</span><a href="#dont-build-castles-in-other-peoples-kingdoms" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>A lot of my thinking here is influenced by a great blog post called <a target="_blank" href="https://howtomarketagame.com/2021/11/01/dont-build-your-castle-in-other-peoples-kingdoms/" rel="noreferrer">Don’t build castles in other people’s kingdoms</a>.
While the post is technically about the gaming industry, it has a lot to tell us about any relationship between users, platforms, and value creation.</p><p>The short takeaway is that <strong>you should create the most value in spaces that you control, and leverage platforms that others control to direct attention and value to your own spaces.</strong></p><figure id="gOvrQ7Dcel"><img id="tzkYkoGyb3" src="https://chrisholdgraf.com/build/bluesky-castles-90f466dfa878b52d9795ed72166de5b7.png" alt="An adapted figure from Don’t build your castle in other people’s kingdoms. I’m treating BlueSky as a foreign kingdom, and will participate there while building bridges into the spaces that I can trust and control." data-canonical-url="./images/bluesky-castles.png"><figcaption><p>An adapted figure from <a target="_blank" href="https://howtomarketagame.com/2021/11/01/dont-build-your-castle-in-other-peoples-kingdoms/" rel="noreferrer">Don’t build your castle in other people’s kingdoms</a>. I’m treating BlueSky as a foreign kingdom, and will participate there while building bridges into the spaces that I can trust and control.</p></figcaption></figure><p>The longer explanation: platforms become successful because they allow their users to create value leveraging their platform. However, if that value is only achievable <em>within the platform</em>, then it’s not as valuable as you think. Platforms are fickle, and unless they have the right governance or the right technical framework to empower users to take their value where they wish, you run the risk of losing all of the value you create via a platform if you no longer wish to use it.</p><p>In other words: <strong>don’t build your castle in a kingdom that somebody else controls, because they can take it away from you</strong>. Instead, build a castle on defensible land, and leverage platforms to bring more ideas, people, value, etc to your castle.</p><p>Social media networks are platforms, and they allow for a great amount of value generation like building a personal brand, encouraging conversations, making connections, building and organizing networks, etc. However, social media platforms are also controlled by a small number of financially or politically-interested stakeholders that will inevitably change the rules of the game. We’re playing in <em>their kingdom</em>, not ours, and we saw what happened when “their kingdom” became “Elon Musk’s kingdom”.</p><p>In Twitter, many of us had built personal brands and generated an enormous amount of interesting and useful ideas via their platform. You had long, well-thought-out, and insightful threads being shared by leaders in their fields. You had conversations and major announcements being shared via tweets on the platform. Then Twitter got bought and began to become a place that we didn’t recognize.</p><p>All of that value is now trapped within Twitter. Why? Because we shared it in a way that was trapped within Twitter’s kingdom. One option would be to stop using these kinds of platforms altogether. Another is to continue <em>leveraging</em> these platforms, but also directing real value back to spaces that are more reliable. This is what I’m going to try avoiding with my engagement in BlueSky.</p><h2 id="assume-bluesky-or-any-platform-service-will-go-away-in-three-years"><span>Assume BlueSky (or any platform / service) will go away in three years</span><a href="#assume-bluesky-or-any-platform-service-will-go-away-in-three-years" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>My guiding principle for using BlueSky (or any platform or SaaS product for that matter) is to assume that it will go away in three years. It’ll either go bankrupt, get bought, or change its strategy to <a target="_blank" href="https://pluralistic.net/2024/08/17/hack-the-planet/#how-about-a-nice-game-of-chess" rel="noreferrer">enshittify the product</a>. You can make an argument that BlueSky has some technical protections against this (though Cory Doctorow is <a target="_blank" href="https://pluralistic.net/2024/11/02/ulysses-pact/#tie-yourself-to-a-federated-mast" rel="noreferrer">still skeptical about how enshittification may play out with BlueSky</a>) but I think the heuristic above is still the right one to follow.</p><p>So I’m going to try treating BlueSky as a <em>temporary</em> place to make connections or share ideas, but do my best to direct attention, deeper thoughts, “real” value to places that I have more control over. Here are a few examples:</p><ul><li>Rather than long tweet threads, I’ll write blog posts and share a short primer to direct attention to my space.</li><li>Rather than treating my BlueSky relationships as “real”, I’ll try to invest in those relationships <em>outside of the platform</em> if I want them to live beyond that platform’s existence.</li><li>Rather than sharing BlueSky links in “learn more about me” slides etc, I’ll lead with links to my website.</li><li>Rather than treating BlueSky as “the space” for community-specific conversations, I’ll encourage folks to drive those conversations to community-specific spaces (like Discourse, Discord, etc).</li><li>Rather than treating BlueSky content as persistent (and thus referenceable in things like blog posts or papers), I’ll try rendering conversations into a static form before including them in my writing.</li><li>OR, I should <em>assume that these kinds of references will break</em>, and decide that this is still fine for the convenience of being able to use them anyway. Not everything needs to be persistent over long timelines!</li></ul><p>I hope that some of these principles are useful for others, and would be keen to learn how others are approaching this new space.</p><h2 id="why-not-use-mastodon"><span>Why not use Mastodon?</span><a href="#why-not-use-mastodon" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>A lot of folks are also suggesting this is a chance to double-down on Mastodon. Unfortunately I just haven’t seen the energy and critical mass there to suggest that this is going to happen. If social media is about having interesting, dynamic interactions with people, then you need to go to the place that maximizes the chance of this happening.</p><p>In my experience, Mastodon just hasn’t gotten there. For example, one of its core features - federated servers and identity - is actually a pretty confusing UX pattern for the vast majority of people that don’t care about that kind of thing (“you’re telling me there’s a <code>@choldgraf@hachyderm.io</code> and a <code>@choldgraf@mastodon.social</code> and they’re two different people?!”). Moreover, while having federated servers means that communities have more control over their norms and rules, it also means <a href="https://github.com/jupyter/governance/issues/146" target="_blank" rel="noreferrer" data-state="closed">communities have to do a lot more work to understand the idiosyncratic policies of each server</a>. These are features if you think of a social networks as a tightly-interconnected and self-contained community, but the appeal of these kinds of platforms is having global reach to people that you may otherwise never have met.</p><p>For these reasons, or for whatever other reason, it doesn’t seem like Mastodon is getting the critical mass that makes it worth prioritizing over other social media platforms. I’ll keep using it, and we’ll see how this evolves over time.</p><p>And either way, my guiding principle will remain the same: I’ll assume these platforms will be gone in three years, and do my best to direct value off of them and into spaces that I, or communities I care about, control.</p><h2 id="appendix-the-six-rules-from-dont-build-castles-in-other-peoples-kingdoms"><span>Appendix: The six rules from Don’t Build Castles in Other People’s Kingdoms</span><a href="#appendix-the-six-rules-from-dont-build-castles-in-other-peoples-kingdoms" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>I’ll share the rules recommended in <a target="_blank" href="https://howtomarketagame.com/2021/11/01/dont-build-your-castle-in-other-peoples-kingdoms/" rel="noreferrer">Don’t Build Castles in Other People’s Kingdoms</a> because they’re a great reference - check out the article for more explanation:</p><ul><li><strong>Build your castle on land you own</strong></li><li><strong>Shamelessly use other kingdoms just like they’re using you</strong></li><li><strong>Always move people back to your kingdom, never to another kingdom</strong></li><li><strong>Operate like your castle can get shutdown tomorrow</strong></li><li><strong>Be suspicious of new kingdoms that give away easy visibility</strong></li><li><strong>Give good reasons to go back to the Castle in your Kingdom. And be persistent!</strong></li></ul></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I Run LLMs Locally (195 pts)]]></title>
            <link>https://abishekmuthian.com/how-i-run-llms-locally/</link>
            <guid>42539155</guid>
            <pubDate>Sun, 29 Dec 2024 10:49:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://abishekmuthian.com/how-i-run-llms-locally/">https://abishekmuthian.com/how-i-run-llms-locally/</a>, See on <a href="https://news.ycombinator.com/item?id=42539155">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>A HN user asked me<sup><a href="#sources">0</a></sup> how I run LLMs locally with some specific questions, I’m documenting it here for everyone.</p><p>Before I begin I would like to credit the thousands or millions of unknown artists, coders and writers upon whose work the Large Language Models(LLMs) are trained, often without due credit or compensation.</p><h2 id="get-started">Get Started</h2><p>r/LocalLLaMA subreddit<sup><a href="#sources">1</a></sup> &amp; Ollama blog<sup><a href="#sources">2</a></sup> are great places to get started with running LLMs locally.</p><h2 id="hardware">Hardware</h2><p>I have a laptop running Linux with core i9 (32threads) CPU, 4090 GPU (16GB VRAM) and 96 GB of RAM. Models which fit within the VRAM can generate more tokens/second, larger models will be offloaded to RAM (dGPU offloading) and thereby lower tokens/second. I will talk about models in a section below.</p><p>It's not necessary to have such beefy computer for running LLMs locally, smaller models would run fine in older GPUs or in CPU albeit slowly and with more hallucinations.</p><p>There are a number of high quality open-source tools which enable running LLMs locally. These are the tools I use regularly.</p><p>Ollama<sup><a href="#sources">3</a></sup> is a middleware with python, JavaScript libraries for llama.cpp<sup><a href="#sources">4</a></sup> which helps run LLMs. I use Ollama in docker<sup><a href="#sources">5</a></sup>.</p><p>Open WebUI<sup><a href="#sources">6</a></sup> is a frontend which offers familiar chat interface for text and image input and communicates with Ollama back-end and streams the output back to the user.</p><p>llamafile<sup><a href="#sources">7</a></sup> is a single executable file with LLM. It’s probably the easiest way to get started with local LLMs, but I’ve had issues with dGPU offloading in llamafile<sup><a href="#sources">8</a></sup>.</p><p>I’m not a big consumer of image/video generation models, but when needed, I use AUTOMATIC1111<sup><a href="#sources">9</a></sup> for images which require some customisation and Fooocus<sup><a href="#sources">10</a></sup> for simple image generation. For complex workflow automatons with image generation, there’s ComfyUI<sup><a href="#sources">11</a></sup>.</p><p>For code completion I use Continue<sup><a href="#sources">12</a></sup> in VSCode.</p><p>I use Smart Connections<sup><a href="#sources">13</a></sup> in Obsidian<sup><a href="#sources">14</a></sup> to query my notes using Ollama.</p><figure><img alt="Screenshot of Obsidian with chat smart connections extension showing the last journal I write" src="https://abishekmuthian.com/images/obsidian-smart-connections.jpg" width="100%" height="auto" layout="responsive"><figcaption>I asked Smart Connections when I wrote my last journal, I hope to write my journal every day in 2025.</figcaption></figure><h2 id="models">Models</h2><p>I use Ollama models page<sup><a href="#sources">15</a></sup> to download latest LLMs. I use RSS on Thunderbird to keep track of the models. I use CivitAI<sup><a href="#sources">16</a></sup> to download image generation models for specific styles (e.g. Isometric for world building). But be advised that most models in CivitAI seem to be catered towards adult image generation.</p><p>I choose LLMs based on performance/ size. My current choice for LLMs changes frequently due to rapid advancement in LLMs.</p><pre><code>•	Llama3.2 for Smart Connections and generic queries.
•	Deepseek-coder-v2 for code completion in Continue.
•	Qwen2.5-coder for chatting about code in Continue.
•	Stable Diffusion for image generation in AUTOMATIC1111 or Fooocus.
</code></pre><h2 id="updation">Updation</h2><p>I update the docker containers using WatchTower<sup><a href="#sources">17</a></sup> and models from within the Open Web UI.</p><h2 id="fine-tuning-and-quantization">Fine-Tuning and Quantization</h2><p>I haven’t fine-tuned or quantized any models on my machine yet as my Intel CPU may have a manufacturing defect<sup><a href="#sources">18</a></sup> so I don’t want to push it to high temperatures for long durations during training.</p><h2 id="conclusion">Conclusion</h2><p>Running LLMs locally gives me total control over my data and lower latency for the responses. None of these would be possible without the open-source projects and <del>open-source</del> free models and original owners of the data upon which these models are trained.</p><p>I will update this post as and when I use newer tools/models.</p><p>[0] <a href="https://news.ycombinator.com/item?id=42537024" target="_blank">https://news.ycombinator.com/item?id=42537024</a></p><p>[1] <a href="https://www.reddit.com/r/LocalLLaMA/" target="_blank">https://www.reddit.com/r/LocalLLaMA/</a></p><p>[2] <a href="https://ollama.com/blog" target="_blank">https://ollama.com/blog</a></p><p>[3] <a href="https://ollama.com/download" target="_blank">https://ollama.com/download</a></p><p>[4] <a href="https://github.com/ggerganov/llama.cpp" target="_blank">https://github.com/ggerganov/llama.cpp</a></p><p>[5] <a href="https://hub.docker.com/r/ollama/ollama" target="_blank">https://hub.docker.com/r/ollama/ollama</a></p><p>[6] <a href="https://github.com/open-webui/open-webui" target="_blank">https://github.com/open-webui/open-webui</a></p><p>[7] <a href="https://github.com/Mozilla-Ocho/llamafile" target="_blank">https://github.com/Mozilla-Ocho/llamafile</a></p><p>[8] <a href="https://github.com/Mozilla-Ocho/llamafile/issues/611" target="_blank">https://github.com/Mozilla-Ocho/llamafile/issues/611</a></p><p>[9] <a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui" target="_blank">https://github.com/AUTOMATIC1111/stable-diffusion-webui</a></p><p>[10] <a href="https://github.com/lllyasviel/Fooocus" target="_blank">https://github.com/lllyasviel/Fooocus</a></p><p>[11] <a href="https://github.com/comfyanonymous/ComfyUI" target="_blank">https://github.com/comfyanonymous/ComfyUI</a></p><p>[12] <a href="https://docs.continue.dev/getting-started/overview" target="_blank">https://docs.continue.dev/getting-started/overview</a></p><p>[13] <a href="https://github.com/brianpetro/obsidian-smart-connections" target="_blank">https://github.com/brianpetro/obsidian-smart-connections</a></p><p>[14] <a href="https://obsidian.md/" target="_blank">https://obsidian.md</a></p><p>[15] <a href="https://ollama.com/search" target="_blank">https://ollama.com/search</a></p><p>[16] <a href="https://civitai.com/models/63376/isometric-chinese-style-architecture-lora" target="_blank">https://civitai.com/models/63376/isometric-chinese-style-architecture-lora</a></p><p>[17] <a href="https://containrrr.dev/watchtower/" target="_blank">https://containrrr.dev/watchtower/</a></p><p>[18] <a href="https://en.wikipedia.org/wiki/Raptor_Lake#Instability_and_degradation_issue" target="_blank">https://en.wikipedia.org/wiki/Raptor_Lake#Instability_and_degradation_issue</a></p></div><p>I strive to write low frequency, High quality content on Health, Product Development, Programming, Software Engineering, DIY, Security, Philosophy and other interests.
If you would like to receive them in your email inbox then please consider subscribing to my <a href="http://eepurl.com/if97pb" target="_blank">Newsletter</a>.</p></div>]]></description>
        </item>
        <item>
            <title><![CDATA[We've not been trained for this: life after the Newag DRM disclosure [video] (350 pts)]]></title>
            <link>https://media.ccc.de/v/38c3-we-ve-not-been-trained-for-this-life-after-the-newag-drm-disclosure</link>
            <guid>42538914</guid>
            <pubDate>Sun, 29 Dec 2024 09:48:33 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://media.ccc.de/v/38c3-we-ve-not-been-trained-for-this-life-after-the-newag-drm-disclosure">https://media.ccc.de/v/38c3-we-ve-not-been-trained-for-this-life-after-the-newag-drm-disclosure</a>, See on <a href="https://news.ycombinator.com/item?id=42538914">Hacker News</a></p>
Couldn't get https://media.ccc.de/v/38c3-we-ve-not-been-trained-for-this-life-after-the-newag-drm-disclosure: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[BioTerrorism Will Save Your Life with the 4 Thieves Vinegar Collective [video] (135 pts)]]></title>
            <link>https://media.ccc.de/v/38c3-bioterrorism-will-save-your-life-with-the-4-thieves-vinegar-collective</link>
            <guid>42538903</guid>
            <pubDate>Sun, 29 Dec 2024 09:47:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://media.ccc.de/v/38c3-bioterrorism-will-save-your-life-with-the-4-thieves-vinegar-collective">https://media.ccc.de/v/38c3-bioterrorism-will-save-your-life-with-the-4-thieves-vinegar-collective</a>, See on <a href="https://news.ycombinator.com/item?id=42538903">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

<p>
<span></span>
<a href="https://media.ccc.de/search?p=Dr.+Mix%C3%A6l+Swan+Laufer">Dr. Mixæl Swan Laufer</a>

</p>

<p><a href="https://media.ccc.de/c/38c3/Ethics,%20Society%20&amp;%20Politics" rel="tag">Ethics, Society &amp; Politics</a>
Playlists:
<a href="https://media.ccc.de/v/38c3-bioterrorism-will-save-your-life-with-the-4-thieves-vinegar-collective/playlist">'38c3' videos starting here</a>
/
<a data-method="get" href="https://media.ccc.de/v/38c3-bioterrorism-will-save-your-life-with-the-4-thieves-vinegar-collective/audio">audio</a></p>
<!-- %h3 About -->
<p>Governments have criminalized the practice of managing your own health. Despite the fact that for most of human history bodily autonomy, and self-managed health was the norm, it is now required that most aspects of your health must be mediated by an institution deputized by the state. Taking those rights back for yourself is then labeled "BioTerrorism". So be it. Let's learn how.</p>

<p>We all know that custom, hand-made, artisan-crafted, boutique tools are always better than something factory made. A guitar, a wood chisel, a chef's knife, a built racing engine, a firearm, a suit, a pair of shoes. Given that this is so well-known, and so universally understood, it's peculiar at best that this is not seen by most people when it comes to medicine. It is however also true. </p>

<p>Given, however, that the traditional rôle of pharmacists who used to have the freedom to compound custom medicines for the people they were serving has been revoked, and now despite their extensive training, have been limited to being able to do little more than count pills in most cases, we have to do this ourselves. </p>

<p>The problem is that this has been criminalized. The moment you stop groveling for permission from medical authorities, and start becoming actively involved in managing your own health, you are a criminal in most countries in the world. Practicing medicine without a license, manufacture of drugs, possession of laboratory tools, possession of precursor chemicals... the list of felonies goes on. </p>

<p>The choice is yours. Would you like to be the sickest law-abiding citizen, or the healthiest BioTerrorist? If you want the red pill, you'll have to manufacture it yourself. The blue pill is prescription-only, and if you manage to get a prescription, and you're rich maybe you can afford to buy it. </p>

<p>Come learn about the long list of medications which went through the research and development processes, but are never going to be commercially available. Learn how to find more of these, and learn the many ways you can make them yourself.</p>

<p>Licensed to the public under http://creativecommons.org/licenses/by/4.0</p>

<h3>Download</h3>
<div>

<div>
<h4>These files contain multiple languages.</h4>
<p>
This Talk was translated into multiple languages. The files available
for download contain all languages as separate audio-tracks. Most
desktop video players allow you to choose between them.
</p>
<p>
Please look for "audio tracks" in your desktop video player.
</p>
</div>
<div>
<p>
<h4>Audio</h4>
</p>

</div>
</div>
<!-- %h3 Embed/Share -->

<h3>Tags</h3>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[38C3: Illegal Instructions (414 pts)]]></title>
            <link>https://media.ccc.de/c/38c3</link>
            <guid>42537631</guid>
            <pubDate>Sun, 29 Dec 2024 04:54:33 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://media.ccc.de/c/38c3">https://media.ccc.de/c/38c3</a>, See on <a href="https://news.ycombinator.com/item?id=42537631">Hacker News</a></p>
Couldn't get https://media.ccc.de/c/38c3: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[WebGL Fluid Simulation (348 pts)]]></title>
            <link>https://paveldogreat.github.io/WebGL-Fluid-Simulation/</link>
            <guid>42537567</guid>
            <pubDate>Sun, 29 Dec 2024 04:39:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://paveldogreat.github.io/WebGL-Fluid-Simulation/">https://paveldogreat.github.io/WebGL-Fluid-Simulation/</a>, See on <a href="https://news.ycombinator.com/item?id=42537567">Hacker News</a></p>
Couldn't get https://paveldogreat.github.io/WebGL-Fluid-Simulation/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Can LLMs accurately recall the Bible? (129 pts)]]></title>
            <link>https://benkaiser.dev/can-llms-accurately-recall-the-bible/</link>
            <guid>42537332</guid>
            <pubDate>Sun, 29 Dec 2024 03:44:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://benkaiser.dev/can-llms-accurately-recall-the-bible/">https://benkaiser.dev/can-llms-accurately-recall-the-bible/</a>, See on <a href="https://news.ycombinator.com/item?id=42537332">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                    <p>I've often found myself uneasy when LLMs (Large Language Models) are asked to quote the Bible. While they can provide insightful discussions about faith, their tendency to hallucinate responses raises concerns when dealing with scripture, which we regard as the inspired Word of God.</p><p>To explore these concerns, I created a benchmark to evaluate how accurately LLMs can recall scripture word for word. Here's a breakdown of my methodology and the test results.</p><h3 id="methodology">Methodology</h3><p>To ensure consistent and fair evaluation, I tested each model using six scenarios designed to measure their ability to accurately recall scripture. For readers interested in the technical details, <a href="https://github.com/benkaiser/llm-compare?ref=benkaiser.dev">the source code for the tests is available here</a>. All tests were conducted with a temperature setting of 0, and I have given slack to the models by making the pass check case and whitespace insensitive.</p><p>A temperature of 0 ensures the models generate the most statistically probable response at each step, minimising creativity or variability and prioritising accuracy. This approach is particularly important when evaluating fixed reference material like the Bible, where precise wording matters.</p><!--kg-card-begin: html--><!--kg-card-end: html--><h3 id="test-1-popular-scripture-recall">Test 1: Popular Scripture Recall</h3><!--kg-card-begin: html--><table>
      <tbody><tr>
        <th>Model</th>
        <th>Pass</th>
      </tr>
      
        <tr>
          <td>Llama 3.1 405B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 70B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 8B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.3 70B</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>GPT 4o</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o mini</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Pro</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Flash</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 2.0 Flash</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Haiku</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Sonnet</td>
          <td>✅</td>
        </tr>
      
    </tbody></table><!--kg-card-end: html--><p>When asking a model to recall John 3:16 in the NIV translation, the only model that failed to accurately recall the verse word for word was Llama 3.3 70B. It was only a very slight translation mismatch, with it recalling "only begotten son" where the actual verse in the NIV does not include begotten, despite it being present in other translations.</p><h3 id="test-2-obscure-verse-recall">Test 2: Obscure Verse Recall</h3><!--kg-card-begin: html--><table>
      <tbody><tr>
        <th>Model</th>
        <th>Pass</th>
      </tr>
      
        <tr>
          <td>Llama 3.1 405B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 70B</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 8B</td>
          <td>❌</td>
        </tr>
      
        <tr>
          <td>Llama 3.3 70B</td>
          <td>❌</td>
        </tr>
      
        <tr>
          <td>GPT 4o</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o mini</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Pro</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Flash</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Gemini 2.0 Flash</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Haiku</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Sonnet</td>
          <td>✅</td>
        </tr>
      
    </tbody></table><!--kg-card-end: html--><p>Many models struggled to recall Obadiah 1:16 NIV word for word, often mixing up the words with other translations. For these cases, I have marked them as partial for correctly recalling the verse in <em>some</em> translation, even if not the specific requested one. The models that clearly succeeded seem to be very large models, 405B for Llama and GPT 4o and Claude 3.5 Sonnet.</p><h3 id="test-3-verse-continuation">Test 3: Verse Continuation</h3><!--kg-card-begin: html--><table>
      <tbody><tr>
        <th>Model</th>
        <th>Pass</th>
      </tr>
      
        <tr>
          <td>Llama 3.1 405B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 70B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 8B</td>
          <td>❌</td>
        </tr>
      
        <tr>
          <td>Llama 3.3 70B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o mini</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Pro</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Flash</td>
          <td>❌</td>
        </tr>
      
        <tr>
          <td>Gemini 2.0 Flash</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Haiku</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Sonnet</td>
          <td>✅</td>
        </tr>
      
    </tbody></table><!--kg-card-end: html--><p>When quoting the model 2 Chronicles 11:13 (but without specifying where in the bible it is found) and asking it to produce the immediate next verse, we had a much more mixed bag of results. Many medium-to-large sized models got this correct, but the smaller ones completely hallucinated parts or all of the verse. Claude 3.5 Haiku almost recalled the verse, but referred to the Levites as "they", which is not explicitly a translation in any of the more well known translations and appears to be the model substituting the intention of the word rather than the exact one.</p><h3 id="test-4-verse-block-recall">Test 4: Verse Block Recall</h3><!--kg-card-begin: html--><table>
      <tbody><tr>
        <th>Model</th>
        <th>Pass</th>
      </tr>
      
        <tr>
          <td>Llama 3.1 405B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 70B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 8B</td>
          <td>❌</td>
        </tr>
      
        <tr>
          <td>Llama 3.3 70B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o mini</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Pro</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Flash</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Gemini 2.0 Flash</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Haiku</td>
          <td>⚠️</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Sonnet</td>
          <td>✅</td>
        </tr>
      
    </tbody></table><!--kg-card-end: html--><p>When asked to recall Lamentations chapter 3 verses 19 through 24, the models did this very well. Only the smallest of the models, Llama 3.1 8B outright failed here, instead recalling the beginning of the chapter. The two warnings were only slight translation mismatches of a few words, but the essence of the verse was preserved.</p><h3 id="test-5-query-based-lookup">Test 5: Query Based Lookup</h3><!--kg-card-begin: html--><table>
      <tbody><tr>
        <th>Model</th>
        <th>Pass</th>
      </tr>
      
        <tr>
          <td>Llama 3.1 405B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 70B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 8B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.3 70B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o mini</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Pro</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Flash</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 2.0 Flash</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Haiku</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Sonnet</td>
          <td>✅</td>
        </tr>
      
    </tbody></table><!--kg-card-end: html--><p>Asking the models, "What's that verse in the bible about the Earth being filled with knowledge of God's glory?", all of them successfully recalled it was Habakkuk 2:14. Verse lookup is definitely a strong-suit, even in smaller models.</p><h3 id="test-6-entire-chapter-recall">Test 6: Entire Chapter Recall</h3><!--kg-card-begin: html--><table>
      <tbody><tr>
        <th>Model</th>
        <th>Pass</th>
      </tr>
      
        <tr>
          <td>Llama 3.1 405B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 70B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Llama 3.1 8B</td>
          <td>❌</td>
        </tr>
      
        <tr>
          <td>Llama 3.3 70B</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>GPT 4o mini</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Pro</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 1.5 Flash</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Gemini 2.0 Flash</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Haiku</td>
          <td>✅</td>
        </tr>
      
        <tr>
          <td>Claude 3.5 Sonnet</td>
          <td>✅</td>
        </tr>
      
    </tbody></table><!--kg-card-end: html--><p>When asking for the entire contents of Romans 6 in the KJV translation, almost all of the models recalled all 23 verses accurately. Even the failed case of Llama 3.1 8B recalled over 98% of the words correctly, with only 9 incorrect words. </p><h2 id="conclusions">Conclusions</h2><p>If you really want to lean on an LLM to give you textually accurate bible verses of popular translations, you really should lean on higher parameter count (i.e. larger) models. These include models like Llama 405B, OpenAI GPT 4o and Claude Sonnet which all had perfect scores. Smaller models (7B range) will often mix up translations, and in some cases even mix up or hallucinate verse altogether. Medium-sized models (70B range) often accurately preserve the intention of the verses, although the verse may be a mangled representation of several translations, and in some cases paraphrased a little by the LLM.</p><p>You can certainly still use smaller models for discussion that references scripture by Book/Chapter/Verse, but it is important to lean on an actual copy of the Bible for the correct text in these cases.</p><p>Looking into the future, we may very well see smaller models perform better on these benchmarks, but there is surely a limitation to how much information can be encoded into such small models.</p><p>For full test results, see <a href="https://benkaiser.github.io/llm-compare/results-with-responses.html?ref=benkaiser.dev">the results file here</a>, including the raw prompts for each test. If you feel like I missed a crucial test, feel free to <a href="https://github.com/benkaiser/llm-compare/issues/new?ref=benkaiser.dev">submit an issue on GitHub</a>.</p>
                </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Personal Mail Server on OpenBSD (2019) (108 pts)]]></title>
            <link>https://nicolascarpi.github.io/openbsd/2019/04/03/openbsd-mail-server.html</link>
            <guid>42536750</guid>
            <pubDate>Sun, 29 Dec 2024 01:58:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://nicolascarpi.github.io/openbsd/2019/04/03/openbsd-mail-server.html">https://nicolascarpi.github.io/openbsd/2019/04/03/openbsd-mail-server.html</a>, See on <a href="https://news.ycombinator.com/item?id=42536750">Hacker News</a></p>
Couldn't get https://nicolascarpi.github.io/openbsd/2019/04/03/openbsd-mail-server.html: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Jeju Air accident in South Korea kills at least 47 (226 pts)]]></title>
            <link>https://www.bloomberg.com/news/articles/2024-12-29/plane-crashes-at-s-korea-airport-killing-at-least-23-yonhap</link>
            <guid>42536647</guid>
            <pubDate>Sun, 29 Dec 2024 01:40:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bloomberg.com/news/articles/2024-12-29/plane-crashes-at-s-korea-airport-killing-at-least-23-yonhap">https://www.bloomberg.com/news/articles/2024-12-29/plane-crashes-at-s-korea-airport-killing-at-least-23-yonhap</a>, See on <a href="https://news.ycombinator.com/item?id=42536647">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
    <section>
        <h3>Why did this happen?</h3>
        <p>Please make sure your browser supports JavaScript and cookies and that you are not
            blocking them from loading.
            For more information you can review our <a href="https://www.bloomberg.com/notices/tos">Terms of
                Service</a> and <a href="https://www.bloomberg.com/notices/tos">Cookie Policy</a>.</p>
    </section>
    <section>
        <h3>Need Help?</h3>
        <p>For inquiries related to this message please <a href="https://www.bloomberg.com/feedback">contact
            our support team</a> and provide the reference ID below.</p>
        <p>Block reference ID:</p>
    </section>
</section></div>]]></description>
        </item>
    </channel>
</rss>