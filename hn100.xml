<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sat, 07 Oct 2023 00:00:13 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[23andMe scraping incident leaked data on 1.3M users (151 pts)]]></title>
            <link>https://therecord.media/scraping-incident-genetic-testing-site</link>
            <guid>37795652</guid>
            <pubDate>Fri, 06 Oct 2023 20:08:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://therecord.media/scraping-incident-genetic-testing-site">https://therecord.media/scraping-incident-genetic-testing-site</a>, See on <a href="https://news.ycombinator.com/item?id=37795652">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Genetic testing giant 23andMe confirmed that a data scraping incident resulted in hackers gaining access to sensitive user information and selling it on the dark web.</p>
<p>The information of nearly 7 million 23andMe users was <a href="https://twitter.com/DarkWebInformer/status/1709348139793068069">offered</a> for sale on a cybercriminal forum this week. The information included origin estimation, phenotype, health information, photos, identification data and more. 23andMe processes saliva samples submitted by customers to determine their ancestry.</p>
<p>When asked about the post, the company initially denied that the information was legitimate, calling it a “misleading claim” in a statement to Recorded Future News.</p>
<p>The company later said it was aware that certain 23andMe customer profile information was compiled through unauthorized access to individual accounts that were signed up for the DNA Relative feature — which allows users to opt in for the company to show them potential matches for relatives.</p>
<p>“We do not have any indication at this time that there has been a data security incident within our systems. Rather, the preliminary results of this investigation suggest that the login credentials used in these access attempts may have been gathered by a threat actor from data leaked during incidents involving other online platforms where users have recycled login credentials,” they said.</p>
<p>“We believe that the threat actor may have then, in violation of our terms of service, accessed 23andme.com accounts without authorization and obtained information from those accounts. We are taking this issue seriously and will continue our investigation to confirm these preliminary results.”</p>
<p><img src="https://cms.therecord.media/uploads/Breach_Forums_ace4be7d97.jpg" alt="BreachForums.jpg">
<em>A screenshot from the posting of 23andMe data on the BreachForums site.</em></p>
<p>When pressed on how compromising a handful of user accounts would give someone access to millions of users, the spokesperson said the company does not believe the threat actor had access to all of the accounts but rather gained unauthorized entry to a much smaller number of 23andMe accounts and scraped data from their DNA Relative matches.</p>
<p>The spokesperson declined to confirm the specific number of customer accounts affected.</p>
<p>Anyone who has opted into DNA Relatives can view basic profile information of others who make their profiles visible to DNA Relative participants, a spokesperson said.</p>
<p>Users who are genetically related can access ancestry information, which is made clear to users when they create their DNA Relatives profile, the spokesperson added.</p>
<p>Once the company has more information from the investigation, they said, it will determine the best approach to notifying any impacted customers.</p>
<h2>‘A botch job’</h2>
<p>The incident shows how a company's customer data can be vulnerable even if intruders don't get deep into its network.</p>
<p>A researcher approached Recorded Future News after examining the leaked database and found that much of it looked real. The researcher spoke on condition of anonymity because he found the information of his wife and several of her family members in the leaked data set. He also found other acquaintances and verified that their information was accurate.</p>
<p>The researcher downloaded two files from the BreachForums post and found that one had information on 1 million 23andMe users of Ashkenazi heritage. The other file included data on more than 300,000 users of Chinese heritage.</p>
<p>The data included profile and account ID numbers, names, gender, birth year, maternal and paternal genetic markers, ancestral heritage results, and data on whether or not each user has opted into 23andme’s health data.</p>
<p>“It appears the information has been scraped from user profiles which are only supposed to be shared between DNA Matches. So although this particular leak does not contain genomic sequencing data, it’s still data that should not be available to the public,” the researcher said.</p>
<p>“23andme seems to think this isn’t a big deal. They keep telling me that if I don’t want this info to be shared, I should not opt into the DNA relatives feature. But that’s dismissing the importance of this data which should only be viewable to DNA relatives, not the public. And the fact that someone was able to scrape this data from 1.3 million users is concerning. The hacker allegedly has more data that they have not released yet.”</p>
<p>The researcher added that he discovered another issue where someone could enter a 23andme profile ID, like the ones included in the leaked data set, into their URL and see someone’s profile.</p>
<p>The data available through this only includes profile photos, names, birth years and location but does not include test results.</p>
<p>“It’s very concerning that 23andme has such a big loophole in their website design and security where they are just freely exposing peoples info just by typing a profile ID into the URL. Especially for a website that deals with people's genetic data and personal information. What a botch job by the company,” the researcher said.</p>
<p>“I’ve tried contacting 23andme however they keep denying that there is anything wrong and are replying with cookie cutter responses. I don’t know how to prove this without doxing myself. But this is pretty serious and no one is taking it seriously.”</p>
<p>The security policies of genetic testing companies like 23andMe have faced scrutiny from regulators in recent weeks. Three weeks ago, genetic testing firm 1Health.io <a href="https://therecord.media/genetic-testing-firm-fined-ftc-privacy">agreed to pay the Federal Trade Commission (FTC) a $75,000 fine</a> to resolve allegations that it failed to secure sensitive genetic and health data, retroactively overhauled its privacy policy without notifying and obtaining consent from customers whose data it had obtained, and tricked customers about their ability to delete their data.</p><div><div><p>Get more insights with the </p><p>Recorded Future</p><p>Intelligence Cloud.</p></div><p><a target="_blank" rel="noopener noreferrer" href="https://www.recordedfuture.com/platform?mtm_campaign=ad-unit-record">Learn more.</a></p></div><div><p><span>Tags</span></p><ul><li><a href="https://therecord.media/tag/genetic-testing">genetic testing</a></li><li><a href="https://therecord.media/tag/privacy">Privacy</a></li><li><a href="https://therecord.media/tag/data-breach">Data breach</a></li><li><a href="https://therecord.media/tag/dark-web">dark web</a></li><li><a href="https://therecord.media/tag/scraping">scraping</a></li></ul></div><div><p><span>No previous article</span></p><p><span>No new articles</span></p></div><div><a href="https://therecord.media/author/jonathan-greig"><h2>Jonathan Greig</h2></a><p><a href="https://therecord.media/author/jonathan-greig"><span><img sizes="100vw" srcset="https://cms.therecord.media/uploads/DSC_0283_1_a6f4e4e315.jpg?w=640 640w, https://cms.therecord.media/uploads/DSC_0283_1_a6f4e4e315.jpg?w=750 750w, https://cms.therecord.media/uploads/DSC_0283_1_a6f4e4e315.jpg?w=828 828w, https://cms.therecord.media/uploads/DSC_0283_1_a6f4e4e315.jpg?w=1080 1080w, https://cms.therecord.media/uploads/DSC_0283_1_a6f4e4e315.jpg?w=1200 1200w, https://cms.therecord.media/uploads/DSC_0283_1_a6f4e4e315.jpg?w=1920 1920w, https://cms.therecord.media/uploads/DSC_0283_1_a6f4e4e315.jpg?w=2048 2048w, https://cms.therecord.media/uploads/DSC_0283_1_a6f4e4e315.jpg?w=3840 3840w" src="https://cms.therecord.media/uploads/DSC_0283_1_a6f4e4e315.jpg?w=3840" decoding="async" data-nimg="fill"></span></a></p><p>Jonathan Greig is a Breaking News Reporter at Recorded Future News. Jonathan has worked across the globe as a journalist since 2014. Before moving back to New York City, he worked for news outlets in South Africa, Jordan and Cambodia. He previously covered cybersecurity at ZDNet and TechRepublic.</p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Chicago independently abolishes subminimum wage for tipped workers (114 pts)]]></title>
            <link>https://www.chicagotribune.com/politics/ct-chicago-council-votes-eliminate-lower-tipped-minimum-wage-20231006-xg5vpkqcxnfqhe5fqogxrpbcua-story.html</link>
            <guid>37794874</guid>
            <pubDate>Fri, 06 Oct 2023 19:08:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.chicagotribune.com/politics/ct-chicago-council-votes-eliminate-lower-tipped-minimum-wage-20231006-xg5vpkqcxnfqhe5fqogxrpbcua-story.html">https://www.chicagotribune.com/politics/ct-chicago-council-votes-eliminate-lower-tipped-minimum-wage-20231006-xg5vpkqcxnfqhe5fqogxrpbcua-story.html</a>, See on <a href="https://news.ycombinator.com/item?id=37794874">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><p>Chicago on Friday became the largest American city to independently<i> </i>require that tipped employees make a full minimum wage, following a relatively easy City Council vote that delivered one of Mayor Brandon Johnson’s biggest political wins for his progressive agenda.</p><p>In a 36-10 vote, aldermen approved the measure that advocates said was direly needed for the lowest-paid service workers and that opponents countered would backfire, causing some employees in the service industry to be paid less and lead<b> </b>to higher menu prices and staff cuts. The ordinance becomes law immediately but the full impact won’t take effect for five years.</p><p><span>[&nbsp;</span><a href="https://www.chicagotribune.com/politics/ct-tipped-worker-wage-increase-committee-vote-chicago-20230920-fc5sonq365cntibvuzwkbfeinm-story.html#nt=interstitial-manual" aria-label="Open related story">Proposal to raise Chicago’s minimum wage for tipped workers advances in City Council</a><span>&nbsp;]</span></p><p>The Friday vote was originally supposed to take place Wednesday, but a clerical error delayed the meeting. Starting next July, the gap between tipped and minimum wages will shrink from 60% to 40%. Each year after, that gap will shrink by 8% until parity is reached by July 1, 2028.</p><p>Los Angeles, which has a larger population than Chicago, already bans a subminimum wage for tipped workers but that’s under a California state law that requires employers to pay those employees the full minimum wage. Besides California, Alaska, Minnesota, Montana, Nevada, Oregon and Washington also have abolished the lower tipped wage, <a href="https://www.dol.gov/agencies/whd/state/minimum-wage/tipped">according</a> to the U.S. Department of Labor.</p><p>In a celebratory post-council news conference, Johnson said the vote made Friday an “incredible historic day.”</p><p>”The ordinance embodies Chicago’s values of uplifting working people and addressing systemic inequities in the restaurant and hospitality industry, which, in turn, will create a better economic future for tipped workers and our city,” the mayor said. “Many of the people who are standing in support with us today, these are heads of households and anchors of communities who are finally receiving a bit more of the respect and dignity that they deserve.”</p><p>Ahead of the vote, progressive aldermen stood up and shared anecdotes that fueled their decision to favor the new law on what they described as a poignant day.<b> </b>Ald. Jessie Fuentes, 26th, one of the measure’s lead sponsors, said the subminimum wage for tipped employees has long been a driver of income inequality.</p><p>She pointed to the sea of pink-clad service workers behind her who were recruited by the national One Fair Wage campaign to cheer on the ordinance.</p><p>“Today, our tipped workers will win,” Fuentes said. “Look at the room. Look at the room. Those are Black and brown faces that are asking for a raise.”</p><p>Some aldermen also lamented that the moment did not come sooner, such as when the City Council <a href="https://www.chicagotribune.com/business/ct-biz-chicago-minimum-wage-approved-20191126-esp6g6do6nhzjfl7i7yphbfmrm-story.html">raised</a> the minimum wage to $15 under former Mayor Lori Lightfoot but did not alter the pay floor for tipped workers.</p><p>Ald. Rossana Rodriguez Sanchez, 33rd, said when that vote passed four years ago a man sitting in the back of the public gallery in the council chambers yelled, “You left out tipped wage!”</p><p>“He yelled that so many times, and I felt that in my heart. I knew that that moment was an opportunity for us to do that, and we didn’t do that,” Rodriguez Sanchez said. “It took us four more years and a progressive movement to push for this and be able to pass it now. … Wherever he is, this vote is dedicated to you today.”</p><p>But Ald. Nicole Lee, 11th, said the small business owners in her ward that encompasses Chinatown — where family restaurants have served as a time-honored engine for economic mobility — implored her to oppose the measure even though they knew it likely would pass.</p><p>“My constituents there feel this is going to hurt more than it is going to help our local economy,” Lee said. “Because of that, I’m going to be a no.”</p><p>A man in the public section then cried out, “Thank you for saving my job.”</p><p>Other opponents have argued evening out the minimum wage across all industries will cause people to tip less, hurting servers’ bottom lines.</p><p>Ald. Nicholas Sposato, 38th, said instead of raising the minimum wage for tipped workers customers should be “educated” on how to tip better because, “I believe we are going to get destroyed with this.”</p><p>Ald. Daniel La Spata, 1st, who represents the neighborhoods of Wicker Park and Bucktown that are hubs for restaurants, rejected the business community’s anxieties by declaring to any servers listening in: “I don’t need to balance my bill on the backs of your poverty.”</p><p>“The sky maybe is going to fall in when we pass this ordinance, but the sky didn’t fall in when we fought for and won a $15 minimum wage,” La Spata said, before listing other pro-labor ordinances passed in Chicago. “The sky keeps on not falling. … Somehow I have a feeling that the sky is not going to fall today either.”</p><p>Johnson campaigned on the issue and this summer donned a One Fair Wage apron at a progressive conference, serving appetizers in solidarity with the conference’s catering staff.</p><p><span>[&nbsp;</span><a href="https://www.chicagotribune.com/politics/ct-tipped-minimum-wage-abolish-ordinance-deal-20230919-7g2afmgi55donobgsrzaqosoca-story.html#nt=interstitial-manual" aria-label="Open related story">Chicago could become largest US city to independently abolish tipped wage under Mayor Brandon Johnson compromise</a><span>&nbsp;]</span></p><p>The restaurant lobby, a longtime foe of the effort and similar attempts to do away with the lower tipped wage, <a href="https://www.chicagotribune.com/politics/ct-tipped-minimum-wage-abolish-ordinance-deal-20230919-7g2afmgi55donobgsrzaqosoca-story.html" target="_blank">begrudgingly accepted a deal</a> from the mayor’s administration that increased the phase-in from two years to five. That was after the head of the Illinois Restaurant Association, Sam Toia, floated a counterproposal to raise subminimum wages only at restaurants earning more than $3 million in annual revenue. That offer failed to gain traction.</p><p>“Obviously, a lot of restaurant owners, operators will tell you, the last couple of years have been really rough coming out of the pandemic, especially with double-digit inflation,” Toia said last month. “There’s only two things you can control in the restaurant industry: your product costs and your labor costs. … There could definitely be people cutting back on labor.”</p><p>However, the mayor’s floor leader, Ald. Carlos Ramirez-Rosa, 35th, has argued raising minimum pay for tipped workers is good for business.</p><p>“We have decades of research: Los Angeles, Minneapolis, cities across this nation with economies very similar to ours have already instituted One Fair Wage with tips on top,” he said during a council committee meeting<b> </b>last month. “Restaurants are opening up, restaurants are growing, restaurants are employing more workers and workers are making the same — or more — in tips.”</p><p><span>[&nbsp;</span><a href="https://www.chicagotribune.com/politics/ct-one-fair-wage-forward-city-council-1004-20231004-h2li44wyhjdixn67o27bqg5mgi-story.html#nt=interstitial-manual" aria-label="Open related story">Mayor Brandon Johnson beats back opposition, moves forward with plans to end lower minimum wage and for homeless services</a><span>&nbsp;]</span></p><p>The ordinance was originally supposed <a href="https://www.chicagotribune.com/politics/ct-one-fair-wage-forward-city-council-1004-20231004-h2li44wyhjdixn67o27bqg5mgi-story.html" target="_blank">to get a final vote on Wednesday</a>, but the city clerk’s office failed to post the item on the council’s agenda with enough advance notice, as legally mandated. A group of moderate and more conservative members tried to stall an attempt to reschedule the vote during the Wednesday council meeting but were squashed by Johnson allies.</p><p>The city’s minimum wage rate is $15.80 per hour for businesses with 21 or more workers and $15.00 per hour for those with four to 20 workers. Under the old law, tipped workers were paid 60% of the minimum wage rate and if a tipped worker’s wages with the addition of tips did<b> </b>not equal at least the full minimum wage, the employer had to make up the difference.</p><p><a href="mailto:ayin@chicagotribune.com" target="_blank"><i>ayin@chicagotribune.com</i></a></p></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[X rolls out new ad format that can't be reported, blocked (110 pts)]]></title>
            <link>https://mashable.com/article/twitter-x-new-clickbait-ad-format</link>
            <guid>37794809</guid>
            <pubDate>Fri, 06 Oct 2023 19:02:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mashable.com/article/twitter-x-new-clickbait-ad-format">https://mashable.com/article/twitter-x-new-clickbait-ad-format</a>, See on <a href="https://news.ycombinator.com/item?id=37794809">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>


<p>The new ads also don't disclose who the advertiser is or that they are even ads.</p>


</div><section data-ga-module="content_body">
<div>
<p><img src="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/hero-image.fill.size_1248x702.v1696612480.jpg" alt="X logo on mobile device" width="1248" height="702" srcset="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/hero-image.fill.size_400x225.v1696612480.jpg 400w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/hero-image.fill.size_800x450.v1696612480.jpg 800w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/hero-image.fill.size_1248x702.v1696612480.jpg 1600w" sizes="(max-width: 1280px) 100vw, 1280px"></p><p><span>Elon Musk's X is now serving users clickbait advertisements that can't be blocked or reported.</span>
<span>Credit: Thomas Trutschel/Photothek via Getty Images</span>
</p>
</div>
<article id="article" data-autopogo="">
<p><a href="https://mashable.com/article/elon-musk-removes-headlines-links-twitter-x" target="_self">X</a>, the Elon Musk-owned platform formerly known as <a href="https://mashable.com/article/twitter-x-trademark-infringement-lawsuit-x-social-media" target="_self">Twitter</a>, has begun serving its users with a weird new ad format and it's one of the company's least transparent products yet.</p><p>The rollout of these ads also provides the public with a hint regarding just how much the company is struggling to attract advertisers.</p><p>Multiple X users have reached out to Mashable over the past few days to report seeing a new type of ad in their For You feed that they had not previously come across on the platform. These new X ads don't allow users to like or retweet the ad posts. In fact, the new ad format also doesn't disclose who is behind the ad or that it is even an advertisement at all.</p><div>
<p><img src="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-1.fill.size_2000x1432.v1696612481.jpg" alt="X ad" width="2000" height="1432" loading="lazy" srcset="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-1.fill.size_800x573.v1696612481.jpg 800w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-1.fill.size_1400x1002.v1696612481.jpg 1400w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-1.fill.size_2000x1432.v1696612481.jpg 2000w" sizes="(max-width: 1408px) 100vw, 1408px">
</p>
<p><span>Here's X's new clickbait ads featuring chumbox content. Notice the lack of display name and handle.</span>
<span>Credit: X screenshot</span>
</p>
</div>
<p>Mashable has confirmed this ad format with numerous users from across X and have seen a variety of different ads running this bizarre new format that just consists of written copy text, a photo, and a fake avatar that's sole purpose is to make the ad look like an organically posted tweet.&nbsp;</p><p>The type of content being promoted in the ads that Mashable has viewed appear to be consistent with ads found in spammy, low quality "<a href="https://www.theawl.com/2015/06/a-complete-taxonomy-of-internet-chum/" target="_blank" title="(opens in a new window)"><u>chumbox</u></a>" advertising – typically defined as those clickbait ads found at the bottom of posts on content farm sites – made popular by native ad networks like <a href="https://www.wired.co.uk/article/fake-news-outbrain-taboola-hillary-clinton" target="_blank" title="(opens in a new window)"><u>Taboola</u></a>.&nbsp;</p><p>"This Seems Unbelievable, But Happens in Dubai Everyday" reads one ad that takes users to a third-party content mill website, overloaded with ads of its own. "These Incredibly Cool Gadgets That Are Going To Sell Out This Year. Action Now!" and "If you suffer from ringing ears (Tinnitus) you're going to love this recent breakthrough" are other examples of some of the content found in these X ads.</p><div>
<p><img src="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-2.fill.size_2000x1374.v1696612481.jpg" alt="X ad" width="2000" height="1374" loading="lazy" srcset="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-2.fill.size_800x550.v1696612481.jpg 800w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-2.fill.size_1400x962.v1696612481.jpg 1400w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-2.fill.size_2000x1374.v1696612481.jpg 2000w" sizes="(max-width: 1408px) 100vw, 1408px">
</p>
<p><span>Here's another example of X's shady chumbox-esque advertising.</span>
<span>Credit: X screenshot</span>
</p>
</div>
<p>Users who have seen these X ads report being taken to a third-party website in a new window upon clicking anywhere within the ad, including when they try to click on the fake avatar. There is no X post to open nor is there a user profile attached to the ad to visit. So far, Mashable has seen these ads served to users within X's mobile apps. Its unclear if the ads are also running on the web version of the platform.&nbsp;</p><p>Mashable was able to find advertisements similar to the aforementioned X ads using the same exact text copy running through ad networks on Yahoo and Taboola competitors like RevContent. Mashable could not locate this X ad format in the platform's ad campaign manager so it appears these ads are actually being served by a third-party ad provider.&nbsp;</p><p>The presence of these ads is actually quite telling about the state of advertising on Musk's social media platform.</p><blockquote>
<a href="https://twitter.com/aMarkzzz/status/1708964978315718735" target="_blank" rel="noopener" title="(opens in a new window)">
Tweet may have been deleted
</a>
</blockquote>
<h2>X turns to the chumbox amid direct ad sale decline</h2><p>Since Musk's acquisition of the company, X has <a href="https://mashable.com/article/twitter-advertisers-leaving-app-elon-musk" target="_self"><u>struggled</u></a> to <a href="https://mashable.com/article/x-twitter-brands-suspend-ads-showing-beside-nazi-content" target="_self"><u>attract</u></a> advertisers to the <a href="https://www.nytimes.com/2023/06/05/technology/twitter-ad-sales-musk.html" target="_blank" title="(opens in a new window)"><u>platform</u></a>. Half of the platform's biggest advertisers stopped running ads shortly after Musk's takeover. Furthermore, according to a <a href="https://www.mediamatters.org/twitter/linda-yaccarino-again-claims-advertisers-are-returning-x-here-are-facts" target="_blank" title="(opens in a new window)"><u>new report</u></a> from Media Matters For America, the advertisers who have returned are spending up to 90 percent less on advertising on X than they did prior to Musk acquiring the company. Another <a href="https://www.reuters.com/technology/us-ad-revenue-musks-x-declined-each-month-since-takeover-data-2023-10-04/" target="_blank" title="(opens in a new window)"><u>recent report</u></a> from Reuters found that Musk's X has faced declining revenue each and every month since he became the owner of the company.</p><p>In order to help with declining ad revenue, X has turned to partnering with third-parties within the adtech industry to sell available advertising inventory. Just last month, Google <a href="https://adage.com/article/digital-marketing-ad-tech-news/x-turns-google-programmatic-ads-timeline/2515981" target="_blank" title="(opens in a new window)"><u>announced</u></a> it would be partnering with X to sell programmatic advertising. Earlier this year, X also partnered with InMobi, a mobile-focused programmatic ad sales company.</p><div>
<p><img src="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-4.fill.size_553x750.v1696612481.png" alt="X ad in feed" width="553" height="750" loading="lazy" srcset="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-4.fill.size_800x1085.v1696612481.png 800w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-4.fill.size_1400x1899.v1696612481.png 1400w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-4.fill.size_2000x2713.v1696612481.png 2000w" sizes="(max-width: 1408px) 100vw, 1408px">
</p>
<p><span>This is how the new X ads look among real, organic posts in the For You feed.</span>
<span>Credit: X screenshot</span>
</p>
</div>
<p>So, what does that mean? Users are likely seeing these ads because X no longer has any direct ad inventory to serve them. This could mean that these particular users seeing these ads are not being targeted by any brands that are running ads at the moment. Or brands that are advertising on X and targeting these users have exhausted their ad spend for the moment. It's also possible that these users have blocked brand accounts that would've targeted them with ads otherwise.&nbsp;</p><p>Whatever the reason these users aren't being served ads directly from the platform, the point is that they aren't seeing them. And that means that X hasn't been able to sell enough ad space directly to brands and need to instead serve advertisements from ad networks. In turn, X makes less money as direct ad sales typically generate much more revenue for a company.</p><h2>These new clickbait X ads</h2><p>Typically, how it worked on Twitter and then on X until now, ads on the platform were just normal posts that an advertiser paid to show users in their feeds, replies, or profiles.&nbsp;</p><p>However, this new ad format completely breaks that as these ads are technically not posts, even if they somewhat look the part. All the engagement buttons on these new X ads are completely grayed out. For example, users are unable to click like, retweet, or reply. These ads cannot be clicked to open in full tweet view like every other X ad format.&nbsp;</p>
<blockquote>
<a href="https://twitter.com/lynxnoirs/status/1707947210732650682" target="_blank" rel="noopener" title="(opens in a new window)">
Tweet may have been deleted
</a>
</blockquote>
<blockquote>
<a href="https://twitter.com/flipnotemachine/status/1706550158043869572" target="_blank" rel="noopener" title="(opens in a new window)">
Tweet may have been deleted
</a>
</blockquote>
<p>This new X ad format completely lacks the three dotted icon button usually present in the upper right hand side of X posts and ads. On a normal post, that button provides users with a slew of options to report a post and mute or block an account. Without it, there are no ways for a user to report or block these types of ads that are being served to them.&nbsp;</p><p>In addition, users cannot add Community Notes to these ads either. Over the past few months, users have been utilizing Community Notes, the popular feature on the platform that allows users to add context to disinformation and other factually incorrect posts, to <a href="https://www.vice.com/en/article/7kxepa/twitter-users-are-warning-each-other-about-its-junk-ads-with-community-notes" target="_blank" title="(opens in a new window)">warn</a> others of scam ads on X.</p><p>Perhaps the biggest deviation from the regular ads on X is that these new ads have no X account attached to them at all. At least, not one that's visible to the user. There is no username or handle present on these ads. While an avatar is displayed in order to make the ad blend in with other posts on a user's feed, the image isn't a profile picture. The avatar appears to just be a cropped version of the photo included within the ad itself.&nbsp;</p><p>Without a display name or handle, it's also unclear to the user exactly who is behind the ad. The new ad format also doesn't disclose that it is an advertisement at all. There is no "promoted" or "ad" label on any of these types of ads that Mashable has seen.&nbsp;And, unlike most other websites that run chumbox clickbait advertising, X doesn't even disclose the ad network associated with these ads.</p><div>
<p><img src="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-3.fill.size_644x750.v1696612481.png" alt="X ad in feed" width="644" height="750" loading="lazy" srcset="https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-3.fill.size_800x932.v1696612481.png 800w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-3.fill.size_1400x1632.v1696612481.png 1400w, https://helios-i.mashable.com/imagery/articles/07dSJUT5Ii2rhdYhDH6UoKO/images-3.fill.size_2000x2331.v1696612481.png 2000w" sizes="(max-width: 1408px) 100vw, 1408px">
</p>
<p><span>Another example of how these new X ads look like next to real posts in the feed.</span>
<span>Credit: X screenshot</span>
</p>
</div>
<p>Mashable <a href="https://mashable.com/article/twitter-x-removes-ad-labels-for-some-users" target="_self"><u>previously reported</u></a> earlier this month how these important advertisement disclosure labels were also missing from the traditional X ad formats for some users. However, even in those cases, a user could click the options button to report the post and the platform would inform the user it was an advertisement by providing the option to tell X it was "not interested" in the ad. There is no such option on this new ad format as the three dotted button is missing from these ads. One other way to tell an X ad from a regular post is that ads don't include a timestamp on the posts. The new ad format also excludes a timestamp.</p><p>As previously mentioned, Mashable confirmed this ad format with numerous users from across X and have seen a variety of different ads running this new format. Mashable has also found <a href="https://twitter.com/aMarkzzz/status/1708964978315718735" target="_blank" title="(opens in a new window)">other users</a> who have <a href="https://twitter.com/lynxnoirs/status/1707947210732650682" target="_blank" title="(opens in a new window)">shared</a> via their <a href="https://twitter.com/flipnotemachine/status/1706550158043869572" target="_blank" title="(opens in a new window)">own</a> social media accounts that they have <a href="https://twitter.com/nonfatdairy/status/1706631902365446549" target="_blank" title="(opens in a new window)">also seen </a>these ads in <a href="https://twitter.com/cgsakurapink/status/1706751390008459548" target="_blank" title="(opens in a new window)">their feed</a>. It's unclear if X is just testing this format at this time.</p><p>The new ad format arrives to X around the same time the company made another decision that makes the platform less transparent. Earlier this week, under a directive from Musk himself, <a href="https://mashable.com/article/elon-musk-removes-headlines-links-twitter-x" target="_self"><u>X removed headlines</u></a> and other context from links shared to the platform. Instead of seeing the title of an article or other link posted to X, users now simply see an embed of the header image with the corresponding domain name displayed like a watermark-like overlay in the corner of the photo. Musk said he made the change to how links were displayed because he didn't like the way it previously looked. </p>

</article>
</section><div x-data="window.newsletter()" x-init="init()" data-ga-impression="" data-ga-category="newsletters" data-ga-module="footer_nl_signup" data-ga-label="Top Stories">

<p>
This newsletter may contain advertising, deals, or affiliate links. Subscribing to a newsletter indicates your consent to our <a href="https://www.ziffdavis.com/terms-of-use" target="_blank" rel="noopener" title="(opens in a new window)">Terms of Use</a> and <a href="https://www.ziffdavis.com/ztg-privacy-policy" target="_blank" rel="noopener" title="(opens in a new window)">Privacy Policy</a>. You may unsubscribe from the newsletters at any time.
</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Genetics firm 23andMe says user data stolen in credential stuffing attack (136 pts)]]></title>
            <link>https://www.bleepingcomputer.com/news/security/genetics-firm-23andme-says-user-data-stolen-in-credential-stuffing-attack/</link>
            <guid>37794379</guid>
            <pubDate>Fri, 06 Oct 2023 18:29:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bleepingcomputer.com/news/security/genetics-firm-23andme-says-user-data-stolen-in-credential-stuffing-attack/">https://www.bleepingcomputer.com/news/security/genetics-firm-23andme-says-user-data-stolen-in-credential-stuffing-attack/</a>, See on <a href="https://news.ycombinator.com/item?id=37794379">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><img alt="DNA" height="900" src="https://www.bleepstatic.com/content/hl-images/2021/11/30/dna.jpg" width="1600"></p>
<p>23andMe has confirmed to BleepingComputer that it is aware of user data from its platform circulating&nbsp;on hacker forums and attributes the leak to a credential-stuffing attack.</p>
<p>23andMe is a U.S. biotechnology and genomics firm offering genetic testing services to customers who send a saliva sample to its labs and get back an ancestry and genetic predispositions report.</p>
<p>Recently, a threat actor leaked samples of data&nbsp;that was allegedly stolen from a genetics firm and, a few days later, offered to sell data packs belonging to 23andMe customers.</p>
<div>
<figure><img alt="Initial leak of genetic data" height="600" src="https://www.bleepstatic.com/images/news/u/1220909/2023/Databases/11/leak.png" width="836"><figcaption><strong>Initial leak of genetic data</strong><br><em>Source: BleepingComputer</em></figcaption></figure></div>
<p>The initial data leak was limited, with the threat actor releasing 1 million lines of data for Ashkenazi people. However, on October 4, the threat actor offered to sell data profiles in bulk for $1-$10 per 23andMe account, depending on how many were purchased.</p>
<div>
<figure><img alt="Selling stolen genetic data profiles in bulk" height="477" src="https://www.bleepstatic.com/images/news/u/1220909/2023/Databases/11/sale.png" width="1023"><figcaption><strong>Selling stolen genetic data profiles in bulk</strong><br><em>Source:&nbsp;BleepingComputer</em></figcaption></figure></div>
<p>A 23andMe spokesperson confirmed the data is legitimate&nbsp;and told BleepingComputer that the threat actors used exposed credentials from other breaches to access 23andMe accounts and steal the sensitive data.</p>
<p>"We were made aware that certain 23andMe customer profile information was compiled through access to individual 23andMe.com accounts," stated 23andMe's spokesperson</p>
<p>"We do not have any indication at this time that there has been a data security incident within our systems."</p>
<p>"Rather, the preliminary results of this investigation suggest that the login credentials used in these access attempts may have been gathered by a threat actor from data leaked during incidents involving other online platforms where users have recycled login credentials."</p>
<p>The information that has been exposed from this incident includes full names, usernames, profile photos, sex, date of birth, genetic ancestry results, and geographical location.</p>
<p>BleepingComputer has also learned that the number of accounts sold by the cybercriminal does not reflect the number of 23andMe accounts breached using exposed credentials.</p>
<p>The compromised accounts had opted into the platform's 'DNA Relatives' feature, which allows users to find genetic relatives and connect with them.</p>
<p>The threat actor accessed a small number of 23andMe accounts and then scraped the data of their DNA Relative matches, which shows how opting into a feature can have unexpected privacy consequences.</p>
<p>23andMe told BleepingComputer that the platform offers two-factor authentication as an additional account protection measure and <a href="https://customercare.23andme.com/hc/en-us/articles/360034119874-Adding-2-Step-Verification-to-Your-23andMe-Account" target="_blank" rel="nofollow noopener">encourages</a> all users to enable it.</p>
<p>Users should refrain from reusing passwords and consistently employ strong, distinct credentials for every online account they have.</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The ozone hole above Antarctica has grown to three times the size of Brazil (108 pts)]]></title>
            <link>https://www.space.com/ozone-hole-antarctica-three-times-size-of-brazil</link>
            <guid>37793941</guid>
            <pubDate>Fri, 06 Oct 2023 18:00:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.space.com/ozone-hole-antarctica-three-times-size-of-brazil">https://www.space.com/ozone-hole-antarctica-three-times-size-of-brazil</a>, See on <a href="https://news.ycombinator.com/item?id=37793941">Hacker News</a></p>
<div id="readability-page-1" class="page"><article aria-label="article" data-id="MwoBrj6xSd3LoxbyTS4zzW">
<header>
<nav aria-label="Breadcrumbs">
<ol>
<li>
<a href="https://www.space.com/news" aria-label="Return to News">News</a>
</li>
<li>
<a href="https://www.space.com/science-astronomy" aria-label="Return to Science &amp; Astronomy">Science &amp; Astronomy</a>
</li>
</ol>
</nav>


</header>
<section>
<div itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject">
<div>
<picture><source type="image/webp" alt="A map of the ozone hole on Sept. 16, 2023." onerror="if(this.src &amp;&amp; this.src.indexOf('missing-image.svg') !== -1){return true;};this.parentNode.replaceChild(window.missingImage(),this)" srcset="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-320-80.jpg.webp 320w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-480-80.jpg.webp 480w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-650-80.jpg.webp 650w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-970-80.jpg.webp 970w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-1024-80.jpg.webp 1024w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-1200-80.jpg.webp 1200w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-1920-80.jpg.webp 1920w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)" data-original-mos="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE.jpg" data-pin-media="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE.jpg"><source type="image/jpeg" alt="A map of the ozone hole on Sept. 16, 2023." onerror="if(this.src &amp;&amp; this.src.indexOf('missing-image.svg') !== -1){return true;};this.parentNode.replaceChild(window.missingImage(),this)" srcset="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-320-80.jpg 320w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-480-80.jpg 480w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-650-80.jpg 650w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-970-80.jpg 970w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-1024-80.jpg 1024w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-1200-80.jpg 1200w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-1920-80.jpg 1920w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)" data-original-mos="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE.jpg" data-pin-media="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE.jpg"><img src="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-320-80.jpg" alt="A map of the ozone hole on Sept. 16, 2023." onerror="if(this.src &amp;&amp; this.src.indexOf('missing-image.svg') !== -1){return true;};this.parentNode.replaceChild(window.missingImage(),this)" srcset="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-320-80.jpg 320w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-480-80.jpg 480w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-650-80.jpg 650w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-970-80.jpg 970w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-1024-80.jpg 1024w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-1200-80.jpg 1200w, https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE-1920-80.jpg 1920w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)" data-original-mos="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE.jpg" data-pin-media="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE.jpg"></picture>
</div>
<meta itemprop="url" content="https://cdn.mos.cms.futurecdn.net/FHSnfv6hdmdcFgnBrwuzHE.jpg">
<meta itemprop="height" content="600">
<meta itemprop="width" content="338">
<figcaption itemprop="caption description">
<span>A map of the ozone hole on Sept. 16, 2023.</span>
<span itemprop="copyrightHolder">(Image credit: NASA Ozone Watch)</span>
</figcaption>
</div>

<div id="article-body">
<p>Just as the <a href="https://www.space.com/sea-ice-antarctica-hits-record-low-2023-satellite-data"><u>sea ice around Antarctica</u></a> grows and retreats each year, so does the ozone hole above the continent. And this year, that hole has grown a lot.&nbsp;</p><p>Observations from the European Space Agency's (ESA) <a href="https://www.space.com/copernicus-program"><u>Copernicus Sentinel-5P satellite </u></a>indicate the ozone hole reached approximately 10 million square miles (26 million square kilometers) in area on Sept. 16, 2023 —&nbsp;making it one of the largest seasonal holes ever observed. The true largest ozone hole maximum occurred in 2000, when the chasm reached nearly 11 million square miles (28.4 million square kilometers) in area.</p><p>Ozone is a naturally occurring gas, and there's a layer of it in the stratosphere that protects us from the <a href="https://www.space.com/58-the-sun-formation-facts-and-characteristics.html"><u>sun's</u></a> ultraviolet, or UV, rays. In 1985, a hole in the ozone layer was discovered above Antarctica&nbsp;— and later connected to human use of carbon-depleting substances. Since then, we've banned the use of those substances and have been monitoring the hole's size.</p><p><strong>Related: </strong><a href="https://www.space.com/antarctic-ozone-hole-early-hunga-tonga">The ozone hole above Antarctica opened early this year. Huge Tonga undersea volcano eruption may be to blame</a></p><p>The ozone hole still grows and shrinks seasonally, however, due to temperature changes and wind conditions in the stratosphere, reaching a maximum between mid-September and mid-October. "Our operational ozone monitoring and forecasting service shows that the 2023 ozone hole got off to an early start and has grown rapidly since mid-August," Antje Inness, Copernicus Atmosphere Monitoring Service senior scientist, said in a <a href="https://www.esa.int/Applications/Observing_the_Earth/Copernicus/Sentinel-5P/Ozone_hole_goes_large_again" target="_blank" data-url="https://www.esa.int/Applications/Observing_the_Earth/Copernicus/Sentinel-5P/Ozone_hole_goes_large_again"><u>statement</u></a>.&nbsp;</p><p>One possible reason for the higher-than-normal growth is the <a href="https://www.space.com/hunga-tonga-will-make-ozone-hole-larger"><u>Hunga Tonga volcanic eruption</u></a> in January 2022, which introduced massive quantities of water vapor into the air. “The water vapor could have led to the heightened formation of polar stratospheric clouds, where chlorofluorocarbons (CFCs) can react and accelerate ozone depletion," said Inness.</p><p>Yet despite experiencing large seasonal growth this year, the ozone hole is still decreasing in size overall. "Based on the Montreal Protocol and the decrease of anthropogenic ozone-depleting substances, scientists currently predict that the global ozone layer will reach its normal state again by around 2050," said Claus Zehner, ESA's mission manager for Copernicus Sentinel-5P.</p>
</div>
<p><em><a href="https://forums.space.com/">Join our Space Forums</a> to keep talking space on the latest missions, night sky and more! And if you have a news tip, correction or comment, let us know at: <a href="mailto:community@space.com">community@space.com.</a></em></p>
<div data-hydrate="true" id="slice-container-newsletterForm-articleInbodyContent"><section><p>Breaking space news, the latest updates on rocket launches, skywatching events and more!</p></section></div>
<div id="slice-container-authorBio"><p>Space.com contributing writer Stefanie Waldek is a self-taught space nerd and aviation geek who is passionate about all things spaceflight and astronomy. With a background in travel and design journalism, as well as a Bachelor of Arts degree from New York University, she specializes in the budding space tourism industry and Earth-based astrotourism. In her free time, you can find her watching rocket launches or looking up at the stars, wondering what is out there. Learn more about her work at <a href="https://mailtrack.io/trace/link/841a96809cf8444a85db7a2b318410433580a8f6?url=https%3A%2F%2Fwww.stefaniewaldek.com&amp;userId=2756587&amp;signature=ba54abdc159873b3" target="_blank">www.stefaniewaldek.com</a>.</p></div>


</section>




<div id="slice-container-relatedArticles"><p><h5>Most Popular</h5></p></div>

</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[AMD may get across the CUDA moat (251 pts)]]></title>
            <link>https://www.hpcwire.com/2023/10/05/how-amd-may-get-across-the-cuda-moat/</link>
            <guid>37793635</guid>
            <pubDate>Fri, 06 Oct 2023 17:35:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.hpcwire.com/2023/10/05/how-amd-may-get-across-the-cuda-moat/">https://www.hpcwire.com/2023/10/05/how-amd-may-get-across-the-cuda-moat/</a>, See on <a href="https://news.ycombinator.com/item?id=37793635">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		<p><span data-preserver-spaces="true">When discussing GenAI, the term “GPU” almost always enters the conversation and the topic often moves toward performance and <a href="https://www.hpcwire.com/2023/07/13/the-great-gpu-squeeze-is-upon-us/">access</a>. Interestingly, the word “GPU” is assumed to mean “Nvidia” products. (As an aside, the popular Nvidia hardware used in GenAI are not technically Graphical Processing Units. I prefer SIMD units.)</span></p>
<p><span data-preserver-spaces="true">The association of GenAI and GPUs with Nvidia is no accident. Nvidia has always recognized the need for tools and applications to help grow its market. They have created a very low barrier to getting software tools (e.g., CUDA) and optimized libraries (e.g., cuDNN) for Nvidia hardware. Indeed, Nvidia is known as a hardware company, but as Bryan Catanzaro, VP of Applied Deep Learning Research, Nvidia has<a href="https://www.deeplearning.ai/blog/working-ai-at-the-office-with-vp-of-applied-deep-learning-research-bryan-catanzaro"> stated</a> ” Many people don’t know this, but Nvidia has more software engineers than hardware engineers.”</span></p>
<p><span data-preserver-spaces="true">As a result, Nvidia has built a powerful software “moat” around their hardware. While CUDA is not open source, it is freely available and under the firm control of Nvidia. While this situation has benefited Nvidia (As it should. They invested time and money into CUDA), it has created difficulties for those companies and users that want to grab some of the HPC and GenAI market with alternate hardware.</span></p>
<h3><span data-preserver-spaces="true">Building on the Castle Foundation</span></h3>
<p><span data-preserver-spaces="true">The number of foundational models developed for GenAI continues to grow. Many of these are “open source” because they can be used and shared freely. (For example, the <a href="https://ai.meta.com/llama">Llama foundational model</a> from Meta) In addition, they require a large number of resources (both people and machines) to create and are limited mainly to the hyperscalers (AWS, Microsoft Azure, Google Cloud, Meta Platforms, and Apple) that have huge amounts of GPUs available, In addition to the hyperscalers, other companies have invested in hardware (i.e. purchased a massive amount of GPUs) to create their own foundational models.</span></p>
<p><span data-preserver-spaces="true">From a research perspective, the models are interesting and can be used for a variety of tasks; however, the expected use and need for even more GenAI computing resources is two fold;</span></p>
<ol>
<li><span data-preserver-spaces="true">Fine-tuning — Adding domain-specific data to foundational models to make it work for your use case.</span></li>
<li><span data-preserver-spaces="true">Inference – Once the model is fine-tuned, it will require resources when used (i.e., asked questions).</span></li>
</ol>
<p><span data-preserver-spaces="true">These tasks are not restricted to hyperscalers and will need accelerated computing, that is, GPUs. The obvious solution is to buy more “unavailable” Nvidia GPUs, and AMD is ready and waiting now that the demand has far outstripped the supply. To be fair, Intel and some other companies are also ready and waiting to sell into this market. The point is that GenAI will continue to squeeze GPU availability as fine-tuning and inference become more pervasive, and any GPU (or accelerator) is better than no GPU.</span></p>
<p><span data-preserver-spaces="true">Moving away from Nvidia hardware suggests that other vendor GPUs and accelerators must support CUDA to run many of the models and tools. AMD has made this possible with <a href="https://www.amd.com/system/files/documents/porting-cuda-to-hip.pdf">HIP CUDA conversion tool</a>; however, the best results often seem to use the native tools surrounding the Nvidia castle.</span></p>
<h3><span data-preserver-spaces="true">The PyTorch Drawbridge</span></h3>
<p><span data-preserver-spaces="true">In the HPC sector, CUDA-enabled applications rule the GPU-accelerated world. Porting codes can often realize a speed-up of 5-6x when using a GPU and CUDA. (Note: Not all codes can achieve this speed up, and some may not be able to use the GPU hardware.) However, in GenAI, the story is quite different.</span></p>
<p><span data-preserver-spaces="true">Initially, TensorFlow was the tool of choice for creating AI applications using GPUs. It works both with CPUs and was accelerated with CUDA for GPUs. This situation is changing rapidly.</span></p>
<p><span data-preserver-spaces="true">An alternative to TensorFlow is PyTorch, an open-source machine learning library for developing and training neural network-based deep learning models. Facebook’s AI research group primarily develops it.</span></p>
<p><span data-preserver-spaces="true">In a recent <a href="https://www.assemblyai.com/blog/pytorch-vs-tensorflow-in-2023/">blog post</a> by Ryan O’Connor, a Developer Educator at <a href="https://www.assemblyai.com/">AssemblyAI</a> notes that the popular site </span><a href="https://huggingface.co/?ref=assemblyai.com" target="_blank" rel="noopener"><span data-preserver-spaces="true">HuggingFace</span></a><span data-preserver-spaces="true">, (that allows users to download and incorporate trained and tuned state of the art models into application pipelines with just a few lines of code), 92% of models available are PyTorch exclusive.</span></p>
<p><span data-preserver-spaces="true">In addition, as shown in Figure One, a comparison of Machine Learning papers shows a significant trend toward PyTorch and away from TensorFlow.</span></p>
<figure id="attachment_165049" aria-describedby="caption-attachment-165049"><img decoding="async" loading="lazy" src="https://www.hpcwire.com/wp-content/uploads/2023/10/PyTorch-TF-trends-300x178.png" alt="" width="556" height="330" srcset="https://www.hpcwire.com/wp-content/uploads/2023/10/PyTorch-TF-trends-300x178.png 300w, https://www.hpcwire.com/wp-content/uploads/2023/10/PyTorch-TF-trends-150x89.png 150w, https://www.hpcwire.com/wp-content/uploads/2023/10/PyTorch-TF-trends-600x355.png 600w, https://www.hpcwire.com/wp-content/uploads/2023/10/PyTorch-TF-trends.png 709w" sizes="(max-width: 556px) 100vw, 556px"><figcaption id="caption-attachment-165049">Figure One: Percentage of papers that utilize PyTorch, TensorFlow, or another framework over time, with data aggregated quarterly, from late 2017, Source: assemblyai.com.</figcaption></figure>
<p><span data-preserver-spaces="true">Of course, underneath PyTorch are calls to CUDA, but that is not required because PyTorch insulates the user from the underlying GPU architecture. There is also a version of <a href="https://rocm.docs.amd.com/en/latest/how_to/pytorch_install/pytorch_install.html">PyTorch</a> that uses AMD <a href="https://en.wikipedia.org/wiki/ROCm">ROCm</a>, an open-source software stack for AMD GPU programming. Crossing the CUDA moat for AMD GPUs may be as easy as using PyTorch.<br>
</span></p>
<h3><span data-preserver-spaces="true">Instinct for Inference</span></h3>
<p><span data-preserver-spaces="true">In both HPC and GenAI, the Nvidia 72-core ARM-based <a href="https://www.hpcwire.com/2023/09/28/nvidia-delivering-new-options-for-mlperf-and-hpc-performance/">Grace-Hopper superchip</a> with a shared memory H100 GPU (and also the 144-core Grace-Grace version) is highly anticipated. All Nvidia released benchmarks thus far indicate much better performance than the traditional server where the GPU is attached and accessed over the PCIe bus. Grace-Hopper represents an optimized hardware for both HPC and GenAI. It also is expected to find wide use in both fine-tuning and inference. Demand is expected to be high.</span></p>
<p><span data-preserver-spaces="true">AMD has had shared memory CPU-GPU designs since 2006 (AMD acquired graphics card company ATI in 2006). Beginning as the “Fusion” brand many AMD x86_64 processors are now implemented as a combined CPU/GPU called an Accelerated Processing Unit (<a href="https://en.wikipedia.org/wiki/AMD_APU">APU</a>).</span></p>
<p><span data-preserver-spaces="true">The upcoming Instinct MI300A processor (APU) from AMD will offer competition for Grace-Hopper superchip. It will also power the forthcoming <a href="https://www.hpcwire.com/2022/06/21/amds-mi300-apus-to-power-exascale-el-capitan-supercomputer/">El Capitan at Lawrence Livermore National Laboratory</a>. The Integrated MI300A will provide up to 24 Zen4 cores in combination with a CDNA 3 GPU Architecture </span><span data-preserver-spaces="true">and up to 192 GB of HBM3 memory, providing uniform access memory for all the CPU and GPU cores. The chip-wide cache-coherent memory reduces data movement between the CPU and GPU, eliminating the PCIe bus bottleneck and improving performance and power efficiency.</span></p>
<p><span data-preserver-spaces="true">AMD is readying the Instinct MI300A for the upcoming inference market. As stated by AMD CEO Lisa Su in a <a href="https://finance.yahoo.com/news/amd-lisa-su-ready-crash-150000172.html">recent article on Yahoo!Finance</a>. “We actually think we will be the industry leader for inference solutions because of some of the choices that we’ve made in our architecture.”</span></p>
<p><span data-preserver-spaces="true">For AMD and many other hardware vendors, PyTorch has dropped the drawbridge on the CUDA moat around the foundational models. AMD has the Instinct MI3000A battle wagon ready to go. The hardware battles for the GenAI market will be won by performance, portability, and availability. The AI day is young.</span></p>
							<div>
						<p><span>Sectors:</span>
						<a href="https://www.hpcwire.com/sector/academia-research/" rel="tag">Academia &amp; Research</a>, <a href="https://www.hpcwire.com/sector/community/" rel="tag">Community</a>, <a href="https://www.hpcwire.com/sector/entertainment/" rel="tag">Entertainment</a>, <a href="https://www.hpcwire.com/sector/financial-services/" rel="tag">Financial Services</a>, <a href="https://www.hpcwire.com/sector/government/" rel="tag">Government</a>, <a href="https://www.hpcwire.com/sector/life-sciences/" rel="tag">Life Sciences</a>, <a href="https://www.hpcwire.com/sector/manufacturing/" rel="tag">Manufacturing</a>, <a href="https://www.hpcwire.com/sector/oil-gas/" rel="tag">Oil &amp; Gas</a>, <a href="https://www.hpcwire.com/sector/retail/" rel="tag">Retail</a>, <a href="https://www.hpcwire.com/sector/semiconductor/" rel="tag">semiconductor</a>, <a href="https://www.hpcwire.com/sector/space-physics/" rel="tag">Space &amp; Physics</a>, <a href="https://www.hpcwire.com/sector/weather-climate/" rel="tag">Weather &amp; Climate</a>					</p></div><!-- .entry-utility -->
			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Exploratory data analysis for humanities data (102 pts)]]></title>
            <link>https://awk.dev/eda.html</link>
            <guid>37792916</guid>
            <pubDate>Fri, 06 Oct 2023 16:31:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://awk.dev/eda.html">https://awk.dev/eda.html</a>, See on <a href="https://news.ycombinator.com/item?id=37792916">Hacker News</a></p>
<div id="readability-page-1" class="page">

<h2>Exploratory Data Analysis for Humanities Data</h2>

<h5>by Brian Kernighan</h5>

<p> <span size="-1"> Updated
Sun Sep 10 13:58:41 EDT 2023
 </span>

</p><h4>Introduction</h4>

In the spring of 2023, I co-taught a course called
 <a href="https://humstudies.princeton.edu/courses/literature-as-data/">
 <i>Literature as Data</i></a> with my friend and colleague
 <a href="https://english.princeton.edu/people/meredith-martin">Meredith Martin</a>,
professor of English at Princeton, and director of the
 <a href="https://cdh.princeton.edu/">Center for Digital Humanities</a>.

<p> The course was very much an experiment, an attempt to combine
literary study with computing.  The 17 surviving students were largely sophomores.
About two thirds of them were hard-core humanities majors; the rest were
potential or actual CS majors or other STEM concentrators.  The class
met once a week for three hours, 12 weeks in all.

</p><p> One of the goals of the course was to try to teach enough computing 
to a mostly non-technical and definitely not computer-experienced
population that they could use computers to do an interesting and new
(to them) exploration of some dataset that they found intriguing.

</p><p> After much discussion, Meredith and I decided that for the
programming aspects, we would devote half of each class meeting to a
"studio" where I would lead the students through hands-on computing
exercises on some small dataset, followed by having the students do
similar exercises on larger datasets outside the class.

</p><p> We planned to spend one week on Unix file system and command-line
basics, a week on grep and similar tools (including a real text editor),
a week on Awk, and a couple of weeks on Python.  Not surprisingly,
everything took longer than expected, and a fair number of students
struggled mightily in spite of help from their peers, Meredith and
myself, and two exceptional colleagues from the CDH, Sierra Eckert and Ryan Heuser.

</p><p> More about the course can be found elsewhere (at least when we get
around to writing it).  The course had a web site at
 <a href="http://www.hum307.com/">hum307.com</a>, though after a
while we stopped using that in favor of Google Docs -- information
was spread out over too many sites, and in addition we had to limit
access since some of our datasets were not public.

</p><h4> Awk vs Pandas </h4>

Arguably, most humanities computing uses Python and
the Pandas library to analyze structured data that often began life
as a CSV file.  If you're looking for a single language solution,
this is an excellent way to go.  But in my experience, admittedly
biased, Unix command-line tools and Awk can be especially
useful in the initial stages of exploring a new dataset.  They are
better at counting things, looking for anomalies and outliers,
and coping with data that isn't quite in the right format.
And, again a biased view, looping over a set of input lines seems
more natural than the dataframe selectors that Pandas favors.

<h4> Awk for EDA </h4>

<p> The purpose of this essay is to talk about how we used Awk in a
different EDA setting from the examples in the book.  In keeping with
the "literature" theme of the course, in the first few weeks we asked
students to look at poetry, specifically the <i>Sonnets from the
Portuguese</i> by Elizabeth Barrett Browning, and Shakespeare's sonnets.
We used grep and wc to count things like the number of times specific
words appeared, and also to observe something unexpected: even though
sonnets always have 14 lines, Shakespeare's Sonnet 126 has only 12
lines, and Sonnet 99 has 15 lines.  This was a good lesson about
literature but also about how real data does not always behave as
expected.

</p><p> This essay parallels the EDA discussion in Chapter 3 of the new Awk
book, but using different data, a metadata file about 18-th century
sonnets originally curated by Professor
 <a href="https://english.stanford.edu/people/mark-algee-hewitt"> Mark Algee-Hewitt</a>
of the Stanford Literary Lab.  We are very grateful to Mark for
kindly allowing us to use this metadata for the class and for this
page.

</p><p>
 <a href="https://www.hum307.com/studio3.html">What we did in class</a>
and the outside class exercises
can be found at <tt>hum307.com</tt>.


</p><p> The metadata file is <a href="https://awk.dev/18.csv">18.csv</a>.  The name is
not strictly accurate: we converted the original CSV into a file
with fields separated by slashes so that it would work with any version
of Awk.  We also removed some attributes from Mark's original dataset,
leaving us with 7 columns.

</p><pre>$ wc 18.csv
     508    3499   36876 18.csv
$ sed 1q 18.csv
author_dob/author_dod/author_fname/author_lname/num_lines/title_main/title_sub
$
</pre>

<p> Using the head-tail code of Section 2.2 of the book, we can look at the start
and end of the contents:

</p><pre>$ headtail 18.csv
author_dob/author_dod/author_fname/author_lname/num_lines/title_main/title_sub
1771/1798/E. H. (Elihu Hubbard)/Smith/8/SONNET I./Sent to Miss  , with a Braid of Hair.
1771/1798/E. H. (Elihu Hubbard)/Smith/8/SONNET II./Sent to Mrs.  , with a Song.
...
1740/1809/Hugh/Downman/14/SONNET II./[Though here almost eternal Winter reigns]
1740/1809/Hugh/Downman/14/SONNET III./[When Recollection stirs up in the mind]
1740/1809/Hugh/Downman/14/SONNET IV./[Now is the feudal vassalage destroy'd]
$
</pre>

Notice that the first sonnets only have 8 lines, echoing the observation above.


<h4> Validation </h4>

The first step is data validation: does the data satisfy basic
criteria like the right number of fields in each record.
In a separate command, we can look at the distribution of
number of lines in each sonnet:

<pre>$ awk -F/ '{print NF}' 18.csv | sort -u
7
$ awk -F/ '{print $5}' 18.csv | sort | uniq -c | sort -nr
 483 14
  11 8
   3 15
   2 12
   1 num_lines
   1 68
   1 66
   1 55
   1 54
   1 40
   1 28
   1 24
   1 123
$
</pre>

<p> This is a bit surprising: although 95% of the sonnets have the
standard 14 lines, 8 lines is not uncommon and some are remarkably long.
I'm no scholar, so I don't know what makes these "sonnets" as opposed to
some other poetic form.

</p><p> Maybe printing something about the longer ones might provide more
insight?  We'll exclude the header line too.

</p><pre>$ awk -F/ 'NF &gt; 1 &amp;&amp; $5 &gt; 14' 18.csv
1729/1777/William/Dodd/15/SONNET./OCCASIONED BY HEARING A YOUNG LADY SING SPENSER'S AMORETTI, &amp;c. SET TO MUSIC BY DR. GREENE.
1749/1806/Charlotte Turner/Smith/40/ODE TO DESPAIR./FROM THE NOVEL OF EMMELINE.
1749/1806/Charlotte Turner/Smith/68/ELEGY./[‘Dark gathering clouds involve the threatening skies]
1749/1806/Charlotte Turner/Smith/24/SONG./FROM THE FRENCH OF CARDINAL BERNIS.
1749/1806/Charlotte Turner/Smith/123/THE ORIGIN OF FLATTERY./
1749/1806/Charlotte Turner/Smith/54/THE PEASANT OF THE ALPS./FROM THE NOVEL OF CELESTINA.
1749/1806/Charlotte Turner/Smith/55/THIRTY-EIGHT./ADDRESSED TO MRS. HY.
1749/1806/Charlotte Turner/Smith/28/VERSES/INTENDED TO HAVE BEEN PREFIXED TO THE NOVEL OF EMMELINE, BUT THEN SUPPRESSED.
_/_/G./Bent/66/To the SAME,/On receiving his Poems to Thespia with a Sonnet prefixed.
1735/1779/John/Langhorne/15/SONNET CLXXIX./
1735/1788/William Julius/Mickle/15/SONNET TO VASCO DE GAMA: FROM TASSO./
</pre>

<p> This output suggests a variety of other questions and potential issues.
Charlotte Turner Smith wrote the majority of the long sonnets,
including the extreme outlier with 123 lines.
How many did she write overall?

</p><pre>$ grep Charlotte.Turner 18.csv | wc
     101     941    8955
$
</pre>

<p> She certainly was prolific, representing nearly 20% of the data.  
This raises some other questions for scholars, in particular, how
were these sonnets selected and how representative are they?  

</p><p> Here are some commands
to investigate the authors further.  For example, if we do a straightforward
display of unique author names:

</p><pre>$ awk -F/ '{print $3, $4}' 18.csv | uniq | sed 10q  # display the first 10 lines
author_fname author_lname
E. H. (Elihu Hubbard) Smith
M. F. Cogswell
E. H. (Elihu Hubbard) Smith
M. F. Cogswell
John Bampfylde
Thomas Edwards
William Cowper
William Dodd
Thomas Edwards
</pre>

we see that records for at least three authors are not contiguous, as we
might naively have expected.

This raises a new question: what is the order of the records?

<p> How many unique authors are there, and how much did they write?

</p><pre>$ awk -F/ '{print $4 ", " $3}' 18.csv | sort | uniq -c | sort -n
   1 Anon., _
   1 Anstey, Christopher
   1 Bent, G.
   1 Bishop, Samuel
   1 Bradford, A. M.
     ...
  23 Russell, Thomas
  38 Downman, Hugh
  50 Edwards, Thomas
 101 Smith, Charlotte Turner
 103 Seward, Anna
</pre>

<p> There are 42 distinct authors; the display above shows a few of the 14
singletons, and the five most prolific.  Interestingly, the top two are
women.  Guessing from names, there are only a handful of other female
authors.  One might wonder why over 40% of the sonnets are by two women.

How the data was created is a very important consideration for any
dataset, and particularly for data in the humanities.  As Meredith puts
it, <b>there is no such thing as raw data</b>; all datasets are the result of a
selection and curation process.  Historically, this has often been to
the detriment of some classes of authors.

</p><p> As a peripheral question, how many lines did Anna Seward and
Charlotte Turner Smith write?

</p><pre>awk -F/ '/Anna/ { anna += $5 }; /Charlotte/ { char += $5 }; END {print anna, char}' 18.csv
1456 1706
</pre>

Seward wrote fewer lines because all her sonnets were 14 lines long.

<h4>When did they live and die?</h4>

The first two fields are the birth and death dates for each author,
so we can explore questions about the ages of the authors.

The age is just <tt>$2-$1</tt>:

<pre>$ awk -F/ '{age[$3 " " $4] = $2 - $1}
    END {for (i in age) print age[i], i}' 18.csv | sort -n
-1807 M. F. Cogswell
0 A. M. Bradford
0 G. Bent
0 J. Cole
0 R. Hole
0 _ Anon.
0 author_fname author_lname
23 Henry Headley
...
79 John, Mrs. Hunter
81 Christopher Anstey
81 Thomas James Mathias
83 Anne MacVicar Grant
84 William Crowe
88 William Lisle Bowles
</pre>

<p> This tells us pretty clearly that the dates need to be studied further,
most easily by looking for the ages that are zero or negative:

</p><pre>$ awk -F/ '$2-$1 &lt;= 0' 18.csv
1807fl.//M. F./Cogswell/8/SONNET,/Written after hearing a SONG sung by several SISTERS.
1807fl.//M. F./Cogswell/8/THE SMILE./SONNET TO CAROLINE.
_/_/_/Anon./14/SONNET./
_/_/A. M./Bradford/14/To the SAME./
_/_/J./Cole/14/To the SAME./
_/_/G./Bent/66/To the SAME,/On receiving his Poems to Thespia with a Sonnet prefixed.
_/_/R./Hole/14/To the SAME,/On his Poems addressed to Thespia.
</pre>

<p> What do we do about entries like R. Hole and the often prolific
Anon, whose date fields are marked with <tt>_</tt>?

</p><p> What's with M. F. Cogswell?  He flourished around 1807, with two
8-line sonnets.  Actually, this entry shows one way in which Awk differs
from Python, often usefully.  When converting an arbitrary string to a
number, Awk uses the longest prefix that looks like a number, so
<tt>1807fl.</tt> has numeric value 1807; Awk processes that and
carries on.  Python, by contrast, will
throw an exception that, unless explicitly caught, will terminate execution.

</p><p> Neither of these deals with the real issue, which is that the data
is incomplete so an age computation isn't possible.

One simple solution, appropriate when unknown dates are
a small fraction of the data, is to ignore those records.
Regular expressions are the easiest way to select the good bits
or reject the bad ones:

</p><pre>$ awk -F/ '$1 ~ /^[0-9]+$/ &amp;&amp; $2 ~ /^[0-9]+$/ {print $2-$1, $3, $4}' 18.csv | uniq | sort -n | uniq
23 Henry Headley
25 Richard Gall
26 Thomas Russell
27 E. H. (Elihu Hubbard) Smith
37 Robert Burns
...
79 John, Mrs. Hunter
81 Christopher Anstey
83 Anne MacVicar Grant
84 William Crowe
88 William Lisle Bowles
</pre>

Rather than repeating the test over and over again,
we could collect all the lines that have valid dates in a new
temporary file, then do some further computations on that.

<pre>$ awk -F/ '$1 ~ /^[0-9]+$/ &amp;&amp; $2 ~ /^[0-9]+$/' 18.csv &gt;temp
$ wc temp
     486    3350   35265 temp
</pre>

<p> After that, we can compute the average age, and determine
the youngest and oldest.

</p><pre>$ awk -F/ '{ ages = ages + $2 - $1 } # add up all the ages
       END { print "average age =", ages / NR }' temp
average age = 60.2942
$ awk -F/ '$2-$1 &gt; max { max = $2 - $1; fname = $3; lname = $4 }
       END { print "oldest:", fname, lname, " age", max }' temp
oldest: William Lisle Bowles  age 88
</pre>

<p> As noted above, the author names are not contiguous, and the dates
are not in any obvious order either, which makes one wonder what order
the data has been sorted into.

How would you detect such anomalies mechanically in a larger dataset, in
particular if it were not related to dates)?

</p><h4> Associative Arrays </h4>

None of the examples so far have used associative arrays, which are Awk's
only data structure.  We didn't spend much if any time on associative
arrays in the class, since it felt like a slightly too-advanced topic
for our population.

<p> An associative array, equivalent to a hash in Java or a dictionary
in Python, is an array whose subscripts are not integers but arbitrary strings.

Several of the examples above that used <tt>sort|uniq -c</tt> can be
written equivalently with associative arrays to bring together
identical items.  For example, to see the distribution of sonnet lengths,
we can write:

</p><pre># awk -F/ '{print $5}' 18.csv | sort | uniq -c | sort -nr

$ awk -F/ '{ len[$5]++ }; END { for (i in len) print len[i], i }' 18.csv | sort -nr
</pre>

This produces the same result as the previous version.  We could even
embed the sort command in the Awk program:

<pre>$ awk -F/ '{ len[$5]++ }; END { for (i in len) print len[i], i | "sort -nr" }' 18.csv
</pre>

This computation is essentially the same as the Pandas <tt>unique_id</tt>
dataframe function.



<h4> Wrap-up </h4>

Awk is good for the kind of preliminary analysis we've
shown here, particularly when coupled with basic Unix
tools like <tt>sort</tt>, <tt>uniq</tt>, and <tt>wc</tt>.

At some point it's time to switch to Python and some
of its libraries, especially for plotting, but that
can be deferred until you really understand what's in the
data and where it might be flaky.



</div>]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Tell HN: Postman update removes all your stuff if you refuse to create account (287 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=37792690</link>
            <guid>37792690</guid>
            <pubDate>Fri, 06 Oct 2023 16:14:54 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=37792690">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <tbody><tr id="37794463"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794463" href="https://news.ycombinator.com/vote?id=37794463&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>There are some extensions for VSCode that let you define your requests in a text file and has ways to run the file and show the data.<p>Here's one I just found:
<a href="https://marketplace.visualstudio.com/items?itemName=humao.rest-client" rel="nofollow noreferrer">https://marketplace.visualstudio.com/items?itemName=humao.re...</a></p><p>Syntax looks like:</p><pre><code>    GET https://example.com/comments/1 HTTP/1.1

    ###

    GET https://example.com/topics/1 HTTP/1.1

    ###

    POST https://example.com/comments HTTP/1.1
    content-type: application/json

    {
        "name": "sample",
        "time": "Wed, 21 Oct 2015 18:27:50 GMT"
    }</code></pre></span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37794702"><td></td></tr>
            <tr id="37794787"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794787" href="https://news.ycombinator.com/vote?id=37794787&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>I use the VS Code REST extension a lot but it does lack some of the aspects that make Postman easier for teams and larger projects. It's super easy to define a "collection" as an .http page for smaller and one-off needs though.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="37794727"><td></td></tr>
                <tr id="37794906"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37794906" href="https://news.ycombinator.com/vote?id=37794906&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Yep, me to. Since it's just textfiles I can have them checked into git and share them. Credentials stays in a separate environments file (not checked in). I'm pretty happy with this setup.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794919"><td></td></tr>
            <tr id="37795224"><td></td></tr>
                <tr id="37795299"><td></td></tr>
                        <tr id="37794371"><td></td></tr>
                <tr id="37795031"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37795031" href="https://news.ycombinator.com/vote?id=37795031&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>I almost ignored HTTPie as a Postman alternative because I thought it was CLI only but learned that it has a GUI now. Unfortunately the GUI seems to be proprietary.<p>Also we were looking for HTTP/2 support which neither Postman not HTTPie have and found xh which is a HTTPie clone in Rust.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="37794715"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794715" href="https://news.ycombinator.com/vote?id=37794715&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>On windows I even got to enjoy using Invoke-WebRequest directly. Extremely useful since powershell has structured output and input.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37795002"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37795002" href="https://news.ycombinator.com/vote?id=37795002&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>I also found it surprisingly how pleasant this was. For all Powershell’s quirks, this is one of those features that just makes sense to me.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37795033"><td></td></tr>
                <tr id="37795257"><td></td></tr>
                        <tr id="37792914"><td></td></tr>
                <tr id="37794762"><td></td></tr>
                <tr id="37795114"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37795114" href="https://news.ycombinator.com/vote?id=37795114&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>If you updated to v8 and missed the one small text link to export your data before creating an account, then all of your data was gone. Fortunately you could go to Github and download an old version.<p>If you created an account all of the data was still there. By default the "scratchpad" that did not require an account would not show anything.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="37794921"><td></td></tr>
            <tr id="37794839"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37794839" href="https://news.ycombinator.com/vote?id=37794839&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Plenty of users reported that updating, being prompted to create an account, and then refusing denied them access to their requests.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794557"><td></td></tr>
                <tr id="37795018"><td></td></tr>
            <tr id="37794798"><td></td></tr>
                        <tr id="37794246"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794246" href="https://news.ycombinator.com/vote?id=37794246&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>Yes, it happened to me as well.<p>Fortunately I regularly export the collections that still matter.</p><p>Now I am no longer a Postman user, as due to NDA's we aren't allowed to store project data on them.</p><p>Paying was never an issue, not having a secure alternative is what killed it for us.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="37795475"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37795475" href="https://news.ycombinator.com/vote?id=37795475&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Not very surprised, Postman has continued to get more bloated and pushy with accounts, I ended up just moving to Insomnia after using Postman for many many years.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="37793874"><td></td></tr>
                <tr id="37794739"><td></td></tr>
                <tr id="37794851"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37794851" href="https://news.ycombinator.com/vote?id=37794851&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>The one thing I'm afraid of is that it's a single maintainer project, and while they are active now, I'm not sure how this is going to fare in a few months or so.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37793918"><td></td></tr>
                  <tr id="37794357"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794357" href="https://news.ycombinator.com/vote?id=37794357&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>As one of the creators, I can recommmend <a href="https://kreya.app/" rel="nofollow noreferrer">https://kreya.app</a>. It is not open source (like Postman), but has a strong focus on privacy and also stores the data locally.<p>As it has more powerful features (IMO) than most alternatives listed here, I am a little disappointed that it isn't mentioned more often.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="37794704"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794704" href="https://news.ycombinator.com/vote?id=37794704&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Kreya is the only alternative I've used that prioritizes gRPC support (along with REST). Regardless of source availability, thank you for creating this!</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37795038"><td></td></tr>
                        <tr id="37794712"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794712" href="https://news.ycombinator.com/vote?id=37794712&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Highly recommend the HTTP client in the JetBrains IDEs. I looked carefully at the standalones in this category and IMHO it’s the best. Text based so you can seamlessly manage everything with your repo, with automatic features built in from parsing the text.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37795078"><td></td></tr>
                  <tr id="37794902"><td></td></tr>
            <tr id="37794774"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794774" href="https://news.ycombinator.com/vote?id=37794774&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Am I crazy for using curl and editing the shell cmdline with vim when I need to work with lots of headers?</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37795180"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37795180" href="https://news.ycombinator.com/vote?id=37795180&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>No, I use curl similarly and a lot. Where I find Postman convenient is when using it against services that use OAuth2. You authenticate once, it fetches the token and you are good to go. Could I script this with curl? Sure. Do I want to? Nah.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="37794878"><td></td></tr>
                <tr id="37795042"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37795042" href="https://news.ycombinator.com/vote?id=37795042&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>I’m not a curl pro but devtools ‘copy as curl’ gets me 95% there most of the time.<p>That said, thanks! Didn’t know about this. Definitely adding to the toolbox.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                        <tr id="37794374"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794374" href="https://news.ycombinator.com/vote?id=37794374&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>After the whiffs of enshittification caught my nose I did some research and switched over to Insomnia. I don’t make use of any advanced features, just a pre request authentication call that was a little bit of a pain to set up. But it’s working exactly how I was using postman so it’s a suitable replacement for me</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37794413"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794413" href="https://news.ycombinator.com/vote?id=37794413&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Didn't they just push a similar update where they require an account? And pushed all data into their cloud sync without asking?</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37794550"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37794550" href="https://news.ycombinator.com/vote?id=37794550&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>When I switched over they made it clear they were getting rid of offline mode. So I said whiffs but at that point there was a turd halfway up my nose</span></p></div></td></tr>
        </tbody></table></td></tr>
                        <tr id="37794462"><td></td></tr>
                <tr id="37795261"><td></td></tr>
            <tr id="37794520"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794520" href="https://news.ycombinator.com/vote?id=37794520&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>I really like restclient - also really makes sense for persisting tests in this manner to source control.  Not that anybody else on your team will know how to use it...</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794238"><td></td></tr>
            <tr id="37795066"><td></td></tr>
                <tr id="37795431"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37795431" href="https://news.ycombinator.com/vote?id=37795431&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>yeah, this one is the only thing that i'm missing after migration to linux box. the extensions and ability to write own extensions is very powerful, the speed and native UI were very welcomed, as postman and other electron based tools are just way too heavy for me.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794862"><td></td></tr>
            <tr id="37794976"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794976" href="https://news.ycombinator.com/vote?id=37794976&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>Is that what happened? I DO have an account (begrudgingly made because it doesn't just let you do a JSON export of your collections, you have to send it to the cloud and then download it for some baffling reason) and last time I opened it all of my environment variable values were wiped.<p>I've been wanting to get off Postman for a while. It's so clunky these days, and they're shoving way too much shit in it that I don't care about.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="37794640"><td></td></tr>
            <tr id="37794847"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794847" href="https://news.ycombinator.com/vote?id=37794847&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>Is this all stuff that you had kept in your Scratchpad? I think Postman had been warning users for months that Scratchpad would be going away, and that you should migrate everything to a workspace.<p>I'm not saying the decision is <i>right</i>; personally I much preferred the scratch, because it didn't require a freaking network request every time I want to look at my API collections. I'm just saying, this didn't come out of nowhere.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="37794942"><td></td></tr>
                <tr id="37794970"><td></td></tr>
                  <tr id="37794286"><td></td></tr>
                <tr id="37794824"><td></td></tr>
                  <tr id="37794956"><td></td></tr>
            <tr id="37794365"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794365" href="https://news.ycombinator.com/vote?id=37794365&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>another alternative: RapidAPI <a href="https://rapidapi.com/" rel="nofollow noreferrer">https://rapidapi.com/</a><p>it's a good api client, and it's free for individual use and they have some sort of nifty marketplace integration catalog...thing with remote API servers that makes it easy to find and try API services that offer data / functionality you want to connect to.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="37794920"><td></td></tr>
            <tr id="37794936"><td></td></tr>
                  <tr id="37794697"><td></td></tr>
                <tr id="37794721"><td></td></tr>
                <tr id="37794757"><td></td></tr>
                  <tr id="37794722"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794722" href="https://news.ycombinator.com/vote?id=37794722&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>I lost everything in a update with them too. And not a create-account update. Just a regular update one day, and <i>poof</i> gone.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794529"><td></td></tr>
                <tr id="37795464"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37795464" href="https://news.ycombinator.com/vote?id=37795464&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>the mac client probably wont, as they were already bought by rapidapi.com and made web-based client that looks like PAW but has the same issues as other web-based solution</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="37794636"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794636" href="https://news.ycombinator.com/vote?id=37794636&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>I'm not sure why you're downvoted. I still use paw/rapidapi and I think it's great. Maybe downvoters can explain.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794961"><td></td></tr>
            <tr id="37792871"><td></td></tr>
            <tr id="37794097"><td></td></tr>
            <tr id="37794130"><td></td></tr>
            <tr id="37794047"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794047" href="https://news.ycombinator.com/vote?id=37794047&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>Learn and use curl, then you won’t have any issues like this. You can make some scripts in Python or something, too.<p>I say this because the last three tools I used for this all got shitty (postman, insomnia, and thunder client).
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="37794177"><td></td></tr>
                <tr id="37795000"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37795000" href="https://news.ycombinator.com/vote?id=37795000&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Seriously, python with the requests lib in a jupyter notebook is always a nicer user experience than any REST API GUI, most importantly once it's grown a bit.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794352"><td></td></tr>
            <tr id="37794223"><td></td></tr>
                <tr id="37794420"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37794420" href="https://news.ycombinator.com/vote?id=37794420&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Depends how comfortable you are with curl and your workflow. I'm much more productive using curl vs any GUI you give me. Still have OpenAPI specs in my projects but curl is much faster initially.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37794765"><td><table>  <tbody><tr>    <td indent="3"><img src="https://news.ycombinator.com/s.gif" height="1" width="120"></td><td>
      <center><a id="up_37794765" href="https://news.ycombinator.com/vote?id=37794765&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>It falls apart instantly when you need to pass data from one endpoint to another or add any sort of logic like filtering through data - so any time you have non-trivial workloads where you don't want to spend half your time fighting against jq or shell.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37795230"><td><table>  <tbody><tr>    <td indent="4"><img src="https://news.ycombinator.com/s.gif" height="1" width="160"></td><td>
      <center><a id="up_37795230" href="https://news.ycombinator.com/vote?id=37795230&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>You don’t have to fight tools if you learn them, but I understand— as a fellow programmer— that you don’t always have time to learn them. However, it’s pretty easy to use pipes and tools like jq to do complex stuff.</span></p></div></td></tr>
        </tbody></table></td></tr>
                              <tr id="37794570"><td></td></tr>
                <tr id="37794751"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37794751" href="https://news.ycombinator.com/vote?id=37794751&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>I think you're joking, but I actually want to know these things when adopting tools now to the extent that it's applicable.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794254"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794254" href="https://news.ycombinator.com/vote?id=37794254&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>for individual users, i've not quite got the appeal of postman.<p>in larger teams, I did see groups of people collaboratively creating various urls/scripts/tests, and putting some docs with them, to help with the dev and testing (mostly qa/test folks).  that was, imo, a relatively legitimate use for a full tool like postman.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="37794242"><td></td></tr>
                  <tr id="37794348"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794348" href="https://news.ycombinator.com/vote?id=37794348&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Same. Quite a surprise. I switched to IntelliJ http requests and am seeing how that does for me.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="37794318"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794318" href="https://news.ycombinator.com/vote?id=37794318&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>I'm sure it's a bug, they have nothing to gain from it, especially if there's no warning about this.<p>It's also a good reminder for everyone to back up everything!
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="37794747"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794747" href="https://news.ycombinator.com/vote?id=37794747&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>It's not a bug to release a version which removed a massive chunk of functionality. It's intentionally fucking over their users who are not willing to create an account.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794650"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794650" href="https://news.ycombinator.com/vote?id=37794650&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>&gt; Any alternatives that I can migrate to?<p>If it works for your use case: writing integration tests.</p><p>I used Postman in the past but I never really got the point of "storing" queries beyond the history.</p><p>I think if you have that need it means it's time to write a frontend to call your endpoints, or use integration tests.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="37795014"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37795014" href="https://news.ycombinator.com/vote?id=37795014&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>I’ve used alternatives to explore under-documented APIs interactively and suss out their behavior. Then I could use the app’s codegen to turn the query I’d manually crafted into my chosen language’s code.<p>You can do all that directly in the language, of course, but by the time you go through the trouble of pretty printing the output, parametrizing the input, etc, you’ve reimplemented a less ergonomic version of Postman-and-similar.</p><p>(Not saying you’re wrong for doing it your way, but explaining why others might choose a different approach.)
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794857"><td></td></tr>
                <tr id="37794950"><td></td></tr>
                  <tr id="37794189"><td></td></tr>
                <tr id="37794553"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794553" href="https://news.ycombinator.com/vote?id=37794553&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Disappointing that there isn't a standalone program like Postman. I don't want to install an extension in my browser to handle CORS.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37794953"><td></td></tr>
            <tr id="37794792"><td></td></tr>
                <tr id="37794887"><td></td></tr>
                <tr id="37794992"><td><table>  <tbody><tr>    <td indent="4"><img src="https://news.ycombinator.com/s.gif" height="1" width="160"></td><td>
      <center><a id="up_37794992" href="https://news.ycombinator.com/vote?id=37794992&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Having a dedicated browser profile is a good solution to this if you’re ever uncomfortable with a particular extension.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="37794979"><td><table>  <tbody><tr>    <td indent="4"><img src="https://news.ycombinator.com/s.gif" height="1" width="160"></td><td>
      <center><a id="up_37794979" href="https://news.ycombinator.com/vote?id=37794979&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>Running standalone binaries by a VC-fueled project on your host is even worse.<p>I guess a separate quarantine browser profile is the best of both worlds?
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="37794974"><td><table>  <tbody><tr>    <td indent="4"><img src="https://news.ycombinator.com/s.gif" height="1" width="160"></td><td>
      <center><a id="up_37794974" href="https://news.ycombinator.com/vote?id=37794974&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>Ah, I follow. I was confused because a small, open-source extension should be sufficient to handle sending test requests. Sounds like they're doing something much bigger than that.<p>POSTman started as an extension; hence my confusion. I was wondering if there was a technical issue I was unaware of.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                              <tr id="37794646"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794646" href="https://news.ycombinator.com/vote?id=37794646&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>It's a non-starter for me if it requires an extension. I also think it's a matter of time before it goes the Insomnia/Postman route. I'd love to be proven wrong though.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37794848"><td></td></tr>
                  <tr id="37794544"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_37794544" href="https://news.ycombinator.com/vote?id=37794544&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>But you raised VC funding right?<p>Insomnia was an alternative to Postman, raised VC funds, eventually needed to justify that, and suddenly accounts mattered more. They're currently on the same trajectory.</p><p>Insomnia is open source but just like OP experienced, a single update can do damage and it takes time for the community to react.</p><p>Is this the same company that raised? If so, are you exempt from that? Have you figured out some monetization scheme for what is essentially a glorified curl UI that doesn't incentivize account sign ups?
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="37794926"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37794926" href="https://news.ycombinator.com/vote?id=37794926&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>I wish tech product managers could get it through their skulls: creating and maintaining yet-another-account for yet-another-app is high friction and undesirable. If you're going to give me an ultimatum where I need to either create an account or stop using the app. 99% of the time I'm just going to stop using your app.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="37794772"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37794772" href="https://news.ycombinator.com/vote?id=37794772&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>If it's just a "glorified curl UI" what's the problem? Just use curl, or build your own, if it's so trivial.<p>You are kicking the tires awfully hard for a solution to a problem you claim is easy.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="37794990"><td><table>  <tbody><tr>    <td indent="3"><img src="https://news.ycombinator.com/s.gif" height="1" width="120"></td><td>
      <center><a id="up_37794990" href="https://news.ycombinator.com/vote?id=37794990&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>That’s actually what I do and did. I have a whole bunch of scripts that allow me to replicate a lot of what Postman did for me.<p>The problem with these VC companies is that they enter the market with a whole bunch of lies and I was convinced that building on my ad hoc scripts wasn’t very useful since there were multiple alternatives including open source ones.</p><p>It’s taken me a decade however to learn that if these projects are VC backed as opposed to having some sort of govt or heck, even a benevolent dictator, they will screw you.</p><p>And while I might have learnt this lesson, which so much of the knowledge ecosystem also being filled with VC backed individuals (including this very forum) a whole another generation of potential OS developers will learn the lesson also too late.</p><p>And that’s how Silicon Valley has built a massive eco system to suck money out of everything across the globe, especially open source, but not limited to it (taxis, restaurants, hoteling, everything…).
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="37794995"><td><table>  <tbody><tr>    <td indent="3"><img src="https://news.ycombinator.com/s.gif" height="1" width="120"></td><td>
      <center><a id="up_37794995" href="https://news.ycombinator.com/vote?id=37794995&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>I think it's fair to criticize them given a fair number of alternatives in this thread (with their own shortcomings). It's kind of silly to post something to hackernews and not expect criticism.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="37794562"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37794562" href="https://news.ycombinator.com/vote?id=37794562&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Postman is also open source lol. Unless its donation driven without funding its all going to be the same.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37794700"><td></td></tr>
            <tr id="37794632"><td><table>  <tbody><tr>    <td indent="3"><img src="https://news.ycombinator.com/s.gif" height="1" width="120"></td><td>
      <center><a id="up_37794632" href="https://news.ycombinator.com/vote?id=37794632&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>Can't someone just locally fork one of these apps and use it forever without updating it?  What's actually different about manually poking APIs from one week to the next?</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="37794883"><td></td></tr>
                  <tr id="37794687"><td></td></tr>
                              <tr id="37794998"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_37794998" href="https://news.ycombinator.com/vote?id=37794998&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><p><span>I would really like to see Chrome offering an alternative to Postman. For me, it feels natural, to have everything in one place.<p>What do others think?
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="37795037"><td></td></tr>
                <tr id="37795053"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_37795053" href="https://news.ycombinator.com/vote?id=37795053&amp;how=up&amp;goto=item%3Fid%3D37792690"></a></center>    </td><td><br><div>
                  <p><span>I checked out of postman for a few years. Color me confused in this thread until I figured that part out.</span></p></div></td></tr>
        </tbody></table></td></tr>
                        </tbody></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Shortbread – Create AI comics in minutes (134 pts)]]></title>
            <link>https://shortbread.ai/</link>
            <guid>37792444</guid>
            <pubDate>Fri, 06 Oct 2023 15:56:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://shortbread.ai/">https://shortbread.ai/</a>, See on <a href="https://news.ycombinator.com/item?id=37792444">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="main" data-framer-hydrate-v2="{&quot;routeId&quot;:&quot;augiA20Il&quot;,&quot;localizationId&quot;:&quot;default&quot;,&quot;localeId&quot;:&quot;default&quot;}" data-framer-ssr-released-at="2023-09-27T07:53:51.711Z" data-framer-page-optimized-at="2023-10-03T01:23:55.661Z"><header data-framer-name="Landing" name="Landing"></header><div data-framer-name="Grid 1" name="Grid 1"><div data-framer-name="Content" name="Content"><p data-framer-component-type="RichTextContainer"><h2>Idea to Page in Seconds</h2></p><p data-styles-preset="GOagwD4oe">Begin with a spark—whether it's a storyline, a unique character, or a specific mood you want to capture. Just describe it, and let Shortbread transform your idea into a page, setting the stage for your artistry.</p></div><div data-framer-name="Content" name="Content"><p data-framer-component-type="RichTextContainer"><h2>Fine-Tune like a Pro</h2></p><p data-styles-preset="GOagwD4oe">Create with unparalleled control over each panel. Manipulate scenes, character poses, fine-tune facial expressions, and adjust camera angles to create your perfect shot.</p></div><div data-framer-name="Content" name="Content"><p data-framer-component-type="RichTextContainer"><h2>Pixel-Perfect Design</h2></p><p data-styles-preset="GOagwD4oe">Elevate the look of your comics with a rich selection of design elements. From speech bubbles to fonts, every pixel can be customized to enhance the flow your story.</p></div></div><section><p data-framer-component-type="RichTextContainer"><h2 data-styles-preset="stylesPresetHeading2">Frequently Asked Questions</h2></p></section></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Java 21 VirtualThreads vs. Clojure Lazy Seqs (from Clojure Deref 2023-10-06) (154 pts)]]></title>
            <link>https://clojure.org/news/2023/10/06/deref</link>
            <guid>37792294</guid>
            <pubDate>Fri, 06 Oct 2023 15:44:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://clojure.org/news/2023/10/06/deref">https://clojure.org/news/2023/10/06/deref</a>, See on <a href="https://news.ycombinator.com/item?id=37792294">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      
      <p><em>06 October 2023</em><br>
         <em>Alex Miller</em></p>

      <div id="preamble">
<p>Welcome to the Clojure Deref! This is a weekly link/news roundup for the Clojure ecosystem (feed: <a href="https://clojure.org/feed.xml">RSS</a>). Thanks to Anton Fonarev for link aggregation.</p>
</div>
<div>
<h2 id="_from_the_core"><a href="#_from_the_core"></a>From the core</h2>
<div>
<p>Recently Java 21 was released (congrats!) and this has driven a lot of interest and experimentation with the new virtual threads feature. Virtual threads have the ability to park and resume a virtual thread (particularly one blocked on I/O) and this cooperates transparently with many blocking constructs in Java - I/O, sockets, java.util.concurrent.lock, etc. However, one thing it does not (yet) cooperate with is object monitors (synchronized) and thus doing a blocking call while holding a synchronized monitor prevents a virtual thread from parking (ie, "pins" the virtual thread). Note that synchronization itself is not inherently bad - normal use of synchronized to serialize reads and writes to fields is fine (as there is no blocking I/O that can pin a thread).</p>
<p>Several people doing new things with virtual threads have detected cases where user code is doing I/O blocking while Clojure is in a synchronization block, thus pinning threads. The two most important cases are lazy seqs and <code>delay</code> - both hold some suspended computation in a thunk and invoke the thunk under synchronization, thus allowing for the possibility of user I/O under a lock in the language level. As people have raised this as an issue, we have spent the last week taking a hard look at this area.</p>
<p>At a meta level, there are a bunch of options here and we have still not decided on our approach or timeframe. From a user level, it is possible to simply not do (or tolerate) I/O under delay or lazy seqs. Delay is a one-time thing, so it may not generally be an issue to pin a thread that is reading a config file as that is a one-time thing. Pulling I/O over a lazy seq is not uncommon and can definitely present this kind of issue, but there are a lot of other options - controlling via loop/recur, using transducers and <code>sequence</code>, etc. If you are experiencing this problem now, these are probably worth exploring.</p>
<p>We’ve spent a ton of time over the last week looking at the internals of LazySeq and options for avoiding synchronization. The general guidance from Java is to replace synchronized with ReentrantLock (which has virtual thread coordination), but this advice leaves out the inherent tradeoffs in that change. synchronized relies on object monitors which are built into every Java object at the JVM level, whereas ReentrantLocks are additional Java objects (which hold a reference to an internal Sync object). Clojure makes a lot of lazy seqs and allocating two objects (plus adding an additional field to LazySeq) for every lazy seq is a real cost in allocation, heap size, and GC. Additionally, while ReentrantLock seems to be a bit faster than synchronized in Java 21, LazySeq makes one reentrant call, and reentrant calls seems to be noticeably slower than synchronized. There are lots of options though. We think it’s relatively easy to make lazy seq walking faster, but a lot harder to keep realization costs under control (as making locks takes non-zero time). One interesting branch we have explored is making one lock per seq and passing it through the seq as we go - lots of tradeoffs in that.</p>
<p>Additionally, we continue to work on functional interface adapters and method thunks. With FI adapters, we continue to refine when implicit coercion and conversion occur and I think that draws asymptotically closer to completion. With method thunks, we have taken a bit of a detour to examine array class representation.</p>
<p>Generally, classes are represented by symbols that name the class, but this does not work for array classes as they cannot be represented as a valid symbol. The fallback right now is using a String that holds the internal class name, like <code>^"[Ljava.lang.String;"</code> which I think we can all agree is no fun. Our plan going forward is to support a new array class syntax which is a symbol of the class with a <code>*</code> suffix. Imported classes can use their short name, so <code>String*</code> will represent a Java <code>String[]</code> (or a <code>String…​</code> vararg). Multiple <code>**</code> will represent multidimensional arrays. This will work with both classes and with primitives, so <code>long*</code> will be a synonym for the existing <code>longs</code>. Rich also wishes you to notice the C pointer punnery. :)</p>
<p>That was a bit of a diversion, but I think it is a big win to fix a long-time representational gap. It also helps create some new "columns" in the varargs decision matrix, which is not going to be addressed in 1.12, but I think we have teed up to work on immediately after.</p>
</div>
</div>
<div>
<h2 id="_podcasts_and_videos"><a href="#_podcasts_and_videos"></a>Podcasts and videos</h2>

</div>
<div>
<h2 id="_blogs_articles_and_projects"><a href="#_blogs_articles_and_projects"></a>Blogs, articles, and projects</h2>

</div>
<div>
<p>New releases and tools this week:</p>
<div>
<ul>
<li>
<p><a href="https://github.com/holyjak/fulcro-troubleshooting">fulcro-troubleshooting</a> v7 - A development-time library for Fulcro that helps to detect problems earlier and find and fix their root cause faster</p>
</li>
<li>
<p><a href="https://github.com/holyjak/minimalist-fulcro-template-backendless">minimalist-fulcro-template-backendless</a>  - A minimal template for browser-only Fulcro apps for learning</p>
</li>
<li>
<p><a href="https://github.com/clojure-expectations/clojure-test">clojure-test</a> <a href="https://github.com/clojure-expectations/clojure-test/releases/tag/v2.1.182">2.1.182</a> - A clojure.test-compatible version of the classic Expectations testing library</p>
</li>
<li>
<p><a href="https://github.com/nextjournal/clerk">clerk</a> <a href="https://github.com/nextjournal/clerk/blob/9c38ff3ef240c9bd21e596792adb2ebdbb5a738d/CHANGELOG.md#015957-2023-09-28">0.15.957</a> - Moldable Live Programming for Clojure</p>
</li>
<li>
<p><a href="https://github.com/namenu/deps-diff">deps-diff</a> 1.1 - A tool for comparing transitive dependencies in two deps.edn files</p>
</li>
<li>
<p><a href="https://github.com/juji-io/datalevin">datalevin</a> <a href="https://github.com/juji-io/datalevin/blob/master/CHANGELOG.md">0.8.20</a> - A simple, fast and versatile Datalog database</p>
</li>
<li>
<p><a href="https://github.com/liquidz/antq">antq</a> <a href="https://github.com/liquidz/antq/releases/tag/2.7.1133">2.7.1133</a> - Point out your outdated dependencies</p>
</li>
<li>
<p><a href="https://github.com/eerohele/tab">tab</a> <a href="https://github.com/eerohele/tab/blob/main/CHANGELOG.md#2023-10-03">2023-10-03.333</a> - A tool for tabulating Clojure collections</p>
</li>
<li>
<p><a href="https://github.com/eerohele/pp">pp</a> 2023-10-05.5 - Pretty-print Clojure data structures, fast</p>
</li>
<li>
<p><a href="https://github.com/quoll/raphael">raphael</a> 0.3.0 - A Clojure library for parsing strings containing the Terse Triples Language: Turtle</p>
</li>
<li>
<p><a href="https://github.com/steffan-westcott/clj-otel">clj-otel</a> <a href="https://github.com/steffan-westcott/clj-otel/blob/master/CHANGELOG.adoc">0.2.4.1</a> - An idiomatic Clojure API for adding telemetry to your libraries and applications using OpenTelemetry</p>
</li>
<li>
<p><a href="https://github.com/babashka/neil">neil</a> <a href="https://github.com/babashka/neil/blob/main/CHANGELOG.md#0262">0.2.61</a> - A CLI to add common aliases and features to deps.edn-based projects</p>
</li>
<li>
<p><a href="https://github.com/squint-cljs/squint">squint</a> <a href="https://github.com/squint-cljs/squint/blob/main/CHANGELOG.md">0.2.30</a> - ClojureScript syntax to JavaScript compiler</p>
</li>
<li>
<p><a href="https://github.com/eerohele/Tutkain">Tutkain</a> <a href="https://github.com/eerohele/Tutkain/blob/master/CHANGELOG.md#0190-alpha---2023-10-03">0.19.0 (alpha)</a> - A Sublime Text package for interactive Clojure development</p>
</li>
<li>
<p><a href="https://github.com/squint-cljs/cherry">cherry</a> <a href="https://github.com/squint-cljs/cherry/blob/main/CHANGELOG.md">0.1.9</a> - Experimental ClojureScript to ES6 module compiler</p>
</li>
<li>
<p><a href="https://github.com/PEZ/taplet">taplet</a> <a href="https://github.com/PEZ/taplet/blob/master/CHANGELOG.md">1.0.58</a> - A Clojure/ClojureScript macro, let&gt; that works like a let, and also tap&gt;s the binding vector</p>
</li>
<li>
<p><a href="https://github.com/babashka/nbb">nbb</a> <a href="https://github.com/babashka/nbb/blob/main/CHANGELOG.md">1.2.179</a> - Scripting in Clojure on Node.js using SCI</p>
</li>
</ul>
</div>
</div>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Unreal Engine will no longer be free for all (153 pts)]]></title>
            <link>https://www.creativebloq.com/news/epic-games-unreal-engine-charge</link>
            <guid>37792030</guid>
            <pubDate>Fri, 06 Oct 2023 15:24:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.creativebloq.com/news/epic-games-unreal-engine-charge">https://www.creativebloq.com/news/epic-games-unreal-engine-charge</a>, See on <a href="https://news.ycombinator.com/item?id=37792030">Hacker News</a></p>
<div id="readability-page-1" class="page"><article aria-label="article" data-id="3SQ7DLX5NJZCHBGUGzFPtk">
<header>
<nav aria-label="Breadcrumbs">
<ol>
<li>
<a href="https://www.creativebloq.com/news" aria-label="Return to News">News</a>
</li>
<li>
<a href="https://www.creativebloq.com/tag/digital-art" aria-label="Return to Digital Art">Digital Art</a>
</li>
</ol>
</nav>



</header>
<section>
<div itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject">
<div>
<picture><source type="image/webp" alt="Unreal Engine and Unity learn a game engine; a 3d render of a cityscape" onerror="if(this.src &amp;&amp; this.src.indexOf('missing-image.svg') !== -1){return true;};this.parentNode.replaceChild(window.missingImage(),this)" srcset="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-320-80.jpg.webp 320w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-480-80.jpg.webp 480w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-650-80.jpg.webp 650w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-970-80.jpg.webp 970w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-1024-80.jpg.webp 1024w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-1200-80.jpg.webp 1200w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-1920-80.jpg.webp 1920w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)" data-original-mos="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode.jpg" data-pin-media="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode.jpg"><source type="image/jpeg" alt="Unreal Engine and Unity learn a game engine; a 3d render of a cityscape" onerror="if(this.src &amp;&amp; this.src.indexOf('missing-image.svg') !== -1){return true;};this.parentNode.replaceChild(window.missingImage(),this)" srcset="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-320-80.jpg 320w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-480-80.jpg 480w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-650-80.jpg 650w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-970-80.jpg 970w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-1024-80.jpg 1024w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-1200-80.jpg 1200w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-1920-80.jpg 1920w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)" data-original-mos="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode.jpg" data-pin-media="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode.jpg"><img src="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-320-80.jpg" alt="Unreal Engine and Unity learn a game engine; a 3d render of a cityscape" onerror="if(this.src &amp;&amp; this.src.indexOf('missing-image.svg') !== -1){return true;};this.parentNode.replaceChild(window.missingImage(),this)" srcset="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-320-80.jpg 320w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-480-80.jpg 480w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-650-80.jpg 650w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-970-80.jpg 970w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-1024-80.jpg 1024w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-1200-80.jpg 1200w, https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode-1920-80.jpg 1920w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)" data-original-mos="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode.jpg" data-pin-media="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode.jpg"></picture>
</div>
<meta itemprop="url" content="https://cdn.mos.cms.futurecdn.net/EDzmP6PkqtigWFF9r5Qode.jpg">
<meta itemprop="height" content="600">
<meta itemprop="width" content="338">
<figcaption itemprop="caption description">
<span itemprop="copyrightHolder">(Image credit: Epic Games)</span>
</figcaption>
</div>

<div id="article-body">
<p>Bad news for those using <a href="https://www.creativebloq.com/tag/unreal-engine" data-auto-tag-linker="true">Unreal Engine</a> for VFX or animation this week – or at least for some. Epic Games has confirmed that it will begin charging industries outside gaming to use the 3D graphics engine next year.&nbsp;</p><p>Until now the company has not charged directly for use of Unreal Engine. Instead it charges royalties for projects that surpass $1m in revenue – and only those that use code from the engine. That means that while the developers of big-selling games pay royalties, those who use Unreal Engine for film making and other uses pay nothing. Epic Games now plans to start charging subscription fees on a per-seat basis, but it has clarified that not everyone will be affected (also see our pick of the <a href="https://www.creativebloq.com/features/best-free-3d-apps">best 3D apps</a>).</p><div><blockquote data-lang="en"><p lang="en" dir="ltr">Tim Sweeney addresses Epic Games Layoffs... #UnrealFest pic.twitter.com/49t4Tf20SA<a href="https://twitter.com/ImmatureGamerX/status/1709216675730542972" data-url="https://twitter.com/ImmatureGamerX/status/1709216675730542972">October 3, 2023</a></p></blockquote><p><span role="button" tabindex="0" aria-label="See more">See more</span></p></div><p>Speaking at Unreal Fest 2023, Epic Games CEO Tim Sweeney said Unreal Engine would become “a licensable piece of software like Maya or <a href="https://www.creativebloq.com/tag/photoshop" data-auto-tag-linker="true">Photoshop</a>” with a subscription-based pricing model. Studios using it for non-gaming work like animation, VFX and visualization will be charged through a “seat-based enterprise software licensing model”</p><p>The video above, shared from the event by the creative developer <a href="https://twitter.com/ImmatureGamerX" target="_blank" data-url="https://twitter.com/ImmatureGamerX">Immature on Twitter</a>, shows Sweeney outlining the company’s sources of income, which will include licensing Unreal Engine, in the context of Epic's recent decision to lay off 16% of its staff.</p><div><blockquote data-lang="en"><p lang="en" dir="ltr">Won’t affect. There will be minimum revenue thresholds for commercial projecrs, and student/educator use will remain free.<a href="https://twitter.com/TimSweeneyEpic/status/1709731335147831316" data-url="https://twitter.com/TimSweeneyEpic/status/1709731335147831316">October 5, 2023</a></p></blockquote><p><span role="button" tabindex="0" aria-label="See more">See more</span></p></div><p>Understandably, the news has caused concern among creatives, especially independent filmmakers and non-professionals. Unreal Engine was developed as a graphics engine for gaming, but is now routinely used for real-time rendering and virtual production in everything from animation, to commercials, including by aspiring filmmakers who may not be able to pay for a subscription.</p><p>Replying to <a href="https://twitter.com/TimSweeneyEpic/status/1709731335147831316" target="_blank" data-url="https://twitter.com/TimSweeneyEpic/status/1709731335147831316">a question raised on X</a>, Sweeney has now clarified that there will be minimum revenue thresholds for commercial projects that have to pay for a subscription and that student and educator use of Unreal Engine will remain free.</p><p>There is no detail as yet on what the threshold will be, but the idea seems to be to charge larger studios and developers. It's also unknown what the Unreal Engine price or terms will look like – Sweeney said pricing would not be "unusually expensive, or unusually inexpensive”. The move will not affect game developers who will continue to pay a 5 per cent royalty rate after revenue passes $1m.</p><p>Sweeney said he was announcing the change ahead of time to ensure transparency. Some have suggested that the move was inevitable, noting that it was unusual that access has remained free. However, others have raised concerns that a subscription model could means some creatives cannot afford to use the tool. "Can you imagine that there are some really good unreal engine users that cannot afford subscription in some countries? Please keep it free to use and monetize results for movie and nongame usage," the producer Mihai Ogasanu wrote.</p><p>In our <a href="https://www.creativebloq.com/reviews/unreal-engine-53">Unreal Engine 5.3 review</a>, we note that Unreal Engine continues to redefine the game engine industry with a new skeletal mesh editor, cloth editor and volumetric capabilities.</p>
</div>
<div>
<p><img src="https://cdn.mos.cms.futurecdn.net/flexiimages/mcasa08ogs1651144853.svg"></p>
<div>
<p><strong><span>Thank you for reading 5 articles this month* Join now for unlimited access</span></strong></p><p><strong><span>Enjoy your first month for just £1 / $1 / €1</span></strong></p>
</div>

<p><span>*Read 5 free articles per month without a subscription</span></p>
</div>


<div>
<p><img src="https://cdn.mos.cms.futurecdn.net/flexiimages/mcasa08ogs1651144853.svg">
</p>
<div>
<p><strong><span>Join now for unlimited access</span></strong></p><p>Try first month for just <strong>£1 / $1 / €1</strong></p>
</div>

</div>



<div data-hydrate="true" id="slice-container-newsletterForm-articleInbodyContent"><section><p>Daily design news, reviews, how-tos and more, as picked by the editors.</p></section></div>
<div id="slice-container-authorBio"><p>Joe is a regular freelance journalist and editor at Creative Bloq. He writes news and features, updates buying guides and keeps track of the best equipment for creatives, from monitors to accessories and office supplies. A writer and translator, he also works as a project manager at London and Buenos Aires-based design and branding agency Hermana Creatives, where he manages a team of designers, photographers and video editors who specialise in producing photography, video content, graphic design and collaterals for the hospitality sector. He enjoys photography, particularly nature photography, wellness and he dances Argentine tango.</p></div>


<div>
<h4>Related articles</h4>

</div>
</section>



</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[EU Grabs ARM for First ExaFLOP Supercomputer, x86 Misses Out (137 pts)]]></title>
            <link>https://www.hpcwire.com/2023/10/04/eu-grabs-arm-for-first-exaflop-supercomputer-x86-misses-out/</link>
            <guid>37791116</guid>
            <pubDate>Fri, 06 Oct 2023 14:18:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.hpcwire.com/2023/10/04/eu-grabs-arm-for-first-exaflop-supercomputer-x86-misses-out/">https://www.hpcwire.com/2023/10/04/eu-grabs-arm-for-first-exaflop-supercomputer-x86-misses-out/</a>, See on <a href="https://news.ycombinator.com/item?id=37791116">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		<p>The configuration of Europe’s first exascale supercomputer, Jupiter, has been finalized, and it is a win for Nvidia and a disappointment for x86 chip vendors Intel and AMD. The Jupiter supercomputer, which will cost €273 million to build, will pair SiPearl’s Rhea processor, which is based on ARM architecture, with accelerator technology from Nvidia.</p>
<p>The supercomputer is being built by the European High-Performance Computing Joint Undertaking (EuroHPC JU) and a consortium including Eviden and ParTec. Eviden is an Atos business focusing on advanced computing initiatives that include HPC and AI.</p>
<p>The Jülich Supercomputing Centre, which is near Munich, will host the system. The installation will begin in early 2024.</p>
<p>Specifically, the supercomputer’s main compute cluster will be based on ARM CPUs, and the initial configuration does not include x86. Six of the top 10 supercomputers in the world are based on x86 chips, and only one is based on ARM.</p>
<p>That is a big disappointment for Intel, which last year announced it would invest €33 billion to build a new chip factory and fund research and development initiatives in Europe. Intel’s CEO Pat Gelsinger also met with EU leaders in a bid to get more business in the region.</p>
<p>Jülich’s fastest system, JUWELS, was last featured in the Top500 list in November 2021 and is currently ranked 13. The fastest supercomputers in Europe are the third-ranked Lumi in Finland, which delivers a peak performance of 309 petaflops, and the fourth-ranked Leonardo in Italy, which peaks at 239 petaflops.</p>
<p>Jupiter was first announced last year and is designed to be a modular system in which multiple types of accelerators can be plugged into the core system.</p>
<p>The supercomputer is being built by almost the same cast of characters, including Atos (now Eviden) and system integrator Partec, responsible for the 44-petaflop JUWELS supercomputer, which was installed in 2020 with AMD’s Epyc 7402 chip.</p>
<p>The Jupiter will instead have SiPearl’s ARM processor based on ARM’s Neoverse V1 CPU design. SiPearl has designed the Rhea chip to be universally compliant with many accelerators, and it supports high-bandwidth memory and DDR5 memory channels.</p>
<figure id="attachment_165009" aria-describedby="caption-attachment-165009"><img decoding="async" loading="lazy" src="https://www.hpcwire.com/wp-content/uploads/2023/10/SciPearl-Rhea-300x145.png" alt="SciPearl Rhea" width="277" height="134" srcset="https://www.hpcwire.com/wp-content/uploads/2023/10/SciPearl-Rhea-300x145.png 300w, https://www.hpcwire.com/wp-content/uploads/2023/10/SciPearl-Rhea-150x72.png 150w, https://www.hpcwire.com/wp-content/uploads/2023/10/SciPearl-Rhea.png 460w" sizes="(max-width: 277px) 100vw, 277px"><figcaption id="caption-attachment-165009">European Rhea processor designed to deliver fast real compute performance and efficiency with an unmatched Bytes/Flops ratio. Source: SiPearl</figcaption></figure>
<p>Jupiter will have Nvidia’s Booster Module, an integrated system that includes the company’s GPUs and Mellanox interconnects. SiPearl has been working with Nvidia to connect its CPUs with Nvidia GPUs.<br>
The current JUWELS Booster Module uses Nvidia’s A100 GPUs, and Jupiter could be upgraded to Nvidia’s H100 GPUs. Nvidia has not shared details of successors to H100, and Jupiter’s installation is due to begin in three months.</p>
<p>While Intel and AMD may be losers in the Jupiter deal, it does not preclude their chips from being used in the supercomputer. Jupiter’s modular design means that Jülich may opt to add GPUs, and less likely, CPUs, from those companies into modules that plug into the core compute system.</p>
<p>Intel worked extensively with SiPearl to bring OneAPI support for its Ponte Vecchio supercomputing GPUs to Rhea. SiPearl last year partnered with AMD to make Instinct GPUs compatible with Rhea chips.<br>
Jülich is also building out its machine-learning and quantum computing infrastructure, which the supercomputing center hopes to plug in as accelerator modules hosted at its facility.</p>
<p>ARM, which recently became a publicly listed company, will get a feather on its cap as it looks to break the dominance of x86 in supercomputing. The world’s second fastest supercomputer, Fugaku, installed at the Riken Center for Computational Science, is based on an ARM processor from Fujitsu.</p>
<p>Europe is striving for hardware independence with homegrown CPU designs, so the selection of Rhea CPUs for Jupiter shouldn’t come as a surprise.</p>
<p>SiPearl, based in France, started developing Rhea with seed funding from the European Processor Initiative, which wants to develop open-chip designs that cut reliance on foreign chip technologies. The EPI is focused heavily on chip design based on the open-source RISC-V architecture.<br>
SiPearl is a relatively new chip design company compared to the well-established Intel and AMD and is now under pressure to prove its chip will support the exaflop performance.</p>
<p>SiPearl chose ARM as it is well-established and ready for high-performance applications. Experts say RISC-V is many years away from mainstream server adoption. EuroHPC JU requested Jupiter suppliers to meet energy efficiency, performance, system stability, and programmability requirements.</p>
<p>Jupiter will run classic computing applications and is also designed for AI technologies such as large-language models. AI applications could involve creating simulations that hasten drug discovery or simulating weather problems to make predictions or solve problems related to climate change.</p>
<p>The exaflop performance is expected to be based on the LINPACK benchmark. Nvidia, Google, and others have released debatable supercomputing AI benchmarks, often reporting performance in excess of one exaflop.</p>
<p>Top500 in 2021 tested the mixed-precision HPL-AI (High-Performance LINPACK for Accelerator Introspection) benchmark, which propelled the total performance of ARM-based RIKEN to 2.0 exaflops, compared to 442 exaflops on conventional LINPACK measurements.</p>
<p>Jupiter is also a big step forward in the EU’s effort to achieve computing independence and reduce its reliance on proprietary tech.</p>
<p>The European Commission last month passed the European Chips Act, which opened €43 billion in public funding for manufacturing, next-generation semiconductor technology, and research.</p>
<p>The regulation specifically opens up €2 billion for HPC and €1.67 billion for artificial intelligence. The HPC allotment is related to procuring and building out the supercomputing and quantum infrastructure within the EU.</p>
<p>However, Europe is still behind the US, China, and Japan in the race to build the world’s fastest supercomputers.</p>
<p>The US is expected to host two exaflop supercomputers — Aurora at ORNL and El Capitan at the Lawrence Livermore National Laboratory — in the coming years, which will again put Europe behind. China has hinted that multiple exaflop supercomputers are already or expected to go online.</p>
<p>Europe’s second exascale supercomputer will be up and running in France by the end of 2025. EuroHPC JU announced in June that the supercomputer will be hosted and operated by the Jules Verne consortium, which includes French institutions GENCI (Grand Equipement National de Calcul Intensif), the CEA (the Alternative Energies and Atomic Energy Commission), and Dutch national supercomputing center SURF.</p>
<p>Jupiter’s total cost is €273 million, over half that of the original €500 million budget. About half of the cost of standing up Jupiter is funded by the EuroHPC JU, and the remaining amount is funded by the German Federal Ministry of Education and Research and the Ministry of Culture and Science of the State of North Rhine-Westphalia.</p>
							<div>
						<p><span>Tags:</span>
						<a href="https://www.hpcwire.com/tag/a100/" rel="tag">A100</a>, <a href="https://www.hpcwire.com/tag/arm/" rel="tag">ARM</a>, <a href="https://www.hpcwire.com/tag/aurora/" rel="tag">Aurora</a>, <a href="https://www.hpcwire.com/tag/cea/" rel="tag">CEA</a>, <a href="https://www.hpcwire.com/tag/el-capitan/" rel="tag">El Capitan</a>, <a href="https://www.hpcwire.com/tag/eu/" rel="tag">EU</a>, <a href="https://www.hpcwire.com/tag/eurohpc-ju/" rel="tag">EuroHPC JU</a>, <a href="https://www.hpcwire.com/tag/genci/" rel="tag">GENCI</a>, <a href="https://www.hpcwire.com/tag/h100/" rel="tag">H100</a>, <a href="https://www.hpcwire.com/tag/juwels/" rel="tag">JUWELS</a>, <a href="https://www.hpcwire.com/tag/lawrence-livermore-national-laboratory/" rel="tag">Lawrence Livermore National Laboratory</a>, <a href="https://www.hpcwire.com/tag/linpack/" rel="tag">LINPACK</a>, <a href="https://www.hpcwire.com/tag/neoverse/" rel="tag">Neoverse</a>, <a href="https://www.hpcwire.com/tag/oneapi/" rel="tag">OneAPI</a>, <a href="https://www.hpcwire.com/tag/ornl/" rel="tag">ORNL</a>, <a href="https://www.hpcwire.com/tag/ponte-vecchio/" rel="tag">Ponte Vecchio</a>, <a href="https://www.hpcwire.com/tag/rhea/" rel="tag">Rhea</a>, <a href="https://www.hpcwire.com/tag/riken/" rel="tag">RIKEN</a>, <a href="https://www.hpcwire.com/tag/risc-v/" rel="tag">RISC-V</a>, <a href="https://www.hpcwire.com/tag/surf/" rel="tag">SURF</a>, <a href="https://www.hpcwire.com/tag/top500/" rel="tag">TOP500</a>, <a href="https://www.hpcwire.com/tag/x86/" rel="tag">X86</a>					</p></div><!-- .entry-utility -->
			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Making Hard Things Easy (663 pts)]]></title>
            <link>https://jvns.ca/blog/2023/10/06/new-talk--making-hard-things-easy/</link>
            <guid>37791002</guid>
            <pubDate>Fri, 06 Oct 2023 14:09:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jvns.ca/blog/2023/10/06/new-talk--making-hard-things-easy/">https://jvns.ca/blog/2023/10/06/new-talk--making-hard-things-easy/</a>, See on <a href="https://news.ycombinator.com/item?id=37791002">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
     

<p>A few weeks ago I gave a keynote at <a href="https://www.thestrangeloop.com/">Strange Loop</a>
called Making Hard Things Easy. It’s about why I think some things are hard
to learn and ideas for how we can make them easier.</p>

<p>Here’s the video, as well as the slides and a transcript of (roughly) what I
said in the talk.</p>

<h3 id="the-video">the video</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/30YWsGDr8mA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>

<h3 id="the-transcript">the transcript</h3>



<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-0.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-0.png"></a>
</p>
<p>


Hello, Strange Loop! Strange Loop is one of the first places I
spoke almost 10 years ago and I'm so honored to be back here today for the
last one. Can we have one more round of applause for the organizers?


</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-1.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-1.png"></a>
</p>
<div>

<p>
I often give talks about things that I'm excited about,
or that I think are really fun.
</p>

<p>
But today, I want to talk about something that I'm a little bit mad about,
which is that sometimes things that seem like they should be basic take me 10
years or 20 years to learn, way longer than it seems like they should. 
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-2.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-2.png"></a>
</p>
<p>

One thing that took me a long time to learn was DNS, which is this question
of -- what's the IP address for a domain name like example.com?
This feels like it should be a straightforward thing.


</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-3.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-3.png"></a>
</p>
<p>

But seven years into learning DNS, I'd be setting up a website. And I'd feel
like things should be working. I thought I understood DNS. But then I'd run
into problems, like my domain name wouldn't work. And I'd wonder -- why not?
What's happening?

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-4.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-4.png"></a>
</p>
<div>

<p>
And sometimes this would feel kind of personal! This shouldn't be so hard
for me! I should understand this already. It's been seven years!
</p>


<p>
And this "it's just me" attitude is often encouraged -- when I write about
finding things hard to learn on the Internet, Internet strangers will sometimes
tell me: "yeah, this is easy! You should get it already! Maybe you're just not
very smart!"
</p>

<p>
But luckily I have a pretty big ego so I don't take the internet strangers too
seriously. And I have a lot of patience so I'm willing to keep coming back to a
topic I'm confused about. There were maybe four different things that were
going wrong with DNS in my life and eventually I figured them all out.
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-5.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-5.png"></a>
</p>
<div>

<p>
So, hooray! I understood DNS! I win! But then I see some of my friends struggling with
the exact same things.
</p>

<p>
They're wondering, hey, my DNS isn't working. Why not? 
</p>




</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-6.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-6.png"></a>
</p>
<div>
<p>
And it doesn't end. We're still having the same problems over and over and over
again. And it's frustrating! It feels redundant! It makes
me mad. Especially when friends take it personally, and they feel like "hey I
should really understand this already".
</p>

<p>
Because everyone is going through this. From the sounds of recognition I hear,
I think a lot of you have been through some of these same problems with DNS.
</p>
</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-7.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-7.png"></a>
</p>
<p>

I got so mad about this that I decided to make it my job. 
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-8.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-8.png"></a>
</p>
<div>

   <p>
   I started a little publishing company called Wizard Zines where --
   </p>
   
 <p>
 (applause)
 </p>
 
   <p>
   Wow. Where I write about some of these topics and try to demystify them.
   </p>
     
</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-9.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-9.png"></a>
</p>
<p>
     Here are a few of the zines I've published. I want to talk today about a
     few of these topics and what makes them so hard and how we can make them
     easier.
     
    
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-10.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-10.png"></a>
</p>
<p>
 We're going to talk about bash, HTTP, SQL, and DNS.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-11.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-11.png"></a>
</p>
<div>


<p>
 For each of them, we're
 going to talk a little bit about:
 </p>
   
 <p>
 a.  what's so hard about it? 
 </p>
   
 <p>
 b. what are some things we can do to make it a little bit easier for each other?
 </p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-12.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-12.png"></a>
</p>
<p>
   Let's start with Bash. 

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-13.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-13.png"></a>
</p>
<p>
What's so hard about it?
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-14.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-14.png"></a>
</p>
<p>
So, bash is a programming language, right?
But it's one of the weirdest programming languages that I work
with.


</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-15.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-15.png"></a>
</p>
<p>

To understand why it's weird, let's do a little small demo
of bash.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-16.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-16.png"></a>
</p>
<div>


<p>
First, let's run this script, <code>bad.sh</code>:
</p>

<pre>mv ./*.txt /tmmpp
echo "success!"
</pre>

   <p>
   This moves a file and prints "success!". And with most of the programming languages that I use, if there's a problem, the program will stop.
   </p>
   
 <p>
 [laughter from audience]
 </p>
 
 <p>
 
     But I think a lot of you know from maybe sad experience that bash does not
     stop, right? It keeps going. And going... and sometimes very bad things
     happen to your computer in the process. 
   </p>
   
 <p>
 When I run this program, here's the output:
 </p>
   
   <pre>mv: cannot stat './*.txt': No such file or directory
success!
</pre>

<p>
It didn't stop after the failed <code>mv</code>.
</p>
     
</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-17.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-17.png"></a>
</p>
<div>

<p>
Eventually I learned that you can write <code>set
-e</code> at the top of your program, and that will make bash stop if
there's a problem. 
</p>

<p>
When we run this new program with <code>set -e</code> at the top, here's the output:
</p>

<pre>mv: cannot stat './*.txt': No such file or directory
</pre>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-18.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-18.png"></a>
</p>
<p>
Great. We're happy. Everything is good. But every time I think I've learned
everything that go wrong with bash, I'll find out -- surprise! There are more
bad things that can happen! Let's look at another program as an example.
     
    </p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-19.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-19.png"></a>
</p>
<div>

<p>
Here we've put our code in a function. And if the function
fails, we want to echo "failed". 

</p>

<p>
So use <code>set -e</code> at the beginning, and you might think everything should be okay. 
</p>

<p>
But if we run it... this is the output we get
</p>

<pre>mv: cannot stat './*.txt': No such file or directory
success
</pre>

<p>
We get the "success" message again! It didn't stop, it just kept going. This is
because the "or" (<code>|| echo "failed"</code>) globally disables <code>set -e</code> in the
function.
</p>

<p>
Which is certainly not what I wanted, and not what I would expect. But this is
not a bug in bash, it's is the documented behavior.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-20.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-20.png"></a>
</p>
<div>

<p>
And I think one reason this is tricky is a lot of us don't use bash very often.
Maybe you write a bash script every six months and don't look at it again.
</p>

<p>
When you use a system very infrequently and it's full of a lot of weird trivia
and gotchas, it's hard to use the system correctly.
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-21.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-21.png"></a>
</p>
<p>

So how can we make this easier? What can we do about it?
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-22.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-22.png"></a>
</p>
<p>
One thing that I sometimes hear is -- a newcomer will say "this is hard",
and someone more experienced will say "Oh, yeah, it's impossible to use bash.
Nobody knows how to use it."



</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-23.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-23.png"></a>
</p>
<div>

<p>
But I would say this is factually untrue. How many of you are using bash?
</p>

<p>
A lot of us ARE using it! And it doesn't always work perfectly, but often
it gets the job done.
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-24.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-24.png"></a>
</p>
<p>

We have a lot of bash programs that are mostly working, and there's a big
community of us who are using bash mostly successfully despite all the
problems.

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-25.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-25.png"></a>
</p>
<div>

<p>
The way I think this is --  you have some people on the left in this
diagram who are confused about bash, who think it seems awful and
incomprehensible.
</p>

<p>
And some people on the right who know how to make the bash work for them,
mostly.
</p>

<p>
So how do we move people from the left to the right, from being overwhelmed by
a pile of impossible gotchas to being able to mostly use the system correctly?
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-26.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-26.png"></a>
</p>
<p>

Well, bash has a giant pile of trivia to remember. But who's good at remembering
giant piles of trivia?
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-27.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-27.png"></a>
</p>
<p>

Not me! I can't memorize all of the weird things about bash. But computers!
Computers are great at memorizing trivia!

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-28.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-28.png"></a>
</p>
<div>

<p>
And for bash, we have this incredible tool called
shellcheck.
</p>

<p>
[ Applause ]
</p>

<p>
Yes! Shellcheck is amazing! And shellcheck knows a lot of things that can go
wrong and can tell you "oh no, you don't want to do that. You're going to have
a bad time."
</p>

<p>
I'm very grateful for shellcheck, it makes it much easier for me to write
tiny bash scripts from time to time. 
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-29.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-29.png"></a>
</p>
<div>

<p>
Now let's do a shellcheck demo! 
</p>

<pre>$ shellcheck -o all bad-again.sh
In bad-again.sh line 7:
f || echo "failed!"
^-- SC2310 (info): This function is invoked in an || condition so set -e will be disabled. Invoke separately if failures should cause the script to exit.
</pre>

<p>
Shellcheck gives us this
lovely error message. The message isn't completely obvious on its own (and this
check is only run if you invoke shellcheck with <code>-o all</code>). But
shellcheck tells you "hey, there's this problem, maybe you should be worried
about that".
</p>

<p>
And I think it's wonderful that all these tips live in this linter. 
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-30.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-30.png"></a>
</p>
<div>

<p>
I'm not trying to tell you to write linters, though I think that some of you
probably will write linters because this is that kind of crowd.
</p>

<p>
I've personally never written a linter, and I'm definitely not going to create
something as cool as shellcheck!
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-31.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-31.png"></a>
</p>
<div>

<p>
But instead, the way I write linters is I tell people about shellcheck from
time to time and then I feel a little like I invented shellcheck for those
people. Because some people didn't know about the tool until I told them about
it!
</p>

<p>
I didn't find out about shellcheck for a long time and I was kind of mad about
it when I found out. I felt like -- excuse me? I could have been using
shellcheck this whole time? I didn't need to remember all of this stuff in
my brain?
</p>

<p>
So I think an incredible thing we can do is to reflect on the tools that we're
using to reduce our cognitive load and all the things that we can't fit into
our minds, and make sure our friends or coworkers know about them.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-32.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-32.png"></a>
</p>
<p>
I also like to warn people about gotchas and some of the terrible things
computers have done to me.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-33.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-33.png"></a>
</p>
<div>

<p>
I think this is an incredibly valuable community service. The example I shared
about how <code>set -e</code> got disabled is something I learned from my
friend Jesse a few weeks ago. 
</p>

<p>
They told me how this thing happened to them, and now I know and I don't have
to go through it personally.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-34.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-34.png"></a>
</p>
<div>

<p>
One way I see people kind of trying to share terrible things that their
computers have done to them is by sharing "best practices".
</p>

<p>
But I really love to hear the stories behind the best practices!
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-35.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-35.png"></a>
</p>
<div>


<p>
If someone has
a strong opinion like "nobody should ever use bash", I want to hear about the
story! What did bash do to you? I need to know.
</p>

<p>
The reason I prefer stories to best practices is if I know the story about how
the bash hurt you, I can take that information and decide for myself how I want
to proceed.
</p>

<p>
Maybe I feel like -- the computer did that to you? That's okay, I can deal with
that problem, I don't mind.
</p>

<p>
Or I might instead feel like "oh no, I'm going to do the best practice you
recommended, because I do not want that thing to happen to me". 
</p>

<p>
These bash stories are a great example of that: my reaction to them is "okay,
I'm going to keep using bash, I'll just use shellcheck and keep my bash scripts
pretty simple". But other people see them and decide "wow, I never want to use
bash for anything, that's awful, I hate it".
</p>

<p>
Different people have different reactions to the same stories and that's okay.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-36.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-36.png"></a>
</p>
<p>
That's all for bash. Next up we're gonna talk about HTTP. 
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-37.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-37.png"></a>
</p>

</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-38.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-38.png"></a>
</p>
<div>

<p>
I was talking to Marco Rogers at some point, many years ago, and he mentioned
some new developers he was working with were struggling with HTTP.
</p>

<p>
And at first, I was a little confused about this -- I didn't understand what
was hard about HTTP.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-39.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-39.png"></a>
</p>
<div>

<p>
The way I was thinking about it
at the time was that if you have an HTTP response, it has a few parts: a response
code, some headers, and a body.
</p>


<p>
I felt like -- that's a pretty simple structure, what's the problem? But of
course there was a problem, I just couldn't see what it was at first.
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-40.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-40.png"></a>
</p>
<div>

<p>
So, I talked to a friend who was newer to HTTP. And they asked "why does it
matter what headers you set?"
</p>

<p>
And I said: "well, the browser..."
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-41.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-41.png"></a>
</p>
<p>
But then I thought... the browser?
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-42.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-42.png"></a>
</p>
<p>
the browser?
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-43.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-43.png"></a>
</p>
<div>

<p>
The browser!
</p>

<p>
Firefox is 20 million lines of code! It's been
evolving since the '90s. There have been as I understand it, 1 million
changes to the browser security model as people have discovered new and
exciting exploits and the web has become a scarier and scarier place.
</p>

<p>
The browser is really a lot to understand.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-44.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-44.png"></a>
</p>
<div>



<p>
One trick for understanding why a topic is hard is -- if the implementation if the
thing involves 20 million lines of code, maybe that's why people are confused!
</p>

<p>
Though that 20 million lines of code also involves CSS and JS and many other
things that aren't HTTP, but still.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-45.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-45.png"></a>
</p>
<div>

<p>
Once I thought of it in terms of how complex a modern web browser is, it
made so much more sense! Of course newcomers are confused about HTTP if you
have to understand what the browser is doing!
</p>

<p>
Then my problem changed from "why is this hard?" to "how do I explain this at all?"
</p>

<p>
So how do we make it easier? How do we wrap our minds around this 20 million lines
of code?
</p>



</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-46.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-46.png"></a>
</p>
<p>
One way I think about this for HTTP is: here are some of the HTTP request
headers. That's kind of a big list there are 43 headers there.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-47.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-47.png"></a>
</p>
<p>
There are more unofficial headers too.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-48.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-48.png"></a>
</p>
<div>

<p>
My brain does not contain all of those headers, I have no idea what most of
them are.
</p>

<p>
When I think about trying to explain big topics, I think about -- what is
actually in my brain, which only contains a normal human number of things?
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-49.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-49.png"></a>
</p>
<div>


<p>
This is <a href="https://wizardzines.com/comics/request-headers/">a comic I drew about HTTP request headers</a>.
You don't have to read the whole thing. This has 15
request headers.
</p>

<p>
I wrote that these are "the most important headers", but what I mean by "most
important" here is that these are the ones that I know about and use. It's a
subjective list.
</p>

<p>
I wrote about 12 words about each one, which I think is approximately the
amount of information about each header that lives in my mind.
</p>

<p>
For example I know that you can set <code>Accept-Encoding</code> to <code>gzip</code>
and then you might get back a compressed response. That's all I know,
and that's usually all I need to know!
</p>

<p>
This very small set of information is working pretty well for me.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-50.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-50.png"></a>
</p>
<div>


<p>
The general way I think about this trick is "turn a big list into a small list".
</p>

<p>
Turn the set of EVERY SINGLE THING into just the things I've personally used. I
find it helps a lot.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-51.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-51.png"></a>
</p>
<div>


<p>
Another example of this "turn a big list into a small list" trick is command line arguments.
</p>

<p>
I use a lot of command line tools, the number of arguments they have can be
overwhelming, and I've written about them <a href="https://wizardzines.com/zines/bite-size-command-line/">a fair amount</a> over
the years.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-52.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-52.png"></a>
</p>
<p>
Here are all the flags for grep, from its man page. That's too much! I've been
using grep for 20 years but I don't know what all that stuff is.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-53.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-53.png"></a>
</p>
<div>

<p>
But when I look at the grep man page, this is what I see.
</p>


<p>
I think it's very helpful to newcomers when a more experienced person says
"look, I've been using this system for a while, I know about 7 things about it,
and here's what they are".
</p>

<p>
We're just pruning those lists down to a more human scale. And it can even help
other more experienced people -- often someone else will know a slightly
different set of 7 things from me.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-54.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-54.png"></a>
</p>
<div>

<p>
But what about the stuff that doesn't fit in my brain?
</p>

<p>
Because I have a few things about HTTP stored in my brain. But sometimes I need
other information which is hard to remember, like maybe the exact details of
how CORS works.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-55.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-55.png"></a>
</p>
<p>

And so, that's where we come to references. Where do we find the information
that we can't remember?

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-56.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-56.png"></a>
</p>
<div>

<p>
I often have trouble finding the right references.
</p>

<p>
For example I've been trying to learn CSS off and on for 20 years. I've made a
lot of progress -- it's going well!
</p>

<p>
But only in the last 2 years or so I learned about this wonderful website called 
<a href="https://css-tricks.com/">CSS Tricks</a>.
</p>

<p>
And I felt kind of mad when I learned about CSS Tricks! Why didn't I know about
this before? It would have helped me!
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-57.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-57.png"></a>
</p>
<div>


<p>
But anyway, I'm happy to know about CSS Tricks now. (though sadly they seem to
have stopped publishing in April after the acquisition, I'm still happy the older posts are there)
</p>

<p>
For HTTP, I think a lot of us use the Mozilla Developer Network. 
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-58.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-58.png"></a>
</p>
<div>


<p>
Another HTTP reference I love is the official RFC, <a href="https://www.rfc-editor.org/rfc/rfc9110">RFC 9110</a> (also
<a href="https://www.rfc-editor.org/rfc/rfc9111">9111</a>,
<a href="https://www.rfc-editor.org/rfc/rfc9112">9112</a>,
<a href="https://www.rfc-editor.org/rfc/rfc9113">9113</a>,
<a href="https://www.rfc-editor.org/rfc/rfc9114">9114</a>)
</p>

<p>
It's a new authoritative reference for HTTP and it was written just last
year, in 2022! They decided to organize all the information really nicely. So if you
want to know exactly what the <code>Connection</code> header does, you can look
it up. 
</p>

<p>
This is not really my top reference. I'm usually on MDN. But I really
appreciate that it's available.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-59.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-59.png"></a>
</p>
<p>
So I love to share my favorite references.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-60.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-60.png"></a>
</p>
<div>

<p>
I do sometimes find it tempting to kind of lie about references. Not on
purpose.
But I'll see something on the internet, and I'll think it's kind of cool, and
tell a friend about. But then my friend might ask me -- "when have you used this?"
And I'll have to admit "oh, never, I just thought it seemed cool".
</p>

<p>
I think it's important to be honest about what the references that I'm actually
using in real life are. Even if maybe the real references I use are a little
"embarrassing", like maybe w3schools or something.
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-61.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-61.png"></a>
</p>
<p>

So that's HTTP! Next we're going to talk about SQL.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-62.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-62.png"></a>
</p>
<p>
The case of the mysterious execution order.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-63.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-63.png"></a>
</p>
<div>

<p>
I started thinking about SQL because someone mentioned they're trying to learn
SQL. I get most of my zine ideas that way, one person will make an offhand
comment and I'll decide "ok, I'm going to spend 4 months writing about
that". It's a weird process.
</p>

<p>
So I was wondering -- what's hard about SQL? What gets in the way of trying
to learn that?
</p>

<p>
I want to say that when I'm confused about what's hard about something, that's
a fact about me. It's not usually that the thing is easy, it's that I need to
work on understanding what's hard about it. It's easy to forget when you've
been using something for a while.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-64.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-64.png"></a>
</p>
<p>
So, I was used to reading SQL queries. For example this made up query that tries to
find people who own exactly two cats. It felt straightforward
to me, SELECT,
FROM, WHERE, GROUP BY.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-65.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-65.png"></a>
</p>
<div>

<p>
But then I was talking to a friend about these queries who was new to SQL. And
my friend asked -- what is this doing?
</p>

<p>
I thought, hmm, fair point.
</p>



</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-66.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-66.png"></a>
</p>
<p>
And I think the point my friend was making was that the order that this SQL
query is written in, is not the order that it actually happens in. It happens
in a different order, and it's not immediately obvious what that is.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-67.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-67.png"></a>
</p>
<p>

So how do we make this easier?
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-68.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-68.png"></a>
</p>
<div>


<p>
I like to think about: what does the computer do first?
What actually happens first chronologically?
</p>

<p>
Computers actually do live in the same timeline as us. Things happen. Things
happen in an order. So what happens first?
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-69.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-69.png"></a>
</p>

</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-70.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-70.png"></a>
</p>
<p>

The way I think about an SQL query is: is you start with a table like
<code>cats</code>.

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-71.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-71.png"></a>
</p>
<p>

Then maybe you filter it, you remove some stuff. 
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-72.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-72.png"></a>
</p>
<p>

Then you make some groups.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-73.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-73.png"></a>
</p>
<p>

Then you filter the groups, remove some of them.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-74.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-74.png"></a>
</p>
<p>

Then you do some
aggregation. There's two things in each group.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-75.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-75.png"></a>
</p>
<p>

And you sort it.

And you
can also limit the results.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-76.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-76.png"></a>
</p>
<div>


<p>
So, that's how I think about SQL. The way a query runs is first
FROM, then WHERE, GROUP BY, HAVING, SELECT, ORDER BY, LIMIT.
</p>

<p>
At least conceptually. Real life databases have optimizations and it's more
complicated than that. But this is the mental model that I use most of the time
and it works for me. Everything is in the same order as you write it,
except SELECT is fifth. 
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-77.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-77.png"></a>
</p>
<p>

I've really gotten a lot out of this trick where you try to tell the
chronological story of what the computer is doing. I want to talk about a
couple other examples.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-78.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-78.png"></a>
</p>
<div>


<p>
One is CORS, in HTTP. 
</p>

<p>
This <a href="https://wizardzines.com/comics/cors/">comic</a> is way too small to read on the slide.
But the idea is if you're making a cross-origin request in your
browser, you can write down every communication that's happening between your
browser and the server, in chronological order.
</p>

<p>
And I think writing down everything in chronological order makes it a lot easier to understand and more concrete.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-79.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-79.png"></a>
</p>
<div>


<p>
"What happens in chronological order?" is a very
straightforward structure, which is what I like about it. "What happens first?"
feels like it should be easy to answer. But it's not!
</p>

<p>
I've found that it's actually very hard to know what our computers is
doing, and it's a really fun question to explore.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-80.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-80.png"></a>
</p>
<div>


<p>
As an example of how this is hard: I wrote a blog post recently called 
<a href="https://jvns.ca/blog/2023/08/03/behind--hello-world/">"Behind Hello World on Linux"</a>. It's about what happens when you run "hello world" on a
Linux computer. I wrote a bunch about it, and I was really happy with it.
</p>

<p>
But after I wrote the post, I thought -- haven't I written about this before? Maybe 10 years ago?
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-81.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-81.png"></a>
</p>
<div>

<p>
And sure enough, I'd tried to write <a href="https://jvns.ca/blog/2013/11/29/what-happens-when-you-run-a-unix-program/">
a similar post</a> 10 years before.
</p>

<p>
I think this is really cool. Because the 2013 version of this post was about 6
times shorter. This isn't because Linux is more complicated than it was 10
years ago -- I think everything in the 2023 post was probably also true in
2013. The 2013 post just has a lot less information in it.
</p>

<p>
The reason the 2023 post is longer is that I didn't know what was happening
chronologically on my computer in 2013 very well, and in 2023 I know a lot
more. Maybe in 2033 I'll know even more!
</p>

<p>
I think a lot of us -- like me in 2013 and honestly me now, often don't know
the facts of what's happening on our computers. It's very hard, which is what
makes it such a fun question to try and discuss.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-82.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-82.png"></a>
</p>
<div>



<p>
I think it's cool that all of us
have different knowledge about what is happening chronologically on our
computers and we can all chip in to this conversation.
</p>

<p>
For example when I posted this blog post about Hello World on Linux, some people
mentioned that they had a lot of thoughts about what happens exactly in your
terminal, or more details about the filesystem, or about what's happening
internally in the Python interpreter, or any number of things. You can go
really deep.
</p>

<p>
I think it's just a really fun collaborative question. 
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-83.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-83.png"></a>
</p>
<div>

<p>
I've seen "what happens chronologically?" work really well as an activity with
coworkers, where you're ask: "when a request comes into this API endpoint we
run, how does that work? What happens?"
</p>

<p>
What I've seen is that someone will understand some part of the system, like "X
happens, then Y happens, then it goes over to the database and I have no idea
how that works".  And then someone else can chime in and say "ah, yes, with the
database A B C happens, but then there's a queue and I don't know about that".
</p>

<p>
I think it's really fun to get together with people who have different
specializations and try to make these little timelines of what the
computers are doing. I've learned a lot from doing that with people.
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-84.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-84.png"></a>
</p>
<p>
That's all for SQL.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-85.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-85.png"></a>
</p>
<p>

So, now we've arrived at DNS which is
where we started the talk.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-86.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-86.png"></a>
</p>
<div>



<p>
Even though I struggled with DNS. Once I got figured it out, I felt like "dude,
this is easy!". Even though it just took me 10 years to learn how it
works.
</p>

<p>
But of course, DNS was pretty hard for me to learn. So -- why is that? Why did
it take me so long?
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-87.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-87.png"></a>
</p>
<div>


<p>
So, I have a little <a href="https://wizardzines.com/comics/cast-of-characters/">chart</a> here of how I think about DNS.
</p>

<p>
You have your browser on the left. And over on the right there's the authoritative
nameservers, the source of truth of where the DNS records for a domain live. 
</p>

<p>
In the middle, there's a function that you call and a cache.
So you have browser, function, cache, source of truth.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-88.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-88.png"></a>
</p>
<div>

<p>
One problem is that there are a lot of things in this diagram that are
totally hidden from you.
</p>

<p>
The library code that you're using where you make a DNS request -- there are a
lot of different libraries you could be using, and it's not straightforward to figure out which one is being used.
That was the source of some of my confusion.
</p>

<p>
There's a cache which has a bunch of cached data. That's invisible to you, you
can't inspect it easily and you have no control over it. that
</p>

<p>
And there's a conversation between the cache and the source of
truth, these two red arrows which also you can't see at all.
</p>

<p>
So this is kind of tough! How are you supposed to develop an intuition for a
system when it's mostly things that are completely hidden from you? Feels like
a lot to expect.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-89.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-89.png"></a>
</p>
<p>

So, what do we do about this?
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-90.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-90.png"></a>
</p>
<div>


<p>
So: let's talk about these red arrows
on the right.
</p>

<p>
We have our cache and then we have the source of truth. This conversation
is normally hidden from you because you often don't control either of these
servers. Usually they're too busy doing high-performance computing to report to
you what they're doing.
</p>

<p>
But I thought: anyone can write an authoritative nameserver!
In particular, I could write one that reports back every single message that it receives to its users.
So, with my friend <a href="https://marieflanagan.com/">Marie</a>, we wrote a little DNS server.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-91.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-91.png"></a>
</p>
<div>

<p>
(demo of <a href="https://messwithdns.net/">messwithdns.net</a>)
</p>

<p>
This is called Mess With DNS. The idea is I have a domain name and you
can do whatever you want with it. We're going to make a DNS record called
<code>strangeloop</code>, and we're going to make a CNAME record pointing at
<code>orange.jvns.ca</code>, which is just a picture of an orange. Because I
like oranges.
</p>

<p>
And then over here, every time a request comes in from a resolver, this will --
this will report back what happened. So, if we click on this link, we can see
-- a Canadian DNS resolver, which is apparently what my browser is configured
to use, is requesting an IPv4 record and an IPv6 record, A and AAAA.
</p><p>


(at this point in the demo everyone in the audience starts visiting the link
and it gets a bit chaotic, it's very funny)

</p></div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-93.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-93.png"></a>
</p>
<p>
So the trick here is to find ways to show people parts of what the computer is
doing that are normally hidden.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-94.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-94.png"></a>
</p>
<div>

<p>
Another great example of showing things that are hidden is this website called <a href="https://float.exposed/0x4d000006">float.exposed</a>
by <a href="https://ciechanow.ski/">Bartosz Ciechanowski</a> who makes a lot of incredible visualizations.
</p>

<p>
So if you look at <a href="https://float.exposed/0x4b800000">this 32-bit
floating point number</a> and click the "up" button on the significand, it'll
show you the next floating point number, which is 2 more. And then as you make
the number bigger and bigger (by increasing the exponent), you can see that the
floating point numbers get further and further apart.
</p>

<p>
Anyway, this is not a talk about floating point. I could do an entire talk
about this site and how we can use it to see how floating point works, but
that's not this talk.
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-95.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-95.png"></a>
</p>
<div>

<p>
Another thing that makes DNS confusing is that it's a giant distributed system
-- maybe you're confused because there are 5 million computers involved (really, more!).
Most of which you have no control over, and some
are doing not what they're supposed to do. 
</p>

<p>
So that's another trick for understanding why things are hard, check to see if
there are actually 5 million computers involved.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-96.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-96.png"></a>
</p>
<div>

<p>
So what else is hard about DNS?
</p>

<p>
We've talked about how most of the system is hidden from you, and about how
it's a big distributed system.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-97.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-97.png"></a>
</p>
<p>

One problem I've run into is that the tools are confusing.

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-98.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-98.png"></a>
</p>
<div>

<p>
One of the hidden things I talked about was: the resolver has cached data,
right? And you might be curious about whether a certain domain name is cached
or not by your resolver right now.
</p>

<p>
Just to understand what's happening:  am I getting this result because it was
cached? What's the deal?
</p>

<p>

I said this was hidden, but there are a couple of ways to query a resolver to
see what it has cached, and I want to show you one of them.

</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-99.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-99.png"></a>
</p>
<div><p>

The tool I usually use for making DNS queries is called <code>dig</code>, and
it has a flag called <code>+norecurse</code>. You can use it to query a
resolver and ask it to only return results it already has cached.

</p><p>
With <code>dig +norecurse jvns.ca</code>, I'm kind of asking -- how popular is my website? Is it popular enough that someone has visited it in the last 5 minutes?
Because my records are not cached for that long, only for 5 minutes.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-100.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-100.png"></a>
</p>
<div>


<p>
But when I look at this
response, I feel like "please! What is all this?"
</p>

<p>
And when I show newcomers this output, they often respond by saying "wow,
that's complicated, this DNS thing must be really complicated". But really this
is just not a great output format, I think someone just made some relatively
arbitrary choices about how to print this stuff out in the 90s and it's stayed
that way ever since.
</p>

<p>
So a bad output format can mislead newcomers into thinking that something is more complicated than it actually is.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-101.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-101.png"></a>
</p>
<p>

What can we do about confusing output like this?

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-102.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-102.png"></a>
</p>
<div>

<p>
One of my favorite tricks, I call eraser eyes.
</p>

<p>
Because when I look at that output, I'm not looking at all of it, I'm just
looking at a few things. My eyes are ignoring the rest of it.
</p>
</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-103.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-103.png"></a>
</p>
<div>

<p>
When I look at the output, this is what I see: it says <code>SERVFAIL</code>.
That's the DNS response code.
</p>


<p>
Which as I understand it is a very unintuitive way of it saying, "I do not have
that in my cache". So nobody has asked that resolver about my domain name in
the last 5 minutes, which isn't very surprising.
</p>

<p>
I've learned so much from people doing a little demo of a tool, and showing how
they use it and which parts of the output or UI they pay attention to, and which parts they ignore.
</p>

<p>
Becuase usually we ignore most of what's on our screens!
</p>

<p>
I really love to use <code>dig</code> even though it's a little hairy because
it has a lot of features (I don't know of another DNS debugging that supports this
<code>+norecurse</code> trick), it's everywhere, and it hasn't changed in a
long time. And I know if I learn its weird output format once I can know that
forever. Stability is really valuable to me.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-104.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-104.png"></a>
</p>
<p>

So we've talked about these four technologies. Let's talk a little more about
how we can make things easier for each other.

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-105.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-105.png"></a>
</p>
<p>



What can we do to move folks from "I really don't get it" to "okay, I can
mostly deal with this, at least 90% of the time, it's fine"? For bash or HTTP or DNS or anything else.

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-106.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-106.png"></a>
</p>
<div>


<p>
We've talked about some tricks I use to bring people over, like:
</p>

<ul>
<li> sharing useful tools </li>
<li> sharing references</li>
<li>telling a chronological story of what happens on your computer</li>
<li>turning a big list into a small list of the things you actually use</li>
<li>showing the hidden things</li>
<li>demoing a confusing tool and telling folks which parts I pay attention to</li>
</ul>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-107.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-107.png"></a>
</p>
<div>

<p>

When I practiced this talk, I got some feedback from people saying "julia! I don't
do those things! I don't have a blog, and I'm not going to start one!"

</p>

<p>
And it's true that most people are probably not going to start programming blogs.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-108.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-108.png"></a>
</p>
<p>
But I really don't think you need to have a public presence on the internet to
tell the people around you a little bit about how you use computers and how you
understand them.
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-109.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-109.png"></a>
</p>
<div>


<p>
My experience is that a lot of people (who do not have blogs!) have helped me
understand how computers work and have
shared little pieces of their experience with computers with me.
</p>

<p>
I've learned a lot from my friends and my coworkers and honestly a lot of
random strangers on the Internet too. I'm pretty sure some of you here today
have helped me over the years, maybe on Twitter or Mastodon.
</p>

<p>
So I want to talk about some archetypes of helpful people
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-110.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-110.png"></a>
</p>
<div>

<p>
One kind of person who has really helped me is the
grumpy old-timer. I'll say "this is so cool". And they'll reply yes,
however, let me tell you some stories of how this has gone wrong in my life.
</p>


<p>
And those stories have sometimes helped spare me some suffering.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-111.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-111.png"></a>
</p>
<div>

<p>
We have the loud newbie, who asks questions like "wait, how does that work?"
And then everyone else feels relieved -- "oh, thank god. It's not just me."
</p>

<p>
I think it's especially valuable when the person who takes the "loud newbie"
role is actually a pretty senior developer. Because when you're more secure in
your position, it's easier to put yourself out there and say "uh, I don't get
this" because nobody is going to judge you for that and think you're
incompetent.
</p>

<p>
And then other people who feel more like they might be judged for not knowing
something can ride along on your coattails.
</p>


</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-112.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-112.png"></a>
</p>
<div>

<p>
Then we have the bug chronicler. Who decides "ok, that bug. This can never happen again".
</p>

<p>
"I'm gonna make sure we understand what happened. Because I want this to end
now."
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-113.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-113.png"></a>
</p>
<p>

We have the tool builder, whose attitude is more like "I see people struggling
with something, and I don't feel like explaining it. But I can write code to
just make it easier permanently for everyone."

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-114.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-114.png"></a>
</p>
<p>

There's this "today I learned" person who's into sharing cool new tools they
learned about, a bug that they ran into, or a great new-to-them library feature.

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-115.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-115.png"></a>
</p>
<p>

There's the person who has read the entire Internet and has 700 tabs open. If you
want to know where to find something, there's a good chance they already have
it open in their browser.


</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-116.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-116.png"></a>
</p>
<p>

We have the person who is just willing to answer questions! "Yeah, I can tell
you how that works!"
</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-117.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-117.png"></a>
</p>
<p>

And at the end of all this, sometimes you have someone who likes to write some
things down so that other people can read it and can find it later.


</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-118.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-118.png"></a>
</p>
<p>

But all of us have different roles and we need to work together. I'm into
writing but a lof of the stuff I've written about, I only know about because
someone told me about it or explained it to me.

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-119.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-119.png"></a>
</p>
<p>

To end: the one thing I would like to convince you of is: if you're struggling
with something that feels basic, it's not just you! You're not alone. We're all struggling with a
lot of these things that feel like they should be "basic".


</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-120.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-120.png"></a>
</p>
<p>

And we're struggling with these things for a lot of
the same reasons as each other. 


</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-123.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-123.png"></a>
</p>
<div>

<p>
And much like when debugging a computer program, when you have a bug, you
want to understand why the bug is happening if you're gonna fix it.
</p>

<p>
If we're all struggling with the same things together for the same reasons, if
we can figure out what those reasons are, we can do a better job of fixing
them.
</p>

</div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-121.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-121.png"></a>
</p>
<div><p>

Some of the reasons we've talked about were:

</p><ul>
<li>
a giant pile of trivia and gotchas.
</li>
<li>
or maybe there's 20 million lines of code somewhere.
</li>
<li>
Maybe a big part of the system is being hidden from you.
</li>
<li>
Maybe the tool's output is extremely confusing and no UI designer has ever worked on improving it
</li>
</ul><p>

And there are a lot more reasons.

</p></div>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-124.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-124.png"></a>
</p>
<p>

I don't have all the answers for why things are hard. For example I don't really understand why Git is hard, that's something I've been thinking about recently.

</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-125.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-125.png"></a>
</p>
<p>

But that's something I'm excited to keep
working on and keep trying to figure out.


</p>
</div>

<div>
<p><a href="https://jvns.ca/images/strangeloop-2023-talk/slide-126.png"><img src="https://jvns.ca/images/strangeloop-2023-talk/slide-small-126.png"></a>
</p>
<div>

<p>
And that's all I have for you. Thank you.
</p>

<p>
I brought some zines to the conference, if you come to the signing later on you can get one.
</p>

</div>
</div>

<h3 id="some-thanks">some thanks</h3>

<p>This was the last ever Strange Loop and I’m really grateful to Alex Miller and the
whole organizing team for making such an incredible conference for so many years. Strange Loop
accepted one of my first talks (<a href="https://www.youtube.com/watch?v=0IQlpFWTFbM">you can be a kernel hacker</a>) 9 years ago when I had
almost no track record as a speaker so I owe a lot to them.</p>

<p>Thanks to Sumana for coming up with the idea for this talk, and to Marie,
Danie, Kamal, Alyssa, and Maya for listening to rough drafts of it and helping
make it better, and to Dolly, Jesse, and Marco for some of the conversations I
mentioned.</p>

<p>Also after the conference Nick Fagerland wrote a nice post with thoughts on <a href="https://roadrunnertwice.dreamwidth.org/596185.html">why git is hard</a> in response to my “I
don’t know why git is hard” comment and I really appreciated it. It had some
new-to-me ideas and I’d love to read more analyses like that.</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Thread-per-core (245 pts)]]></title>
            <link>https://without.boats/blog/thread-per-core/</link>
            <guid>37790745</guid>
            <pubDate>Fri, 06 Oct 2023 13:47:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://without.boats/blog/thread-per-core/">https://without.boats/blog/thread-per-core/</a>, See on <a href="https://news.ycombinator.com/item?id=37790745">Hacker News</a></p>
<div id="readability-page-1" class="page"><section><p>I want to address a controversy that has gripped the Rust community for the past year or so: the
choice by the prominent async “runtimes” to default to multi-threaded executors that perform
work-stealing to balance work dynamically among their many tasks. Some Rust users are
<a href="https://maciej.codes/2022-06-09-local-async.html">unhappy</a> with this decision, so unhappy that they use language I would characterize as
melodramatic:</p><blockquote><p>The Original Sin of Rust async programming is making it multi-threaded by default. If premature
optimization is the root of all evil, this is the mother of all premature optimizations, and it
curses all your code with the unholy <code>Send + 'static</code>, or worse yet <code>Send + Sync + 'static</code>, which
just <em>kills all the joy of actually writing Rust</em>.</p></blockquote><p>It’s always off-putting to me that claims written this way can be taken seriously as a technical
criticism, but our industry is rather unserious.</p><p>What these people advocate instead is an alternative architecture that they call “thread-per-core.”
They promise that this architecture will be simultaneously more performant and easier to implement.
In my view, the truth is that it may be one or the other, but not both.</p><p><em>(Side note: Some people prefer instead just running single threaded servers, claiming that they are
“IO bound” anyway. What they mean by IO bound is actually that their system doesn’t use enough work
to saturate a single core when written in Rust: if that’s the case, of course write a single
threaded system. We are assuming here that you want to write a system that uses more than one core
of CPU time.)</em></p><h2 id="thread-per-core">Thread-per-core</h2><p>One of the biggest problems with “thread-per-core” is the name of it. All of the multi-threaded
executors that users are railing against are also thread-per-core, in the sense that they create an
OS thread per core and then schedule a variable number of tasks (expected to be far greater than the
number of cores) over those threads. As Pekka Enberg <a href="https://twitter.com/penberg/status/1705484076054904922">tweeted</a> in response to a
comment I made about thread per core:</p><blockquote><p>Thread per core combines three big ideas: (1) concurrency should be handled in userspace instead
of using expensive kernel threads, (2) I/O should be asynchronous to avoid blocking per-core
threads, and (3) data is partitioned between CPU cores to eliminate synchronization cost and data
movement between CPU caches. It’s hard to build high throughput systems without (1) and (2), but
(3) is probably only needed on really large multicore machines.</p></blockquote><p>Enberg’s <a href="https://penberg.org/papers/tpc-ancs19.pdf">paper</a> on performance, which is called “The Impact of Thread-Per-Core
Architecture on Application Tail Latency” (and which I will return to in a moment), is the origin of
the use of the term “thread-per-core” in the Rust community. His understanding of the definition of
thread-per-core is probably relevant here. He enumerates three different features of a
thread-per-core architecture, of which he says only two are absolutely required for high
throughput. This is helpful, because the dispute is really only about the third point, not the first
two; if you are using async Rust, you are meeting both of those requirements.</p><p>The distinction being made is really between two optimizations you can make once you have a
thread-per-core architecture, and which are in tension: work-stealing tasks between your threads and
sharing as little state as possible between them.</p><h2 id="work-stealing">Work-stealing</h2><p>The point of work-stealing is to improve tail latency by ensuring that every thread always has work
to do.</p><p>A problem that emerges in real systems is that different tasks end up requiring different amounts
of work. For example, one HTTP request may require far more work to serve than another HTTP request.
As a result, even if you try to balance work up front among your different threads, they can each
end up performing different amounts of work because of unpredictable differences between the tasks.</p><p>Under maximum load, this means that some threads will be scheduled more work than they can perform,
while other threads will sit idle. The degree to which this is a problem depends on the degree to
which the amount of work performed by different tasks differs. Work-stealing is a mitigation to this
problem: threads with nothing to do “steal” work from the other threads that have too much work, so
that they do not sit idle. tokio, async-std, and smol all implement work-stealing with the goal of
reducing tail latency and improving CPU utilization.</p><p>The problem with work-stealing is that it means a task can run on one thread, pause, and then be
started again on another thread: that’s what it means for the work to be stolen. This means that any
state that is used across a yield point in that task needs to be thread-safe. This appears in Rust’s
APIs as futures needing to be <code>Send</code>, which can be difficult for people with a poor view of their
system’s state to figure out the best way to ensure. This is why work-stealing is said to be
“harder.”</p><p>At the same time, if state is moved from one thread to another, this introduces synchronization
costs and cache misses, violating the principles of a “share-nothing” architecture, in which each
CPU has exclusive access to the state it operates on. This is why work-stealing is said to be
“slower.”</p><p>The point of share-nothing is to improve tail latency by keeping data in the faster caches that
belong to a single CPU core, rather than the slower caches shared by multiple cores.</p><p>I want to return to Enberg’s <a href="https://penberg.org/papers/tpc-ancs19.pdf">paper</a>, which demonstrates the performance improvements
of a share-nothing architecture over a shared-state architecture by benchmarking a new key-value
store (which is share-nothing) against memcached (which is shared-state). Enberg shows substantial
improvements in tail latency between the two architectures. I like this paper a lot, but I think the
way it has been deployed in the Rust community as a soundbite (“71% performance improvement!”) is
shallow and unhelpful.</p><p>To achieve a share-nothing architecture, Enberg’s key/value store partitions the keyspace over the
different threads using a hash function, and partitions incoming TCP connections over the threads
using <code>SO_REUSEPORT</code>. Then, it routes requests from the thread managing the connection to the
thread managing the relevant section of the keyspace using message passing channels. In contrast,
in memcached all of the threads share ownership of the keyspace, which is partitioned, and each
partition is protected by a mutex.</p><p>Enberg’s paper shows that using channels over using mutexes can achieve lower tail latency. This is
presumably because there are fewer cache misses, as each partition, which is accessed over and over
again, stays in only one core’s cache. However, I’m not at all convinced that Enberg’s architecture
is dramatically easier to implement than memcached’s. Enberg’s goal is to make use of advanced
kernel features and a carefully planned architecture to avoid data movement, it’s hard for me to
believe this would be <em>easier</em> than wrapping data inside a mutex.</p><p>A key-value store is pretty much the ideal case for a share-nothing architecture, because it is
fairly trivial to partition the state of the application among diferent threads. But if your
application is more complicated, and requires mutating state in multiple partitions in a
transactional or atomic manner, this requires a lot more attention to implement correctly. There’s a
strong analogy between the advocates of a share-nothing architecture and the hype for eventually
consistent databases over databases that enforced serializability ten years ago. Yes, this can be
more performant, but at the expense of requiring careful consideration to avoid bugs that result
from data inconsistency.</p><p>It’s also important to note that neither Enberg’s implementation nor memcached use work-stealing.
This makes it difficult to relate the core performance claims of Enberg’s paper to Rust’s
work-stealing architectures. One wonders what the results would be to just add work-stealing to
Enberg’s architecture and memcached’s. In Enberg’s it would increase data movement somewhat, but
possibly in a manner which still maximizes CPU utilization. I can’t imagine it would do anything but
help memcached.</p><p>Enberg has carefully designed the implementation in the paper to try to evenly distribute work in
advance, using a balanced partition of the keyspace and <code>SO_REUSEPORT</code>. Despite this, there are
several sources of dynamic imbalance that would appear in practice:</p><ul><li>Hot keys will receive more reads and writes, which causes the thread managing their keyspace to
receive more work.</li><li>Some connections will perform more requests than others, which causes the thread managing those
connections to receive more work.</li></ul><p>My understanding of the paper is that the benchmarking framework did not replicate these
conditions, which would appear in the real world: each connection performs a consistent amount of
work, operating on random keys, so it avoids these sources of imbalance. I wonder what benchmarks
which add work stealing would show if these kinds of dynamic imbalance were tested.</p><p>One can imagine others ways to architect a share-nothing system that may mitigate these forms of
imbalance (such as caching hot keys on additional partitions). And some form of work-stealing may be
such an optimization even if some tasks stay pinned to certain cores to avoid moving their state.</p><p>No one would dispute that carefully architecting your system to avoid moving data between CPU caches
will achieve better performance than not doing that, but I have a hard time believing that someone
who’s biggest complaint is adding <code>Send</code> bounds to some generics is engaged in that kind of
engineering. If you’re going to be using shared state anyway, it’s hard to imagine that
work-stealing doesn’t improve your CPU utilization under load.</p></section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Thirty Years Ago: MS-DOS 6.00 (166 pts)]]></title>
            <link>https://www.pcjs.org/blog/2023/10/04/</link>
            <guid>37790174</guid>
            <pubDate>Fri, 06 Oct 2023 12:57:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.pcjs.org/blog/2023/10/04/">https://www.pcjs.org/blog/2023/10/04/</a>, See on <a href="https://news.ycombinator.com/item?id=37790174">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
        <h2><a href="https://www.pcjs.org/blog/">PCjs Blog</a></h2>

<h3>Thirty Years Ago: MS-DOS 6.00</h3>

<p>Over 30 years ago, in March 1993, Microsoft released <a href="https://www.pcjs.org/software/pcx86/sys/dos/microsoft/6.00/compressed">MS-DOS 6.00</a>,
the next major release of MS-DOS after 5.00 shipped in June 1991.</p>

<p>In addition to several new full-screen utilities, like <code>DEFRAG</code> to defragment your hard disk (licensed from Symantec),
<code>MSBACKUP</code> to efficiently backup your hard disk (also licensed from Symantec), and <code>MSAV</code> to check for viruses (licensed
from Central Point Software), there were a number of new command-line programs, such as <code>CHOICE</code>, <code>DELTREE</code>, <code>MOVE</code>,
<code>MSCDEX</code>, and <code>SMARTDRV</code>.</p>

<p>But the biggest addition to MS-DOS 6.00 was a new feature called <strong>DoubleSpace</strong> (dubbed “MagicDrive” internally) that
automatically compressed everything on your hard disk, providing up to “double” the amount of effective disk space – or more,
or less, depending on how compressible your files were overall.</p>

<p>DoubleSpace was a significant feature that required changes across the entire system.  Most of the action, however,
took place inside a new device driver, <code>DBLSPACE.BIN</code>, that stored all your data in a Compressed Volume File (CVF) generally
named <code>DBLSPACE.000</code>.  In fact, if you booted an older version of MS-DOS (like 5.00), you wouldn’t see much more than that:</p>

<div><pre><code>A&gt;DIR C: /A

 Volume in drive C is HOST_FOR_C
 Volume Serial Number is 5739-B1B5
 Directory of C:\

IO       SYS     40470 03-10-93   6:00a
MSDOS    SYS     38138 03-10-93   6:00a
DBLSPACE BIN     51214 03-10-93   6:00a
DBLSPACE INI        91 10-03-23  12:26p
DBLSPACE 000 131474432 10-03-23  12:26p
        5 file(s)  131604345 bytes
                     2605056 bytes free
</code></pre></div>

<p>When MS-DOS 6.00 starts up, it reads <code>DBLSPACE.INI</code>, which usually looks something like this:</p>

<div><pre><code>MaxRemovableDrives=2
FirstDrive=D
LastDrive=H
MaxFileFragments=115
ActivateDrive=H,C0
</code></pre></div>

<p>and tells the operating system to mount the <em>real</em> drive C: as drive H: instead, and to mount the CVF as drive C:</p>

<div><pre><code>C:\&gt;DIR /C

 Volume in drive C is MS-DOS_6
 Volume Serial Number is 101B-323E
 Directory of C:\

DOS          &lt;DIR&gt;     09-25-23  10:13p
COMMAND  COM     52925 03-10-93   6:00a   1.4 to 1.0
WINA20   386      9349 03-10-93   6:00a   5.3 to 1.0
AUTOEXEC BAT        75 09-26-23   8:55a  16.0 to 1.0
CONFIG   SYS       109 09-26-23   8:55a  16.0 to 1.0
                  2.0 to 1.0 average compression ratio
        5 file(s)      62458 bytes
                   253927424 bytes free
</code></pre></div>

<p>So our original hard disk, a 128Mb drive, now appears to be almost twice as large – thanks to DoubleSpace.</p>

<p>Aside from the new <code>DBLSPACE.BIN</code> driver, the other main piece of DoubleSpace functionality resided in <code>DBLSPACE.EXE</code>, which
operated as both a setup and a maintenance program.  It provided a friendly UI, making it easy to create additional CVFs,
as well as resize, defragment, reformat, unmount, remount, and more.</p>

<p><img src="https://www.pcjs.org/blog/images/msdos600-dblspace.png" alt="MS-DOS 6.00 DoubleSpace"></p>

<p>Feel free to tinker with MS-DOS 6.00 on the website:</p>

<ul>
  <li><a href="https://www.pcjs.org/software/pcx86/sys/dos/microsoft/6.00/">Microsoft MS-DOS 6.00 (Installed)</a></li>
  <li><a href="https://www.pcjs.org/software/pcx86/sys/dos/microsoft/6.00/compressed/">Microsoft MS-DOS 6.00 (Installed and Compressed)</a></li>
</ul>

<h2 id="legal-woes">Legal Woes</h2>

<p>Microsoft bootstrapped its compression efforts by licensing code from Vertisoft, makers of DoubleDisk, a disk compression
product first released in 1989.  Starting with Verisoft’s code, Microsoft created <code>DBLSPACE.BIN</code>, along with operating system
changes that allowed it to be loaded <em>before</em> CONFIG.SYS was processed – so that CONFIG.SYS and any system files loaded
from that point forward could be <em>inside</em> the compressed volume instead of <em>outside</em> it.</p>

<p>Vertisoft was not directly involved with any of that work, but they did help produce other pieces of functionality, such
as code to convert Stacker and SuperStor compressed disks to DoubleSpace – although apparently Stacker conversion was pulled
at the last minute, in February 1993, just as MS-DOS 6.00 was being finalized.</p>

<p>Or rather, February 1993 would have been “last minute”, until the lawsuit filed by Stac in January 1993 forced Microsoft
to re-evaluate.  Stac claimed that the DoubleSpace infringed two of Stac’s patents: <a href="https://patents.google.com/patent/US5016009A/en">5,016,009</a> and <a href="https://patents.google.com/patent/US4701745A/en?oq=US4701745">4,701,745</a>.</p>

<p>For me, life quickly changed on February 13, 1993, when I received this email:</p>

<div><pre><code>From: Paul Maritz
Sent: Saturday, February 13, 1993 12:06 PM
To: Jeff Parsons; Mark Zbikowski
Cc: Ben Slivka; Brad Chase; Brad Silverberg; Jim Allchin; John Mason;
Nathan Myhrvold; Rick Rashid
Subject: special duty

You are both amongst the best x86 assembly language coders that we have at MS.
We are thus asking you to help out with a very serious problem that we face - namely
the STAC / DOS6 lawsuit.

Our lawyers have recommended that we have a backup compression mechanism for DOS6
ready to go as soon as possible. The initial work on this has been done under Rick
Rashid in Nathanm's area. They have a C language implementation of a technique that
we believe is safe (covered under patents that we have rights to). The challenge
is to get this technique into the tightest possible x86 assembly code, as soon as
possible. This is where we are asking you to help. Jimall and Bradsi are aware that
you will be "stolen" for some weeks.

Could you both meet with Rick Rashid as early as possible on Monday to get this
effort under way as soon as is possible. Thanks.
</code></pre></div>

<p>The next several weeks were probably some of the most stressful weeks I’d experienced at Microsoft.  Looking back, it’s amazing
to me that with all the critical-path code that was being rewritten at that late date, MS-DOS 6.00 still shipped the following
month, in March 1993.</p>

<p>I don’t recall all the details of the alleged patent infringement, and I’m not sure I ever knew all the details, because frankly,
it wasn’t necessary for me to know the details.  A number of other people had already been working on the problem and had come up
with several solutions, and it simply fell to me and MarkZ to implement them in x86 assembly – preferably very fast, bug-free
assembly, of course.</p>

<p>As far as I can tell now, Stac patent 5,016,009 was the crux of the problem.  It combined LZ77 compression with hashing, and
while LZ77 compression was fine, and hashing was fine, apparently the <em>combination</em> of the two became a patentable innovation.</p>

<p>So we were initially tasked with writing a compressor based on <strong>Miller-Wegman</strong>, an algorithm that was either not patented or
that Microsoft owned or licensed.  When that turned out to be too slow, we instead built a compressor (internally known as XCFR or
the “Rashid Search Algorithm”) that avoided hashing by using a 256x8 look-up table along with a 256-entry LRU table, and also
incorporated a new Microsoft Realtime Compression Format (MRCF) for outputting the raw bytes and offset-length pairs.  That,
of course, meant that the decompressor had to be rewritten as well.</p>

<p>With hindsight, it’s probably safe to say that Microsoft should <em>not</em> have shipped MS-DOS 6.00 quite so quickly after that
rewrite, because unfortunately, our code (well, in the case below, <em>my</em> code) was not, um, bug-free:</p>

<div><pre><code>From: Chuck Strouss
To: SYS Astro Team Development Group; Peter Stewart; Jeff Parsons
Subject: Bug in DBLSPACE decompress
Date: Monday, June 14, 1993 3:40PM

In RDCOMP.ASM, near the first JC instruction, there is a bug when a block ends
at 10000h and the last several bytes are in a repeat string.  It was reported by
Temporal Acuity Products.
</code></pre></div>

<p>to which I replied:</p>

<div><pre><code>From: Jeff Parsons
Sent: Monday, June 14, 1993 4:49 PM
To: Chuck Strouss; Ben Slivka; Jim Mathews; Peter Stewart
Subject: RE: Bug in DBLSPACE decompress

well... shit!
</code></pre></div>

<h2 id="introducing-multiconfig">Introducing MultiConfig</h2>

<p>On a happier, or at least less contentious note, MS-DOS 6.00 also introduced a feature known as <strong>MultiConfig</strong>, which I
have some fondness for, because it was something I personally championed and implemented.  And – good news – I don’t think
it had any serious bugs.</p>

<p>I don’t recall precisely where the idea came from.  I think it started as something that I and Naveen Jain, a Program Manager
on the team, discussed in early 1992.  He created a preliminary spec in February 1992, and then I implemented the feature
in March 1992 and updated the spec to match what I had implemented.</p>

<p>The code was originally added to <strong>Jaguar</strong>, which was planned to be the next major update to MS-DOS after 5.00.
But at some point, <strong>Astro</strong> – originally intended as a smaller interim MS-DOS update – grew to the point where it was
clearly going to be the next major update, thanks in large part to the addition of DoubleSpace disk compression.</p>

<p>When it was clear that <strong>Astro</strong> would become MS-DOS 6.00, I think management went looking for other low-hanging fruit,
such as any new <strong>Jaguar</strong> features that could be incorporated into <strong>Astro</strong> relatively easily with minimal risk.
MultiConfig fit the bill.</p>

<p>However, it wasn’t a slam dunk.  I had to push for it, because there were a few risk-averse people in management that felt
the risk/reward ratio was too high.  They claimed that most users would not use this feature (which was true), but that point
also worked in my favor: most of the new code would not be executed until and unless someone actually added one or more of the
new commands to their CONFIG.SYS.  So any risks largely affected only “power users”.</p>

<h2 id="what-is-multiconfig">What is MultiConfig?</h2>

<p>MultiConfig was a collection of features added to the processing of CONFIG.SYS, to make it easier to start your PC
in a particular way without having to boot from a special floppy or edit/copy a new CONFIG.SYS each time.  It added some new
commands to CONFIG.SYS:</p>

<ul>
  <li>INCLUDE</li>
  <li>MENUCOLOR</li>
  <li>MENUDEFAULT</li>
  <li>MENUITEM</li>
  <li>NUMLOCK</li>
  <li>SET</li>
  <li>SUBMENU</li>
</ul>

<p>and it included some new ways to interact with CONFIG.SYS.  The message “Starting MS-DOS…” was added as an indirect means
of alerting you that you now had two seconds to press one of several new start-up keys:</p>

<ul>
  <li>F5: Bypass CONFIG.SYS and AUTOEXEC.BAT</li>
  <li>F8: Interactively step through CONFIG.SYS</li>
</ul>

<p>You could also tap a Shift key – that was equivalent to pressing F5.  Apparently there was an Astro “press tour” in August
1992, and someone in that tour suggested adding the Shift key, so we did.  They claimed that holding the Shift key while
starting Windows also bypassed certain files and/or functions, but I don’t recall to what extent that was true.</p>

<p>Additionally, if you didn’t want anyone using your machine to bypass or alter CONFIG.SYS, you could add
these lines to the file:</p>

<ul>
  <li>SWITCHES=/N: disable all start-up keys</li>
  <li>SWITCHES=/F: eliminate the two-second pause</li>
</ul>

<p>/N also implied /F, since if start-up keys were disabled, there was no need to wait two seconds.</p>

<p>Note that SWITCHES was not a new command; other older “switches” included:</p>

<ul>
  <li>/K: Forces an enhanced keyboard to behave like a conventional keyboard (DOS 4.0+)</li>
  <li>/T: Indicates the BIOS time rollover byte is a flag instead of a counter (DOS 5.0+)</li>
  <li>/W: Specifies that the WINA20.386 file has been moved to a directory other than the root directory (DOS 5.0+)</li>
</ul>

<p>Finally, while we’re on the subject of the keyboard-related features, I should add that NUMLOCK wasn’t really a MultiConfig
feature; it was just something I thought would be handy.  Recall that early PCs had no BIOS setup screens, and MS-DOS was
still an operating system designed to run on any PC, including the original IBM PC.  So this CONFIG.SYS command:</p>

<ul>
  <li>NUMLOCK=[ON|OFF]</li>
</ul>

<p>could be used to set your keyboard’s initial Num-Lock state.  A case could be made for this being a legitimate
MultiConfig feature though, since you could select menu items with arrow keys <em>or</em> by pressing the number of a menu item.
So if you wanted to use your numeric keypad, then you would want to ensure that Num-Lock matched your preferred selection
method.</p>



<p>The real power of MultiConfig was the ability to create user-friendly boot menus and let you organize sets of CONFIG.SYS
commands into either named or <code>[common]</code> blocks.  Blocks began with a bracketed block name (eg, <code>[menu]</code>, <code>[common]</code>, <code>[doslow]</code>)
and ended at the next bracketed block name (or end of file).</p>

<p>Here’s a simple example:</p>

<div><pre><code>[menu]
menuitem=doslow,Load DOS in LOW memory
menuitem=doshigh,Load DOS in HIGH memory
menudefault=doslow,15
menucolor=15,1

[common]
device=c:\dos\himem.sys

[doslow]
dos=low

[doshigh]
dos=high

[common]
device=c:\dos\setver.exe
files=30
</code></pre></div>

<p>And the screen that would appear when booting:</p>

<p><img src="https://www.pcjs.org/blog/images/msdos600-multiconfig.png" alt="MS-DOS 6.00 MultiConfig"></p>

<p>Each <code>menuitem</code> in the <code>[menu]</code> block describes a menu item; the first argument is a block name (eg, <code>doslow</code>, <code>doshigh</code>),
and the second argument is a description.  Other <code>[menu]</code> block keywords included <code>menudefault</code>, which specifies the
default menu item (and optional timeout value in seconds), and <code>menucolor</code>, which selects foreground and background colors
for the menu.</p>

<p>In the above example, no matter which menu item you selected, HIMEM.SYS would always be loaded first, because it was in a
<code>[common]</code> block that appeared before the other blocks.  Then all commands in the selected block (<code>[doslow]</code> or
<code>[doshigh]</code>) would be processed next, then all the commands in the next <code>[common]</code> block – and so on.</p>

<p>Another feature was “forced prompting”.  If you included a <code>?</code> after the <code>DEVICE</code> keyword, you would receive an unconditional
prompt for that particular driver.  For example:</p>

<div><pre><code>device?=c:\dos\setver.exe
</code></pre></div>

<p>would <em>always</em> generate the following prompt:</p>

<div><pre><code>DEVICE=C:\DOS\SETVER.EXE [Y,N]?
</code></pre></div>

<p>And that feature wasn’t limited to device drivers.  The following line:</p>



<p>would also generate a prompt:</p>





<p>Below is a more complex example, extracted from an email I wrote back on July 1, 1992 (at 2:34am apparently).</p>

<p>This example illustrates how you could use <code>submenu</code> (as opposed to <code>menuitem</code>) to define menu items that
referred to other menu blocks, in order to create multi-level menus.  Originally, the keyword for that feature was
simply <code>menu</code>, but the <strong>Astro</strong> team (specifically, Betsy Tinney, who helped refine the MultiConfig UI for <strong>Astro</strong>)
suggested a keyword that was clearer.</p>

<p>It also shows how you could <code>include</code> named blocks from other blocks.  For example, a number of the blocks, like <code>[dosumb]</code>,
include another block, <code>[dos]</code>, that contains commands common to the other blocks.  Every block <em>could</em> duplicate those
commands itself, but factoring out common sets of commands made for a more maintainable CONFIG.SYS.  Blocks named <code>[common]</code>
were <em>always</em> processed in the order they appeared, whereas blocks with any other name would be processed whenever
(and <em>only</em> whenever) they were explicitly included.</p>

<p>Finally, this example also uses the <code>SET</code> command, which defines environment variables to be passed to <code>COMMAND.COM</code>.
In addition, a special <code>CONFIG</code> environment variable is automatically set to the name of the block from the final selected
<code>menuitem</code> (eg, <code>dosumb</code>).  This was useful for batch files like AUTOEXEC.BAT, if they needed to customize their actions
according to the selected CONFIG.SYS configuration.</p>

<div><pre><code>[menu]
numlock=off
menucolor=15,1
menudefault=lanmenu,15
submenu=dosmenu,DOS configurations
submenu=lanmenu,LanMan configurations

[dosmenu]
menudefault=dosumb,15
menuitem=dosumb,     DOS 7.00 only
menuitem=dosems,     DOS 7.00 w/EMS
menuitem=dosansi,    DOS 7.00 w/ANSI
menuitem=dos386max,  DOS 7.00 w/386Max
menuitem=dosdbg,     DOS 7.00 w/Soft-ICE
menuitem=cougar,     DOS 7.00 w/Cougar

[lanmenu]
menudefault=winball,15
menuitem=lanman20,   DOS 7.00 w/Lanman 2.0
menuitem=lanman21,   DOS 7.00 w/Lanman 2.1 w/XNS
menuitem=lanman21nb, DOS 7.00 w/Lanman 2.1 w/XNS+NetBeui
;menuitem=lanman21xm,DOS 7.00 w/Lanman 2.1 w/XNS Mono
menuitem=lanman21dbg,DOS 7.00 w/Lanman 2.1 w/Soft-ICE
menuitem=winball,    DOS 7.00 w/Winball

[common]
set tmp=c:\tmp
set linktmp=c:\tmp
set temp=c:\win31\temp
set dircmd=/l/o
set home=d:\tools\bound
set init=d:\tools\bound
set alias=jeffpar
set logname=jeffpar
set mailname=jeffpar
set basspec=d:\tools\dos
set helpfiles=d:\tools\help;c:\src\cougar\dev\tools\help
set country=usa-ms
set proj=c:\src\cougar\dos\dos86
set lib=d:\tools\windev\lib
set include=d:\tools\windev\include;d:\src\myinc
set path=d:\tools\dos;d:\tools\bound;d:\tools\windev;c:\lanman\netprog;c:\win31;c:\dos
set prompt=$p$g

[dos]
break=on
dos=high,umb
files=60
buffers=10
stacks=9,256
lastdrivehigh=z
shell=c:\dos\command.com /p c:\dos /e:1024 /z

[dosumb]
include dos
device=c:\win31\himem.sys
device=c:\win31\emm386.exe noems i=b000-b7ff x=d800-dfff

[dosems]
include dos
device=c:\win31\himem.sys
device=c:\win31\emm386.exe 1024 ram i=b000-b7ff x=d800-dfff frame=e000

[dosansi]
include dosumb
devicehigh=c:\dos\ansi.sys

[dos386max]
include dos
device=d:\tools\386max\386max.sys

[dosdbg]
device=c:\s-ice\s-ice.exe /tra 1000
include dos

[lanman20]
include dosumb
include lanman20_drivers
include lanman_logon

[lanman20_drivers]
devicehigh=c:\lanman\drivers\protman\protman.dos /i:c:\lanman
devicehigh=c:\lanman\drivers\ethernet\ub\ubnei.dos
devicehigh=c:\lanman\drivers\protocol\netbeui\netbeui.dos
devicehigh=c:\lanman\drivers\protocol\xns\ubxpw.dos
devicehigh=c:\lanman\drivers\protocol\xns\ubloop.dos
installhigh c:\lanman\drivers\protman\netbind.exe

[lanman21]
include dosumb
include lanman21_drivers
include lanman_logon

[lanman21nb]
include dosumb
include lanman21_drivers
install c:\lanman\netprog\load.com netbeui
include lanman_logon

[lanman21xm]
include dosumb
install c:\lanman\xnsmono\loadniu.exe -r -d -m:d8 -i:5 -p:4 c:\lanman\xnsmono\exniu2.xfm c:\lanman\xnsmono\1a.lc
install c:\lanman\xnsmono\xnsbios.exe -m:d8 -i:5 -p:4
include lanman_logon

[lanman21dbg]
device=c:\s-ice\s-ice.exe /tra 1000
include dos
include lanman21_drivers
include lanman_logon

[lanman21_drivers]
devicehigh=c:\lanman\drivers\protman\protman.dos /i:c:\lanman
devicehigh=c:\lanman\drivers\ethernet\ub\ubnei.dos
device=c:\lanman\drivers\protocol\ubxns\ubxps.dos
install c:\lanman\netprog\netbind.com

[lanman_logon]
install c:\lanman\netprog\net.exe start workstation
install c:\lanman\netprog\net.exe logon jeffpar2 /y
;install c:\lanman\netprog\net.exe use k: \\jeffpar\astro dos6
;install c:\lanman\netprog\net.exe use j: \\jeffpar\cougar dos7

[winball]
include dosumb
include lanman21_drivers
devicehigh=c:\win31\redirdrv.sys
devicehigh=c:\win31\system\vnbhlp.dos
shell=c:\dos\command.com /p c:\dos /e:1024 /z /k windb
set path=d:\tools\dos;d:\tools\bound;d:\tools\windev;c:\win31;c:\dos

[cougar]
include dosumb
include lanman21_drivers
devicehigh=c:\win31\redirdrv.sys
devicehigh=c:\win31\system\vnbhlp.dos
shell=c:\dos\command.com /p c:\dos /e:1024 /z /k cougar7
set path=d:\tools\dos;d:\tools\bound;d:\tools\windev;c:\win31;c:\dos;d:\cougar

[common]
installhigh d:\tools\dos\keyfix.com
installhigh c:\win31\mouse.com
installhigh c:\dos\share.exe
installhigh c:\win31\smartdrv.exe 1024
installhigh c:\dos\doskey.com /a /e /x /p /k:128 /f:d:\tools\dos\aliases
install c:\dos\mode.com con:rate=30 delay=1
install d:\tools\dos\50.com
</code></pre></div>


<p>[<a href="https://github.com/jeffpar/pcjs/tree/gh-pages/blog/_posts/2023/2023-10-04-thirty-years-ago-ms-dos-6-00.md">GitHub Source</a>]</p>

<p><a href="https://github.com/jeffpar">Jeff Parsons</a><br>
	<small>Oct 4, 2023</small>
</p>


      </section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Long gone, DEC is still powering the world of computing (123 pts)]]></title>
            <link>https://arstechnica.com/gadgets/2023/10/long-gone-dec-is-still-powering-the-world-of-computing/</link>
            <guid>37789514</guid>
            <pubDate>Fri, 06 Oct 2023 11:56:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arstechnica.com/gadgets/2023/10/long-gone-dec-is-still-powering-the-world-of-computing/">https://arstechnica.com/gadgets/2023/10/long-gone-dec-is-still-powering-the-world-of-computing/</a>, See on <a href="https://news.ycombinator.com/item?id=37789514">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <header>
            <h4>
      DEC everywhere    —
</h4>
            
            <h2 itemprop="description">One of the early pioneers in computing, the company disappeared in the late 1990s.</h2>
                    </header>
        <section>
            <div itemprop="articleBody">
                                    
<figure>
  <img src="https://cdn.arstechnica.net/wp-content/uploads/2023/10/DEC-VAX-8350-front-0a-800x1090.jpg" alt="A DEC VAX 8350 with cover removed.">
      <figcaption><p><a href="https://cdn.arstechnica.net/wp-content/uploads/2023/10/DEC-VAX-8350-front-0a-scaled.jpg" data-height="2560" data-width="1880">Enlarge</a> <span>/</span> A DEC VAX 8350 with cover removed.</p></figcaption>  </figure>

  




<!-- cache hit 221:single/related:badea60dd314665c29b27bca554c9984 --><!-- empty -->
<p>Even though very few of the early players in technology still exist, we use their creations to this day. Bell Labs created the transistor, and Fairchild Semiconductor created the integrated circuit, but neither company is still around. So is the case with Digital Equipment Corporation (DEC). It no longer exists, but unless you're using a handheld device to read this article, you're using a descendant of DEC technology.</p>
<p>DEC was founded in 1957 by Ken Olsen, Harlan Anderson, and H. Edward Roberts to build small digital modules, but the team soon discovered that they could use those modules to build minicomputers—computers that were smaller and less powerful (but cheaper) than mainframes, which were the business standard at the time.</p>
<p>In 1977, DEC introduced the VAX, a new line of minicomputers that featured a 32-bit instruction set architecture and virtual memory. Its operating system, VMS, was a multi-user, multitasking OS that provided features we now take for granted, including virtual memory, file sharing, and networking. It amassed a wide variety of third-party software packages that made it the most popular system in its class.</p>
<p>In the late 1980s and early '90s, Andy Green ran a bulletin board system (BBS) and later an Internet service provider called Intelecom Data Systems (IDS) on a VAX 11/730 (later a VAXstation 4000) server in the basement of his parents’ house in Rhode Island. IDS had seven lines—unheard of at the time—and users could talk in a real-time chat room. All of this was written by Green in VAX BASIC. Today, Green is the owner and CEO of Acme Atronomatic, developer of the MyRadar mobile app.</p>
<figure><a href="https://cdn.arstechnica.net/wp-content/uploads/2023/10/DEC_VAXstation_4000_96_OpenVMS_6.1.jpeg" data-height="1920" data-width="2560" alt="A DEC VAXstation 4000 96 running OpenVMS 6.1 with the DECWindows environment."><img alt="A DEC VAXstation 4000 96 running OpenVMS 6.1 with the DECWindows environment." src="https://cdn.arstechnica.net/wp-content/uploads/2023/10/DEC_VAXstation_4000_96_OpenVMS_6.1-980x735.jpeg" width="980" height="735"></a><figcaption><p><a href="https://cdn.arstechnica.net/wp-content/uploads/2023/10/DEC_VAXstation_4000_96_OpenVMS_6.1.jpeg" data-height="1920" data-width="2560">Enlarge</a> <span>/</span> A DEC VAXstation 4000 96 running OpenVMS 6.1 with the DECWindows environment.</p></figcaption></figure>
<p>Green was exposed to the VAX through work and had picked up an old VAX 11/730 and started tinkering. He had previously run a BBS on a TRS-80, but the VAX, with its multitenancy, allowed for multiple concurrent users.</p>                                            
                                                        
<p>“Prior to [IDS], the PC or TRS-80 were only engineered originally to be single-user, and they weren't set up to be multi-user,” Green told Ars. “The fact that VAX and VMS in general were designed for [multiple users] from the scratch is what facilitated the multi-user aspect.”</p>
<p>The VAX served DEC well throughout the '80s and into the '90s, but as the latter decade went on, DEC began to face stiff competition from UNIX vendors, particularly Sun Microsystems. DEC struggled to change with the times, and the company ultimately failed. In 1998, DEC was acquired by Compaq, and in 2001, Compaq was acquired by Hewlett-Packard. The DEC line, including the VAX/VMS system, was discontinued and faded from the market.</p>
<p>And yet it lives on today. Here’s how.</p>
<h2>VMS=WNT</h2>
<p>VMS was popular because DEC supported it so thoroughly. It had a user-friendly interface and powerful command-line tools, and it was one of the first operating systems to support networking protocols, including TCP/IP, DECnet, and SNA. It had a powerful file system that supported hierarchical directories and file permissions, and it was highly customizable.</p>
<p>In 1988, a senior VMS engineer named David Cutler joined Microsoft to lead the development of the Windows NT operating system. Windows NT was a major departure from previous Microsoft operating systems, as it was a 32-bit, multi-user, multitasking OS. Windows client, still finding its way to usability, was a 16-bit layer that ran over MS-DOS. It wasn’t really an operating system; it was more like a program launcher.</p>
<p>Windows NT launched in 1993 with version 3.1, matching the desktop version of Windows, which had also just been released. But while Windows 3.1 finally got it right, NT 3.1 was a bit too heavy for the PCs of the day, and it was recast as a server operating system.</p>

                                                </div>

            
                            <nav>Page: <span>1 <a href="https://arstechnica.com/gadgets/2023/10/long-gone-dec-is-still-powering-the-world-of-computing/2/">2</a> <a href="https://arstechnica.com/gadgets/2023/10/long-gone-dec-is-still-powering-the-world-of-computing/3/">3</a> <a href="https://arstechnica.com/gadgets/2023/10/long-gone-dec-is-still-powering-the-world-of-computing/4/">4</a> <a href="https://arstechnica.com/gadgets/2023/10/long-gone-dec-is-still-powering-the-world-of-computing/2/"><span>Next <span>→</span></span></a></span></nav>
            
        </section>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Use an old tablet as an extra monitor (223 pts)]]></title>
            <link>https://github.com/alex028502/extra-screen</link>
            <guid>37789371</guid>
            <pubDate>Fri, 06 Oct 2023 11:36:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/alex028502/extra-screen">https://github.com/alex028502/extra-screen</a>, See on <a href="https://news.ycombinator.com/item?id=37789371">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" id="user-content-use-an-old-tablet-as-an-extra-monitor" dir="auto"><a href="#use-an-old-tablet-as-an-extra-monitor">Use an old tablet as an extra monitor</a></h2>
<p dir="auto">(as long as you want to use it as a terminal)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/alex028502/extra-screen/blob/master/pics/picture.jpeg"><img src="https://github.com/alex028502/extra-screen/raw/master/pics/picture.jpeg" alt="Kindle Fire as Extra Screen"></a></p>
<p dir="auto">I have a couple old kindle fire tablets lying around. One of them has a battery
that lasts about ten minutes. I also never have enough screens and never know
where to put my terminal when I need to tail a log or something.</p>
<p dir="auto">I tried using <a href="https://github.com/pavlobu/deskreen">Deskreen</a> a long time ago
as my optional extra screen when I travel. I can't remember why I didn't get
that habit going.</p>
<p dir="auto">For my extra office screen, I decided to do something different because</p>
<ul dir="auto">
<li>My graphics card seems to be maxed out. I can't even use the internal screen.</li>
<li>I don't know where I put that virtual display adapter.</li>
<li>It seemed like a bit of a detour to send pixels to my tablet when I am only
looking at text</li>
</ul>
<h4 tabindex="-1" id="user-content-so-what-is-then" dir="auto"><a href="#so-what-is-then">So what is then?</a></h4>
<p dir="auto">Well I just ssh into my computer from an android SSH client, open <code>screen</code>, and
then use a program I made that allows me to <code>stuff</code> the characters I type into
the screen session, so it feels like I am typing right into the tablet.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/alex028502/extra-screen/blob/master/pics/terminal-app.png"><img src="https://github.com/alex028502/extra-screen/raw/master/pics/terminal-app.png" alt="typing app"></a></p>
<p dir="auto">See if you can find this little window in the main picture. That is what I have
to activate using Alt+Tab to type into the terminal.</p>
<h4 tabindex="-1" id="user-content-this-is-an-mvp-and-a-poc-and-stuff-like-that" dir="auto"><a href="#this-is-an-mvp-and-a-poc-and-stuff-like-that">This is an 'MVP' and a 'POC' and stuff like that</a></h4>
<p dir="auto">While I think this approach to using a spare tablet as an extra screen may be
a winner, I am not so sure about this approach to this approach to using a
spare tablet as an extra screen.  Here are the issues:</p>
<ul dir="auto">
<li>You have to give some a mobile app access to your entire computer. This seems
like a shame after the phone OS did all this work to sandbox the mobile app, and
not give it access to your phone or tablet. This is even less awesome for an
iPad since there don't seem to be any open source SSH clients, and even if
there were, I don't think there would be any guarantee that what you see on
github is what has been sent to the app store.</li>
<li>You have to open an SSH server on your computer that exposes you to some
clever hacker in the Starbucks where you are using your spare screen</li>
<li>I can't figure out how to stuff C-SPC, which is a 0x0 - so have a clunky
workaround</li>
<li>It seems weird to execute <code>screen</code> once per key. I wish I could just pipe the
characters in or something - not that I have any idea how relevant that is to
performance.</li>
<li>It's hard to find terminal clients for some old devices (like my iPad)</li>
</ul>
<p dir="auto">What I think might be a better approach to this approach is using a lot of the
bits and pieces in <a href="https://hyper.is/" rel="nofollow">hyper</a>, such as
<a href="http://xtermjs.org/" rel="nofollow">xterm.js</a>, showing the terminal in a web browser, and
sending the characters over a web socket. It would still only send just over a
byte per keypress or something like that, and not use your GPU/HDMI, but could
work on even more devices - any device with a browser, just like Deskreen. The
server app would have to do much more:</p>
<ul dir="auto">
<li>serve the client app</li>
<li>make you type in a four digita code that you see on your tablet screen sort of
like Bluetooth pairing</li>
<li>set up the shell, and PTY probably</li>
<li>listen to the console end of the PTY and send everything down the websocket</li>
<li>send key presses to the PTY</li>
</ul>
<p dir="auto">Both solutions depend on the LAN, which is too bad. Maybe Web Bluetooth or
something for future old devices.</p>
<h2 tabindex="-1" id="user-content-set-up" dir="auto"><a href="#set-up">Set-up</a></h2>
<p dir="auto">I don't really think anybody else should use my Python program that stuffs keys
into the screen session (unless it's an emergency).  You are better off taking
the idea and making your own even better solution. But I'll first explain it
using my program.</p>
<h5 tabindex="-1" id="user-content-enable-ssh-on-your-computer" dir="auto"><a href="#enable-ssh-on-your-computer">enable ssh on your computer</a></h5>
<div data-snippet-clipboard-copy-content="sudo apt-get install openssh-server"><pre><code>sudo apt-get install openssh-server
</code></pre></div>
<p dir="auto">but make sure it is disabled so that you don't have it on unnecessarily, or in
public places.</p>
<div data-snippet-clipboard-copy-content="sudo systemctl disable ssh"><pre><code>sudo systemctl disable ssh
</code></pre></div>
<p dir="auto">start it whenever you are playing with your extra screen and on a trusted
network:</p>

<p dir="auto">disable it the rest of the time</p>

<h5 tabindex="-1" id="user-content-open-a-terminalssh-client-on-your-tablet" dir="auto"><a href="#open-a-terminalssh-client-on-your-tablet">open a terminal/ssh client on your tablet</a></h5>
<p dir="auto">I side-loaded ConnectBot onto my Kindle Fire from F-Droid. I tried to sideload
F-Droid, and then install ConnectBot, but it failed for some reason</p>
<h5 tabindex="-1" id="user-content-start-screen-with-a-known-session-name" dir="auto"><a href="#start-screen-with-a-known-session-name">start screen with a known session name:</a></h5>

<p dir="auto">If you are using ConnectBot on a Kindle Fire, there seems to be a
<a href="https://github.com/connectbot/connectbot/issues/543" data-hovercard-type="issue" data-hovercard-url="/connectbot/connectbot/issues/543/hovercard">known bug</a> that return
doesn't work. There are some workarounds for emergencies in the bug report but
I just configured the above to happen every time I connected.</p>
<p dir="auto"><code>DISPLAY=:0</code> makes it so that you can do stuff like <code>xdg-open .</code> and <code>emacs &amp;</code>
and <code>git gui &amp;</code> in the terminal, and see the result in your main gui session.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/alex028502/extra-screen/blob/master/pics/settings.png"><img src="https://github.com/alex028502/extra-screen/raw/master/pics/settings.png" alt="ConnectBot settings"></a></p>
<h5 tabindex="-1" id="user-content-install-and-run-my-typing-programme" dir="auto"><a href="#install-and-run-my-typing-programme">install and run my typing programme</a></h5>
<p dir="auto">Don't actually do this.</p>
<div data-snippet-clipboard-copy-content="$ cd [project directory that you cloned]
$ make # to generate images and special null file
$ sudo apt-get install python3-gi
$ python3 start.sh aux"><pre><code>$ cd [project directory that you cloned]
$ make # to generate images and special null file
$ sudo apt-get install python3-gi
$ python3 start.sh aux
</code></pre></div>
<h5 tabindex="-1" id="user-content-actually-just-make-your-own-typing-solution" dir="auto"><a href="#actually-just-make-your-own-typing-solution">actually just make your own typing solution</a></h5>
<p dir="auto">Check this out:</p>
<div data-snippet-clipboard-copy-content="$ screen -S aux -X stuff x"><pre><code>$ screen -S aux -X stuff x
</code></pre></div>
<p dir="auto">An <code>x</code> should appear in your terminal</p>
<p dir="auto">You need to somehow make all the control characters work. The ones you need</p>

<p dir="auto">Look at <a href="https://github.com/alex028502/extra-screen/blob/master/start.py">my program</a> for ideas on how to implement yours that is
even better</p>
<p dir="auto">There is some more debugging advice further down.</p>
<h5 tabindex="-1" id="user-content-create-a-services-or-something" dir="auto"><a href="#create-a-services-or-something">create a services or something</a></h5>
<p dir="auto">That would be cool to have the ssh daemon start the the typing program as a
service whenever the ssh session is opened - like similar to what you can do
with udev.</p>
<p dir="auto">I think you have to do something with <code>ForceCommand</code> in <code>/etc/ssh/sshd_config</code></p>
<p dir="auto">I think you can also watch <code>/var/log/auth.log</code> for <code>sshd</code> and <code>Accepted</code> using
awk.</p>
<h2 tabindex="-1" id="user-content-faq" dir="auto"><a href="#faq">FAQ</a></h2>
<h4 tabindex="-1" id="user-content-how-well-does-it-work" dir="auto"><a href="#how-well-does-it-work">How well does it work?</a></h4>
<p dir="auto">It works really well on my Kindle Fire at the office as a terminal. It is too
slow at home, with my iPad, as my emacs screen. This could be because:</p>
<ul dir="auto">
<li>the ssh client that I found that works with my old iPad is too slow to update
after characters get stuffed in</li>
<li>the wifi network at home is too slow</li>
<li>trying to use it as a full text editor for serious work makes the speed more
noticeable
(I have used emacs at the office set-up in the picture, and it seems to work
pretty well, but it's too small to really try to work with it - I am also
thinking using emacs to display my email inbox with it so I can keep an eye on
my email while I work)</li>
</ul>
<p dir="auto">I am planning to mainly use it at the office to tail logs, but I have been
'daily driving' it for all terminal stuff just to try it out.</p>
<p dir="auto">ConnectBot on Kindle Fire doesn't make it easy to get into landscape mode.
<a href="https://github.com/connectbot/connectbot/issues/868" data-hovercard-type="issue" data-hovercard-url="/connectbot/connectbot/issues/868/hovercard">Here</a> it sounds like you
have to connect a Bluetooth keyboard. That's actually an interesting idea - I
could have made my type-into-the-terminal app act like a bluetooth keyboard for
your tablet instead of inserting characters into the screen session.</p>
<p dir="auto">Originally, I had hoped for landscape, but now I have found a great for my
portrait tablet between my monitors, and found that for small terminal windows,
splitting across is good, and for logs, long is good. The text has to be quite
small to get 80 characters across.</p>
<p dir="auto">I got used to finding the application with Alt+Tab. I tried to drag my mouse
over to the tablet a couple times. I don't really use workspaces. I like to be
able to see as many things as possible by turning my head, and find applications
to bring to the foreground with Alt+Tab. If you use workspaces, I guess it
changes things a little bit.  You could search for the terminal typing app, and
hide your other windows. On GNOME 3, or at least on Ubuntu 22.04, on my
computer, one of the screens never changes with workspace, so I guess the
terminal typing app could go in there. On MATE, both screens are in the
workspace, but I think there is an always in active workspace function
somewhere. Just brainstorming though - I am sure if a workspace user wants to
do the same thing, they'll work it out.</p>
<h4 tabindex="-1" id="user-content-what-about-paste" dir="auto"><a href="#what-about-paste">What about paste?</a></h4>
<p dir="auto">Ctrl+Shift+V for paste works by stuffing your whole clipboard into the screen
session.</p>
<h4 tabindex="-1" id="user-content-what-about-copy" dir="auto"><a href="#what-about-copy">What about copy?</a></h4>
<p dir="auto">I haven't figured out copy yet. I think there must be an easy way to send my
tmux clipboard to the graphical clipboard. Since I start <code>screen</code> with
<code>DISPLAY=:0</code>, any copy to clipboard utility should hopefully "just work".</p>
<h4 tabindex="-1" id="user-content-why-do-you-use-screen-and-tmux" dir="auto"><a href="#why-do-you-use-screen-and-tmux">Why do you use <code>screen</code> <em>and</em> <code>tmux</code>?</a></h4>
<ul dir="auto">
<li>I didn't want all the tmux chrome when using emacs
(you can turn it off with tmux, but then that changes the tmux experience when
I do want to use tmux)</li>
<li>I got the stuff command working with screen, and it's just a MVP/POC so I left
it like that.</li>
</ul>
<h4 tabindex="-1" id="user-content-if-you-are-an-emacs-user-shouldnt-you-use-one-of-the-emacs-shells" dir="auto"><a href="#if-you-are-an-emacs-user-shouldnt-you-use-one-of-the-emacs-shells">If you are an emacs user, shouldn't you use one of the emacs shells?</a></h4>
<p dir="auto">Yeah I never really got into that, and I always have a full screen worth of
open text files.</p>
<h4 tabindex="-1" id="user-content-why-dont-you-just-use-____" dir="auto"><a href="#why-dont-you-just-use-____">Why don't you just use ____?</a></h4>
<p dir="auto">I have to admit, I didn't look to hard to see if there was a ready to go way to
do this - if somebody knows of one, please just submit a pull request that
deletes my whole repo, and leaves only a readme that points me toward the
alternative.</p>
<h2 tabindex="-1" id="user-content-developing-the-typing-application" dir="auto"><a href="#developing-the-typing-application">Developing the typing application.</a></h2>
<p dir="auto">For developing, and getting the keycodes right, you don't really need a tablet.</p>
<p dir="auto">I start a screen session in an ordinary terminal instead of the tablet, and
then run this program:</p>
<div data-snippet-clipboard-copy-content="import sys
import termios
import tty

old_settings = termios.tcgetattr(sys.stdin)
try:
    tty.setraw(sys.stdin.fileno())
    while True:
        char = sys.stdin.read(1)
        print(&quot;%s\r&quot; % hex(ord(char)))
        if char == '\x03':
            raise KeyboardInterrupt
finally:
    termios.tcsetattr(sys.stdin, termios.TCSADRAIN, old_settings)"><pre><code>import sys
import termios
import tty

old_settings = termios.tcgetattr(sys.stdin)
try:
    tty.setraw(sys.stdin.fileno())
    while True:
        char = sys.stdin.read(1)
        print("%s\r" % hex(ord(char)))
        if char == '\x03':
            raise KeyboardInterrupt
finally:
    termios.tcsetattr(sys.stdin, termios.TCSADRAIN, old_settings)
</code></pre></div>
<p dir="auto">Then I connect my python typer program to that screen session, and compare the
codes that I get when I type straight into the terminal to the codes I get when
I get when I use my typing application.</p>
<p dir="auto">Hopefully after reading
<a href="https://blog.nelhage.com/2009/12/a-brief-introduction-to-termios/" rel="nofollow">this</a> I
will understand more about what <code>tty.setraw</code> does.</p>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Productivity has grown faster in Western Europe than in America (149 pts)]]></title>
            <link>https://www.economist.com/graphic-detail/2023/10/04/productivity-has-grown-faster-in-western-europe-than-in-america</link>
            <guid>37789290</guid>
            <pubDate>Fri, 06 Oct 2023 11:25:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.economist.com/graphic-detail/2023/10/04/productivity-has-grown-faster-in-western-europe-than-in-america">https://www.economist.com/graphic-detail/2023/10/04/productivity-has-grown-faster-in-western-europe-than-in-america</a>, See on <a href="https://news.ycombinator.com/item?id=37789290">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div data-body-id="cp1"><figure data-infographic-class="g-fallback"></figure><figure data-infographic-js="1"></figure><p data-caps="initial"><span data-caps="initial">T</span><small>HE EU ECONOMY</small> is now 65% the size of America’s in dollar terms, down from 90% just ten years ago. Slow population growth is partly to blame—the number of Europeans has risen by 1.6% since 2012, compared with 6.1% for Americans. Still, <small>GDP</small> per person is higher, and has grown far faster, in the United States than in Europe.</p><div><figure><div><figcaption>Listen to this story.</figcaption> <p><span>Enjoy more audio and podcasts on<!-- --> <a id="audio-ios-cta" href="https://economist-app.onelink.me/d2eC/bed1b25" target="_blank" rel="noreferrer">iOS</a> <!-- -->or<!-- --> <a id="audio-android-cta" href="https://economist-app.onelink.me/d2eC/7f3c199" target="_blank" rel="noreferrer">Android</a>.</span></p></div><audio controls="" id="audio-player" preload="none" src="https://www.economist.com/media-assets/audio/091%20Graphic%20detail%20-%20Productivity-8fd34726d8d2617895da583200301f18.mp3" title="Productivity has grown faster in western Europe than in America" controlslist="nodownload"><p>Your browser does not support the &lt;audio&gt; element.</p></audio></figure></div><p>As a result, commentators and think-tanks have set about comparing the economies of some of Europe’s richest countries to those of America’s poorest states. But comparisons based simply on <small>GDP</small> per person are poor measures of economic welfare. Goods and services cost more in some countries than in others, and working more does not always make people better off. Adjusting for these factors suggests that countries like Denmark and Austria are in fact more productive than America.</p><p>The first step in comparing different economies is converting national figures into a common currency. But a dollar goes much further in some countries than others, because the costs of non-tradable goods and services, such as housing or restaurant meals, vary widely. Measuring living standards requires converting <small>GDP</small> figures to “purchasing-power parity” (<small>PPP</small>).</p><figure data-infographic-class="g-fallback"></figure><figure data-infographic-js="1"></figure><p>Europe’s economic performance looks far better at <small>PPP</small> than in nominal terms. In 2012 prices in America were just 5.4% higher than in the <small>EU</small> at market exchange rates. Today, the gap is 46%, largely thanks to a strong dollar. Adjusting for <small>PPP</small>,<!-- --> the<small> EU</small>’s<small> GDP</small> is roughly 95% of America’s, the same as it was ten years ago. Still, <small>PPP</small>-adjusted <small>GDP</small> per person has grown faster in America than in most of western Europe.</p><p>But focus instead on productivity, by dividing these figures by a tally of hours worked, and the gap closes further. As a result of demography—western Europe has a larger share of elderly people than America does—and because of differences in holiday allowances, pensions and unemployment benefits, Europeans work less than Americans do. On an hourly basis, countries like Austria, Belgium and Denmark leap ahead. In France, Germany and Sweden productivity has also grown faster in the past ten years than it has in America.</p><figure data-infographic-class="g-fallback"></figure><figure data-infographic-js="1"></figure><p>Such adjustments are an inexact science. <small>PPP</small> conversions struggle to capture differences in the quality of goods and services and many countries calculate hours worked differently. But in aggregate, western Europeans get just as much out of their labour as Americans do. Narrowing the gap in total <small>GDP</small> would require additional working hours, either via immigration or by raising the amount of time citizens spend on the job. Europeans may well reject this trade-off—they tend to value leisure time, even if <small>GDP </small>figures do not. <span data-ornament="ufinish">■</span></p><p><em>Chart sources: OECD; World Bank. Inspect our code on <a href="https://github.com/TheEconomist/the-economist-gdp-per-hour-estimates/">Github</a>.</em></p></div><div><p>This article appeared in the Graphic detail section of the print edition under the headline "All work and no play"</p><p>Chart sources: OECD; World Bank. Inspect our code on <a href="https://github.com/TheEconomist/the-economist-gdp-per-hour-estimates/">Github</a>.</p></div><div orientation="vertical" data-test-id="vertical"><div orientation="vertical"><figure><img alt="Are free markets history? The rise of homeland economics" loading="lazy" width="1280" height="1684" decoding="async" data-nimg="1" sizes="300px" srcset="https://www.economist.com/img/b/16/21/90/media-assets/image/20231007_DE_EU.jpg 16w, https://www.economist.com/img/b/32/42/90/media-assets/image/20231007_DE_EU.jpg 32w, https://www.economist.com/img/b/48/63/90/media-assets/image/20231007_DE_EU.jpg 48w, https://www.economist.com/img/b/64/84/90/media-assets/image/20231007_DE_EU.jpg 64w, https://www.economist.com/img/b/96/126/90/media-assets/image/20231007_DE_EU.jpg 96w, https://www.economist.com/img/b/128/168/90/media-assets/image/20231007_DE_EU.jpg 128w, https://www.economist.com/img/b/256/336/90/media-assets/image/20231007_DE_EU.jpg 256w, https://www.economist.com/img/b/360/473/90/media-assets/image/20231007_DE_EU.jpg 360w, https://www.economist.com/img/b/384/505/90/media-assets/image/20231007_DE_EU.jpg 384w, https://www.economist.com/img/b/480/631/90/media-assets/image/20231007_DE_EU.jpg 480w, https://www.economist.com/img/b/600/789/90/media-assets/image/20231007_DE_EU.jpg 600w, https://www.economist.com/img/b/834/1097/90/media-assets/image/20231007_DE_EU.jpg 834w, https://www.economist.com/img/b/960/1263/90/media-assets/image/20231007_DE_EU.jpg 960w, https://www.economist.com/img/b/1096/1441/90/media-assets/image/20231007_DE_EU.jpg 1096w, https://www.economist.com/img/b/1280/1684/90/media-assets/image/20231007_DE_EU.jpg 1280w, https://www.economist.com/img/b/1424/1873/90/media-assets/image/20231007_DE_EU.jpg 1424w" src="https://www.economist.com/img/b/1424/1873/90/media-assets/image/20231007_DE_EU.jpg"></figure></div><div orientation="vertical"><h3 orientation="vertical">From the October 7th 2023 edition</h3><p orientation="vertical">Discover stories from this section and more in the list of contents </p><a href="https://www.economist.com/printedition/2023-10-07" data-analytics="sidebar:weekly_edition"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1zm.142 4.5l-1.008 1.062c3.33 3.276 4.194 4.14 4.608 4.5-1.602-.018-3.168-.018-10.242-.018v1.584c7.074 0 8.73 0 10.242-.018-.432.36-1.314 1.206-4.608 4.536l1.008 1.044 6.354-6.354L12.142 5.5z" fill="#2E45B8" fill-rule="nonzero"></path></g></svg><span>Explore the edition</span></a></div></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Opening up access to GOV.UK Forms: an online form builder (328 pts)]]></title>
            <link>https://gds.blog.gov.uk/2023/10/03/how-were-opening-up-access-to-gov-uk-forms/</link>
            <guid>37789107</guid>
            <pubDate>Fri, 06 Oct 2023 10:54:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gds.blog.gov.uk/2023/10/03/how-were-opening-up-access-to-gov-uk-forms/">https://gds.blog.gov.uk/2023/10/03/how-were-opening-up-access-to-gov-uk-forms/</a>, See on <a href="https://news.ycombinator.com/item?id=37789107">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
			<p><img decoding="async" fetchpriority="high" src="https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image1-620x413.jpg" alt="A large group of civil servants sitting in an audience looking up at a screen." width="620" height="413" srcset="https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image1-620x413.jpg 620w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image1-310x207.jpg 310w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image1-768x512.jpg 768w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image1-1536x1024.jpg 1536w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image1.jpg 1999w" sizes="(max-width: 620px) 100vw, 620px"></p>
<p><span>Here at GDS, we’re making it easier for departments to build better digital services</span><span>. </span><a href="http://gov.uk/forms"><span>GOV.UK Forms</span></a><span> is an online form builder which can be used to make accessible and easy to use digital forms for GOV.UK. It saves time for departments that are processing form submissions, and time for users that are filling in forms.</span></p>
<p><span>In just a matter of minutes, government teams can replace PDF and other document-based forms with digital forms which all users can access and are legally compliant with the </span><a href="https://www.legislation.gov.uk/uksi/2018/852/contents/made"><span>Public Sector Bodies Accessibility Regulations 2018</span></a><span>.&nbsp;</span></p>
<p><span>Best of all, there’s no need for any technical knowledge and it’s completely free!</span></p>
<p><span>GOV.UK Forms is currently in </span><a href="https://www.gov.uk/service-manual/agile-delivery/how-the-beta-phase-works"><span>private beta</span></a><span>, where we’re testing the product out with a small number of teams that own forms. This is to help us steadily understand how our product is working and what issues we need to address. After that, we’ll move into public beta, where we’ll open up GOV.UK Forms for any central government department to use freely.</span></p>
<p><span>We wanted to share what we’ve been up to since our last update, and what we’re doing to open up private beta for a wider pool of users - a phase that we’re calling ‘Early Access’. This will allow departments with forms that only require current features to start building them, and also allow any government user to try out our product. It will also help us to ramp up our overall user numbers and test the stability of our platform before public beta.</span></p>
<h2><strong>What we’ve done</strong></h2>
<p><span>In October 2022, the Insolvency Service was </span><a href="https://gds.blog.gov.uk/2022/10/06/making-it-easy-to-create-and-publish-digital-forms-on-gov-uk/"><span>the first government organisation to publish a form</span></a><span> with us. This was a relatively simple form as we only supported quite basic features at the time. The vast majority of document-based forms require more complex features to turn these into digital forms, including multiple options, declaration statements and more.</span></p>
<h3><strong>Routing to skip questions that aren’t relevant</strong></h3>
<p><span>One of these features is routing, or skippable questions. If you think of any form that you might have to fill out, for example at the GP or for an application, the chances are that it will say ‘If you answer ‘No’, skip to question 13’ or similar. This is a really core requirement for form building, and we needed to find a way to build this so that people who aren’t digital professionals could understand how to set up this kind of logic for their form.</span></p>
<p><span>We created a new journey for form builders to add this to questions that ask for one answer to be selected from a list of options. They can specify which answer should route people to a future question and which question they should go to. The person filling out the form will then skip questions they don’t need to answer - saving them time and saving processing time too. You can see how this appears for form builders in the screenshot below:</span></p>
<figure id="attachment_35844"><img decoding="async" src="https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image3-620x582.png" alt="A screenshot of a page informing a form creator that if a user answers ‘Yes’ to a question, they will be taken to a further question." width="620" height="582" srcset="https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image3-620x582.png 620w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image3-310x291.png 310w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image3-768x721.png 768w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image3.png 1428w" sizes="(max-width: 620px) 100vw, 620px"><figcaption>A screenshot of a page informing a form creator that if a user answers ‘Yes’ to a question, they will be taken to a further question.</figcaption></figure>
<p><span>We know this is not going to cover all routing needs though - in the future, we’d like to look at building branching (two separate sets of questions depending on the answer), and later down the line we might be able to expand our routing so you can add routes to more than one answer, and also routes based on a combination of answers.</span></p>
<h3><strong>Making a draft of a live form</strong></h3>
<p><span>At the start of 2023, if one of our users created a form, made it ‘live’ (meaning it can now be put on GOV.UK), and then later on wanted to edit their live form, any change made would be updated on the live form immediately. This would cause issues as form builders may be making multiple changes, or change their mind about what they want to edit. And each time this would happen, people that are filling in the form would be at risk of losing their progress.</span></p>
<p><span>So what we did is we made live forms uneditable - instead, if you want to make changes to a live form, you would create a new draft copy of that form. Then you could make all the edits you want, and only make that new version live when you’re happy with all the changes. This new version would automatically replace the existing live form - meaning this change only happens once, and affects a much smaller number of people filling in the form.</span></p>
<h3><strong>Detailed guidance</strong></h3>
<p><span>Our form builder already allows users to add hint text to a question, such as ‘Enter your name as it appears in your passport’. But sometimes on a form there are questions that need a bit more information for someone to answer - for example, specific guidance that they may need to refer to, or industry codes that need to be defined so that the right code is entered.</span></p>
<p><span>To do this, in September we released a feature called ‘detailed guidance’ that will allow this more detailed information to be provided to the person filling in the form. Here’s what it will look like for people filling out an example form:</span></p>
<figure id="attachment_35845"><img decoding="async" src="https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image2-620x522.png" alt="A screenshot of a question that provides more information about adjustments for interviews that can be offered, before asking the user whether they need adjustments" width="620" height="522" srcset="https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image2-620x522.png 620w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image2-310x261.png 310w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image2-768x647.png 768w, https://gds.blog.gov.uk/wp-content/uploads/sites/60/2023/10/image2.png 1434w" sizes="(max-width: 620px) 100vw, 620px"><figcaption>A screenshot of a question that provides more information about adjustments for interviews that can be offered, before asking the user whether they need adjustments.</figcaption></figure>
<h2><strong>What we still need to do</strong></h2>
<h3><strong>User management and self-service accounts</strong></h3>
<p><span>Right now we use </span><a href="https://docs.publishing.service.gov.uk/repos/signon.html"><span>GOV.UK Signon</span></a><span> to allow users to sign into our product and use it. However, each time that a new user wants access, our team has to set that account up. We also can’t give people custom permission levels based on what we want them to be allowed to do (and not do). Signon is currently making improvements to make it more self-serviceable, but this wouldn’t have been ready for us to start expanding.</span></p>
<p><span>So last year we decided that we needed to move off of Signon and use </span><a href="https://auth0.com/"><span>Auth0</span></a><span> (also used by Ministry of Justice’s </span><a href="https://moj-forms.service.justice.gov.uk/"><span>MOJ Forms</span></a><span>) for authenticating users, and bring the permission controls into the GOV.UK Forms product itself. We also wanted to create a system so that users could create their own trial accounts without our involvement (self-service), try out the product, and then be easily upgraded to the next permission level in order to make their forms live.</span></p>
<p><span>Doing this work is one of our key challenges to adding many more users onto the platform, and we’ve designed an easy flow to allow quick access to the product, whilst also keeping enough control of who can make live forms whilst we’re still in private beta. We also want to ensure we’re following good governance practices and ensure Memorandum of Understandings (MoUs) are agreed before somebody from a department is able to make a form live.</span></p>
<h3><strong>Other features</strong></h3>
<p><span>Before we kick off Early Access, there are some other features that we’re working on to implement, including:</span></p>
<ul>
<li><span>an analytics page for each form that shows basic analytics such as submission numbers and completion rates</span></li>
<li><span>email confirmations of submission delivery, so that form completers have a record that their submission was received by the department</span></li>
<li><span>an updated product page with a more detailed public roadmap, guidance on the product, and an easier way to send the team support requests</span></li>
</ul>
<h2><strong>Launch of Early Access</strong></h2>
<p><span>Once we’ve achieved all these things, GOV.UK Forms will be ready for launching into our ‘Early Access’ stage within private beta, with a public beta launch planned for the first half of 2024.</span></p>
<p><span>We are planning to start our Early Access period in November 2023, at which point central government departments can start trying out GOV.UK Forms to see what they can make - and if they meet the criteria, we’ll be providing access to make those forms live. This will open up in public beta when departments can provide their own editor access to form creators. As with any </span><a href="https://en.wikipedia.org/wiki/Agile_software_development"><span>agile development process</span></a><span>, timescales can shift depending on what we find out along the way, and priorities.</span></p>
<p><span>Before we move to public beta, we have some much-requested features that we’ll be working on, including:</span></p>
<ul>
<li><span>uploading file attachments</span></li>
<li><span>saving form completion progress and returning to where you left off</span></li>
<li><span>paying for services within the form</span></li>
</ul>
<p><span>We’re not currently supporting organisations outside of central government, such as local councils or NHS and Police, but we’re hoping that we can see this scope expand later in 2024 and beyond.</span></p>
<p><span>If you’re interested in what we’re up to, please visit our </span><a href="http://gov.uk/forms"><span>product page and sign up</span></a><span> to our mailing list, where we’ll update you when Early Access is launched - and please share with colleagues or any civil servants who may be interested in our form builder.</span></p>
        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Narges Mohammadi wins 2023 Nobel Peace Prize (220 pts)]]></title>
            <link>https://www.cnn.com/world/live-news/nobel-peace-prize-2023-latest-news-intl/index.html</link>
            <guid>37788847</guid>
            <pubDate>Fri, 06 Oct 2023 10:03:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cnn.com/world/live-news/nobel-peace-prize-2023-latest-news-intl/index.html">https://www.cnn.com/world/live-news/nobel-peace-prize-2023-latest-news-intl/index.html</a>, See on <a href="https://news.ycombinator.com/item?id=37788847">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="posts"><article id="h_b4532ec31260fd6918b3d037022829ae"><header><span>1 hr 5 min ago</span></header><div><p><em>Our live coverage of this year's Nobel Peace Prize has ended. Read more about </em><a href="https://www.cnn.com/2023/10/06/world/nobel-peace-prize-winner-2023-intl/index.html" target="_blank"><em>the winner, Narges Mohammadi, and reaction to the prize</em></a>.</p></div></article><article id="h_70221badb0a43a6f5fc666211bb99c84"><header><span>1 hr 13 min ago</span><h2>"A woman, a human rights advocate, and a freedom fighter"</h2><p>From CNN's Lauren Kent and Sana Noor Haq</p></header><div><div><figure><img src="https://dynaimage.cdn.cnn.com/cnn/digital-images/org/b5adc46c-4030-448a-824f-8c650c19611e.jpeg" alt="Narges Mohammadi is pictured at home in Iran during a stint out of prison on medical furlough."><figcaption>Narges Mohammadi is pictured at home in Iran during a stint out of prison on medical furlough. Reihane Taravati&nbsp;</figcaption></figure></div><p>Narges Mohammadi spearheaded the campaign for human rights in Iran, in the face of a regime that has used <a href="https://www.cnn.com/2022/10/19/middleeast/iran-protesters-repression-investigation-intl-cmd/index.html" target="_blank">torture</a> to crush dissent. </p><p>Her rallying cry grew louder in September 2022, after the death of 22-year-old Mahsa Amini while in custody of the morality police sparked <a href="https://www.cnn.com/2023/09/16/middleeast/iran-mahsa-amini-anniversary-protester-mime-intl/index.html" target="_blank">nationwide protests</a>.</p><p>Hundreds of thousands of demonstrators used the slogan -- woman, life, freedom -- to organize the biggest threat against the Iranian regime since it came into power in 1979.</p><p>Even behind bars inside Tehran's notorious Evin prison, Mohammadi used her platform to lead the same chants, according to an audio recording she <a href="https://www.cnn.com/2023/10/06/middleeast/iran-narges-mohammadi-womens-rights-mime-intl-cmd/index.html" target="_blank">shared with CNN</a>, before she won the Nobel Peace Prize on Friday.</p><div><p><q>The motto adopted by the demonstrators -- woman life freedom -- suitably expresses the dedication and work of Narges Mohammadi," Norwegian Nobel Committee chair Berit Reiss-Andersen said.</q></p></div><p><strong>A history of campaigning: </strong>Mohammadi started advocating for women's rights while studying physics in the 1990s, later working as an engineer and writing for reform minded newspapers.</p><p>In 2011, eight years after first collaborating with the defense of Human Rights Center in Tehran -- which was established by the Nobel Peace Prize Laureate, Shirin Ebadi -- Mohammadi was first arrested. </p><p>In 2013, she was released on bail and used her freedom to campaign against the death penalty in Iran. The Iranian regime has historically been among the most prolific executioners in the world. Since January 2022, more than 260 prisoners have been subject to the death penalty in Iran, Reiss-Andersen said.</p><p>Mohammadi's advocacy work against the death penalty resulted in her re-arrest in 2015. </p><p>"Upon her return to prison, she began ... opposing the regime's systematic use of torture and sexualized violence against political prisoners -- and especially women -- that is practiced in Iranian prisons," Reiss-Andersen added.</p><p>The Iranian government has denied the widespread allegations of sexual assaults against detainees, including in an in-depth <a href="https://www.cnn.com/interactive/2022/11/middleeast/iran-protests-sexual-assault/index.html" target="_blank">CNN investigation</a> last year, calling them <a href="https://www.cnn.com/videos/tv/2023/03/01/amanpour-iran-foreign-minister-hossein-amir-abdollahian-full.cnn" target="_blank">“false” and “baseless.”</a></p><p><strong>A Nobel tribute: </strong>"Last year's wave of protests became known to the political prisoners held inside the notorious ​Evin Prison in Tehran.&nbsp;Once again, Ms. Mohammadi assumed leadership from prison. She expressed support for the demonstrators and organized solidarity actions among her fellow inmates," Berit Reiss-Andersen said.</p><p>"From captivity, Ms. Mohammadi has helped to ensure that the protests have not ebbed out.</p><p>"Narges Mohammadi is a woman, a human rights advocate, and a freedom fighter. In awarding her this year's Nobel Peace Prize, the Norwegian Nobel Committee wishes to honor her courageous fight for human rights, freedom and democracy in Iran," Reiss-Andersen said.</p></div></article><article id="h_0d15955d1e9624e30622a57b89957691"><header><span>1 hr 40 min ago</span><h2>Family says award is a "source of solace for our indescribable suffering" </h2><p>From CNN's Jomana Karadsheh and Adam Pourahmadi</p></header><div><p>Narges Mohammadi's family has been reacting to the news of her Nobel Peace Prize win. </p><p>"Although the years of her absence can never be compensated for us, the reality is that the honor of recognizing Narges' efforts for peace is a source of solace for our indescribable suffering," a statement given to CNN said. </p><div><blockquote>"It has been more than eight and a half years since she has seen her children, and she has not heard their voices for over a year. All of this signifies what she has endured on the path to realizing her aspirations. <br>Therefore, for us, who know that the Nobel Peace Prize will aid her in achieving her goals, this day is a blessed day. We express our gratitude to you for your attention to Iran, the oppressed people of Iran, and the prisoners, civil activists, and protesters."</blockquote></div><p>Mohammadi's activism has come at a great <a href="https://www.cnn.com/2023/10/06/middleeast/iran-narges-mohammadi-womens-rights-mime-intl-cmd/index.html" target="_blank">personal cost</a>. She has been banned from speaking directly with her husband, Taghi Rahmani, and her children, Ali and Kiana.</p><p>Rahmani, who was himself held as a political prisoner for a total of 14 years,&nbsp;has lived in exile with their children in France since Mohammadi's imprisonment in 2015.</p></div></article><article id="h_b465df1d53fd6333afa8e3855d60a07f"><header><span>2 hr 19 min ago</span><h2>A brief history of Iran's rules on the hijab</h2></header><div><p>This years's Peace Prize sends a likely unwelcome message to the authorities in Iran, which has for decades been dictating to women how they should dress. </p><p>The Islamic regime made the hjiab compulsory in 1979, after toppling the Pahlavi dynasty. It also created the notorious &nbsp;<a href="https://edition.cnn.com/2022/09/21/middleeast/iran-morality-police-mime-intl/index.html" target="_blank">morality police</a>, tasked with ensuring that the rules are followed. </p><p>Several anti-hijab movements have emerged in Iran over the years, often leading to crackdowns by the regime, with massive waves of arrest and persecution.</p><p>Following the death of 22-year-old Mahsa Amini in September of last year, many took to the streets protesting the mandatory hijab law and other issues. </p><p>The movement was violently quashed, however, and the regime responded months later with a new hijab bill that, if passed, would enshrine unprecedentedly harsh punitive measures into law.</p><p><a href="https://edition.cnn.com/2023/08/02/middleeast/iran-hijab-draft-law-mime-intl/index.html" target="_blank">The 70-article draft law</a>, which was published on Iranian media just weeks before the one-year anniversary of the protests, set out a range of proposals, including much longer prison terms for women who refuse to wear the veil, stiff new penalties for celebrities and businesses who flout the rules, and the use of artificial intelligence to identify women in breach of the dress code.</p><p>Experts said the bill was a warning to Iranians that the regime would not back down from its stance on the hijab despite the mass demonstrations that rocked the country last year.</p><p>Days after the protest anniversary,&nbsp;<a href="https://edition.cnn.com/2023/09/21/middleeast/iran-hijab-law-parliament-jail-intl-hnk/index.html" target="_blank">Iran’s parliament last month passed</a>&nbsp;a draconian new hijab legislation, which authorities said would be enacted for a three-year trial period once the Guardian Council, which oversees legislative matters in the Islamic Republic, approves it.</p><p>Parts of the bill are ambiguous, but some clauses sanction punishments of up to 10 years, and fines between 180 million rials ($4,260) and 360 million rials ($8,520).</p><p>The punishments are a sharp split from today’s measures. Under the current Islamic penal code, those in breach of the dress code face between 10 days to two months in prison, or a fine between 50,000 to 500,000 Iranian rials, what is today between $1.18 to $11.82.</p><p>It is “a clear response to the protests from September of last fall,” Sanam Vakil, director of the Middle East and North Africa program at the Chatham House think-tank in London, told CNN in August before the bill was introduced in parliament, adding that the establishment was attempting to “reassert authority over veiling and the requirements expected of women.”</p></div></article><article id="h_f27d2a44a9a880355a078f0fec6912ad"><header><span>2 hr 37 min ago</span><h2>2022 Nobel Peace Prize winner congratulates Mohammadi </h2><p>From CNN's Sana Noor Haq</p></header><div><div><figure><img src="https://dynaimage.cdn.cnn.com/cnn/digital-images/org/0596872e-fc78-43d4-89c1-ea3c65dd654c.jpeg" alt="Ukrainian rights defender Oleksandra Matviichuk, whose Center for Civil Liberties jointly won the 2022 Nobel Peace Prize with the Russian rights organisation Memorial poses during a interview at the University Catholique of Louvain in Louvain La Neuve, Belgium, on February 16."><figcaption>Ukrainian rights defender Oleksandra Matviichuk, whose Center for Civil Liberties jointly won the 2022 Nobel Peace Prize with the Russian rights organisation Memorial poses during a interview at the University Catholique of Louvain in Louvain La Neuve, Belgium, on February 16. John Thys/AFP/Getty Images</figcaption></figure></div><p><a href="https://www.cnn.com/2023/02/22/opinions/ukraine-russia-war-crimes-putin-democracy-matviichuk/index.html" target="_blank">Oleksandra Matviichuk</a>, a Ukrainian human rights lawyer and defender who won the Nobel Peace Prize in 2022, said she welcomed the committee's decision to award Narges Mohammadi "for her fight against the oppression of women in Iran."</p><p>"We live in a very interconnected world. Right now, people in Iran are fighting for freedom. Our future depends on their success," Matviichuk posted on the social media <a href="https://x.com/avalaina/status/1710224265855840346?s=20" target="_blank">platform X</a>, formerly known as Twitter. </p><p>She heads Ukraine's Center for Civil Liberties, which was founded in 2007 to advocate human rights values in Ukraine, in order to advance democracy in the country. </p><p>The group jointly won the Nobel Peace Prize <a href="https://www.cnn.com/world/live-news/nobel-peace-prize-2022-updates-intl/h_1f56c63a249b62eb56e8a2ab10c2b0b8" target="_blank">last year</a>. It played a significant role in identifying and documenting Russian war crimes against the Ukrainian population since Moscow launched its invasion in February 2022.</p><p>Matviichuk drew parallels between her and Mohammadi's efforts to hold authoritarian regimes accountable, while raising the voices of "people fighting for freedom."</p><p>"It is more than obvious for Ukraine. I live in Kyiv, which is regularly bombarded by Russian missiles and Iranian drones. If authoritarian regimes cooperate, then people fighting for freedom have to support each other much more strongly," she said on Friday.</p></div></article><article id="h_777181cec21a8d9a1a1652d3ab0cf446"><header><span>2 hr 18 min ago</span><h2>Prize also honors "hundreds of thousands" who have demonstrated for women's rights in Iran </h2><p>From CNN"s Nadeen Ebrahim</p></header><div><div><figure><img src="https://dynaimage.cdn.cnn.com/cnn/digital-images/org/6b98c506-9a17-4545-8573-f39c764c1fb0.jpeg" alt="Protesters chant slogans during a protest over the death of a woman who was detained by the morality police, in downtown Tehran, Iran, on September 21, 2022."><figcaption>Protesters chant slogans during a protest over the death of a woman who was detained by the morality police, in downtown Tehran, Iran, on September 21, 2022. AP</figcaption></figure></div><p>“This year’s Peace Prize also recognizes the hundreds of thousands of people who in the preceding year have demonstrated against the theocratic regimes’ policies of discrimination and oppression targeting women,” Norwegian Nobel Committee chair Berit Reiss-Andersen said.</p><p>Reiss-Andersen was referring to the mass protests that broke out a year ago following the death of 22-year-old Mahsa Amini, who died in the custody of Iran’s notorious morality police.</p><p>Days after her death, Iranians took to the streets in unprecedented widespread demonstrations, with many decrying the hijab law, the impunity of the morality police and other issues. </p><p>Some called for the downfall of the regime. Authorities responded violently, suppressing the movement with widespread reports of deaths, disappearances and even torture in custody.</p><p>Iran’s morality police, which had largely pulled back following the protests last year, this year resumed street patrols, and just weeks before the one-year anniversary of Amini’s death and the protests that followed, Iranian authorities began considering a draconian new bill on hijab-wearing that experts said would enshrine unprecedentedly harsh punitive measures into law.</p><p>The country’s parliament passed a new legislation on hijab-wearing last month. </p><p>The Guardian Council, which oversees legislative matters in the Islamic Republic, still needs to approve the bill before it is implemented.</p></div></article><article id="h_e45835042fc8522518ba1a354d581e25"><header><span>2 hr 58 min ago</span><h2>Mohammadi is the 19th woman&nbsp;to win the Nobel Peace Prize</h2><p>From CNN's Thom Poole</p></header><div><div><figure><img src="https://dynaimage.cdn.cnn.com/cnn/digital-images/org/4d450a18-d1c6-49cd-8376-c93229255a35.jpeg" alt="Narges Mohammadi is pictured at home in Iran during a stint out of prison on medical furlough."><figcaption>Narges Mohammadi is pictured at home in Iran during a stint out of prison on medical furlough. Reihane&nbsp;Taravati&nbsp;</figcaption></figure></div><p>Narges Mohammadi is just the 19th woman to win the Nobel Peace Prize in more than 120 years of the prize.</p><p>Nadia Murad,&nbsp;a Yazidi human rights activist and survivor of sexual slavery at the hands of ISIS in Iraq, jointly won the prize <a href="https://www.cnn.com/2018/10/05/middleeast/nadia-murad-nobel-peace-prize-2018-intl/index.html" target="_blank">in 2018</a>.</p><p>Other female winners include Pakistani education campaigner Malala Yousafzai, and Ellen Johnson Sirleaf, who became Africa's first democratically elected woman leader when she became Liberian president in 2005.</p><p>Another Iranian woman, human rights lawyer Shirin Ebadi, won the prize in 2003. </p><p><a href="https://www.nobelpeaceprize.org/nobel-peace-prize/about-the-nobel-peace-prize/women-laureates" target="_blank">The Nobel website</a> says for much of its history the Peace Prize "had almost exclusively been the preserve of highly educated white men from Europe and the United States."</p></div></article><article id="h_0388063b0c8c52248fafd4940a4b9f99"><header><span>3 hr 8 min ago</span><h2>Mohammadi's activism in Iran has come with "tremendous personal costs"</h2><p>From CNN's Jomana Karadsheh, Adam Pourahmadi and Sana Noor Haq</p></header><div><div><figure><img src="https://dynaimage.cdn.cnn.com/cnn/digital-images/org/baf0def6-48e8-484c-8f8b-33892f01836f.jpg" alt="An archival photograph of Narges Mohammadi with her children, Kiana and Ali."><figcaption>An archival photograph of Narges Mohammadi with her children, Kiana and Ali. Courtesy of Narges Mohammadi</figcaption></figure></div><p>The Iranian regime has imprisoned Narges Mohammadi for her advocacy work against the oppression of women inside Iran.</p><p>“Her brave struggle has come with tremendous personal costs," Norwegian Nobel Committee chair Berit Reiss-Andersen said at the announcement ceremony on Friday.</p><p>The government in Iran has arrested Mohammadi 13 times, convicted her five times, and sentenced her to a total of 31 years in prison, and 154 lashes, according to Reiss-Andersenn. </p><p>Following her release on bail, she was re-arrested in 2015 and sentenced to additional time in jail, the Nobel Prize said on the social media <a href="https://x.com/NobelPrize/status/1710219279352606909?s=20" target="_blank">platform X</a>, formerly known as Twitter. </p><p>But even behind walls, she has used her voice to campaign rail against the use of the death penalty in Iran and the regime's mandatory hijab law. </p><p>Earlier this year, Iran's parliament passed draconian <a href="https://www.cnn.com/2023/09/21/middleeast/iran-hijab-law-parliament-jail-intl-hnk/index.html" target="_blank">new legislation</a> imposing much harsher penalties on women who breach hijab rules, days after the one-year anniversary of Amini's death sparked mass demonstrations.</p><p>For refusing to be silenced while in prison, Mohammadi has been banned from speaking to her husband, Taghi Rahmani, and her children, Ali and Kiana, for the past 18 months.</p><div><p><q>I am really proud of my mom,” Ali told CNN, before his mother was awarded the Nobel Peace Prize on Friday. </q></p></div><p>“She was not always with us, but whenever she was, she took good care of us… she was a good mom and still is… I have accepted this kind of life now. Any suffering that I have to endure does not matter.”</p></div></article><article id="h_0eb08f4fb4d01b41462014563bb469ad"><header><span>3 hr 27 min ago</span><h2>Nobel committee's recognition of Mohammadi sends "powerful message to the leaders of Iran"</h2><p>From CNN's Christian Edwards</p></header><div><p>The recognition of Iranian activist Narges Mohammadi by the Norwegian Nobel Committee is a "tremendous achievement for women's rights in Iran," a Peace Prize specialist told CNN.</p><p>“Narges Mohammadi was top of my shortlist. Her win is a tremendous achievement for women’s rights in Iran," Henrik Urdal, director of the Peace Research Institute Oslo, said in a statement to CNN. </p><p>"Women in the country have been fighting for equality and freedom for generations, and the death of Mahsa Amini became a catalyst against oppression and violence. Today’s laureate, unfairly jailed in Tehran, sends a powerful message to the leaders of Iran that women’s rights are fundamental everywhere in the world.”</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[NSA publishes ten most common misconfigurations in networks (121 pts)]]></title>
            <link>https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-278a</link>
            <guid>37788420</guid>
            <pubDate>Fri, 06 Oct 2023 08:46:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-278a">https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-278a</a>, See on <a href="https://news.ycombinator.com/item?id=37788420">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
          <h4><strong>A plea for network defenders and software manufacturers to fix common problems.</strong></h4>
<h3><strong>EXECUTIVE SUMMARY</strong></h3>
<p>The National Security Agency (NSA) and Cybersecurity and Infrastructure Security Agency (CISA) are releasing this joint cybersecurity advisory (CSA) to highlight the most common cybersecurity misconfigurations in large organizations, and detail the tactics, techniques, and procedures (TTPs) actors use to exploit these misconfigurations.</p>
<p>Through NSA and CISA Red and Blue team assessments, as well as through the activities of NSA and CISA Hunt and Incident Response teams, the agencies identified the following 10 most common network misconfigurations:</p>
<ol><li>Default configurations of software and applications</li>
<li>Improper separation of user/administrator privilege</li>
<li>Insufficient internal network monitoring</li>
<li>Lack of network segmentation</li>
<li>Poor patch management</li>
<li>Bypass of system access controls</li>
<li>Weak or misconfigured multifactor authentication (MFA) methods</li>
<li>Insufficient access control lists (ACLs) on network shares and services</li>
<li>Poor credential hygiene</li>
<li>Unrestricted code execution</li>
</ol><p>These misconfigurations illustrate (1) a trend of systemic weaknesses in many large organizations, including those with mature cyber postures, and (2) the importance of software manufacturers embracing secure-by-design principles to reduce the burden on network defenders:</p>
<ul><li>Properly trained, staffed, and funded network security teams can implement the known mitigations for these weaknesses.</li>
<li>Software manufacturers must reduce the prevalence of these misconfigurations—thus strengthening the security posture for customers—by incorporating <a href="https://www.cisa.gov/securebydesign" title="Secure by Design">secure-by-design and -default principles</a> and tactics into their software development practices.[1]</li>
</ul><p>NSA and CISA encourage network defenders to implement the recommendations found within the <a href="#_Mitigations">Mitigations</a> section of this advisory—including the following—to reduce the risk of malicious actors exploiting the identified misconfigurations.</p>
<ul><li>Remove default credentials and harden configurations.</li>
<li>Disable unused services and implement access controls.</li>
<li>Update regularly and automate patching, prioritizing patching of <a href="https://www.cisa.gov/known-exploited-vulnerabilities-catalog" title="Known Exploited Vulnerabilities Catalog">known exploited vulnerabilities</a>.<u>[</u><u>2</u><u>]</u></li>
<li>Reduce, restrict, audit, and monitor administrative accounts and privileges.</li>
</ul><p>NSA and CISA urge software manufacturers to take ownership of improving security outcomes of their customers by embracing secure-by-design and-default tactics, including:</p>
<ul><li>Embedding security controls into product architecture from the start of development and throughout the entire software development lifecycle (SDLC).</li>
<li>Eliminating default passwords.</li>
<li>Providing high-quality audit logs to customers at no extra charge.</li>
<li>Mandating MFA, ideally <a href="https://www.cisa.gov/sites/default/files/publications/fact-sheet-implementing-phishing-resistant-mfa-508c.pdf" title="Implementing Phishing-Resistant MFA">phishing-resistant</a>, for privileged users and making MFA a default rather than opt-in feature.[3]</li>
</ul><p>Download the PDF version of this report: <a href="https://media.defense.gov/2023/Oct/05/2003314578/-1/-1/0/JOINT_CSA_TOP_TEN_MISCONFIGURATIONS_TLP-CLEAR.PDF" title="NSA and CISA Red and Blue Teams Share Top Ten Cybersecurity Misconfigurations">PDF, 660 KB</a></p>
<h3><strong>TECHNICAL DETAILS</strong></h3>
<p><strong>Note:</strong> This advisory uses the <a href="https://attack.mitre.org/versions/v13/matrices/enterprise/" title="Enterprise Matrix">MITRE ATT&amp;CK<sup>®</sup> for Enterprise</a> framework, version 13, and the <a href="https://d3fend.mitre.org/" title="A knowledge graph of cybersecurity countermeasures">MITRE D3FEND™</a> cybersecurity countermeasures framework.[4],[5] See the Appendix: MITRE ATT&amp;CK tactics and techniques section for tables summarizing the threat actors’ activity mapped to MITRE ATT&amp;CK tactics and techniques, and the Mitigations section for MITRE D3FEND countermeasures.</p>
<p>For assistance with mapping malicious cyber activity to the MITRE ATT&amp;CK framework, see CISA and MITRE ATT&amp;CK’s <a href="https://www.cisa.gov/news-events/news/best-practices-mitre-attckr-mapping" title="Best Practices for MITRE ATT&amp;CK® Mapping">Best Practices for MITRE ATT&amp;CK Mapping</a> and CISA’s <a href="https://github.com/cisagov/Decider/" title="cisagov / decider">Decider Tool</a>.[6],[7]</p>
<h4><em><strong>Overview</strong></em></h4>
<p>Over the years, the following NSA and CISA teams have assessed the security posture of many network enclaves across the Department of Defense (DoD); Federal Civilian Executive Branch (FCEB); state, local, tribal, and territorial (SLTT) governments; and the private sector:</p>
<ul><li>Depending on the needs of the assessment, NSA Defensive Network Operations (DNO) teams feature capabilities from Red Team (adversary emulation), Blue Team (strategic vulnerability assessment), Hunt (targeted hunt), and/or Tailored Mitigations (defensive countermeasure development).</li>
<li>CISA Vulnerability Management (VM) teams have assessed the security posture of over 1,000 network enclaves. CISA VM teams include <a href="https://www.cisa.gov/sites/default/files/publications/VM_Assessments_Fact_Sheet_RVA_508C.pdf" title="CYBER ASSESSMENT FACT SHEET Risk and Vulnerability Assessment">Risk and Vulnerability Assessment (RVA)</a> and CISA Red Team Assessments (RTA).[8] The RVA team conducts remote and onsite assessment services, including penetration testing and configuration review. RTA emulates cyber threat actors in coordination with an organization to assess the organization’s cyber detection and response capabilities.</li>
<li>CISA Hunt and Incident Response teams conduct proactive and reactive engagements, respectively, on organization networks to identify and detect cyber threats to U.S. infrastructure.</li>
</ul><p>During these assessments, NSA and CISA identified the 10 most common network misconfigurations, which are detailed below. These misconfigurations (non-prioritized) are systemic weaknesses across many networks.</p>
<p>Many of the assessments were of Microsoft<sup>®</sup> Windows<sup>®</sup> and Active Directory<sup>®</sup> environments. This advisory provides details about, and mitigations for, specific issues found during these assessments, and so mostly focuses on these products. However, it should be noted that many other environments contain similar misconfigurations. Network owners and operators should examine their networks for similar misconfigurations even when running other software not specifically mentioned below.</p>
<h4><em><strong>1. Default Configurations of Software and Applications</strong></em></h4>
<p>Default configurations of systems, services, and applications can permit unauthorized access or other malicious activity. Common default configurations include:</p>
<ul><li>Default credentials</li>
<li>Default service permissions and configurations settings</li>
</ul><h5><strong>Default Credentials</strong></h5>
<p>Many software manufacturers release commercial off-the-shelf (COTS) network devices —which provide user access via applications or web portals—containing predefined default credentials for their built-in administrative accounts.[9] Malicious actors and assessment teams regularly abuse default credentials by:</p>
<ul><li>Finding credentials with a simple web search [<a href="https://attack.mitre.org/versions/v13/techniques/T1589/001" title="Gather Victim Identity Information: Credentials">T1589.001</a>] and using them [<a href="https://attack.mitre.org/versions/v13/techniques/T1078/001" title="Valid Accounts: Default Accounts">T1078.001</a>] to gain authenticated access to a device.</li>
<li>Resetting built-in administrative accounts [<a href="https://attack.mitre.org/versions/v13/techniques/T1098/" title="Account Manipulation">T1098</a>] via predictable forgotten passwords questions.</li>
<li>Leveraging default virtual private network (VPN) credentials for internal network access [<a href="https://attack.mitre.org/versions/v13/techniques/T1133/" title="External Remote Services">T1133</a>].</li>
<li>Leveraging publicly available setup information to identify built-in administrative credentials for web applications and gaining access to the application and its underlying database.</li>
<li>Leveraging default credentials on software deployment tools [<a href="https://attack.mitre.org/versions/v13/techniques/T1072/" title="Software Deployment Tools">T1072</a>] for code execution and lateral movement.</li>
</ul><p>In addition to devices that provide network access, printers, scanners, security cameras, conference room audiovisual (AV) equipment, voice over internet protocol (VoIP) phones, and internet of things (IoT) devices commonly contain default credentials that can be used for easy unauthorized access to these devices as well. Further compounding this problem, printers and scanners may have privileged domain accounts loaded so that users can easily scan documents and upload them to a shared drive or email them. Malicious actors who gain access to a printer or scanner using default credentials can use the loaded privileged domain accounts to move laterally from the device and compromise the domain [<a href="https://attack.mitre.org/versions/v13/techniques/T1078/002/" title="Valid Accounts: Domain Accounts">T1078.002</a>].</p>
<h5><strong>Default Service Permissions and Configuration Settings</strong></h5>
<p>Certain services may have overly permissive access controls or vulnerable configurations by default. Additionally, even if the providers do not enable these services by default, malicious actors can easily abuse these services if users or administrators enable them.</p>
<p>Assessment teams regularly find the following:</p>
<ul><li>Insecure Active Directory Certificate Services</li>
<li>Insecure legacy protocols/services</li>
<li>Insecure Server Message Block (SMB) service</li>
</ul><h5><em>Insecure Active Directory Certificate Services</em></h5>
<p>Active Directory Certificate Services (ADCS) is a feature used to manage Public Key Infrastructure (PKI) certificates, keys, and encryption inside of Active Directory (AD) environments. ADCS templates are used to build certificates for different types of servers and other entities on an organization’s network.</p>
<p>Malicious actors can exploit ADCS and/or ADCS template misconfigurations to manipulate the certificate infrastructure into issuing fraudulent certificates and/or escalate user privileges to domain administrator privileges. These certificates and domain escalation paths may grant actors unauthorized, persistent access to systems and critical data, the ability to impersonate legitimate entities, and the ability to bypass security measures.</p>
<p>Assessment teams have observed organizations with the following misconfigurations:</p>
<ul><li><strong>ADCS servers running with web-enrollment enabled</strong>. If web-enrollment is enabled, unauthenticated actors can coerce a server to authenticate to an actor-controlled computer, which can relay the authentication to the ADCS web-enrollment service and obtain a certificate [<a href="https://attack.mitre.org/versions/v13/techniques/T1649/" title="Steal or Forge Authentication Certificates">T1649</a>] for the server’s account. These fraudulent, trusted certificates enable actors to use adversary-in-the-middle techniques [<a href="https://attack.mitre.org/versions/v13/techniques/T1557/" title="Adversary-in-the-Middle">T1557</a>] to masquerade as trusted entities on the network. The actors can also use the certificate for AD authentication to obtain a Kerberos Ticket Granting Ticket (TGT) [<a href="https://attack.mitre.org/versions/v13/techniques/T1558/001/" title="Steal or Forge Kerberos Tickets: Golden Ticket">T1558.001</a>], which they can use to compromise the server and usually the entire domain.</li>
<li><strong>ADCS templates where low-privileged users have enrollment rights, and the enrollee supplies a subject alternative name.</strong> Misconfiguring various elements of ADCS templates can result in domain escalation by unauthorized users (e.g., granting low-privileged users certificate enrollment rights, allowing requesters to specify a <code>subjectAltName</code> in the certificate signing request [CSR], not requiring authorized signatures for CSRs, granting <code>FullControl</code> or <code>WriteDacl</code> permissions to users). Malicious actors can use a low-privileged user account to request a certificate with a particular Subject Alternative Name (SAN) and gain a certificate where the SAN matches the User Principal Name (UPN) of a privileged account.</li>
</ul><p><strong>Note:</strong> For more information on known escalation paths, including <a href="https://support.microsoft.com/en-us/topic/kb5005413-mitigating-ntlm-relay-attacks-on-active-directory-certificate-services-ad-cs-3612b773-4043-4aa9-b23d-b87910cd3429" title="KB5005413: Mitigating NTLM Relay Attacks on Active Directory Certificate Services (AD CS)">PetitPotam NTLM relay techniques</a>, see: <a href="https://www.hackingarticles.in/domain-escalation-petitpotam-ntlm-relay-to-adcs-endpoints/" title="Domain Escalation: PetitPotam NTLM Relay to ADCS Endpoints">Domain Escalation: PetitPotam NTLM Relay to ADCS Endpoints</a> and <a href="https://posts.specterops.io/certified-pre-owned-d95910965cd2" title="Certified Pre-Owned">Certified Pre-Owned, Active Directory Certificate Services</a>.[10],[11],[12]</p>
<h5><em>Insecure legacy protocols/services</em></h5>
<p>Many vulnerable network services are enabled by default, and assessment teams have observed them enabled in production environments. Specifically, assessment teams have observed Link-Local Multicast Name Resolution (LLMNR) and NetBIOS Name Service (NBT-NS), which are Microsoft Windows components that serve as alternate methods of host identification. If these services are enabled in a network, actors can use spoofing, poisoning, and relay techniques [<a href="https://attack.mitre.org/versions/v13/techniques/T1557/001/" title="Adversary-in-the-Middle: LLMNR/NBT-NS Poisoning and SMB Relay">T1557.001</a>] to obtain domain hashes, system access, and potential administrative system sessions. Malicious actors frequently exploit these protocols to compromise entire Windows’ environments.</p>
<p>Malicious actors can spoof an authoritative source for name resolution on a target network by responding to passing traffic, effectively poisoning the service so that target computers will communicate with an actor-controlled system instead of the intended one. If the requested system requires identification/authentication, the target computer will send the user’s username and hash to the actor-controlled system. The actors then collect the hash and crack it offline to obtain the plain text password [<a href="https://attack.mitre.org/versions/v13/techniques/T1110/002/" title="Brute Force: Password Cracking">T1110.002</a>].</p>
<h5><em>Insecure Server Message Block (SMB) service</em></h5>
<p>The Server Message Block service is a Windows component primarily for file sharing. Its default configuration, including in the latest version of Windows, does not require signing network messages to ensure authenticity and integrity. If SMB servers do not enforce SMB signing, malicious actors can use machine-in-the-middle techniques, such as NTLM relay. Further, malicious actors can combine a lack of SMB signing with the name resolution poisoning issue (see above) to gain access to remote systems [<a href="https://attack.mitre.org/versions/v13/techniques/T1021/002/" title="Remote Services: SMB/Windows Admin Shares">T1021.002</a>] without needing to capture and crack any hashes.</p>
<h4><strong><em>2. Improper Separation of User/Administrator Privilege</em></strong></h4>
<p>Administrators often assign multiple roles to one account. These accounts have access to a wide range of devices and services, allowing malicious actors to move through a network quickly with one compromised account without triggering lateral movement and/or privilege escalation detection measures.</p>
<p>Assessment teams have observed the following common account separation misconfigurations:</p>
<ul><li>Excessive account privileges</li>
<li>Elevated service account permissions</li>
<li>Non-essential use of elevated accounts</li>
</ul><h5><strong>Excessive Account Privileges</strong></h5>
<p>Account privileges are intended to control user access to host or application resources to limit access to sensitive information or enforce a least-privilege security model. When account privileges are overly permissive, users can see and/or do things they should not be able to, which becomes a security issue as it increases risk exposure and attack surface.</p>
<p>Expanding organizations can undergo numerous changes in account management, personnel, and access requirements. These changes commonly lead to privilege creep—the granting of excessive access and unnecessary account privileges. Through the analysis of topical and nested AD groups, a malicious actor can find a user account [<a href="https://attack.mitre.org/versions/v13/techniques/T1078/" title="Valid Accounts">T1078</a>] that has been granted account privileges that exceed their need-to-know or least-privilege function. Extraneous access can lead to easy avenues for unauthorized access to data and resources and escalation of privileges in the targeted domain.</p>
<h5><strong>Elevated Service Account Permissions</strong></h5>
<p>Applications often operate using user accounts to access resources. These user accounts, which are known as service accounts, often require elevated privileges. When a malicious actor compromises an application or service using a service account, they will have the same privileges and access as the service account.</p>
<p>Malicious actors can exploit elevated service permissions within a domain to gain unauthorized access and control over critical systems. Service accounts are enticing targets for malicious actors because such accounts are often granted elevated permissions within the domain due to the nature of the service, and because access to use the service can be requested by any valid domain user. Due to these factors, kerberoasting—a form of credential access achieved by cracking service account credentials—is a common technique used to gain control over service account targets [<a href="https://attack.mitre.org/versions/v13/techniques/T1558/003/" title="Steal or Forge Kerberos Tickets: Kerberoasting">T1558.003</a>].</p>
<h5><strong>Non-Essential Use of Elevated Accounts</strong></h5>
<p>IT personnel use domain administrator and other administrator accounts for system and network management due to their inherent elevated privileges. When an administrator account is logged into a compromised host, a malicious actor can steal and use the account's credentials and an AD-generated authentication token [<a href="https://attack.mitre.org/versions/v13/techniques/T1528/" title="Steal Application Access Token">T1528</a>] to move, using the elevated permissions, throughout the domain [<a href="https://attack.mitre.org/versions/v13/techniques/T1550/001/" title="Use Alternate Authentication Material: Application Access Token">T1550.001</a>]. Using an elevated account for normal day-to-day, non-administrative tasks increases the account’s exposure and, therefore, its risk of compromise and its risk to the network.</p>
<p>Malicious actors prioritize obtaining valid domain credentials upon gaining access to a network. Authentication using valid domain credentials allows the execution of secondary enumeration techniques to gain visibility into the target domain and AD structure, including discovery of elevated accounts and where the elevated accounts are used [<a href="https://attack.mitre.org/versions/v13/techniques/T1087/" title="Account Discovery">T1087</a>].</p>
<p>Targeting elevated accounts (such as domain administrator or system administrators) performing day-to-day activities provides the most direct path to achieve domain escalation. Systems or applications accessed by the targeted elevated accounts significantly increase the attack surface available to adversaries, providing additional paths and escalation options.</p>
<p>After obtaining initial access via an account with administrative permissions, an assessment team compromised a domain in under a business day. The team first gained initial access to the system through phishing [<a href="https://attack.mitre.org/versions/v13/techniques/T1566/" title="Phishing">T1566</a>], by which they enticed the end user to download [<a href="https://attack.mitre.org/versions/v13/techniques/T1204" title="User Execution">T1204</a>] and execute malicious payloads. The targeted end-user account had administrative permissions, enabling the team to quickly compromise the entire domain.</p>
<h4><strong><em>3. Insufficient Internal Network Monitoring</em></strong></h4>
<p>Some organizations do not optimally configure host and network sensors for traffic collection and end-host logging. These insufficient configurations could lead to undetected adversarial compromise. Additionally, improper sensor configurations limit the traffic collection capability needed for enhanced baseline development and detract from timely detection of anomalous activity.</p>
<p>Assessment teams have exploited insufficient monitoring to gain access to assessed networks. For example:</p>
<ul><li>An assessment team observed an organization with host-based monitoring, but no network monitoring. Host-based monitoring informs defensive teams about adverse activities on singular hosts and network monitoring informs about adverse activities traversing hosts [<a href="https://attack.mitre.org/versions/v13/tactics/TA0008/" title="Lateral Movement">TA0008</a>]. In this example, the organization could identify infected hosts but could not identify where the infection was coming from, and thus could not stop future lateral movement and infections.</li>
<li>An assessment team gained persistent deep access to a large organization with a mature cyber posture. The organization did not detect the assessment team’s lateral movement, persistence, and command and control (C2) activity, including when the team attempted noisy activities to trigger a security response. For more information on this activity, see CSA <a href="https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-059a" title="CISA Red Team Shares Key Findings to Improve Monitoring and Hardening of Networks">CISA Red Team Shares Key Findings to Improve Monitoring and Hardening of Networks</a>.[13]</li>
</ul><h4><strong><em>4. Lack of Network Segmentation</em></strong></h4>
<p>Network segmentation separates portions of the network with security boundaries. Lack of network segmentation leaves no security boundaries between the user, production, and critical system networks. Insufficient network segmentation allows an actor who has compromised a resource on the network to move laterally across a variety of systems uncontested. Lack of network segregation additionally leaves organizations significantly more vulnerable to potential ransomware attacks and post-exploitation techniques.</p>
<p>Lack of segmentation between IT and operational technology (OT) environments places OT environments at risk. For example, assessment teams have often gained access to OT networks—despite prior assurance that the networks were fully air gapped, with no possible connection to the IT network—by finding special purpose, forgotten, or even accidental network connections [<a href="https://attack.mitre.org/versions/v13/techniques/T1199/" title="Trusted Relationship">T1199</a>].</p>
<h4><em><strong>5. Poor Patch Management</strong></em></h4>
<p>Vendors release patches and updates to address security vulnerabilities. Poor patch management and network hygiene practices often enable adversaries to discover open attack vectors and exploit critical vulnerabilities. Poor patch management includes:</p>
<ul><li>Lack of regular patching</li>
<li>Use of unsupported operating systems (OSs) and outdated firmware</li>
</ul><h5><strong>Lack of Regular Patching</strong></h5>
<p>Failure to apply the latest patches can leave a system open to compromise from publicly available exploits. Due to their ease of discovery—via vulnerability scanning [<a href="https://attack.mitre.org/versions/v13/techniques/T1595/002/" title="Active Scanning: Vulnerability Scanning">T1595.002</a>] and open source research [<a href="https://attack.mitre.org/versions/v13/techniques/T1592/" title="Gather Victim Host Information">T1592</a>]—and exploitation, these systems are immediate targets for adversaries. Allowing critical vulnerabilities to remain on production systems without applying their corresponding patches significantly increases the attack surface. Organizations should prioritize patching <a href="https://www.cisa.gov/known-exploited-vulnerabilities-catalog" title="Known Exploited Vulnerabilities Catalog">known exploited vulnerabilities</a> in their environments.[2]</p>
<p>Assessment teams have observed threat actors exploiting many CVEs in public-facing applications [<a href="https://attack.mitre.org/versions/v13/techniques/T1190/" title="Exploit Public-Facing Application">T1190</a>], including:</p>
<ul><li>CVE-2019-18935 in an unpatched instance of Telerik<sup>®</sup> UI for ASP.NET running on a Microsoft IIS server.[14]</li>
<li>CVE-2021-44228 (Log4Shell) in an unpatched VMware<sup>®</sup> Horizon server.[15]</li>
<li>CVE-2022-24682, CVE-2022-27924, and CVE-2022-27925 chained with CVE-2022-37042, or CVE-2022-30333 in an unpatched Zimbra<sup>®</sup> Collaboration Suite.[16]</li>
</ul><h5><strong>Use of Unsupported OSs and Outdated Firmware</strong></h5>
<p>Using software or hardware that is no longer supported by the vendor poses a significant security risk because new and existing vulnerabilities are no longer patched. Malicious actors can exploit vulnerabilities in these systems to gain unauthorized access, compromise sensitive data, and disrupt operations [<a href="https://attack.mitre.org/versions/v13/techniques/T1210/" title="Exploitation of Remote Services">T1210</a>].</p>
<p>Assessment teams frequently observe organizations using unsupported Windows operating systems without updates <a href="https://support.microsoft.com/en-us/topic/how-to-verify-that-ms17-010-is-installed-f55d3f13-7a9c-688c-260b-477d0ec9f2c8" title="How to verify that MS17-010 is installed">MS17-010</a> and <a href="https://learn.microsoft.com/en-us/security-updates/SecurityBulletins/2008/ms08-067" title="Microsoft Security Bulletin MS08-067 - Critical">MS08-67</a>. These updates, released years ago, address critical remote code execution vulnerabilities.[17],[18]</p>
<h4><em><strong>6. Bypass of System Access Controls</strong></em></h4>
<p>A malicious actor can bypass system access controls by compromising alternate authentication methods in an environment. If a malicious actor can collect hashes in a network, they can use the hashes to authenticate using non-standard means, such as pass-the-hash (PtH) [<a href="https://attack.mitre.org/versions/v13/techniques/T1550/002/" title="Use Alternate Authentication Material: Pass the Hash">T1550.002</a>]. By mimicking accounts without the clear-text password, an actor can expand and fortify their access without detection. Kerberoasting is also one of the most time-efficient ways to elevate privileges and move laterally throughout an organization’s network.</p>
<h4><em><strong>7. Weak or Misconfigured MFA Methods</strong></em></h4>
<h5><strong>Misconfigured Smart Cards or Tokens</strong></h5>
<p>Some networks (generally government or DoD networks) require accounts to use smart cards or tokens. Multifactor requirements can be misconfigured so the password hashes for accounts never change. Even though the password itself is no longer used—because the smart card or token is required instead—there is still a password hash for the account that can be used as an alternative credential for authentication. If the password hash never changes, once a malicious actor has an account’s password hash [<a href="https://attack.mitre.org/versions/v13/techniques/T1111/" title="Multi-Factor Authentication Interception">T1111</a>], the actor can use it indefinitely, via the PtH technique for as long as that account exists.</p>
<h5><strong>Lack of Phishing-Resistant MFA</strong></h5>
<p>Some forms of MFA are vulnerable to phishing, “push bombing” [<a href="https://attack.mitre.org/versions/v13/techniques/T1621/" title="Multi-Factor Authentication Request Generation">T1621</a>], exploitation of Signaling System 7 (SS7) protocol vulnerabilities, and/or “SIM swap” techniques. These attempts, if successful, may allow a threat actor to gain access to MFA authentication credentials or bypass MFA and access the MFA-protected systems. (See CISA’s Fact Sheet <a href="https://www.cisa.gov/sites/default/files/publications/fact-sheet-implementing-phishing-resistant-mfa-508c.pdf" title="Implementing Phishing-Resistant MFA">Implementing Phishing-Resistant MFA</a> for more information.)[3]</p>
<p>For example, assessment teams have used voice phishing to convince users to provide missing MFA information [<a href="https://attack.mitre.org/versions/v13/techniques/T1598/" title="Phishing for Information">T1598</a>]. In one instance, an assessment team knew a user’s main credentials, but their login attempts were blocked by MFA requirements. The team then masqueraded as IT staff and convinced the user to provide the MFA code over the phone, allowing the team to complete their login attempt and gain access to the user’s email and other organizational resources.</p>
<h4><em><strong>8. Insufficient ACLs on Network Shares and Services</strong></em></h4>
<p>Data shares and repositories are primary targets for malicious actors. Network administrators may improperly configure ACLs to allow for unauthorized users to access sensitive or administrative data on shared drives.</p>
<p>Actors can use commands, open source tools, or custom malware to look for shared folders and drives [<a href="https://attack.mitre.org/versions/v13/techniques/T1135/" title="Network Share Discovery">T1135</a>].</p>
<ul><li>In one compromise, a team observed actors use the <code>net share</code> command—which displays information about shared resources on the local computer—and the <code>ntfsinfo</code> command to search network shares on compromised computers. In the same compromise, the actors used a custom tool, <a href="https://www.cisa.gov/sites/default/files/2023-06/mar-10365227.r1.v1.clear_.pdf" title="Malware Analysis Report - CovalentStealer">CovalentStealer</a>, which is designed to identify file shares on a system, categorize the files [<a href="https://attack.mitre.org/versions/v13/techniques/T1083/" title="File and Directory Discovery">T1083</a>], and upload the files to a remote server [<a href="https://attack.mitre.org/versions/v13/tactics/TA0010/" title="Exfiltration">TA0010</a>].[19],[20]</li>
<li>Ransomware actors have used the SoftPerfect<sup>®</sup> Network Scanner, <code>netscan.exe</code>—which can ping computers [<a href="https://attack.mitre.org/versions/v13/techniques/T1018/" title="Remote System Discovery">T1018</a>], scan ports [<a href="https://attack.mitre.org/versions/v13/techniques/T1046/" title="Network Service Discovery">T1046</a>], and discover shared folders—and SharpShares to enumerate accessible network shares in a domain.[21],[22]</li>
</ul><p>Malicious actors can then collect and exfiltrate the data from the shared drives and folders. They can then use the data for a variety of purposes, such as extortion of the organization or as intelligence when formulating intrusion plans for further network compromise. Assessment teams routinely find sensitive information on network shares [<a href="https://attack.mitre.org/versions/v13/techniques/T1039/" title="Data from Network Shared Drive">T1039</a>] that could facilitate follow-on activity or provide opportunities for extortion. Teams regularly find drives containing cleartext credentials [<a href="https://attack.mitre.org/versions/v13/techniques/T1552/" title="Unsecured Credentials">T1552</a>] for service accounts, web applications, and even domain administrators.</p>
<p>Even when further access is not directly obtained from credentials in file shares, there can be a treasure trove of information for improving situational awareness of the target network, including the network’s topology, service tickets, or vulnerability scan data. In addition, teams regularly identify sensitive data and PII on shared drives (e.g., scanned documents, social security numbers, and tax returns) that could be used for extortion or social engineering of the organization or individuals.</p>
<h4><em><strong>9. Poor Credential Hygiene</strong></em></h4>
<p>Poor credential hygiene facilitates threat actors in obtaining credentials for initial access, persistence, lateral movement, and other follow-on activity, especially if phishing-resistant MFA is not enabled. Poor credential hygiene includes:</p>
<ul><li>Easily crackable passwords</li>
<li>Cleartext password disclosure</li>
</ul><h5><strong>Easily Crackable Passwords</strong></h5>
<p>Easily crackable passwords are passwords that a malicious actor can guess within a short time using relatively inexpensive computing resources. The presence of easily crackable passwords on a network generally stems from a lack of password length (i.e., shorter than 15 characters) and randomness (i.e., is not unique or can be guessed). This is often due to lax requirements for passwords in organizational policies and user training. A policy that only requires short and simple passwords leaves user passwords susceptible to password cracking. Organizations should provide or allow employee use of password managers to enable the generation and easy use of secure, random passwords for each account.</p>
<p>Often, when a credential is obtained, it is a hash (one-way encryption) of the password and not the password itself. Although some hashes can be used directly with PtH techniques, many hashes need to be cracked to obtain usable credentials. The cracking process takes the captured hash of the user’s plaintext password and leverages dictionary wordlists and rulesets, often using a database of billions of previously compromised passwords, in an attempt to find the matching plaintext password [<a href="https://attack.mitre.org/versions/v13/techniques/T1110/002/" title="Brute Force: Password Cracking">T1110.002</a>].</p>
<p>One of the primary ways to crack passwords is with the open source tool, Hashcat, combined with password lists obtained from publicly released password breaches. Once a malicious actor has access to a plaintext password, they are usually limited only by the account’s permissions. In some cases, the actor may be restricted or detected by advanced defense-in-depth and zero trust implementations as well, but this has been a rare finding in assessments thus far.</p>
<p>Assessment teams have cracked password hashes for NTLM users, Kerberos service account tickets, NetNTLMv2, and PFX stores [<a href="https://attack.mitre.org/versions/v13/techniques/T1555/" title="Credentials from Password Stores">T1555</a>], enabling the team to elevate privileges and move laterally within networks. In 12 hours, one team cracked over 80% of all users' passwords in an Active Directory, resulting in hundreds of valid credentials.</p>
<h5><strong>Cleartext Password Disclosure</strong></h5>
<p>Storing passwords in cleartext is a serious security risk. A malicious actor with access to files containing cleartext passwords [<a href="https://attack.mitre.org/versions/v13/techniques/T1552/001/" title="Unsecured Credentials: Credentials In Files">T1552.001</a>] could use these credentials to log into the affected applications or systems under the guise of a legitimate user. Accountability is lost in this situation as any system logs would record valid user accounts accessing applications or systems.</p>
<p>Malicious actors search for text files, spreadsheets, documents, and configuration files in hopes of obtaining cleartext passwords. Assessment teams frequently discover cleartext passwords, allowing them to quickly escalate the emulated intrusion from the compromise of a regular domain user account to that of a privileged account, such as a Domain or Enterprise Administrator. A common tool used for locating cleartext passwords is the open source tool, <a href="https://github.com/SnaffCon/Snaffler" title="SnaffCon / Snaffler">Snaffler</a>.[23]</p>
<h4><em><strong>10. Unrestricted Code Execution</strong></em></h4>
<p>If unverified programs are allowed to execute on hosts, a threat actor can run arbitrary, malicious payloads within a network.</p>
<p>Malicious actors often execute code after gaining initial access to a system. For example, after a user falls for a phishing scam, the actor usually convinces the victim to run code on their workstation to gain remote access to the internal network. This code is usually an unverified program that has no legitimate purpose or business reason for running on the network.</p>
<p>Assessment teams and malicious actors frequently leverage unrestricted code execution in the form of executables, dynamic link libraries (DLLs), HTML applications, and macros (scripts used in office automation documents) [<a href="https://attack.mitre.org/versions/v13/techniques/T1059/005/" title="Command and Scripting Interpreter: Visual Basic">T1059.005</a>] to establish initial access, persistence, and lateral movement. In addition, actors often use scripting languages [<a href="https://attack.mitre.org/versions/v13/techniques/T1059/" title="Command and Scripting Interpreter">T1059</a>] to obscure their actions [<a href="https://attack.mitre.org/versions/v13/techniques/T1027/010/" title="Obfuscated Files or Information: Command Obfuscation">T1027.010</a>] and bypass allowlisting—where organizations restrict applications and other forms of code by default and only allow those that are known and trusted. Further, actors may load vulnerable drivers and then exploit the drivers’ known vulnerabilities to execute code in the kernel with the highest level of system privileges to completely compromise the device [<a href="https://attack.mitre.org/versions/v13/techniques/T1068/" title="Exploitation for Privilege Escalation">T1068</a>].</p>
<h3><strong>MITIGATIONS</strong></h3>
<h4><em><strong>Network Defenders</strong></em></h4>
<p>NSA and CISA recommend network defenders implement the recommendations that follow to mitigate the issues identified in this advisory. These mitigations align with the Cross-Sector Cybersecurity Performance Goals (CPGs) developed by CISA and the National Institute of Standards and Technology (NIST) as well as with the <a href="https://attack.mitre.org/versions/v13/mitigations/enterprise/" title="Enterprise Mitigations">MITRE ATT&amp;CK Enterprise Mitigations</a> and <a href="https://d3fend.mitre.org/" title="A knowledge graph of cybersecurity countermeasures">MITRE D3FEND</a> frameworks.</p>
<p>The CPGs provide a minimum set of practices and protections that CISA and NIST recommend all organizations implement. CISA and NIST based the CPGs on existing cybersecurity frameworks and guidance to protect against the most common and impactful threats, tactics, techniques, and procedures. Visit CISA’s <a href="https://www.cisa.gov/cpg" title="Cross-Sector Cybersecurity Performance Goals">Cross-Sector Cybersecurity Performance Goals</a> for more information on the CPGs, including additional recommended baseline protections.[24]</p>
<h5><strong>Mitigate Default Configurations of Software and Applications</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 1: Recommendations for Network Defenders to Mitigate Default Configurations of Software and Applications</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Default configurations of software and applications</p>
</td>
<td>
<ul><li><strong>Modify the default configuration of applications and appliances before deployment</strong> in a production environment [<a href="https://attack.mitre.org/versions/v13/mitigations/M1013/" title="Application Developer Guidance">M1013</a>],[<a href="https://d3fend.mitre.org/technique/d3f:ApplicationConfigurationHardening/" title="Application Configuration Hardening">D3-ACH</a>]. Refer to hardening guidelines provided by the vendor and related cybersecurity guidance (e.g., <a href="https://public.cyber.mil/stigs/" title="Security Technical Implementation Guides (STIGs)">DISA's Security Technical Implementation Guides</a> (STIGs) and configuration guides).[25],[26],[27]</li>
</ul></td>
</tr><tr><td>
<p>Default configurations of software and applications: Default Credentials</p>
</td>
<td>
<ul><li><strong>Change or disable vendor-supplied default usernames and passwords of services, software, and equipment</strong> when installing or commissioning [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.A</a>]. When resetting passwords, enforce the use of “strong” passwords (i.e., passwords that are more than 15 characters and random [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.B</a>]) and follow hardening guidelines provided by the vendor, <a href="https://public.cyber.mil/stigs/" title="Security Technical Implementation Guides (STIGs)">STIGs</a>, <a href="https://www.nsa.gov/cybersecurity-guidance" title="CYBERSECURITY ADVISORIES &amp; GUIDANCE">NSA</a>, and/or <a href="https://csrc.nist.gov/publications/detail/sp/800-63b/final" title="Digital Identity Guidelines: Authentication and Lifecycle Management">NIST</a> [<a href="https://attack.mitre.org/versions/v13/mitigations/M1027/" title="Password Policies">M1027</a>],[<a href="https://d3fend.mitre.org/technique/d3f:StrongPasswordPolicy/" title="Strong Password Policy">D3-SPP</a>].[25],[26],[28],[29]</li>
</ul></td>
</tr><tr><td>
<p>Default service permissions and configuration settings: Insecure Active Directory Certificate Services</p>
</td>
<td>
<ul><li><strong>Ensure the secure configuration of ADCS implementations</strong>. Regularly update and patch the controlling infrastructure (e.g., for CVE-2021-36942), employ monitoring and auditing mechanisms, and implement strong access controls to protect the infrastructure.
<ul><li><strong>If not needed, disable web-enrollment in ADCS servers</strong>. See Microsoft: <a href="https://learn.microsoft.com/en-us/powershell/module/adcsdeployment/uninstall-adcswebenrollment?view=windowsserver2022-ps" title="Uninstall-AdcsWebEnrollment">Uninstall-AdcsWebEnrollment (ADCSDeployment)</a> for guidance.[30]</li>
<li>If web enrollment is needed on ADCS servers:
<ul><li><strong>Enable Extended Protection for Authentication (EPA) for Client Authority Web Enrollment</strong>. This is done by choosing the “Required” option. For guidance, see Microsoft: <a href="https://support.microsoft.com/en-au/topic/kb5021989-extended-protection-for-authentication-1b6ea84d-377b-4677-a0b8-af74efbb243f" title="KB5021989: Extended Protection for Authentication">KB5021989: Extended Protection for Authentication</a>.[31]</li>
<li><strong>Enable “Require SSL”</strong> on the ADCS server.</li>
</ul></li>
<li><strong>Disable NTLM</strong> on all ADCS servers. For guidance, see Microsoft: <a href="https://learn.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/network-security-restrict-ntlm-ntlm-authentication-in-this-domain" title="Network security: Restrict NTLM: NTLM authentication in this domain">Network security Restrict NTLM in this domain - Windows Security | Microsoft Learn</a> and <a href="https://learn.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/network-security-restrict-ntlm-incoming-ntlm-traffic" title="Network security: Restrict NTLM: Incoming NTLM traffic">Network security Restrict NTLM Incoming NTLM traffic - Windows Security</a>.[32],[33]</li>
<li><strong>Disable SAN for UPN Mapping</strong>. For guidance see, Microsoft: <a href="https://learn.microsoft.com/en-us/troubleshoot/windows-server/windows-security/disable-subject-alternative-name-upn-mapping" title="How to disable the Subject Alternative Name for UPN mapping">How to disable the SAN for UPN mapping - Windows Server</a>. Instead, smart card authentication can use the <code>altSecurityIdentities</code> attribute for explicit mapping of certificates to accounts more securely.[34]</li>
</ul></li>
<li><strong>Review all permissions on the ADCS templates on applicable servers</strong>. Restrict enrollment rights to only those users or groups that require it. Disable the <code>CT_FLAG_ENROLLEE_SUPPLIES_SUBJECT</code> flag from templates to prevent users from supplying and editing sensitive security settings within these templates. Enforce manager approval for requested certificates. Remove <code>FullControl</code>, <code>WriteDacl</code>, and <code>Write</code> property permissions from low-privileged groups, such as domain users, to certificate template objects.</li>
</ul></td>
</tr><tr><td>
<p>Default service permissions and configuration settings: Insecure legacy protocols/services</p>
</td>
<td>
<ul><li><strong>Determine if LLMNR and NetBIOS are required for essential business operations</strong>.
<ul><li>If not required, <strong>disable LLMNR and NetBIOS </strong>in local computer security settings or by group policy.</li>
</ul></li>
</ul></td>
</tr><tr><td>
<p>Default service permissions and configuration settings: Insecure SMB service</p>
</td>
<td>
<ul><li><strong>Require SMB signing</strong> for both SMB client and server on all systems.[25] This should prevent certain adversary-in-the-middle and pass-the-hash techniques. For more information on SMB signing, see Microsoft: <a href="https://learn.microsoft.com/troubleshoot/windows-server/networking/overview-server-message-block-signing" title="Overview of Server Message Block signing">Overview of Server Message Block Signing</a>. [35] <strong>Note</strong>: Beginning in <a href="https://aka.ms/SmbSigningRequired" title="SMB signing required by default in Windows">Microsoft Windows 11 Insider Preview Build 25381</a>, Windows requires SMB signing for all communications.[36]</li>
</ul></td>
</tr></tbody></table><h5><strong>Mitigate Improper Separation of User/Administrator Privilege</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 2: Recommendations for Network Defenders to Mitigate Improper Separation of User/Administrator Privilege</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Improper separation of user/administrator privilege:</p>
<ul><li>Excessive account privileges,</li>
<li>Elevated service account permissions, and</li>
<li>Non-essential use of elevated accounts</li>
</ul></td>
<td>
<ul><li><strong>Implement authentication, authorization, and accounting (AAA) systems</strong> [<a href="https://attack.mitre.org/versions/v13/mitigations/M1018/" title="User Account Management">M1018</a>] to limit actions users can perform, and review logs of user actions to detect unauthorized use and abuse. Apply least privilege principles to user accounts and groups allowing only the performance of authorized actions.</li>
<li><strong>Audit user accounts </strong>and remove those that are inactive or unnecessary on a routine basis [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.D</a>]. Limit the ability for user accounts to create additional accounts.</li>
<li><strong>Restrict use of privileged accounts to perform general tasks</strong>, such as accessing emails and browsing the Internet [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.E</a>],[<a href="https://d3fend.mitre.org/technique/d3f:UserAccountPermissions/" title="User Account Permissions">D3-UAP</a>]. See NSA Cybersecurity Information Sheet (CSI) <a href="https://media.defense.gov/2019/Sep/09/2002180330/-1/-1/0/Defend%20Privileges%20and%20Accounts%20-%20Copy.pdf" title="DEFEND PRIVILEGES AND ACCOUNTS">Defend Privileges and Accounts</a> for more information.[37]</li>
<li><strong>Limit the number of users within the organization with an identity and access management (IAM) role</strong> that has administrator privileges. Strive to reduce all permanent privileged role assignments, and conduct periodic entitlement reviews on IAM users, roles, and policies.</li>
<li><strong>Implement time-based access for privileged accounts</strong>. For example, the just-in-time access method provisions privileged access when needed and can support enforcement of the principle of least privilege (as well as the Zero Trust model) by setting network-wide policy to automatically disable admin accounts at the Active Directory level. As needed, individual users can submit requests through an automated process that enables access to a system for a set timeframe. In cloud environments, just-in-time elevation is also appropriate and may be implemented using per-session federated claims or privileged access management tools.</li>
<li><strong>Restrict domain users from being in the local administrator group</strong> on multiple systems.</li>
<li><strong>Run daemonized applications (services) with non-administrator accounts</strong> when possible.</li>
<li><strong>Only configure service accounts with the permissions necessary for the services they control to operate</strong>.</li>
<li><strong>Disable unused services and implement ACLs</strong> to protect services.</li>
</ul></td>
</tr></tbody></table><h5><strong>Mitigate Insufficient Internal Network Monitoring</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 3: Recommendations for Network Defenders to Mitigate Insufficient Internal Network Monitoring</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Insufficient internal network monitoring</p>
</td>
<td>
<ul><li><strong>Establish a baseline of applications and services</strong>, and routinely audit their access and use, especially for administrative activity [<a href="https://d3fend.mitre.org/technique/d3f:AdministrativeNetworkActivityAnalysis/" title="Administrative Network Activity Analysis">D3-ANAA</a>]. For instance, administrators should routinely audit the access lists and permissions for of all web applications and services [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.O</a>],[<a href="https://attack.mitre.org/versions/v13/mitigations/M1047" title="Audit">M1047</a>]. Look for suspicious accounts, investigate them, and remove accounts and credentials, as appropriate, such as accounts of former staff.[39]</li>
<li><strong>Establish a baseline that represents an organization’s normal traffic activity</strong>, network performance, host application activity, and user behavior; investigate any deviations from that baseline [<a href="https://d3fend.mitre.org/technique/d3f:NetworkTrafficCommunityDeviation/" title="Network Traffic Community Deviation">D3-NTCD</a>],[<a href="https://d3fend.mitre.org/technique/d3f:Client-serverPayloadProfiling/" title="Client-server Payload Profiling">D3-CSPP</a>],[<a href="https://d3fend.mitre.org/technique/d3f:UserBehaviorAnalysis" title="User Behavior Analysis">D3-UBA</a><u>].</u><u>[</u><u>40</u><u>]</u></li>
<li><strong>Use auditing tools capable of detecting privilege and service abuse opportunities </strong>on systems within an enterprise and correct them [<a href="https://attack.mitre.org/versions/v13/mitigations/M1047" title="Audit">M1047</a>].</li>
<li><strong>Implement a security information and event management (SIEM) system</strong> to provide log aggregation, correlation, querying, visualization, and alerting from network endpoints, logging systems, endpoint and detection response (EDR) systems and intrusion detection systems (IDS) [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.T</a>],[<a href="https://d3fend.mitre.org/technique/d3f:NetworkTrafficAnalysis" title="Network Traffic Analysis">D3-NTA</a>].</li>
</ul></td>
</tr></tbody></table><h5><strong>Mitigate Lack of Network Segmentation</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 4: Recommendations for Network Defenders to Mitigate Lack of Network Segmentation</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Lack of network segmentation</p>
</td>
<td>
<ul><li><strong>Implement next-generation firewalls</strong> to perform deep packet filtering, stateful inspection, and application-level packet inspection [<a href="https://d3fend.mitre.org/technique/d3f:NetworkTrafficFiltering/">D3-NTF</a>]. Deny or drop improperly formatted traffic that is incongruent with application-specific traffic permitted on the network. This practice limits an actor’s ability to abuse allowed application protocols. The practice of allowlisting network applications does not rely on generic ports as filtering criteria, enhancing filtering fidelity. For more information on application-aware defenses, see NSA CSI <a href="https://media.defense.gov/2019/Sep/09/2002180325/-1/-1/0/Segment%20Networks%20and%20Deploy%20Application%20Aware%20Defenses%20-%20Copy.pdf" title="SEGMENT NETWORKS AND DEPLOY APPLICATION-AWARE DEFENSES">Segment Networks and Deploy Application-Aware Defenses</a>.[41]</li>
<li><strong>Engineer network segments to isolate critical systems, functions, and resources</strong> [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.F</a>],[<a href="https://d3fend.mitre.org/technique/d3f:NetworkIsolation/" title="Network Isolation">D3-NI</a>]. Establish physical and logical segmentation controls, such as virtual local area network (VLAN) configurations and properly configured access control lists (ACLs) on infrastructure devices [<a href="https://attack.mitre.org/versions/v13/mitigations/M1030/" title="Network Segmentation">M1030</a>]. These devices should be baselined and audited to prevent access to potentially sensitive systems and information. Leverage properly configured Demilitarized Zones (DMZs) to reduce service exposure to the Internet.[42],[43],[44]</li>
<li><strong>Implement separate Virtual Private Cloud (VPC) instances</strong> to isolate essential cloud systems. Where possible, implement Virtual Machines (VM) and Network Function Virtualization (NFV) to enable micro-segmentation of networks in virtualized environments and cloud data centers. Employ secure VM firewall configurations in tandem with macro segmentation.</li>
</ul></td>
</tr></tbody></table><h5><strong>Mitigate Poor Patch Management</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 5: Recommendations for Network Defenders to Mitigate Poor Patch Management</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Poor patch management: Lack of regular patching</p>
</td>
<td>
<ul><li><strong>Ensure organizations implement and maintain an efficient patch management process</strong> that enforces the use of up-to-date, stable versions of OSs, browsers, and software [<a href="https://attack.mitre.org/versions/v13/mitigations/M1051" title="Update Software">M1051</a>],[<a href="https://d3fend.mitre.org/technique/d3f:SoftwareUpdate/" title="Software Update">D3-SU</a>].[45]</li>
<li><strong>Update software regularly by employing patch management</strong> for externally exposed applications, internal enterprise endpoints, and servers. Prioritize patching <a href="https://www.cisa.gov/known-exploited-vulnerabilities-catalog" title="Known Exploited Vulnerabilities Catalog">known exploited vulnerabilities</a>.[2]</li>
<li><strong>Automate the update process as much as possible</strong> and use vendor-provided updates. Consider using automated patch management tools and software update tools.</li>
<li>Where patching is not possible due to limitations, <strong>segment networks </strong>to limit exposure of the vulnerable system or host.</li>
</ul></td>
</tr><tr><td>
<p>Poor patch management: Use of unsupported OSs and outdated firmware</p>
</td>
<td>
<ul><li><strong>Evaluate the use of unsupported hardware and software and discontinue use</strong> as soon as possible. If discontinuing is not possible, implement additional network protections to mitigate the risk.[45]</li>
<li><strong>Patch the Basic Input/Output System (BIOS)</strong> and other firmware to prevent exploitation of known vulnerabilities.</li>
</ul></td>
</tr></tbody></table><h5><strong>Mitigate Bypass of System Access Controls</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 6: Recommendations for Network Defenders to Mitigate Bypass of System Access Controls</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Bypass of system access controls</p>
</td>
<td>
<ul><li><strong>Limit credential overlap across systems</strong> to prevent credential compromise and reduce a malicious actor's ability to move laterally between systems [<a href="https://attack.mitre.org/versions/v13/mitigations/M1026" title="Privileged Account Management">M1026</a>],[<a href="https://d3fend.mitre.org/technique/d3f:CredentialHardening/" title="Credential Hardening">D3-CH</a>]. Implement a method for monitoring non-standard logon events through host log monitoring [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.G</a>].</li>
<li><strong>Implement an effective and routine patch management process</strong>. Mitigate PtH techniques by applying patch <a href="https://learn.microsoft.com/en-us/security-updates/SecurityAdvisories/2016/2871997" title="Microsoft Security Advisory 2871997">KB2871997</a> to Windows 7 and newer versions to limit default access of accounts in the local administrator group [<a href="https://attack.mitre.org/versions/v13/mitigations/M1051" title="Update Software">M1051</a>],[<a href="https://d3fend.mitre.org/technique/d3f:SoftwareUpdate/" title="Software Update">D3-SU</a>].[46]</li>
<li><strong>Enable the PtH mitigations to apply User Account Control (UAC) restrictions</strong> to local accounts upon network logon [<a href="https://attack.mitre.org/versions/v13/mitigations/M1052" title="User Account Control">M1052</a>],[<a href="https://d3fend.mitre.org/technique/d3f:UserAccountPermissions/" title="User Account Permissions">D3-UAP</a>].</li>
<li><strong>Deny domain users the ability to be in the local administrator group </strong>on multiple systems [<a href="https://attack.mitre.org/versions/v13/mitigations/M1018" title="User Account Management">M1018</a>],[<a href="https://d3fend.mitre.org/technique/d3f:UserAccountPermissions/" title="User Account Permissions">D3-UAP</a>].</li>
<li><strong>Limit workstation-to-workstation communications</strong>. All workstation communications should occur through a server to prevent lateral movement [<a href="https://attack.mitre.org/versions/v13/mitigations/M1018" title="User Account Management">M1018</a>],[<a href="https://d3fend.mitre.org/technique/d3f:UserAccountPermissions/" title="User Account Permissions">D3-UAP</a>].</li>
<li><strong>Use privileged accounts only on systems requiring those privileges</strong> [<a href="https://attack.mitre.org/versions/v13/mitigations/M1018" title="User Account Management">M1018</a>],[<a href="https://d3fend.mitre.org/technique/d3f:UserAccountPermissions/" title="User Account Permissions">D3-UAP</a>]. Consider using dedicated Privileged Access Workstations for privileged accounts to better isolate and protect them.[37]</li>
</ul></td>
</tr></tbody></table><h5><strong>Mitigate Weak or Misconfigured MFA Methods</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 7: Recommendations for Network Defenders to Mitigate Weak or Misconfigured MFA Methods</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Weak or misconfigured MFA methods: Misconfigured smart cards or tokens</p>

</td>
<td>
<ul><li>In Windows environments:
<ul><li><strong>Disable the use of New Technology LAN Manager (NTLM) and other legacy authentication protocols</strong> that are susceptible to PtH due to their use of password hashes [<a href="https://attack.mitre.org/versions/v13/mitigations/M1032">M1032</a>],[<a href="https://d3fend.mitre.org/technique/d3f:Multi-factorAuthentication">D3-MFA</a><u>]. </u>For guidance, see Microsoft: <a href="https://learn.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/network-security-restrict-ntlm-ntlm-authentication-in-this-domain">Network security Restrict NTLM in this domain - Windows Security | Microsoft Learn</a> and <a href="https://learn.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/network-security-restrict-ntlm-incoming-ntlm-traffic">Network security Restrict NTLM Incoming NTLM traffic - Windows Security</a>.[32],[33]</li>
<li><strong>Use</strong><strong> built-in functionality via Windows Hello for Business or Group Policy Objects (GPOs) to regularly re-randomize password hashes</strong> associated with smartcard-required accounts. Ensure that the hashes are changed at least as often as organizational policy requires passwords to be changed [<a href="https://attack.mitre.org/versions/v13/mitigations/M1027">M1027</a>],[<a href="https://d3fend.mitre.org/technique/d3f:CredentialRotation">D3-CRO</a>]. Prioritize upgrading any environments that cannot utilize this built-in functionality.</li>
</ul></li>
<li>As a longer-term effort, <strong>implement cloud-primary authentication solution using modern open standards</strong>. See CISA’s <a href="https://www.cisa.gov/sites/default/files/2023-03/csso-scuba-guidance_document-hybrid_identity_solutions_architecture-2023.03.22-final.pdf">Secure Cloud Business Applications (SCuBA) Hybrid Identity Solutions Architecture</a> for more information.[47] <strong>Note:</strong> this document is part of CISA’s <a href="https://www.cisa.gov/resources-tools/services/secure-cloud-business-applications-scuba-project">Secure Cloud Business Applications (SCuBA) project</a>, which provides guidance for FCEB agencies to secure their cloud business application environments and to protect federal information that is created, accessed, shared, and stored in those environments. Although tailored to FCEB agencies, the project’s guidance is applicable to all organizations.[48]</li>
</ul></td>
</tr><tr><td>
<p>Weak or misconfigured MFA methods: Lack of phishing-resistant MFA</p>
</td>
<td>
<ul><li><strong>Enforce </strong><a href="https://www.cisa.gov/sites/default/files/publications/fact-sheet-implementing-phishing-resistant-mfa-508c.pdf"><strong>phishing-resistant MFA</strong></a><strong> universally</strong> for access to sensitive data and on as many other resources and services as possible [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf">CPG 2.H</a>].[3],[49]</li>
</ul></td>
</tr></tbody></table><h5><strong>Mitigate Insufficient ACLs on Network Shares and Services</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 8: Recommendations for Network Defenders to Mitigate Insufficient ACLs on Network Shares and Services</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Insufficient ACLs on network shares and services</p>
</td>
<td>
<ul><li><strong>Implement secure configurations for all storage devices</strong> and network shares that grant access to authorized users only.</li>
<li><strong>Apply the principal of least privilege</strong> to important information resources to reduce risk of unauthorized data access and manipulation.</li>
<li><strong>Apply restrictive permissions to files and directories</strong>, and prevent adversaries from modifying ACLs [<a href="https://attack.mitre.org/versions/v13/mitigations/M1022" title="Restrict File and Directory Permissions">M1022</a>],[<a href="https://d3fend.mitre.org/technique/d3f:LocalFilePermissions" title="Local File Permissions">D3-LFP</a><u>]</u>.</li>
<li><strong>Set restrictive permissions on files and folders containing sensitive private keys</strong> to prevent unintended access [<a href="https://attack.mitre.org/versions/v13/mitigations/M1022" title="Restrict File and Directory Permissions">M1022</a>],[<a href="https://d3fend.mitre.org/technique/d3f:LocalFilePermissions" title="Local File Permissions">D3-LFP</a><u>]</u>.</li>
<li><strong>Enable the Windows Group Policy security setting, "Do Not Allow Anonymous Enumeration of Security Account Manager (SAM) Accounts and Shares,"</strong> to limit users who can enumerate network shares.</li>
</ul></td>
</tr></tbody></table><h5><strong>Mitigate Poor Credential Hygiene</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 9: Recommendations for Network Defenders to Mitigate Poor Credential Hygiene</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Poor credential hygiene: easily crackable passwords</p>

</td>
<td>
<ul><li><strong>Follow National Institute of Standards and Technologies (NIST) </strong><a href="https://csrc.nist.gov/publications/detail/sp/800-63b/final" title="Digital Identity Guidelines: Authentication and Lifecycle Management"><strong>guidelines</strong></a><strong> when creating password policies</strong> to enforce use of “strong” passwords that cannot be cracked [<a href="https://attack.mitre.org/versions/v13/mitigations/M1027" title="Digital Identity Guidelines: Authentication and Lifecycle Management">M1027</a>],[<a href="https://d3fend.mitre.org/technique/d3f:StrongPasswordPolicy/" title="Strong Password Policy">D3-SPP</a>].[29] Consider using password managers to generate and store passwords.</li>
<li><strong>Do not reuse local administrator account passwords across systems</strong>. Ensure that passwords are “strong” and unique [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.B</a>],[<a href="https://attack.mitre.org/versions/v13/mitigations/M1027" title="Password Policies">M1027</a>],[<a href="https://d3fend.mitre.org/technique/d3f:StrongPasswordPolicy/" title="Strong Password Policy">D3-SPP</a>].</li>
<li><strong>Use “strong” passphrases for private keys</strong> to make cracking resource intensive. Do not store credentials within the registry in Windows systems. Establish an organizational policy that prohibits password storage in files.</li>
<li><strong>Ensure adequate password length (ideally 25+ characters) and complexity requirements for Windows service accounts</strong> and implement passwords with periodic expiration on these accounts [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.B</a>],[<a href="https://attack.mitre.org/versions/v13/mitigations/M1027" title="Password Policies">M1027</a>],[<a href="https://d3fend.mitre.org/technique/d3f:StrongPasswordPolicy/" title="Strong Password Policy">D3-SPP</a>]. Use Managed Service Accounts, when possible, to manage service account passwords automatically.</li>
</ul></td>
</tr><tr><td>
<p>Poor credential hygiene: cleartext password disclosure</p>

</td>
<td>
<ul><li><strong>Implement a review process for files and systems to look for cleartext account credentials</strong>. When credentials are found, remove, change, or encrypt them [<a href="https://d3fend.mitre.org/technique/d3f:FileEncryption/" title="File Encryption">D3-FE</a>]. Conduct periodic scans of server machines using automated tools to determine whether sensitive data (e.g., personally identifiable information, protected health information) or credentials are stored. Weigh the risk of storing credentials in password stores and web browsers. If system, software, or web browser credential disclosure is of significant concern, technical controls, policy, and user training may prevent storage of credentials in improper locations.</li>
<li><strong>Store hashed passwords using </strong><a href="https://www.cnss.gov/CNSS/issuances/Policies.cfm" title="POLICIES"><strong>Committee on National Security Systems Policy (CNSSP)-15</strong></a><strong> and </strong><a href="https://www.nsa.gov/Press-Room/News-Highlights/Article/Article/3148990/nsa-releases-future-quantum-resistant-qr-algorithm-requirements-for-national-se/" title="NSA Releases Future Quantum-Resistant (QR) Algorithm Requirements for National Security Systems"><strong>Commercial National Security Algorithm Suite</strong></a><strong> (CNSA) approved algorithms</strong>.[50],[51]</li>
<li><strong>Consider using group Managed Service Accounts (gMSAs) or third-party software</strong> to implement secure password-storage applications.</li>
</ul></td>
</tr></tbody></table><h5><strong>Mitigate Unrestricted Code Execution</strong></h5>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 10: Recommendations for Network Defenders to Mitigate Unrestricted Code Execution</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Network Defenders</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Unrestricted code execution</p>
</td>
<td>
<ul><li><strong>Enable system settings that prevent the ability to run applications downloaded from untrusted sources</strong>.[52]</li>
<li><strong>Use application control tools that restrict program execution by default, also known as allowlisting</strong> [<a href="https://d3fend.mitre.org/technique/d3f:ExecutableAllowlisting/" title="Executable Allowlisting">D3-EAL</a>]. Ensure that the tools examine digital signatures and other key attributes, rather than just relying on filenames, especially since malware often attempts to masquerade as common Operating System (OS) utilities [<a href="https://attack.mitre.org/versions/v13/mitigations/M1038" title="Execution Prevention">M1038</a>]. Explicitly allow certain .exe files to run, while blocking all others by default.</li>
<li><strong>Block or prevent the execution of known vulnerable drivers that adversaries may exploit to execute code in kernel mode</strong>. Validate driver block rules in audit mode to ensure stability prior to production deployment [<a href="https://d3fend.mitre.org/technique/d3f:OperatingSystemMonitoring/" title="Operating System Monitoring">D3-OSM</a>].</li>
<li><strong>Constrain scripting languages to prevent malicious activities, audit script logs, and restrict scripting languages</strong> that are not used in the environment [<a href="https://d3fend.mitre.org/technique/d3f:ScriptExecutionAnalysis/" title="Script Execution Analysis">D3-SEA</a>]. See joint Cybersecurity Information Sheet: <a href="https://media.defense.gov/2022/Jun/22/2003021689/-1/-1/1/CSI_KEEPING_POWERSHELL_SECURITY_MEASURES_TO_USE_AND_EMBRACE_20220622.PDF" title="Keeping PowerShell: Security Measures to Use and Embrace">Keeping PowerShell: Security Measures to Use and Embrace</a>.[53]</li>
<li><strong>Use read-only containers and minimal images</strong>, when possible, to prevent the running of commands.</li>
<li><strong>Regularly analyze border and host-level protections, including spam-filtering capabilities</strong>, to ensure their continued effectiveness in blocking the delivery and execution of malware [<a href="https://d3fend.mitre.org/technique/d3f:MessageAnalysis/" title="Message Analysis">D3-MA</a>]. Assess whether HTML Application (HTA) files are used for business purposes in your environment; if HTAs are not used, remap the default program for opening them from mshta.exe to notepad.exe.</li>
</ul></td>
</tr></tbody></table><h4><em><strong>Software Manufacturers</strong></em></h4>
<p>NSA and CISA recommend software manufacturers implement the recommendations in Table 11 to reduce the prevalence of misconfigurations identified in this advisory. These mitigations align with tactics provided in joint guide <a href="https://www.cisa.gov/resources-tools/resources/secure-by-design-and-default" title="Security-by-Design and -Default">Shifting the Balance of Cybersecurity Risk: Principles and Approaches for Security-by-Design and -Default</a>. NSA and CISA strongly encourage software manufacturers apply these recommendations to ensure their products are secure “out of the box” and do not require customers to spend additional resources making configuration changes, performing monitoring, and conducting routine updates to keep their systems secure.[1]</p>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 11: Recommendations for Software Manufacturers to Mitigate Identified Misconfigurations</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Misconfiguration</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Recommendations for Software Manufacturers</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Default configurations of software and applications</p>
</td>
<td>
<ul><li><strong>Embed security controls into product architecture from the start of development and throughout the entire SDLC </strong>by following best practices in NIST’s Secure Software Development Framework (SSDF), <a href="https://csrc.nist.gov/publications/detail/sp/800-218/final" title="Secure Software Development Framework (SSDF) Version 1.1: Recommendations for Mitigating the Risk of Software Vulnerabilities">SP 800-218</a>.[54]</li>
<li><strong>Provide software with security features enabled “out of the box” and accompanied with “loosening” guides</strong> instead of hardening guides. “Loosening” guides should explain the business risk of decisions in plain, understandable language.</li>
</ul></td>
</tr><tr><td>
<p>Default configurations of software and applications: Default credentials</p>
</td>
<td>
<ul><li><strong>Eliminate default passwords</strong>: Do not provide software with default passwords that are universally shared. To eliminate default passwords, require administrators to set a “strong” password [<a href="https://www.cisa.gov/sites/default/files/2023-03/CISA_CPG_REPORT_v1.0.1_FINAL.pdf" title="Cross-Sector Cybersecurity Performance Goals March 2023 Update">CPG 2.B</a>] during installation and configuration.</li>
</ul></td>
</tr><tr><td>
<p>Default configurations of software and applications: Default service permissions and configuration settings</p>
</td>
<td>
<ul><li><strong>Consider the user experience consequences of security settings</strong>: Each new setting increases the cognitive burden on end users and should be assessed in conjunction with the business benefit it derives. Ideally, a setting should not exist; instead, the most secure setting should be integrated into the product by default. When configuration is necessary, the default option should be broadly secure against common threats.</li>
</ul></td>
</tr><tr><td>
<p>Improper separation of user/administrator privilege:</p>
<ul><li>Excessive account privileges,</li>
<li>Elevated service account permissions, and</li>
<li>Non-essential use of elevated accounts</li>
</ul></td>
<td>
<ul><li><strong>Design products so that the compromise of a single security control does not result in compromise of the entire system</strong>. For example, ensuring that user privileges are narrowly provisioned by default and ACLs are employed can reduce the impact of a compromised account. Also, software sandboxing techniques can quarantine a vulnerability to limit compromise of an entire application.</li>
<li><strong>Automatically generate reports for:</strong>
<ul><li><strong>Administrators of inactive accounts. </strong>Prompt administrators to set a maximum inactive time and automatically suspend accounts that exceed that threshold.</li>
<li><strong>Administrators of accounts with administrator privileges</strong> and suggest ways to reduce privilege sprawl.</li>
</ul></li>
<li><strong>Automatically alert administrators of infrequently used services </strong>and provide recommendations for disabling them or implementing ACLs.</li>
</ul></td>
</tr><tr><td>
<p>Insufficient internal network monitoring</p>

</td>
<td>
<ul><li><strong>Provide high-quality audit logs to customers at no extra charge</strong>. Audit logs are crucial for detecting and escalating potential security incidents. They are also crucial during an investigation of a suspected or confirmed security incident. Consider best practices such as providing easy integration with a security information and event management (SIEM) system with application programming interface (API) access that uses coordinated universal time (UTC), standard time zone formatting, and robust documentation techniques.</li>
</ul></td>
</tr><tr><td>
<p>Lack of network segmentation</p>
</td>
<td>
<ul><li><strong>Ensure products are compatible with and tested in segmented network environments</strong>.</li>
</ul></td>
</tr><tr><td>
<p>Poor patch management: Lack of regular patching</p>
</td>
<td>
<ul><li><strong>Take steps to eliminate entire classes of vulnerabilities by embedding security controls into product architecture from the start of development and throughout the SDLC by following best practices in NIST’s SSDF</strong>, <a href="https://csrc.nist.gov/publications/detail/sp/800-218/final" title="Secure Software Development Framework (SSDF) Version 1.1: Recommendations for Mitigating the Risk of Software Vulnerabilities">SP 800-218</a>.[54] Pay special attention to:
<ul><li><strong>Following secure coding practices</strong> [<a href="https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-218.pdf" title="Secure Software Development Framework (SSDF) Version 1.1: Recommendations for Mitigating the Risk of Software Vulnerabilities">SSDF PW 5.1</a>]. Use memory-safe programming languages where possible, parametrized queries, and web template languages.</li>
<li><strong>Conducting code reviews</strong> [<a href="https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-218.pdf" title="Secure Software Development Framework (SSDF) Version 1.1: Recommendations for Mitigating the Risk of Software Vulnerabilities">SSDF PW 7.2, RV 1.2</a>] against peer coding standards, checking for backdoors, malicious content, and logic flaws.</li>
<li><strong>Testing code to identify vulnerabilities</strong> and verify compliance with security requirements [<a href="https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-218.pdf" title="Secure Software Development Framework (SSDF) Version 1.1: Recommendations for Mitigating the Risk of Software Vulnerabilities">SSDF PW 8.2</a>].</li>
</ul></li>
<li><strong>Ensure that published CVEs include root cause or common weakness enumeration (CWE)</strong> to enable industry-wide analysis of software security design flaws.</li>
</ul></td>
</tr><tr><td>
<p>Poor patch management: Use of unsupported operating OSs and outdated firmware</p>
</td>
<td>
<ul><li><strong>Communicate the business risk of using unsupported OSs and firmware </strong>in plain, understandable language.</li>
</ul></td>
</tr><tr><td>
<p>Bypass of system access controls</p>
</td>
<td>
<ul><li><strong>Provide sufficient detail in audit records to detect bypass of system controls</strong> and queries to monitor audit logs for traces of such suspicious activity (e.g., for when an essential step of an authentication or authorization flow is missing).</li>
</ul></td>
</tr><tr><td>
<p>Weak or Misconfigured MFA Methods: Misconfigured Smart Cards or Tokens</p>

</td>
<td>
<ul><li><strong>Fully support MFA for all users</strong>, making MFA the default rather than an opt-in feature. Utilize threat modeling for authentication assertions and alternate credentials to examine how they could be abused to bypass MFA requirements.</li>
</ul></td>
</tr><tr><td>
<p>Weak or Misconfigured MFA Methods: Lack of phishing-resistant MFA</p>
</td>
<td>
<ul><li><strong>Mandate MFA, ideally </strong><a href="https://www.cisa.gov/sites/default/files/publications/fact-sheet-implementing-phishing-resistant-mfa-508c.pdf" title="Implementing Phishing-Resistant MFA"><strong>phishing-resistant</strong></a><strong>, for privileged users</strong> and make MFA a default rather than an opt-in feature.[3]</li>
</ul></td>
</tr><tr><td>
<p>Insufficient ACL on network shares and services</p>
</td>
<td>
<ul><li><strong>Enforce use of ACLs</strong> with default ACLs only allowing the minimum access needed, along with easy-to-use tools to regularly audit and adjust ACLs to the minimum access needed.</li>
</ul></td>
</tr><tr><td>
<p>Poor credential hygiene: easily crackable passwords</p>

</td>
<td>
<ul><li><strong>Allow administrators to configure a password policy consistent with NIST’s </strong><a href="https://csrc.nist.gov/publications/detail/sp/800-63b/final" title="Digital Identity Guidelines: Authentication and Lifecycle Management"><strong>guidelines</strong></a>—do not require counterproductive restrictions such as enforcing character types or the periodic rotation of passwords.[29]</li>
<li><strong>Allow users to use password managers</strong> to effortlessly generate and use secure, random passwords within products.</li>
</ul></td>
</tr><tr><td>
<p>Poor credential hygiene: cleartext password disclosure</p>
</td>
<td>
<ul><li><strong>Salt and hash passwords using a secure hashing algorithm</strong> with high computational cost to make brute force cracking more difficult.</li>
</ul></td>
</tr><tr><td>
<p>Unrestricted code execution</p>
</td>
<td>
<ul><li><strong>Support execution controls</strong> within operating systems and applications “out of the box” by default at no extra charge for all customers, to limit malicious actors’ ability to abuse functionality or launch unusual applications without administrator or informed user approval.</li>
</ul></td>
</tr></tbody></table><h3><strong>VALIDATE SECURITY CONTROLS</strong></h3>
<p>In addition to applying mitigations, NSA and CISA recommend exercising, testing, and validating your organization’s security program against the threat behaviors mapped to the MITRE ATT&amp;CK for Enterprise framework in this advisory. NSA and CISA recommend testing your existing security controls inventory to assess how they perform against the ATT&amp;CK techniques described in this advisory.</p>
<p>To get started:</p>
<ol><li>Select an ATT&amp;CK technique described in this advisory (see Table 12–Table 21).</li>
<li>Align your security technologies against the technique.</li>
<li>Test your technologies against the technique.</li>
<li>Analyze your detection and prevention technologies’ performance.</li>
<li>Repeat the process for all security technologies to obtain a set of comprehensive performance data.</li>
<li>Tune your security program, including people, processes, and technologies, based on the data generated by this process.</li>
</ol><p>CISA and NSA recommend continually testing your security program, at scale, in a production environment to ensure optimal performance against the MITRE ATT&amp;CK techniques identified in this advisory.</p>
<h3><strong>LEARN FROM HISTORY</strong></h3>
<p>The misconfigurations described above are all too common in assessments and the techniques listed are standard ones leveraged by multiple malicious actors, resulting in numerous real network compromises. Learn from the weaknesses of others and implement the mitigations above properly to protect the network, its sensitive information, and critical missions.</p>
<h3><strong>WORKS CITED</strong></h3>
<p>[1]&nbsp; &nbsp;Joint Guide: Shifting the Balance of Cybersecurity Risk: Principles and Approaches for Security-by-Design and -Default (2023), <a href="https://www.cisa.gov/sites/default/files/2023-06/principles_approaches_for_security-by-design-default_508c.pdf" title="Shifting the Balance of Cybersecurity Risk: Principles and Approaches for Security-by-Design and -Default">https://www.cisa.gov/sites/default/files/2023-06/principles_approaches_for_security-by-design-default_508c.pdf</a><br>
[2]&nbsp; &nbsp;CISA, Known Exploited Vulnerabilities Catalog, <a href="https://www.cisa.gov/known-exploited-vulnerabilities-catalog" title="Known Exploited Vulnerabilities Catalog">https://www.cisa.gov/known-exploited-vulnerabilities-catalog</a><br>
[3]&nbsp; &nbsp;CISA, Implementing Phishing-Resistant MFA, <a href="https://www.cisa.gov/sites/default/files/publications/fact-sheet-implementing-phishing-resistant-mfa-508c.pdf" title="Implementing Phishing-Resistant MFA">https://www.cisa.gov/sites/default/files/publications/fact-sheet-implementing-phishing-resistant-mfa-508c.pdf</a><br>
[4]&nbsp; &nbsp;MITRE, ATT&amp;CK for Enterprise, <a href="https://attack.mitre.org/versions/v13/matrices/enterprise/" title="Enterprise Matrix">https://attack.mitre.org/versions/v13/matrices/enterprise/</a><br>
[5]&nbsp; &nbsp;MITRE, D3FEND, <a href="https://d3fend.mitre.org/" title="A knowledge graph of cybersecurity countermeasures">https://d3fend.mitre.org/</a><br>
[6]&nbsp; &nbsp;CISA, Best Practices for MITRE ATT&amp;CK Mapping, <a href="https://www.cisa.gov/news-events/news/best-practices-mitre-attckr-mapping" title="Best Practices for MITRE ATT&amp;CK Mapping">https://www.cisa.gov/news-events/news/best-practices-mitre-attckr-mapping</a><br>
[7]&nbsp; &nbsp;CISA, Decider Tool, <a href="https://github.com/cisagov/Decider/" title="cisagov / decider">https://github.com/cisagov/Decider/</a><br>
[8]&nbsp; &nbsp;CISA, Cyber Assessment Fact Sheet, <a href="https://www.cisa.gov/sites/default/files/publications/VM_Assessments_Fact_Sheet_RVA_508C.pdf" title="CYBER ASSESSMENT FACT SHEET Risk and Vulnerability Assessment">https://www.cisa.gov/sites/default/files/publications/VM_Assessments_Fact_Sheet_RVA_508C.pdf</a><br>
[9]&nbsp; &nbsp;Joint CSA: Weak Security Controls and Practices Routinely Exploited for Initial Access, <a href="https://media.defense.gov/2022/May/17/2002998718/-1/-1/0/CSA_WEAK_SECURITY_CONTROLS_PRACTICES_EXPLOITED_FOR_INITIAL_ACCESS.PDF" title="Weak Security Controls and Practices Routinely Exploited for Initial Access">https://media.defense.gov/2022/May/17/2002998718/-1/-1/0/CSA_WEAK_SECURITY_CONTROLS_PRACTICES_EXPLOITED_FOR_INITIAL_ACCESS.PDF</a><br>
[10]&nbsp; Microsoft KB5005413: Mitigating NTLM Relay Attacks on Active Directory Certificate Services (AD CS), <a href="https://support.microsoft.com/en-us/topic/kb5005413-mitigating-ntlm-relay-attacks-on-active-directory-certificate-services-ad-cs-3612b773-4043-4aa9-b23d-b87910cd3429" title="KB5005413: Mitigating NTLM Relay Attacks on Active Directory Certificate Services (AD CS)">https://support.microsoft.com/en-us/topic/kb5005413-mitigating-ntlm-relay-attacks-on-active-directory-certificate-services-ad-cs-3612b773-4043-4aa9-b23d-b87910cd3429</a><br>
[11]&nbsp; Raj Chandel, Domain Escalation: PetitPotam NTLM Relay to ADCS Endpoints, <a href="https://www.hackingarticles.in/domain-escalation-petitpotam-ntlm-relay-to-adcs-endpoints/" title="Domain Escalation: PetitPotam NTLM Relay to ADCS Endpoints">https://www.hackingarticles.in/domain-escalation-petitpotam-ntlm-relay-to-adcs-endpoints/</a><br>
[12]&nbsp; SpecterOps - Will Schroeder, Certified Pre-Owned, <a href="https://posts.specterops.io/certified-pre-owned-d95910965cd2" title="Certified Pre-Owned">https://posts.specterops.io/certified-pre-owned-d95910965cd2</a><br>
[13]&nbsp; CISA, CSA: CISA Red Team Shares Key Findings to Improve Monitoring and Hardening of Networks, <a href="https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-059a" title="CISA Red Team Shares Key Findings to Improve Monitoring and Hardening of Networks">https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-059a</a><br>
[14]&nbsp; Joint CSA: Threat Actors Exploit Progress Telerik Vulnerabilities in Multiple U.S. Government IIS Servers, <a href="https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-074a" title="Threat Actors Exploit Progress Telerik Vulnerabilities in Multiple U.S. Government IIS Servers">https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-074a</a><br>
[15]&nbsp; Joint CSA: Iranian Government-Sponsored APT Actors Compromise Federal Network, Deploy Crypto Miner, Credential Harvester, <a href="https://www.cisa.gov/news-events/cybersecurity-advisories/aa22-320a" title="Iranian Government-Sponsored APT Actors Compromise Federal Network, Deploy Crypto Miner, Credential Harvester">https://www.cisa.gov/news-events/cybersecurity-advisories/aa22-320a</a><br>
[16]&nbsp; Joint CSA: Threat Actors Exploiting Multiple CVEs Against Zimbra Collaboration Suite, <a href="https://www.cisa.gov/news-events/cybersecurity-advisories/aa22-228a" title="Threat Actors Exploiting Multiple CVEs Against Zimbra Collaboration Suite">https://www.cisa.gov/news-events/cybersecurity-advisories/aa22-228a</a><br>
[17]&nbsp; Microsoft, How to verify that MS17-010 is installed, <a href="https://support.microsoft.com/en-us/topic/how-to-verify-that-ms17-010-is-installed-f55d3f13-7a9c-688c-260b-477d0ec9f2c8" title="How to verify that MS17-010 is installed">https://support.microsoft.com/en-us/topic/how-to-verify-that-ms17-010-is-installed-f55d3f13-7a9c-688c-260b-477d0ec9f2c8</a><br>
[18]&nbsp; Microsoft, Microsoft Security Bulletin MS08-067 – Critical Vulnerability in Server Service Could Allow Remote Code Execution (958644), <a href="https://learn.microsoft.com/en-us/security-updates/SecurityBulletins/2008/ms08-067" title="Microsoft Security Bulletin MS08-067 – Critical">https://learn.microsoft.com/en-us/security-updates/SecurityBulletins/2008/ms08-067</a><br>
[19]&nbsp; Joint CSA: Impacket and Exfiltration Tool Used to Steal Sensitive Information from Defense Industrial Base Organization, <a href="https://www.cisa.gov/news-events/cybersecurity-advisories/aa22-277a" title="Impacket and Exfiltration Tool Used to Steal Sensitive Information from Defense Industrial Base Organization">https://www.cisa.gov/news-events/cybersecurity-advisories/aa22-277a</a><br>
[20]&nbsp; CISA, Malware Analysis Report: 10365227.r1.v1, <a href="https://www.cisa.gov/sites/default/files/2023-06/mar-10365227.r1.v1.clear_.pdf" title="Malware Analysis Report - CovalentStealer">https://www.cisa.gov/sites/default/files/2023-06/mar-10365227.r1.v1.clear_.pdf</a><br>
[21]&nbsp; Joint CSA: #StopRansomware: BianLian Ransomware Group, <a href="https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-136a" title="#StopRansomware: BianLian Ransomware Group">https://www.cisa.gov/news-events/cybersecurity-advisories/aa23-136a</a><br>
[22]&nbsp; CISA Analysis Report: FiveHands Ransomware, <a href="https://www.cisa.gov/news-events/analysis-reports/ar21-126a" title="FiveHands Ransomware">https://www.cisa.gov/news-events/analysis-reports/ar21-126a</a><br>
[23]&nbsp; Snaffler, <a href="https://github.com/SnaffCon/Snaffler" title="SnaffCon / Snaffler">https://github.com/SnaffCon/Snaffler</a><br>
[24]&nbsp; CISA, Cross-Sector Cybersecurity Performance Goals, <a href="https://www.cisa.gov/cross-sector-cybersecurity-performance-goals" title="Cross-Sector Cybersecurity Performance Goals">https://www.cisa.gov/cross-sector-cybersecurity-performance-goals</a><br>
[25]&nbsp; Defense Information Systems Agency (DISA), Security Technical Implementation Guides (STIGs), <a href="https://public.cyber.mil/stigs/" title="Security Technical Implementation Guides (STIGs)">https://public.cyber.mil/stigs/</a><br>
[26]&nbsp; NSA, Network Infrastructure Security Guide, <a href="https://media.defense.gov/2022/Jun/15/2003018261/-1/-1/0/CTR_NSA_NETWORK_INFRASTRUCTURE_SECURITY_GUIDE_20220615.PDF" title="Network Infrastructure Security Guide">https://media.defense.gov/2022/Jun/15/2003018261/-1/-1/0/CTR_NSA_NETWORK_INFRASTRUCTURE_SECURITY_GUIDE_20220615.PDF</a><br>
[27]&nbsp; NSA, Actively Manage Systems and Configurations, <a href="https://media.defense.gov/2019/Sep/09/2002180326/-1/-1/0/Actively%20Manage%20Systems%20and%20Configurations.docx%20-%20Copy.pdf" title="Actively Manage Systems and Configurations">https://media.defense.gov/2019/Sep/09/2002180326/-1/-1/0/Actively%20Manage%20Systems%20and%20Configurations.docx%20-%20Copy.pdf</a><br>
[28]&nbsp; NSA, Cybersecurity Advisories &amp; Guidance, <a href="https://www.nsa.gov/cybersecurity-guidance" title="Cybersecurity Advisories &amp; Guidance">https://www.nsa.gov/cybersecurity-guidance</a><br>
[29]&nbsp; National Institute of Standards and Technologies (NIST), NIST SP 800-63B: Digital Identity Guidelines: Authentication and Lifecycle Management, <a href="https://csrc.nist.gov/pubs/sp/800/63/b/upd2/final" title="Digital Identity Guidelines: Authentication and Lifecycle Management,">https://csrc.nist.gov/pubs/sp/800/63/b/upd2/final</a><br>
[30]&nbsp; Microsoft, Uninstall-AdcsWebEnrollment, <a href="https://learn.microsoft.com/en-us/powershell/module/adcsdeployment/uninstall-adcswebenrollment" title=" Uninstall-AdcsWebEnrollment">https://learn.microsoft.com/en-us/powershell/module/adcsdeployment/uninstall-adcswebenrollment</a><br>
[31]&nbsp; Microsoft, KB5021989: Extended Protection for Authentication, <a href="https://support.microsoft.com/en-au/topic/kb5021989-extended-protection-for-authentication-1b6ea84d-377b-4677-a0b8-af74efbb243f" title="KB5021989: Extended Protection for Authentication">https://support.microsoft.com/en-au/topic/kb5021989-extended-protection-for-authentication-1b6ea84d-377b-4677-a0b8-af74efbb243f</a><br>
[32]&nbsp; Microsoft, Network security: Restrict NTLM: NTLM authentication in this domain, <a href="https://learn.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/network-security-restrict-ntlm-ntlm-authentication-in-this-domain" title="Restrict NTLM: NTLM authentication in this domain">https://learn.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/network-security-restrict-ntlm-ntlm-authentication-in-this-domain</a><br>
[33]&nbsp; Microsoft, Network security: Restrict NTLM: Incoming NTLM traffic, <a href="https://learn.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/network-security-restrict-ntlm-incoming-ntlm-traffic" title="Restrict NTLM: Incoming NTLM traffic">https://learn.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/network-security-restrict-ntlm-incoming-ntlm-traffic</a><br>
[34]&nbsp; Microsoft, How to disable the Subject Alternative Name for UPN mapping, <a href="https://learn.microsoft.com/en-us/troubleshoot/windows-server/windows-security/disable-subject-alternative-name-upn-mapping" title="How to disable the Subject Alternative Name for UPN mapping">https://learn.microsoft.com/en-us/troubleshoot/windows-server/windows-security/disable-subject-alternative-name-upn-mapping</a><br>
[35]&nbsp; Microsoft, Overview of Server Message Block signing, <a href="https://learn.microsoft.com/en-us/troubleshoot/windows-server/networking/overview-server-message-block-signing" title="Overview of Server Message Block signing">https://learn.microsoft.com/en-us/troubleshoot/windows-server/networking/overview-server-message-block-signing</a><br>
[36]&nbsp; Microsoft, SMB signing required by default in Windows Insider, <a href="https://aka.ms/SmbSigningRequired" title="SMB signing required by default in Windows Insider">https://aka.ms/SmbSigningRequired</a><br>
[37]&nbsp; NSA, Defend Privileges and Accounts, <a href="https://media.defense.gov/2019/Sep/09/2002180330/-1/-1/0/Defend%20Privileges%20and%20Accounts%20-%20Copy.pdf" title="Defend Privileges and Accounts">https://media.defense.gov/2019/Sep/09/2002180330/-1/-1/0/Defend%20Privileges%20and%20Accounts%20-%20Copy.pdf</a><br>
[38]&nbsp; NSA, Advancing Zero Trust Maturity Throughout the User Pillar, <a href="https://media.defense.gov/2023/Mar/14/2003178390/-1/-1/0/CSI_Zero_Trust_User_Pillar_v1.1.PDF" title="Advancing Zero Trust Maturity Throughout the User Pillar">https://media.defense.gov/2023/Mar/14/2003178390/-1/-1/0/CSI_Zero_Trust_User_Pillar_v1.1.PDF</a><br>
[39]&nbsp; NSA, Continuously Hunt for Network Intrusions, <a href="https://media.defense.gov/2019/Sep/09/2002180360/-1/-1/0/Continuously%20Hunt%20for%20Network%20Intrusions%20-%20Copy.pdf" title="Continuously Hunt for Network Intrusions">https://media.defense.gov/2019/Sep/09/2002180360/-1/-1/0/Continuously%20Hunt%20for%20Network%20Intrusions%20-%20Copy.pdf</a><br>
[40]&nbsp; Joint CSI: Detect and Prevent Web Shell Malware, <a href="https://media.defense.gov/2020/Jun/09/2002313081/-1/-1/0/CSI-DETECT-AND-PREVENT-WEB-SHELL-MALWARE-20200422.PDF" title="Detect and Prevent Web Shell Malware">https://media.defense.gov/2020/Jun/09/2002313081/-1/-1/0/CSI-DETECT-AND-PREVENT-WEB-SHELL-MALWARE-20200422.PDF</a><br>
[41]&nbsp; NSA, Segment Networks and Deploy Application-aware Defenses, <a href="https://media.defense.gov/2019/Sep/09/2002180325/-1/-1/0/Segment%20Networks%20and%20Deploy%20Application%20Aware%20Defenses%20-%20Copy.pdf" title="Segment Networks and Deploy Application-aware Defenses">https://media.defense.gov/2019/Sep/09/2002180325/-1/-1/0/Segment%20Networks%20and%20Deploy%20Application%20Aware%20Defenses%20-%20Copy.pdf</a><br>
[42]&nbsp; Joint CSA: NSA and CISA Recommend Immediate Actions to Reduce Exposure Across all Operational Technologies and Control Systems, <a href="https://media.defense.gov/2020/Jul/23/2002462846/-1/-1/0/OT_ADVISORY-DUAL-OFFICIAL-20200722.PDF" title="NSA and CISA Recommend Immediate Actions to Reduce Exposure Across all Operational Technologies and Control Systems">https://media.defense.gov/2020/Jul/23/2002462846/-1/-1/0/OT_ADVISORY-DUAL-OFFICIAL-20200722.PDF</a><br>
[43]&nbsp; NSA, Stop Malicious Cyber Activity Against Connected Operational Technology, <a href="https://media.defense.gov/2021/Apr/29/2002630479/-1/-1/0/CSA_STOP-MCA-AGAINST-OT_UOO13672321.PDF" title="Stop Malicious Cyber Activity Against Connected Operational Technology">https://media.defense.gov/2021/Apr/29/2002630479/-1/-1/0/CSA_STOP-MCA-AGAINST-OT_UOO13672321.PDF</a><br>
[44]&nbsp; NSA, Performing Out-of-Band Network Management, <a href="https://media.defense.gov/2020/Sep/17/2002499616/-1/-1/0/PERFORMING_OUT_OF_BAND_NETWORK_MANAGEMENT20200911.PDF" title="Performing Out-of-Band Network Management">https://media.defense.gov/2020/Sep/17/2002499616/-1/-1/0/PERFORMING_OUT_OF_BAND_NETWORK_MANAGEMENT20200911.PDF</a><br>
[45]&nbsp; NSA, Update and Upgrade Software Immediately, <a href="https://media.defense.gov/2019/Sep/09/2002180319/-1/-1/0/Update%20and%20Upgrade%20Software%20Immediately.docx%20-%20Copy.pdf" title="Update and Upgrade Software Immediately">https://media.defense.gov/2019/Sep/09/2002180319/-1/-1/0/Update%20and%20Upgrade%20Software%20Immediately.docx%20-%20Copy.pdf</a><br>
[46]&nbsp; Microsoft, Microsoft Security Advisory 2871997: Update to Improve Credentials Protection and Management, <a href="https://learn.microsoft.com/en-us/security-updates/SecurityAdvisories/2016/2871997" title="Microsoft Security Advisory 2871997">https://learn.microsoft.com/en-us/security-updates/SecurityAdvisories/2016/2871997</a><br>
[47]&nbsp; CISA, Secure Cloud Business Applications Hybrid Identity Solutions Architecture, <a href="https://www.cisa.gov/sites/default/files/2023-03/csso-scuba-guidance_document-hybrid_identity_solutions_architecture-2023.03.22-final.pdf" title="Secure Cloud Business Applications Hybrid Identity Solutions Architecture">https://www.cisa.gov/sites/default/files/2023-03/csso-scuba-guidance_document-hybrid_identity_solutions_architecture-2023.03.22-final.pdf</a><br>
[48]&nbsp; CISA, Secure Cloud Business Applications (SCuBA) Project, <a href="https://www.cisa.gov/resources-tools/services/secure-cloud-business-applications-scuba-project" title="Secure Cloud Business Applications (SCuBA) Project">https://www.cisa.gov/resources-tools/services/secure-cloud-business-applications-scuba-project</a><br>
[49]&nbsp; NSA, Transition to Multi-factor Authentication, <a href="https://media.defense.gov/2019/Sep/09/2002180346/-1/-1/0/Transition%20to%20Multi-factor%20Authentication%20-%20Copy.pdf" title="Transition to Multi-factor Authentication">https://media.defense.gov/2019/Sep/09/2002180346/-1/-1/0/Transition%20to%20Multi-factor%20Authentication%20-%20Copy.pdf</a><br>
[50]&nbsp; Committee on National Security Systems (CNSS), CNSS Policy 15, <a href="https://www.cnss.gov/CNSS/issuances/Policies.cfm" title="POLICIES">https://www.cnss.gov/CNSS/issuances/Policies.cfm</a><br>
[51]&nbsp; NSA, NSA Releases Future Quantum-Resistant (QR) Algorithm Requirements for National Security Systems, <a href="https://www.nsa.gov/Press-Room/News-Highlights/Article/Article/3148990/nsa-releases-future-quantum-resistant-qr-algorithm-requirements-for-national-se/" title="NSA Releases Future Quantum-Resistant (QR) Algorithm Requirements for National Security Systems">https://www.nsa.gov/Press-Room/News-Highlights/Article/Article/3148990/nsa-releases-future-quantum-resistant-qr-algorithm-requirements-for-national-se/</a><br>
[52]&nbsp; NSA, Enforce Signed Software Execution Policies, <a href="https://media.defense.gov/2019/Sep/09/2002180334/-1/-1/0/Enforce%20Signed%20Software%20Execution%20Policies%20-%20Copy.pdf" title="Enforce Signed Software Execution Policies">https://media.defense.gov/2019/Sep/09/2002180334/-1/-1/0/Enforce%20Signed%20Software%20Execution%20Policies%20-%20Copy.pdf</a><br>
[53]&nbsp; Joint CSI: Keeping PowerShell: Security Measures to Use and Embrace, <a href="https://media.defense.gov/2022/Jun/22/2003021689/-1/-1/0/CSI_KEEPING_POWERSHELL_SECURITY_MEASURES_TO_USE_AND_EMBRACE_20220622.PDF" title="Keeping PowerShell: Security Measures to Use and Embrace">https://media.defense.gov/2022/Jun/22/2003021689/-1/-1/0/CSI_KEEPING_POWERSHELL_SECURITY_MEASURES_TO_USE_AND_EMBRACE_20220622.PDF</a><br>
[54]&nbsp; NIST, NIST SP 800-218: Secure Software Development Framework (SSDF) Version 1.1: Recommendations for Mitigating the Risk of Software Vulnerabilities, <a href="https://csrc.nist.gov/publications/detail/sp/800-218/final" title="Secure Software Development Framework (SSDF) Version 1.1: Recommendations for Mitigating the Risk of Software Vulnerabilities">https://csrc.nist.gov/publications/detail/sp/800-218/final</a></p>
<h5><strong>Disclaimer of Endorsement</strong></h5>
<p>The information and opinions contained in this document are provided "as is" and without any warranties or guarantees. Reference herein to any specific commercial products, process, or service by trade name, trademark, manufacturer, or otherwise, does not constitute or imply its endorsement, recommendation, or favoring by the United States Government, and this guidance shall not be used for advertising or product endorsement purposes.</p>
<h5><strong>Trademarks</strong></h5>
<p>Active Directory, Microsoft, and Windows are registered trademarks of Microsoft Corporation.<br>
MITRE ATT&amp;CK is registered trademark and MITRE D3FEND is a trademark of The MITRE Corporation.<br>
SoftPerfect is a registered trademark of SoftPerfect Proprietary Limited Company.<br>
Telerik is a registered trademark of Progress Software Corporation.<br>
VMware is a registered trademark of VMWare, Inc.<br>
Zimbra is a registered trademark of Synacor, Inc.</p>
<h5><strong>Purpose</strong></h5>
<p>This document was developed in furtherance of the authoring cybersecurity organizations’ missions, including their responsibilities to identify and disseminate threats, and to develop and issue cybersecurity specifications and mitigations. This information may be shared broadly to reach all appropriate stakeholders.</p>
<h5><strong>Contact</strong></h5>
<p>Cybersecurity Report Feedback: <a href="mailto:CybersecurityReports@nsa.gov" title="Cybersecurity Report Feedback">CybersecurityReports@nsa.gov</a><br>
General Cybersecurity Inquiries: <a href="mailto:Cybersecurity_Requests@nsa.gov" title="General Cybersecurity Inquiries">Cybersecurity_Requests@nsa.gov</a>&nbsp;<br>
Defense Industrial Base Inquiries and Cybersecurity Services: <a href="mailto:DIB_Defense@cyber.nsa.gov" title="Defense Industrial Base Inquiries and Cybersecurity Services">DIB_Defense@cyber.nsa.gov</a><br>
Media Inquiries / Press Desk: 443-634-0721, <a href="mailto:MediaRelations@nsa.gov" title="Media Inquiries / Press Desk">MediaRelations@nsa.gov</a>&nbsp;</p>
<p>To report suspicious activity contact CISA’s 24/7 Operations Center at <a href="mailto:report@cisa.gov" title="Report to CISA">report@cisa.gov</a> or (888) 282-0870. When available, please include the following information regarding the incident: date, time, and location of the incident; type of activity; number of people affected; type of equipment used for the activity; the name of the submitting company or organization; and a designated point of contact.</p>
<h3><strong>Appendix: MITRE ATT&amp;CK Tactics and Techniques</strong></h3>
<p>See Table 12–Table 21 for all referenced threat actor tactics and techniques in this advisory.</p>
<table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 12: ATT&amp;CK Techniques for Enterprise – Reconnaissance</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Technique Title</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>ID</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Use</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Active Scanning: Vulnerability Scanning</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1595/002/" title="Active Scanning: Vulnerability Scanning">T1595.002</a></p>
</td>
<td>
<p>Malicious actors scan victims for vulnerabilities that be exploited for initial access.</p>
</td>
</tr><tr><td>
<p>Gather Victim Host Information</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1592/" title="Gather Victim Host Information">T1592</a></p>
</td>
<td>
<p>Malicious actors gather information on victim client configurations and/or vulnerabilities through vulnerabilities scans and searching the web.</p>
</td>
</tr><tr><td>
<p>Gather Victim Identity Information: Credentials</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1589/001" title="Gather Victim Identity Information: Credentials">T1589.001</a></p>
</td>
<td>
<p>Malicious actors find default credentials through searching the web.</p>
</td>
</tr><tr><td>
<p>Phishing for Information</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1598/" title="Phishing for Information">T1598</a></p>
</td>
<td>
<p>Malicious actors masquerade as IT staff and convince a target user to provide their MFA code over the phone to gain access to email and other organizational resources.</p>
</td>
</tr></tbody></table><table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 13: ATT&amp;CK Techniques for Enterprise – Initial Access</em></caption>
<thead><tr><td>
<p><strong>Technique Title</strong></p>
</td>
<td>
<p><strong>ID</strong></p>
</td>
<td>
<p><strong>Use</strong></p>
</td>
</tr></thead><tbody><tr><td>
<p>External Remote Services</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1133/" title="External Remote Services">T1133</a></p>
</td>
<td>
<p>Malicious actors use default credentials for VPN access to internal networks.</p>
</td>
</tr><tr><td>
<p>Valid Accounts: Default Accounts</p>
</td>
<td>
<p><a href="https://attack.mitre.org/techniques/T1078/001/" title="Valid Accounts: Default Accounts">T1078.001</a></p>
</td>
<td>
<p>Malicious actors gain authenticated access to devices by finding default credentials through searching the web.</p>
<p>Malicious actors use default credentials for VPN access to internal networks, and default administrative credentials to gain access to web applications and databases.</p>
</td>
</tr><tr><td>
<p>Exploit Public-Facing Application</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1190/" title="Exploit Public-Facing Application">T1190</a></p>
</td>
<td>
<p>Malicious actors exploit CVEs in Telerik UI, VM Horizon, Zimbra Collaboration Suite, and other applications for initial access to victim organizations.</p>
</td>
</tr><tr><td>
<p>Phishing</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1566/" title="Phishing">T1566</a></p>
</td>
<td>
<p>Malicious actors gain initial access to systems by phishing to entice end users to download and execute malicious payloads.</p>
</td>
</tr><tr><td>
<p>Trust Relationship</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1199/" title="Trust Relationship">T1199</a></p>
</td>
<td>
<p>Malicious actors gain access to OT networks despite prior assurance that the networks were fully air gapped, with no possible connection to the IT network, by finding special purpose, forgotten, or even accidental network connections.</p>
</td>
</tr></tbody></table><table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 14: ATT&amp;CK Techniques for Enterprise – Execution</em></caption>
<thead><tr><td>
<p><strong>Technique Title</strong></p>
</td>
<td>
<p><strong>ID</strong></p>
</td>
<td>
<p><strong>Use</strong></p>
</td>
</tr></thead><tbody><tr><td>
<p>Software Deployment Tools</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1072/" title="Software Deployment Tools">T1072</a></p>
</td>
<td>
<p>Malicious actors use default or captured credentials on software deployment tools to execute code and move laterally.</p>
</td>
</tr><tr><td>
<p>User Execution</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1204/" title="User Execution">T1204</a></p>
</td>
<td>
<p>Malicious actors gain initial access to systems by phishing to entice end users to download and execute malicious payloads or to run code on their workstations.</p>
</td>
</tr><tr><td>
<p>Command and Scripting Interpreter</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1059/" title="Command and Scripting Interpreter">T1059</a></p>
</td>
<td>
<p>Malicious actors use scripting languages to obscure their actions and bypass allowlisting.</p>
</td>
</tr><tr><td>
<p>Command and Scripting Interpreter: Visual Basic</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1059/005/" title="Command and Scripting Interpreter: Visual Basic">T1059.005</a></p>
</td>
<td>
<p>Malicious actors use macros for initial access, persistence, and lateral movement.</p>
</td>
</tr></tbody></table><table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 15: ATT&amp;CK Techniques for Enterprise – Persistence</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Technique Title</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>ID</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Use</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Account Manipulation</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1098/" title="Account Manipulation">T1098</a></p>
</td>
<td>
<p>Malicious actors reset built-in administrative accounts via predictable, forgotten password questions.</p>
</td>
</tr></tbody></table><table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 16: ATT&amp;CK Techniques for Enterprise – Privilege Escalation</em></caption>
<thead><tr><td>
<p><strong>Technique Title</strong></p>
</td>
<td>
<p><strong>ID</strong></p>
</td>
<td>
<p><strong>Use</strong></p>
</td>
</tr></thead><tbody><tr><td>
<p>Valid Accounts</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1078/" title="Valid Accounts">T1078</a></p>
</td>
<td>
<p>Malicious actors analyze topical and nested Active Directory groups to find privileged accounts to target.</p>
</td>
</tr><tr><td>
<p>Valid Accounts: Domain Accounts</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1078/002/" title="Valid Accounts: Domain Accounts">T1078.002</a></p>
</td>
<td>
<p>Malicious actors obtain loaded domain credentials from printers and scanners and use them to move laterally from the network device.</p>
</td>
</tr><tr><td>
<p>Exploitation for Privilege Escalation</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1068/" title="Exploitation for Privilege Escalation">T1068</a></p>
</td>
<td>
<p>Malicious actors load vulnerable drivers and then exploit their known vulnerabilities to execute code in the kernel with the highest level of system privileges to completely compromise the device.</p>
</td>
</tr></tbody></table><table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 17: ATT&amp;CK Techniques for Enterprise – Defense Evasion</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Technique Title</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>ID</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Use</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Obfuscated Files or Information: Command Obfuscation</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1027/010/" title="Obfuscated Files or Information: Command Obfuscation">T1027.010</a></p>
</td>
<td>
<p>Malicious actors often use scripting languages to obscure their actions.</p>
</td>
</tr></tbody></table><table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 18: ATT&amp;CK Techniques for Enterprise – Credential Access</em></caption>
<thead><tr><td>
<p><strong>Technique Title</strong></p>
</td>
<td>
<p><strong>ID</strong></p>
</td>
<td>
<p><strong>Use</strong></p>
</td>
</tr></thead><tbody><tr><td>
<p>Adversary-in-the-Middle</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1557/" title="Adversary-in-the-Middle">T1557</a></p>
</td>
<td>
<p>Malicious actors force a device to communicate through actor-controlled systems, so they can collect information or perform additional actions.</p>
</td>
</tr><tr><td>
<p>Adversary-in-the-Middle: LLMNR/NBT-NS Poisoning and SMB Relay</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1557/001/" title="Adversary-in-the-Middle: LLMNR/NBT-NS Poisoning and SMB Relay">T1557.001</a></p>
</td>
<td>
<p>Malicious actors execute spoofing, poisoning, and relay techniques if Link-Local Multicast Name Resolution (LLMNR), NetBIOS Name Service (NBT-NS), and Server Message Block (SMB) services are enabled in a network.</p>
</td>
</tr><tr><td>
<p>Brute Force: Password Cracking</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1110/002/" title="Brute Force: Password Cracking">T1110.002</a></p>
</td>
<td>
<p>Malicious actors capture user hashes and leverage dictionary wordlists and rulesets to extract cleartext passwords.</p>
</td>
</tr><tr><td>
<p>Credentials from Password Stores</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1555/" title="Credentials from Password Stores">T1555</a></p>
</td>
<td>
<p>Malicious actors gain access to and crack credentials from PFX stores, enabling elevation of privileges and lateral movement within networks.</p>
</td>
</tr><tr><td>
<p>Multi-Factor Authentication Interception</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1111/" title="Multi-Factor Authentication Interception">T1111</a></p>
</td>
<td>
<p>Malicious actors can obtain password hashes for accounts enabled for MFA with smart codes or tokens and use the hash via PtH techniques.</p>
</td>
</tr><tr><td>
<p>Multi-Factor Authentication Request Generation</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1621/" title="Multi-Factor Authentication Request Generation">T1621</a></p>
</td>
<td>
<p>Malicious actors use “push bombing” against non-phishing resistant MFA to induce “MFA fatigue” in victims, gaining access to MFA authentication credentials or bypassing MFA, and accessing the MFA-protected system.</p>
</td>
</tr><tr><td>
<p>Steal Application Access Token</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1528/" title="Steal Application Access Token">T1528</a></p>
</td>
<td>
<p>Malicious actors can steal administrator account credentials and the authentication token generated by Active Directory when the account is logged into a compromised host.</p>
</td>
</tr><tr><td>
<p>Steal or Forge Authentication Certificates</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1649/" title="Steal or Forge Authentication Certificates">T1649</a></p>
</td>
<td>
<p>Unauthenticated malicious actors coerce an ADCS server to authenticate to an actor-controlled server, and then relay that authentication to the web certificate enrollment application to obtain a trusted illegitimate certificate.</p>
</td>
</tr><tr><td>
<p>Steal or Forge Kerberos Tickets: Golden Ticket</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1558/001/" title="Steal or Forge Kerberos Tickets: Golden Ticket">T1558.001</a></p>
</td>
<td>
<p>Malicious actors who have obtained authentication certificates can use the certificate for Active Directory authentication to obtain a Kerberos TGT.</p>
</td>
</tr><tr><td>
<p>Steal or Forge Kerberos Tickets: Kerberoasting</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1558/003/" title="Steal or Forge Kerberos Tickets: Kerberoasting">T1558.003</a></p>
</td>
<td>
<p>Malicious actors obtain and abuse valid Kerberos TGTs to elevate privileges and laterally move throughout an organization’s network.</p>
</td>
</tr><tr><td>
<p>Unsecured Credentials: Credentials in Files</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1552/001/" title="Unsecured Credentials: Credentials in Files">T1552.001</a></p>
</td>
<td>
<p>Malicious actors find cleartext credentials that organizations or individual users store in spreadsheets, configuration files, and other documents.</p>
</td>
</tr></tbody></table><table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 19: ATT&amp;CK Techniques for Enterprise – Discovery</em></caption>
<thead><tr><td>
<p><strong>Technique Title</strong></p>
</td>
<td>
<p><strong>ID</strong></p>
</td>
<td>
<p><strong>Use</strong></p>
</td>
</tr></thead><tbody><tr><td>
<p>Account Discovery</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1087/" title="Account Discovery">T1087</a></p>
</td>
<td>
<p>Malicious actors with valid domain credentials enumerate the AD to discover elevated accounts and where they are used.</p>
</td>
</tr><tr><td>
<p>File and Directory Discovery</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1083/" title="File and Directory Discovery">T1083</a></p>
</td>
<td>
<p>Malicious actors use commands, such as <code>net share</code>, open source tools, such as SoftPerfect Network Scanner, or custom malware, such as <a href="https://www.cisa.gov/sites/default/files/2023-06/mar-10365227.r1.v1.clear_.pdf" title="Malware Analysis Report - CovalentStealer">CovalentStealer</a> to discover and categorize files.</p>
<p>Malicious actors search for text files, spreadsheets, documents, and configuration files in hopes of obtaining desired information, such as cleartext passwords.</p>
</td>
</tr><tr><td>
<p>Network Share Discovery</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1135/" title="Network Share Discovery">T1135</a></p>
</td>
<td>
<p>Malicious actors use commands, such as net share, open source tools, such as SoftPerfect Network Scanner, or custom malware, such as <a href="https://www.cisa.gov/sites/default/files/2023-06/mar-10365227.r1.v1.clear_.pdf">CovalentStealer</a>, to look for shared folders and drives.</p>
</td>
</tr></tbody></table><table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 20: ATT&amp;CK Techniques for Enterprise – Lateral Movement</em></caption>
<thead><tr><th scope="col" role="columnheader" data-tablesaw-priority="persist">
<p><strong>Technique Title</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>ID</strong></p>
</th>
<th scope="col" role="columnheader">
<p><strong>Use</strong></p>
</th>
</tr></thead><tbody><tr><td>
<p>Exploitation of Remote Services</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1210/" title="Exploitation of Remote Services">T1210</a></p>
</td>
<td>
<p>Malicious actors can exploit OS and firmware vulnerabilities to gain unauthorized network access, compromise sensitive data, and disrupt operations.</p>
</td>
</tr><tr><td>
<p>Remote Services: SMB/Windows Admin Shares</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1021/002/" title="Remote Services: SMB/Windows Admin Shares">T1021.002</a></p>
</td>
<td>
<p>If SMB signing is not enforced, malicious actors can use name resolution poisoning to access remote systems.</p>
</td>
</tr><tr><td>
<p>Use Alternate Authentication Material: Application Access Token</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1550/001/" title="Use Alternate Authentication Material: Application Access Token">T1550.001</a></p>
</td>
<td>
<p>Malicious actors with stolen administrator account credentials and AD authentication tokens can use them to operate with elevated permissions throughout the domain.</p>
</td>
</tr><tr><td>
<p>Use Alternate Authentication Material: Pass the Hash</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1550/002/" title="Use Alternate Authentication Material: Pass the Hash">T1550.002</a></p>
</td>
<td>
<p>Malicious actors collect hashes in a network and authenticate as a user without having access to the user's cleartext password.</p>
</td>
</tr></tbody></table><table data-tablesaw-mode="stack" data-tablesaw-minimap=""><caption><em>Table 21: ATT&amp;CK Techniques for Enterprise – Collection</em></caption>
<thead><tr><td>
<p><strong>Technique Title</strong></p>
</td>
<td>
<p><strong>ID</strong></p>
</td>
<td>
<p><strong>Use</strong></p>
</td>
</tr></thead><tbody><tr><td>
<p>Data from Network Shared Drive</p>
</td>
<td>
<p><a href="https://attack.mitre.org/versions/v13/techniques/T1039/" title="Data from Network Shared Drive">T1039</a></p>
</td>
<td>
<p>Malicious actors find sensitive information on network shares that could facilitate follow-on activity or provide opportunities for extortion.</p>
</td>
</tr></tbody></table>
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[CCC Invites to the 37th Chaos Communication Congress in Hamburg (236 pts)]]></title>
            <link>https://www.ccc.de/en/updates/2023/37C3</link>
            <guid>37788153</guid>
            <pubDate>Fri, 06 Oct 2023 07:44:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.ccc.de/en/updates/2023/37C3">https://www.ccc.de/en/updates/2023/37C3</a>, See on <a href="https://news.ycombinator.com/item?id=37788153">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>After a three-year break, the Chaos Computer Club will host its 37th Chaos Communication Congress (37C3) from 27 December to 30 December 2023. We invite you to the CCH in Hamburg for Germany's most traditional IT security and technical competence conference, the largest European gathering of the hacker scene.</p><div><p>After the success of this year's Chaos Communication Camp, the hackers have a desire and need for more exchange, topics, workshops and more party. The digital world is once again in a state of upheaval: even more mercenary hacks, even more state Trojans dragged before the Federal Constitutional Court, even more AI hyper-hyper along with wonky ideas like <a href="https://edri.org/our-work/most-criticised-eu-law-of-all-time/">chatcontrol</a>, and even more politicians who only make decisions according to lobby promises. The only thing that helps against this is to inform oneself, get positive impulses for a digital future worth living in and learn what is possible with universal computers.</p>
<p>This is what we want to offer you at 37C3 and all interested people can participate. We call on you to participate in large numbers as volunteers (so-called chaos angels). As always, the talks will be streamed live and then offered on <a href="https://media.ccc.de/">media.ccc.de</a>. We also plan to translate the lectures again into several languages.</p>
<p>As in all Camp years, we've had less time to plan and organise. Therefore, ticket sales will start later and be shorter than usual, both via vouchers and in open pre-sales. More details will be published <a href="https://events.ccc.de/">on our event blog</a> soon.</p>
<p>After being guests to the Leipziger Messe for three years while the Congress Center Hamburg (CCH) was being reconstructed, we are delighted to be returning to the familiar but modernly redesigned building this year. The space available to us there is barely a fifth of what the CCC occupied in the Congress Center Leipzig, but the paths are much shorter and vertical and there's much less volume in need of heating. Thanks to the location in Hamburg, visitors can make use of the abundant infrastructure of accommodation and catering.</p>
<p>Nevertheless, there will be slightly fewer participants at this year's Congress than in the times before Corona. The lecture programme will also be presented on fewer stages. The Call for Participation will start soon, and you will find more information <a href="https://events.ccc.de/">on the event blog</a>.</p>
<p>The 37C3 is guaranteed to take place unless prohibited by the authorities. All <a href="https://www.hamburg.de/coronavirus/">official infection control regulations</a> will of course be implemented. The CCC asks all participants to consider their own awareness of the health risks of large events before purchasing a ticket. Participants with cold symptoms are requested not to attend the event.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Chinese Netizen Fined over 1M Yuan for Using VPN (113 pts)]]></title>
            <link>https://here.news/post/93c46bbd-ea0d-48e2-bba6-135e58887f81/chinese-netizen-fined-over-1-million-yua</link>
            <guid>37787205</guid>
            <pubDate>Fri, 06 Oct 2023 04:51:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://here.news/post/93c46bbd-ea0d-48e2-bba6-135e58887f81/chinese-netizen-fined-over-1-million-yua">https://here.news/post/93c46bbd-ea0d-48e2-bba6-135e58887f81/chinese-netizen-fined-over-1-million-yua</a>, See on <a href="https://news.ycombinator.com/item?id=37787205">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>A recent incident in Chengde, China has caused public outrage as a netizen <a href="https://chinadigitaltimes.net/chinese/700552.html?utm_source=dlvr.it&amp;utm_medium=twitter" target="_blank">claimed</a> [*in Chinese] to have been fined over one million yuan and had their earnings confiscated for using a VPN to access GitHub. The individual, according to their defense statement, allegedly utilized the platform between 2019 and 2022 to complete company tasks, provide user support, and work remotely using Zoom. The Chengde Public Security Bureau's Shuangqiao Branch deemed a 200 yuan fine and the confiscation of 1,058,000 yuan in illegal earnings as appropriate.</p><p><img src="https://storage.googleapis.com/artifacts.phonic-jetty-356702.appspot.com/medias/b94a8fd8-b129-4ddc-9afb-fd53066bff5b_image_image.png" alt="Picked image"></p><p>This case stands out from previous instances involving VPN usage, which primarily targeted individuals accessing pornographic content or engaging in political activities. The ramifications of this incident have been felt across a wide range of industries, with many top intellectuals, academics, high-skilled workers, journalists, and multinational trade companies in China relying on VPNs for their work.</p><p>While some argue that the judgment in this case may be debatable, it's worth noting that certain industries have "<a href="https://www.chinalawtranslate.com/en/miit-notice-on-cleaning-up-and-regulating-the-internet-access-service-market/" target="_blank">legal channels</a>" for internet access, as opposed to using privately obtained VPN services. This distinction allows individuals in these sectors to access any website they desire without fear of repercussions, as they operate through official channels.</p><p>However, skeptics question the feasibility of these official channels, as they are not easily obtained. The process often involves various administrative procedures and certificates, making it challenging for the majority of privately-owned Chinese companies to access such channels. Additionally, even if granted access, strict surveillance measures are often implemented.</p><p>The incident has sparked discussions about the limitations imposed by China's Great Firewall and its impact on the country's talent pool. Many individuals, seeking to escape the infamous 996 work culture and age discrimination, contemplate remote work opportunities for overseas companies. However, cases like this serve as a deterrent, as individuals risk facing hefty fines and the confiscation of their hard-earned income.</p><p>Renowned Chinese journalist, Michael Anti(<a href="https://twitter.com/mranti/status/1705970310867227005" target="_blank">@mranti</a>), has criticized the Chengde Public Security Bureau's decision, highlighting not only the excessive nature of the punishment but also the potential impact on Chinese programmers and e-commerce professionals working either abroad or remotely. He questions whether these individuals will remain in China, subjecting themselves to the risk of having years' worth of earnings confiscated.</p><p>One Twitter user <a href="https://twitter.com/Ur1h37O_myz/status/1706160921700409487" target="_blank">raises an important perspective</a> on the incident, highlighting that there are legitimate pathways with private VPNs, including obtaining internet access permits and operating licenses, for information to flow from terminals to networks. All data traffic is connected through the national network's international gateway, and any communication or transmission outside of these authorized channels would not be considered official.  </p><p>As the debate continues, some netizens suggest alternative methods for those working abroad, such as exploring payment options involving USDT or BTC, cryptocurrencies that offer a level of financial flexibility and security.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Rails 7.1 Released (245 pts)]]></title>
            <link>https://github.com/rails/rails/releases/tag/v7.1.0</link>
            <guid>37787130</guid>
            <pubDate>Fri, 06 Oct 2023 04:31:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/rails/rails/releases/tag/v7.1.0">https://github.com/rails/rails/releases/tag/v7.1.0</a>, See on <a href="https://news.ycombinator.com/item?id=37787130">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<li>
<p>Fix <code>AS::MessagePack</code> with <code>ENV["RAILS_MAX_THREADS"]</code>.</p>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Add a new public API for broadcasting logs</p>
<p>This feature existed for a while but was until now a private API.<br>
Broadcasting log allows to send log message to difference sinks (STDOUT, a file ...) and<br>
is used by default in the development environment to write logs both on STDOUT and in the<br>
"development.log" file.</p>
<p>Basic usage:</p>
<div data-snippet-clipboard-copy-content="stdout_logger = Logger.new(STDOUT)
file_logger = Logger.new(&quot;development.log&quot;)
broadcast = ActiveSupport::BroadcastLogger.new(stdout_logger, file_logger)

broadcast.info(&quot;Hello!&quot;) # The &quot;Hello!&quot; message is written on STDOUT and in the log file."><pre><span>stdout_logger</span> <span>=</span> <span>Logger</span><span>.</span><span>new</span><span>(</span><span>STDOUT</span><span>)</span>
<span>file_logger</span> <span>=</span> <span>Logger</span><span>.</span><span>new</span><span>(</span><span>"development.log"</span><span>)</span>
<span>broadcast</span> <span>=</span> <span>ActiveSupport</span>::<span>BroadcastLogger</span><span>.</span><span>new</span><span>(</span><span>stdout_logger</span><span>,</span> <span>file_logger</span><span>)</span>

<span>broadcast</span><span>.</span><span>info</span><span>(</span><span>"Hello!"</span><span>)</span> <span># The "Hello!" message is written on STDOUT and in the log file.</span></pre></div>
<p>Adding other sink(s) to the broadcast:</p>
<div data-snippet-clipboard-copy-content="broadcast = ActiveSupport::BroadcastLogger.new
broadcast.broadcast_to(Logger.new(STDERR))"><pre><span>broadcast</span> <span>=</span> <span>ActiveSupport</span>::<span>BroadcastLogger</span><span>.</span><span>new</span>
<span>broadcast</span><span>.</span><span>broadcast_to</span><span>(</span><span>Logger</span><span>.</span><span>new</span><span>(</span><span>STDERR</span><span>)</span><span>)</span></pre></div>
<p>Remove a sink from the broadcast:</p>
<div data-snippet-clipboard-copy-content="stdout_logger = Logger.new(STDOUT)
broadcast = ActiveSupport::BroadcastLogger.new(stdout_logger)

broadcast.stop_broadcasting_to(stdout_logger)"><pre><span>stdout_logger</span> <span>=</span> <span>Logger</span><span>.</span><span>new</span><span>(</span><span>STDOUT</span><span>)</span>
<span>broadcast</span> <span>=</span> <span>ActiveSupport</span>::<span>BroadcastLogger</span><span>.</span><span>new</span><span>(</span><span>stdout_logger</span><span>)</span>

<span>broadcast</span><span>.</span><span>stop_broadcasting_to</span><span>(</span><span>stdout_logger</span><span>)</span></pre></div>
<p><em>Edouard Chin</em></p>
</li>
<li>
<p>Fix Range#overlap? not taking empty ranges into account on Ruby &lt; 3.3</p>
<p><em>Nobuyoshi Nakada</em>, <em>Shouichi Kamiya</em>, <em>Hartley McGuire</em></p>
</li>
<li>
<p>Use Ruby 3.3 Range#overlap? if available</p>
<p><em>Yasuo Honda</em></p>
</li>
<li>
<p>Add <code>bigdecimal</code> as Active Support dependency that is a bundled gem candidate for Ruby 3.4.</p>
<p><code>bigdecimal</code> 3.1.4 or higher version will be installed.<br>
Ruby 2.7 and 3.0 users who want <code>bigdecimal</code> version 2.0.0 or 3.0.0 behavior as a default gem,<br>
pin the <code>bigdecimal</code> version in your application Gemfile.</p>
<p><em>Koichi ITO</em></p>
</li>
<li>
<p>Add <code>drb</code>, <code>mutex_m</code> and <code>base64</code> that are bundled gem candidates for Ruby 3.4</p>
<p><em>Yasuo Honda</em></p>
</li>
<li>
<p>When using cache format version &gt;= 7.1 or a custom serializer, expired and<br>
version-mismatched cache entries can now be detected without deserializing<br>
their values.</p>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Make all cache stores return a boolean for <code>#delete</code></p>
<p>Previously the <code>RedisCacheStore#delete</code> would return <code>1</code> if the entry<br>
exists and <code>0</code> otherwise. Now it returns true if the entry exists and false<br>
otherwise, just like the other stores.</p>
<p>The <code>FileStore</code> would return <code>nil</code> if the entry doesn't exists and returns<br>
<code>false</code> now as well.</p>
<p><em>Petrik de Heus</em></p>
</li>
<li>
<p>Active Support cache stores now support replacing the default compressor via<br>
a <code>:compressor</code> option. The specified compressor must respond to <code>deflate</code><br>
and <code>inflate</code>. For example:</p>
<div data-snippet-clipboard-copy-content="module MyCompressor
  def self.deflate(string)
    # compression logic...
  end

  def self.inflate(compressed)
    # decompression logic...
  end
end

config.cache_store = :redis_cache_store, { compressor: MyCompressor }"><pre><span>module</span> <span>MyCompressor</span>
  <span>def</span> <span>self</span><span>.</span><span>deflate</span><span>(</span><span>string</span><span>)</span>
    <span># compression logic...</span>
  <span>end</span>

  <span>def</span> <span>self</span><span>.</span><span>inflate</span><span>(</span><span>compressed</span><span>)</span>
    <span># decompression logic...</span>
  <span>end</span>
<span>end</span>

<span>config</span><span>.</span><span>cache_store</span> <span>=</span> <span>:redis_cache_store</span><span>,</span> <span>{</span> <span>compressor</span>: <span>MyCompressor</span> <span>}</span></pre></div>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Active Support cache stores now support a <code>:serializer</code> option. Similar to<br>
the <code>:coder</code> option, serializers must respond to <code>dump</code> and <code>load</code>. However,<br>
serializers are only responsible for serializing a cached value, whereas<br>
coders are responsible for serializing the entire <code>ActiveSupport::Cache::Entry</code><br>
instance.  Additionally, the output from serializers can be automatically<br>
compressed, whereas coders are responsible for their own compression.</p>
<p>Specifying a serializer instead of a coder also enables performance<br>
optimizations, including the bare string optimization introduced by cache<br>
format version 7.1.</p>
<p>The <code>:serializer</code> and <code>:coder</code> options are mutually exclusive. Specifying<br>
both will raise an <code>ArgumentError</code>.</p>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Fix <code>ActiveSupport::Inflector.humanize(nil)</code> raising <code>NoMethodError: undefined method `end_with?' for nil:NilClass</code>.</p>
<p><em>James Robinson</em></p>
</li>
<li>
<p>Don't show secrets for <code>ActiveSupport::KeyGenerator#inspect</code>.</p>
<p>Before:</p>
<div data-snippet-clipboard-copy-content="ActiveSupport::KeyGenerator.new(secret).inspect
&quot;#<ActiveSupport::KeyGenerator:0x0000000104888038 ... @secret=\&quot;\\xAF\\bFh]LV}q\\nl\\xB2U\\xB3 ... >&quot;"><pre><span>ActiveSupport</span>::<span>KeyGenerator</span><span>.</span><span>new</span><span>(</span><span>secret</span><span>)</span><span>.</span><span>inspect</span>
<span>"#&lt;ActiveSupport::KeyGenerator:0x0000000104888038 ... @secret=<span>\"</span><span>\\</span>xAF<span>\\</span>bFh]LV}q<span>\\</span>nl<span>\\</span>xB2U<span>\\</span>xB3 ... &gt;"</span></pre></div>
<p>After:</p>
<div data-snippet-clipboard-copy-content="ActiveSupport::KeyGenerator::Aes256Gcm(secret).inspect
&quot;#<ActiveSupport::KeyGenerator:0x0000000104888038>&quot;"><pre><span>ActiveSupport</span>::<span>KeyGenerator</span>::<span>Aes256Gcm</span><span>(</span><span>secret</span><span>)</span><span>.</span><span>inspect</span>
<span>"#&lt;ActiveSupport::KeyGenerator:0x0000000104888038&gt;"</span></pre></div>
<p><em>Petrik de Heus</em></p>
</li>
<li>
<p>Improve error message when EventedFileUpdateChecker is used without a<br>
compatible version of the Listen gem</p>
<p><em>Hartley McGuire</em></p>
</li>
<li>
<p>Add <code>:report</code> behavior for Deprecation</p>
<p>Setting <code>config.active_support.deprecation = :report</code> uses the error<br>
reporter to report deprecation warnings to <code>ActiveSupport::ErrorReporter</code>.</p>
<p>Deprecations are reported as handled errors, with a severity of <code>:warning</code>.</p>
<p>Useful to report deprecations happening in production to your bug tracker.</p>
<p><em>Étienne Barrié</em></p>
</li>
<li>
<p>Rename <code>Range#overlaps?</code> to <code>#overlap?</code> and add alias for backwards compatibility</p>
<p><em>Christian Schmidt</em></p>
</li>
<li>
<p>Fix <code>EncryptedConfiguration</code> returning incorrect values for some <code>Hash</code><br>
methods</p>
<p><em>Hartley McGuire</em></p>
</li>
<li>
<p>Don't show secrets for <code>MessageEncryptor#inspect</code>.</p>
<p>Before:</p>
<div data-snippet-clipboard-copy-content="ActiveSupport::MessageEncryptor.new(secret, cipher: &quot;aes-256-gcm&quot;).inspect
&quot;#<ActiveSupport::MessageEncryptor:0x0000000104888038 ... @secret=\&quot;\\xAF\\bFh]LV}q\\nl\\xB2U\\xB3 ... >&quot;"><pre><span>ActiveSupport</span>::<span>MessageEncryptor</span><span>.</span><span>new</span><span>(</span><span>secret</span><span>,</span> <span>cipher</span>: <span>"aes-256-gcm"</span><span>)</span><span>.</span><span>inspect</span>
<span>"#&lt;ActiveSupport::MessageEncryptor:0x0000000104888038 ... @secret=<span>\"</span><span>\\</span>xAF<span>\\</span>bFh]LV}q<span>\\</span>nl<span>\\</span>xB2U<span>\\</span>xB3 ... &gt;"</span></pre></div>
<p>After:</p>
<div data-snippet-clipboard-copy-content="ActiveSupport::MessageEncryptor.new(secret, cipher: &quot;aes-256-gcm&quot;).inspect
&quot;#<ActiveSupport::MessageEncryptor:0x0000000104888038>&quot;"><pre><span>ActiveSupport</span>::<span>MessageEncryptor</span><span>.</span><span>new</span><span>(</span><span>secret</span><span>,</span> <span>cipher</span>: <span>"aes-256-gcm"</span><span>)</span><span>.</span><span>inspect</span>
<span>"#&lt;ActiveSupport::MessageEncryptor:0x0000000104888038&gt;"</span></pre></div>
<p><em>Petrik de Heus</em></p>
</li>
<li>
<p>Don't show contents for <code>EncryptedConfiguration#inspect</code>.</p>
<p>Before:</p>
<div data-snippet-clipboard-copy-content="Rails.application.credentials.inspect
&quot;#<ActiveSupport::EncryptedConfiguration:0x000000010d2b38e8 ... @config={:secret=>\&quot;something secret\&quot;} ... @key_file_contents=\&quot;915e4ea054e011022398dc242\&quot; ...>&quot;"><pre><span>Rails</span><span>.</span><span>application</span><span>.</span><span>credentials</span><span>.</span><span>inspect</span>
<span>"#&lt;ActiveSupport::EncryptedConfiguration:0x000000010d2b38e8 ... @config={:secret=&gt;<span>\"</span>something secret<span>\"</span>} ... @key_file_contents=<span>\"</span>915e4ea054e011022398dc242<span>\"</span> ...&gt;"</span></pre></div>
<p>After:</p>
<div data-snippet-clipboard-copy-content="Rails.application.credentials.inspect
&quot;#<ActiveSupport::EncryptedConfiguration:0x000000010d2b38e8>&quot;"><pre><span>Rails</span><span>.</span><span>application</span><span>.</span><span>credentials</span><span>.</span><span>inspect</span>
<span>"#&lt;ActiveSupport::EncryptedConfiguration:0x000000010d2b38e8&gt;"</span></pre></div>
<p><em>Petrik de Heus</em></p>
</li>
<li>
<p><code>ERB::Util.html_escape_once</code> always returns an <code>html_safe</code> string.</p>
<p>This method previously maintained the <code>html_safe?</code> property of a string on the return<br>
value. Because this string has been escaped, however, not marking it as <code>html_safe</code> causes<br>
entities to be double-escaped.</p>
<p>As an example, take this view snippet:</p>
<div data-snippet-clipboard-copy-content="<p><%= html_escape_once(&quot;this &amp; that &amp;amp; the other&quot;) %></p>"><pre><span>&lt;</span><span>p</span><span>&gt;</span><span>&lt;</span>%= html_escape_once("this &amp; that &amp;amp; the other") %<span>&gt;</span><span>&lt;/</span><span>p</span><span>&gt;</span></pre></div>
<p>Before this change, that would be double-escaped and render as:</p>
<div data-snippet-clipboard-copy-content="<p>this &amp;amp;amp; that &amp;amp;amp; the other</p>"><pre><span>&lt;</span><span>p</span><span>&gt;</span>this &amp;amp;amp; that &amp;amp;amp; the other<span>&lt;/</span><span>p</span><span>&gt;</span></pre></div>
<p>After this change, it renders correctly as:</p>
<div data-snippet-clipboard-copy-content="<p>this &amp;amp; that &amp;amp; the other</p>"><pre><span>&lt;</span><span>p</span><span>&gt;</span>this &amp;amp; that &amp;amp; the other<span>&lt;/</span><span>p</span><span>&gt;</span></pre></div>
<p>Fixes <a data-error-text="Failed to load title" data-id="1717796292" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/48256" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/48256/hovercard" href="https://github.com/rails/rails/issues/48256">#48256</a></p>
<p><em>Mike Dalessio</em></p>
</li>
<li>
<p>Deprecate <code>SafeBuffer#clone_empty</code>.</p>
<p>This method has not been used internally since Rails 4.2.0.</p>
<p><em>Mike Dalessio</em></p>
</li>
<li>
<p><code>MessageEncryptor</code>, <code>MessageVerifier</code>, and <code>config.active_support.message_serializer</code><br>
now accept <code>:message_pack</code> and <code>:message_pack_allow_marshal</code> as serializers.<br>
These serializers require the <a href="https://rubygems.org/gems/msgpack" rel="nofollow"><code>msgpack</code> gem</a><br>
(&gt;= 1.7.0).</p>
<p>The Message Pack format can provide improved performance and smaller payload<br>
sizes. It also supports round-tripping some Ruby types that are not supported<br>
by JSON. For example:</p>
<div data-snippet-clipboard-copy-content="verifier = ActiveSupport::MessageVerifier.new(&quot;secret&quot;)
data = [{ a: 1 }, { b: 2 }.with_indifferent_access, 1.to_d, Time.at(0, 123)]
message = verifier.generate(data)

# BEFORE with config.active_support.message_serializer = :json
verifier.verified(message)
# => [{&quot;a&quot;=>1}, {&quot;b&quot;=>2}, &quot;1.0&quot;, &quot;1969-12-31T18:00:00.000-06:00&quot;]
verifier.verified(message).map(&amp;:class)
# => [Hash, Hash, String, String]

# AFTER with config.active_support.message_serializer = :message_pack
verifier.verified(message)
# => [{:a=>1}, {&quot;b&quot;=>2}, 0.1e1, 1969-12-31 18:00:00.000123 -0600]
verifier.verified(message).map(&amp;:class)
# => [Hash, ActiveSupport::HashWithIndifferentAccess, BigDecimal, Time]"><pre><span>verifier</span> <span>=</span> <span>ActiveSupport</span>::<span>MessageVerifier</span><span>.</span><span>new</span><span>(</span><span>"secret"</span><span>)</span>
<span>data</span> <span>=</span> <span>[</span><span>{</span> <span>a</span>: <span>1</span> <span>}</span><span>,</span> <span>{</span> <span>b</span>: <span>2</span> <span>}</span><span>.</span><span>with_indifferent_access</span><span>,</span> <span>1</span><span>.</span><span>to_d</span><span>,</span> <span>Time</span><span>.</span><span>at</span><span>(</span><span>0</span><span>,</span> <span>123</span><span>)</span><span>]</span>
<span>message</span> <span>=</span> <span>verifier</span><span>.</span><span>generate</span><span>(</span><span>data</span><span>)</span>

<span># BEFORE with config.active_support.message_serializer = :json</span>
<span>verifier</span><span>.</span><span>verified</span><span>(</span><span>message</span><span>)</span>
<span># =&gt; [{"a"=&gt;1}, {"b"=&gt;2}, "1.0", "1969-12-31T18:00:00.000-06:00"]</span>
<span>verifier</span><span>.</span><span>verified</span><span>(</span><span>message</span><span>)</span><span>.</span><span>map</span><span>(</span>&amp;<span>:class</span><span>)</span>
<span># =&gt; [Hash, Hash, String, String]</span>

<span># AFTER with config.active_support.message_serializer = :message_pack</span>
<span>verifier</span><span>.</span><span>verified</span><span>(</span><span>message</span><span>)</span>
<span># =&gt; [{:a=&gt;1}, {"b"=&gt;2}, 0.1e1, 1969-12-31 18:00:00.000123 -0600]</span>
<span>verifier</span><span>.</span><span>verified</span><span>(</span><span>message</span><span>)</span><span>.</span><span>map</span><span>(</span>&amp;<span>:class</span><span>)</span>
<span># =&gt; [Hash, ActiveSupport::HashWithIndifferentAccess, BigDecimal, Time]</span></pre></div>
<p>The <code>:message_pack</code> serializer can fall back to deserializing with<br>
<code>ActiveSupport::JSON</code> when necessary, and the <code>:message_pack_allow_marshal</code><br>
serializer can fall back to deserializing with <code>Marshal</code> as well as<br>
<code>ActiveSupport::JSON</code>. Additionally, the <code>:marshal</code>, <code>:json</code>, and<br>
<code>:json_allow_marshal</code> serializers can now fall back to deserializing with<br>
<code>ActiveSupport::MessagePack</code> when necessary. These behaviors ensure old<br>
messages can still be read so that migration is easier.</p>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>A new <code>7.1</code> cache format is available which includes an optimization for<br>
bare string values such as view fragments.</p>
<p>The <code>7.1</code> cache format is used by default for new apps, and existing apps<br>
can enable the format by setting <code>config.load_defaults 7.1</code> or by setting<br>
<code>config.active_support.cache_format_version = 7.1</code> in <code>config/application.rb</code><br>
or a <code>config/environments/*.rb</code> file.</p>
<p>Cache entries written using the <code>6.1</code> or <code>7.0</code> cache formats can be read<br>
when using the <code>7.1</code> format. To perform a rolling deploy of a Rails 7.1<br>
upgrade, wherein servers that have not yet been upgraded must be able to<br>
read caches from upgraded servers, leave the cache format unchanged on the<br>
first deploy, then enable the <code>7.1</code> cache format on a subsequent deploy.</p>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Active Support cache stores can now use a preconfigured serializer based on<br>
<code>ActiveSupport::MessagePack</code> via the <code>:serializer</code> option:</p>
<div data-snippet-clipboard-copy-content="config.cache_store = :redis_cache_store, { serializer: :message_pack }"><pre><span>config</span><span>.</span><span>cache_store</span> <span>=</span> <span>:redis_cache_store</span><span>,</span> <span>{</span> <span>serializer</span>: <span>:message_pack</span> <span>}</span></pre></div>
<p>The <code>:message_pack</code> serializer can reduce cache entry sizes and improve<br>
performance, but requires the <a href="https://rubygems.org/gems/msgpack" rel="nofollow"><code>msgpack</code> gem</a><br>
(&gt;= 1.7.0).</p>
<p>The <code>:message_pack</code> serializer can read cache entries written by the default<br>
serializer, and the default serializer can now read entries written by the<br>
<code>:message_pack</code> serializer. These behaviors make it easy to migrate between<br>
serializer without invalidating the entire cache.</p>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p><code>Object#deep_dup</code> no longer duplicate named classes and modules.</p>
<p>Before:</p>
<div data-snippet-clipboard-copy-content="hash = { class: Object, module: Kernel }
hash.deep_dup # => {:class=>#<Class:0x00000001063ffc80>, :module=>#<Module:0x00000001063ffa00>}"><pre><span>hash</span> <span>=</span> <span>{</span> <span>class</span>: <span>Object</span><span>,</span> <span>module</span>: <span>Kernel</span> <span>}</span>
<span>hash</span><span>.</span><span>deep_dup</span> <span># =&gt; {:class=&gt;#&lt;Class:0x00000001063ffc80&gt;, :module=&gt;#&lt;Module:0x00000001063ffa00&gt;}</span></pre></div>
<p>After:</p>
<div data-snippet-clipboard-copy-content="hash = { class: Object, module: Kernel }
hash.deep_dup # => {:class=>Object, :module=>Kernel}"><pre><span>hash</span> <span>=</span> <span>{</span> <span>class</span>: <span>Object</span><span>,</span> <span>module</span>: <span>Kernel</span> <span>}</span>
<span>hash</span><span>.</span><span>deep_dup</span> <span># =&gt; {:class=&gt;Object, :module=&gt;Kernel}</span></pre></div>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Consistently raise an <code>ArgumentError</code> if the <code>ActiveSupport::Cache</code> key is blank.</p>
<p><em>Joshua Young</em></p>
</li>
<li>
<p>Deprecate usage of the singleton <code>ActiveSupport::Deprecation</code>.</p>
<p>All usage of <code>ActiveSupport::Deprecation</code> as a singleton is deprecated, the most common one being<br>
<code>ActiveSupport::Deprecation.warn</code>. Gem authors should now create their own deprecator (<code>ActiveSupport::Deprecation</code><br>
object), and use it to emit deprecation warnings.</p>
<p>Calling any of the following without specifying a deprecator argument is also deprecated:</p>
<ul>
<li>Module.deprecate</li>
<li>deprecate_constant</li>
<li>DeprecatedObjectProxy</li>
<li>DeprecatedInstanceVariableProxy</li>
<li>DeprecatedConstantProxy</li>
<li>deprecation-related test assertions</li>
</ul>
<p>Use of <code>ActiveSupport::Deprecation.silence</code> and configuration methods like <code>behavior=</code>, <code>disallowed_behavior=</code>,<br>
<code>disallowed_warnings=</code> should now be aimed at the <a href="https://api.rubyonrails.org/classes/Rails/Application.html#method-i-deprecators" rel="nofollow">application's deprecators</a>.</p>
<div data-snippet-clipboard-copy-content="Rails.application.deprecators.silence do
  # code that emits deprecation warnings
end"><pre><span>Rails</span><span>.</span><span>application</span><span>.</span><span>deprecators</span><span>.</span><span>silence</span> <span>do</span>
  <span># code that emits deprecation warnings</span>
<span>end</span></pre></div>
<p>If your gem has a Railtie or Engine, it's encouraged to add your deprecator to the application's deprecators, that<br>
way the deprecation related configuration options will apply to it as well, e.g.<br>
<code>config.active_support.report_deprecations</code> set to <code>false</code> in the production environment will also disable your<br>
deprecator.</p>
<div data-snippet-clipboard-copy-content="initializer &quot;my_gem.deprecator&quot; do |app|
  app.deprecators[:my_gem] = MyGem.deprecator
end"><pre><span>initializer</span> <span>"my_gem.deprecator"</span> <span>do</span> |<span>app</span>|
  <span>app</span><span>.</span><span>deprecators</span><span>[</span><span>:my_gem</span><span>]</span> <span>=</span> <span>MyGem</span><span>.</span><span>deprecator</span>
<span>end</span></pre></div>
<p><em>Étienne Barrié</em></p>
</li>
<li>
<p>Add <code>Object#with</code> to set and restore public attributes around a block</p>
<div data-snippet-clipboard-copy-content="client.timeout # => 5
client.with(timeout: 1) do
  client.timeout # => 1
end
client.timeout # => 5"><pre><span>client</span><span>.</span><span>timeout</span> <span># =&gt; 5</span>
<span>client</span><span>.</span><span>with</span><span>(</span><span>timeout</span>: <span>1</span><span>)</span> <span>do</span>
  <span>client</span><span>.</span><span>timeout</span> <span># =&gt; 1</span>
<span>end</span>
<span>client</span><span>.</span><span>timeout</span> <span># =&gt; 5</span></pre></div>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Remove deprecated support to generate incorrect RFC 4122 UUIDs when providing a namespace ID that is not one of the<br>
constants defined on <code>Digest::UUID</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Deprecate <code>config.active_support.use_rfc4122_namespaced_uuids</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Remove implicit conversion of objects into <code>String</code> by <code>ActiveSupport::SafeBuffer</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Remove deprecated <code>active_support/core_ext/range/include_time_with_zone</code> file.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Deprecate <code>config.active_support.remove_deprecated_time_with_zone_name</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Remove deprecated override of <code>ActiveSupport::TimeWithZone.name</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Deprecate <code>config.active_support.disable_to_s_conversion</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Remove deprecated option to passing a format to <code>#to_s</code> in <code>Array</code>, <code>Range</code>, <code>Date</code>, <code>DateTime</code>, <code>Time</code>,<br>
<code>BigDecimal</code>, <code>Float</code> and, <code>Integer</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Remove deprecated <code>ActiveSupport::PerThreadRegistry</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Remove deprecated override of <code>Enumerable#sum</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Deprecated initializing a <code>ActiveSupport::Cache::MemCacheStore</code> with an instance of <code>Dalli::Client</code>.</p>
<p>Deprecate the undocumented option of providing an already-initialized instance of <code>Dalli::Client</code> to <code>ActiveSupport::Cache::MemCacheStore</code>. Such clients could be configured with unrecognized options, which could lead to unexpected behavior. Instead, provide addresses as documented.</p>
<p><em>aledustet</em></p>
</li>
<li>
<p>Stub <code>Time.new()</code> in <code>TimeHelpers#travel_to</code></p>
<div data-snippet-clipboard-copy-content="travel_to Time.new(2004, 11, 24) do
  # Inside the `travel_to` block `Time.new` is stubbed
  assert_equal 2004, Time.new.year
end"><pre><span>travel_to</span> <span>Time</span><span>.</span><span>new</span><span>(</span><span>2004</span><span>,</span> <span>11</span><span>,</span> <span>24</span><span>)</span> <span>do</span>
  <span># Inside the `travel_to` block `Time.new` is stubbed</span>
  <span>assert_equal</span> <span>2004</span><span>,</span> <span>Time</span><span>.</span><span>new</span><span>.</span><span>year</span>
<span>end</span></pre></div>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Raise <code>ActiveSupport::MessageEncryptor::InvalidMessage</code> from<br>
<code>ActiveSupport::MessageEncryptor#decrypt_and_verify</code> regardless of cipher.<br>
Previously, when a <code>MessageEncryptor</code> was using a non-AEAD cipher such as<br>
AES-256-CBC, a corrupt or tampered message would raise<br>
<code>ActiveSupport::MessageVerifier::InvalidSignature</code>.  Now, all ciphers raise<br>
the same error:</p>
<div data-snippet-clipboard-copy-content="encryptor = ActiveSupport::MessageEncryptor.new(&quot;x&quot; * 32, cipher: &quot;aes-256-gcm&quot;)
message = encryptor.encrypt_and_sign(&quot;message&quot;)
encryptor.decrypt_and_verify(message.next)
# => raises ActiveSupport::MessageEncryptor::InvalidMessage

encryptor = ActiveSupport::MessageEncryptor.new(&quot;x&quot; * 32, cipher: &quot;aes-256-cbc&quot;)
message = encryptor.encrypt_and_sign(&quot;message&quot;)
encryptor.decrypt_and_verify(message.next)
# BEFORE:
# => raises ActiveSupport::MessageVerifier::InvalidSignature
# AFTER:
# => raises ActiveSupport::MessageEncryptor::InvalidMessage"><pre><span>encryptor</span> <span>=</span> <span>ActiveSupport</span>::<span>MessageEncryptor</span><span>.</span><span>new</span><span>(</span><span>"x"</span> * <span>32</span><span>,</span> <span>cipher</span>: <span>"aes-256-gcm"</span><span>)</span>
<span>message</span> <span>=</span> <span>encryptor</span><span>.</span><span>encrypt_and_sign</span><span>(</span><span>"message"</span><span>)</span>
<span>encryptor</span><span>.</span><span>decrypt_and_verify</span><span>(</span><span>message</span><span>.</span><span>next</span><span>)</span>
<span># =&gt; raises ActiveSupport::MessageEncryptor::InvalidMessage</span>

<span>encryptor</span> <span>=</span> <span>ActiveSupport</span>::<span>MessageEncryptor</span><span>.</span><span>new</span><span>(</span><span>"x"</span> * <span>32</span><span>,</span> <span>cipher</span>: <span>"aes-256-cbc"</span><span>)</span>
<span>message</span> <span>=</span> <span>encryptor</span><span>.</span><span>encrypt_and_sign</span><span>(</span><span>"message"</span><span>)</span>
<span>encryptor</span><span>.</span><span>decrypt_and_verify</span><span>(</span><span>message</span><span>.</span><span>next</span><span>)</span>
<span># BEFORE:</span>
<span># =&gt; raises ActiveSupport::MessageVerifier::InvalidSignature</span>
<span># AFTER:</span>
<span># =&gt; raises ActiveSupport::MessageEncryptor::InvalidMessage</span></pre></div>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Support <code>nil</code> original values when using <code>ActiveSupport::MessageVerifier#verify</code>.<br>
Previously, <code>MessageVerifier#verify</code> did not work with <code>nil</code> original<br>
values, though both <code>MessageVerifier#verified</code> and<br>
<code>MessageEncryptor#decrypt_and_verify</code> do:</p>
<div data-snippet-clipboard-copy-content="encryptor = ActiveSupport::MessageEncryptor.new(secret)
message = encryptor.encrypt_and_sign(nil)

encryptor.decrypt_and_verify(message)
# => nil

verifier = ActiveSupport::MessageVerifier.new(secret)
message = verifier.generate(nil)

verifier.verified(message)
# => nil

verifier.verify(message)
# BEFORE:
# => raises ActiveSupport::MessageVerifier::InvalidSignature
# AFTER:
# => nil"><pre><span>encryptor</span> <span>=</span> <span>ActiveSupport</span>::<span>MessageEncryptor</span><span>.</span><span>new</span><span>(</span><span>secret</span><span>)</span>
<span>message</span> <span>=</span> <span>encryptor</span><span>.</span><span>encrypt_and_sign</span><span>(</span><span>nil</span><span>)</span>

<span>encryptor</span><span>.</span><span>decrypt_and_verify</span><span>(</span><span>message</span><span>)</span>
<span># =&gt; nil</span>

<span>verifier</span> <span>=</span> <span>ActiveSupport</span>::<span>MessageVerifier</span><span>.</span><span>new</span><span>(</span><span>secret</span><span>)</span>
<span>message</span> <span>=</span> <span>verifier</span><span>.</span><span>generate</span><span>(</span><span>nil</span><span>)</span>

<span>verifier</span><span>.</span><span>verified</span><span>(</span><span>message</span><span>)</span>
<span># =&gt; nil</span>

<span>verifier</span><span>.</span><span>verify</span><span>(</span><span>message</span><span>)</span>
<span># BEFORE:</span>
<span># =&gt; raises ActiveSupport::MessageVerifier::InvalidSignature</span>
<span># AFTER:</span>
<span># =&gt; nil</span></pre></div>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Maintain <code>html_safe?</code> on html_safe strings when sliced with <code>slice</code>, <code>slice!</code>, or <code>chr</code> method.</p>
<p>Previously, <code>html_safe?</code> was only maintained when the html_safe strings were sliced<br>
with <code>[]</code> method. Now, <code>slice</code>, <code>slice!</code>, and <code>chr</code> methods will maintain <code>html_safe?</code> like <code>[]</code> method.</p>
<div data-snippet-clipboard-copy-content="string = &quot;<div>test</div>&quot;.html_safe
string.slice(0, 1).html_safe? # => true
string.slice!(0, 1).html_safe? # => true
# maintain html_safe? after the slice!
string.html_safe? # => true
string.chr.html_safe? # => true"><pre><span>string</span> <span>=</span> <span>"&lt;div&gt;test&lt;/div&gt;"</span><span>.</span><span>html_safe</span>
<span>string</span><span>.</span><span>slice</span><span>(</span><span>0</span><span>,</span> <span>1</span><span>)</span><span>.</span><span>html_safe?</span> <span># =&gt; true</span>
<span>string</span><span>.</span><span>slice!</span><span>(</span><span>0</span><span>,</span> <span>1</span><span>)</span><span>.</span><span>html_safe?</span> <span># =&gt; true</span>
<span># maintain html_safe? after the slice!</span>
<span>string</span><span>.</span><span>html_safe?</span> <span># =&gt; true</span>
<span>string</span><span>.</span><span>chr</span><span>.</span><span>html_safe?</span> <span># =&gt; true</span></pre></div>
<p><em>Michael Go</em></p>
</li>
<li>
<p>Add <code>Object#in?</code> support for open ranges.</p>
<div data-snippet-clipboard-copy-content="assert Date.today.in?(..Date.tomorrow)
assert_not Date.today.in?(Date.tomorrow..)"><pre><span>assert</span> <span>Date</span><span>.</span><span>today</span><span>.</span><span>in?</span><span>(</span>..<span>Date</span><span>.</span><span>tomorrow</span><span>)</span>
<span>assert_not</span> <span>Date</span><span>.</span><span>today</span><span>.</span><span>in?</span><span>(</span><span>Date</span><span>.</span><span>tomorrow</span>..<span>)</span></pre></div>
<p><em>Ignacio Galindo</em></p>
</li>
<li>
<p><code>config.i18n.raise_on_missing_translations = true</code> now raises on any missing translation.</p>
<p>Previously it would only raise when called in a view or controller. Now it will raise<br>
anytime <code>I18n.t</code> is provided an unrecognised key.</p>
<p>If you do not want this behaviour, you can customise the i18n exception handler. See the<br>
upgrading guide or i18n guide for more information.</p>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p><code>ActiveSupport::CurrentAttributes</code> now raises if a restricted attribute name is used.</p>
<p>Attributes such as <code>set</code> and <code>reset</code> cannot be used as they clash with the<br>
<code>CurrentAttributes</code> public API.</p>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p><code>HashWithIndifferentAccess#transform_keys</code> now takes a Hash argument, just<br>
as Ruby's <code>Hash#transform_keys</code> does.</p>
<p><em>Akira Matsuda</em></p>
</li>
<li>
<p><code>delegate</code> now defines method with proper arity when delegating to a Class.<br>
With this change, it defines faster method (3.5x faster with no argument).<br>
However, in order to gain this benefit, the delegation target method has to<br>
be defined before declaring the delegation.</p>
<div data-snippet-clipboard-copy-content="# This defines 3.5 times faster method than before
class C
  def self.x() end
  delegate :x, to: :class
end

class C
  # This works but silently falls back to old behavior because
  # `delegate` cannot find the definition of `x`
  delegate :x, to: :class
  def self.x() end
end"><pre><span># This defines 3.5 times faster method than before</span>
<span>class</span> <span>C</span>
  <span>def</span> <span>self</span><span>.</span><span>x</span><span>(</span><span>)</span> <span>end</span>
  <span>delegate</span> <span>:x</span><span>,</span> <span>to</span>: <span>:class</span>
<span>end</span>

<span>class</span> <span>C</span>
  <span># This works but silently falls back to old behavior because</span>
  <span># `delegate` cannot find the definition of `x`</span>
  <span>delegate</span> <span>:x</span><span>,</span> <span>to</span>: <span>:class</span>
  <span>def</span> <span>self</span><span>.</span><span>x</span><span>(</span><span>)</span> <span>end</span>
<span>end</span></pre></div>
<p><em>Akira Matsuda</em></p>
</li>
<li>
<p><code>assert_difference</code> message now includes what changed.</p>
<p>This makes it easier to debug non-obvious failures.</p>
<p>Before:</p>
<div data-snippet-clipboard-copy-content="&quot;User.count&quot; didn't change by 32.
Expected: 1611
  Actual: 1579"><pre><code>"User.count" didn't change by 32.
Expected: 1611
  Actual: 1579
</code></pre></div>
<p>After:</p>
<div data-snippet-clipboard-copy-content="&quot;User.count&quot; didn't change by 32, but by 0.
Expected: 1611
  Actual: 1579"><pre><code>"User.count" didn't change by 32, but by 0.
Expected: 1611
  Actual: 1579
</code></pre></div>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Add ability to match exception messages to <code>assert_raises</code> assertion</p>
<p>Instead of this</p>
<div data-snippet-clipboard-copy-content="error = assert_raises(ArgumentError) do
  perform_service(param: 'exception')
end
assert_match(/incorrect param/i, error.message)"><pre><span>error</span> <span>=</span> <span>assert_raises</span><span>(</span><span>ArgumentError</span><span>)</span> <span>do</span>
  <span>perform_service</span><span>(</span><span>param</span>: <span>'exception'</span><span>)</span>
<span>end</span>
<span>assert_match</span><span>(</span><span>/incorrect param/i</span><span>,</span> <span>error</span><span>.</span><span>message</span><span>)</span></pre></div>
<p>you can now write this</p>
<div data-snippet-clipboard-copy-content="assert_raises(ArgumentError, match: /incorrect param/i) do
  perform_service(param: 'exception')
end"><pre><span>assert_raises</span><span>(</span><span>ArgumentError</span><span>,</span> <span>match</span>: <span>/incorrect param/i</span><span>)</span> <span>do</span>
  <span>perform_service</span><span>(</span><span>param</span>: <span>'exception'</span><span>)</span>
<span>end</span></pre></div>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Add <code>Rails.env.local?</code> shorthand for <code>Rails.env.development? || Rails.env.test?</code>.</p>
<p><em>DHH</em></p>
</li>
<li>
<p><code>ActiveSupport::Testing::TimeHelpers</code> now accepts named <code>with_usec</code> argument<br>
to <code>freeze_time</code>, <code>travel</code>, and <code>travel_to</code> methods. Passing true prevents<br>
truncating the destination time with <code>change(usec: 0)</code>.</p>
<p><em>KevSlashNull</em>, and <em>serprex</em></p>
</li>
<li>
<p><code>ActiveSupport::CurrentAttributes.resets</code> now accepts a method name</p>
<p>The block API is still the recommended approach, but now both APIs are supported:</p>
<div data-snippet-clipboard-copy-content="class Current < ActiveSupport::CurrentAttributes
  resets { Time.zone = nil }
  resets :clear_time_zone
end"><pre><span>class</span> <span>Current</span> &lt; <span>ActiveSupport</span>::<span>CurrentAttributes</span>
  <span>resets</span> <span>{</span> <span>Time</span><span>.</span><span>zone</span> <span>=</span> <span>nil</span> <span>}</span>
  <span>resets</span> <span>:clear_time_zone</span>
<span>end</span></pre></div>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Ensure <code>ActiveSupport::Testing::Isolation::Forking</code> closes pipes</p>
<p>Previously, <code>Forking.run_in_isolation</code> opened two ends of a pipe. The fork<br>
process closed the read end, wrote to it, and then terminated (which<br>
presumably closed the file descriptors on its end). The parent process<br>
closed the write end, read from it, and returned, never closing the read<br>
end.</p>
<p>This resulted in an accumulation of open file descriptors, which could<br>
cause errors if the limit is reached.</p>
<p><em>Sam Bostock</em></p>
</li>
<li>
<p>Fix <code>Time#change</code> and <code>Time#advance</code> for times around the end of Daylight<br>
Saving Time.</p>
<p>Previously, when <code>Time#change</code> or <code>Time#advance</code> constructed a time inside<br>
the final stretch of Daylight Saving Time (DST), the non-DST offset would<br>
always be chosen for local times:</p>
<div data-snippet-clipboard-copy-content="# DST ended just before 2021-11-07 2:00:00 AM in US/Eastern.
ENV[&quot;TZ&quot;] = &quot;US/Eastern&quot;

time = Time.local(2021, 11, 07, 00, 59, 59) + 1
# => 2021-11-07 01:00:00 -0400
time.change(day: 07)
# => 2021-11-07 01:00:00 -0500
time.advance(seconds: 0)
# => 2021-11-07 01:00:00 -0500

time = Time.local(2021, 11, 06, 01, 00, 00)
# => 2021-11-06 01:00:00 -0400
time.change(day: 07)
# => 2021-11-07 01:00:00 -0500
time.advance(days: 1)
# => 2021-11-07 01:00:00 -0500"><pre><span># DST ended just before 2021-11-07 2:00:00 AM in US/Eastern.</span>
<span>ENV</span><span>[</span><span>"TZ"</span><span>]</span> <span>=</span> <span>"US/Eastern"</span>

<span>time</span> <span>=</span> <span>Time</span><span>.</span><span>local</span><span>(</span><span>2021</span><span>,</span> <span>11</span><span>,</span> <span>07</span><span>,</span> <span>00</span><span>,</span> <span>59</span><span>,</span> <span>59</span><span>)</span> + <span>1</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span>
<span>time</span><span>.</span><span>change</span><span>(</span><span>day</span>: <span>07</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span>
<span>time</span><span>.</span><span>advance</span><span>(</span><span>seconds</span>: <span>0</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span>

<span>time</span> <span>=</span> <span>Time</span><span>.</span><span>local</span><span>(</span><span>2021</span><span>,</span> <span>11</span><span>,</span> <span>06</span><span>,</span> <span>01</span><span>,</span> <span>00</span><span>,</span> <span>00</span><span>)</span>
<span># =&gt; 2021-11-06 01:00:00 -0400</span>
<span>time</span><span>.</span><span>change</span><span>(</span><span>day</span>: <span>07</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span>
<span>time</span><span>.</span><span>advance</span><span>(</span><span>days</span>: <span>1</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span></pre></div>
<p>And the DST offset would always be chosen for times with a <code>TimeZone</code><br>
object:</p>
<div data-snippet-clipboard-copy-content="Time.zone = &quot;US/Eastern&quot;

time = Time.new(2021, 11, 07, 02, 00, 00, Time.zone) - 3600
# => 2021-11-07 01:00:00 -0500
time.change(day: 07)
# => 2021-11-07 01:00:00 -0400
time.advance(seconds: 0)
# => 2021-11-07 01:00:00 -0400

time = Time.new(2021, 11, 8, 01, 00, 00, Time.zone)
# => 2021-11-08 01:00:00 -0500
time.change(day: 07)
# => 2021-11-07 01:00:00 -0400
time.advance(days: -1)
# => 2021-11-07 01:00:00 -0400"><pre><span>Time</span><span>.</span><span>zone</span> <span>=</span> <span>"US/Eastern"</span>

<span>time</span> <span>=</span> <span>Time</span><span>.</span><span>new</span><span>(</span><span>2021</span><span>,</span> <span>11</span><span>,</span> <span>07</span><span>,</span> <span>02</span><span>,</span> <span>00</span><span>,</span> <span>00</span><span>,</span> <span>Time</span><span>.</span><span>zone</span><span>)</span> - <span>3600</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span>
<span>time</span><span>.</span><span>change</span><span>(</span><span>day</span>: <span>07</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span>
<span>time</span><span>.</span><span>advance</span><span>(</span><span>seconds</span>: <span>0</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span>

<span>time</span> <span>=</span> <span>Time</span><span>.</span><span>new</span><span>(</span><span>2021</span><span>,</span> <span>11</span><span>,</span> <span>8</span><span>,</span> <span>01</span><span>,</span> <span>00</span><span>,</span> <span>00</span><span>,</span> <span>Time</span><span>.</span><span>zone</span><span>)</span>
<span># =&gt; 2021-11-08 01:00:00 -0500</span>
<span>time</span><span>.</span><span>change</span><span>(</span><span>day</span>: <span>07</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span>
<span>time</span><span>.</span><span>advance</span><span>(</span><span>days</span>: -<span>1</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span></pre></div>
<p>Now, <code>Time#change</code> and <code>Time#advance</code> will choose the offset that matches<br>
the original time's offset when possible:</p>
<div data-snippet-clipboard-copy-content="ENV[&quot;TZ&quot;] = &quot;US/Eastern&quot;

time = Time.local(2021, 11, 07, 00, 59, 59) + 1
# => 2021-11-07 01:00:00 -0400
time.change(day: 07)
# => 2021-11-07 01:00:00 -0400
time.advance(seconds: 0)
# => 2021-11-07 01:00:00 -0400

time = Time.local(2021, 11, 06, 01, 00, 00)
# => 2021-11-06 01:00:00 -0400
time.change(day: 07)
# => 2021-11-07 01:00:00 -0400
time.advance(days: 1)
# => 2021-11-07 01:00:00 -0400

Time.zone = &quot;US/Eastern&quot;

time = Time.new(2021, 11, 07, 02, 00, 00, Time.zone) - 3600
# => 2021-11-07 01:00:00 -0500
time.change(day: 07)
# => 2021-11-07 01:00:00 -0500
time.advance(seconds: 0)
# => 2021-11-07 01:00:00 -0500

time = Time.new(2021, 11, 8, 01, 00, 00, Time.zone)
# => 2021-11-08 01:00:00 -0500
time.change(day: 07)
# => 2021-11-07 01:00:00 -0500
time.advance(days: -1)
# => 2021-11-07 01:00:00 -0500"><pre><span>ENV</span><span>[</span><span>"TZ"</span><span>]</span> <span>=</span> <span>"US/Eastern"</span>

<span>time</span> <span>=</span> <span>Time</span><span>.</span><span>local</span><span>(</span><span>2021</span><span>,</span> <span>11</span><span>,</span> <span>07</span><span>,</span> <span>00</span><span>,</span> <span>59</span><span>,</span> <span>59</span><span>)</span> + <span>1</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span>
<span>time</span><span>.</span><span>change</span><span>(</span><span>day</span>: <span>07</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span>
<span>time</span><span>.</span><span>advance</span><span>(</span><span>seconds</span>: <span>0</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span>

<span>time</span> <span>=</span> <span>Time</span><span>.</span><span>local</span><span>(</span><span>2021</span><span>,</span> <span>11</span><span>,</span> <span>06</span><span>,</span> <span>01</span><span>,</span> <span>00</span><span>,</span> <span>00</span><span>)</span>
<span># =&gt; 2021-11-06 01:00:00 -0400</span>
<span>time</span><span>.</span><span>change</span><span>(</span><span>day</span>: <span>07</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span>
<span>time</span><span>.</span><span>advance</span><span>(</span><span>days</span>: <span>1</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0400</span>

<span>Time</span><span>.</span><span>zone</span> <span>=</span> <span>"US/Eastern"</span>

<span>time</span> <span>=</span> <span>Time</span><span>.</span><span>new</span><span>(</span><span>2021</span><span>,</span> <span>11</span><span>,</span> <span>07</span><span>,</span> <span>02</span><span>,</span> <span>00</span><span>,</span> <span>00</span><span>,</span> <span>Time</span><span>.</span><span>zone</span><span>)</span> - <span>3600</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span>
<span>time</span><span>.</span><span>change</span><span>(</span><span>day</span>: <span>07</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span>
<span>time</span><span>.</span><span>advance</span><span>(</span><span>seconds</span>: <span>0</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span>

<span>time</span> <span>=</span> <span>Time</span><span>.</span><span>new</span><span>(</span><span>2021</span><span>,</span> <span>11</span><span>,</span> <span>8</span><span>,</span> <span>01</span><span>,</span> <span>00</span><span>,</span> <span>00</span><span>,</span> <span>Time</span><span>.</span><span>zone</span><span>)</span>
<span># =&gt; 2021-11-08 01:00:00 -0500</span>
<span>time</span><span>.</span><span>change</span><span>(</span><span>day</span>: <span>07</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span>
<span>time</span><span>.</span><span>advance</span><span>(</span><span>days</span>: -<span>1</span><span>)</span>
<span># =&gt; 2021-11-07 01:00:00 -0500</span></pre></div>
<p><em>Kevin Hall</em>, <em>Takayoshi Nishida</em>, and <em>Jonathan Hefner</em></p>
</li>
<li>
<p>Fix MemoryStore to preserve entries TTL when incrementing or decrementing</p>
<p>This is to be more consistent with how MemCachedStore and RedisCacheStore behaves.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p><code>Rails.error.handle</code> and <code>Rails.error.record</code> filter now by multiple error classes.</p>
<div data-snippet-clipboard-copy-content="Rails.error.handle(IOError, ArgumentError) do
  1 + '1' # raises TypeError
end
1 + 1 # TypeErrors are not IOErrors or ArgumentError, so this will *not* be handled"><pre><span>Rails</span><span>.</span><span>error</span><span>.</span><span>handle</span><span>(</span><span>IOError</span><span>,</span> <span>ArgumentError</span><span>)</span> <span>do</span>
  <span>1</span> + <span>'1'</span> <span># raises TypeError</span>
<span>end</span>
<span>1</span> + <span>1</span> <span># TypeErrors are not IOErrors or ArgumentError, so this will *not* be handled</span></pre></div>
<p><em>Martin Spickermann</em></p>
</li>
<li>
<p><code>Class#subclasses</code> and <code>Class#descendants</code> now automatically filter reloaded classes.</p>
<p>Previously they could return old implementations of reloadable classes that have been<br>
dereferenced but not yet garbage collected.</p>
<p>They now automatically filter such classes like <code>DescendantTracker#subclasses</code> and<br>
<code>DescendantTracker#descendants</code>.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p><code>Rails.error.report</code> now marks errors as reported to avoid reporting them twice.</p>
<p>In some cases, users might want to report errors explicitly with some extra context<br>
before letting it bubble up.</p>
<p>This also allows to safely catch and report errors outside of the execution context.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Add <code>assert_error_reported</code> and <code>assert_no_error_reported</code></p>
<p>Allows to easily asserts an error happened but was handled</p>
<div data-snippet-clipboard-copy-content="report = assert_error_reported(IOError) do
  # ...
end
assert_equal &quot;Oops&quot;, report.error.message
assert_equal &quot;admin&quot;, report.context[:section]
assert_equal :warning, report.severity
assert_predicate report, :handled?"><pre><span>report</span> <span>=</span> <span>assert_error_reported</span><span>(</span><span>IOError</span><span>)</span> <span>do</span>
  <span># ...</span>
<span>end</span>
<span>assert_equal</span> <span>"Oops"</span><span>,</span> <span>report</span><span>.</span><span>error</span><span>.</span><span>message</span>
<span>assert_equal</span> <span>"admin"</span><span>,</span> <span>report</span><span>.</span><span>context</span><span>[</span><span>:section</span><span>]</span>
<span>assert_equal</span> <span>:warning</span><span>,</span> <span>report</span><span>.</span><span>severity</span>
<span>assert_predicate</span> <span>report</span><span>,</span> <span>:handled?</span></pre></div>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p><code>ActiveSupport::Deprecation</code> behavior callbacks can now receive the<br>
deprecator instance as an argument.  This makes it easier for such callbacks<br>
to change their behavior based on the deprecator's state.  For example,<br>
based on the deprecator's <code>debug</code> flag.</p>
<p>3-arity and splat-args callbacks such as the following will now be passed<br>
the deprecator instance as their third argument:</p>
<ul>
<li><code>-&gt;(message, callstack, deprecator) { ... }</code></li>
<li><code>-&gt;(*args) { ... }</code></li>
<li><code>-&gt;(message, *other_args) { ... }</code></li>
</ul>
<p>2-arity and 4-arity callbacks such as the following will continue to behave<br>
the same as before:</p>
<ul>
<li><code>-&gt;(message, callstack) { ... }</code></li>
<li><code>-&gt;(message, callstack, deprecation_horizon, gem_name) { ... }</code></li>
<li><code>-&gt;(message, callstack, *deprecation_details) { ... }</code></li>
</ul>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p><code>ActiveSupport::Deprecation#disallowed_warnings</code> now affects the instance on<br>
which it is configured.</p>
<p>This means that individual <code>ActiveSupport::Deprecation</code> instances can be<br>
configured with their own disallowed warnings, and the global<br>
<code>ActiveSupport::Deprecation.disallowed_warnings</code> now only affects the global<br>
<code>ActiveSupport::Deprecation.warn</code>.</p>
<p><strong>Before</strong></p>
<div data-snippet-clipboard-copy-content="ActiveSupport::Deprecation.disallowed_warnings = [&quot;foo&quot;]
deprecator = ActiveSupport::Deprecation.new(&quot;2.0&quot;, &quot;MyCoolGem&quot;)
deprecator.disallowed_warnings = [&quot;bar&quot;]

ActiveSupport::Deprecation.warn(&quot;foo&quot;) # => raise ActiveSupport::DeprecationException
ActiveSupport::Deprecation.warn(&quot;bar&quot;) # => print &quot;DEPRECATION WARNING: bar&quot;
deprecator.warn(&quot;foo&quot;)                 # => raise ActiveSupport::DeprecationException
deprecator.warn(&quot;bar&quot;)                 # => print &quot;DEPRECATION WARNING: bar&quot;"><pre><span>ActiveSupport</span>::<span>Deprecation</span><span>.</span><span>disallowed_warnings</span> <span>=</span> <span>[</span><span>"foo"</span><span>]</span>
<span>deprecator</span> <span>=</span> <span>ActiveSupport</span>::<span>Deprecation</span><span>.</span><span>new</span><span>(</span><span>"2.0"</span><span>,</span> <span>"MyCoolGem"</span><span>)</span>
<span>deprecator</span><span>.</span><span>disallowed_warnings</span> <span>=</span> <span>[</span><span>"bar"</span><span>]</span>

<span>ActiveSupport</span>::<span>Deprecation</span><span>.</span><span>warn</span><span>(</span><span>"foo"</span><span>)</span> <span># =&gt; raise ActiveSupport::DeprecationException</span>
<span>ActiveSupport</span>::<span>Deprecation</span><span>.</span><span>warn</span><span>(</span><span>"bar"</span><span>)</span> <span># =&gt; print "DEPRECATION WARNING: bar"</span>
<span>deprecator</span><span>.</span><span>warn</span><span>(</span><span>"foo"</span><span>)</span>                 <span># =&gt; raise ActiveSupport::DeprecationException</span>
<span>deprecator</span><span>.</span><span>warn</span><span>(</span><span>"bar"</span><span>)</span>                 <span># =&gt; print "DEPRECATION WARNING: bar"</span></pre></div>
<p><strong>After</strong></p>
<div data-snippet-clipboard-copy-content="ActiveSupport::Deprecation.disallowed_warnings = [&quot;foo&quot;]
deprecator = ActiveSupport::Deprecation.new(&quot;2.0&quot;, &quot;MyCoolGem&quot;)
deprecator.disallowed_warnings = [&quot;bar&quot;]

ActiveSupport::Deprecation.warn(&quot;foo&quot;) # => raise ActiveSupport::DeprecationException
ActiveSupport::Deprecation.warn(&quot;bar&quot;) # => print &quot;DEPRECATION WARNING: bar&quot;
deprecator.warn(&quot;foo&quot;)                 # => print &quot;DEPRECATION WARNING: foo&quot;
deprecator.warn(&quot;bar&quot;)                 # => raise ActiveSupport::DeprecationException"><pre><span>ActiveSupport</span>::<span>Deprecation</span><span>.</span><span>disallowed_warnings</span> <span>=</span> <span>[</span><span>"foo"</span><span>]</span>
<span>deprecator</span> <span>=</span> <span>ActiveSupport</span>::<span>Deprecation</span><span>.</span><span>new</span><span>(</span><span>"2.0"</span><span>,</span> <span>"MyCoolGem"</span><span>)</span>
<span>deprecator</span><span>.</span><span>disallowed_warnings</span> <span>=</span> <span>[</span><span>"bar"</span><span>]</span>

<span>ActiveSupport</span>::<span>Deprecation</span><span>.</span><span>warn</span><span>(</span><span>"foo"</span><span>)</span> <span># =&gt; raise ActiveSupport::DeprecationException</span>
<span>ActiveSupport</span>::<span>Deprecation</span><span>.</span><span>warn</span><span>(</span><span>"bar"</span><span>)</span> <span># =&gt; print "DEPRECATION WARNING: bar"</span>
<span>deprecator</span><span>.</span><span>warn</span><span>(</span><span>"foo"</span><span>)</span>                 <span># =&gt; print "DEPRECATION WARNING: foo"</span>
<span>deprecator</span><span>.</span><span>warn</span><span>(</span><span>"bar"</span><span>)</span>                 <span># =&gt; raise ActiveSupport::DeprecationException</span></pre></div>
<p>Note that global <code>ActiveSupport::Deprecation</code> methods such as <code>ActiveSupport::Deprecation.warn</code><br>
and <code>ActiveSupport::Deprecation.disallowed_warnings</code> have been deprecated.</p>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Add italic and underline support to <code>ActiveSupport::LogSubscriber#color</code></p>
<p>Previously, only bold text was supported via a positional argument.<br>
This allows for bold, italic, and underline options to be specified<br>
for colored logs.</p>
<div data-snippet-clipboard-copy-content="info color(&quot;Hello world!&quot;, :red, bold: true, underline: true)"><pre><span>info</span> <span>color</span><span>(</span><span>"Hello world!"</span><span>,</span> <span>:red</span><span>,</span> <span>bold</span>: <span>true</span><span>,</span> <span>underline</span>: <span>true</span><span>)</span></pre></div>
<p><em>Gannon McGibbon</em></p>
</li>
<li>
<p>Add <code>String#downcase_first</code> method.</p>
<p>This method is the corollary of <code>String#upcase_first</code>.</p>
<p><em>Mark Schneider</em></p>
</li>
<li>
<p><code>thread_mattr_accessor</code> will call <code>.dup.freeze</code> on non-frozen default values.</p>
<p>This provides a basic level of protection against different threads trying<br>
to mutate a shared default object.</p>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Add <code>raise_on_invalid_cache_expiration_time</code> config to <code>ActiveSupport::Cache::Store</code></p>
<p>Specifies if an <code>ArgumentError</code> should be raised if <code>Rails.cache</code> <code>fetch</code> or<br>
<code>write</code> are given an invalid <code>expires_at</code> or <code>expires_in</code> time.</p>
<p>Options are <code>true</code>, and <code>false</code>. If <code>false</code>, the exception will be reported<br>
as <code>handled</code> and logged instead. Defaults to <code>true</code> if <code>config.load_defaults &gt;= 7.1</code>.</p>
<p><em>Trevor Turk</em></p>
</li>
<li>
<p><code>ActiveSupport::Cache:Store#fetch</code> now passes an options accessor to the block.</p>
<p>It makes possible to override cache options:</p>
<div data-snippet-clipboard-copy-content="Rails.cache.fetch(&quot;3rd-party-token&quot;) do |name, options|
  token = fetch_token_from_remote
  # set cache's TTL to match token's TTL
  options.expires_in = token.expires_in
  token
end"><pre><code>Rails.cache.fetch("3rd-party-token") do |name, options|
  token = fetch_token_from_remote
  # set cache's TTL to match token's TTL
  options.expires_in = token.expires_in
  token
end
</code></pre></div>
<p><em>Andrii Gladkyi</em>, <em>Jean Boussier</em></p>
</li>
<li>
<p><code>default</code> option of <code>thread_mattr_accessor</code> now applies through inheritance and<br>
also across new threads.</p>
<p>Previously, the <code>default</code> value provided was set only at the moment of defining<br>
the attribute writer, which would cause the attribute to be uninitialized in<br>
descendants and in other threads.</p>
<p>Fixes <a data-error-text="Failed to load title" data-id="1008053433" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/43312" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/43312/hovercard" href="https://github.com/rails/rails/issues/43312">#43312</a>.</p>
<p><em>Thierry Deo</em></p>
</li>
<li>
<p>Redis cache store is now compatible with redis-rb 5.0.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Add <code>skip_nil:</code> support to <code>ActiveSupport::Cache::Store#fetch_multi</code>.</p>
<p><em>Daniel Alfaro</em></p>
</li>
<li>
<p>Add <code>quarter</code> method to date/time</p>
<p><em>Matt Swanson</em></p>
</li>
<li>
<p>Fix <code>NoMethodError</code> on custom <code>ActiveSupport::Deprecation</code> behavior.</p>
<p><code>ActiveSupport::Deprecation.behavior=</code> was supposed to accept any object<br>
that responds to <code>call</code>, but in fact its internal implementation assumed that<br>
this object could respond to <code>arity</code>, so it was restricted to only <code>Proc</code> objects.</p>
<p>This change removes this <code>arity</code> restriction of custom behaviors.</p>
<p><em>Ryo Nakamura</em></p>
</li>
<li>
<p>Support <code>:url_safe</code> option for <code>MessageEncryptor</code>.</p>
<p>The <code>MessageEncryptor</code> constructor now accepts a <code>:url_safe</code> option, similar<br>
to the <code>MessageVerifier</code> constructor.  When enabled, this option ensures<br>
that messages use a URL-safe encoding.</p>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Add <code>url_safe</code> option to <code>ActiveSupport::MessageVerifier</code> initializer</p>
<p><code>ActiveSupport::MessageVerifier.new</code> now takes optional <code>url_safe</code> argument.<br>
It can generate URL-safe strings by passing <code>url_safe: true</code>.</p>
<div data-snippet-clipboard-copy-content="verifier = ActiveSupport::MessageVerifier.new(url_safe: true)
message = verifier.generate(data) # => URL-safe string"><pre><span>verifier</span> <span>=</span> <span>ActiveSupport</span>::<span>MessageVerifier</span><span>.</span><span>new</span><span>(</span><span>url_safe</span>: <span>true</span><span>)</span>
<span>message</span> <span>=</span> <span>verifier</span><span>.</span><span>generate</span><span>(</span><span>data</span><span>)</span> <span># =&gt; URL-safe string</span></pre></div>
<p>This option is <code>false</code> by default to be backwards compatible.</p>
<p><em>Shouichi Kamiya</em></p>
</li>
<li>
<p>Enable connection pooling by default for <code>MemCacheStore</code> and <code>RedisCacheStore</code>.</p>
<p>If you want to disable connection pooling, set <code>:pool</code> option to <code>false</code> when configuring the cache store:</p>
<div data-snippet-clipboard-copy-content="config.cache_store = :mem_cache_store, &quot;cache.example.com&quot;, pool: false"><pre><span>config</span><span>.</span><span>cache_store</span> <span>=</span> <span>:mem_cache_store</span><span>,</span> <span>"cache.example.com"</span><span>,</span> <span>pool</span>: <span>false</span></pre></div>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Add <code>force:</code> support to <code>ActiveSupport::Cache::Store#fetch_multi</code>.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Deprecated <code>:pool_size</code> and <code>:pool_timeout</code> options for configuring connection pooling in cache stores.</p>
<p>Use <code>pool: true</code> to enable pooling with default settings:</p>
<div data-snippet-clipboard-copy-content="config.cache_store = :redis_cache_store, pool: true"><pre><span>config</span><span>.</span><span>cache_store</span> <span>=</span> <span>:redis_cache_store</span><span>,</span> <span>pool</span>: <span>true</span></pre></div>
<p>Or pass individual options via <code>:pool</code> option:</p>
<div data-snippet-clipboard-copy-content="config.cache_store = :redis_cache_store, pool: { size: 10, timeout: 2 }"><pre><span>config</span><span>.</span><span>cache_store</span> <span>=</span> <span>:redis_cache_store</span><span>,</span> <span>pool</span>: <span>{</span> <span>size</span>: <span>10</span><span>,</span> <span>timeout</span>: <span>2</span> <span>}</span></pre></div>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Allow #increment and #decrement methods of <code>ActiveSupport::Cache::Store</code><br>
subclasses to set new values.</p>
<p>Previously incrementing or decrementing an unset key would fail and return<br>
nil. A default will now be assumed and the key will be created.</p>
<p><em>Andrej Blagojević</em>, <em>Eugene Kenny</em></p>
</li>
<li>
<p>Add <code>skip_nil:</code> support to <code>RedisCacheStore</code></p>
<p><em>Joey Paris</em></p>
</li>
<li>
<p><code>ActiveSupport::Cache::MemoryStore#write(name, val, unless_exist:true)</code> now<br>
correctly writes expired keys.</p>
<p><em>Alan Savage</em></p>
</li>
<li>
<p><code>ActiveSupport::ErrorReporter</code> now accepts and forward a <code>source:</code> parameter.</p>
<p>This allow libraries to signal the origin of the errors, and reporters<br>
to easily ignore some sources.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Fix and add protections for XSS in <code>ActionView::Helpers</code> and <code>ERB::Util</code>.</p>
<p>Add the method <code>ERB::Util.xml_name_escape</code> to escape dangerous characters<br>
in names of tags and names of attributes, following the specification of XML.</p>
<p><em>Álvaro Martín Fraguas</em></p>
</li>
<li>
<p>Respect <code>ActiveSupport::Logger.new</code>'s <code>:formatter</code> keyword argument</p>
<p>The stdlib <code>Logger::new</code> allows passing a <code>:formatter</code> keyword argument to<br>
set the logger's formatter. Previously <code>ActiveSupport::Logger.new</code> ignored<br>
that argument by always setting the formatter to an instance of<br>
<code>ActiveSupport::Logger::SimpleFormatter</code>.</p>
<p><em>Steven Harman</em></p>
</li>
<li>
<p>Deprecate preserving the pre-Ruby 2.4 behavior of <code>to_time</code></p>
<p>With Ruby 2.4+ the default for +to_time+ changed from converting to the<br>
local system time to preserving the offset of the receiver. At the time Rails<br>
supported older versions of Ruby so a compatibility layer was added to assist<br>
in the migration process. From Rails 5.0 new applications have defaulted to<br>
the Ruby 2.4+ behavior and since Rails 7.0 now only supports Ruby 2.7+<br>
this compatibility layer can be safely removed.</p>
<p>To minimize any noise generated the deprecation warning only appears when the<br>
setting is configured to <code>false</code> as that is the only scenario where the<br>
removal of the compatibility layer has any effect.</p>
<p><em>Andrew White</em></p>
</li>
<li>
<p><code>Pathname.blank?</code> only returns true for <code>Pathname.new("")</code></p>
<p>Previously it would end up calling <code>Pathname#empty?</code> which returned true<br>
if the path existed and was an empty directory or file.</p>
<p>That behavior was unlikely to be expected.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Deprecate <code>Notification::Event</code>'s <code>#children</code> and <code>#parent_of?</code></p>
<p><em>John Hawthorn</em></p>
</li>
<li>
<p>Change the default serializer of <code>ActiveSupport::MessageVerifier</code> from<br>
<code>Marshal</code> to <code>ActiveSupport::JSON</code> when using <code>config.load_defaults 7.1</code>.</p>
<p>Messages serialized with <code>Marshal</code> can still be read, but new messages will<br>
be serialized with <code>ActiveSupport::JSON</code>. For more information, see<br>
<a href="https://guides.rubyonrails.org/v7.1/configuring.html#config-active-support-message-serializer" rel="nofollow">https://guides.rubyonrails.org/v7.1/configuring.html#config-active-support-message-serializer</a>.</p>
<p><em>Saba Kiaei</em>, <em>David Buckley</em>, and <em>Jonathan Hefner</em></p>
</li>
<li>
<p>Change the default serializer of <code>ActiveSupport::MessageEncryptor</code> from<br>
<code>Marshal</code> to <code>ActiveSupport::JSON</code> when using <code>config.load_defaults 7.1</code>.</p>
<p>Messages serialized with <code>Marshal</code> can still be read, but new messages will<br>
be serialized with <code>ActiveSupport::JSON</code>. For more information, see<br>
<a href="https://guides.rubyonrails.org/v7.1/configuring.html#config-active-support-message-serializer" rel="nofollow">https://guides.rubyonrails.org/v7.1/configuring.html#config-active-support-message-serializer</a>.</p>
<p><em>Zack Deveau</em>, <em>Martin Gingras</em>, and <em>Jonathan Hefner</em></p>
</li>
<li>
<p>Add <code>ActiveSupport::TestCase#stub_const</code> to stub a constant for the duration of a yield.</p>
<p><em>DHH</em></p>
</li>
<li>
<p>Fix <code>ActiveSupport::EncryptedConfiguration</code> to be compatible with Psych 4</p>
<p><em>Stephen Sugden</em></p>
</li>
<li>
<p>Improve <code>File.atomic_write</code> error handling</p>
<p><em>Daniel Pepper</em></p>
</li>
<li>
<p>Fix <code>Class#descendants</code> and <code>DescendantsTracker#descendants</code> compatibility with Ruby 3.1.</p>
<p><a href="https://bugs.ruby-lang.org/issues/14394#note-33" rel="nofollow">The native <code>Class#descendants</code> was reverted prior to Ruby 3.1 release</a>,<br>
but <code>Class#subclasses</code> was kept, breaking the feature detection.</p>
<p><em>Jean Boussier</em></p>
</li>
</div><div>
<li>
<p>Remove -shm and -wal SQLite files when <code>rails db:drop</code> is run.</p>
<p><em>Niklas Häusele</em></p>
</li>
<li>
<p>Revert the change to raise an <code>ArgumentError</code> when <code>#accepts_nested_attributes_for</code> is declared more than once for<br>
an association in the same class.</p>
<p>The reverted behavior broke the case where the <code>#accepts_nested_attributes_for</code> was defined in a concern and<br>
where overridden in the class that included the concern.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Better naming for unique constraints support.</p>
<p>Naming unique keys leads to misunderstanding it's a short-hand of unique indexes.<br>
Just naming it unique constraints is not misleading.</p>
<p>In Rails 7.1.0.beta1 or before:</p>
<div data-snippet-clipboard-copy-content="add_unique_key :sections, [:position], deferrable: :deferred, name: &quot;unique_section_position&quot;
remove_unique_key :sections, name: &quot;unique_section_position&quot;"><pre><span>add_unique_key</span> <span>:sections</span><span>,</span> <span>[</span><span>:position</span><span>]</span><span>,</span> <span>deferrable</span>: <span>:deferred</span><span>,</span> <span>name</span>: <span>"unique_section_position"</span>
<span>remove_unique_key</span> <span>:sections</span><span>,</span> <span>name</span>: <span>"unique_section_position"</span></pre></div>
<p>Now:</p>
<div data-snippet-clipboard-copy-content="add_unique_constraint :sections, [:position], deferrable: :deferred, name: &quot;unique_section_position&quot;
remove_unique_constraint :sections, name: &quot;unique_section_position&quot;"><pre><span>add_unique_constraint</span> <span>:sections</span><span>,</span> <span>[</span><span>:position</span><span>]</span><span>,</span> <span>deferrable</span>: <span>:deferred</span><span>,</span> <span>name</span>: <span>"unique_section_position"</span>
<span>remove_unique_constraint</span> <span>:sections</span><span>,</span> <span>name</span>: <span>"unique_section_position"</span></pre></div>
<p><em>Ryuta Kamizono</em></p>
</li>
<li>
<p>Fix duplicate quoting for check constraint expressions in schema dump when using MySQL</p>
<p>A check constraint with an expression, that already contains quotes, lead to an invalid schema<br>
dump with the mysql2 adapter.</p>
<p>Fixes <a data-error-text="Failed to load title" data-id="915248782" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/42424" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/42424/hovercard" href="https://github.com/rails/rails/issues/42424">#42424</a>.</p>
<p><em>Felix Tscheulin</em></p>
</li>
<li>
<p>Performance tune the SQLite3 adapter connection configuration</p>
<p>For Rails applications, the Write-Ahead-Log in normal syncing mode with a capped journal size, a healthy shared memory buffer and a shared cache will perform, on average, 2× better.</p>
<p><em>Stephen Margheim</em></p>
</li>
<li>
<p>Allow SQLite3 <code>busy_handler</code> to be configured with simple max number of <code>retries</code></p>
<p>Retrying busy connections without delay is a preferred practice for performance-sensitive applications. Add support for a <code>database.yml</code> <code>retries</code> integer, which is used in a simple <code>busy_handler</code> function to retry busy connections without exponential backoff up to the max number of <code>retries</code>.</p>
<p><em>Stephen Margheim</em></p>
</li>
<li>
<p>The SQLite3 adapter now supports <code>supports_insert_returning?</code></p>
<p>Implementing the full <code>supports_insert_returning?</code> contract means the SQLite3 adapter supports auto-populated columns (<a data-error-text="Failed to load title" data-id="1712735611" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/48241" data-hovercard-type="pull_request" data-hovercard-url="/rails/rails/pull/48241/hovercard" href="https://github.com/rails/rails/pull/48241">#48241</a>) as well as custom primary keys.</p>
<p><em>Stephen Margheim</em></p>
</li>
<li>
<p>Ensure the SQLite3 adapter handles default functions with the <code>||</code> concatenation operator</p>
<p>Previously, this default function would produce the static string <code>"'Ruby ' || 'on ' || 'Rails'"</code>.<br>
Now, the adapter will appropriately receive and use <code>"Ruby on Rails"</code>.</p>
<div data-snippet-clipboard-copy-content="change_column_default &quot;test_models&quot;, &quot;ruby_on_rails&quot;, -> { &quot;('Ruby ' || 'on ' || 'Rails')&quot; }"><pre><span>change_column_default</span> <span>"test_models"</span><span>,</span> <span>"ruby_on_rails"</span><span>,</span> <span>-&gt;</span> <span>{</span> <span>"('Ruby ' || 'on ' || 'Rails')"</span> <span>}</span></pre></div>
<p><em>Stephen Margheim</em></p>
</li>
<li>
<p>Dump PostgreSQL schemas as part of the schema dump.</p>
<p><em>Lachlan Sylvester</em></p>
</li>
<li>
<p>Encryption now supports <code>support_unencrypted_data</code> being set per-attribute.</p>
<p>You can now opt out of <code>support_unencrypted_data</code> on a specific encrypted attribute.<br>
This only has an effect if <code>ActiveRecord::Encryption.config.support_unencrypted_data == true</code>.</p>
<div data-snippet-clipboard-copy-content="class User < ActiveRecord::Base
  encrypts :name, deterministic: true, support_unencrypted_data: false
  encrypts :email, deterministic: true
end"><pre><span>class</span> <span>User</span> &lt; <span>ActiveRecord</span>::<span>Base</span>
  <span>encrypts</span> <span>:name</span><span>,</span> <span>deterministic</span>: <span>true</span><span>,</span> <span>support_unencrypted_data</span>: <span>false</span>
  <span>encrypts</span> <span>:email</span><span>,</span> <span>deterministic</span>: <span>true</span>
<span>end</span></pre></div>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Add instrumentation for Active Record transactions</p>
<p>Allows subscribing to transaction events for tracking/instrumentation. The event payload contains the connection and the outcome (commit, rollback, restart, incomplete), as well as timing details.</p>
<div data-snippet-clipboard-copy-content="ActiveSupport::Notifications.subscribe(&quot;transaction.active_record&quot;) do |event|
  puts &quot;Transaction event occurred!&quot;
  connection = event.payload[:connection]
  puts &quot;Connection: #{connection.inspect}&quot;
end"><pre><span>ActiveSupport</span>::<span>Notifications</span><span>.</span><span>subscribe</span><span>(</span><span>"transaction.active_record"</span><span>)</span> <span>do</span> |<span>event</span>|
  <span>puts</span> <span>"Transaction event occurred!"</span>
  <span>connection</span> <span>=</span> <span>event</span><span>.</span><span>payload</span><span>[</span><span>:connection</span><span>]</span>
  <span>puts</span> <span>"Connection: <span><span>#{</span><span>connection</span><span>.</span><span>inspect</span><span>}</span></span>"</span>
<span>end</span></pre></div>
<p><em>Daniel Colson</em>, <em>Ian Candy</em></p>
</li>
<li>
<p>Support composite foreign keys via migration helpers.</p>
<div data-snippet-clipboard-copy-content="# Assuming &quot;carts&quot; table has &quot;(shop_id, user_id)&quot; as a primary key.

add_foreign_key(:orders, :carts, primary_key: [:shop_id, :user_id])

remove_foreign_key(:orders, :carts, primary_key: [:shop_id, :user_id])
foreign_key_exists?(:orders, :carts, primary_key: [:shop_id, :user_id])"><pre><span># Assuming "carts" table has "(shop_id, user_id)" as a primary key.</span>

<span>add_foreign_key</span><span>(</span><span>:orders</span><span>,</span> <span>:carts</span><span>,</span> <span>primary_key</span>: <span>[</span><span>:shop_id</span><span>,</span> <span>:user_id</span><span>]</span><span>)</span>

<span>remove_foreign_key</span><span>(</span><span>:orders</span><span>,</span> <span>:carts</span><span>,</span> <span>primary_key</span>: <span>[</span><span>:shop_id</span><span>,</span> <span>:user_id</span><span>]</span><span>)</span>
<span>foreign_key_exists?</span><span>(</span><span>:orders</span><span>,</span> <span>:carts</span><span>,</span> <span>primary_key</span>: <span>[</span><span>:shop_id</span><span>,</span> <span>:user_id</span><span>]</span><span>)</span></pre></div>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Adds support for <code>if_not_exists</code> when adding a check constraint.</p>
<div data-snippet-clipboard-copy-content="add_check_constraint :posts, &quot;post_type IN ('blog', 'comment', 'share')&quot;, if_not_exists: true"><pre><span>add_check_constraint</span> <span>:posts</span><span>,</span> <span>"post_type IN ('blog', 'comment', 'share')"</span><span>,</span> <span>if_not_exists</span>: <span>true</span></pre></div>
<p><em>Cody Cutrer</em></p>
</li>
<li>
<p>Raise an <code>ArgumentError</code> when <code>#accepts_nested_attributes_for</code> is declared more than once for an association in<br>
the same class. Previously, the last declaration would silently override the previous one. Overriding in a subclass<br>
is still allowed.</p>
<p><em>Joshua Young</em></p>
</li>
<li>
<p>Deprecate <code>rewhere</code> argument on <code>#merge</code>.</p>
<p>The <code>rewhere</code> argument on <code>#merge</code>is deprecated without replacement and<br>
will be removed in Rails 7.2.</p>
<p><em>Adam Hess</em></p>
</li>
<li>
<p>Fix unscope is not working in specific case</p>
<p>Before:</p>
<div data-snippet-clipboard-copy-content="Post.where(id: 1...3).unscope(where: :id).to_sql # &quot;SELECT `posts`.* FROM `posts` WHERE `posts`.`id` >= 1 AND `posts`.`id` < 3&quot;
"><pre><span>Post</span><span>.</span><span>where</span><span>(</span><span>id</span>: <span>1</span>...<span>3</span><span>)</span><span>.</span><span>unscope</span><span>(</span><span>where</span>: <span>:id</span><span>)</span><span>.</span><span>to_sql</span> <span># "SELECT `posts`.* FROM `posts` WHERE `posts`.`id` &gt;= 1 AND `posts`.`id` &lt; 3"</span></pre></div>
<p>After:</p>
<div data-snippet-clipboard-copy-content="Post.where(id: 1...3).unscope(where: :id).to_sql # &quot;SELECT `posts`.* FROM `posts`&quot;"><pre><span>Post</span><span>.</span><span>where</span><span>(</span><span>id</span>: <span>1</span>...<span>3</span><span>)</span><span>.</span><span>unscope</span><span>(</span><span>where</span>: <span>:id</span><span>)</span><span>.</span><span>to_sql</span> <span># "SELECT `posts`.* FROM `posts`"</span></pre></div>
<p>Fixes <a data-error-text="Failed to load title" data-id="1689435061" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/48094" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/48094/hovercard" href="https://github.com/rails/rails/issues/48094">#48094</a>.</p>
<p><em>Kazuya Hatanaka</em></p>
</li>
<li>
<p>Change <code>has_secure_token</code> default to <code>on: :initialize</code></p>
<p>Change the new default value from <code>on: :create</code> to <code>on: :initialize</code></p>
<p>Can be controlled by the <code>config.active_record.generate_secure_token_on</code><br>
configuration:</p>
<div data-snippet-clipboard-copy-content="config.active_record.generate_secure_token_on = :create"><pre><span>config</span><span>.</span><span>active_record</span><span>.</span><span>generate_secure_token_on</span> <span>=</span> <span>:create</span></pre></div>
<p><em>Sean Doyle</em></p>
</li>
<li>
<p>Fix <code>change_column</code> not setting <code>precision: 6</code> on <code>datetime</code> columns when<br>
using 7.0+ Migrations and SQLite.</p>
<p><em>Hartley McGuire</em></p>
</li>
<li>
<p>Support composite identifiers in <code>to_key</code></p>
<p><code>to_key</code> avoids wrapping <code>#id</code> value into an <code>Array</code> if <code>#id</code> already an array</p>
<p><em>Nikita Vasilevsky</em></p>
</li>
<li>
<p>Add validation option for <code>enum</code></p>
<div data-snippet-clipboard-copy-content="class Contract < ApplicationRecord
  enum :status, %w[in_progress completed], validate: true
end
Contract.new(status: &quot;unknown&quot;).valid? # => false
Contract.new(status: nil).valid? # => false
Contract.new(status: &quot;completed&quot;).valid? # => true

class Contract < ApplicationRecord
  enum :status, %w[in_progress completed], validate: { allow_nil: true }
end
Contract.new(status: &quot;unknown&quot;).valid? # => false
Contract.new(status: nil).valid? # => true
Contract.new(status: &quot;completed&quot;).valid? # => true"><pre><span>class</span> <span>Contract</span> &lt; <span>ApplicationRecord</span>
  <span>enum</span> <span>:status</span><span>,</span> <span>%w[</span><span>in_progress</span> <span>completed</span><span>]</span><span>,</span> <span>validate</span>: <span>true</span>
<span>end</span>
<span>Contract</span><span>.</span><span>new</span><span>(</span><span>status</span>: <span>"unknown"</span><span>)</span><span>.</span><span>valid?</span> <span># =&gt; false</span>
<span>Contract</span><span>.</span><span>new</span><span>(</span><span>status</span>: <span>nil</span><span>)</span><span>.</span><span>valid?</span> <span># =&gt; false</span>
<span>Contract</span><span>.</span><span>new</span><span>(</span><span>status</span>: <span>"completed"</span><span>)</span><span>.</span><span>valid?</span> <span># =&gt; true</span>

<span>class</span> <span>Contract</span> &lt; <span>ApplicationRecord</span>
  <span>enum</span> <span>:status</span><span>,</span> <span>%w[</span><span>in_progress</span> <span>completed</span><span>]</span><span>,</span> <span>validate</span>: <span>{</span> <span>allow_nil</span>: <span>true</span> <span>}</span>
<span>end</span>
<span>Contract</span><span>.</span><span>new</span><span>(</span><span>status</span>: <span>"unknown"</span><span>)</span><span>.</span><span>valid?</span> <span># =&gt; false</span>
<span>Contract</span><span>.</span><span>new</span><span>(</span><span>status</span>: <span>nil</span><span>)</span><span>.</span><span>valid?</span> <span># =&gt; true</span>
<span>Contract</span><span>.</span><span>new</span><span>(</span><span>status</span>: <span>"completed"</span><span>)</span><span>.</span><span>valid?</span> <span># =&gt; true</span></pre></div>
<p><em>Edem Topuzov</em>, <em>Ryuta Kamizono</em></p>
</li>
<li>
<p>Allow batching methods to use already loaded relation if available</p>
<p>Calling batch methods on already loaded relations will use the records previously loaded instead of retrieving<br>
them from the database again.</p>
<p><em>Adam Hess</em></p>
</li>
<li>
<p>Deprecate <code>read_attribute(:id)</code> returning the primary key if the primary key is not <code>:id</code>.</p>
<p>Starting in Rails 7.2, <code>read_attribute(:id)</code> will return the value of the id column, regardless of the model's<br>
primary key. To retrieve the value of the primary key, use <code>#id</code> instead. <code>read_attribute(:id)</code> for composite<br>
primary key models will now return the value of the id column.</p>
<p><em>Adrianna Chang</em></p>
</li>
<li>
<p>Fix <code>change_table</code> setting datetime precision for 6.1 Migrations</p>
<p><em>Hartley McGuire</em></p>
</li>
<li>
<p>Fix change_column setting datetime precision for 6.1 Migrations</p>
<p><em>Hartley McGuire</em></p>
</li>
<li>
<p>Add <code>ActiveRecord::Base#id_value</code> alias to access the raw value of a record's id column.</p>
<p>This alias is only provided for models that declare an <code>:id</code> column.</p>
<p><em>Adrianna Chang</em></p>
</li>
<li>
<p>Fix previous change tracking for <code>ActiveRecord::Store</code> when using a column with JSON structured database type</p>
<p>Before, the methods to access the changes made during the last save <code>#saved_change_to_key?</code>, <code>#saved_change_to_key</code>, and <code>#key_before_last_save</code> did not work if the store was defined as a <code>store_accessor</code> on a column with a JSON structured database type</p>
<p><em>Robert DiMartino</em></p>
</li>
<li>
<p>Fully support <code>NULLS [NOT] DISTINCT</code> for PostgreSQL 15+ indexes.</p>
<p>Previous work was done to allow the index to be created in a migration, but it was not<br>
supported in schema.rb. Additionally, the matching for <code>NULLS [NOT] DISTINCT</code> was not<br>
in the correct order, which could have resulted in inconsistent schema detection.</p>
<p><em>Gregory Jones</em></p>
</li>
<li>
<p>Allow escaping of literal colon characters in <code>sanitize_sql_*</code> methods when named bind variables are used</p>
<p><em>Justin Bull</em></p>
</li>
<li>
<p>Fix <code>#previously_new_record?</code> to return true for destroyed records.</p>
<p>Before, if a record was created and then destroyed, <code>#previously_new_record?</code> would return true.<br>
Now, any UPDATE or DELETE to a record is considered a change, and will result in <code>#previously_new_record?</code><br>
returning false.</p>
<p><em>Adrianna Chang</em></p>
</li>
<li>
<p>Specify callback in <code>has_secure_token</code></p>
<div data-snippet-clipboard-copy-content="class User < ApplicationRecord
  has_secure_token on: :initialize
end

User.new.token # => &quot;abc123....&quot;"><pre><span>class</span> <span>User</span> &lt; <span>ApplicationRecord</span>
  <span>has_secure_token</span> <span>on</span>: <span>:initialize</span>
<span>end</span>

<span>User</span><span>.</span><span>new</span><span>.</span><span>token</span> <span># =&gt; "abc123...."</span></pre></div>
<p><em>Sean Doyle</em></p>
</li>
<li>
<p>Fix incrementation of in memory counter caches when associations overlap</p>
<p>When two associations had a similarly named counter cache column, Active Record<br>
could sometime increment the wrong one.</p>
<p><em>Jacopo Beschi</em>, <em>Jean Boussier</em></p>
</li>
<li>
<p>Don't show secrets for Active Record's <code>Cipher::Aes256Gcm#inspect</code>.</p>
<p>Before:</p>
<div data-snippet-clipboard-copy-content="ActiveRecord::Encryption::Cipher::Aes256Gcm.new(secret).inspect
&quot;#<ActiveRecord::Encryption::Cipher::Aes256Gcm:0x0000000104888038 ... @secret=\&quot;\\xAF\\bFh]LV}q\\nl\\xB2U\\xB3 ... >&quot;"><pre><span>ActiveRecord</span>::<span>Encryption</span>::<span>Cipher</span>::<span>Aes256Gcm</span><span>.</span><span>new</span><span>(</span><span>secret</span><span>)</span><span>.</span><span>inspect</span>
<span>"#&lt;ActiveRecord::Encryption::Cipher::Aes256Gcm:0x0000000104888038 ... @secret=<span>\"</span><span>\\</span>xAF<span>\\</span>bFh]LV}q<span>\\</span>nl<span>\\</span>xB2U<span>\\</span>xB3 ... &gt;"</span></pre></div>
<p>After:</p>
<div data-snippet-clipboard-copy-content="ActiveRecord::Encryption::Cipher::Aes256Gcm(secret).inspect
&quot;#<ActiveRecord::Encryption::Cipher::Aes256Gcm:0x0000000104888038>&quot;"><pre><span>ActiveRecord</span>::<span>Encryption</span>::<span>Cipher</span>::<span>Aes256Gcm</span><span>(</span><span>secret</span><span>)</span><span>.</span><span>inspect</span>
<span>"#&lt;ActiveRecord::Encryption::Cipher::Aes256Gcm:0x0000000104888038&gt;"</span></pre></div>
<p><em>Petrik de Heus</em></p>
</li>
<li>
<p>Bring back the historical behavior of committing transaction on non-local return.</p>
<div data-snippet-clipboard-copy-content="Model.transaction do
  model.save
  return
  other_model.save # not executed
end"><pre><span>Model</span><span>.</span><span>transaction</span> <span>do</span>
  <span>model</span><span>.</span><span>save</span>
  <span>return</span>
  <span>other_model</span><span>.</span><span>save</span> <span># not executed</span>
<span>end</span></pre></div>
<p>Historically only raised errors would trigger a rollback, but in Ruby <code>2.3</code>, the <code>timeout</code> library<br>
started using <code>throw</code> to interrupt execution which had the adverse effect of committing open transactions.</p>
<p>To solve this, in Active Record 6.1 the behavior was changed to instead rollback the transaction as it was safer<br>
than to potentially commit an incomplete transaction.</p>
<p>Using <code>return</code>, <code>break</code> or <code>throw</code> inside a <code>transaction</code> block was essentially deprecated from Rails 6.1 onwards.</p>
<p>However with the release of <code>timeout 0.4.0</code>, <code>Timeout.timeout</code> now raises an error again, and Active Record is able<br>
to return to its original, less surprising, behavior.</p>
<p>This historical behavior can now be opt-ed in via:</p>
<div data-snippet-clipboard-copy-content="Rails.application.config.active_record.commit_transaction_on_non_local_return = true"><pre><code>Rails.application.config.active_record.commit_transaction_on_non_local_return = true
</code></pre></div>
<p>And is the default for new applications created in Rails 7.1.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Deprecate <code>name</code> argument on <code>#remove_connection</code>.</p>
<p>The <code>name</code> argument is deprecated on <code>#remove_connection</code> without replacement. <code>#remove_connection</code> should be called directly on the class that established the connection.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Fix has_one through singular building with inverse.</p>
<p>Allows building of records from an association with a has_one through a<br>
singular association with inverse. For belongs_to through associations,<br>
linking the foreign key to the primary key model isn't needed.<br>
For has_one, we cannot build records due to the association not being mutable.</p>
<p><em>Gannon McGibbon</em></p>
</li>
<li>
<p>Disable database prepared statements when query logs are enabled</p>
<p>Prepared Statements and Query Logs are incompatible features due to query logs making every query unique.</p>
<p><em>zzak, Jean Boussier</em></p>
</li>
<li>
<p>Support decrypting data encrypted non-deterministically with a SHA1 hash digest.</p>
<p>This adds a new Active Record encryption option to support decrypting data encrypted<br>
non-deterministically with a SHA1 hash digest:</p>
<div data-snippet-clipboard-copy-content="Rails.application.config.active_record.encryption.support_sha1_for_non_deterministic_encryption = true"><pre><code>Rails.application.config.active_record.encryption.support_sha1_for_non_deterministic_encryption = true
</code></pre></div>
<p>The new option addresses a problem when upgrading from 7.0 to 7.1. Due to a bug in how Active Record<br>
Encryption was getting initialized, the key provider used for non-deterministic encryption were using<br>
SHA-1 as its digest class, instead of the one configured globally by Rails via<br>
<code>Rails.application.config.active_support.key_generator_hash_digest_class</code>.</p>
<p><em>Cadu Ribeiro and Jorge Manrubia</em></p>
</li>
<li>
<p>Added PostgreSQL migration commands for enum rename, add value, and rename value.</p>
<p><code>rename_enum</code> and <code>rename_enum_value</code> are reversible. Due to Postgres<br>
limitation, <code>add_enum_value</code> is not reversible since you cannot delete enum<br>
values. As an alternative you should drop and recreate the enum entirely.</p>
<div data-snippet-clipboard-copy-content="rename_enum :article_status, to: :article_state"><pre><span>rename_enum</span> <span>:article_status</span><span>,</span> <span>to</span>: <span>:article_state</span></pre></div>
<div data-snippet-clipboard-copy-content="add_enum_value :article_state, &quot;archived&quot; # will be at the end of existing values
add_enum_value :article_state, &quot;in review&quot;, before: &quot;published&quot;
add_enum_value :article_state, &quot;approved&quot;, after: &quot;in review&quot;"><pre><span>add_enum_value</span> <span>:article_state</span><span>,</span> <span>"archived"</span> <span># will be at the end of existing values</span>
<span>add_enum_value</span> <span>:article_state</span><span>,</span> <span>"in review"</span><span>,</span> <span>before</span>: <span>"published"</span>
<span>add_enum_value</span> <span>:article_state</span><span>,</span> <span>"approved"</span><span>,</span> <span>after</span>: <span>"in review"</span></pre></div>
<div data-snippet-clipboard-copy-content="rename_enum_value :article_state, from: &quot;archived&quot;, to: &quot;deleted&quot;"><pre><span>rename_enum_value</span> <span>:article_state</span><span>,</span> <span>from</span>: <span>"archived"</span><span>,</span> <span>to</span>: <span>"deleted"</span></pre></div>
<p><em>Ray Faddis</em></p>
</li>
<li>
<p>Allow composite primary key to be derived from schema</p>
<p>Booting an application with a schema that contains composite primary keys<br>
will not issue warning and won't <code>nil</code>ify the <code>ActiveRecord::Base#primary_key</code> value anymore.</p>
<p>Given a <code>travel_routes</code> table definition and a <code>TravelRoute</code> model like:</p>
<div data-snippet-clipboard-copy-content="create_table :travel_routes, primary_key: [:origin, :destination], force: true do |t|
  t.string :origin
  t.string :destination
end

class TravelRoute < ActiveRecord::Base; end"><pre><span>create_table</span> <span>:travel_routes</span><span>,</span> <span>primary_key</span>: <span>[</span><span>:origin</span><span>,</span> <span>:destination</span><span>]</span><span>,</span> <span>force</span>: <span>true</span> <span>do</span> |<span>t</span>|
  <span>t</span><span>.</span><span>string</span> <span>:origin</span>
  <span>t</span><span>.</span><span>string</span> <span>:destination</span>
<span>end</span>

<span>class</span> <span>TravelRoute</span> &lt; <span>ActiveRecord</span>::<span>Base</span><span>;</span> <span>end</span></pre></div>
<p>The <code>TravelRoute.primary_key</code> value will be automatically derived to <code>["origin", "destination"]</code></p>
<p><em>Nikita Vasilevsky</em></p>
</li>
<li>
<p>Include the <code>connection_pool</code> with exceptions raised from an adapter.</p>
<p>The <code>connection_pool</code> provides added context such as the connection used<br>
that led to the exception as well as which role and shard.</p>
<p><em>Luan Vieira</em></p>
</li>
<li>
<p>Support multiple column ordering for <code>find_each</code>, <code>find_in_batches</code> and <code>in_batches</code>.</p>
<p>When find_each/find_in_batches/in_batches are performed on a table with composite primary keys, ascending or descending order can be selected for each key.</p>
<div data-snippet-clipboard-copy-content="Person.find_each(order: [:desc, :asc]) do |person|
  person.party_all_night!
end"><pre><span>Person</span><span>.</span><span>find_each</span><span>(</span><span>order</span>: <span>[</span><span>:desc</span><span>,</span> <span>:asc</span><span>]</span><span>)</span> <span>do</span> |<span>person</span>|
  <span>person</span><span>.</span><span>party_all_night!</span>
<span>end</span></pre></div>
<p><em>Takuya Kurimoto</em></p>
</li>
<li>
<p>Fix where on association with has_one/has_many polymorphic relations.</p>
<p>Before:</p>
<div data-snippet-clipboard-copy-content="Treasure.where(price_estimates: PriceEstimate.all)
#=> SELECT (...) WHERE &quot;treasures&quot;.&quot;id&quot; IN (SELECT &quot;price_estimates&quot;.&quot;estimate_of_id&quot; FROM &quot;price_estimates&quot;)"><pre><span>Treasure</span><span>.</span><span>where</span><span>(</span><span>price_estimates</span>: <span>PriceEstimate</span><span>.</span><span>all</span><span>)</span>
<span>#=&gt; SELECT (...) WHERE "treasures"."id" IN (SELECT "price_estimates"."estimate_of_id" FROM "price_estimates")</span></pre></div>
<p>Later:</p>
<div data-snippet-clipboard-copy-content="Treasure.where(price_estimates: PriceEstimate.all)
#=> SELECT (...) WHERE &quot;treasures&quot;.&quot;id&quot; IN (SELECT &quot;price_estimates&quot;.&quot;estimate_of_id&quot; FROM &quot;price_estimates&quot; WHERE &quot;price_estimates&quot;.&quot;estimate_of_type&quot; = 'Treasure')"><pre><span>Treasure</span><span>.</span><span>where</span><span>(</span><span>price_estimates</span>: <span>PriceEstimate</span><span>.</span><span>all</span><span>)</span>
<span>#=&gt; SELECT (...) WHERE "treasures"."id" IN (SELECT "price_estimates"."estimate_of_id" FROM "price_estimates" WHERE "price_estimates"."estimate_of_type" = 'Treasure')</span></pre></div>
<p><em>Lázaro Nixon</em></p>
</li>
<li>
<p>Assign auto populated columns on Active Record record creation.</p>
<p>Changes record creation logic to allow for the <code>auto_increment</code> column to be assigned<br>
immediately after creation regardless of it's relation to the model's primary key.</p>
<p>The PostgreSQL adapter benefits the most from the change allowing for any number of auto-populated<br>
columns to be assigned on the object immediately after row insertion utilizing the <code>RETURNING</code> statement.</p>
<p><em>Nikita Vasilevsky</em></p>
</li>
<li>
<p>Use the first key in the <code>shards</code> hash from <code>connected_to</code> for the <code>default_shard</code>.</p>
<p>Some applications may not want to use <code>:default</code> as a shard name in their connection model. Unfortunately Active Record expects there to be a <code>:default</code> shard because it must assume a shard to get the right connection from the pool manager. Rather than force applications to manually set this, <code>connects_to</code> can infer the default shard name from the hash of shards and will now assume that the first shard is your default.</p>
<p>For example if your model looked like this:</p>
<div data-snippet-clipboard-copy-content="class ShardRecord < ApplicationRecord
  self.abstract_class = true

  connects_to shards: {
    shard_one: { writing: :shard_one },
    shard_two: { writing: :shard_two }
  }"><pre><span>class</span> <span>ShardRecord</span> &lt; <span>ApplicationRecord</span>
  <span>self</span><span>.</span><span>abstract_class</span> <span>=</span> <span>true</span>

  <span>connects_to</span> <span>shards</span>: <span>{</span>
    <span>shard_one</span>: <span>{</span> <span>writing</span>: <span>:shard_one</span> <span>}</span><span>,</span>
    <span>shard_two</span>: <span>{</span> <span>writing</span>: <span>:shard_two</span> <span>}</span>
  <span>}</span></pre></div>
<p>Then the <code>default_shard</code> for this class would be set to <code>shard_one</code>.</p>
<p>Fixes: <a data-error-text="Failed to load title" data-id="1275315412" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/45390" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/45390/hovercard" href="https://github.com/rails/rails/issues/45390">#45390</a></p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Fix mutation detection for serialized attributes backed by binary columns.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Add <code>ActiveRecord.disconnect_all!</code> method to immediately close all connections from all pools.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Discard connections which may have been left in a transaction.</p>
<p>There are cases where, due to an error, <code>within_new_transaction</code> may unexpectedly leave a connection in an open transaction. In these cases the connection may be reused, and the following may occur:</p>
<ul>
<li>Writes appear to fail when they actually succeed.</li>
<li>Writes appear to succeed when they actually fail.</li>
<li>Reads return stale or uncommitted data.</li>
</ul>
<p>Previously, the following case was detected:</p>
<ul>
<li>An error is encountered during the transaction, then another error is encountered while attempting to roll it back.</li>
</ul>
<p>Now, the following additional cases are detected:</p>
<ul>
<li>An error is encountered just after successfully beginning a transaction.</li>
<li>An error is encountered while committing a transaction, then another error is encountered while attempting to roll it back.</li>
<li>An error is encountered while rolling back a transaction.</li>
</ul>
<p><em>Nick Dower</em></p>
</li>
<li>
<p>Active Record query cache now evicts least recently used entries</p>
<p>By default it only keeps the <code>100</code> most recently used queries.</p>
<p>The cache size can be configured via <code>database.yml</code></p>
<div data-snippet-clipboard-copy-content="development:
  adapter: mysql2
  query_cache: 200"><pre><span>development</span>:
  <span>adapter</span>: <span>mysql2</span>
  <span>query_cache</span>: <span>200</span></pre></div>
<p>It can also be entirely disabled:</p>
<div data-snippet-clipboard-copy-content="development:
  adapter: mysql2
  query_cache: false"><pre><span>development</span>:
  <span>adapter</span>: <span>mysql2</span>
  <span>query_cache</span>: <span>false</span></pre></div>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Deprecate <code>check_pending!</code> in favor of <code>check_all_pending!</code>.</p>
<p><code>check_pending!</code> will only check for pending migrations on the current database connection or the one passed in. This has been deprecated in favor of <code>check_all_pending!</code> which will find all pending migrations for the database configurations in a given environment.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Make <code>increment_counter</code>/<code>decrement_counter</code> accept an amount argument</p>
<div data-snippet-clipboard-copy-content="Post.increment_counter(:comments_count, 5, by: 3)"><pre><span>Post</span><span>.</span><span>increment_counter</span><span>(</span><span>:comments_count</span><span>,</span> <span>5</span><span>,</span> <span>by</span>: <span>3</span><span>)</span></pre></div>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Add support for <code>Array#intersect?</code> to <code>ActiveRecord::Relation</code>.</p>
<p><code>Array#intersect?</code> is only available on Ruby 3.1 or later.</p>
<p>This allows the Rubocop <code>Style/ArrayIntersect</code> cop to work with <code>ActiveRecord::Relation</code> objects.</p>
<p><em>John Harry Kelly</em></p>
</li>
<li>
<p>The deferrable foreign key can be passed to <code>t.references</code>.</p>
<p><em>Hiroyuki Ishii</em></p>
</li>
<li>
<p>Deprecate <code>deferrable: true</code> option of <code>add_foreign_key</code>.</p>
<p><code>deferrable: true</code> is deprecated in favor of <code>deferrable: :immediate</code>, and<br>
will be removed in Rails 7.2.</p>
<p>Because <code>deferrable: true</code> and <code>deferrable: :deferred</code> are hard to understand.<br>
Both true and :deferred are truthy values.<br>
This behavior is the same as the deferrable option of the add_unique_key method, added in <a data-error-text="Failed to load title" data-id="1396155024" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/46192" data-hovercard-type="pull_request" data-hovercard-url="/rails/rails/pull/46192/hovercard" href="https://github.com/rails/rails/pull/46192">#46192</a>.</p>
<p><em>Hiroyuki Ishii</em></p>
</li>
<li>
<p><code>AbstractAdapter#execute</code> and <code>#exec_query</code> now clear the query cache</p>
<p>If you need to perform a read only SQL query without clearing the query<br>
cache, use <code>AbstractAdapter#select_all</code>.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Make <code>.joins</code> / <code>.left_outer_joins</code> work with CTEs.</p>
<p>For example:</p>
<div data-snippet-clipboard-copy-content="Post
 .with(commented_posts: Comment.select(:post_id).distinct)
 .joins(:commented_posts)
#=> WITH (...) SELECT ... INNER JOIN commented_posts on posts.id = commented_posts.post_id"><pre><span>Post</span>
 <span>.</span><span>with</span><span>(</span><span>commented_posts</span>: <span>Comment</span><span>.</span><span>select</span><span>(</span><span>:post_id</span><span>)</span><span>.</span><span>distinct</span><span>)</span>
 <span>.</span><span>joins</span><span>(</span><span>:commented_posts</span><span>)</span>
<span>#=&gt; WITH (...) SELECT ... INNER JOIN commented_posts on posts.id = commented_posts.post_id</span></pre></div>
<p><em>Vladimir Dementyev</em></p>
</li>
<li>
<p>Add a load hook for <code>ActiveRecord::ConnectionAdapters::Mysql2Adapter</code><br>
(named <code>active_record_mysql2adapter</code>) to allow for overriding aspects of the<br>
<code>ActiveRecord::ConnectionAdapters::Mysql2Adapter</code> class. This makes <code>Mysql2Adapter</code><br>
consistent with <code>PostgreSQLAdapter</code> and <code>SQLite3Adapter</code> that already have load hooks.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Introduce adapter for Trilogy database client</p>
<p>Trilogy is a MySQL-compatible database client. Rails applications can use Trilogy<br>
by configuring their <code>config/database.yml</code>:</p>
<div data-snippet-clipboard-copy-content="development:
adapter: trilogy
database: blog_development
pool: 5"><pre><span>development</span>:
<span>adapter</span>: <span>trilogy</span>
<span>database</span>: <span>blog_development</span>
<span>pool</span>: <span>5</span></pre></div>
<p>Or by using the <code>DATABASE_URL</code> environment variable:</p>
<div data-snippet-clipboard-copy-content="ENV['DATABASE_URL'] # => &quot;trilogy://localhost/blog_development?pool=5&quot;"><pre><span>ENV</span><span>[</span><span>'DATABASE_URL'</span><span>]</span> <span># =&gt; "trilogy://localhost/blog_development?pool=5"</span></pre></div>
<p><em>Adrianna Chang</em></p>
</li>
<li>
<p><code>after_commit</code> callbacks defined on models now execute in the correct order.</p>
<div data-snippet-clipboard-copy-content="class User < ActiveRecord::Base
  after_commit { puts(&quot;this gets called first&quot;) }
  after_commit { puts(&quot;this gets called second&quot;) }
end"><pre><span>class</span> <span>User</span> &lt; <span>ActiveRecord</span>::<span>Base</span>
  <span>after_commit</span> <span>{</span> <span>puts</span><span>(</span><span>"this gets called first"</span><span>)</span> <span>}</span>
  <span>after_commit</span> <span>{</span> <span>puts</span><span>(</span><span>"this gets called second"</span><span>)</span> <span>}</span>
<span>end</span></pre></div>
<p>Previously, the callbacks executed in the reverse order. To opt in to the new behaviour:</p>
<div data-snippet-clipboard-copy-content="config.active_record.run_after_transaction_callbacks_in_order_defined = true"><pre><span>config</span><span>.</span><span>active_record</span><span>.</span><span>run_after_transaction_callbacks_in_order_defined</span> <span>=</span> <span>true</span></pre></div>
<p>This is the default for new apps.</p>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Infer <code>foreign_key</code> when <code>inverse_of</code> is present on <code>has_one</code> and <code>has_many</code> associations.</p>
<div data-snippet-clipboard-copy-content="has_many :citations, foreign_key: &quot;book1_id&quot;, inverse_of: :book"><pre><span>has_many</span> <span>:citations</span><span>,</span> <span>foreign_key</span>: <span>"book1_id"</span><span>,</span> <span>inverse_of</span>: <span>:book</span></pre></div>
<p>can be simplified to</p>
<div data-snippet-clipboard-copy-content="has_many :citations, inverse_of: :book"><pre><span>has_many</span> <span>:citations</span><span>,</span> <span>inverse_of</span>: <span>:book</span></pre></div>
<p>and the foreign_key will be read from the corresponding <code>belongs_to</code> association.</p>
<p><em>Daniel Whitney</em></p>
</li>
<li>
<p>Limit max length of auto generated index names</p>
<p>Auto generated index names are now limited to 62 bytes, which fits within<br>
the default index name length limits for MySQL, Postgres and SQLite.</p>
<p>Any index name over the limit will fallback to the new short format.</p>
<p>Before (too long):</p>
<div data-snippet-clipboard-copy-content="index_testings_on_foo_and_bar_and_first_name_and_last_name_and_administrator"><pre><code>index_testings_on_foo_and_bar_and_first_name_and_last_name_and_administrator
</code></pre></div>
<p>After (short format):</p>
<div data-snippet-clipboard-copy-content="idx_on_foo_bar_first_name_last_name_administrator_5939248142"><pre><code>idx_on_foo_bar_first_name_last_name_administrator_5939248142
</code></pre></div>
<p>The short format includes a hash to ensure the name is unique database-wide.</p>
<p><em>Mike Coutermarsh</em></p>
</li>
<li>
<p>Introduce a more stable and optimized Marshal serializer for Active Record models.</p>
<p>Can be enabled with <code>config.active_record.marshalling_format_version = 7.1</code>.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Allow specifying where clauses with column-tuple syntax.</p>
<p>Querying through <code>#where</code> now accepts a new tuple-syntax which accepts, as<br>
a key, an array of columns and, as a value, an array of corresponding tuples.<br>
The key specifies a list of columns, while the value is an array of<br>
ordered-tuples that conform to the column list.</p>
<p>For instance:</p>
<div data-snippet-clipboard-copy-content="# Cpk::Book => Cpk::Book(author_id: integer, number: integer, title: string, revision: integer)
# Cpk::Book.primary_key => [&quot;author_id&quot;, &quot;number&quot;]

book = Cpk::Book.create!(author_id: 1, number: 1)
Cpk::Book.where(Cpk::Book.primary_key => [[1, 2]]) # => [book]

# Topic => Topic(id: integer, title: string, author_name: string...)

Topic.where([:title, :author_name] => [[&quot;The Alchemist&quot;, &quot;Paulo Coelho&quot;], [&quot;Harry Potter&quot;, &quot;J.K Rowling&quot;]])"><pre><span># Cpk::Book =&gt; Cpk::Book(author_id: integer, number: integer, title: string, revision: integer)</span>
<span># Cpk::Book.primary_key =&gt; ["author_id", "number"]</span>

<span>book</span> <span>=</span> <span>Cpk</span>::<span>Book</span><span>.</span><span>create!</span><span>(</span><span>author_id</span>: <span>1</span><span>,</span> <span>number</span>: <span>1</span><span>)</span>
<span>Cpk</span>::<span>Book</span><span>.</span><span>where</span><span>(</span><span>Cpk</span>::<span>Book</span><span>.</span><span>primary_key</span> <span>=&gt;</span> <span>[</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>]</span><span>]</span><span>)</span> <span># =&gt; [book]</span>

<span># Topic =&gt; Topic(id: integer, title: string, author_name: string...)</span>

<span>Topic</span><span>.</span><span>where</span><span>(</span><span>[</span><span>:title</span><span>,</span> <span>:author_name</span><span>]</span> <span>=&gt;</span> <span>[</span><span>[</span><span>"The Alchemist"</span><span>,</span> <span>"Paulo Coelho"</span><span>]</span><span>,</span> <span>[</span><span>"Harry Potter"</span><span>,</span> <span>"J.K Rowling"</span><span>]</span><span>]</span><span>)</span></pre></div>
<p><em>Paarth Madan</em></p>
</li>
<li>
<p>Allow warning codes to be ignore when reporting SQL warnings.</p>
<p>Active Record config that can ignore warning codes</p>
<div data-snippet-clipboard-copy-content="# Configure allowlist of warnings that should always be ignored
config.active_record.db_warnings_ignore = [
  &quot;1062&quot;, # MySQL Error 1062: Duplicate entry
]"><pre><span># Configure allowlist of warnings that should always be ignored</span>
<span>config</span><span>.</span><span>active_record</span><span>.</span><span>db_warnings_ignore</span> <span>=</span> <span>[</span>
  <span>"1062"</span><span>,</span> <span># MySQL Error 1062: Duplicate entry</span>
<span>]</span></pre></div>
<p>This is supported for the MySQL and PostgreSQL adapters.</p>
<p><em>Nick Borromeo</em></p>
</li>
<li>
<p>Introduce <code>:active_record_fixtures</code> lazy load hook.</p>
<p>Hooks defined with this name will be run whenever <code>TestFixtures</code> is included<br>
in a class.</p>
<div data-snippet-clipboard-copy-content="ActiveSupport.on_load(:active_record_fixtures) do
  self.fixture_paths << &quot;test/fixtures&quot;
end

klass = Class.new
klass.include(ActiveRecord::TestFixtures)

klass.fixture_paths # => [&quot;test/fixtures&quot;]"><pre><span>ActiveSupport</span><span>.</span><span>on_load</span><span>(</span><span>:active_record_fixtures</span><span>)</span> <span>do</span>
  <span>self</span><span>.</span><span>fixture_paths</span> &lt;&lt; <span>"test/fixtures"</span>
<span>end</span>

<span>klass</span> <span>=</span> <span>Class</span><span>.</span><span>new</span>
<span>klass</span><span>.</span><span>include</span><span>(</span><span>ActiveRecord</span>::<span>TestFixtures</span><span>)</span>

<span>klass</span><span>.</span><span>fixture_paths</span> <span># =&gt; ["test/fixtures"]</span></pre></div>
<p><em>Andrew Novoselac</em></p>
</li>
<li>
<p>Introduce <code>TestFixtures#fixture_paths</code>.</p>
<p>Multiple fixture paths can now be specified using the <code>#fixture_paths</code> accessor.<br>
Apps will continue to have <code>test/fixtures</code> as their one fixture path by default,<br>
but additional fixture paths can be specified.</p>
<div data-snippet-clipboard-copy-content="ActiveSupport::TestCase.fixture_paths << &quot;component1/test/fixtures&quot;
ActiveSupport::TestCase.fixture_paths << &quot;component2/test/fixtures&quot;"><pre><span>ActiveSupport</span>::<span>TestCase</span><span>.</span><span>fixture_paths</span> &lt;&lt; <span>"component1/test/fixtures"</span>
<span>ActiveSupport</span>::<span>TestCase</span><span>.</span><span>fixture_paths</span> &lt;&lt; <span>"component2/test/fixtures"</span></pre></div>
<p><code>TestFixtures#fixture_path</code> is now deprecated.</p>
<p><em>Andrew Novoselac</em></p>
</li>
<li>
<p>Adds support for deferrable exclude constraints in PostgreSQL.</p>
<p>By default, exclude constraints in PostgreSQL are checked after each statement.<br>
This works for most use cases, but becomes a major limitation when replacing<br>
records with overlapping ranges by using multiple statements.</p>
<div data-snippet-clipboard-copy-content="exclusion_constraint :users, &quot;daterange(valid_from, valid_to) WITH &amp;&amp;&quot;, deferrable: :immediate"><pre><span>exclusion_constraint</span> <span>:users</span><span>,</span> <span>"daterange(valid_from, valid_to) WITH &amp;&amp;"</span><span>,</span> <span>deferrable</span>: <span>:immediate</span></pre></div>
<p>Passing <code>deferrable: :immediate</code> checks constraint after each statement,<br>
but allows manually deferring the check using <code>SET CONSTRAINTS ALL DEFERRED</code><br>
within a transaction. This will cause the excludes to be checked after the transaction.</p>
<p>It's also possible to change the default behavior from an immediate check<br>
(after the statement), to a deferred check (after the transaction):</p>
<div data-snippet-clipboard-copy-content="exclusion_constraint :users, &quot;daterange(valid_from, valid_to) WITH &amp;&amp;&quot;, deferrable: :deferred"><pre><span>exclusion_constraint</span> <span>:users</span><span>,</span> <span>"daterange(valid_from, valid_to) WITH &amp;&amp;"</span><span>,</span> <span>deferrable</span>: <span>:deferred</span></pre></div>
<p><em>Hiroyuki Ishii</em></p>
</li>
<li>
<p>Respect <code>foreign_type</code> option to <code>delegated_type</code> for <code>{role}_class</code> method.</p>
<p>Usage of <code>delegated_type</code> with non-conventional <code>{role}_type</code> column names can now be specified with <code>foreign_type</code> option.<br>
This option is the same as <code>foreign_type</code> as forwarded to the underlying <code>belongs_to</code> association that <code>delegated_type</code> wraps.</p>
<p><em>Jason Karns</em></p>
</li>
<li>
<p>Add support for unique constraints (PostgreSQL-only).</p>
<div data-snippet-clipboard-copy-content="add_unique_key :sections, [:position], deferrable: :deferred, name: &quot;unique_section_position&quot;
remove_unique_key :sections, name: &quot;unique_section_position&quot;"><pre><span>add_unique_key</span> <span>:sections</span><span>,</span> <span>[</span><span>:position</span><span>]</span><span>,</span> <span>deferrable</span>: <span>:deferred</span><span>,</span> <span>name</span>: <span>"unique_section_position"</span>
<span>remove_unique_key</span> <span>:sections</span><span>,</span> <span>name</span>: <span>"unique_section_position"</span></pre></div>
<p>See PostgreSQL's <a href="https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-UNIQUE-CONSTRAINTS" rel="nofollow">Unique Constraints</a> documentation for more on unique constraints.</p>
<p>By default, unique constraints in PostgreSQL are checked after each statement.<br>
This works for most use cases, but becomes a major limitation when replacing<br>
records with unique column by using multiple statements.</p>
<p>An example of swapping unique columns between records.</p>
<div data-snippet-clipboard-copy-content="# position is unique column
old_item = Item.create!(position: 1)
new_item = Item.create!(position: 2)

Item.transaction do
  old_item.update!(position: 2)
  new_item.update!(position: 1)
end"><pre><span># position is unique column</span>
<span>old_item</span> <span>=</span> <span>Item</span><span>.</span><span>create!</span><span>(</span><span>position</span>: <span>1</span><span>)</span>
<span>new_item</span> <span>=</span> <span>Item</span><span>.</span><span>create!</span><span>(</span><span>position</span>: <span>2</span><span>)</span>

<span>Item</span><span>.</span><span>transaction</span> <span>do</span>
  <span>old_item</span><span>.</span><span>update!</span><span>(</span><span>position</span>: <span>2</span><span>)</span>
  <span>new_item</span><span>.</span><span>update!</span><span>(</span><span>position</span>: <span>1</span><span>)</span>
<span>end</span></pre></div>
<p>Using the default behavior, the transaction would fail when executing the<br>
first <code>UPDATE</code> statement.</p>
<p>By passing the <code>:deferrable</code> option to the <code>add_unique_key</code> statement in<br>
migrations, it's possible to defer this check.</p>
<div data-snippet-clipboard-copy-content="add_unique_key :items, [:position], deferrable: :immediate"><pre><span>add_unique_key</span> <span>:items</span><span>,</span> <span>[</span><span>:position</span><span>]</span><span>,</span> <span>deferrable</span>: <span>:immediate</span></pre></div>
<p>Passing <code>deferrable: :immediate</code> does not change the behaviour of the previous example,<br>
but allows manually deferring the check using <code>SET CONSTRAINTS ALL DEFERRED</code> within a transaction.<br>
This will cause the unique constraints to be checked after the transaction.</p>
<p>It's also possible to adjust the default behavior from an immediate<br>
check (after the statement), to a deferred check (after the transaction):</p>
<div data-snippet-clipboard-copy-content="add_unique_key :items, [:position], deferrable: :deferred"><pre><span>add_unique_key</span> <span>:items</span><span>,</span> <span>[</span><span>:position</span><span>]</span><span>,</span> <span>deferrable</span>: <span>:deferred</span></pre></div>
<p>If you want to change an existing unique index to deferrable, you can use :using_index<br>
to create deferrable unique constraints.</p>
<div data-snippet-clipboard-copy-content="add_unique_key :items, deferrable: :deferred, using_index: &quot;index_items_on_position&quot;"><pre><span>add_unique_key</span> <span>:items</span><span>,</span> <span>deferrable</span>: <span>:deferred</span><span>,</span> <span>using_index</span>: <span>"index_items_on_position"</span></pre></div>
<p><em>Hiroyuki Ishii</em></p>
</li>
<li>
<p>Remove deprecated <code>Tasks::DatabaseTasks.schema_file_type</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Remove deprecated <code>config.active_record.partial_writes</code>.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Remove deprecated <code>ActiveRecord::Base</code> config accessors.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Remove the <code>:include_replicas</code> argument from <code>configs_for</code>. Use <code>:include_hidden</code> argument instead.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Allow applications to lookup a config via a custom hash key.</p>
<p>If you have registered a custom config or want to find configs where the hash matches a specific key, now you can pass <code>config_key</code> to <code>configs_for</code>. For example if you have a <code>db_config</code> with the key <code>vitess</code> you can look up a database configuration hash by  matching that key.</p>
<div data-snippet-clipboard-copy-content="ActiveRecord::Base.configurations.configs_for(env_name: &quot;development&quot;, name: &quot;primary&quot;, config_key: :vitess)
ActiveRecord::Base.configurations.configs_for(env_name: &quot;development&quot;, config_key: :vitess)"><pre><span>ActiveRecord</span>::<span>Base</span><span>.</span><span>configurations</span><span>.</span><span>configs_for</span><span>(</span><span>env_name</span>: <span>"development"</span><span>,</span> <span>name</span>: <span>"primary"</span><span>,</span> <span>config_key</span>: <span>:vitess</span><span>)</span>
<span>ActiveRecord</span>::<span>Base</span><span>.</span><span>configurations</span><span>.</span><span>configs_for</span><span>(</span><span>env_name</span>: <span>"development"</span><span>,</span> <span>config_key</span>: <span>:vitess</span><span>)</span></pre></div>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Allow applications to register a custom database configuration handler.</p>
<p>Adds a mechanism for registering a custom handler for cases where you want database configurations to respond to custom methods. This is useful for non-Rails database adapters or tools like Vitess that you may want to configure differently from a standard <code>HashConfig</code> or <code>UrlConfig</code>.</p>
<p>Given the following database YAML we want the <code>animals</code> db to create a <code>CustomConfig</code> object instead while the <code>primary</code> database will be a <code>UrlConfig</code>:</p>
<div data-snippet-clipboard-copy-content="development:
  primary:
    url: postgres://localhost/primary
  animals:
    url: postgres://localhost/animals
    custom_config:
      sharded: 1"><pre><span>development</span>:
  <span>primary</span>:
    <span>url</span>: <span>postgres://localhost/primary</span>
  <span>animals</span>:
    <span>url</span>: <span>postgres://localhost/animals</span>
    <span>custom_config</span>:
      <span>sharded</span>: <span>1</span></pre></div>
<p>To register a custom handler first make a class that has your custom methods:</p>
<div data-snippet-clipboard-copy-content="class CustomConfig < ActiveRecord::DatabaseConfigurations::UrlConfig
  def sharded?
    custom_config.fetch(&quot;sharded&quot;, false)
  end

  private
    def custom_config
      configuration_hash.fetch(:custom_config)
    end
end"><pre><span>class</span> <span>CustomConfig</span> &lt; <span>ActiveRecord</span>::<span>DatabaseConfigurations</span>::<span>UrlConfig</span>
  <span>def</span> <span>sharded?</span>
    <span>custom_config</span><span>.</span><span>fetch</span><span>(</span><span>"sharded"</span><span>,</span> <span>false</span><span>)</span>
  <span>end</span>

  <span>private</span>
    <span>def</span> <span>custom_config</span>
      <span>configuration_hash</span><span>.</span><span>fetch</span><span>(</span><span>:custom_config</span><span>)</span>
    <span>end</span>
<span>end</span></pre></div>
<p>Then register the config in an initializer:</p>
<div data-snippet-clipboard-copy-content="ActiveRecord::DatabaseConfigurations.register_db_config_handler do |env_name, name, url, config|
  next unless config.key?(:custom_config)
  CustomConfig.new(env_name, name, url, config)
end"><pre><span>ActiveRecord</span>::<span>DatabaseConfigurations</span><span>.</span><span>register_db_config_handler</span> <span>do</span> |<span>env_name</span><span>,</span> <span>name</span><span>,</span> <span>url</span><span>,</span> <span>config</span>|
  <span>next</span> <span>unless</span> <span>config</span><span>.</span><span>key?</span><span>(</span><span>:custom_config</span><span>)</span>
  <span>CustomConfig</span><span>.</span><span>new</span><span>(</span><span>env_name</span><span>,</span> <span>name</span><span>,</span> <span>url</span><span>,</span> <span>config</span><span>)</span>
<span>end</span></pre></div>
<p>When the application is booted, configuration hashes with the <code>:custom_config</code> key will be <code>CustomConfig</code> objects and respond to <code>sharded?</code>. Applications must handle the condition in which Active Record should use their custom handler.</p>
<p><em>Eileen M. Uchitelle and John Crepezzi</em></p>
</li>
<li>
<p><code>ActiveRecord::Base.serialize</code> no longer uses YAML by default.</p>
<p>YAML isn't particularly performant and can lead to security issues<br>
if not used carefully.</p>
<p>Unfortunately there isn't really any good serializers in Ruby's stdlib<br>
to replace it.</p>
<p>The obvious choice would be JSON, which is a fine format for this use case,<br>
however the JSON serializer in Ruby's stdlib isn't strict enough, as it fallback<br>
to casting unknown types to strings, which could lead to corrupted data.</p>
<p>Some third party JSON libraries like <code>Oj</code> have a suitable strict mode.</p>
<p>So it's preferable that users choose a serializer based on their own constraints.</p>
<p>The original default can be restored by setting <code>config.active_record.default_column_serializer = YAML</code>.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p><code>ActiveRecord::Base.serialize</code> signature changed.</p>
<p>Rather than a single positional argument that accepts two possible<br>
types of values, <code>serialize</code> now accepts two distinct keyword arguments.</p>
<p>Before:</p>
<div data-snippet-clipboard-copy-content="serialize :content, JSON
serialize :backtrace, Array"><pre><span>serialize</span> <span>:content</span><span>,</span> <span>JSON</span>
<span>serialize</span> <span>:backtrace</span><span>,</span> <span>Array</span></pre></div>
<p>After:</p>
<div data-snippet-clipboard-copy-content="serialize :content, coder: JSON
serialize :backtrace, type: Array"><pre><span>serialize</span> <span>:content</span><span>,</span> <span>coder</span>: <span>JSON</span>
<span>serialize</span> <span>:backtrace</span><span>,</span> <span>type</span>: <span>Array</span></pre></div>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>YAML columns use <code>YAML.safe_dump</code> if available.</p>
<p>As of <code>psych 5.1.0</code>, <code>YAML.safe_dump</code> can now apply the same permitted<br>
types restrictions than <code>YAML.safe_load</code>.</p>
<p>It's preferable to ensure the payload only use allowed types when we first<br>
try to serialize it, otherwise you may end up with invalid records in the<br>
database.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p><code>ActiveRecord::QueryLogs</code> better handle broken encoding.</p>
<p>It's not uncommon when building queries with BLOB fields to contain<br>
binary data. Unless the call carefully encode the string in ASCII-8BIT<br>
it generally end up being encoded in <code>UTF-8</code>, and <code>QueryLogs</code> would<br>
end up failing on it.</p>
<p><code>ActiveRecord::QueryLogs</code> no longer depend on the query to be properly encoded.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Fix a bug where <code>ActiveRecord::Generators::ModelGenerator</code> would not respect create_table_migration template overrides.</p>
<div data-snippet-clipboard-copy-content="rails g model create_books title:string content:text"><pre><code>rails g model create_books title:string content:text
</code></pre></div>
<p>will now read from the create_table_migration.rb.tt template in the following locations in order:</p>
<div data-snippet-clipboard-copy-content="lib/templates/active_record/model/create_table_migration.rb
lib/templates/active_record/migration/create_table_migration.rb"><pre><code>lib/templates/active_record/model/create_table_migration.rb
lib/templates/active_record/migration/create_table_migration.rb
</code></pre></div>
<p><em>Spencer Neste</em></p>
</li>
<li>
<p><code>ActiveRecord::Relation#explain</code> now accepts options.</p>
<p>For databases and adapters which support them (currently PostgreSQL<br>
and MySQL), options can be passed to <code>explain</code> to provide more<br>
detailed query plan analysis:</p>
<div data-snippet-clipboard-copy-content="Customer.where(id: 1).joins(:orders).explain(:analyze, :verbose)"><pre><span>Customer</span><span>.</span><span>where</span><span>(</span><span>id</span>: <span>1</span><span>)</span><span>.</span><span>joins</span><span>(</span><span>:orders</span><span>)</span><span>.</span><span>explain</span><span>(</span><span>:analyze</span><span>,</span> <span>:verbose</span><span>)</span></pre></div>
<p><em>Reid Lynch</em></p>
</li>
<li>
<p>Multiple <code>Arel::Nodes::SqlLiteral</code> nodes can now be added together to<br>
form <code>Arel::Nodes::Fragments</code> nodes. This allows joining several pieces<br>
of SQL.</p>
<p><em>Matthew Draper</em>, <em>Ole Friis</em></p>
</li>
<li>
<p><code>ActiveRecord::Base#signed_id</code> raises if called on a new record.</p>
<p>Previously it would return an ID that was not usable, since it was based on <code>id = nil</code>.</p>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Allow SQL warnings to be reported.</p>
<p>Active Record configs can be set to enable SQL warning reporting.</p>
<div data-snippet-clipboard-copy-content="# Configure action to take when SQL query produces warning
config.active_record.db_warnings_action = :raise

# Configure allowlist of warnings that should always be ignored
config.active_record.db_warnings_ignore = [
  /Invalid utf8mb4 character string/,
  &quot;An exact warning message&quot;,
]"><pre><span># Configure action to take when SQL query produces warning</span>
<span>config</span><span>.</span><span>active_record</span><span>.</span><span>db_warnings_action</span> <span>=</span> <span>:raise</span>

<span># Configure allowlist of warnings that should always be ignored</span>
<span>config</span><span>.</span><span>active_record</span><span>.</span><span>db_warnings_ignore</span> <span>=</span> <span>[</span>
  <span>/Invalid utf8mb4 character string/</span><span>,</span>
  <span>"An exact warning message"</span><span>,</span>
<span>]</span></pre></div>
<p>This is supported for the MySQL and PostgreSQL adapters.</p>
<p><em>Adrianna Chang</em>, <em>Paarth Madan</em></p>
</li>
<li>
<p>Add <code>#regroup</code> query method as a short-hand for <code>.unscope(:group).group(fields)</code></p>
<p>Example:</p>
<div data-snippet-clipboard-copy-content="Post.group(:title).regroup(:author)
# SELECT `posts`.`*` FROM `posts` GROUP BY `posts`.`author`"><pre><span>Post</span><span>.</span><span>group</span><span>(</span><span>:title</span><span>)</span><span>.</span><span>regroup</span><span>(</span><span>:author</span><span>)</span>
<span># SELECT `posts`.`*` FROM `posts` GROUP BY `posts`.`author`</span></pre></div>
<p><em>Danielius Visockas</em></p>
</li>
<li>
<p>PostgreSQL adapter method <code>enable_extension</code> now allows parameter to be <code>[schema_name.]&lt;extension_name&gt;</code><br>
if the extension must be installed on another schema.</p>
<p>Example: <code>enable_extension('heroku_ext.hstore')</code></p>
<p><em>Leonardo Luarte</em></p>
</li>
<li>
<p>Add <code>:include</code> option to <code>add_index</code>.</p>
<p>Add support for including non-key columns in indexes for PostgreSQL<br>
with the <code>INCLUDE</code> parameter.</p>
<div data-snippet-clipboard-copy-content="add_index(:users, :email, include: [:id, :created_at])"><pre><span>add_index</span><span>(</span><span>:users</span><span>,</span> <span>:email</span><span>,</span> <span>include</span>: <span>[</span><span>:id</span><span>,</span> <span>:created_at</span><span>]</span><span>)</span></pre></div>
<p>will result in:</p>
<div data-snippet-clipboard-copy-content="CREATE INDEX index_users_on_email USING btree (email) INCLUDE (id, created_at)"><pre><span>CREATE</span> <span>INDEX</span> <span>index_users_on_email</span> USING btree (email) INCLUDE (id, created_at)</pre></div>
<p><em>Steve Abrams</em></p>
</li>
<li>
<p><code>ActiveRecord::Relation</code>’s <code>#any?</code>, <code>#none?</code>, and <code>#one?</code> methods take an optional pattern<br>
argument, more closely matching their <code>Enumerable</code> equivalents.</p>
<p><em>George Claghorn</em></p>
</li>
<li>
<p>Add <code>ActiveRecord::Base.normalizes</code> for declaring attribute normalizations.</p>
<p>An attribute normalization is applied when the attribute is assigned or<br>
updated, and the normalized value will be persisted to the database.  The<br>
normalization is also applied to the corresponding keyword argument of query<br>
methods, allowing records to be queried using unnormalized values.</p>
<p>For example:</p>
<div data-snippet-clipboard-copy-content="class User < ActiveRecord::Base
  normalizes :email, with: -> email { email.strip.downcase }
  normalizes :phone, with: -> phone { phone.delete(&quot;^0-9&quot;).delete_prefix(&quot;1&quot;) }
end

user = User.create(email: &quot; CRUISE-CONTROL@EXAMPLE.COM\n&quot;)
user.email                  # => &quot;cruise-control@example.com&quot;

user = User.find_by(email: &quot;\tCRUISE-CONTROL@EXAMPLE.COM &quot;)
user.email                  # => &quot;cruise-control@example.com&quot;
user.email_before_type_cast # => &quot;cruise-control@example.com&quot;

User.where(email: &quot;\tCRUISE-CONTROL@EXAMPLE.COM &quot;).count         # => 1
User.where([&quot;email = ?&quot;, &quot;\tCRUISE-CONTROL@EXAMPLE.COM &quot;]).count # => 0

User.exists?(email: &quot;\tCRUISE-CONTROL@EXAMPLE.COM &quot;)         # => true
User.exists?([&quot;email = ?&quot;, &quot;\tCRUISE-CONTROL@EXAMPLE.COM &quot;]) # => false

User.normalize_value_for(:phone, &quot;+1 (555) 867-5309&quot;) # => &quot;5558675309&quot;"><pre><span>class</span> <span>User</span> &lt; <span>ActiveRecord</span>::<span>Base</span>
  <span>normalizes</span> <span>:email</span><span>,</span> <span>with</span>: <span>-&gt;</span> <span>email</span> <span>{</span> <span>email</span><span>.</span><span>strip</span><span>.</span><span>downcase</span> <span>}</span>
  <span>normalizes</span> <span>:phone</span><span>,</span> <span>with</span>: <span>-&gt;</span> <span>phone</span> <span>{</span> <span>phone</span><span>.</span><span>delete</span><span>(</span><span>"^0-9"</span><span>)</span><span>.</span><span>delete_prefix</span><span>(</span><span>"1"</span><span>)</span> <span>}</span>
<span>end</span>

<span>user</span> <span>=</span> <span>User</span><span>.</span><span>create</span><span>(</span><span>email</span>: <span>" CRUISE-CONTROL@EXAMPLE.COM<span>\n</span>"</span><span>)</span>
<span>user</span><span>.</span><span>email</span>                  <span># =&gt; "cruise-control@example.com"</span>

<span>user</span> <span>=</span> <span>User</span><span>.</span><span>find_by</span><span>(</span><span>email</span>: <span>"<span>\t</span>CRUISE-CONTROL@EXAMPLE.COM "</span><span>)</span>
<span>user</span><span>.</span><span>email</span>                  <span># =&gt; "cruise-control@example.com"</span>
<span>user</span><span>.</span><span>email_before_type_cast</span> <span># =&gt; "cruise-control@example.com"</span>

<span>User</span><span>.</span><span>where</span><span>(</span><span>email</span>: <span>"<span>\t</span>CRUISE-CONTROL@EXAMPLE.COM "</span><span>)</span><span>.</span><span>count</span>         <span># =&gt; 1</span>
<span>User</span><span>.</span><span>where</span><span>(</span><span>[</span><span>"email = ?"</span><span>,</span> <span>"<span>\t</span>CRUISE-CONTROL@EXAMPLE.COM "</span><span>]</span><span>)</span><span>.</span><span>count</span> <span># =&gt; 0</span>

<span>User</span><span>.</span><span>exists?</span><span>(</span><span>email</span>: <span>"<span>\t</span>CRUISE-CONTROL@EXAMPLE.COM "</span><span>)</span>         <span># =&gt; true</span>
<span>User</span><span>.</span><span>exists?</span><span>(</span><span>[</span><span>"email = ?"</span><span>,</span> <span>"<span>\t</span>CRUISE-CONTROL@EXAMPLE.COM "</span><span>]</span><span>)</span> <span># =&gt; false</span>

<span>User</span><span>.</span><span>normalize_value_for</span><span>(</span><span>:phone</span><span>,</span> <span>"+1 (555) 867-5309"</span><span>)</span> <span># =&gt; "5558675309"</span></pre></div>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Hide changes to before_committed! callback behaviour behind flag.</p>
<p>In <a data-error-text="Failed to load title" data-id="1456102052" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/46525" data-hovercard-type="pull_request" data-hovercard-url="/rails/rails/pull/46525/hovercard" href="https://github.com/rails/rails/pull/46525">#46525</a>, behavior around before_committed! callbacks was changed so that callbacks<br>
would run on every enrolled record in a transaction, not just the first copy of a record.<br>
This change in behavior is now controlled by a configuration option,<br>
<code>config.active_record.before_committed_on_all_records</code>. It will be enabled by default on Rails 7.1.</p>
<p><em>Adrianna Chang</em></p>
</li>
<li>
<p>The <code>namespaced_controller</code> Query Log tag now matches the <code>controller</code> format</p>
<p>For example, a request processed by <code>NameSpaced::UsersController</code> will now log as:</p>
<div data-snippet-clipboard-copy-content=":controller # &quot;users&quot;
:namespaced_controller # &quot;name_spaced/users&quot;"><pre><code>:controller # "users"
:namespaced_controller # "name_spaced/users"
</code></pre></div>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Return only unique ids from ActiveRecord::Calculations#ids</p>
<p>Updated ActiveRecord::Calculations#ids to only return the unique ids of the base model<br>
when using eager_load, preload and includes.</p>
<div data-snippet-clipboard-copy-content="Post.find_by(id: 1).comments.count
# => 5
Post.includes(:comments).where(id: 1).pluck(:id)
# => [1, 1, 1, 1, 1]
Post.includes(:comments).where(id: 1).ids
# => [1]"><pre><span>Post</span><span>.</span><span>find_by</span><span>(</span><span>id</span>: <span>1</span><span>)</span><span>.</span><span>comments</span><span>.</span><span>count</span>
<span># =&gt; 5</span>
<span>Post</span><span>.</span><span>includes</span><span>(</span><span>:comments</span><span>)</span><span>.</span><span>where</span><span>(</span><span>id</span>: <span>1</span><span>)</span><span>.</span><span>pluck</span><span>(</span><span>:id</span><span>)</span>
<span># =&gt; [1, 1, 1, 1, 1]</span>
<span>Post</span><span>.</span><span>includes</span><span>(</span><span>:comments</span><span>)</span><span>.</span><span>where</span><span>(</span><span>id</span>: <span>1</span><span>)</span><span>.</span><span>ids</span>
<span># =&gt; [1]</span></pre></div>
<p><em>Joshua Young</em></p>
</li>
<li>
<p>Stop using <code>LOWER()</code> for case-insensitive queries on <code>citext</code> columns</p>
<p>Previously, <code>LOWER()</code> was added for e.g. uniqueness validations with<br>
<code>case_sensitive: false</code>.<br>
It wasn't mentioned in the documentation that the index without <code>LOWER()</code><br>
wouldn't be used in this case.</p>
<p><em>Phil Pirozhkov</em></p>
</li>
<li>
<p>Extract <code>#sync_timezone_changes</code> method in AbstractMysqlAdapter to enable subclasses<br>
to sync database timezone changes without overriding <code>#raw_execute</code>.</p>
<p><em>Adrianna Chang</em>, <em>Paarth Madan</em></p>
</li>
<li>
<p>Do not write additional new lines when dumping sql migration versions</p>
<p>This change updates the <code>insert_versions_sql</code> function so that the database insert string containing the current database migration versions does not end with two additional new lines.</p>
<p><em>Misha Schwartz</em></p>
</li>
<li>
<p>Fix <code>composed_of</code> value freezing and duplication.</p>
<p>Previously composite values exhibited two confusing behaviors:</p>
<ul>
<li>When reading a compositve value it'd <em>NOT</em> be frozen, allowing it to get out of sync with its underlying database<br>
columns.</li>
<li>When writing a compositve value the argument would be frozen, potentially confusing the caller.</li>
</ul>
<p>Currently, composite values instantiated based on database columns are frozen (addressing the first issue) and<br>
assigned compositve values are duplicated and the duplicate is frozen (addressing the second issue).</p>
<p><em>Greg Navis</em></p>
</li>
<li>
<p>Fix redundant updates to the column insensitivity cache</p>
<p>Fixed redundant queries checking column capability for insensitive<br>
comparison.</p>
<p><em>Phil Pirozhkov</em></p>
</li>
<li>
<p>Allow disabling methods generated by <code>ActiveRecord.enum</code>.</p>
<p><em>Alfred Dominic</em></p>
</li>
<li>
<p>Avoid validating <code>belongs_to</code> association if it has not changed.</p>
<p>Previously, when updating a record, Active Record will perform an extra query to check for the presence of<br>
<code>belongs_to</code> associations (if the presence is configured to be mandatory), even if that attribute hasn't changed.</p>
<p>Currently, only <code>belongs_to</code>-related columns are checked for presence. It is possible to have orphaned records with<br>
this approach. To avoid this problem, you need to use a foreign key.</p>
<p>This behavior can be controlled by configuration:</p>
<div data-snippet-clipboard-copy-content="config.active_record.belongs_to_required_validates_foreign_key = false"><pre><span>config</span><span>.</span><span>active_record</span><span>.</span><span>belongs_to_required_validates_foreign_key</span> <span>=</span> <span>false</span></pre></div>
<p>and will be disabled by default with <code>config.load_defaults 7.1</code>.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p><code>has_one</code> and <code>belongs_to</code> associations now define a <code>reset_association</code> method<br>
on the owner model (where <code>association</code> is the name of the association). This<br>
method unloads the cached associate record, if any, and causes the next access<br>
to query it from the database.</p>
<p><em>George Claghorn</em></p>
</li>
<li>
<p>Allow per attribute setting of YAML permitted classes (safe load) and unsafe load.</p>
<p><em>Carlos Palhares</em></p>
</li>
<li>
<p>Add a build persistence method</p>
<p>Provides a wrapper for <code>new</code>, to provide feature parity with <code>create</code>s<br>
ability to create multiple records from an array of hashes, using the<br>
same notation as the <code>build</code> method on associations.</p>
<p><em>Sean Denny</em></p>
</li>
<li>
<p>Raise on assignment to readonly attributes</p>
<div data-snippet-clipboard-copy-content="class Post < ActiveRecord::Base
  attr_readonly :content
end
Post.create!(content: &quot;cannot be updated&quot;)
post.content # &quot;cannot be updated&quot;
post.content = &quot;something else&quot; # => ActiveRecord::ReadonlyAttributeError"><pre><span>class</span> <span>Post</span> &lt; <span>ActiveRecord</span>::<span>Base</span>
  <span>attr_readonly</span> <span>:content</span>
<span>end</span>
<span>Post</span><span>.</span><span>create!</span><span>(</span><span>content</span>: <span>"cannot be updated"</span><span>)</span>
<span>post</span><span>.</span><span>content</span> <span># "cannot be updated"</span>
<span>post</span><span>.</span><span>content</span> <span>=</span> <span>"something else"</span> <span># =&gt; ActiveRecord::ReadonlyAttributeError</span></pre></div>
<p>Previously, assignment would succeed but silently not write to the database.</p>
<p>This behavior can be controlled by configuration:</p>
<div data-snippet-clipboard-copy-content="config.active_record.raise_on_assign_to_attr_readonly = true"><pre><span>config</span><span>.</span><span>active_record</span><span>.</span><span>raise_on_assign_to_attr_readonly</span> <span>=</span> <span>true</span></pre></div>
<p>and will be enabled by default with <code>config.load_defaults 7.1</code>.</p>
<p><em>Alex Ghiculescu</em>, <em>Hartley McGuire</em></p>
</li>
<li>
<p>Allow unscoping of preload and eager_load associations</p>
<p>Added the ability to unscope preload and eager_load associations just like<br>
includes, joins, etc. See ActiveRecord::QueryMethods::VALID_UNSCOPING_VALUES<br>
for the full list of supported unscopable scopes.</p>
<div data-snippet-clipboard-copy-content="query.unscope(:eager_load, :preload).group(:id).select(:id)"><pre><span>query</span><span>.</span><span>unscope</span><span>(</span><span>:eager_load</span><span>,</span> <span>:preload</span><span>)</span><span>.</span><span>group</span><span>(</span><span>:id</span><span>)</span><span>.</span><span>select</span><span>(</span><span>:id</span><span>)</span></pre></div>
<p><em>David Morehouse</em></p>
</li>
<li>
<p>Add automatic filtering of encrypted attributes on inspect</p>
<p>This feature is enabled by default but can be disabled with</p>
<div data-snippet-clipboard-copy-content="config.active_record.encryption.add_to_filter_parameters = false"><pre><span>config</span><span>.</span><span>active_record</span><span>.</span><span>encryption</span><span>.</span><span>add_to_filter_parameters</span> <span>=</span> <span>false</span></pre></div>
<p><em>Hartley McGuire</em></p>
</li>
<li>
<p>Clear locking column on #dup</p>
<p>This change fixes not to duplicate locking_column like id and timestamps.</p>
<div data-snippet-clipboard-copy-content="car = Car.create!
car.touch
car.lock_version #=> 1
car.dup.lock_version #=> 0"><pre><code>car = Car.create!
car.touch
car.lock_version #=&gt; 1
car.dup.lock_version #=&gt; 0
</code></pre></div>
<p><em>Shouichi Kamiya</em>, <em>Seonggi Yang</em>, <em>Ryohei UEDA</em></p>
</li>
<li>
<p>Invalidate transaction as early as possible</p>
<p>After rescuing a <code>TransactionRollbackError</code> exception Rails invalidates transactions earlier in the flow<br>
allowing the framework to skip issuing the <code>ROLLBACK</code> statement in more cases.<br>
Only affects adapters that have <code>savepoint_errors_invalidate_transactions?</code> configured as <code>true</code>,<br>
which at this point is only applicable to the <code>mysql2</code> adapter.</p>
<p><em>Nikita Vasilevsky</em></p>
</li>
<li>
<p>Allow configuring columns list to be used in SQL queries issued by an <code>ActiveRecord::Base</code> object</p>
<p>It is now possible to configure columns list that will be used to build an SQL query clauses when<br>
updating, deleting or reloading an <code>ActiveRecord::Base</code> object</p>
<div data-snippet-clipboard-copy-content="class Developer < ActiveRecord::Base
  query_constraints :company_id, :id
end
developer = Developer.first.update(name: &quot;Bob&quot;)
# => UPDATE &quot;developers&quot; SET &quot;name&quot; = 'Bob' WHERE &quot;developers&quot;.&quot;company_id&quot; = 1 AND &quot;developers&quot;.&quot;id&quot; = 1"><pre><span>class</span> <span>Developer</span> &lt; <span>ActiveRecord</span>::<span>Base</span>
  <span>query_constraints</span> <span>:company_id</span><span>,</span> <span>:id</span>
<span>end</span>
<span>developer</span> <span>=</span> <span>Developer</span><span>.</span><span>first</span><span>.</span><span>update</span><span>(</span><span>name</span>: <span>"Bob"</span><span>)</span>
<span># =&gt; UPDATE "developers" SET "name" = 'Bob' WHERE "developers"."company_id" = 1 AND "developers"."id" = 1</span></pre></div>
<p><em>Nikita Vasilevsky</em></p>
</li>
<li>
<p>Adds <code>validate</code> to foreign keys and check constraints in schema.rb</p>
<p>Previously, <code>schema.rb</code> would not record if <code>validate: false</code> had been used when adding a foreign key or check<br>
constraint, so restoring a database from the schema could result in foreign keys or check constraints being<br>
incorrectly validated.</p>
<p><em>Tommy Graves</em></p>
</li>
<li>
<p>Adapter <code>#execute</code> methods now accept an <code>allow_retry</code> option. When set to <code>true</code>, the SQL statement will be<br>
retried, up to the database's configured <code>connection_retries</code> value, upon encountering connection-related errors.</p>
<p><em>Adrianna Chang</em></p>
</li>
<li>
<p>Only trigger <code>after_commit :destroy</code> callbacks when a database row is deleted.</p>
<p>This prevents <code>after_commit :destroy</code> callbacks from being triggered again<br>
when <code>destroy</code> is called multiple times on the same record.</p>
<p><em>Ben Sheldon</em></p>
</li>
<li>
<p>Fix <code>ciphertext_for</code> for yet-to-be-encrypted values.</p>
<p>Previously, <code>ciphertext_for</code> returned the cleartext of values that had not<br>
yet been encrypted, such as with an unpersisted record:</p>
<div data-snippet-clipboard-copy-content="Post.encrypts :body

post = Post.create!(body: &quot;Hello&quot;)
post.ciphertext_for(:body)
# => &quot;{\&quot;p\&quot;:\&quot;abc...&quot;

post.body = &quot;World&quot;
post.ciphertext_for(:body)
# => &quot;World&quot;"><pre><span>Post</span><span>.</span><span>encrypts</span> <span>:body</span>

<span>post</span> <span>=</span> <span>Post</span><span>.</span><span>create!</span><span>(</span><span>body</span>: <span>"Hello"</span><span>)</span>
<span>post</span><span>.</span><span>ciphertext_for</span><span>(</span><span>:body</span><span>)</span>
<span># =&gt; "{\"p\":\"abc..."</span>

<span>post</span><span>.</span><span>body</span> <span>=</span> <span>"World"</span>
<span>post</span><span>.</span><span>ciphertext_for</span><span>(</span><span>:body</span><span>)</span>
<span># =&gt; "World"</span></pre></div>
<p>Now, <code>ciphertext_for</code> will always return the ciphertext of encrypted<br>
attributes:</p>
<div data-snippet-clipboard-copy-content="Post.encrypts :body

post = Post.create!(body: &quot;Hello&quot;)
post.ciphertext_for(:body)
# => &quot;{\&quot;p\&quot;:\&quot;abc...&quot;

post.body = &quot;World&quot;
post.ciphertext_for(:body)
# => &quot;{\&quot;p\&quot;:\&quot;xyz...&quot;"><pre><span>Post</span><span>.</span><span>encrypts</span> <span>:body</span>

<span>post</span> <span>=</span> <span>Post</span><span>.</span><span>create!</span><span>(</span><span>body</span>: <span>"Hello"</span><span>)</span>
<span>post</span><span>.</span><span>ciphertext_for</span><span>(</span><span>:body</span><span>)</span>
<span># =&gt; "{\"p\":\"abc..."</span>

<span>post</span><span>.</span><span>body</span> <span>=</span> <span>"World"</span>
<span>post</span><span>.</span><span>ciphertext_for</span><span>(</span><span>:body</span><span>)</span>
<span># =&gt; "{\"p\":\"xyz..."</span></pre></div>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Fix a bug where using groups and counts with long table names would return incorrect results.</p>
<p><em>Shota Toguchi</em>, <em>Yusaku Ono</em></p>
</li>
<li>
<p>Fix encryption of column default values.</p>
<p>Previously, encrypted attributes that used column default values appeared to<br>
be encrypted on create, but were not:</p>
<div data-snippet-clipboard-copy-content="Book.encrypts :name

book = Book.create!
book.name
# => &quot;<untitled>&quot;
book.name_before_type_cast
# => &quot;{\&quot;p\&quot;:\&quot;abc...&quot;
book.reload.name_before_type_cast
# => &quot;<untitled>&quot;"><pre><span>Book</span><span>.</span><span>encrypts</span> <span>:name</span>

<span>book</span> <span>=</span> <span>Book</span><span>.</span><span>create!</span>
<span>book</span><span>.</span><span>name</span>
<span># =&gt; "&lt;untitled&gt;"</span>
<span>book</span><span>.</span><span>name_before_type_cast</span>
<span># =&gt; "{\"p\":\"abc..."</span>
<span>book</span><span>.</span><span>reload</span><span>.</span><span>name_before_type_cast</span>
<span># =&gt; "&lt;untitled&gt;"</span></pre></div>
<p>Now, attributes with column default values are encrypted:</p>
<div data-snippet-clipboard-copy-content="Book.encrypts :name

book = Book.create!
book.name
# => &quot;<untitled>&quot;
book.name_before_type_cast
# => &quot;{\&quot;p\&quot;:\&quot;abc...&quot;
book.reload.name_before_type_cast
# => &quot;{\&quot;p\&quot;:\&quot;abc...&quot;"><pre><span>Book</span><span>.</span><span>encrypts</span> <span>:name</span>

<span>book</span> <span>=</span> <span>Book</span><span>.</span><span>create!</span>
<span>book</span><span>.</span><span>name</span>
<span># =&gt; "&lt;untitled&gt;"</span>
<span>book</span><span>.</span><span>name_before_type_cast</span>
<span># =&gt; "{\"p\":\"abc..."</span>
<span>book</span><span>.</span><span>reload</span><span>.</span><span>name_before_type_cast</span>
<span># =&gt; "{\"p\":\"abc..."</span></pre></div>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Deprecate delegation from <code>Base</code> to <code>connection_handler</code>.</p>
<p>Calling <code>Base.clear_all_connections!</code>, <code>Base.clear_active_connections!</code>, <code>Base.clear_reloadable_connections!</code> and <code>Base.flush_idle_connections!</code> is deprecated. Please call these methods on the connection handler directly. In future Rails versions, the delegation from <code>Base</code> to the <code>connection_handler</code> will be removed.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Allow ActiveRecord::QueryMethods#reselect to receive hash values, similar to ActiveRecord::QueryMethods#select</p>
<p><em>Sampat Badhe</em></p>
</li>
<li>
<p>Validate options when managing columns and tables in migrations.</p>
<p>If an invalid option is passed to a migration method like <code>create_table</code> and <code>add_column</code>, an error will be raised<br>
instead of the option being silently ignored. Validation of the options will only be applied for new migrations<br>
that are created.</p>
<p><em>Guo Xiang Tan</em>, <em>George Wambold</em></p>
</li>
<li>
<p>Update query log tags to use the <a href="https://open-telemetry.github.io/opentelemetry-sqlcommenter/" rel="nofollow">SQLCommenter</a> format by default. See <a href="https://github.com/rails/rails/issues/46179" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/46179/hovercard">#46179</a></p>
<p>To opt out of SQLCommenter-formatted query log tags, set <code>config.active_record.query_log_tags_format = :legacy</code>. By default, this is set to <code>:sqlcommenter</code>.</p>
<p><em>Modulitos</em> and <em>Iheanyi</em></p>
</li>
<li>
<p>Allow any ERB in the database.yml when creating rake tasks.</p>
<p>Any ERB can be used in <code>database.yml</code> even if it accesses environment<br>
configurations.</p>
<p>Deprecates <code>config.active_record.suppress_multiple_database_warning</code>.</p>
<p><em>Eike Send</em></p>
</li>
<li>
<p>Add table to error for duplicate column definitions.</p>
<p>If a migration defines duplicate columns for a table, the error message<br>
shows which table it concerns.</p>
<p><em>Petrik de Heus</em></p>
</li>
<li>
<p>Fix erroneous nil default precision on virtual datetime columns.</p>
<p>Prior to this change, virtual datetime columns did not have the same<br>
default precision as regular datetime columns, resulting in the following<br>
being erroneously equivalent:</p>
<div data-snippet-clipboard-copy-content="t.virtual :name, type: datetime,                 as: &quot;expression&quot;
t.virtual :name, type: datetime, precision: nil, as: &quot;expression&quot;"><pre><code>t.virtual :name, type: datetime,                 as: "expression"
t.virtual :name, type: datetime, precision: nil, as: "expression"
</code></pre></div>
<p>This change fixes the default precision lookup, so virtual and regular<br>
datetime column default precisions match.</p>
<p><em>Sam Bostock</em></p>
</li>
<li>
<p>Use connection from <code>#with_raw_connection</code> in <code>#quote_string</code>.</p>
<p>This ensures that the string quoting is wrapped in the reconnect and retry logic<br>
that <code>#with_raw_connection</code> offers.</p>
<p><em>Adrianna Chang</em></p>
</li>
<li>
<p>Add <code>expires_at</code> option to <code>signed_id</code>.</p>
<p><em>Shouichi Kamiya</em></p>
</li>
<li>
<p>Allow applications to set retry deadline for query retries.</p>
<p>Building on the work done in <a data-error-text="Failed to load title" data-id="1154273875" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/44576" data-hovercard-type="pull_request" data-hovercard-url="/rails/rails/pull/44576/hovercard" href="https://github.com/rails/rails/pull/44576">#44576</a> and <a data-error-text="Failed to load title" data-id="1155775285" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/44591" data-hovercard-type="pull_request" data-hovercard-url="/rails/rails/pull/44591/hovercard" href="https://github.com/rails/rails/pull/44591">#44591</a>, we extend the logic that automatically<br>
reconnects database connections to take into account a timeout limit. We won't retry<br>
a query if a given amount of time has elapsed since the query was first attempted. This<br>
value defaults to nil, meaning that all retryable queries are retried regardless of time elapsed,<br>
but this can be changed via the <code>retry_deadline</code> option in the database config.</p>
<p><em>Adrianna Chang</em></p>
</li>
<li>
<p>Fix a case where the query cache can return wrong values. See <a data-error-text="Failed to load title" data-id="1374793684" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/46044" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/46044/hovercard" href="https://github.com/rails/rails/issues/46044">#46044</a></p>
<p><em>Aaron Patterson</em></p>
</li>
<li>
<p>Support MySQL's ssl-mode option for MySQLDatabaseTasks.</p>
<p>Verifying the identity of the database server requires setting the ssl-mode<br>
option to VERIFY_CA or VERIFY_IDENTITY. This option was previously ignored<br>
for MySQL database tasks like creating a database and dumping the structure.</p>
<p><em>Petrik de Heus</em></p>
</li>
<li>
<p>Move <code>ActiveRecord::InternalMetadata</code> to an independent object.</p>
<p><code>ActiveRecord::InternalMetadata</code> no longer inherits from <code>ActiveRecord::Base</code> and is now an independent object that should be instantiated with a <code>connection</code>. This class is private and should not be used by applications directly. If you want to interact with the schema migrations table, please access it on the connection directly, for example: <code>ActiveRecord::Base.connection.schema_migration</code>.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Deprecate quoting <code>ActiveSupport::Duration</code> as an integer</p>
<p>Using ActiveSupport::Duration as an interpolated bind parameter in a SQL<br>
string template is deprecated. To avoid this warning, you should explicitly<br>
convert the duration to a more specific database type. For example, if you<br>
want to use a duration as an integer number of seconds:</p>
<div data-snippet-clipboard-copy-content="Record.where(&quot;duration = ?&quot;, 1.hour.to_i)"><pre><code>Record.where("duration = ?", 1.hour.to_i)
</code></pre></div>
<p>If you want to use a duration as an ISO 8601 string:</p>
<div data-snippet-clipboard-copy-content="Record.where(&quot;duration = ?&quot;, 1.hour.iso8601)"><pre><code>Record.where("duration = ?", 1.hour.iso8601)
</code></pre></div>
<p><em>Aram Greenman</em></p>
</li>
<li>
<p>Allow <code>QueryMethods#in_order_of</code> to order by a string column name.</p>
<div data-snippet-clipboard-copy-content="Post.in_order_of(&quot;id&quot;, [4,2,3,1]).to_a
Post.joins(:author).in_order_of(&quot;authors.name&quot;, [&quot;Bob&quot;, &quot;Anna&quot;, &quot;John&quot;]).to_a"><pre><span>Post</span><span>.</span><span>in_order_of</span><span>(</span><span>"id"</span><span>,</span> <span>[</span><span>4</span><span>,</span><span>2</span><span>,</span><span>3</span><span>,</span><span>1</span><span>]</span><span>)</span><span>.</span><span>to_a</span>
<span>Post</span><span>.</span><span>joins</span><span>(</span><span>:author</span><span>)</span><span>.</span><span>in_order_of</span><span>(</span><span>"authors.name"</span><span>,</span> <span>[</span><span>"Bob"</span><span>,</span> <span>"Anna"</span><span>,</span> <span>"John"</span><span>]</span><span>)</span><span>.</span><span>to_a</span></pre></div>
<p><em>Igor Kasyanchuk</em></p>
</li>
<li>
<p>Move <code>ActiveRecord::SchemaMigration</code> to an independent object.</p>
<p><code>ActiveRecord::SchemaMigration</code> no longer inherits from <code>ActiveRecord::Base</code> and is now an independent object that should be instantiated with a <code>connection</code>. This class is private and should not be used by applications directly. If you want to interact with the schema migrations table, please access it on the connection directly, for example: <code>ActiveRecord::Base.connection.schema_migration</code>.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Deprecate <code>all_connection_pools</code> and make <code>connection_pool_list</code> more explicit.</p>
<p>Following on <a data-error-text="Failed to load title" data-id="1359250964" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/45924" data-hovercard-type="pull_request" data-hovercard-url="/rails/rails/pull/45924/hovercard" href="https://github.com/rails/rails/pull/45924">#45924</a> <code>all_connection_pools</code> is now deprecated. <code>connection_pool_list</code> will either take an explicit role or applications can opt into the new behavior by passing <code>:all</code>.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Fix connection handler methods to operate on all pools.</p>
<p><code>active_connections?</code>, <code>clear_active_connections!</code>, <code>clear_reloadable_connections!</code>, <code>clear_all_connections!</code>, and <code>flush_idle_connections!</code> now operate on all pools by default. Previously they would default to using the <code>current_role</code> or <code>:writing</code> role unless specified.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Allow ActiveRecord::QueryMethods#select to receive hash values.</p>
<p>Currently, <code>select</code> might receive only raw sql and symbols to define columns and aliases to select.</p>
<p>With this change we can provide <code>hash</code> as argument, for example:</p>
<div data-snippet-clipboard-copy-content="Post.joins(:comments).select(posts: [:id, :title, :created_at], comments: [:id, :body, :author_id])
#=> &quot;SELECT \&quot;posts\&quot;.\&quot;id\&quot;, \&quot;posts\&quot;.\&quot;title\&quot;, \&quot;posts\&quot;.\&quot;created_at\&quot;, \&quot;comments\&quot;.\&quot;id\&quot;, \&quot;comments\&quot;.\&quot;body\&quot;, \&quot;comments\&quot;.\&quot;author_id\&quot;
#   FROM \&quot;posts\&quot; INNER JOIN \&quot;comments\&quot; ON \&quot;comments\&quot;.\&quot;post_id\&quot; = \&quot;posts\&quot;.\&quot;id\&quot;&quot;

Post.joins(:comments).select(posts: { id: :post_id, title: :post_title }, comments: { id: :comment_id, body: :comment_body })
#=> &quot;SELECT posts.id as post_id, posts.title as post_title, comments.id as comment_id, comments.body as comment_body
#    FROM \&quot;posts\&quot; INNER JOIN \&quot;comments\&quot; ON \&quot;comments\&quot;.\&quot;post_id\&quot; = \&quot;posts\&quot;.\&quot;id\&quot;&quot;"><pre><span>Post</span><span>.</span><span>joins</span><span>(</span><span>:comments</span><span>)</span><span>.</span><span>select</span><span>(</span><span>posts</span>: <span>[</span><span>:id</span><span>,</span> <span>:title</span><span>,</span> <span>:created_at</span><span>]</span><span>,</span> <span>comments</span>: <span>[</span><span>:id</span><span>,</span> <span>:body</span><span>,</span> <span>:author_id</span><span>]</span><span>)</span>
<span>#=&gt; "SELECT \"posts\".\"id\", \"posts\".\"title\", \"posts\".\"created_at\", \"comments\".\"id\", \"comments\".\"body\", \"comments\".\"author_id\"</span>
<span>#   FROM \"posts\" INNER JOIN \"comments\" ON \"comments\".\"post_id\" = \"posts\".\"id\""</span>

<span>Post</span><span>.</span><span>joins</span><span>(</span><span>:comments</span><span>)</span><span>.</span><span>select</span><span>(</span><span>posts</span>: <span>{</span> <span>id</span>: <span>:post_id</span><span>,</span> <span>title</span>: <span>:post_title</span> <span>}</span><span>,</span> <span>comments</span>: <span>{</span> <span>id</span>: <span>:comment_id</span><span>,</span> <span>body</span>: <span>:comment_body</span> <span>}</span><span>)</span>
<span>#=&gt; "SELECT posts.id as post_id, posts.title as post_title, comments.id as comment_id, comments.body as comment_body</span>
<span>#    FROM \"posts\" INNER JOIN \"comments\" ON \"comments\".\"post_id\" = \"posts\".\"id\""</span></pre></div>
<p><em>Oleksandr Holubenko</em>, <em>Josef Šimánek</em>, <em>Jean Boussier</em></p>
</li>
<li>
<p>Adapts virtual attributes on <code>ActiveRecord::Persistence#becomes</code>.</p>
<p>When source and target classes have a different set of attributes adapts<br>
attributes such that the extra attributes from target are added.</p>
<div data-snippet-clipboard-copy-content="class Person < ApplicationRecord
end

class WebUser < Person
  attribute :is_admin, :boolean
  after_initialize :set_admin

  def set_admin
    write_attribute(:is_admin, email =~ /@ourcompany\.com$/)
  end
end

person = Person.find_by(email: &quot;email@ourcompany.com&quot;)
person.respond_to? :is_admin
# => false
person.becomes(WebUser).is_admin?
# => true"><pre><span>class</span> <span>Person</span> &lt; <span>ApplicationRecord</span>
<span>end</span>

<span>class</span> <span>WebUser</span> &lt; <span>Person</span>
  <span>attribute</span> <span>:is_admin</span><span>,</span> <span>:boolean</span>
  <span>after_initialize</span> <span>:set_admin</span>

  <span>def</span> <span>set_admin</span>
    <span>write_attribute</span><span>(</span><span>:is_admin</span><span>,</span> <span>email</span> =~ <span>/@ourcompany<span>\.</span>com$/</span><span>)</span>
  <span>end</span>
<span>end</span>

<span>person</span> <span>=</span> <span>Person</span><span>.</span><span>find_by</span><span>(</span><span>email</span>: <span>"email@ourcompany.com"</span><span>)</span>
<span>person</span><span>.</span><span>respond_to?</span> <span>:is_admin</span>
<span># =&gt; false</span>
<span>person</span><span>.</span><span>becomes</span><span>(</span><span>WebUser</span><span>)</span><span>.</span><span>is_admin?</span>
<span># =&gt; true</span></pre></div>
<p><em>Jacopo Beschi</em>, <em>Sampson Crowley</em></p>
</li>
<li>
<p>Fix <code>ActiveRecord::QueryMethods#in_order_of</code> to include <code>nil</code>s, to match the<br>
behavior of <code>Enumerable#in_order_of</code>.</p>
<p>For example, <code>Post.in_order_of(:title, [nil, "foo"])</code> will now include posts<br>
with <code>nil</code> titles, the same as <code>Post.all.to_a.in_order_of(:title, [nil, "foo"])</code>.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Optimize <code>add_timestamps</code> to use a single SQL statement.</p>

<p>Now results in the following SQL:</p>
<div data-snippet-clipboard-copy-content="ALTER TABLE &quot;my_table&quot; ADD COLUMN &quot;created_at&quot; datetime(6) NOT NULL, ADD COLUMN &quot;updated_at&quot; datetime(6) NOT NULL"><pre><span>ALTER</span> <span>TABLE</span> <span><span>"</span>my_table<span>"</span></span> ADD COLUMN <span><span>"</span>created_at<span>"</span></span> datetime(<span>6</span>) <span>NOT NULL</span>, ADD COLUMN <span><span>"</span>updated_at<span>"</span></span> datetime(<span>6</span>) <span>NOT NULL</span></pre></div>
<p><em>Iliana Hadzhiatanasova</em></p>
</li>
<li>
<p>Add <code>drop_enum</code> migration command for PostgreSQL</p>
<p>This does the inverse of <code>create_enum</code>. Before dropping an enum, ensure you have<br>
dropped columns that depend on it.</p>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Adds support for <code>if_exists</code> option when removing a check constraint.</p>
<p>The <code>remove_check_constraint</code> method now accepts an <code>if_exists</code> option. If set<br>
to true an error won't be raised if the check constraint doesn't exist.</p>
<p><em>Margaret Parsa</em> and <em>Aditya Bhutani</em></p>
</li>
<li>
<p><code>find_or_create_by</code> now try to find a second time if it hits a unicity constraint.</p>
<p><code>find_or_create_by</code> always has been inherently racy, either creating multiple<br>
duplicate records or failing with <code>ActiveRecord::RecordNotUnique</code> depending on<br>
whether a proper unicity constraint was set.</p>
<p><code>create_or_find_by</code> was introduced for this use case, however it's quite wasteful<br>
when the record is expected to exist most of the time, as INSERT require to send<br>
more data than SELECT and require more work from the database. Also on some<br>
databases it can actually consume a primary key increment which is undesirable.</p>
<p>So for case where most of the time the record is expected to exist, <code>find_or_create_by</code><br>
can be made race-condition free by re-trying the <code>find</code> if the <code>create</code> failed<br>
with <code>ActiveRecord::RecordNotUnique</code>. This assumes that the table has the proper<br>
unicity constraints, if not, <code>find_or_create_by</code> will still lead to duplicated records.</p>
<p><em>Jean Boussier</em>, <em>Alex Kitchens</em></p>
</li>
<li>
<p>Introduce a simpler constructor API for ActiveRecord database adapters.</p>
<p>Previously the adapter had to know how to build a new raw connection to<br>
support reconnect, but also expected to be passed an initial already-<br>
established connection.</p>
<p>When manually creating an adapter instance, it will now accept a single<br>
config hash, and only establish the real connection on demand.</p>
<p><em>Matthew Draper</em></p>
</li>
<li>
<p>Avoid redundant <code>SELECT 1</code> connection-validation query during DB pool<br>
checkout when possible.</p>
<p>If the first query run during a request is known to be idempotent, it can be<br>
used directly to validate the connection, saving a network round-trip.</p>
<p><em>Matthew Draper</em></p>
</li>
<li>
<p>Automatically reconnect broken database connections when safe, even<br>
mid-request.</p>
<p>When an error occurs while attempting to run a known-idempotent query, and<br>
not inside a transaction, it is safe to immediately reconnect to the<br>
database server and try again, so this is now the default behavior.</p>
<p>This new default should always be safe -- to support that, it's consciously<br>
conservative about which queries are considered idempotent -- but if<br>
necessary it can be disabled by setting the <code>connection_retries</code> connection<br>
option to <code>0</code>.</p>
<p><em>Matthew Draper</em></p>
</li>
<li>
<p>Avoid removing a PostgreSQL extension when there are dependent objects.</p>
<p>Previously, removing an extension also implicitly removed dependent objects. Now, this will raise an error.</p>
<p>You can force removing the extension:</p>
<div data-snippet-clipboard-copy-content="disable_extension :citext, force: :cascade"><pre><span>disable_extension</span> <span>:citext</span><span>,</span> <span>force</span>: <span>:cascade</span></pre></div>
<p>Fixes <a data-error-text="Failed to load title" data-id="228722817" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/29091" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/29091/hovercard" href="https://github.com/rails/rails/issues/29091">#29091</a>.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Allow nested functions as safe SQL string</p>
<p><em>Michael Siegfried</em></p>
</li>
<li>
<p>Allow <code>destroy_association_async_job=</code> to be configured with a class string instead of a constant.</p>
<p>Defers an autoloading dependency between <code>ActiveRecord::Base</code> and <code>ActiveJob::Base</code><br>
and moves the configuration of <code>ActiveRecord::DestroyAssociationAsyncJob</code><br>
from ActiveJob to ActiveRecord.</p>
<p>Deprecates <code>ActiveRecord::ActiveJobRequiredError</code> and now raises a <code>NameError</code><br>
if the job class is unloadable or an <code>ActiveRecord::ConfigurationError</code> if<br>
<code>dependent: :destroy_async</code> is declared on an association but there is no job<br>
class configured.</p>
<p><em>Ben Sheldon</em></p>
</li>
<li>
<p>Fix <code>ActiveRecord::Store</code> to serialize as a regular Hash</p>
<p>Previously it would serialize as an <code>ActiveSupport::HashWithIndifferentAccess</code><br>
which is wasteful and cause problem with YAML safe_load.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Add <code>timestamptz</code> as a time zone aware type for PostgreSQL</p>
<p>This is required for correctly parsing <code>timestamp with time zone</code> values in your database.</p>
<p>If you don't want this, you can opt out by adding this initializer:</p>
<div data-snippet-clipboard-copy-content="ActiveRecord::Base.time_zone_aware_types -= [:timestamptz]"><pre><span>ActiveRecord</span>::<span>Base</span><span>.</span><span>time_zone_aware_types</span> -= <span>[</span><span>:timestamptz</span><span>]</span></pre></div>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Add new <code>ActiveRecord::Base.generates_token_for</code> API.</p>
<p>Currently, <code>signed_id</code> fulfills the role of generating tokens for e.g.<br>
resetting a password.  However, signed IDs cannot reflect record state, so<br>
if a token is intended to be single-use, it must be tracked in a database at<br>
least until it expires.</p>
<p>With <code>generates_token_for</code>, a token can embed data from a record.  When<br>
using the token to fetch the record, the data from the token and the current<br>
data from the record will be compared.  If the two do not match, the token<br>
will be treated as invalid, the same as if it had expired.  For example:</p>
<div data-snippet-clipboard-copy-content="class User < ActiveRecord::Base
  has_secure_password

  generates_token_for :password_reset, expires_in: 15.minutes do
    # A password's BCrypt salt changes when the password is updated.
    # By embedding (part of) the salt in a token, the token will
    # expire when the password is updated.
    BCrypt::Password.new(password_digest).salt[-10..]
  end
end

user = User.first
token = user.generate_token_for(:password_reset)

User.find_by_token_for(:password_reset, token) # => user

user.update!(password: &quot;new password&quot;)
User.find_by_token_for(:password_reset, token) # => nil"><pre><span>class</span> <span>User</span> &lt; <span>ActiveRecord</span>::<span>Base</span>
  <span>has_secure_password</span>

  <span>generates_token_for</span> <span>:password_reset</span><span>,</span> <span>expires_in</span>: <span>15</span><span>.</span><span>minutes</span> <span>do</span>
    <span># A password's BCrypt salt changes when the password is updated.</span>
    <span># By embedding (part of) the salt in a token, the token will</span>
    <span># expire when the password is updated.</span>
    <span>BCrypt</span>::<span>Password</span><span>.</span><span>new</span><span>(</span><span>password_digest</span><span>)</span><span>.</span><span>salt</span><span>[</span>-<span>10</span>..<span>]</span>
  <span>end</span>
<span>end</span>

<span>user</span> <span>=</span> <span>User</span><span>.</span><span>first</span>
<span>token</span> <span>=</span> <span>user</span><span>.</span><span>generate_token_for</span><span>(</span><span>:password_reset</span><span>)</span>

<span>User</span><span>.</span><span>find_by_token_for</span><span>(</span><span>:password_reset</span><span>,</span> <span>token</span><span>)</span> <span># =&gt; user</span>

<span>user</span><span>.</span><span>update!</span><span>(</span><span>password</span>: <span>"new password"</span><span>)</span>
<span>User</span><span>.</span><span>find_by_token_for</span><span>(</span><span>:password_reset</span><span>,</span> <span>token</span><span>)</span> <span># =&gt; nil</span></pre></div>
<p><em>Jonathan Hefner</em></p>
</li>
<li>
<p>Optimize Active Record batching for whole table iterations.</p>
<p>Previously, <code>in_batches</code> got all the ids and constructed an <code>IN</code>-based query for each batch.<br>
When iterating over the whole tables, this approach is not optimal as it loads unneeded ids and<br>
<code>IN</code> queries with lots of items are slow.</p>
<p>Now, whole table iterations use range iteration (<code>id &gt;= x AND id &lt;= y</code>) by default which can make iteration<br>
several times faster. E.g., tested on a PostgreSQL table with 10 million records: querying (<code>253s</code> vs <code>30s</code>),<br>
updating (<code>288s</code> vs <code>124s</code>), deleting (<code>268s</code> vs <code>83s</code>).</p>
<p>Only whole table iterations use this style of iteration by default. You can disable this behavior by passing <code>use_ranges: false</code>.<br>
If you iterate over the table and the only condition is, e.g., <code>archived_at: nil</code> (and only a tiny fraction<br>
of the records are archived), it makes sense to opt in to this approach:</p>
<div data-snippet-clipboard-copy-content="Project.where(archived_at: nil).in_batches(use_ranges: true) do |relation|
  # do something
end"><pre><span>Project</span><span>.</span><span>where</span><span>(</span><span>archived_at</span>: <span>nil</span><span>)</span><span>.</span><span>in_batches</span><span>(</span><span>use_ranges</span>: <span>true</span><span>)</span> <span>do</span> |<span>relation</span>|
  <span># do something</span>
<span>end</span></pre></div>
<p>See <a data-error-text="Failed to load title" data-id="1277547479" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/45414" data-hovercard-type="pull_request" data-hovercard-url="/rails/rails/pull/45414/hovercard" href="https://github.com/rails/rails/pull/45414">#45414</a> for more details.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p><code>.with</code> query method added. Construct common table expressions with ease and get <code>ActiveRecord::Relation</code> back.</p>
<div data-snippet-clipboard-copy-content="Post.with(posts_with_comments: Post.where(&quot;comments_count > ?&quot;, 0))
# => ActiveRecord::Relation
# WITH posts_with_comments AS (SELECT * FROM posts WHERE (comments_count > 0)) SELECT * FROM posts"><pre><span>Post</span><span>.</span><span>with</span><span>(</span><span>posts_with_comments</span>: <span>Post</span><span>.</span><span>where</span><span>(</span><span>"comments_count &gt; ?"</span><span>,</span> <span>0</span><span>)</span><span>)</span>
<span># =&gt; ActiveRecord::Relation</span>
<span># WITH posts_with_comments AS (SELECT * FROM posts WHERE (comments_count &gt; 0)) SELECT * FROM posts</span></pre></div>
<p><em>Vlado Cingel</em></p>
</li>
<li>
<p>Don't establish a new connection if an identical pool exists already.</p>
<p>Previously, if <code>establish_connection</code> was called on a class that already had an established connection, the existing connection would be removed regardless of whether it was the same config. Now if a pool is found with the same values as the new connection, the existing connection will be returned instead of creating a new one.</p>
<p>This has a slight change in behavior if application code is depending on a new connection being established regardless of whether it's identical to an existing connection. If the old behavior is desirable, applications should call <code>ActiveRecord::Base#remove_connection</code> before establishing a new one. Calling <code>establish_connection</code> with a different config works the same way as it did previously.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Update <code>db:prepare</code> task to load schema when an uninitialized database exists, and dump schema after migrations.</p>
<p><em>Ben Sheldon</em></p>
</li>
<li>
<p>Fix supporting timezone awareness for <code>tsrange</code> and <code>tstzrange</code> array columns.</p>
<div data-snippet-clipboard-copy-content="# In database migrations
add_column :shops, :open_hours, :tsrange, array: true
# In app config
ActiveRecord::Base.time_zone_aware_types += [:tsrange]
# In the code times are properly converted to app time zone
Shop.create!(open_hours: [Time.current..8.hour.from_now])"><pre><span># In database migrations</span>
<span>add_column</span> <span>:shops</span><span>,</span> <span>:open_hours</span><span>,</span> <span>:tsrange</span><span>,</span> <span>array</span>: <span>true</span>
<span># In app config</span>
<span>ActiveRecord</span>::<span>Base</span><span>.</span><span>time_zone_aware_types</span> += <span>[</span><span>:tsrange</span><span>]</span>
<span># In the code times are properly converted to app time zone</span>
<span>Shop</span><span>.</span><span>create!</span><span>(</span><span>open_hours</span>: <span>[</span><span>Time</span><span>.</span><span>current</span>..<span>8</span><span>.</span><span>hour</span><span>.</span><span>from_now</span><span>]</span><span>)</span></pre></div>
<p><em>Wojciech Wnętrzak</em></p>
</li>
<li>
<p>Introduce strategy pattern for executing migrations.</p>
<p>By default, migrations will use a strategy object that delegates the method<br>
to the connection adapter. Consumers can implement custom strategy objects<br>
to change how their migrations run.</p>
<p><em>Adrianna Chang</em></p>
</li>
<li>
<p>Add adapter option disallowing foreign keys</p>
<p>This adds a new option to be added to <code>database.yml</code> which enables skipping<br>
foreign key constraints usage even if the underlying database supports them.</p>
<p>Usage:</p>
<div data-snippet-clipboard-copy-content="development:
    <<: *default
    database: storage/development.sqlite3
    foreign_keys: false"><pre><span>development</span>:
    <span>&lt;&lt;</span>: <span>*default</span>
    <span>database</span>: <span>storage/development.sqlite3</span>
    <span>foreign_keys</span>: <span>false</span></pre></div>
<p><em>Paulo Barros</em></p>
</li>
<li>
<p>Add configurable deprecation warning for singular associations</p>
<p>This adds a deprecation warning when using the plural name of a singular associations in <code>where</code>.<br>
It is possible to opt into the new more performant behavior with <code>config.active_record.allow_deprecated_singular_associations_name = false</code></p>
<p><em>Adam Hess</em></p>
</li>
<li>
<p>Run transactional callbacks on the freshest instance to save a given<br>
record within a transaction.</p>
<p>When multiple Active Record instances change the same record within a<br>
transaction, Rails runs <code>after_commit</code> or <code>after_rollback</code> callbacks for<br>
only one of them. <code>config.active_record.run_commit_callbacks_on_first_saved_instances_in_transaction</code><br>
was added to specify how Rails chooses which instance receives the<br>
callbacks. The framework defaults were changed to use the new logic.</p>
<p>When <code>config.active_record.run_commit_callbacks_on_first_saved_instances_in_transaction</code><br>
is <code>true</code>, transactional callbacks are run on the first instance to save,<br>
even though its instance state may be stale.</p>
<p>When it is <code>false</code>, which is the new framework default starting with version<br>
7.1, transactional callbacks are run on the instances with the freshest<br>
instance state. Those instances are chosen as follows:</p>
<ul>
<li>In general, run transactional callbacks on the last instance to save a<br>
given record within the transaction.</li>
<li>There are two exceptions:
<ul>
<li>If the record is created within the transaction, then updated by<br>
another instance, <code>after_create_commit</code> callbacks will be run on the<br>
second instance. This is instead of the <code>after_update_commit</code><br>
callbacks that would naively be run based on that instance’s state.</li>
<li>If the record is destroyed within the transaction, then<br>
<code>after_destroy_commit</code> callbacks will be fired on the last destroyed<br>
instance, even if a stale instance subsequently performed an update<br>
(which will have affected 0 rows).</li>
</ul>
</li>
</ul>
<p><em>Cameron Bothner and Mitch Vollebregt</em></p>
</li>
<li>
<p>Enable strict strings mode for <code>SQLite3Adapter</code>.</p>
<p>Configures SQLite with a strict strings mode, which disables double-quoted string literals.</p>
<p>SQLite has some quirks around double-quoted string literals.<br>
It first tries to consider double-quoted strings as identifier names, but if they don't exist<br>
it then considers them as string literals. Because of this, typos can silently go unnoticed.<br>
For example, it is possible to create an index for a non existing column.<br>
See <a href="https://www.sqlite.org/quirks.html#double_quoted_string_literals_are_accepted" rel="nofollow">SQLite documentation</a> for more details.</p>
<p>If you don't want this behavior, you can disable it via:</p>
<div data-snippet-clipboard-copy-content="# config/application.rb
config.active_record.sqlite3_adapter_strict_strings_by_default = false"><pre><span># config/application.rb</span>
<span>config</span><span>.</span><span>active_record</span><span>.</span><span>sqlite3_adapter_strict_strings_by_default</span> <span>=</span> <span>false</span></pre></div>
<p>Fixes <a data-error-text="Failed to load title" data-id="202667093" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/27782" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/27782/hovercard" href="https://github.com/rails/rails/issues/27782">#27782</a>.</p>
<p><em>fatkodima</em>, <em>Jean Boussier</em></p>
</li>
<li>
<p>Resolve issue where a relation cache_version could be left stale.</p>
<p>Previously, when <code>reset</code> was called on a relation object it did not reset the cache_versions<br>
ivar. This led to a confusing situation where despite having the correct data the relation<br>
still reported a stale cache_version.</p>
<p>Usage:</p>
<div data-snippet-clipboard-copy-content="developers = Developer.all
developers.cache_version

Developer.update_all(updated_at: Time.now.utc + 1.second)

developers.cache_version # Stale cache_version
developers.reset
developers.cache_version # Returns the current correct cache_version"><pre><span>developers</span> <span>=</span> <span>Developer</span><span>.</span><span>all</span>
<span>developers</span><span>.</span><span>cache_version</span>

<span>Developer</span><span>.</span><span>update_all</span><span>(</span><span>updated_at</span>: <span>Time</span><span>.</span><span>now</span><span>.</span><span>utc</span> + <span>1</span><span>.</span><span>second</span><span>)</span>

<span>developers</span><span>.</span><span>cache_version</span> <span># Stale cache_version</span>
<span>developers</span><span>.</span><span>reset</span>
<span>developers</span><span>.</span><span>cache_version</span> <span># Returns the current correct cache_version</span></pre></div>
<p>Fixes <a data-error-text="Failed to load title" data-id="1269654145" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/45341" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/45341/hovercard" href="https://github.com/rails/rails/issues/45341">#45341</a>.</p>
<p><em>Austen Madden</em></p>
</li>
<li>
<p>Add support for exclusion constraints (PostgreSQL-only).</p>
<div data-snippet-clipboard-copy-content="add_exclusion_constraint :invoices, &quot;daterange(start_date, end_date) WITH &amp;&amp;&quot;, using: :gist, name: &quot;invoices_date_overlap&quot;
remove_exclusion_constraint :invoices, name: &quot;invoices_date_overlap&quot;"><pre><span>add_exclusion_constraint</span> <span>:invoices</span><span>,</span> <span>"daterange(start_date, end_date) WITH &amp;&amp;"</span><span>,</span> <span>using</span>: <span>:gist</span><span>,</span> <span>name</span>: <span>"invoices_date_overlap"</span>
<span>remove_exclusion_constraint</span> <span>:invoices</span><span>,</span> <span>name</span>: <span>"invoices_date_overlap"</span></pre></div>
<p>See PostgreSQL's <a href="https://www.postgresql.org/docs/12/sql-createtable.html#SQL-CREATETABLE-EXCLUDE" rel="nofollow"><code>CREATE TABLE ... EXCLUDE ...</code></a> documentation for more on exclusion constraints.</p>
<p><em>Alex Robbin</em></p>
</li>
<li>
<p><code>change_column_null</code> raises if a non-boolean argument is provided</p>
<p>Previously if you provided a non-boolean argument, <code>change_column_null</code> would<br>
treat it as truthy and make your column nullable. This could be surprising, so now<br>
the input must be either <code>true</code> or <code>false</code>.</p>
<div data-snippet-clipboard-copy-content="change_column_null :table, :column, true # good
change_column_null :table, :column, false # good
change_column_null :table, :column, from: true, to: false # raises (previously this made the column nullable)"><pre><span>change_column_null</span> <span>:table</span><span>,</span> <span>:column</span><span>,</span> <span>true</span> <span># good</span>
<span>change_column_null</span> <span>:table</span><span>,</span> <span>:column</span><span>,</span> <span>false</span> <span># good</span>
<span>change_column_null</span> <span>:table</span><span>,</span> <span>:column</span><span>,</span> <span>from</span>: <span>true</span><span>,</span> <span>to</span>: <span>false</span> <span># raises (previously this made the column nullable)</span></pre></div>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Enforce limit on table names length.</p>
<p>Fixes <a data-error-text="Failed to load title" data-id="1241820374" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/45130" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/45130/hovercard" href="https://github.com/rails/rails/issues/45130">#45130</a>.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Adjust the minimum MariaDB version for check constraints support.</p>
<p><em>Eddie Lebow</em></p>
</li>
<li>
<p>Fix Hstore deserialize regression.</p>
<p><em>edsharp</em></p>
</li>
<li>
<p>Add validity for PostgreSQL indexes.</p>
<div data-snippet-clipboard-copy-content="connection.index_exists?(:users, :email, valid: true)
connection.indexes(:users).select(&amp;:valid?)"><pre><span>connection</span><span>.</span><span>index_exists?</span><span>(</span><span>:users</span><span>,</span> <span>:email</span><span>,</span> <span>valid</span>: <span>true</span><span>)</span>
<span>connection</span><span>.</span><span>indexes</span><span>(</span><span>:users</span><span>)</span><span>.</span><span>select</span><span>(</span>&amp;<span>:valid?</span><span>)</span></pre></div>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Fix eager loading for models without primary keys.</p>
<p><em>Anmol Chopra</em>, <em>Matt Lawrence</em>, and <em>Jonathan Hefner</em></p>
</li>
<li>
<p>Avoid validating a unique field if it has not changed and is backed by a unique index.</p>
<p>Previously, when saving a record, Active Record will perform an extra query to check for the<br>
uniqueness of each attribute having a <code>uniqueness</code> validation, even if that attribute hasn't changed.<br>
If the database has the corresponding unique index, then this validation can never fail for persisted<br>
records, and we could safely skip it.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Stop setting <code>sql_auto_is_null</code></p>
<p>Since version 5.5 the default has been off, we no longer have to manually turn it off.</p>
<p><em>Adam Hess</em></p>
</li>
<li>
<p>Fix <code>touch</code> to raise an error for readonly columns.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Add ability to ignore tables by regexp for SQL schema dumps.</p>
<div data-snippet-clipboard-copy-content="ActiveRecord::SchemaDumper.ignore_tables = [/^_/]"><pre><span>ActiveRecord</span>::<span>SchemaDumper</span><span>.</span><span>ignore_tables</span> <span>=</span> <span>[</span><span>/^_/</span><span>]</span></pre></div>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Avoid queries when performing calculations on contradictory relations.</p>
<p>Previously calculations would make a query even when passed a<br>
contradiction, such as <code>User.where(id: []).count</code>. We no longer perform a<br>
query in that scenario.</p>
<p>This applies to the following calculations: <code>count</code>, <code>sum</code>, <code>average</code>,<br>
<code>minimum</code> and <code>maximum</code></p>
<p><em>Luan Vieira, John Hawthorn and Daniel Colson</em></p>
</li>
<li>
<p>Allow using aliased attributes with <code>insert_all</code>/<code>upsert_all</code>.</p>
<div data-snippet-clipboard-copy-content="class Book < ApplicationRecord
  alias_attribute :title, :name
end

Book.insert_all [{ title: &quot;Remote&quot;, author_id: 1 }], returning: :title"><pre><span>class</span> <span>Book</span> &lt; <span>ApplicationRecord</span>
  <span>alias_attribute</span> <span>:title</span><span>,</span> <span>:name</span>
<span>end</span>

<span>Book</span><span>.</span><span>insert_all</span> <span>[</span><span>{</span> <span>title</span>: <span>"Remote"</span><span>,</span> <span>author_id</span>: <span>1</span> <span>}</span><span>]</span><span>,</span> <span>returning</span>: <span>:title</span></pre></div>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Support encrypted attributes on columns with default db values.</p>
<p>This adds support for encrypted attributes defined on columns with default values.<br>
It will encrypt those values at creation time. Before, it would raise an<br>
error unless <code>config.active_record.encryption.support_unencrypted_data</code> was true.</p>
<p><em>Jorge Manrubia</em> and <em>Dima Fatko</em></p>
</li>
<li>
<p>Allow overriding <code>reading_request?</code> in <code>DatabaseSelector::Resolver</code></p>
<p>The default implementation checks if a request is a <code>get?</code> or <code>head?</code>,<br>
but you can now change it to anything you like. If the method returns true,<br>
<code>Resolver#read</code> gets called meaning the request could be served by the<br>
replica database.</p>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Remove <code>ActiveRecord.legacy_connection_handling</code>.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p><code>rails db:schema:{dump,load}</code> now checks <code>ENV["SCHEMA_FORMAT"]</code> before config</p>
<p>Since <code>rails db:structure:{dump,load}</code> was deprecated there wasn't a simple<br>
way to dump a schema to both SQL and Ruby formats. You can now do this with<br>
an environment variable. For example:</p>
<div data-snippet-clipboard-copy-content="SCHEMA_FORMAT=sql rake db:schema:dump"><pre><code>SCHEMA_FORMAT=sql rake db:schema:dump
</code></pre></div>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Fixed MariaDB default function support.</p>
<p>Defaults would be written wrong in "db/schema.rb" and not work correctly<br>
if using <code>db:schema:load</code>. Further more the function name would be<br>
added as string content when saving new records.</p>
<p><em>kaspernj</em></p>
</li>
<li>
<p>Add <code>active_record.destroy_association_async_batch_size</code> configuration</p>
<p>This allows applications to specify the maximum number of records that will<br>
be destroyed in a single background job by the <code>dependent: :destroy_async</code><br>
association option. By default, the current behavior will remain the same:<br>
when a parent record is destroyed, all dependent records will be destroyed<br>
in a single background job. If the number of dependent records is greater<br>
than this configuration, the records will be destroyed in multiple<br>
background jobs.</p>
<p><em>Nick Holden</em></p>
</li>
<li>
<p>Fix <code>remove_foreign_key</code> with <code>:if_exists</code> option when foreign key actually exists.</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Remove <code>--no-comments</code> flag in structure dumps for PostgreSQL</p>
<p>This broke some apps that used custom schema comments. If you don't want<br>
comments in your structure dump, you can use:</p>
<div data-snippet-clipboard-copy-content="ActiveRecord::Tasks::DatabaseTasks.structure_dump_flags = ['--no-comments']"><pre><span>ActiveRecord</span>::<span>Tasks</span>::<span>DatabaseTasks</span><span>.</span><span>structure_dump_flags</span> <span>=</span> <span>[</span><span>'--no-comments'</span><span>]</span></pre></div>
<p><em>Alex Ghiculescu</em></p>
</li>
<li>
<p>Reduce the memory footprint of fixtures accessors.</p>
<p>Until now fixtures accessors were eagerly defined using <code>define_method</code>.<br>
So the memory usage was directly dependent of the number of fixtures and<br>
test suites.</p>
<p>Instead fixtures accessors are now implemented with <code>method_missing</code>,<br>
so they incur much less memory and CPU overhead.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Fix <code>config.active_record.destroy_association_async_job</code> configuration</p>
<p><code>config.active_record.destroy_association_async_job</code> should allow<br>
applications to specify the job that will be used to destroy associated<br>
records in the background for <code>has_many</code> associations with the<br>
<code>dependent: :destroy_async</code> option. Previously, that was ignored, which<br>
meant the default <code>ActiveRecord::DestroyAssociationAsyncJob</code> always<br>
destroyed records in the background.</p>
<p><em>Nick Holden</em></p>
</li>
<li>
<p>Fix <code>change_column_comment</code> to preserve column's AUTO_INCREMENT in the MySQL adapter</p>
<p><em>fatkodima</em></p>
</li>
<li>
<p>Fix quoting of <code>ActiveSupport::Duration</code> and <code>Rational</code> numbers in the MySQL adapter.</p>
<p><em>Kevin McPhillips</em></p>
</li>
<li>
<p>Allow column name with COLLATE (e.g., title COLLATE "C") as safe SQL string</p>
<p><em>Shugo Maeda</em></p>
</li>
<li>
<p>Permit underscores in the VERSION argument to database rake tasks.</p>
<p><em>Eddie Lebow</em></p>
</li>
<li>
<p>Reversed the order of <code>INSERT</code> statements in <code>structure.sql</code> dumps</p>
<p>This should decrease the likelihood of merge conflicts. New migrations<br>
will now be added at the top of the list.</p>
<p>For existing apps, there will be a large diff the next time <code>structure.sql</code><br>
is generated.</p>
<p><em>Alex Ghiculescu</em>, <em>Matt Larraz</em></p>
</li>
<li>
<p>Fix PG.connect keyword arguments deprecation warning on ruby 2.7</p>
<p>Fixes <a data-error-text="Failed to load title" data-id="1121266570" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/44307" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/44307/hovercard" href="https://github.com/rails/rails/issues/44307">#44307</a>.</p>
<p><em>Nikita Vasilevsky</em></p>
</li>
<li>
<p>Fix dropping DB connections after serialization failures and deadlocks.</p>
<p>Prior to 6.1.4, serialization failures and deadlocks caused rollbacks to be<br>
issued for both real transactions and savepoints. This breaks MySQL which<br>
disallows rollbacks of savepoints following a deadlock.</p>
<p>6.1.4 removed these rollbacks, for both transactions and savepoints, causing<br>
the DB connection to be left in an unknown state and thus discarded.</p>
<p>These rollbacks are now restored, except for savepoints on MySQL.</p>
<p><em>Thomas Morgan</em></p>
</li>
<li>
<p>Make <code>ActiveRecord::ConnectionPool</code> Fiber-safe</p>
<p>When <code>ActiveSupport::IsolatedExecutionState.isolation_level</code> is set to <code>:fiber</code>,<br>
the connection pool now supports multiple Fibers from the same Thread checking<br>
out connections from the pool.</p>
<p><em>Alex Matchneer</em></p>
</li>
<li>
<p>Add <code>update_attribute!</code> to <code>ActiveRecord::Persistence</code></p>
<p>Similar to <code>update_attribute</code>, but raises <code>ActiveRecord::RecordNotSaved</code> when a <code>before_*</code> callback throws <code>:abort</code>.</p>
<div data-snippet-clipboard-copy-content="class Topic < ActiveRecord::Base
  before_save :check_title

  def check_title
    throw(:abort) if title == &quot;abort&quot;
  end
end

topic = Topic.create(title: &quot;Test Title&quot;)
# #=> #<Topic title: &quot;Test Title&quot;>
topic.update_attribute!(:title, &quot;Another Title&quot;)
# #=> #<Topic title: &quot;Another Title&quot;>
topic.update_attribute!(:title, &quot;abort&quot;)
# raises ActiveRecord::RecordNotSaved"><pre><span>class</span> <span>Topic</span> &lt; <span>ActiveRecord</span>::<span>Base</span>
  <span>before_save</span> <span>:check_title</span>

  <span>def</span> <span>check_title</span>
    <span>throw</span><span>(</span><span>:abort</span><span>)</span> <span>if</span> <span>title</span> == <span>"abort"</span>
  <span>end</span>
<span>end</span>

<span>topic</span> <span>=</span> <span>Topic</span><span>.</span><span>create</span><span>(</span><span>title</span>: <span>"Test Title"</span><span>)</span>
<span># #=&gt; #&lt;Topic title: "Test Title"&gt;</span>
<span>topic</span><span>.</span><span>update_attribute!</span><span>(</span><span>:title</span><span>,</span> <span>"Another Title"</span><span>)</span>
<span># #=&gt; #&lt;Topic title: "Another Title"&gt;</span>
<span>topic</span><span>.</span><span>update_attribute!</span><span>(</span><span>:title</span><span>,</span> <span>"abort"</span><span>)</span>
<span># raises ActiveRecord::RecordNotSaved</span></pre></div>
<p><em>Drew Tempelmeyer</em></p>
</li>
<li>
<p>Avoid loading every record in <code>ActiveRecord::Relation#pretty_print</code></p>
<div data-snippet-clipboard-copy-content="# Before
pp Foo.all # Loads the whole table.

# After
pp Foo.all # Shows 10 items and an ellipsis."><pre><span># Before</span>
<span>pp</span> <span>Foo</span><span>.</span><span>all</span> <span># Loads the whole table.</span>

<span># After</span>
<span>pp</span> <span>Foo</span><span>.</span><span>all</span> <span># Shows 10 items and an ellipsis.</span></pre></div>
<p><em>Ulysse Buonomo</em></p>
</li>
<li>
<p>Change <code>QueryMethods#in_order_of</code> to drop records not listed in values.</p>
<p><code>in_order_of</code> now filters down to the values provided, to match the behavior of the <code>Enumerable</code> version.</p>
<p><em>Kevin Newton</em></p>
</li>
<li>
<p>Allow named expression indexes to be revertible.</p>
<p>Previously, the following code would raise an error in a reversible migration executed while rolling back, due to the index name not being used in the index removal.</p>
<div data-snippet-clipboard-copy-content="add_index(:settings, &quot;(data->'property')&quot;, using: :gin, name: :index_settings_data_property)"><pre><span>add_index</span><span>(</span><span>:settings</span><span>,</span> <span>"(data-&gt;'property')"</span><span>,</span> <span>using</span>: <span>:gin</span><span>,</span> <span>name</span>: <span>:index_settings_data_property</span><span>)</span></pre></div>
<p>Fixes <a data-error-text="Failed to load title" data-id="1010891915" data-permission-text="Title is private" data-url="https://github.com/rails/rails/issues/43331" data-hovercard-type="issue" data-hovercard-url="/rails/rails/issues/43331/hovercard" href="https://github.com/rails/rails/issues/43331">#43331</a>.</p>
<p><em>Oliver Günther</em></p>
</li>
<li>
<p>Fix incorrect argument in PostgreSQL structure dump tasks.</p>
<p>Updating the <code>--no-comment</code> argument added in Rails 7 to the correct <code>--no-comments</code> argument.</p>
<p><em>Alex Dent</em></p>
</li>
<li>
<p>Fix migration compatibility to create SQLite references/belongs_to column as integer when migration version is 6.0.</p>
<p>Reference/belongs_to in migrations with version 6.0 were creating columns as<br>
bigint instead of integer for the SQLite Adapter.</p>
<p><em>Marcelo Lauxen</em></p>
</li>
<li>
<p>Fix <code>QueryMethods#in_order_of</code> to handle empty order list.</p>
<div data-snippet-clipboard-copy-content="Post.in_order_of(:id, []).to_a"><pre><span>Post</span><span>.</span><span>in_order_of</span><span>(</span><span>:id</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>.</span><span>to_a</span></pre></div>
<p>Also more explicitly set the column as secondary order, so that any other<br>
value is still ordered.</p>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Fix quoting of column aliases generated by calculation methods.</p>
<p>Since the alias is derived from the table name, we can't assume the result<br>
is a valid identifier.</p>
<div data-snippet-clipboard-copy-content="class Test < ActiveRecord::Base
  self.table_name = '1abc'
end
Test.group(:id).count
# syntax error at or near &quot;1&quot; (ActiveRecord::StatementInvalid)
# LINE 1: SELECT COUNT(*) AS count_all, &quot;1abc&quot;.&quot;id&quot; AS 1abc_id FROM &quot;1..."><pre><span>class</span> <span>Test</span> &lt; <span>ActiveRecord</span>::<span>Base</span>
  <span>self</span><span>.</span><span>table_name</span> <span>=</span> <span>'1abc'</span>
<span>end</span>
<span>Test</span><span>.</span><span>group</span><span>(</span><span>:id</span><span>)</span><span>.</span><span>count</span>
<span># syntax error at or near "1" (ActiveRecord::StatementInvalid)</span>
<span># LINE 1: SELECT COUNT(*) AS count_all, "1abc"."id" AS 1abc_id FROM "1...</span></pre></div>
<p><em>Jean Boussier</em></p>
</li>
<li>
<p>Add <code>authenticate_by</code> when using <code>has_secure_password</code>.</p>
<p><code>authenticate_by</code> is intended to replace code like the following, which<br>
returns early when a user with a matching email is not found:</p>
<div data-snippet-clipboard-copy-content="User.find_by(email: &quot;...&quot;)&amp;.authenticate(&quot;...&quot;)"><pre><span>User</span><span>.</span><span>find_by</span><span>(</span><span>email</span>: <span>"..."</span><span>)</span>&amp;.<span>authenticate</span><span>(</span><span>"..."</span><span>)</span></pre></div>
<p>Such code is vulnerable to timing-based enumeration attacks, wherein an<br>
attacker can determine if a user account with a given email exists. After<br>
confirming that an account exists, the attacker can try passwords associated<br>
with that email address from other leaked databases, in case the user<br>
re-used a password across multiple sites (a common practice). Additionally,<br>
knowing an account email address allows the attacker to attempt a targeted<br>
phishing ("spear phishing") attack.</p>
<p><code>authenticate_by</code> addresses the vulnerability by taking the same amount of<br>
time regardless of whether a user with a matching email is found:</p>
<div data-snippet-clipboard-copy-content="User.authenticate_by(email: &quot;...&quot;, password: &quot;...&quot;)"><pre><span>User</span><span>.</span><span>authenticate_by</span><span>(</span><span>email</span>: <span>"..."</span><span>,</span> <span>password</span>: <span>"..."</span><span>)</span></pre></div>
<p><em>Jonathan Hefner</em></p>
</li>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Google's agreement with Samsung prevented Branch from launching: testimony (137 pts)]]></title>
            <link>https://www.bigtechontrial.com/p/google-is-clearly-buying-its-way</link>
            <guid>37786653</guid>
            <pubDate>Fri, 06 Oct 2023 02:43:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bigtechontrial.com/p/google-is-clearly-buying-its-way">https://www.bigtechontrial.com/p/google-is-clearly-buying-its-way</a>, See on <a href="https://news.ycombinator.com/item?id=37786653">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="auto"><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg" width="1456" height="971" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/fe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:971,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:2957218,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffe461c04-821d-4897-9a20-a9ec29ad945e_6210x4140.jpeg 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption>Former Samsung employee Patrick Chang (who is not either of the people in the photo above) testified about the barrier that Samsung’s default agreements with Google posed for Branch Metrics. (Photo by Kelly Sullivan/Getty Images for Samsung Electronics America).</figcaption></figure></div><p>When the founder and former CEO of Branch Metrics Alex Austin took the stand last Wednesday, we heard about Branch’s multi-year struggle to find homes for its app-search software. Austin testified that it felt like an “injustice” that his company was never able to launch an unrestricted version of its technology.</p><p>Today we heard another perspective of Branch’s story from former Samsung employee Patrick Chang, who had a special relationship with Branch: he played a leading role in Samsung’s investment in the young software company. As a Director at Samsung Next Ventures — the venture capital investment arm of Samsung Electronics — Chang was the employee who made the initial recommendation for Samsung to provide funding to Branch.</p><p><span>Before I cover Chang’s testimony, here’s an excerpt from </span><a href="https://www.bigtechontrial.com/p/a-tale-of-two-software-companies" rel="">my write-up on Austin's testimony</a><span> that may offer a helpful refresher on what we’ve already heard about Branch:</span></p><blockquote><p>At the beginning of his testimony, Austin described the initial mission that Branch focused on: building a search engine for apps that would allow users to pull up specific app pages from search queries through “deep linking” technology. For example, if you searched for “Pizza” on a Branch-integrated search bar, you would get results that brought you directly to pizza-related pages on apps you might own like Yelp or UberEats, as well as suggestions for apps that you hadn’t yet downloaded.</p><p>Austin thought this technology would create a win-win-win. Phone manufacturers and carriers could add another feature to their phones that would not only enhance the user experience but also create a new source of ad revenue, and app developers would get a new way to grow and distribute their apps outside of crowded app stores.</p><p>But Austin and his team soon discovered a familiar barrier: Google’s search engine default agreements. According to Austin, every single potential partner that he pitched Branch to turned it down for the same reason. Their contract with Google wouldn’t allow it. </p><p>Branch pivoted by developing an “offline” device search. This was apparently the only way that phone manufacturers like Samsung could implement Branch without violating their revenue share agreements (RSAs) with Google, which he understood to require that Google be the only “web-connected” search function pre-loaded onto a device.</p></blockquote><p>Chang’s testimony was more emotionally muted than Austin’s, but as a whole, it largely corroborated the story Austin told about the obstacles Branch faced in working around Samsung’s relationship with Google.</p><p><span>In his responses to the DOJ’s questioning, Chang at times seemed reticent about saying anything that would be damaging to Google. But the exhibits that DOJ introduced of Chang’s internal messages with Samsung colleagues highlighted Chang’s attempts to advocate for a “carve-out” in Samsung’s default search engine agreement with Google that would allow Samsung phones to integrate a more powerful version of Branch’s software.</span></p><p><span> (These exhibits have not yet been posted at the time of this article’s publication, but will likely be posted sometime soon on </span><a href="https://www.justice.gov/atr/us-and-plaintiff-states-v-google-llc-2020-trial-exhibits" rel="">the DOJ’s website</a><span>.)</span></p><p>In July 2020 — during the same period that Samsung executives were negotiating a new default agreement with Google — Chang wrote in one chat message: “The current agreement is looking like google will own all search on device….This will completely kill all potential for any branch search and other future services….[A]ll this will be killed if this google agreement happens.”</p><p>As the negotiations continued, Chang wrote a few weeks later: “This is probably Google being aware of Branch as you mentioned on their call and attempting to kill all of Branch’s attempts.”</p><p>Chang’s boss David Eun responded: “Google is clearly buying its way to squelch competitors….Outside of a potential antitrust action, I don't see Samsung refusing these terms.”</p><p>The DOJ filed its complaint against Google in this case on October 20, 2020. A couple days later, another Samsung employee suggested to Chang that the lawsuit might cause Google to loosen its interpretations of its contracts with Samsung.</p><p>Chang responded: “Actually the COMPLETE opposite. Google just did a f*ck you to Samsung. After the doj filings, they submitted a new redline that went backwards om all negotiations with Samsung and was even more aggressive in being restrictive….They basically don’t feel the doj has a real case.”</p><p>As Google’s cross examination of Chang made clear, there were differing opinions about Branch amongst his colleagues at Samsung and partnering phone carriers. Some felt that Branch would cannibalize search revenues generated from Google and others cited concerns about low user engagement with the restricted version of Branch that was integrated into Samsung phones. But Chang’s messages indicated that he believed Branch offered a complimentary product that didn’t compete with Google search and offered a path to higher overall revenue. </p><p>Chang’s vision of integrating a more powerful version of Branch into Samsung phones ultimately never came to fruition and he left Samsung Next in 2021 to start his own venture fund.</p><p><strong>The Cellophane Fallacy</strong></p><p>This afternoon we also heard the start of expert witness testimony from MIT economist Michael Whinston. Whinston’s testimony is being broken up into two separate weeks of the trial, but today he testified to his opinion that the three markets alleged by the DOJ — the markets for general search services, general search text advertising, and search advertising — are all relevant antitrust markets.</p><p>The DOJ’s direct examination walked Whinston through the slide deck he prepared as Whinston described the various methodologies he relied on to reach his conclusion about the relevant antitrust markets. This included reviewing previous testimony in this trial as well as internal Google documents.</p><p><span>What seemed to be of greatest interest to Judge Mehta based on his questions was Whinston’s discussion of the “cellophane fallacy”, which refers to the flawed reasoning the Supreme Court relied on in the </span><a href="https://supreme.justia.com/cases/federal/us/351/377/" rel="">1956 </a><em><a href="https://supreme.justia.com/cases/federal/us/351/377/" rel="">Du Pont &amp; Co.</a></em><a href="https://supreme.justia.com/cases/federal/us/351/377/" rel=""> monopoly case</a><span>. </span></p><p><span>Whinston didn’t describe the cellophane fallacy in the exact same terms, but </span><a href="https://en.wikipedia.org/wiki/Cellophane_paradox" rel="">Wikipedia provides</a><span> a helpful distillation of the concept: </span></p><blockquote><p><span>In research on the du Pont company arising from his PhD dissertation, Willard F. Mueller and co-author </span><a href="https://en.wikipedia.org/wiki/George_W._Stocking,_Sr." rel="">George W. Stocking, Sr.</a><span> pointed out the error of mistaking a monopolist's inability to exercise </span><a href="https://en.wikipedia.org/wiki/Market_power" rel="">market power</a><span> by raising price above the </span><em>current</em><span> price for an inability to have already exercised market power by raising price significantly above the </span><em>competitive</em><span> price. Courts that use a monopolized product's elevated market price will typically misconstrue a completed anti-competitive act as a lack of market power. Had the Supreme Court considered the substitutability of other wrappings at cellophane's competitive price, the sales of other wrappings would have been much lower; du Pont might very well have been found guilty of monopolizing the market for flexible wrappings.</span></p></blockquote><p>Whinston explained the cellophane fallacy to make the point that the fact that there may be some substitution away from Google’s products is not inconsistent with it being a monopolist.</p><p>Tomorrow, Whinston is expected to continue testifying about his additional conclusion that Google possesses substantial market power protected by barriers to entry in each of the three relevant markets. Google will not cross-examine Whinston until after he completes the second portion of his direct examination testimony later in the trial.</p><p><span>Fridays are only a half-day for the trial so I might not write an article tomorrow, but I’ll post some updates on </span><a href="https://twitter.com/BigTechOnTrial" rel="">the Big Tech on Trial X/Twitter account</a><span>. The trial is scheduled to be off on Monday before resuming on Tuesday.</span></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ollama is now available as an official Docker image (183 pts)]]></title>
            <link>https://ollama.ai/blog/ollama-is-now-available-as-an-official-docker-image</link>
            <guid>37786525</guid>
            <pubDate>Fri, 06 Oct 2023 02:18:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ollama.ai/blog/ollama-is-now-available-as-an-official-docker-image">https://ollama.ai/blog/ollama-is-now-available-as-an-official-docker-image</a>, See on <a href="https://news.ycombinator.com/item?id=37786525">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
        <p><img src="https://github.com/jmorganca/ollama/assets/3325447/080f3a72-e2fd-4741-8070-ae79a06f943f">
</p>

<h2>Ollama is now available as an official Docker image</h2>

<p>We are excited to share that Ollama is now available as an official Docker sponsored <a href="https://hub.docker.com/r/ollama/ollama">open-source image</a>, making it simpler to get up and running with large language models using Docker containers.</p>

<p>With Ollama, all your interactions with large language models happen locally without sending private data to third-party services.</p>

<h2>On the Mac</h2>

<p>Ollama handles running the model with GPU acceleration. It provides both a simple CLI as well as a REST API for interacting with your applications.</p>

<p>To get started, simply <a href="https://ollama.ai/download">download</a> and install Ollama.</p>

<p>We recommend running Ollama alongside Docker Desktop for macOS in order for Ollama to enable GPU acceleration for models.</p>

<h2>On Linux</h2>

<p>Ollama can run with GPU acceleration inside Docker containers for Nvidia GPUs.</p>

<p>To get started using the Docker image, please use the commands below.</p>

<h4>CPU only</h4>

<pre><code>docker run -d -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama
</code></pre>

<h4>Nvidia GPU</h4>

<ol>
<li>Install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#installation">Nvidia container toolkit</a>.</li>
<li>Run Ollama inside a Docker container</li>
</ol>

<pre><code>docker run -d --gpus=all -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama
</code></pre>

<h3>Run a model</h3>

<p>Now you can run a model like Llama 2 inside the container.</p>

<pre><code>docker exec -it ollama ollama run llama2
</code></pre>

<p>More models can be found on the <a href="https://ollama.ai/library">Ollama library</a>.</p>

<p>Join Ollama’s <a href="https://discord.gg/ollama">Discord</a> to chat with other community members, maintainers, and contributors.</p>

<p>Follow <a href="https://twitter.com/ollama_ai">Ollama on Twitter</a> for updates.</p>

      </section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Gboard Hat Version (196 pts)]]></title>
            <link>https://landing.google.co.jp/caps/</link>
            <guid>37785920</guid>
            <pubDate>Fri, 06 Oct 2023 00:27:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://landing.google.co.jp/caps/">https://landing.google.co.jp/caps/</a>, See on <a href="https://news.ycombinator.com/item?id=37785920">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      <div>
          <!-- prettier-ignore -->
          <p>誰かに<wbr>思いを<wbr>伝える<wbr>ために<wbr>筆を<wbr>走らせ、<wbr>自分の<wbr>ことを<wbr>より<wbr>知る<wbr>ために<wbr>文字を<wbr>紡ぐ。<wbr>文字入力は<wbr>新しい<wbr>世界と<wbr>自分を<wbr>知る<wbr>冒険だ。</p>

          <!-- prettier-ignore -->
          <p>あなたと<wbr>一体となる<wbr>キーボード、<wbr>Gboard 帽バージョン。</p>
        </div>
      <p>
        <iframe title="YouTube video player" src="https://www.youtube-nocookie.com/embed/6vib77CUxNM" frameborder="0" allowfullscreen="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
      </p>
      <section>
        <h2>
          <ruby>Wearable<rp>(</rp><rt>ウェアラ<b>ボー</b></rt><rp>)</rp></ruby>
          で
          <ruby>Portable<rp>(</rp><rt>ポータ<b>ボー</b></rt><rp>)</rp></ruby>
          で
          <ruby>Fashionable<rp>(</rp><rt>ファッショナ<b>ボー</b></rt><rp>)</rp></ruby>
          な
          <ruby>Keyboard<rp>(</rp><rt>キー<b>ボー</b>ド</rt><rp>)</rp></ruby>
        </h2>
        <p>いつも<wbr>使う<wbr>キーボードだから<wbr>こそ、<wbr>常に<wbr>おしゃれに<wbr>持ち歩きたい。<wbr>Gboard 帽バージョンなら、<wbr>日々の<wbr>ファッションに<wbr>取り入れるだけで、<wbr>思い立ったら<wbr>すぐ<wbr>文字入力できます。</p>
        <picture>
          <source srcset="
              https://lh3.googleusercontent.com/kNcDR3TqUJvZAvcLLVgA_yseoFVcIzaY9OKaWVcuotQ4PFD-1_jnpx9WVqzr0-BTPiAOC2uE6RXx6_tBkP8Vd4nK66gfD7QRFBR7F6jW5jrscm_jZuA=w1248-rw 1248w,
              https://lh3.googleusercontent.com/kNcDR3TqUJvZAvcLLVgA_yseoFVcIzaY9OKaWVcuotQ4PFD-1_jnpx9WVqzr0-BTPiAOC2uE6RXx6_tBkP8Vd4nK66gfD7QRFBR7F6jW5jrscm_jZuA=w2492-rw 2492w
            " type="image/webp">
          <source srcset="
              https://lh3.googleusercontent.com/kNcDR3TqUJvZAvcLLVgA_yseoFVcIzaY9OKaWVcuotQ4PFD-1_jnpx9WVqzr0-BTPiAOC2uE6RXx6_tBkP8Vd4nK66gfD7QRFBR7F6jW5jrscm_jZuA=w1248-rj 1248w,
              https://lh3.googleusercontent.com/kNcDR3TqUJvZAvcLLVgA_yseoFVcIzaY9OKaWVcuotQ4PFD-1_jnpx9WVqzr0-BTPiAOC2uE6RXx6_tBkP8Vd4nK66gfD7QRFBR7F6jW5jrscm_jZuA=w2492-rj 2492w
            " type="image/jpeg">
          <img src="https://lh3.googleusercontent.com/kNcDR3TqUJvZAvcLLVgA_yseoFVcIzaY9OKaWVcuotQ4PFD-1_jnpx9WVqzr0-BTPiAOC2uE6RXx6_tBkP8Vd4nK66gfD7QRFBR7F6jW5jrscm_jZuA=w1248" fetchpriority="auto" alt="Gboard 帽バージョンを使って文字を入力している様子" width="2492" height="1661">
        </picture>
      </section>
      <section>
        <!-- prettier-ignore -->
        <h2>ひとつの<wbr>帽子、<wbr>無限の<wbr>可能性</h2>
        <p>Gboard 帽バージョンなら、<wbr>もう<wbr>キーの<wbr>場所を<wbr>覚える<wbr>必要は<wbr>ありません。<wbr>頭の<wbr>方向で<wbr>文字を<wbr>選択、<wbr>頭を<wbr>押して<wbr>文字を<wbr>確定する<wbr> A<span>tama</span> I<span>nput</span> 機構を<wbr>採用しています。</p>
        
      </section>
      <section id="variation">
        <!-- prettier-ignore -->
        <h2>いつも<wbr>使うから<wbr>こそ<wbr>おしゃれしたい</h2>
        <p>普段<wbr>使いの<wbr>帽子と<wbr>しても<wbr>ファッショナボーに<wbr>お使いいただけるよう、<wbr>豊富な<wbr>バリエーションを<wbr>ご用意しています。</p>
        <picture>
          <source srcset="
              https://lh3.googleusercontent.com/9hWktV1GDCbPyjVgH0Eg2irYIfQzV908L757Pfn4YdZoe3Ll0zjq5jyqUd9ZTy3dTPvCXxzWKYzxEqWRhIBsz2DetgQveRB7s6f1Vi8kUyWxSCwNdw=w1248-rw 1248w,
              https://lh3.googleusercontent.com/9hWktV1GDCbPyjVgH0Eg2irYIfQzV908L757Pfn4YdZoe3Ll0zjq5jyqUd9ZTy3dTPvCXxzWKYzxEqWRhIBsz2DetgQveRB7s6f1Vi8kUyWxSCwNdw=w2492-rw 2492w
            " type="image/webp">
          <source srcset="
              https://lh3.googleusercontent.com/9hWktV1GDCbPyjVgH0Eg2irYIfQzV908L757Pfn4YdZoe3Ll0zjq5jyqUd9ZTy3dTPvCXxzWKYzxEqWRhIBsz2DetgQveRB7s6f1Vi8kUyWxSCwNdw=w1248-rj 1248w,
              https://lh3.googleusercontent.com/9hWktV1GDCbPyjVgH0Eg2irYIfQzV908L757Pfn4YdZoe3Ll0zjq5jyqUd9ZTy3dTPvCXxzWKYzxEqWRhIBsz2DetgQveRB7s6f1Vi8kUyWxSCwNdw=w2492-rj 2492w
            " type="image/jpeg">
          <img src="https://lh3.googleusercontent.com/9hWktV1GDCbPyjVgH0Eg2irYIfQzV908L757Pfn4YdZoe3Ll0zjq5jyqUd9ZTy3dTPvCXxzWKYzxEqWRhIBsz2DetgQveRB7s6f1Vi8kUyWxSCwNdw=w1248" fetchpriority="auto" alt="さまざまな形と色の帽子型キーボード" width="2492" height="1402">
        </picture>
        <p>Gboard 帽バージョンを<wbr>いつでも<wbr>持ち歩けるよう、<wbr>壁紙を<wbr>ご用意しました。<wbr>お使いの<wbr>端末の<wbr>画面に<wbr>合わせた<wbr>画像を<wbr>ダウンロードできます。</p>
        
      </section>
      <section id="diy">
        <!-- prettier-ignore -->
        <h2>あなただけの<wbr>帽子型キーボードを<wbr>つくる</h2>
        <p>Gboard 帽バージョンは<wbr>みなさんの<wbr>手で<wbr>制作できる<wbr> DIY デバイスです。</p>
        <div>
          <div>
            <picture>
              <source srcset="
                  https://lh3.googleusercontent.com/4Ty1Irbi_SALfoYlFd_kCrE5DNOhUYBt1nA-MOKC-AQICsNbLedgNjMTohgJ-J1atu-ySLAV8HSXbG_aGPidJltl9w5tt_jdXhIwkzNsFcybez7-AKM=w1232-rw
                " type="image/webp">
              <source srcset="
                  https://lh3.googleusercontent.com/4Ty1Irbi_SALfoYlFd_kCrE5DNOhUYBt1nA-MOKC-AQICsNbLedgNjMTohgJ-J1atu-ySLAV8HSXbG_aGPidJltl9w5tt_jdXhIwkzNsFcybez7-AKM=w1232-rj
                " type="image/jpeg">
              <img src="https://lh3.googleusercontent.com/4Ty1Irbi_SALfoYlFd_kCrE5DNOhUYBt1nA-MOKC-AQICsNbLedgNjMTohgJ-J1atu-ySLAV8HSXbG_aGPidJltl9w5tt_jdXhIwkzNsFcybez7-AKM=w1232" fetchpriority="auto" alt="電子工作で帽子型キーボードを制作する様子" width="616" height="411">
            </picture>
            <h3>
              電子工作でつくる
            </h3>

            <!-- prettier-ignore -->
            <p>ご家庭の<wbr> 3D プリンターを<wbr>使って<wbr>制作する<wbr>本格派バージョンです。<wbr>ワンキー仕様の<wbr>文字入力を<wbr>体感したい<wbr>あなたに<wbr>ぴったりです。</p>
            <p><a href="https://github.com/google/mozc-devices/tree/master/mozc-caps" target="_blank" rel="noopener noreferrer">
              GitHub で設計書を見る
            </a>
          </p></div>
          <div>
            <picture>
              <source srcset="
                  https://lh3.googleusercontent.com/off3LhymuSpLRbtqNPSl4DGSZzZusQYHjjFIB20jf2vZ0rke98NexwBqJvEfloUGGOAJW-5treDxw0eKXNuvkzq_BdATU6iVuEJ7s1EguuJwieBlycH7=w1232-rw
                " type="image/webp">
              <source srcset="
                  https://lh3.googleusercontent.com/off3LhymuSpLRbtqNPSl4DGSZzZusQYHjjFIB20jf2vZ0rke98NexwBqJvEfloUGGOAJW-5treDxw0eKXNuvkzq_BdATU6iVuEJ7s1EguuJwieBlycH7=w1232-rj
                " type="image/jpeg">
              <img src="https://lh3.googleusercontent.com/off3LhymuSpLRbtqNPSl4DGSZzZusQYHjjFIB20jf2vZ0rke98NexwBqJvEfloUGGOAJW-5treDxw0eKXNuvkzq_BdATU6iVuEJ7s1EguuJwieBlycH7=w1232" fetchpriority="auto" alt="ダンボールで帽子型キーボードを制作する様子" width="616" height="411">
            </picture>
            <h3>
              ダンボールでつくる
            </h3>

            <!-- prettier-ignore -->
            <p>ダンボールと<wbr>ハサミで<wbr>つくる<wbr>お手軽バージョンです。<wbr>文字入力は<wbr>できませんが、<wbr>ファッショナボーな<wbr>気分を<wbr>味わえます。</p>
            <p><a href="https://landing.google.co.jp/caps/static/assets/gboard_caps_cardboard.pdf" target="_blank" rel="noopener noreferrer">
              制作ガイドを見る
            </a>
          </p></div>
        </div>
      </section>
      <div id="specs">
          <h2>
            仕様
          </h2>
          <div>
            <dl>
              <dt>センサー</dt>
              <dd>6 軸慣性センサー</dd>
              <dt>スイッチ</dt>
              <dd>1 軸プッシュスイッチ</dd>
              <dt>バッテリー</dt>
              <dd>3.7V 120mAh</dd>
              <dt>充電</dt>
              <dd>USB-C</dd>
              <dt>サイズ</dt>
              <dd>フリーサイズ（ユニセックス）</dd>
              <dt>キー数</dt>
              <dd>1</dd>
            </dl>
            <dl>
              <dt>キー荷重</dt>
              <dd>輪ゴムによる</dd>
              <dt>ストローク深さ</dt>
              <dd>2cm</dd>
              <dt>インターフェイス</dt>
              <dd>Bluetooth</dd>
              <dt>オプション</dt>
              <dd>UV カット</dd>
              <dt>付属品</dt>
              <dd>あごひも（CAPS LOCK）</dd>
              <dt>色</dt>
              <dd>ベージュ、ネイビー、その他いろいろ</dd>
            </dl>
          </div>
        </div>
      <div id="download">
          <!-- prettier-ignore -->
          
          <p>いままでの<wbr>盤面上の<wbr>文字入力に<wbr>慣れ親しんだ<wbr>方には、<wbr>通常版の<wbr> Gboard も<wbr>ご用意しております。<wbr>かわいい絵文字を<wbr>組み合わせて<wbr>遊べる<wbr> Emoji Kitchen (Android 版の<wbr>み) に<wbr>加え、<wbr>音声入力や<wbr>翻訳機能など<wbr> Google の<wbr>各種サービスと<wbr>連携した<wbr>快適な<wbr>入力体験を<wbr>提供します。</p>
          
        </div>
      <section id="faq">
        <h2>
          よくある質問
        </h2>
        <div>
          <dl>
            <!-- prettier-ignore -->
            <dt>今日は<wbr> 10 月 1 日ですよね？</dt>

            <!-- prettier-ignore -->
            <dd>は<wbr>い、<wbr>今日は<wbr> 10 月 1 日です！</dd>

            <!-- prettier-ignore -->
            <dt>今日は<wbr>なんの<wbr>日なんですか？</dt>

            <!-- prettier-ignore -->
            <dd>キーボードの<wbr>発表に<wbr>ふさわしい<wbr>日を<wbr>検討していた際、<wbr>101 キーボードと<wbr>呼ばれる<wbr> 101 個の<wbr>キーが<wbr>ある<wbr>タイプが<wbr>よく<wbr>使われている<wbr>ことに<wbr>気が<wbr>付きました。<wbr>そこで、<wbr>101 キーボードに<wbr>ちなんで<wbr> 10 月 1 日に<wbr>公開しました。</dd>

            <!-- prettier-ignore -->
            <dt>どこで<wbr>購入できますか？</dt>

            <!-- prettier-ignore -->
            <dd>発売予定は<wbr>ありません。<wbr>同様の<wbr>デバイスを<wbr>自作していただける<wbr>設計図を<wbr>オープンソースと<wbr>して<a href="https://github.com/google/mozc-devices/tree/master/mozc-caps" target="_blank" rel="noopener noreferrer"><wbr>公開</a>しています。<wbr>また、<wbr>キーキャップを<wbr>試着したい<wbr>方へは、<wbr>ダンボールと<wbr>ハサミで<wbr>つくる<a href="https://landing.google.co.jp/caps/static/assets/gboard_caps_cardboard.pdf" target="_blank" rel="noopener noreferrer"><wbr>製作ガイド</a>も<wbr>ご用意しました。</dd>

            <!-- prettier-ignore -->
            <dt>前回も<wbr>「<a href="https://g.co/____" target="_blank" rel="noopener noreferrer">ぼう<wbr>バージョン</a>」では<wbr>ありませんでした？</dt>

            <!-- prettier-ignore -->
            <dd>帽子なだけに<wbr>被ってしまいましたね！</dd>

            <!-- prettier-ignore -->
            <dt>はっと<wbr>するような<wbr>デバイスですね。</dt>

            <!-- prettier-ignore -->
            <dd>きぼうした<wbr>通りの<wbr>設計に<wbr>なりました。</dd>
          </dl>
        </div>
      </section>
    </div></div>]]></description>
        </item>
    </channel>
</rss>