<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Wed, 17 Jan 2024 20:00:05 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[John Lasseter drew the BSD daemon logo (199 pts)]]></title>
            <link>https://www.jacobelder.com/2024/01/17/director-of-toy-story-also-drew-bsd-daemon.html</link>
            <guid>39030991</guid>
            <pubDate>Wed, 17 Jan 2024 17:49:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.jacobelder.com/2024/01/17/director-of-toy-story-also-drew-bsd-daemon.html">https://www.jacobelder.com/2024/01/17/director-of-toy-story-also-drew-bsd-daemon.html</a>, See on <a href="https://news.ycombinator.com/item?id=39030991">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <figure>
    <img src="https://www.jacobelder.com/assets/IMG_0045.jpeg" alt="Full stack of BSD 4.3 bound manuals">
    <figcaption>
        Full stack of BSD 4.3 bound manuals
    </figcaption>
</figure>

<p>In my teens and early 20s I was obsessed with the history of computing and the internet. I still am, but other obessions have reduced the relative weight of this interest. It was during those years that I made a regular pilgrimage to the <a href="http://w1mx.mit.edu/flea-at-mit/">MIT Flea Market</a>. I bought many of the components for my first computers there. I also found this important piece of computing history, a full set of 4.3 BSD manuals, Virtual VAX-11 Version from April, 1986.</p>

<p>The first thing I noticed was that this set includes two identical copies of the index. It was a multi-user system, and having two copies of the index would have come in handy!</p>

<blockquote>
  <p>The index was prepared using an automatic indexing program written at <a href="https://en.wikipedia.org/wiki/Thinking_Machines_Corporation">Thinking Machines Corporation</a>, Cambridge, MA.</p>
</blockquote>

<figure>
    <img src="https://www.jacobelder.com/assets/IMG_0049.jpeg" alt="First page of index">
    <figcaption>
        First page of index
    </figcaption>
</figure>

<p>The rest of the books all contain the familiar <code>nroff</code>-formatted manual pages, though some are much shorter than the ones you’ll find today in a modern UNIX-decendent’s <code>man</code> program.</p>

<figure>
    <img src="https://www.jacobelder.com/assets/IMG_0048.jpeg" alt="Opened to a random page. I assumed <code>file</code> was much newer than this.">
    <figcaption>
        Opened to a random page. I assumed <code>file</code> was much newer than this.
    </figcaption>
</figure>

<p>The cover of each book features the familiar “Beastie” <a href="https://en.wikipedia.org/wiki/BSD_Daemon">Daemon</a> mascot with trident, representing “forking” of processes.</p>

<figure>
    <img src="https://www.jacobelder.com/assets/IMG_0046.jpeg" alt="Cover of main index">
    <figcaption>
        Cover of main index
    </figcaption>
</figure>

<p>Inside the front cover reveals a really interesting connection between early UNIX systems and modern culture.</p>

<blockquote>
  <p>Cover design by John Lassetter, Lucasfilm, Ltd.</p>
</blockquote>

<p>That’s the same <a href="https://www.imdb.com/name/nm0005124/">John Lassetter</a> who would later write and direct “Toy Story,” “A Bug’s Life,” and “Toy Story 2,” and “Cars,” and “Cars 2.” These books have a publishing date of April, 1986, and Pixar was spun off from Lucasfilm in February, so John was already there by that point. Lassetter wasn’t the first to draw this, but his version became the most popular.</p>

<figure>
    <img src="https://www.jacobelder.com/assets/IMG_0047.jpeg" alt="Inside front cover of main index">
    <figcaption>
        Inside front cover of main index
    </figcaption>
</figure>

  </div>

</article>



      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Hacking into a Toyota insurance company by exploiting their premium calculator (236 pts)]]></title>
            <link>https://eaton-works.com/2024/01/17/ttibi-email-hack/</link>
            <guid>39030302</guid>
            <pubDate>Wed, 17 Jan 2024 16:57:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://eaton-works.com/2024/01/17/ttibi-email-hack/">https://eaton-works.com/2024/01/17/ttibi-email-hack/</a>, See on <a href="https://news.ycombinator.com/item?id=39030302">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>
    
    <div>
        <picture><source type="image/avif" srcset="https://eaton-works.com/assets/images/ew-logo-4circle-48.avif?cb=8d6f7828 48w"><source type="image/webp" srcset="https://eaton-works.com/assets/images/ew-logo-4circle-48.webp?cb=7b24baa4 48w"><img alt="" loading="lazy" decoding="async" src="https://eaton-works.com/assets/images/ew-logo-4circle-48.png?cb=60093299" width="24"></picture>
        <p><span title="Author: Eaton">Eaton</span>
        <span>•</span>
        <time title="Published: Wednesday, January 17, 2024 at 11:25:39 AM Eastern Standard Time" datetime="2024-01-17T16:25:39Z">Jan 17, 2024</time>
    </p></div>
    
    
    
<h2><strong>Key Points / Summary</strong></h2>



<ul>
<li>An Eicher Motors premium calculator website on a Toyota Tsusho Insurance Broker India subdomain exposed Microsoft corporate cloud credentials.</li>



<li>The email sending API returned sending logs to the client, which contained the email account’s password.</li>



<li>The password could be used to log into the “noreplyeicher@ttibi.co.in” Microsoft email account. No two-factor authentication was enabled on the account.</li>



<li>The email account had a record of everything they have ever sent to their customers, which is: <strong>657k emails (~25 GB) containing things like customer information, insurance policy PDFs, password reset links, OTPs, and much more.</strong></li>



<li>Other Microsoft cloud resources were also accessible, including but not limited to the corporate directory, SharePoint, and Teams.</li>



<li>Toyota Tsusho Insurance Broker India took down the vulnerable API more than 2 months later after my report, but still have not changed the email account’s password.</li>
</ul>







<p>New year, new automaker industry hack! As part of my automaker research projects last summer, Eicher Motors made its way up my list to investigate. In my efforts to find interesting exploits on Eicher Motors systems, I accidentally ended up compromising a different company in the process: Toyota Tsusho Insurance Broker India (“TTIBI”). A perfect storm of multiple issues culminated in me gaining control over the “noreplyeicher@ttibi.co.in” Microsoft email account, which not only had a record of everything they have ever sent to their customers, but also provided a foothold into their Microsoft cloud.</p>



<h2><strong>Toyota Tsusho Insurance Broker India and Eicher Motors</strong></h2>



<figure><img src="https://eaton-works.com/cdn-cgi/imagedelivery/VwwCqBIYNXeyNQwEQ8uyVQ/66cbbede-4182-43e8-e5b0-cbeafedf0f00/full" alt=""></figure>



<p>Everyone knows Toyota, but not everyone knows about <a href="https://ttibi.co.in/" target="_blank" rel="noreferrer noopener">Toyota Tsusho Insurance Broker India (“TTIBI”)</a>. Toyota is comprised of a vast network of different companies. TTIBI is under the Toyota Tsusho Insurance Management Corporation in Japan. TTIBI was established in 2008 and is “<a href="https://ttibi.co.in/?q=company" target="_blank" rel="noreferrer noopener">a leading Insurance Broker across India</a>“.</p>



<p><a href="https://eicher.in/" target="_blank" rel="noreferrer noopener">Eicher Motors</a> is one of India’s leading automakers. They manufacture motorcycles under Royal Enfield Motors and commercial vehicles under VE Commercial Vehicles (VECV), which is a joint venture with Volvo Group.</p>



<p>Both companies have some type of insurance partnership because there is a <a href="https://eicher.ttibi.co.in/" target="_blank" rel="noreferrer noopener">dedicated Eicher subdomain</a> on the TTIBI site.</p>



<h2><strong>The Premium Calculator</strong></h2>



<p>While analyzing the <a href="https://play.google.com/store/apps/details?id=in.here.volvo.android" target="_blank" rel="noreferrer noopener">MY EICHER</a> Android app, I came across an inconspicuous URL inside an API interface Java class that was a link to a premium calculator:</p>



<figure><img src="https://eaton-works.com/cdn-cgi/imagedelivery/VwwCqBIYNXeyNQwEQ8uyVQ/e546e650-f76f-4cc6-10d5-1e529f1fc900/full" alt=""></figure>



<p>Visiting the link in a browser revealed it:</p>



<figure><img src="https://eaton-works.com/cdn-cgi/imagedelivery/VwwCqBIYNXeyNQwEQ8uyVQ/ec96c3c3-a0aa-4463-1cbf-372b351d0400/full" alt=""></figure>



<p>Looking at the source code of the website (literally right-click, view source), I quickly found some very interesting code:</p>



<figure><img src="https://eaton-works.com/cdn-cgi/imagedelivery/VwwCqBIYNXeyNQwEQ8uyVQ/8876743e-b45a-489c-074b-83f2e0c50000/full" alt=""></figure>



<p>This caught my eye because this was a client-side email sending mechanism. If it worked, I could send a email with any subject &amp; body to anyone, and it would come from a genuine Eicher email address. However, seeing the Bearer Authorization put a damper on my excitement because it was clear you needed to be logged in somehow to use this API. Despite that, I decided to try crafting the API request to see what would happen. I was expecting it to come back with “401 – Unauthorized”, but what actually came back surprised me.</p>



<p>Not only did the email <a href="https://eaton-works.com/cdn-cgi/imagedelivery/VwwCqBIYNXeyNQwEQ8uyVQ/74c92be7-f696-462c-c703-09908df3c400/full" target="_blank" rel="noreferrer noopener">successfully send</a>, It came back with a server error that revealed an email sending log:</p>



<figure><img src="https://eaton-works.com/cdn-cgi/imagedelivery/VwwCqBIYNXeyNQwEQ8uyVQ/8bb2c241-9205-466a-9048-8a4d2730a400/full" alt=""></figure>



<p>If you look closely, you can find the base64 encoded password. Being able to abuse this send email function was serious enough, but the leak of the email account password elevated this to a new level of severity.</p>



<h2><strong>The email account</strong></h2>



<p>This isn’t just any email account – it’s a noreply email account. noreply accounts are generally used for sending automated emails to customers. For example, when you reset a password, the link is likely to come from a noreply account. In many cases it can just be an alias on SendGrid, Postmark, etc, but it can also be an actual account that you can log in to. The noreply account could be the most important account in an organization because it could potentially have a record of everything they have ever sent to customers. In TTIBI’s case, that is exactly what it is and the amount of information revealed is enormous:</p>







<h2><strong>Exploring the impact</strong></h2>



<p>The email account is jam packed with personal/private information. To start, you can see all the insurance policies sent to customers – here’s a few examples from different insurance companies:</p>











<p>You could also view one-time-passwords (OTPs) and password reset links. With this, you could easily take over someone’s insurance account.</p>







<p>And you could of course access resources on their Microsoft cloud, such as the corporate directory, SharePoint, and Teams:</p>







<h2><strong>A perfect storm of security issues</strong></h2>



<p>The vulnerability was so severe because it was enabled by 5 unfortunate security issues/oversights. Developers and IT administrators should take note of all of these and make sure similar issues do not exist in your organization.</p>



<h3><strong>Issue #1: Client-side sending email mechanism</strong></h3>



<p>Don’t create an email sending function that the client has control over. Someone malicious can abuse it to send bad emails from your genuine account, leading to email reputation loss and phishing.</p>



<h3><strong>Issue #2: Missing API authentication</strong></h3>



<p>It looks like the frontend developer knew the email sending API should have been authenticated, but the backend developer missed the memo. If the server had actually checked the token, it might have entirely stopped this exploit.</p>



<h3><strong>Issue #3: Leaky API response</strong></h3>



<p>If something goes wrong when processing an API request, don’t give too much information back to the client. In this case a password managed to leak out, which is one of the worst things that could happen.</p>



<h3><strong>Issue #4: No two-factor authentication</strong></h3>



<p>Logging into the Microsoft account was surprisingly easy. There was no two-factor authentication set up or any other login verification prompts. If there was, it probably would not have been possible for me to successfully login.</p>



<h3><strong>Issue #5: Email retention</strong></h3>



<p>The final issue is that all emails the account had ever sent/received were retained, making it easy to access substantial amounts of customer information. Retention policies vary by industry, but this is a great example where having a policy in place could have softened the customer data exposure impact.</p>



<h2><strong>Password remains unchanged</strong></h2>



<p>More than 5 months later, TTIBI still have not changed the password of the email account despite being aware of the vulnerability. I checked it again today and I am still able to log in (<a href="https://eaton-works.com/cdn-cgi/imagedelivery/VwwCqBIYNXeyNQwEQ8uyVQ/fb9faf44-82d6-46d3-dafc-b7bbcb147a00/full" target="_blank" rel="noreferrer noopener">proof</a>). If I were them, I would not want a random stranger having access to their corporate cloud for 5 months. This is very disappointing, and I hope they improve their security posture so their customers’ data doesn’t leak out.</p>



<p>As an aside, I’m a little surprised that they weren’t alerted by Microsoft in some way to the unusual login. Or maybe they were, and the alert was ignored or not seen.</p>



<h2><strong>Timeline</strong></h2>



<p>TTIBI is not covered under <a href="https://hackerone.com/toyota?view_policy=true" target="_blank" rel="noreferrer noopener">Toyota’s HackerOne vulnerability disclosure program</a>, which is a shame because the team behind that has been quick to resolve <a href="https://eaton-works.com/2023/02/06/toyota-gspims-hack/" target="_blank" rel="noreferrer noopener">several</a> <a href="https://eaton-works.com/2023/03/06/toyota-c360-hack/" target="_blank" rel="noreferrer noopener">issues</a> I have reported to them in the past. I reported the issue to India’s <a href="https://www.cert-in.org.in/">CERT-In</a> instead.</p>



<ul>
<li><strong>August 7, 2023:</strong> I send a comprehensive email to CERT-In to report the vulnerability.</li>



<li><strong>August 8, 2023:</strong> Response received from CERT-In. A case ID was issued, and they stated they will reach out to TTIBI.</li>



<li><strong>September 1, 2023:</strong> I ask for an update.</li>



<li><strong>September 6, 2023:</strong> Response received confirming they reported the vulnerability to TTIBI and will share further updates as they receive them.</li>



<li><strong>October 8, 2023:</strong> I noticed the affected website was taken offline. However, the vulnerable API was not. I inform CERT-In.</li>



<li><strong>October 11, 2023:</strong> Response received confirming TTIBI has fixed the vulnerability. I check this and confirm the vulnerability is <strong>not</strong> fixed.</li>



<li><strong>October 18, 2023:</strong> I noticed the vulnerability is now fixed – the email sending API now requires authentication. I ask CERT-In if TTIBI can offer a bug bounty reward.</li>
</ul>



<p>Everything after October 18 is a back-and-forth between CERT-In and me trying to determine if there would be a bug bounty reward. TTIBI never responded to the question, so I decided to close the case on December 22 and CERT-In sent me a nice <a href="https://eaton-works.com/cdn-cgi/imagedelivery/VwwCqBIYNXeyNQwEQ8uyVQ/9bb02623-f19e-4223-d8e9-005c3d32a100/full" target="_blank" rel="noreferrer noopener">appreciation letter</a>.</p>

</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[AlphaGeometry: An Olympiad-level AI system for geometry (173 pts)]]></title>
            <link>https://deepmind.google/discover/blog/alphageometry-an-olympiad-level-ai-system-for-geometry/</link>
            <guid>39029801</guid>
            <pubDate>Wed, 17 Jan 2024 16:22:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://deepmind.google/discover/blog/alphageometry-an-olympiad-level-ai-system-for-geometry/">https://deepmind.google/discover/blog/alphageometry-an-olympiad-level-ai-system-for-geometry/</a>, See on <a href="https://news.ycombinator.com/item?id=39029801">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
      
  <article>
    
  
    
  
  
  
    

    
    
      
        <div>
          
            
            
              
              

<div>
    <div>
      <p>Research</p>
      

      
        <dl>
          
            <dt>Published</dt>
            <dd>
              <time datetime="2024-01-17">
                17 January 2024
              </time>
            </dd>
          
          
            <dt>Authors</dt>
            
          
        </dl>
      

      
    </div>

    
    
    
    <picture>
      <source media="(min-width: 1024px)" type="image/webp" width="1072" height="603" srcset="https://lh3.googleusercontent.com/tVTh_ZCW5Qozy4vOCpMH06B7Ac_eF7fmEULMMTwDellOh6hnOMUtf28toD68N527IHQTlBWfBCHcZykYPMdrS48yvuEcJKMJG8rU3YRM3u5Ojn3JXnc=w1072-h603-n-nu-rw 1x, https://lh3.googleusercontent.com/tVTh_ZCW5Qozy4vOCpMH06B7Ac_eF7fmEULMMTwDellOh6hnOMUtf28toD68N527IHQTlBWfBCHcZykYPMdrS48yvuEcJKMJG8rU3YRM3u5Ojn3JXnc=w2144-h1206-n-nu-rw 2x"><source media="(min-width: 600px)" type="image/webp" width="928" height="522" srcset="https://lh3.googleusercontent.com/tVTh_ZCW5Qozy4vOCpMH06B7Ac_eF7fmEULMMTwDellOh6hnOMUtf28toD68N527IHQTlBWfBCHcZykYPMdrS48yvuEcJKMJG8rU3YRM3u5Ojn3JXnc=w928-h522-n-nu-rw 1x, https://lh3.googleusercontent.com/tVTh_ZCW5Qozy4vOCpMH06B7Ac_eF7fmEULMMTwDellOh6hnOMUtf28toD68N527IHQTlBWfBCHcZykYPMdrS48yvuEcJKMJG8rU3YRM3u5Ojn3JXnc=w1856-h1044-n-nu-rw 2x"><source type="image/webp" width="528" height="297" srcset="https://lh3.googleusercontent.com/tVTh_ZCW5Qozy4vOCpMH06B7Ac_eF7fmEULMMTwDellOh6hnOMUtf28toD68N527IHQTlBWfBCHcZykYPMdrS48yvuEcJKMJG8rU3YRM3u5Ojn3JXnc=w528-h297-n-nu-rw 1x, https://lh3.googleusercontent.com/tVTh_ZCW5Qozy4vOCpMH06B7Ac_eF7fmEULMMTwDellOh6hnOMUtf28toD68N527IHQTlBWfBCHcZykYPMdrS48yvuEcJKMJG8rU3YRM3u5Ojn3JXnc=w1056-h594-n-nu-rw 2x">
      <img alt="Abstract neon geometric shapes and figures against a blue, space-like background." height="603" src="https://lh3.googleusercontent.com/tVTh_ZCW5Qozy4vOCpMH06B7Ac_eF7fmEULMMTwDellOh6hnOMUtf28toD68N527IHQTlBWfBCHcZykYPMdrS48yvuEcJKMJG8rU3YRM3u5Ojn3JXnc=w1072-h603-n-nu" width="1072">
    </picture>
    
  
  </div>
            
          
            
            
              
              <div>
  <p data-block-key="sija1"><b>Our AI system surpasses the state-of-the-art approach for geometry problems, advancing AI reasoning in mathematics</b></p><p data-block-key="bfsp6"><br>Reflecting the Olympic spirit of ancient Greece, <a href="https://www.imo-official.org/" rel="noopener" target="_blank">the International Mathematical Olympiad</a> is a modern-day arena for the world's brightest high-school mathematicians. The competition not only showcases young talent, but has emerged as a testing ground for advanced AI systems in math and reasoning.</p><p data-block-key="93svj">In a paper published today in <a href="https://www.nature.com/articles/s41586-023-06747-5" rel="noopener" target="_blank"><i>Nature</i></a>, we introduce AlphaGeometry, an AI system that solves complex geometry problems at a level approaching a human Olympiad gold-medalist - a breakthrough in AI performance. In a benchmarking test of 30 Olympiad geometry problems, AlphaGeometry solved 25 within the standard Olympiad time limit. For comparison, the previous state-of-the-art system solved 10 of these geometry problems, and the average human gold medalist solved 25.9 problems.</p>
</div>
            
          
            
            
              
              




<figure>
  
  
    <figcaption>
      <p data-block-key="7hx5a">In our benchmarking set of 30 Olympiad geometry problems (IMO-AG-30), compiled from the Olympiads from 2000 to 2022, AlphaGeometry solved 25 problems under competition time limits. This is approaching the average score of human gold medalists on these same problems. The previous state-of-the-art approach, known as “Wu’s method”, solved 10.</p>
    </figcaption>
  
</figure>
            
          
            
            
              
              <div>
  <p data-block-key="sija1">AI systems often struggle with complex problems in geometry and mathematics due to a lack of reasoning skills and training data. AlphaGeometry’s system combines the predictive power of a neural language model with a rule-bound deduction engine, which work in tandem to find solutions. And by developing a method to generate a vast pool of synthetic training data - 100 million unique examples - we can train AlphaGeometry without any human demonstrations, sidestepping the data bottleneck.<br></p><p data-block-key="80jpi">With AlphaGeometry, we demonstrate AI’s growing ability to reason logically, and to discover and verify new knowledge. Solving Olympiad-level geometry problems is an important milestone in developing deep mathematical reasoning on the path towards more advanced and general AI systems. We are open-sourcing the <a href="https://github.com/google-deepmind/alphageometry" rel="noopener" target="_blank">AlphaGeometry code and model</a>, and hope that together with other tools and approaches in synthetic data generation and training, it helps open up new possibilities across mathematics, science, and AI.</p>
</div>
            
          
            
            
              
              <figure>
  <blockquote><p data-block-key="vizu5">It makes perfect sense to me now that researchers in AI are trying their hands on the IMO geometry problems first because finding solutions for them works a little bit like chess in the sense that we have a rather small number of sensible moves at every step. But I still find it stunning that they could make it work. It's an impressive achievement.</p></blockquote>
  <figcaption><p data-block-key="8fh82">Ngô Bảo Châu, Fields Medalist and IMO gold medalist</p></figcaption>
</figure>
            
          
            
            
              
              <div>
  <h2 data-block-key="sija1">AlphaGeometry adopts a neuro-symbolic approach<br></h2><p data-block-key="132d0">AlphaGeometry is a neuro-symbolic system made up of a neural language model and a symbolic deduction engine, which work together to find proofs for complex geometry theorems. Akin to the idea of “<a href="https://kahneman.scholar.princeton.edu/publications" rel="noopener" target="_blank">thinking, fast and slow</a>”, one system provides fast, “intuitive” ideas, and the other, more deliberate, rational decision-making.<br></p><p data-block-key="fjqnd">Because language models excel at identifying general patterns and relationships in data, they can quickly predict potentially useful constructs, but often lack the ability to reason rigorously or explain their decisions. Symbolic deduction engines, on the other hand, are based on formal logic and use clear rules to arrive at conclusions. They are rational and explainable, but they can be “slow” and inflexible - especially when dealing with large, complex problems on their own.</p><p data-block-key="5rjku">AlphaGeometry’s language model guides its symbolic deduction engine towards likely solutions to geometry problems. Olympiad geometry problems are based on diagrams that need new geometric constructs to be added before they can be solved, such as points, lines or circles. AlphaGeometry’s language model predicts which new constructs would be most useful to add, from an infinite number of possibilities. These clues help fill in the gaps and allow the symbolic engine to make further deductions about the diagram and close in on the solution.</p>
</div>
            
          
            
            
              
              




<figure>
  
  
    <figcaption>
      <p data-block-key="7hx5a">AlphaGeometry solving a simple problem: Given the problem diagram and its theorem premises (left), AlphaGeometry (middle) first uses its symbolic engine to deduce new statements about the diagram until the solution is found or new statements are exhausted. If no solution is found, AlphaGeometry’s language model adds one potentially useful construct (blue), opening new paths of deduction for the symbolic engine. This loop continues until a solution is found (right). In this example, just one construct is required.</p>
    </figcaption>
  
</figure>
            
          
            
            
              
              




<figure>
  
  
    <figcaption>
      <p data-block-key="7hx5a">AlphaGeometry solving an Olympiad problem: Problem 3 of the 2015 International Mathematics Olympiad (left) and a condensed version of AlphaGeometry’s solution (right). The blue elements are added constructs. AlphaGeometry’s solution has 109 logical steps.</p>
    </figcaption>
  
</figure>
            
          
            
            
              
              
            
          
            
            
              
              <div>
  <h2 data-block-key="sija1">Generating 100 million synthetic data examples<br></h2><p data-block-key="7a68d">Geometry relies on understanding of space, distance, shape, and relative positions, and is fundamental to art, architecture, engineering and many other fields. Humans can learn geometry using a pen and paper, examining diagrams and using existing knowledge to uncover new, more sophisticated geometric properties and relationships. Our synthetic data generation approach emulates this knowledge-building process at scale, allowing us to train AlphaGeometry from scratch, without any human demonstrations.</p><p data-block-key="b4odr">Using highly parallelized computing, the system started by generating one billion random diagrams of geometric objects and exhaustively derived all the relationships between the points and lines in each diagram. AlphaGeometry found all the proofs contained in each diagram, then worked backwards to find out what additional constructs, if any, were needed to arrive at those proofs. We call this process “symbolic deduction and traceback”.</p>
</div>
            
          
            
            
              
              




<figure>
  
  
    <figcaption>
      <p data-block-key="7hx5a">Visual representations of the synthetic data generated by AlphaGeometry</p>
    </figcaption>
  
</figure>
            
          
            
            
              
              <p data-block-key="sija1">That huge data pool was filtered to exclude similar examples, resulting in a final training dataset of 100 million unique examples of varying difficulty, of which nine million featured added constructs. With so many examples of how these constructs led to proofs, AlphaGeometry’s language model is able to make good suggestions for new constructs when presented with Olympiad geometry problems.</p>
            
          
            
            
              
              <div>
  <p data-block-key="sija1">Pioneering mathematical reasoning with AI</p><div data-block-key="bpi31"><p>The solution to every Olympiad problem provided by AlphaGeometry was checked and verified by computer. We also compared its results with previous AI methods, and with human performance at the Olympiad. In addition, Evan Chen, a math coach and former Olympiad gold-medalist, evaluated a selection of AlphaGeometry’s solutions for us.</p><p>Chen said: “AlphaGeometry's output is impressive because it's both verifiable and clean. Past AI solutions to proof-based competition problems have sometimes been hit-or-miss (outputs are only correct sometimes and need human checks). AlphaGeometry doesn't have this weakness: its solutions have machine-verifiable structure. Yet despite this, its output is still human-readable. One could have imagined a computer program that solved geometry problems by brute-force coordinate systems: think pages and pages of tedious algebra calculation. AlphaGeometry is not that. It uses classical geometry rules with angles and similar triangles just as students do.”</p></div>
</div>
            
          
            
            
              
              <figure>
  <blockquote><p data-block-key="vizu5">AlphaGeometry's output is impressive because it's both verifiable and clean…It uses classical geometry rules with angles and similar triangles just as students do.</p></blockquote>
  <figcaption><p data-block-key="8fh82">Evan Chen, math coach and Olympiad gold medalist</p></figcaption>
</figure>
            
          
            
            
              
              <div>
  <p data-block-key="sija1">As each Olympiad features six problems, only two of which are typically focused on geometry, AlphaGeometry can only be applied to one-third of the problems at a given Olympiad. Nevertheless, its geometry capability alone makes it the first AI model in the world capable of passing the bronze medal threshold of the IMO in 2000 and 2015.</p><p data-block-key="9q43n">In geometry, our system approaches the standard of an IMO gold-medalist, but we have our eye on an even bigger prize: advancing reasoning for next-generation AI systems. Given the wider potential of training AI systems from scratch with large-scale synthetic data, this approach could shape how the AI systems of the future discover new knowledge, in math and beyond.<br></p><p data-block-key="bu817">AlphaGeometry builds on Google DeepMind and Google Research’s work to pioneer mathematical reasoning with AI – from <a href="https://deepmind.google/discover/blog/exploring-the-beauty-of-pure-mathematics-in-novel-ways/">exploring the beauty of pure mathematics</a> to <a href="https://blog.research.google/2022/06/minerva-solving-quantitative-reasoning.html" rel="noopener" target="_blank">solving mathematical and scientific problems with language models</a>. And most recently, we introduced <a href="https://deepmind.google/discover/blog/funsearch-making-new-discoveries-in-mathematical-sciences-using-large-language-models/">FunSearch</a>, which made the first discoveries in open problems in mathematical sciences using Large Language Models.</p><p data-block-key="rke0">Our long-term goal remains to build AI systems that can generalize across mathematical fields, developing the sophisticated problem-solving and reasoning that general AI systems will depend on, all the while extending the frontiers of human knowledge.</p>
</div>
            
          
            
            
              
              


            
          
            
            
              
              
            
          
            
            
              
              



  
    
  

            
          
        </div>
      
    

    
  
  

  

  </article>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Bad stuff going down at the American Sociological Association (117 pts)]]></title>
            <link>https://statmodeling.stat.columbia.edu/2024/01/17/bad-stuff-going-down-at-the-american-sociological-association/</link>
            <guid>39029007</guid>
            <pubDate>Wed, 17 Jan 2024 15:27:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://statmodeling.stat.columbia.edu/2024/01/17/bad-stuff-going-down-at-the-american-sociological-association/">https://statmodeling.stat.columbia.edu/2024/01/17/bad-stuff-going-down-at-the-american-sociological-association/</a>, See on <a href="https://news.ycombinator.com/item?id=39029007">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		<p>I knew the Association for Psychological Science, the American Psychological Association, the American Political Science Association, the American Statistical Association, and the National Academy of Sciences had problems.  It turns out the American Sociological Association does some bad things too.</p>
<p>Philip Cohen <a rel="nofollow" href="https://familyinequality.wordpress.com/2023/08/11/american-sociological-association-in-absentia-but-not-silent-on-open-science/">has the story</a>.  It starts back in 2019, when the American Sociological Association, along with “many other paywall-dependent academic societies” (in Cohen’s words) sent an open letter to the president to oppose open science.  Here’s Cohen:</p>
<blockquote><p>At the time, there was a rumor that OSTP [the U.S. Office of Science and Technology Policy] would require agencies to make public the results of research funded by the federal government without a 12-month delay — the cherished “embargo” that allowed these associations to profit from delaying access to public knowledge . . . </p>
<p>They wrote: “We are writing to express our concerns about a possible change in federal policies that could significantly threaten a vibrant American scientific enterprise.” That is, by requiring free access to research, OSTP would threaten the “financial stability that enables us to support peer review that ensures the quality and integrity of the research enterprise.” If ASA lost their journal subscription profits, in other words, American science would die. “To take action to shorten the 12-month embargo… risks the continued international leadership for the U.S. scientific enterprise.”</p></blockquote>
<p>Uh huh.  I agree with Cohen that this is some combination of ridiculous and offensive.  He continues:</p>
<blockquote><p>Despite a petition signed by many ASA members, and a resolution from its own Committee on Publications “to express opposition to the decision by the ASA to sign the December 18, 2019 letter” — which the ASA leadership never even publicly acknowledged — ASA has not uttered a word to alter its anachronistic and unpopular position.</p></blockquote>
<p>It’s starting to make me wonder if academic cartels sometimes act like . . . cartels?</p>
<p>Just to be clear, this does not seem to be a problem with academic sociology as a profession.  As Cohen notes, the ASA’s own Committee on Publications opposed the ASA’s horrible recommendation to keep science closed.</p>
<p><strong>Putting it all into perspective</strong></p>
<p>We live in a world where political leaders start wars, companies and governments dump toxic waste, church leaders cover up child abuse, etc.  In comparison, universities and academic societies faking statistics, rewarding plagiarism and other scientific misconduct, restricting data, and otherwise mucking up the process of scholarly inquiry . . . that barely registers on the scale of institutionalized evil.</p>
<p>So what is it that’s so irritating about academic institutions behaving badly?  I can think of a few things:</p>
<p>1.  I work in academia so I’m made aware of these issues and feel some bit of collective responsibility for them.</p>
<p>2.  Academia is more open than much of business, government, and organized religion, so it’s easier for us to see the problems.</p>
<p>3.  So much of the enabling of cheating in academia just seems so pointless.  It’s not cool when companies pollute, but, hey, you can see the reason$ they’ll want to do so.  But what does the American Sociology Association get out of fighting against open science, what does the University of California get out of tolerating research misconduct, what do the American Statistical Association and American Political Science Association get out of giving rewards for plagiarists?  Nothing.  That’s what so damn pitiful.</p>
<p>When Lysenko did his part to destroy Soviet agriculture, at least he personally got something out of it.  These American Sociology Association etc dudes, they get nothing.</p>
<p>It’s really pitiful, when you think about it.  These people aren’t evil, they’re pathetic.</p>
			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Apple built iCloud to store billions of databases (315 pts)]]></title>
            <link>https://read.engineerscodex.com/p/how-apple-built-icloud-to-store-billions</link>
            <guid>39028672</guid>
            <pubDate>Wed, 17 Jan 2024 15:05:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://read.engineerscodex.com/p/how-apple-built-icloud-to-store-billions">https://read.engineerscodex.com/p/how-apple-built-icloud-to-store-billions</a>, See on <a href="https://news.ycombinator.com/item?id=39028672">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p><em>Engineer’s Codex is a publication distilling real-world software engineering.</em></p><p><span>Throughout the last few months, I’ve written about various tech “behind-the-scenes” in Big Tech, such as </span><a href="https://engineercodex.substack.com/p/meta-xfaas-serverless-functions-explained" rel="">Meta's internal serverless platform</a><span> and </span><a href="https://engineercodex.substack.com/p/how-google-takes-the-pain-out-of" rel="">Google’s internally-loved code review tool</a><span>.</span></p><p>Apple, on the other hand, is not as public with their infrastructure. I wanted to find out how Apple built iCloud and in this article, I cover everything I know.</p><p><strong><span>Apple uses </span><a href="https://www.foundationdb.org/" rel="">FoundationDB</a><span> and Cassandra for iCloud and CloudKit, their cloud backend service.</span></strong><span> And yes, the title is not incorrect: Apple really does store </span><strong>billions of databases in their extreme multi-tenant architecture.</strong><span> </span></p><p><span>Before reading, these are the </span><strong>applicable lessons and guidelines. </strong></p><p><span>I found that a lot of the lessons from the paper and from Apple track very closely to the lessons of </span><a href="https://read.engineerscodex.com/p/meta-xfaas-serverless-functions-explained" rel="">Meta’s architecture of their serverless platform.</a></p><ul><li><p><span>Both use </span><strong>asynchronous processing </strong><span>smartly in order to make user functionalities smoother. Meta uses their serverless stack for non-user-facing functions. Apple uses async processing for almost </span><em>all </em><span>of the Record Layer’s functionalities (explained in-depth down below) in order to </span><em>hide latency from the user</em><span>.</span></p></li><li><p><span>Both utilize </span><strong>stateless architecture </strong><span>liberally, knowing that they have intense scalability needs.</span></p></li><li><p><span>Both </span><strong>isolate resources logically</strong><span> for reliability and availability.</span></p></li><li><p><span>Both </span><strong>handle diverse ranges of needs simply</strong><span>. Apple mentions how it’s “tempting</span></p><p>to provision and operate separate systems to store ‘small data’ and ‘big data.’” However, this increases operational complexity, and instead, they handle all types of data needs with one abstraction. Meta does the same with their serverless platform providing one abstraction for all kinds of function loads.</p></li><li><p><span>Both </span><strong>build layers of abstractions</strong><span> in order to make the developer experience better. Application developers shouldn’t have to worry about scalability needs - that’s handled deeper down the stack by distributed system engineers.</span></p></li><li><p><strong>Know your user. </strong><span>Each layer, API, and design decision provided by Meta and Apple is guided by clear knowledge on who the user of the specific technology is, whether it be an application development team or an observability team.</span></p></li></ul><p><a href="https://cassandra.apache.org/_/index.html" rel="">Cassandra</a><span> is a wide-column NoSQL database management system. It was originally developed at Facebook to power the Facebook inbox search feature. Interestingly, Meta themselves have replaced much of their Cassandra usage with </span><a href="https://engineering.fb.com/2021/08/06/core-infra/zippydb/" rel="">ZippyDB</a><span> instead.</span></p><p><span>iCloud is partly powered by Cassandra. Apple runs one of the largest Cassandra deployments in the world, </span><a href="https://news.ycombinator.com/item?id=9307563" rel="">according to DataStax</a><span>. </span></p><p><a href="https://twitter.com/erickramirezau/status/1578063811495477248" rel="">They report</a><span>:</span></p><ul><li><p>Over 300k instances/nodes</p></li><li><p>Hundreds of petabytes of data (if not exabytes)</p></li><li><p>Over 2 PB per cluster, with thousands of clusters</p></li><li><p>Millions of queries per second</p></li><li><p>Thousands of applications</p></li></ul><p><span>Other snippets of Cassandra in iCloud show that there are </span><strong>exabytes of data under management</strong><span>. </span><a href="https://news.ycombinator.com/item?id=33124631#33136026" rel="">There are </a><strong><a href="https://news.ycombinator.com/item?id=33124631#33136026" rel="">multiple Cassandra nodes per server</a></strong><a href="https://news.ycombinator.com/item?id=33124631#33136026" rel="">, and the teams at Apple are smart about blast radius and sharding</a><span>. This makes sure iCloud data availability is near 100%.</span></p><p><span>Cassandra is still actively improved upon at Apple. Scott Andreas of Apple gave a talk about the </span><a href="https://www.youtube.com/watch?v=hUxLJSFi2-A" rel="">future of Cassandra last month.</a><span> On Apple’s jobs page, they commonly mention Cassandra when hiring for distributed systems engineers.</span></p><p><strong><span>However, </span><a href="https://developer.apple.com/icloud/cloudkit/" rel="">CloudKit</a><span> + Cassandra ran into two scalability limitations, which led to their adoption of FoundationDB.</span></strong></p><ol><li><p><span>Within a single zone, </span><strong>only one operation can happen at a time</strong><span>, even if different records are being edited. This can be problematic for apps where multiple users or devices need to work on shared data simultaneously.</span></p></li><li><p><span>When updating multiple records simultaneously in an atomic operation, the updates are limited to a single Cassandra partition. </span><strong>These partitions have a maximum size they can handle, and as a partition's size increases, Cassandra tends to slow down.</strong></p></li></ol><p><strong>FoundationDB and the Record Layer solved both of these issues.</strong></p><p><span>Apple is much more public about FoundationDB. They </span><a href="https://techcrunch.com/2015/03/24/apple-acquires-durable-database-company-foundationdb/" rel="">acquired FoundationDB in 2015</a><span> and have since published various papers detailing their use of FoundationDB.</span></p><p><a href="https://github.com/apple/foundationdb" rel="">FoundationDB</a><span> is an open-source, distributed, transactional key-value store. It’s designed to handle large volumes of data and works well for both read/write workloads and write-heavy workloads. It’s also </span><a href="https://www.swequiz.com/learn/acid-properties" rel="">ACID-compliant</a><span>.&nbsp;</span></p><p><span>Apple uses the </span><strong><a href="https://github.com/FoundationDB/fdb-record-layer" rel="">FoundationDB Record Layer</a></strong><span> extensively for CloudKit (Apple’s cloud backend service).&nbsp;</span></p><p><span>From their </span><a href="https://github.com/FoundationDB/fdb-record-layer" rel="">GitHub</a><span>:</span></p><blockquote><p>The Record Layer is a Java API providing a record-oriented store on top of FoundationDB, (very) roughly equivalent to a simple relational database, featuring:</p><ul><li><p><strong>Structured types </strong><span>- Records are defined and stored in terms of </span><a href="https://developers.google.com/protocol-buffers/" rel="">protobuf</a><span> (Protocol Buffer) messages. Protocol Buffers were first designed by Google.</span></p></li><li><p><strong>Indexes</strong><span> - The Record Layer supports a variety of different index types including value indexes (the kind provided by most databases), rank indexes, and aggregate indexes. Indexes and primary keys can be defined either via protobuf options or programmatically.</span></p></li><li><p><strong>Complex types</strong><span> - Support for complex types, such as lists and nested records, including the ability to define indexes against such nested structures.</span></p></li><li><p><strong>Queries</strong><span> - The Record Layer does not provide a query language, however it provides query APIs with the ability to scan, filter, and sort across one or more record types, and a query planner capable of automatic selection of indexes.</span></p></li><li><p><strong>Many record stores, shared schema</strong><span> - The Record Layer provides the ability to support many discrete record store instances, all with a shared (and evolving) schema. For example, rather than modeling a single database in which to store all users' data, each user can be given their own record store, perhaps sharded across different FDB cluster instances.</span></p></li><li><p><strong>Very light weight </strong><span>- The Record layer is designed to be used in a large, distributed, stateless environment. The time between opening a store and the first query is intended to be measured in milliseconds.</span></p></li><li><p><strong>Extensible</strong><span> - New index types and custom index key expressions may be dynamically incorporated into a record store.</span></p></li></ul></blockquote><p><span>From the </span><a href="https://www.foundationdb.org/files/record-layer-paper.pdf" rel="">FoundationDB Record Layer</a><span> paper, they write:</span></p><blockquote><p><span>“[FoundationDB Record Layer is used] to provide powerful abstractions to applications serving </span><strong>hundreds of millions of users</strong><span>. CloudKit uses the Record Layer to host </span><strong>billions of independent databases</strong><span>, many with a common schema.”</span></p></blockquote><p>The structure of FoundationDB, Record Layer, and CloudKit looks like this:</p><ul><li><p><strong>FoundationDB</strong><span> does all the distributed systems and concurrency control work. </span></p></li><li><p><strong>The Record Layer</strong><span> serves as a relational database to make FoundationDB easier to work with. </span></p></li><li><p><strong>CloudKit</strong><span> is the highest layer on top and provides features and APIs for application developers. CloudKit isn’t the only thing built on top of the Record Layer, but there are also other layers on top built internally for things that need structured storage, like a JSON document store.</span></p></li></ul><p><strong>The Record Layer allows Apple to support multi-tenancy at scale.&nbsp;</strong></p><p>Actually, that’s somewhat underselling it.</p><p><span>The Record Layer is used for </span><strong>extreme multi-tenancy, where each user of each application gets independent record stores. This means the Record Layer hosts billions of independent databases sharing thousands of schemata.</strong></p><p>That’s better! And much, much more impressive.</p><p>The Record Layer is engineered to handle multi-tenancy at such a large scale thanks to two fundamental architectural decisions.&nbsp;</p><ol><li><p><span>The layer </span><strong>operates statelessly</strong><span> allowing for effortless scaling of the compute resources by simply adding more of these stateless instances. </span></p><ol><li><p>This stateless architecture simplifies the task for load balancers and routers since they only need to focus on the location of the data rather than the capabilities of the compute servers. Additionally, stateless servers have a reduced set of resources to distribute amongst clients.</p></li></ol></li><li><p><span>The layer uses </span><strong>record store abstraction to manage resource allocation and scalability</strong><span> effectively. This abstraction represents the entirety of a logical database, comprising serialized data, indexes, and the operational state. </span></p><ol><li><p>Each record store is allocated a specific key range, which guarantees logical separation of data for different tenants. Transferring a tenant's data, if necessary, becomes a straightforward process of relocating the assigned key range to a new cluster, as all the information required to manage and use the record store is contained within this range.</p></li></ol></li></ol><p><strong>In CloudKit, an application is represented by a 'logical container' which follows a defined schema.</strong><span> This schema outlines the necessary record types, fields, and indexes to enable efficient data retrieval and queries. </span><strong>Applications organize their data into 'zones'</strong><span> within CloudKit, which allows for grouping records logically for selective synchronization with client devices.</span></p><p><span>For each user, CloudKit designates a unique </span><strong>subspace in FoundationDB</strong><span>. Within this subspace, it creates a </span><strong>record store for each application a user interacts with.</strong><span> In essence, CloudKit manages a massive number of logical databases—multiplying the number of users by the number of applications—each containing its own set of records, indexes, and metadata, amounting to </span><strong>billions of databases.</strong></p><p><span>When CloudKit receives a request from a client device, it directs this request to an available </span><strong>CloudKit Service process via load balancing</strong><span>. This process then interacts with the specific Record Layer record store to fulfill the request.</span></p><p><span>CloudKit converts the defined application schema into a </span><strong>metadata definition within the Record Layer</strong><span>, which is stored in a separate metadata store. This metadata is augmented by CloudKit-specific system fields that track the </span><strong>record's creation, modification times, and the zone</strong><span> where the record is stored. Zone names are prefixed to primary keys to enable efficient access to records within each zone. Alongside indexes defined by the user, CloudKit also manages </span><strong>'system indexes'</strong><span> for internal purposes like managing storage quotas by keeping an index that tracks the size of records by their type.</span></p><p><strong>FoundationDB and the Record Layer together solve 4 key problems for Apple that either Cassandra alone or FoundationDB alone could not.</strong></p><p>FoundationDB helps solve personalized full-text search for users to quickly access their data.</p><p><span>Their system utilizes </span><strong>FoundationDB's key order</strong><span> to allow for quick searches on text beginnings (</span><strong>prefix matching</strong><span>) and also for more complex searches (like finding words that are close together or in a specific order - </span><strong>proximity and phrase search</strong><span>) without no extra overhead.</span></p><p>In traditional search systems, you often need extra processes running in the background to keep the search index up to date, but Apple’s system does everything in real-time, which means as soon as data changes, the search index is updated instantly—no extra steps needed.&nbsp;</p><p>With FoundationDB, CloudKit handles many updates happening simultaneously in a smooth way.</p><p>Previously, with Cassandra, CloudKit used to rely on a special index that kept track of changes in each zone to synchronize data across devices. When a device needed to update its data, it would check this index to see what's new. But this system had a drawback: it could cause conflicts when multiple updates happened at the same time.</p><p><span>But with FoundationDB, CloudKit uses a special kind of index that keeps track of the exact sequence of each change without causing conflicts. This is done by </span><strong>assigning a unique 'version' to every change, and when CloudKit needs to sync, it looks at these versions to figure out what updates a device has missed.</strong></p><p>However, when CloudKit needs to move data across different storage clusters—perhaps to distribute the load more evenly—things get tricky because each cluster has its own version numbers that don't match up. To solve this, CloudKit gives each user's data a 'move count' (called the “incarnation”), which increases every time their data is transferred to a new cluster. Each record update includes the user's current “incarnation” number, ensuring that even after a move, CloudKit can still figure out the correct order of updates by looking at both the incarnation and version numbers.</p><p>When they switched to this new system, CloudKit faced the challenge of dealing with old data that didn't have these version numbers. They cleverly overcame this by using a special function that sorts old updates using the previous system before the new ones. This meant no complicated changes to the app or leaving behind outdated code. This function took into account the incarnation, version, and the old update-counter values to maintain the correct order of records.</p><p><span>FoundationDB is designed for high-concurrency, not low latency. This means it can </span><strong>handle a lot of tasks at the same time rather than focus on the speed of individual tasks.</strong></p><p><span>To make the most of this design, </span><strong>the Record Layer does a lot of its work 'asynchronously'</strong><span>— it queues up tasks to be completed in the future, allowing for other work to be done in the meantime. This approach helps to cover up any delays that might occur during these tasks.</span></p><p><span>However, the tool that FoundationDB uses to communicate with its database is designed to do one thing at a time using a single thread for networking. In earlier versions, this setup caused a traffic jam in the system because everything was waiting for its turn in this network thread. </span><strong>The Record Layer had been using this single-threaded approach, which led to a bottleneck.</strong></p><p><span>To improve this, Apple reduced the workload on this network thread. </span><strong>Now, complex tasks seem faster because the system is working with the database on several fronts at the same time, rather than forming a queue.</strong><span> This way, the latency, or the apparent slowness, is hidden because the system doesn't wait for one task to finish before starting another.</span></p><p><span>In FoundationDB, if one transaction is reading certain keys and another transaction modifies those same keys at the same time, it causes a 'transaction conflict'. </span><strong>FoundationDB allows precise management of these conflicts by providing control over the sets of keys that can cause these conflicts when read or written to.</strong><span>&nbsp;</span></p><p>A common method to avoid unnecessary conflicts is to perform a special kind of read that doesn't cause conflicts, known as a 'snapshot' read, on a range of keys. If this read finds important keys, the transaction will only flag those specific keys for potential conflict, rather than the entire range. This ensures the transaction is only affected by changes that actually matter to its outcome.</p><p><span>The Record Layer uses this strategy to efficiently manage a structure known as a skip list, which is part of its ranking index system. However, manually setting these conflict ranges can be tricky and can lead to bugs that are difficult to identify, especially when they're mixed in with the main logic of the application. Therefore, </span><strong>it's recommended that systems built on top of FoundationDB create higher-level tools, like custom indexes, to handle these patterns</strong><span>. This approach helps to avoid leaving the responsibility to relax conflict rules up to each client application, which could lead to mistakes and inconsistencies.</span></p><p><span>Thanks for reading! If you’re interested in reading the full FoundationDB Record Layer paper, it’s here: </span><a href="https://www.foundationdb.org/files/record-layer-paper.pdf" rel="">FoundationDB Record Layer: A Multi-Tenant Structured Datastore</a><span>.</span></p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: htmldocs - Typeset and Generate PDFs with HTML/CSS (143 pts)]]></title>
            <link>https://htmldocs.com</link>
            <guid>39027543</guid>
            <pubDate>Wed, 17 Jan 2024 13:44:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://htmldocs.com">https://htmldocs.com</a>, See on <a href="https://news.ycombinator.com/item?id=39027543">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Why I Like Obsidian (230 pts)]]></title>
            <link>https://www.ddanieltan.com/posts/obsidian/</link>
            <guid>39027154</guid>
            <pubDate>Wed, 17 Jan 2024 13:11:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.ddanieltan.com/posts/obsidian/">https://www.ddanieltan.com/posts/obsidian/</a>, See on <a href="https://news.ycombinator.com/item?id=39027154">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="quarto-content">
<!-- sidebar -->
  

<!-- margin-sidebar -->
    
<!-- main -->
<main id="quarto-document-content">



<section id="the-start-of-my-obsidian-journey">
<h2>The start of my <a href="https://obsidian.md/">Obsidian</a> journey</h2>
<p>21 January 2021, that’s the date I created in my first note in my <a href="https://obsidian.md/">Obsidian</a> vault. Back then, it was just an experiment in my ongoing quest to find the perfect note-taking tool. <a href="https://evernote.com/">Evernote</a>, <a href="https://roamresearch.com/">Roam Research</a>, and even the good ol’ <a href="https://www.zebrapen.com/blogs/enlightened-writing/4-reasons-to-keep-writing-with-a-pen-and-paper">pen and paper</a> took their turns on my desk. But ever since I started using Obsidian, I never used another tool again. Since that day, Obsidian has been my constant companion through learning adventures, career changes, study sessions, and moments of personal reflection. What started as a simple app transformed into an indispensable tool, the backstage manager of my life, keeping everything in check.</p>
</section>
<section id="obsidians-features">
<h2>Obsidian’s Features</h2>
<p>What really makes Obsidian unique? I think it boils down to 3 features:</p>
<section id="obsidian-allows-structure-to-grow-organically">
<h2 data-anchor-id="obsidian-allows-structure-to-grow-organically">1. Obsidian allows structure to grow organically</h2>
<p>Most note-taking tools require you to decide upon the structure of your note before you record the note. For example, say I am taking notes while going through one of deeplearning.ai’s excellent <a href="https://www.deeplearning.ai/courses/generative-ai-with-llms/">Generative AI LLM courses</a>, before writing down my notes, I might have to decide on my folder structure.</p>
<p>Perhaps I should structure my notes by their topic</p>
<pre><code>├── Instruction Fine Tuning
│&nbsp;&nbsp; ├── Single Task
│&nbsp;&nbsp; └── Multi Task
├── Parameter Efficient Fine Tuning (PEFT)
├── Low Rank Adaption of LLMs (LoRA)
├── Model Evaluation Metrics
 &nbsp;&nbsp; └── LLM benchmarks</code></pre>
<p>Or perhaps I should structure my notes based by date so I can track my learning progress over time</p>
<pre><code>├── 2024-01-01
├── 2024-01-02
│&nbsp;&nbsp; └── Instruction Fine Tuning
├── 2024-01-03
│&nbsp;&nbsp; └── Parameter Efficient Fine Tuning (PEFT)
├── 2024-01-04
│&nbsp;&nbsp; └── Low Rank Adaption of LLMs (LoRA)
└── 2024-01-05</code></pre>
<p>Either way could be valid, depending on how I plan to revise and reorganise my notes in the future. But having to decide upon a structure upfront before I get the chance to start recording my notes never feels good.</p>
<section id="internal-links">
<h3 data-anchor-id="internal-links">Internal Links</h3>
<p>Obsidian offers a powerful feature to solve this problem - <a href="https://help.obsidian.md/Linking+notes+and+files/Internal+links">Internal Links</a>. Here is an example of Internal Links in action: <img src="https://www.ddanieltan.com/posts/obsidian/internal-link-example.png"></p>
<p>By wrapping any idea/noun/topic in double <code>[[]]</code> brackets Obsidian creates a dedicated new notes for that item, as well as the connection between the note I am currently taking and the one that was just created. In this short paragraph, I have linked both a date <code>2024-01-02</code> and several key topics e.g.&nbsp;(<code>In-context learning</code>), which means that when I want to revisit or reorganise my notes, I can do so either by topic or by date.</p>

<div><p>With internal links, I enjoy keeping my notes in a flat hierachy but I have seen vaults that still prefer folders. Obsidian supports both preferences equally well 🙂</p></div><p>This flexibility enables me to build my vault out with an organic structure that adapts to my learning needs.</p>
</section>
</section>
<section id="obsidian-helps-me-link-atomic-ideas-into-greater-understanding">
<h2 data-anchor-id="obsidian-helps-me-link-atomic-ideas-into-greater-understanding">2. Obsidian helps me link atomic ideas into greater understanding</h2>
<p>Knowledge is a mosaic crafted from interconnected ideas.</p>
<div>
<ul role="tablist"><li role="presentation"><a id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">What my vault started as</a></li><li role="presentation"><a id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">What my vault grew into</a></li></ul>
<div>
<div id="tabset-1-1" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p><img src="https://www.ddanieltan.com/posts/obsidian/graph1.png"></p>
<p>Here is the <a href="https://help.obsidian.md/Plugins/Graph+view">graph view</a> of my Obsidian vault in my 1st year. Every node in this graph is a single note. It is clear that when I was first starting out, I was writing down disparate, unconnected notes. I was probably writing down a lot of interesting ideas, but I had not taken the time to connect these ideas to gain a broader understanding.</p>
</div>
<div id="tabset-1-2" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><img src="https://www.ddanieltan.com/posts/obsidian/graph2.png"></p>
<p>As I continued using Obsidian, I started to link notes together. This could be done either when the notew was first created, or when I scheduled time to review these notes again. Soon, I saw clusters of ideas organically forming into broader topics. My <a href="https://www.ddanieltan.com/posts/2022scala/">deep dive into Scala</a>, my <a href="https://www.ddanieltan.com/posts/2023-causal-inference/">exploration of Causal Inference</a> and a whole variety of subjects that interest me came out of these clusters. And today, I have a nice graphical topology of sorts that represents my learning journey and keeps me motivated.</p>
</div>
</div>
</div>
</section>
<section id="obsidians-choice-to-work-with-plain-text-files-make-it-future-proof">
<h2 data-anchor-id="obsidians-choice-to-work-with-plain-text-files-make-it-future-proof">3. Obsidian’s choice to work with plain text files make it future-proof</h2>
<p>Lastly, my favourite feature of Obsidian is that by deafault, it chooses to work with plain text files. This simple decision means that Obsidian notes:</p>
<ul>
<li>Can be used offline</li>
<li>Can be editted with any text editor</li>
<li>Can be viewed with a variety of text readers</li>
<li>Can be easily synced on iCloud, Dropbox or using git</li>
<li>Is yours, forever!</li>
</ul>
<p>Obsidian’s CEO Steph Ango wrote a <a href="https://stephango.com/file-over-app">dedicated blog post on this philosophy</a> that went deeper into this philosophy. He shared that <em>all software is ephemeral and Obsidian wants to give people ownership over their own data</em>, which is an approach that builds trust for its users.</p>
<!--
Adapted from Tom Mock's blog: https://github.com/jthomasmock/themockup-blog/blob/master/_R/footer.qmd
-->
</section>

</section>

<div id="quarto-appendix"><section id="appendix"><h2>Appendix</h2><div>

<div id="callout-1">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.3.2 (2023-10-31)
 os       macOS Sonoma 14.1.2
 system   x86_64, darwin20
 ui       X11
 language (EN)
 collate  en_US.UTF-8
 ctype    en_US.UTF-8
 tz       Asia/Singapore
 date     2024-01-17
 pandoc   3.1.10 @ /usr/local/bin/ (via rmarkdown)
 quarto   1.3.450

─ Packages ───────────────────────────────────────────────────────────────────
 package     * version date (UTC) lib source
 sessioninfo * 1.2.2   2021-12-06 [1] CRAN (R 4.3.0)

 [1] /Users/ddanieltan/Code/ddanieltan.com/renv/library/R-4.3/x86_64-apple-darwin20
 [2] /Users/ddanieltan/Library/Caches/org.R-project.R/R/renv/sandbox/R-4.3/x86_64-apple-darwin20/84ba8b13

──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
<blockquote>
The statistician cannot evade the responsibility for understanding the process he applies or recommends – Ronald Fisher
</blockquote>


</div></section><section><h2>Reuse</h2></section><section><h2>Citation</h2><div><p>BibTeX citation:</p><pre><code>@online{tan2024,
  author = {Tan, Daniel},
  title = {Why {I} Like {Obsidian}},
  date = {2024-01-17},
  url = {https://www.ddanieltan.com/posts/obsidian},
  langid = {en}
}
</code></pre><p>For attribution, please cite this work as:</p><div id="ref-tan2024" role="listitem"><p>
Tan, Daniel. 2024. <span>“Why I Like Obsidian.”</span> January 17, 2024.
<a href="https://www.ddanieltan.com/posts/obsidian">https://www.ddanieltan.com/posts/obsidian</a>.
</p></div></div></section></div></main> <!-- /main -->

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Rust project has a burnout problem (205 pts)]]></title>
            <link>https://jyn.dev/2024/01/16/the-rust-project-has-a-burnout-problem.html</link>
            <guid>39026855</guid>
            <pubDate>Wed, 17 Jan 2024 12:34:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jyn.dev/2024/01/16/the-rust-project-has-a-burnout-problem.html">https://jyn.dev/2024/01/16/the-rust-project-has-a-burnout-problem.html</a>, See on <a href="https://news.ycombinator.com/item?id=39026855">Hacker News</a></p>
<div id="readability-page-1" class="page"><div aria-label="Content">
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p><img src="https://jyn.dev/assets/burned%20out%20rust%20club.png" alt="a melting, smiling, ferris. it's surrounded by the cursive text &quot;burned out rust kid club&quot;."></p>

<p>the number of people who have left the rust project due to burnout is shockingly high. the number of people in the project who are close to burnout is also shockingly high.</p>

<p>this post is about myself, but it’s not just about myself. i’m not going to name names because either you know what i’m talking about, in which case you know <em>at least</em> five people matching this description, or you don’t, in which case sorry but you’re not the target audience. consider, though, that the project has been around for 15 years, and compare that to the average time a maintainer has been active …</p>

<h2 id="what-does-this-look-like">what does this look like</h2>

<p>(i apologize in advance if this story does not match your experience; hopefully the suggestions on what to do about burnout will still be helpful to you.)</p>

<p>the pattern usually goes something like this:</p>
<ul>
  <li>you want to work on rust. you go to look at the issue tracker. you find something <em>you</em> care about, since the easy/mentored issues are taken. it’s hard to find a mentor because all the experienced people are overworked and burned out, so you end up doing a lot of the work independently.</li>
</ul>

<p>guess what you’ve already learned at this point: work in this project doesn’t happen unless <em>you personally</em> drive it forward. that issue you fixed was opened for years; the majority of issues you will work on as you start will have been open for months.</p>

<ul>
  <li>you become a more active contributor. the existing maintainer is too burned out to do regular triage, so you end up going through the issue backlog (usually, you’re the first person to have done so in years). this reinforces the belief work doesn’t happen unless <em>you</em> do it <em>personally</em>.</li>
  <li>the existing maintainer recognizes your work and turns over a lot of the responsibilities to you, especially reviews. new contributors make PRs. they make silly simple mistakes due to lack of experience; you point them out and they get fixed. this can be fun, for a time. what it’s teaching you is that <em>you personally</em> are responsible for catching mistakes.</li>
  <li>you get tired. you’ve been doing this for a while. people keep making the same mistakes, and you’re afraid to trust other reviewers; perhaps you’re the <em>only</em> reviewer, or other reviewers have let things slip before and you don’t trust their judgement as much as you used to. perhaps you’re assigned too many PRs and you can’t keep up. you haven’t worked on the things you <em>want</em> to work on in weeks, and no one else is working on them because you said you were going to (“they won’t happen unless <em>you do them personally</em>”, a voice says). you want a break, but you have a voice in the back of your head: “the project would be worse without you”.</li>
</ul>

<p>i’m going to stop here; i think everyone gets the idea.</p>

<h2 id="what-can-i-do-about-it">what can i do about it</h2>

<p>“it won’t get done if i don’t do it” and “i need to review everything or stuff will slip through” is exactly the mindset of my own burnout from rust. it doesn’t matter if it’s true, it will cause you pain. if the project cannot survive without <em>you personally</em> putting in unpaid overtime, perhaps it does not deserve to survive.</p>

<p>if you are paid to work on rust, you likely started as an unpaid contributor and got the job later. <em>treat it like a job now</em>. do not work overtime; do not volunteer at every turn; do not work on things far outside your job description.</p>

<p>the best way to help the project is to keep contributing for it for years. to do that, you have to avoid burning out, which means you have to <em>treat yourself well</em>.</p>

<h2 id="what-can-team-leads-do-about-it">what can team leads do about it</h2>

<p>have documentation for “what to do about burnout”; give it just as much priority as technical issues or moderation conflicts.</p>

<p>rotate responsibilities. don’t have the same person assigned to the majority of PRs. if they review other people’s PRs unsolicited, talk to them 1-1 about why they feel the need to do so. if someone is assigned to the review queue and never reviews PRs, talk to them; take them off the queue; give them a vacation or different responsibilities as appropriate.</p>

<p>ask people why they leave. i know at least one person whose burnout story does not match the one in this post. i am sure there are others. you cannot solve a problem if you don’t understand what causes it.</p>

<p><em>take these problems seriously</em>. <a href="https://jyn.dev/2023/12/04/How-to-maintain-an-open-source-project.html">prioritize growing the team and creating a healthy environment over solving technical issues</a>. <strong>the issues will still be there in a few months; your people may not be</strong>.</p>

<h2 id="what-can-the-rust-project-do-about-it">what can the rust project do about it</h2>

<p>one thing bothering me as i wrote this post is how much of this still falls on individuals within the project. i don’t think this is an individual problem; i think it is a cultural, organizational, and resource problem. i may write more about this once i have concrete ideas about what the project could do.</p>

<h2 id="be-well-be-kind-to-each-other-i-love-you">be well. be kind to each other. i love you.</h2>

<p>remember:</p>

<blockquote><p lang="en" dir="ltr">EMPATHY WITHOUT BOUNDARIES IS SELF DESTRUCTION <a href="https://t.co/HbBwEj4hc3">pic.twitter.com/HbBwEj4hc3</a></p>— 𖤐ARCH BUDZAR𖤐 (@ArchBudzar) <a href="https://twitter.com/ArchBudzar/status/1313572660048269315?ref_src=twsrc%5Etfw">October 6, 2020</a></blockquote>


<h3 id="acknowledgements">acknowledgements</h3>

<p>thank you <strong>@QuietMisdreavus</strong> for the <em>burned out rust kid club</em> art.</p>

<p>thank you <strong>@Gankra</strong>, <strong>@QuietMisdreavus</strong>, <strong>@alercah</strong>, <strong>@ManishEarth</strong>, <strong>@estebank</strong>, <strong>@workingjubilee</strong> and <strong>@yaahc</strong> for discussion and feedback on early drafts of this post. any errors are my own.</p>

  </div>

  
</article>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Willow Protocol (291 pts)]]></title>
            <link>https://willowprotocol.org/</link>
            <guid>39026791</guid>
            <pubDate>Wed, 17 Jan 2024 12:27:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://willowprotocol.org/">https://willowprotocol.org/</a>, See on <a href="https://news.ycombinator.com/item?id=39026791">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><h2 id="willow"><a href="#willow"><img src="https://willowprotocol.org/emblem.png" alt="A Willow emblem: a stylised drawing of a Willow’s branch tipping into a water surface, next to a hand-lettered display of the word &quot;Willow&quot;."></a></h2><p>A protocol for peer-to-peer data stores. The best parts? Fine-grained permissions, a keen approach to privacy, destructive edits, and a dainty bandwidth and memory footprint.</p><nav><ul><li><a href="https://willowprotocol.org/more/why/index.html#why_willow">Why did we make Willow?</a></li><li><a href="https://willowprotocol.org/specs/data-model/index.html#data_model">If you read only one specification, let it be this one</a></li><li><a href="https://willowprotocol.org/specs/index.html#specifications">All of the specifications</a></li></ul></nav><p><span><img src="https://willowprotocol.org/assets/4cd25e0cf24e98306961263f67eaf4bb8559d7dd78a809ec30f46f1246df5a31.png" alt="An anthropomorphic computer smiles and shrugs while a series of comical connectivity issues threaten its ethernet cable: a mouse nibbles through the cable, an axe chops it up, and an anvil falls toward it at high velocity."></span>Data storage which never goes offline. You get always-available storage for arbitrary data (e.g. text, media). You can have as many of these stores as you want, keyed to different namespaces. When stores from different devices belong to the same namespace, they deterministically sync with each other.</p><p><span><img src="https://willowprotocol.org/assets/8c8fd1d157e9ac8852da067d53fca38a81a1861c28741e25c843154ba62f56e6.png" alt="A cartoonish troll tries to spy on a person enjoying themselves with a paper airplane, but a solid brick wall blocks the troll’s line of sight. The trool is deeply unhappy about this circumstance."></span>Private and end-to-end encrypted. Other users can't find out what you’re interested in unless they already know about it themselves. And if they get that far, they still have to be able to decrypt synced data to make any sense of it.</p><p><span><img src="https://willowprotocol.org/assets/b9eae2757e3e084c2bacd38c17889546b0103ebee170a5bbc36ad34af485f784.png" alt="Three stylised paper files hang off a tree branch. The branch is being cut off near its base by a pair of hedge clippers, in a way that all files will be pruned of the tree."></span>Total erasure of data. Distributed systems use tombstones to communicate deletes, but even these leave metadata behind. Prefix pruning deletes many entries and all of their metadata in their entirety, leaving a single tombstone in their place.</p><p><span><img src="https://willowprotocol.org/assets/62e12e8abea68a8ed9e5b499c8b2a341b3f226886083eb43827260ac0be0b7b7.png" alt="Two stylised admission tickets. One says &quot;Admin&quot;, the other says &quot;Aug 1st to Sep 3rd&quot;."></span>Fine grained capabilities. Restrict read and write access by semantically meaningful ranges of data, or time range. Use your favourite existing capability system, or try our Meadowcap system.</p><p><span><img src="https://willowprotocol.org/assets/d51b7ffdeb5e8fdc67bff2c3c5ff0634a8f436a9c13c15edad718e8e23fc116e.png" alt="A cake with a single slice being removed. The selected slice has a strawberry on top. Hmm, strawberry cake..."></span>Partial sync. Have a lot of data, but don't want to sync the whole thing to a particular device? Choose which data to replicate by what, when, or who.</p><p><span><img src="https://willowprotocol.org/assets/18ff2330446d72c3599af5d81ea5ade441394228cb42a2c38882e147f37d7159.png" alt="A pencil overwriting a sequence of bits (zeros and ones), leaving no trace of the overwritten bits."></span>Destructive edits. When you update a value, the old values and associated metadata are overwritten.</p><p><span><img src="https://willowprotocol.org/assets/ce762771ec9b6d6173130de34873d79e7c08928a5abd3a7d90962ef043913993.png" alt="A cartoon foot cartoonishly kicking a cartoon file out of a cartoon door."></span>Locally delete data you don’t want to store, even if it was authored by someone else.</p><p><span><img src="https://willowprotocol.org/assets/920e71ff29fac0aa9c7991e33c533768796a62dd1e3556854d3b51a48aa70a89.png" alt="Five ants carry zeros and ones off to the right. The numbers are about as large as the hard-working insects."></span>Peers can communicate resource budgets, so devices with very limited memory can sync too.</p><p><span><img src="https://willowprotocol.org/assets/50235dcc48ae3058df05671ca72154afd9f7e335bb3bac4bf18e26ab27b05fcd.png" alt="The pronoun &quot;I&quot;, followed by a heart, followed by two crossed-out names of hash functions (&quot;MD5&quot; and &quot;SHA256), followed by the hash function of choice: &quot;BLAKE3&quot;."></span>You choose the transport and cryptographic primitives suited to your use-case.</p><p><span><img src="https://willowprotocol.org/assets/fc24ed9df75d9ecd70ba971a4ca686af30b8a3eb48831a57e5b49f960f59ed84.png" alt="A happy little smiley face holding a laptop in one hand and a phone in the other hand. Yay."></span>Authors can write from multiple devices concurrently. Yay.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[PixieFail: Nine Vulnerabilities UEFI Implementations (127 pts)]]></title>
            <link>https://blog.quarkslab.com/pixiefail-nine-vulnerabilities-in-tianocores-edk-ii-ipv6-network-stack.html</link>
            <guid>39024228</guid>
            <pubDate>Wed, 17 Jan 2024 07:02:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.quarkslab.com/pixiefail-nine-vulnerabilities-in-tianocores-edk-ii-ipv6-network-stack.html">https://blog.quarkslab.com/pixiefail-nine-vulnerabilities-in-tianocores-edk-ii-ipv6-network-stack.html</a>, See on <a href="https://news.ycombinator.com/item?id=39024228">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
  

  <p>This blog post provides details about nine vulnerabilities affecting the IPv6 network protocol stack of EDK II, TianoCore's open source reference implementation of UEFI.</p>

  <h2>Introduction</h2>
<p>In this blog post we describe <a href="https://www.youtube.com/watch?v=PVyS9JwtFoQ">PixieFAIL</a>, nine vulnerabilities that affect EDK II, the de-facto open source reference implementation of the UEFI specification and possibly all implementations derived from it. The vulnerabilities are present in the network stack of EDK II and can be exploited during the network boot process.</p>
<p>Network boot is a standard feature on enterprise computers and servers. Using network boot to load an OS image from the network at boot time is popular in data centers and high-performance computing (HPC) environments, since server farms and HPC clusters may have hundreds or thousands of compute nodes that need to be provisioned with the same operating system and software configuration, and downloading and running the OS from a central set of servers (Boot servers) could greatly simplify management. In order to provide this network booting feature, UEFI implements a full IP stack at the <a href="https://uefi.org/specs/PI/1.8/V2_Overview.html">DXE phase</a>, opening the door to attacks from the local network during this early stage of the boot process. </p>
<p>The <a href="https://en.wikipedia.org/wiki/Preboot_Execution_Environment">Preboot Execution Environment</a>(PXE) is the specification for a standardized client-server solution to allow computers to boot over the network, colloquially referred to as <em>netboot</em> or <strong><em>Pixie boot</em></strong>. It was originally introduced by Intel in 1998 and later incorporated into the UEFI specification. Besides IPv4, PXE originally relied on a handful of simple protocols to achieve network booting: DHCP, UDP, and TFTP. These were considered relatively simple protocols that could be implemented with a sufficiently small footprint to fit in Option ROM or Network Interface Card (NIC) firmware. Since the release of version 2.2 of the UEFI specification in 2010, IPv6-based PXE has been part of the UEFI specification as well. In the case of IPv6, besides the core protocol, other protocols such as ICMPv6, Neighbor Discovery (ND), Multicast Listener Discovery (MLD), UDP, TCP, DHCPv6, DNS, and TFTP are implemented, which increased the overall attack surface.</p>
<p>EDK II is an open source implementation of the UEFI specification developed and maintained by <a href="https://www.tianocore.org/">Tianocore</a>, a community of developers from software vendors that also leverage the project for their own UEFI implementations. In a <a href="https://blog.quarkslab.com/for-science-using-an-unimpressive-bug-in-edk-ii-to-do-some-fun-exploitation.html">prior blog post</a> <em>Gwaby</em> explored the attack surface and <em>exploitability of EDK II</em> and showed that even a bug that provides just minimal capability could be used to achieve arbitrary code execution if the context is right. UEFI vulnerabilities that could be triggered remotely seemed like an interesting context for exploitation, and eventually persistence, but where would we look for those?</p>
<p>The EDK II UEFI reference implementation <a href="https://github.com/tianocore/tianocore.github.io/wiki/PXE">provides both IPv4- and IPv6-based PXE</a>. In the <a href="https://uefi.org/sites/default/files/resources/UEFI_Spec_2_10_Aug29.pdf">latest available specification (UEFI 2.10)</a> as of this writing, IPv6-based PXE is described in section "<em>24.3.18 - Netboot6</em>".</p>
<p>We performed a cursory inspection of <code>NetworkPkg</code>, Tianocore's EDK II PXE implementation, and identified nine vulnerabilities that can be exploited by unauthenticated remote attackers on the same local network, and in some cases, by attackers on remote networks. The impact of these vulnerabilities includes denial of service, information leakage, remote code execution, DNS cache poisoning, and network session hijacking.</p>
<h2>Affected vendors</h2>
<ul>
<li>Tianocore <a href="https://github.com/tianocore/edk2">EDK II UEFI implementation</a> <ul>
<li><code>NetworkPkg</code> PXE stack.</li>
</ul>
</li>
</ul>
<p>Other vendors that use EDK II's <code>NetworkPkg</code> module (non-exhaustive list):</p>
<ul>
<li>
<p>Arm Ltd.: <a href="https://gitlab.arm.com/arm-reference-solutions/edk2">Arm reference solutions</a></p>
</li>
<li>
<p>Insyde Software: <a href="https://www.insyde.com/products">Insyde H20 UEFI BIOS</a></p>
</li>
<li>
<p>American Megatrends Inc. (AMI): <a href="https://github.com/opencomputeproject/OSF-Aptio-OpenEdition">Aptio OpenEdition</a></p>
</li>
<li>
<p>Phoenix Technologies Inc.: <a href="https://www.phoenix.com/phoenix-securecore/">SecureCore</a></p>
</li>
<li>
<p>Microsoft Corporation: <a href="https://github.com/microsoft/mu_basecore">Project Mu</a></p>
</li>
</ul>
<p>CERT/CC published <a href="https://www.kb.cert.org/vuls/id/132380">Vulnerability Note VU#132380</a> with a more comprehensive list of affected vendors, and guidance to deploy fixes and mitigations.</p>
<p>Proof of concept scripts to detect the presence of vulnerabilities 1 to 7 are available <a href="https://github.com/quarkslab/pixiefail">here</a>.</p>
<h2>Technical details</h2>
<h3>Preboot Execution Environment (PXE)</h3>
<p>In order to boot from the network, a client system must be able to locate, download, and execute code that sets up, configures, and runs the operating system. This is usually done in several stages, starting with a minimal program that is downloaded from a network server using a simple protocol, such as TFTP, which then downloads and runs a second booting stage or the full operating system image. </p>
<p>To locate this minimal program, called Network Bootstrap Program (NBP), the PXE client relies on a DHCP server to both obtain the configuration parameters to configure its network interface with a valid IP address and to receive a list of Boot Servers to query for the NBP file. Since the DHCP server must provide such a list and other special parameters, the PXE client has to send some mandatory <a href="https://datatracker.ietf.org/doc/html/rfc4578">PXE-releated DHCP Options</a>, consequently, the DHCP server must be "PXE enabled", i.e. configured appropriately to recognize PXE client options and to reply with the proper DHCP server options. To facilitate network booting without having to modify the configuration of operational DHCP servers servicing all types of clients, not just PXE clients, the specification splits the regular DHCP server functionality from the PXE-related functionality into two separate services, the DHCP service, and the proxy DHCP service, running on different ports on the same or separate machines. </p>
<p>The PXE client selects a Boot Server and communicates with it using the DHCP protocol to obtain the filename and file service (TFTP) parameters necessary to download the NBP. Finally, the NBP is downloaded, verified (in the case of Secure Boot), and executed. Once the next booting stage or the fully-fledged operating system image is downloaded and setup, execution control is transferred to it. A more detailed description of the PXE boot process is provided <a href="https://github.com/tianocore/tianocore.github.io/wiki/PXE">here</a>.</p>
<p>PXE over IPv6 is based on a combination of the DHCPv6 and TFTP protocols, which in turn implies the usage of IPv6 and UDP at layers 3 and 4, respectively. Because a DHCP server may provide a list of Boot Servers by hostname, it is also necessary to have a working implementation of the DNS protocol. </p>
<p>The following picture from the UEFI 2.10 specification summarizes the PXE boot process over IPv6:</p>
<center>
  <img src="https://blog.quarkslab.com/resources/2023-09-27_vulnerabilities-in-tianocore-edk2-ipv6-stack/pxe-ipv6-flow.png" width="60%">
</center>
<h3>CVE-2023-45229: Integer underflow when processing IA_NA/IA_TA options in a DHCPv6 Advertise message</h3>
<p>When trying to boot using PXE over IPv6, the EDK II firmware starts by sending DHCPv6 <code>Solicit</code> messages. DHCPv6 servers answer with an <code>Advertise</code> message.
<code>Advertise</code> messages are handled in EDK II by the <code>Dhcp6HandleAdvertiseMsg</code> function in <code>NetworkPkg/Dhcp6Dxe/Dhcp6Io.c</code>, which calls <code>Dhcp6SeekStsOption</code> in order to search for <code>Status</code> codes in the received message. A <code>Status</code> code may appear as an option in the DHCPv6 message, or as an option inside another option, such as the <code>IA_NA</code> or <code>IA_TA</code> options.</p>
<p>When seeking for <code>Status</code> codes encapsulated in <code>IA_NA</code> or <code>IA_TA</code> options, the vulnerable function <code>Dhcp6SeekStsOption</code> in <code>NetworkPkg/Dhcp6Dxe/Dhcp6Io.c</code> does the following:</p>
<div><pre><span></span><code><span>EFI_STATUS</span><span></span>
<span>Dhcp6SeekStsOption</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span>     </span><span>DHCP6_INSTANCE</span><span>    </span><span>*</span><span>Instance</span><span>,</span><span></span>
<span>  </span><span>IN</span><span>     </span><span>EFI_DHCP6_PACKET</span><span>  </span><span>*</span><span>Packet</span><span>,</span><span></span>
<span>  </span><span>OUT</span><span>    </span><span>UINT8</span><span>             </span><span>**</span><span>Option</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>[...]</span><span></span>
<span>    </span><span>//</span>
<span>    </span><span>// Seek in encapsulated options, IA_NA and IA_TA.</span>
<span>    </span><span>//</span>
<span>    </span><span>*</span><span>Option</span><span> </span><span>=</span><span> </span><span>Dhcp6SeekIaOption</span><span> </span><span>(</span><span></span>
<span>                  </span><span>Packet</span><span>-&gt;</span><span>Dhcp6</span><span>.</span><span>Option</span><span>,</span><span></span>
<span>                  </span><span>Packet</span><span>-&gt;</span><span>Length</span><span> </span><span>-</span><span> </span><span>sizeof</span><span> </span><span>(</span><span>EFI_DHCP6_HEADER</span><span>),</span><span></span>
<span>                  </span><span>&amp;</span><span>Instance</span><span>-&gt;</span><span>Config</span><span>-&gt;</span><span>IaDescriptor</span><span></span>
<span>                  </span><span>);</span><span></span>
<span>    </span><span>if</span><span> </span><span>(</span><span>*</span><span>Option</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>return</span><span> </span><span>EFI_SUCCESS</span><span>;</span><span></span>
<span>    </span><span>}</span><span></span>

<span>[...]</span><span></span>
<span>    </span><span>if</span><span> </span><span>(</span><span>Instance</span><span>-&gt;</span><span>Config</span><span>-&gt;</span><span>IaDescriptor</span><span>.</span><span>Type</span><span> </span><span>==</span><span> </span><span>Dhcp6OptIana</span><span>)</span><span> </span><span>{</span><span></span>
<span>[</span><span>1</span><span>]</span><span>     </span><span>IaInnerOpt</span><span> </span><span>=</span><span> </span><span>*</span><span>Option</span><span> </span><span>+</span><span> </span><span>16</span><span>;</span><span></span>
<span>[</span><span>2</span><span>]</span><span>     </span><span>IaInnerLen</span><span> </span><span>=</span><span> </span><span>(</span><span>UINT16</span><span>)(</span><span>NTOHS</span><span> </span><span>(</span><span>ReadUnaligned16</span><span> </span><span>((</span><span>UINT16</span><span> </span><span>*</span><span>)(</span><span>*</span><span>Option</span><span> </span><span>+</span><span> </span><span>2</span><span>)))</span><span> </span><span>-</span><span> </span><span>12</span><span>);</span><span></span>
<span>    </span><span>}</span><span> </span><span>else</span><span> </span><span>{</span><span></span>
<span>[</span><span>3</span><span>]</span><span>     </span><span>IaInnerOpt</span><span> </span><span>=</span><span> </span><span>*</span><span>Option</span><span> </span><span>+</span><span> </span><span>8</span><span>;</span><span></span>
<span>[</span><span>4</span><span>]</span><span>     </span><span>IaInnerLen</span><span> </span><span>=</span><span> </span><span>(</span><span>UINT16</span><span>)(</span><span>NTOHS</span><span> </span><span>(</span><span>ReadUnaligned16</span><span> </span><span>((</span><span>UINT16</span><span> </span><span>*</span><span>)(</span><span>*</span><span>Option</span><span> </span><span>+</span><span> </span><span>2</span><span>)))</span><span> </span><span>-</span><span> </span><span>4</span><span>);</span><span></span>
<span>    </span><span>}</span><span></span>

<span>[</span><span>5</span><span>]</span><span> </span><span>*</span><span>Option</span><span> </span><span>=</span><span> </span><span>Dhcp6SeekOption</span><span> </span><span>(</span><span>IaInnerOpt</span><span>,</span><span> </span><span>IaInnerLen</span><span>,</span><span> </span><span>Dhcp6OptStatusCode</span><span>);</span><span></span>

<span>[...]</span><span></span>
</code></pre></div>

<p>Basically, the <code>IA_NA</code> and <code>IA_TA</code> options in an <code>Advertise</code> message are trusted without doing basic sanity checks, e.g.:</p>
<ul>
<li>
<p>in the case of <code>IA_NA</code> options:</p>
<ul>
<li>that the option is at least 16 bytes in length before setting <code>IaInnerOpt</code> to <code>*Option + 16</code>, at [1].</li>
<li>that the value of the <code>optlen</code> field of the option is at least 12, before subtracting 12 from it, at [2].</li>
</ul>
</li>
<li>
<p>in the case of <code>IA_TA</code> options:</p>
<ul>
<li>that the option is at least 8 bytes in length before setting <code>IaInnerOpt</code> to <code>*Option + 8</code>, at [3].</li>
<li>that the value of the <code>optlen</code> field of the option is at least 4, before subtracting 4 from it, at [4].</li>
</ul>
</li>
</ul>
<p>The lack of checking for sane values in the <code>optlen</code> field of these options allows to trigger an integer underflow, by setting the <code>optlen</code> field to a value &lt; 12 (in the case of <code>IA_NA</code>) or &lt; 4 (in the case of <code>IA_TA</code>).</p>
<p>As an example, if we send a DHCPv6 <code>Advertise</code> message containing an <code>IA_NA</code> option with its <code>optlen</code> field set to 11, when the code above calls <code>Dhcp6SeekOption</code> at [5] to scan forward for status options, the <code>IaInnerLen</code> parameter will be set to 0xFFFF (11 - 12), and as a result function <code>Dhcp6SeekOption</code> will attempt to read memory well past the end of the received packet.</p>
<h3>CVE-2023-45230: Buffer overflow in the DHCPv6 client via a long Server ID option</h3>
<p>After doing the initial <code>Solicit</code>/<code>Advertise</code> exchange, a DHCPv6 client needs to send a <code>Request</code> message. This is done via the <code>Dhcp6SendRequestMsg</code> function in <code>NetworkPkg/Dhcp6Dxe/Dhcp6Io.c</code>.</p>
<p>This <code>Request</code> message needs to keep a few DHCPv6 options sent during the <code>Solicit</code> message, such as <code>OPTION_ORO</code> (0x6), <code>OPTION_CLIENT_ARCH_TYPE</code> (0x3D), <code>OPTION_NII</code> (0x3E), and <code>OPTION_VENDOR_CLASS</code> (0x10). These options are kept in <code>Instance-&gt;Config-&gt;OptionList</code>. Their lengths are added up ([1]), in order to calculate the size of the buffer needed to store the <code>Request</code> packet. Notice that the total size of the allocation is <code>DHCP6_BASE_PACKET_SIZE</code> (1024, defined in <code>NetworkPkg/Dhcp6Dxe/Dhcp6Impl.h</code>) plus the sum of the lengths of the options mentioned before ([2]). In our tests <code>UserLen</code> typically ends up having the value 67, so the total size of the allocation is 1091 bytes.</p>
<div><pre><span></span><code><span>EFI_STATUS</span><span></span>
<span>Dhcp6SendRequestMsg</span><span> </span><span>(</span><span></span>
<span>    </span><span>IN</span><span> </span><span>DHCP6_INSTANCE</span><span>  </span><span>*</span><span>Instance</span><span></span>
<span>    </span><span>)</span><span></span>
<span>    </span><span>[...]</span><span></span>
<span>    </span><span>//</span>
<span>    </span><span>// Calculate the added length of customized option list.</span>
<span>    </span><span>//</span>
<span>    </span><span>UserLen</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span></span>
<span>    </span><span>for</span><span> </span><span>(</span><span>Index</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span> </span><span>Index</span><span> </span><span>&lt;</span><span> </span><span>Instance</span><span>-&gt;</span><span>Config</span><span>-&gt;</span><span>OptionCount</span><span>;</span><span> </span><span>Index</span><span>++</span><span>)</span><span> </span><span>{</span><span></span>
<span>[</span><span>1</span><span>]</span><span>     </span><span>UserLen</span><span> </span><span>+=</span><span> </span><span>(</span><span>NTOHS</span><span> </span><span>(</span><span>Instance</span><span>-&gt;</span><span>Config</span><span>-&gt;</span><span>OptionList</span><span>[</span><span>Index</span><span>]</span><span>-&gt;</span><span>OpLen</span><span>)</span><span> </span><span>+</span><span> </span><span>4</span><span>);</span><span></span>
<span>    </span><span>}</span><span></span>

<span>    </span><span>//</span>
<span>    </span><span>// Create the Dhcp6 packet and initialize common fields.</span>
<span>    </span><span>//</span>
<span>[</span><span>2</span><span>]</span><span> </span><span>Packet</span><span> </span><span>=</span><span> </span><span>AllocateZeroPool</span><span> </span><span>(</span><span>DHCP6_BASE_PACKET_SIZE</span><span> </span><span>+</span><span> </span><span>UserLen</span><span>);</span><span></span>
<span>    </span><span>if</span><span> </span><span>(</span><span>Packet</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>return</span><span> </span><span>EFI_OUT_OF_RESOURCES</span><span>;</span><span></span>
<span>    </span><span>}</span><span></span>

<span>    </span><span>Packet</span><span>-&gt;</span><span>Size</span><span>                       </span><span>=</span><span> </span><span>DHCP6_BASE_PACKET_SIZE</span><span> </span><span>+</span><span> </span><span>UserLen</span><span>;</span><span></span>
<span>    </span><span>[...]</span><span></span>
</code></pre></div>

<p>The <code>Request</code> message also needs to retain the <em>Server ID</em> (0x2) option that was previously sent by the DHCPv6 server in the <code>Advertise</code> message. It is retrieved this way:</p>
<div><pre><span></span><code><span>    </span><span>[...]</span><span></span>
<span>    </span><span>//</span>
<span>    </span><span>// Get the server Id from the selected advertisement message.</span>
<span>    </span><span>//</span>
<span>    </span><span>Option</span><span> </span><span>=</span><span> </span><span>Dhcp6SeekOption</span><span> </span><span>(</span><span></span>
<span>             </span><span>Instance</span><span>-&gt;</span><span>AdSelect</span><span>-&gt;</span><span>Dhcp6</span><span>.</span><span>Option</span><span>,</span><span></span>
<span>             </span><span>Instance</span><span>-&gt;</span><span>AdSelect</span><span>-&gt;</span><span>Length</span><span> </span><span>-</span><span> </span><span>4</span><span>,</span><span></span>
<span>             </span><span>Dhcp6OptServerId</span><span></span>
<span>             </span><span>);</span><span></span>
<span>    </span><span>if</span><span> </span><span>(</span><span>Option</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>return</span><span> </span><span>EFI_DEVICE_ERROR</span><span>;</span><span></span>
<span>    </span><span>}</span><span></span>

<span>    </span><span>ServerId</span><span> </span><span>=</span><span> </span><span>(</span><span>EFI_DHCP6_DUID</span><span> </span><span>*</span><span>)(</span><span>Option</span><span> </span><span>+</span><span> </span><span>2</span><span>);</span><span></span>
<span>    </span><span>[...]</span><span></span>
</code></pre></div>

<p>Then, the <code>Request</code> packet is built by assembling all the needed options, one after the other: first the Client ID, then the Elapsed Time, then the Server ID, and so on.
Notice that when appending the Server ID option (which is fully controlled by the DHCPv6 server), its <code>Length</code> field is fully trusted, without any sanity checks. Therefore, a Server ID option with an overly large <code>Length</code> field can overflow the <code>Packet-&gt;Dhcp6.Option</code> buffer with fully controlled data (overflow data comes from the <code>DUID</code> field of the Server ID option).</p>
<div><pre><span></span><code><span>  </span><span>[...]</span><span></span>
<span>  </span><span>//</span>
<span>  </span><span>// Assembly Dhcp6 options for request message.</span>
<span>  </span><span>//</span>
<span>  </span><span>Cursor</span><span> </span><span>=</span><span> </span><span>Packet</span><span>-&gt;</span><span>Dhcp6</span><span>.</span><span>Option</span><span>;</span><span></span>

<span>  </span><span>Length</span><span> </span><span>=</span><span> </span><span>HTONS</span><span> </span><span>(</span><span>ClientId</span><span>-&gt;</span><span>Length</span><span>);</span><span></span>
<span>  </span><span>Cursor</span><span> </span><span>=</span><span> </span><span>Dhcp6AppendOption</span><span> </span><span>(</span><span></span>
<span>             </span><span>Cursor</span><span>,</span><span></span>
<span>             </span><span>HTONS</span><span> </span><span>(</span><span>Dhcp6OptClientId</span><span>),</span><span></span>
<span>             </span><span>Length</span><span>,</span><span></span>
<span>             </span><span>ClientId</span><span>-&gt;</span><span>Duid</span><span></span>
<span>             </span><span>);</span><span></span>

<span>  </span><span>Cursor</span><span> </span><span>=</span><span> </span><span>Dhcp6AppendETOption</span><span> </span><span>(</span><span></span>
<span>             </span><span>Cursor</span><span>,</span><span></span>
<span>             </span><span>Instance</span><span>,</span><span></span>
<span>             </span><span>&amp;</span><span>Elapsed</span><span></span>
<span>             </span><span>);</span><span></span>

<span>  </span><span>Cursor</span><span> </span><span>=</span><span> </span><span>Dhcp6AppendOption</span><span> </span><span>(</span><span></span>
<span>             </span><span>Cursor</span><span>,</span><span></span>
<span>             </span><span>HTONS</span><span> </span><span>(</span><span>Dhcp6OptServerId</span><span>),</span><span></span>
<span>             </span><span>ServerId</span><span>-&gt;</span><span>Length</span><span>,</span><span></span>
<span>             </span><span>ServerId</span><span>-&gt;</span><span>Duid</span><span></span>
<span>             </span><span>);</span><span></span>
</code></pre></div>

<p>The very same bug seems to be present in functions <code>Dhcp6SendDeclineMsg</code>, <code>Dhcp6SendReleaseMsg</code>, and <code>Dhcp6SendRenewRebindMsg</code> (<code>NetworkPkg/Dhcp6Dxe/Dhcp6Io.c</code>).</p>
<h3>CVE-2023-45231: Out of Bounds read when handling a ND Redirect message with truncated options</h3>
<p>Function <code>Ip6ProcessRedirect</code> in <code>NetworkPkg/Ip6Dxe/Ip6Nd.c</code> handles Neighbor Discovery (ND) protocol's <code>Redirect</code> messages.
This function calls <code>Ip6IsNDOptionValid</code> (<code>NetworkPkg/Ip6Dxe/Ip6Option.c</code>) to verify that all the options included in the <code>Redirect</code> message are valid.</p>
<div><pre><span></span><code><span>EFI_STATUS</span><span></span>
<span>Ip6ProcessRedirect</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span> </span><span>IP6_SERVICE</span><span>     </span><span>*</span><span>IpSb</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>EFI_IP6_HEADER</span><span>  </span><span>*</span><span>Head</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>NET_BUF</span><span>         </span><span>*</span><span>Packet</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>    </span><span>[...]</span><span></span>
<span>    </span><span>// All included options have a length that is greater than zero.</span>
<span>    </span><span>//</span>
<span>    </span><span>OptionLen</span><span> </span><span>=</span><span> </span><span>(</span><span>UINT16</span><span>)(</span><span>Head</span><span>-&gt;</span><span>PayloadLength</span><span> </span><span>-</span><span> </span><span>IP6_REDITECT_LENGTH</span><span>);</span><span></span>
<span>    </span><span>if</span><span> </span><span>(</span><span>OptionLen</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>Option</span><span> </span><span>=</span><span> </span><span>NetbufGetByte</span><span> </span><span>(</span><span>Packet</span><span>,</span><span> </span><span>IP6_REDITECT_LENGTH</span><span>,</span><span> </span><span>NULL</span><span>);</span><span></span>
<span>        </span><span>ASSERT</span><span> </span><span>(</span><span>Option</span><span> </span><span>!=</span><span> </span><span>NULL</span><span>);</span><span></span>

<span>        </span><span>if</span><span> </span><span>(</span><span>!</span><span>Ip6IsNDOptionValid</span><span> </span><span>(</span><span>Option</span><span>,</span><span> </span><span>OptionLen</span><span>))</span><span> </span><span>{</span><span></span>
<span>            </span><span>goto</span><span> </span><span>Exit</span><span>;</span><span></span>
<span>        </span><span>}</span><span></span>
<span>    </span><span>}</span><span></span>
<span>  </span><span>[...]</span><span></span>
</code></pre></div>

<p>If the options section of an incoming ND <code>Redirect</code> message is made of one single option, which is truncated and composed of only the Option Code (i.e. 1 single byte), <code>Ip6IsNDOptionValid</code> returns TRUE. This happens because <code>Ip6IsNDOptionValid</code> is called with parameter <code>OptionLen</code> == 1, and <code>sizeof(IP6_OPTION_HEADER)</code> is 2, therefore the <code>while</code> loop in charge of traversing the list of options ([1]) is never entered, and we just reach the <code>return TRUE</code> at the end ([2]), meaning that the truncated option is considered as valid, even though it is not.</p>
<div><pre><span></span><code><span>BOOLEAN</span><span></span>
<span>Ip6IsNDOptionValid</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT8</span><span>   </span><span>*</span><span>Option</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT16</span><span>  </span><span>OptionLen</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>    </span><span>Offset</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span></span>

<span>    </span><span>//</span>
<span>    </span><span>// RFC 4861 states that Neighbor Discovery packet can contain zero or more</span>
<span>    </span><span>// options. Start processing the options if at least Type + Length fields</span>
<span>    </span><span>// fit within the input buffer.</span>
<span>    </span><span>//</span>
<span>[</span><span>1</span><span>]</span><span> </span><span>while</span><span> </span><span>(</span><span>Offset</span><span> </span><span>+</span><span> </span><span>sizeof</span><span> </span><span>(</span><span>IP6_OPTION_HEADER</span><span>)</span><span> </span><span>-</span><span> </span><span>1</span><span> </span><span>&lt;</span><span> </span><span>OptionLen</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>[...]</span><span></span>
<span>    </span><span>}</span><span></span>

<span>[</span><span>2</span><span>]</span><span> </span><span>return</span><span> </span><span>TRUE</span><span>;</span><span></span>
<span>}</span><span></span>
</code></pre></div>

<p>After that, back in <code>Ip6ProcessRedirect</code>, options are actually processed. If our options section of the packet is composed of a single byte (i.e. a truncated option composed of just the option code), the <code>Length</code> variable takes value 1 at [3], so it enters the <code>while</code> block at [4], and at [5] or [6] (depending on the option code we specified in the truncated option), one byte is read past the end of the packet, which is the missing length field of our truncated option.</p>
<div><pre><span></span><code><span>  </span><span>// Check the options. The only interested option here is the target-link layer</span>
<span>  </span><span>// address option.</span>
<span>  </span><span>//</span>
<span>[</span><span>3</span><span>]</span><span> </span><span>Length</span><span>          </span><span>=</span><span> </span><span>Packet</span><span>-&gt;</span><span>TotalSize</span><span> </span><span>-</span><span> </span><span>40</span><span>;</span><span></span>
<span>    </span><span>Option</span><span>          </span><span>=</span><span> </span><span>(</span><span>UINT8</span><span> </span><span>*</span><span>)(</span><span>IcmpDest</span><span> </span><span>+</span><span> </span><span>1</span><span>);</span><span></span>
<span>    </span><span>LinkLayerOption</span><span> </span><span>=</span><span> </span><span>NULL</span><span>;</span><span></span>
<span>[</span><span>4</span><span>]</span><span> </span><span>while</span><span> </span><span>(</span><span>Length</span><span> </span><span>&gt;</span><span> </span><span>0</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>switch</span><span> </span><span>(</span><span>*</span><span>Option</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>case</span><span> </span><span>Ip6OptionEtherTarget</span><span>:</span><span></span>

<span>            </span><span>LinkLayerOption</span><span> </span><span>=</span><span> </span><span>(</span><span>IP6_ETHER_ADDR_OPTION</span><span> </span><span>*</span><span>)</span><span>Option</span><span>;</span><span></span>
<span>[</span><span>5</span><span>]</span><span>         </span><span>OptLen</span><span>          </span><span>=</span><span> </span><span>LinkLayerOption</span><span>-&gt;</span><span>Length</span><span>;</span><span></span>
<span>            </span><span>if</span><span> </span><span>(</span><span>OptLen</span><span> </span><span>!=</span><span> </span><span>1</span><span>)</span><span> </span><span>{</span><span></span>
<span>                </span><span>//</span>
<span>                </span><span>// For Ethernet, the length must be 1.</span>
<span>                </span><span>//</span>
<span>                </span><span>goto</span><span> </span><span>Exit</span><span>;</span><span></span>
<span>            </span><span>}</span><span></span>

<span>            </span><span>break</span><span>;</span><span></span>

<span>        </span><span>default</span><span>:</span><span></span>

<span>[</span><span>6</span><span>]</span><span>         </span><span>OptLen</span><span> </span><span>=</span><span> </span><span>*</span><span>(</span><span>Option</span><span> </span><span>+</span><span> </span><span>1</span><span>);</span><span></span>
<span>            </span><span>if</span><span> </span><span>(</span><span>OptLen</span><span> </span><span>==</span><span> </span><span>0</span><span>)</span><span> </span><span>{</span><span></span>
<span>                </span><span>//</span>
<span>                </span><span>// A length of 0 is invalid.</span>
<span>                </span><span>//</span>
<span>                </span><span>goto</span><span> </span><span>Exit</span><span>;</span><span></span>
<span>            </span><span>}</span><span></span>

<span>            </span><span>break</span><span>;</span><span></span>
<span>    </span><span>}</span><span></span>

<span>    </span><span>Length</span><span> </span><span>-=</span><span> </span><span>8</span><span> </span><span>*</span><span> </span><span>OptLen</span><span>;</span><span></span>
<span>    </span><span>Option</span><span> </span><span>+=</span><span> </span><span>8</span><span> </span><span>*</span><span> </span><span>OptLen</span><span>;</span><span></span>
<span>  </span><span>}</span><span></span>
</code></pre></div>

<h3>CVE-2023-45232: Infinite loop when parsing unknown options in the Destination Options header</h3>
<p>The function <code>Ip6IsExtsValid</code> in <code>NetworkPkg/Ip6Dxe/Ip6Option.c</code> validates the extension headers that can be found in an incoming IPv6 packet. When dealing with a <em>Destination Options</em> extension header, function <code>Ip6IsOptionValid</code> is called at [1] to validate whatever options are embedded in said <em>Destination Options</em> header:</p>
<div><pre><span></span><code><span>BOOLEAN</span><span></span>
<span>Ip6IsExtsValid</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span> </span><span>IP6_SERVICE</span><span>  </span><span>*</span><span>IpSb</span><span>           </span><span>OPTIONAL</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>NET_BUF</span><span>      </span><span>*</span><span>Packet</span><span>         </span><span>OPTIONAL</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT8</span><span>        </span><span>*</span><span>NextHeader</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT8</span><span>        </span><span>*</span><span>ExtHdrs</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT32</span><span>       </span><span>ExtHdrsLen</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>BOOLEAN</span><span>      </span><span>Rcvd</span><span>,</span><span></span>
<span>  </span><span>OUT</span><span> </span><span>UINT32</span><span>      </span><span>*</span><span>FormerHeader</span><span>   </span><span>OPTIONAL</span><span>,</span><span></span>
<span>  </span><span>OUT</span><span> </span><span>UINT8</span><span>       </span><span>**</span><span>LastHeader</span><span>,</span><span></span>
<span>  </span><span>OUT</span><span> </span><span>UINT32</span><span>      </span><span>*</span><span>RealExtsLen</span><span>    </span><span>OPTIONAL</span><span>,</span><span></span>
<span>  </span><span>OUT</span><span> </span><span>UINT32</span><span>      </span><span>*</span><span>UnFragmentLen</span><span>  </span><span>OPTIONAL</span><span>,</span><span></span>
<span>  </span><span>OUT</span><span> </span><span>BOOLEAN</span><span>     </span><span>*</span><span>Fragmented</span><span>     </span><span>OPTIONAL</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>  </span><span>[...]</span><span></span>
<span>  </span><span>while</span><span> </span><span>(</span><span>Offset</span><span> </span><span>&lt;=</span><span> </span><span>ExtHdrsLen</span><span>)</span><span> </span><span>{</span><span></span>
<span>    </span><span>switch</span><span> </span><span>(</span><span>*</span><span>NextHeader</span><span>)</span><span> </span><span>{</span><span></span>
<span>    </span><span>[...]</span><span></span>
<span>    </span><span>case</span><span> </span><span>IP6_DESTINATION</span><span>:</span><span></span>
<span>        </span><span>[...]</span><span></span>
<span>        </span><span>Offset</span><span>++</span><span>;</span><span></span>
<span>        </span><span>Option</span><span>    </span><span>=</span><span> </span><span>ExtHdrs</span><span> </span><span>+</span><span> </span><span>Offset</span><span>;</span><span></span>
<span>        </span><span>OptionLen</span><span> </span><span>=</span><span> </span><span>(</span><span>UINT8</span><span>)((</span><span>*</span><span>Option</span><span> </span><span>+</span><span> </span><span>1</span><span>)</span><span> </span><span>*</span><span> </span><span>8</span><span> </span><span>-</span><span> </span><span>2</span><span>);</span><span></span>
<span>        </span><span>Option</span><span>++</span><span>;</span><span></span>
<span>        </span><span>Offset</span><span>++</span><span>;</span><span></span>

<span>[</span><span>1</span><span>]</span><span>     </span><span>if</span><span> </span><span>((</span><span>IpSb</span><span> </span><span>!=</span><span> </span><span>NULL</span><span>)</span><span> </span><span>&amp;&amp;</span><span> </span><span>(</span><span>Packet</span><span> </span><span>!=</span><span> </span><span>NULL</span><span>)</span><span> </span><span>&amp;&amp;</span><span> </span><span>!</span><span>Ip6IsOptionValid</span><span> </span><span>(</span><span>IpSb</span><span>,</span><span> </span><span>Packet</span><span>,</span><span> </span><span>Option</span><span>,</span><span> </span><span>OptionLen</span><span>,</span><span> </span><span>Offset</span><span>))</span><span> </span><span>{</span><span></span>
<span>          </span><span>return</span><span> </span><span>FALSE</span><span>;</span><span></span>
<span>        </span><span>}</span><span></span>
<span>        </span><span>[...]</span><span></span>
</code></pre></div>

<p>The function <code>Ip6IsOptionValid</code> handles different option types. If it's not one of <code>Pad1</code>, <code>PadN</code>, or <code>RouterAlert</code>, the switch case falls into the <code>default</code> clause at [3]. In that case, the option code is masked with <code>Ip6OptionMask</code> (0xC0) at [4], and if the result of the AND operation is <code>Ip6OptionSkip</code> (0x00), then the <code>Offset</code> variable is updated by adding the value of the <code>Length</code> field of the option at [5]. Notice that it doesn't check if the <code>Length</code> field of the option is 0, in which case the <code>Offset</code> value is never modified, and thus an infinite loop ensues, since execution can never break out of the <code>while</code> loop at [2].</p>
<div><pre><span></span><code><span>Ip6IsOptionValid</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span> </span><span>IP6_SERVICE</span><span>  </span><span>*</span><span>IpSb</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>NET_BUF</span><span>      </span><span>*</span><span>Packet</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT8</span><span>        </span><span>*</span><span>Option</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT8</span><span>        </span><span>OptionLen</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT32</span><span>       </span><span>Pointer</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>    </span><span>[...]</span><span></span>
<span>[</span><span>2</span><span>]</span><span>   </span><span>while</span><span> </span><span>(</span><span>Offset</span><span> </span><span>&lt;</span><span> </span><span>OptionLen</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>OptionType</span><span> </span><span>=</span><span> </span><span>*</span><span>(</span><span>Option</span><span> </span><span>+</span><span> </span><span>Offset</span><span>);</span><span></span>

<span>        </span><span>switch</span><span> </span><span>(</span><span>OptionType</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>case</span><span> </span><span>Ip6OptionPad1</span><span>:</span><span></span>
<span>            </span><span>[...]</span><span></span>
<span>            </span><span>break</span><span>;</span><span></span>
<span>        </span><span>case</span><span> </span><span>Ip6OptionPadN</span><span>:</span><span></span>
<span>            </span><span>[...]</span><span></span>
<span>            </span><span>break</span><span>;</span><span></span>
<span>        </span><span>case</span><span> </span><span>Ip6OptionRouterAlert</span><span>:</span><span></span>
<span>            </span><span>[...]</span><span></span>
<span>            </span><span>break</span><span>;</span><span></span>
<span>        </span><span>[...]</span><span></span>
<span>[</span><span>3</span><span>]</span><span>     </span><span>default</span><span>:</span><span></span>
<span>            </span><span>//</span>
<span>            </span><span>// The highest-order two bits specify the action must be taken if</span>
<span>            </span><span>// the processing IPv6 node does not recognize the option type.</span>
<span>            </span><span>//</span>
<span>[</span><span>4</span><span>]</span><span>         </span><span>switch</span><span> </span><span>(</span><span>OptionType</span><span> </span><span>&amp;</span><span> </span><span>Ip6OptionMask</span><span>)</span><span> </span><span>{</span><span></span>
<span>            </span><span>case</span><span> </span><span>Ip6OptionSkip</span><span>:</span><span></span>
<span>[</span><span>5</span><span>]</span><span>             </span><span>Offset</span><span> </span><span>=</span><span> </span><span>(</span><span>UINT8</span><span>)(</span><span>Offset</span><span> </span><span>+</span><span> </span><span>*</span><span>(</span><span>Option</span><span> </span><span>+</span><span> </span><span>Offset</span><span> </span><span>+</span><span> </span><span>1</span><span>));</span><span></span>
<span>                </span><span>break</span><span>;</span><span></span>
<span>            </span><span>[...]</span><span></span>
</code></pre></div>

<p>As a result of this infinite loop, the affected computer never finishes booting up.</p>
<h3>CVE-2023-45233: Infinite loop when parsing a PadN option in the Destination Options header</h3>
<p>As mentioned in the previous bug, function <code>Ip6IsOptionValid</code> in <code>NetworkPkg/Ip6Dxe/Ip6Option.c</code> is called to validate whatever options are embedded in a <em>Destination Options</em> header within an IPv6 packet. The function <code>Ip6IsOptionValid</code> handles different option types. One of those supported types is <code>PadN</code> ([2]). In that case, the <code>Offset</code> variable is updated by adding the value of the <code>Length</code> field of the <code>PadN</code> option, plus 2 ([3]). If the <code>Length</code> field of the option is 0xFE, then 0x100 (0xFE + 2) will be added to <code>Offset</code>. But the result of that addition is truncated to a <code>UINT8</code> (the type of the <code>Offset</code> variable), which means that when adding 0x100 to <code>Offset</code> it will remain unmodified, and thus an infinite loop ensues, since execution can never break out of the <code>while</code> loop at [1].</p>
<div><pre><span></span><code><span>Ip6IsOptionValid</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span> </span><span>IP6_SERVICE</span><span>  </span><span>*</span><span>IpSb</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>NET_BUF</span><span>      </span><span>*</span><span>Packet</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT8</span><span>        </span><span>*</span><span>Option</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT8</span><span>        </span><span>OptionLen</span><span>,</span><span></span>
<span>  </span><span>IN</span><span> </span><span>UINT32</span><span>       </span><span>Pointer</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>    </span><span>UINT8</span><span>  </span><span>Offset</span><span>;</span><span></span>
<span>    </span><span>[...]</span><span></span>
<span>[</span><span>1</span><span>]</span><span>  </span><span>while</span><span> </span><span>(</span><span>Offset</span><span> </span><span>&lt;</span><span> </span><span>OptionLen</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>OptionType</span><span> </span><span>=</span><span> </span><span>*</span><span>(</span><span>Option</span><span> </span><span>+</span><span> </span><span>Offset</span><span>);</span><span></span>

<span>        </span><span>switch</span><span> </span><span>(</span><span>OptionType</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>[...]</span><span></span>
<span>[</span><span>2</span><span>]</span><span>     </span><span>case</span><span> </span><span>Ip6OptionPadN</span><span>:</span><span></span>
<span>            </span><span>//</span>
<span>            </span><span>// It is a PadN option</span>
<span>            </span><span>//</span>
<span>[</span><span>3</span><span>]</span><span>         </span><span>Offset</span><span> </span><span>=</span><span> </span><span>(</span><span>UINT8</span><span>)(</span><span>Offset</span><span> </span><span>+</span><span> </span><span>*</span><span>(</span><span>Option</span><span> </span><span>+</span><span> </span><span>Offset</span><span> </span><span>+</span><span> </span><span>1</span><span>)</span><span> </span><span>+</span><span> </span><span>2</span><span>);</span><span></span>
<span>            </span><span>break</span><span>;</span><span></span>
</code></pre></div>

<p>As a consequence of this infinite loop, the affected computer never finishes booting up.</p>
<h3>CVE-2023-45234: Buffer overflow when processing DNS Servers option in a DHCPv6 Advertise message</h3>
<p>The function <code>PxeBcHandleDhcp6Offer</code> in <code>NetworkPkg/UefiPxeBcDxe/PxeBcDhcp6.c</code> handles DHCPv6 offers made by DHCPv6 servers in response to EDK II <code>Solicit</code> messages.
The function allocates a pool buffer with the size given by the <code>OPTION_DNS_SERVERS</code> (0x17) option length at [1], which is controlled by the DHCPv6 server, then at [2] it calls <code>CopyMem</code> with a fixed size: <code>sizeof (EFI_IPv6_ADDRESS)</code>, which is 0x10. This means that if the length of the <code>OPTION_DNS_SERVERS</code> option included in the server response is shorter than 0x10, then that leads to a buffer overflow.</p>
<div><pre><span></span><code><span>PxeBcHandleDhcp6Offer</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span> </span><span>PXEBC_PRIVATE_DATA</span><span>  </span><span>*</span><span>Private</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>    </span><span>[...]</span><span></span>
<span>    </span><span>// First try to cache DNS server address if DHCP6 offer provides.</span>
<span>    </span><span>//</span>
<span>    </span><span>if</span><span> </span><span>(</span><span>Cache6</span><span>-&gt;</span><span>OptList</span><span>[</span><span>PXEBC_DHCP6_IDX_DNS_SERVER</span><span>]</span><span> </span><span>!=</span><span> </span><span>NULL</span><span>)</span><span> </span><span>{</span><span></span>
<span>[</span><span>1</span><span>]</span><span>     </span><span>Private</span><span>-&gt;</span><span>DnsServer</span><span> </span><span>=</span><span> </span><span>AllocateZeroPool</span><span> </span><span>(</span><span>NTOHS</span><span> </span><span>(</span><span>Cache6</span><span>-&gt;</span><span>OptList</span><span>[</span><span>PXEBC_DHCP6_IDX_DNS_SERVER</span><span>]</span><span>-&gt;</span><span>OpLen</span><span>));</span><span></span>
<span>        </span><span>if</span><span> </span><span>(</span><span>Private</span><span>-&gt;</span><span>DnsServer</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span><span> </span><span>{</span><span></span>
<span>            </span><span>return</span><span> </span><span>EFI_OUT_OF_RESOURCES</span><span>;</span><span></span>
<span>        </span><span>}</span><span></span>

<span>[</span><span>2</span><span>]</span><span>     </span><span>CopyMem</span><span> </span><span>(</span><span>Private</span><span>-&gt;</span><span>DnsServer</span><span>,</span><span> </span><span>Cache6</span><span>-&gt;</span><span>OptList</span><span>[</span><span>PXEBC_DHCP6_IDX_DNS_SERVER</span><span>]</span><span>-&gt;</span><span>Data</span><span>,</span><span> </span><span>sizeof</span><span> </span><span>(</span><span>EFI_IPv6_ADDRESS</span><span>));</span><span></span>
<span>  </span><span>}</span><span></span>
</code></pre></div>

<h3>CVE-2023-45235: Buffer overflow when handling Server ID option from a DHCPv6 proxy Advertise message</h3>
<p>The function <code>PxeBcRequestBootService</code> in <code>NetworkPkg/UefiPxeBcDxe/PxeBcDhcp6.c</code> builds and sends a request to retrieve the boot file, and parses the reply.</p>
<div><pre><span></span><code><span>EFI_STATUS</span><span></span>
<span>PxeBcRequestBootService</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span>  </span><span>PXEBC_PRIVATE_DATA</span><span>  </span><span>*</span><span>Private</span><span>,</span><span></span>
<span>  </span><span>IN</span><span>  </span><span>UINT32</span><span>              </span><span>Index</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>[...]</span><span></span>
<span>    </span><span>EFI_PXE_BASE_CODE_DHCPV6_PACKET</span><span>  </span><span>*</span><span>Discover</span><span>;</span><span></span>
<span>[...]</span><span></span>

<span>[</span><span>1</span><span>]</span><span> </span><span>Discover</span><span> </span><span>=</span><span> </span><span>AllocateZeroPool</span><span> </span><span>(</span><span>sizeof</span><span> </span><span>(</span><span>EFI_PXE_BASE_CODE_DHCPV6_PACKET</span><span>));</span><span></span>
<span>    </span><span>if</span><span> </span><span>(</span><span>Discover</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span><span> </span><span>{</span><span></span>
<span>        </span><span>return</span><span> </span><span>EFI_OUT_OF_RESOURCES</span><span>;</span><span></span>
<span>    </span><span>}</span><span></span>

<span>    </span><span>//</span>
<span>    </span><span>// Build the request packet by the cached request packet before.</span>
<span>    </span><span>//</span>
<span>    </span><span>Discover</span><span>-&gt;</span><span>TransactionId</span><span> </span><span>=</span><span> </span><span>IndexOffer</span><span>-&gt;</span><span>Dhcp6</span><span>.</span><span>Header</span><span>.</span><span>TransactionId</span><span>;</span><span></span>
<span>    </span><span>Discover</span><span>-&gt;</span><span>MessageType</span><span>   </span><span>=</span><span> </span><span>Request</span><span>-&gt;</span><span>Dhcp6</span><span>.</span><span>Header</span><span>.</span><span>MessageType</span><span>;</span><span></span>
<span>    </span><span>RequestOpt</span><span>              </span><span>=</span><span> </span><span>Request</span><span>-&gt;</span><span>Dhcp6</span><span>.</span><span>Option</span><span>;</span><span></span>
<span>    </span><span>DiscoverOpt</span><span>             </span><span>=</span><span> </span><span>Discover</span><span>-&gt;</span><span>DhcpOptions</span><span>;</span><span></span>
<span>    </span><span>DiscoverLen</span><span>             </span><span>=</span><span> </span><span>sizeof</span><span> </span><span>(</span><span>EFI_DHCP6_HEADER</span><span>);</span><span></span>
<span>    </span><span>RequestLen</span><span>              </span><span>=</span><span> </span><span>DiscoverLen</span><span>;</span><span></span>

<span>    </span><span>//</span>
<span>    </span><span>// Find Server ID Option from ProxyOffer.</span>
<span>    </span><span>//</span>
<span>[</span><span>2</span><span>]</span><span> </span><span>if</span><span> </span><span>(</span><span>Private</span><span>-&gt;</span><span>OfferBuffer</span><span>[</span><span>Index</span><span>].</span><span>Dhcp6</span><span>.</span><span>OfferType</span><span> </span><span>==</span><span> </span><span>PxeOfferTypeProxyBinl</span><span>)</span><span> </span><span>{</span><span></span>
<span>[</span><span>3</span><span>]</span><span>     </span><span>Option</span><span> </span><span>=</span><span> </span><span>PxeBcDhcp6SeekOption</span><span> </span><span>(</span><span></span>
<span>                   </span><span>IndexOffer</span><span>-&gt;</span><span>Dhcp6</span><span>.</span><span>Option</span><span>,</span><span></span>
<span>                   </span><span>IndexOffer</span><span>-&gt;</span><span>Length</span><span> </span><span>-</span><span> </span><span>4</span><span>,</span><span></span>
<span>                   </span><span>DHCP6_OPT_SERVER_ID</span><span></span>
<span>                   </span><span>);</span><span></span>
<span>        </span><span>if</span><span> </span><span>(</span><span>Option</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span><span> </span><span>{</span><span></span>
<span>          </span><span>return</span><span> </span><span>EFI_NOT_FOUND</span><span>;</span><span></span>
<span>        </span><span>}</span><span></span>

<span>      </span><span>//</span>
<span>      </span><span>// Add Server ID Option.</span>
<span>      </span><span>//</span>
<span>      </span><span>OpLen</span><span> </span><span>=</span><span> </span><span>NTOHS</span><span> </span><span>(((</span><span>EFI_DHCP6_PACKET_OPTION</span><span> </span><span>*</span><span>)</span><span>Option</span><span>)</span><span>-&gt;</span><span>OpLen</span><span>);</span><span></span>
<span>[</span><span>4</span><span>]</span><span>   </span><span>CopyMem</span><span> </span><span>(</span><span>DiscoverOpt</span><span>,</span><span> </span><span>Option</span><span>,</span><span> </span><span>OpLen</span><span> </span><span>+</span><span> </span><span>4</span><span>);</span><span></span>
<span>      </span><span>DiscoverOpt</span><span> </span><span>+=</span><span> </span><span>(</span><span>OpLen</span><span> </span><span>+</span><span> </span><span>4</span><span>);</span><span></span>
<span>      </span><span>DiscoverLen</span><span> </span><span>+=</span><span> </span><span>(</span><span>OpLen</span><span> </span><span>+</span><span> </span><span>4</span><span>);</span><span></span>
<span>    </span><span>}</span><span></span>
</code></pre></div>

<p>At [1] the function allocates a buffer in the pool to hold an <code>EFI_PXE_BASE_CODE_DHCPV6_PACKET</code> structure, which is defined this way in <code>MdePkg/Include/Protocol/PxeBaseCode.h</code>:</p>
<div><pre><span></span><code><span>///</span>
<span>/// DHCPV6 Packet structure.</span>
<span>///</span>
<span>typedef</span><span> </span><span>struct</span><span> </span><span>{</span><span></span>
<span>  </span><span>UINT32</span><span>    </span><span>MessageType</span><span>   </span><span>:</span><span> </span><span>8</span><span>;</span><span></span>
<span>  </span><span>UINT32</span><span>    </span><span>TransactionId</span><span> </span><span>:</span><span> </span><span>24</span><span>;</span><span></span>
<span>  </span><span>UINT8</span><span>     </span><span>DhcpOptions</span><span>[</span><span>1024</span><span>];</span><span></span>
<span>}</span><span> </span><span>EFI_PXE_BASE_CODE_DHCPV6_PACKET</span><span>;</span><span></span>
</code></pre></div>

<p>If the DHCPv6 offer it has received is a proxy one ([2]), then the function searches for the <em>Server ID</em> option contained within said DHCPv6 offer ([3]), and proceeds to copy it to <code>Discover-&gt;DhcpOptions</code> (the buffer that was previously allocated in the pool at [1]), blindly trusting the option length as the size of the copy, which is fully controlled by the DHCPv6 server ([4]).</p>
<p>As a result, if the <em>Server ID</em> option of the DHCPv6 proxy offer is longer than 1024 bytes (the size of the <code>DhcpOptions</code> member of the <code>EFI_PXE_BASE_CODE_DHCPV6_PACKET</code> struct), it results in a pool buffer overflow.</p>
<h3>CVE-2023-45236: Predictable TCP Initial Sequence Numbers</h3>
<p>Predictable TCP Initial Sequence Numbers (ISNs) are known to be a security issue since 1985 (see <a href="http://nil.lcs.mit.edu/rtm/papers/117.pdf">Morris1985</a> and <a href="https://www.cs.columbia.edu/~smb/papers/acsac-ipext.pdf">Belovin1989</a>) and a practical attack that exploits it was described in 1995 by Laurent Joncheray (<a href="https://www.usenix.org/legacy/publications/library/proceedings/security95/full_papers/joncheray.pdf">Joncheray1995</a>). A real world instance of an attack that exploited weak TCP ISNs to inject data in a TCP session to compromise a system was disclosed in 1995 (<a href="https://www.win.tue.nl/~aeb/linux/hh/shimomura-25jan95.txt">Shimomura1995</a>).</p>
<p>Given these and other findings, <a href="https://www.rfc-editor.org/rfc/rfc1948">RFC1948</a> proposed an algorithm to generate TCP ISNs in a way that prevents the described attack. In 2012 <a href="https://www.rfc-editor.org/rfc/rfc6528">RFC6528</a> officially updated the TCP protocol specification and the new TCP ISN algorithm achieved the status of Proposed Standard. In August 2022, <a href="https://datatracker.ietf.org/doc/html/rfc9293">RFC 9293</a> a revision of the core TCP specification was published as the new Internet Standard, and the aforementioned algorithm was recommended for the generation of TCP ISNs.</p>
<p>The TCP implementation in Tianocore's EDK II IP stack generates trivially predictable TCP Initial Sequence Numbers and it is therefore vulnerable to TCP session hijack attacks.</p>
<p>The ISN for a new TCP instance is populated in <code>TcpInitTcbLocal</code> by calling <code>TcpGetIss()</code> as shown below
in file <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/TcpDxe/TcpMisc.c#L69">TcpMisc.c</a></p>
<div><pre><span></span><code><span>TcpInitTcbLocal</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span> </span><span>OUT</span><span> </span><span>TCP_CB</span><span>  </span><span>*</span><span>Tcb</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>  </span><span>//</span>
<span>  </span><span>// Compute the checksum of the fixed parts of pseudo header</span>
<span>  </span><span>//</span>
<span>  </span><span>if</span><span> </span><span>(</span><span>Tcb</span><span>-&gt;</span><span>Sk</span><span>-&gt;</span><span>IpVersion</span><span> </span><span>==</span><span> </span><span>IP_VERSION_4</span><span>)</span><span> </span><span>{</span><span></span>
<span>    </span><span>Tcb</span><span>-&gt;</span><span>HeadSum</span><span> </span><span>=</span><span> </span><span>NetPseudoHeadChecksum</span><span> </span><span>(</span><span></span>
<span>                     </span><span>Tcb</span><span>-&gt;</span><span>LocalEnd</span><span>.</span><span>Ip</span><span>.</span><span>Addr</span><span>[</span><span>0</span><span>],</span><span></span>
<span>                     </span><span>Tcb</span><span>-&gt;</span><span>RemoteEnd</span><span>.</span><span>Ip</span><span>.</span><span>Addr</span><span>[</span><span>0</span><span>],</span><span></span>
<span>                     </span><span>0x06</span><span>,</span><span></span>
<span>                     </span><span>0</span><span></span>
<span>                     </span><span>);</span><span></span>
<span>  </span><span>}</span><span> </span><span>else</span><span> </span><span>{</span><span></span>
<span>    </span><span>Tcb</span><span>-&gt;</span><span>HeadSum</span><span> </span><span>=</span><span> </span><span>NetIp6PseudoHeadChecksum</span><span> </span><span>(</span><span></span>
<span>                     </span><span>&amp;</span><span>Tcb</span><span>-&gt;</span><span>LocalEnd</span><span>.</span><span>Ip</span><span>.</span><span>v6</span><span>,</span><span></span>
<span>                     </span><span>&amp;</span><span>Tcb</span><span>-&gt;</span><span>RemoteEnd</span><span>.</span><span>Ip</span><span>.</span><span>v6</span><span>,</span><span></span>
<span>                     </span><span>0x06</span><span>,</span><span></span>
<span>                     </span><span>0</span><span></span>
<span>                     </span><span>);</span><span></span>
<span>  </span><span>}</span><span></span>

<span>&gt;</span><span> </span><span>Tcb</span><span>-&gt;</span><span>Iss</span><span>    </span><span>=</span><span> </span><span>TcpGetIss</span><span> </span><span>();</span><span> </span><span>/** new ISN is populated **/</span><span></span>
<span>  </span><span>Tcb</span><span>-&gt;</span><span>SndUna</span><span> </span><span>=</span><span> </span><span>Tcb</span><span>-&gt;</span><span>Iss</span><span>;</span><span></span>
<span>  </span><span>Tcb</span><span>-&gt;</span><span>SndNxt</span><span> </span><span>=</span><span> </span><span>Tcb</span><span>-&gt;</span><span>Iss</span><span>;</span><span></span>

<span>  </span><span>Tcb</span><span>-&gt;</span><span>SndWl2</span><span> </span><span>=</span><span> </span><span>Tcb</span><span>-&gt;</span><span>Iss</span><span>;</span><span></span>
<span>  </span><span>Tcb</span><span>-&gt;</span><span>SndWnd</span><span> </span><span>=</span><span> </span><span>536</span><span>;</span><span></span>
</code></pre></div>

<p>The function <code>TcpGetIss</code> simply increments a global counter using a fixed increment as seen <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/TcpDxe/TcpMisc.c#L514">below</a>:</p>
<div><pre><span></span><code><span>TCP_SEQNO</span><span></span>
<span>TcpGetIss</span><span> </span><span>(</span><span></span>
<span>  </span><span>VOID</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>  </span><span>mTcpGlobalIss</span><span> </span><span>+=</span><span> </span><span>TCP_ISS_INCREMENT_1</span><span>;</span><span></span>
<span>  </span><span>return</span><span> </span><span>mTcpGlobalIss</span><span>;</span><span></span>
<span>}</span><span></span>
</code></pre></div>

<p>The global variable <code>mTcpGlobalIss</code> is initialized to a fixed value in <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/TcpDxe/TcpMisc.c#L23">line 23 of TcpMisc.c</a></p>
<div><pre><span></span><code><span>TCP_SEQNO</span><span>  </span><span>mTcpGlobalIss</span><span> </span><span>=</span><span> </span><span>TCP_BASE_ISS</span><span>;</span><span></span>
</code></pre></div>

<p>The global variable is also updated with a fixed increment by the timer in <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/TcpDxe/TcpTimer.c#L486">TcpTimer.c</a></p>
<div><pre><span></span><code><span>VOID</span><span></span>
<span>EFIAPI</span><span></span>
<span>TcpTickingDpc</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span> </span><span>VOID</span><span>  </span><span>*</span><span>Context</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>  </span><span>LIST_ENTRY</span><span>  </span><span>*</span><span>Entry</span><span>;</span><span></span>
<span>  </span><span>LIST_ENTRY</span><span>  </span><span>*</span><span>Next</span><span>;</span><span></span>
<span>  </span><span>TCP_CB</span><span>      </span><span>*</span><span>Tcb</span><span>;</span><span></span>
<span>  </span><span>INT16</span><span>       </span><span>Index</span><span>;</span><span></span>

<span>  </span><span>mTcpTick</span><span>++</span><span>;</span><span></span>
<span>  </span><span>mTcpGlobalIss</span><span> </span><span>+=</span><span> </span><span>TCP_ISS_INCREMENT_2</span><span>;</span><span></span>
</code></pre></div>

<p>The values <code>TCP_BASE_ISS</code>, <code>TCP_ISS_INCREMENT_1</code> and <code>TCP_ISS_INCREMENT_2</code> are defined in <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/TcpDxe/TcpMain.h#L52">TcpMain.h</a>:</p>
<div><pre><span></span><code><span>///</span>
<span>/// The implementation selects the initial send sequence number and the unit to</span>
<span>/// be added when it is increased.</span>
<span>///</span>
<span>#define TCP_BASE_ISS         0x4d7e980b</span>
<span>#define TCP_ISS_INCREMENT_1  2048</span>
<span>#define TCP_ISS_INCREMENT_2  100</span>
</code></pre></div>

<p>Therefore Tianocore's EDK II TCP implementation generates ISNs using fixed increments from a fixed base value and thus is susceptible to TCP session injection and session hijack attacks.</p>
<h3>CVE-2023-45237: Use of a Weak PseudoRandom Number Generator</h3>
<p>The EDK II IP stack uses a pseudorandom number generator which is defined in <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/Include/Library/NetLib.h#L542"><code>Network/Include/Library/NetLIb.h</code></a> as:</p>
<div><pre><span></span><code><span>#define NET_RANDOM(Seed)  ((UINT32) ((UINT32) (Seed) * 1103515245UL + 12345) % 4294967295UL)</span>
</code></pre></div>

<p>Throughout the NetworkPkg stack the above macro is used with <code>Seed</code> usually taking the value from the <code>NetRandomInitSeed()</code> function defined in <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/Library/DxeNetLib/DxeNetLib.c#L898">NetworkPkg/Library/DxeNetLib/DxeNetLib.c</a> as follows:</p>
<div><pre><span></span><code><span>UINT32</span><span></span>
<span>EFIAPI</span><span></span>
<span>NetRandomInitSeed</span><span> </span><span>(</span><span></span>
<span>  </span><span>VOID</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span>  </span><span>EFI_TIME</span><span>  </span><span>Time</span><span>;</span><span></span>
<span>  </span><span>UINT32</span><span>    </span><span>Seed</span><span>;</span><span></span>
<span>  </span><span>UINT64</span><span>    </span><span>MonotonicCount</span><span>;</span><span></span>

<span>  </span><span>gRT</span><span>-&gt;</span><span>GetTime</span><span> </span><span>(</span><span>&amp;</span><span>Time</span><span>,</span><span> </span><span>NULL</span><span>);</span><span></span>
<span>  </span><span>Seed</span><span>  </span><span>=</span><span> </span><span>(</span><span>Time</span><span>.</span><span>Hour</span><span> </span><span>&lt;&lt;</span><span> </span><span>24</span><span> </span><span>|</span><span> </span><span>Time</span><span>.</span><span>Day</span><span> </span><span>&lt;&lt;</span><span> </span><span>16</span><span> </span><span>|</span><span> </span><span>Time</span><span>.</span><span>Minute</span><span> </span><span>&lt;&lt;</span><span> </span><span>8</span><span> </span><span>|</span><span> </span><span>Time</span><span>.</span><span>Second</span><span>);</span><span></span>
<span>  </span><span>Seed</span><span> </span><span>^=</span><span> </span><span>Time</span><span>.</span><span>Nanosecond</span><span>;</span><span></span>
<span>  </span><span>Seed</span><span> </span><span>^=</span><span> </span><span>Time</span><span>.</span><span>Year</span><span> </span><span>&lt;&lt;</span><span> </span><span>7</span><span>;</span><span></span>

<span>  </span><span>gBS</span><span>-&gt;</span><span>GetNextMonotonicCount</span><span> </span><span>(</span><span>&amp;</span><span>MonotonicCount</span><span>);</span><span></span>
<span>  </span><span>Seed</span><span> </span><span>+=</span><span> </span><span>(</span><span>UINT32</span><span>)</span><span>MonotonicCount</span><span>;</span><span></span>

<span>  </span><span>return</span><span> </span><span>Seed</span><span>;</span><span></span>
<span>}</span><span></span>
</code></pre></div>

<p>The above function outputs an integer value based on the platform's clock time at which the function is called and the platform's monotonic counter. The C language idiom <code>NET_RANDOM (NetRandomInitSeed()</code> is used in several <code>NetworkPkg</code> functions to generate supposedly random unique numeric identifiers for various network protocol fields. Generating numbers in such a way does not produce random numbers with a uniform distribution, instead, it produces easily predictable numbers and a biased distribution. Furthermore, the use of the same idiom in different network layers to assign allegedly random values to protocols' fields or objects makes it possible for an external observer to recover the internal state of the generator by obtaining samples of the numbers used in any such network layer.</p>
<p>The idiom is used to generate DNS query IDs in <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/DnsDxe/DnsImpl.c#L1980"><code>ConstructDNSQuery</code></a>:</p>
<div><pre><span></span><code><span>ConstructDNSQuery</span><span> </span><span>(</span><span></span>
<span>  </span><span>IN</span><span>  </span><span>DNS_INSTANCE</span><span>  </span><span>*</span><span>Instance</span><span>,</span><span></span>
<span>  </span><span>IN</span><span>  </span><span>CHAR8</span><span>         </span><span>*</span><span>QueryName</span><span>,</span><span></span>
<span>  </span><span>IN</span><span>  </span><span>UINT16</span><span>        </span><span>Type</span><span>,</span><span></span>
<span>  </span><span>IN</span><span>  </span><span>UINT16</span><span>        </span><span>Class</span><span>,</span><span></span>
<span>  </span><span>OUT</span><span> </span><span>NET_BUF</span><span>       </span><span>**</span><span>Packet</span><span></span>
<span>  </span><span>)</span><span></span>
<span>{</span><span></span>
<span> </span><span>...</span><span></span>
<span>  </span><span>//</span>
<span>  </span><span>// Fill header</span>
<span>  </span><span>//</span>
<span>  </span><span>DnsHeader</span><span>                    </span><span>=</span><span> </span><span>(</span><span>DNS_HEADER</span><span> </span><span>*</span><span>)</span><span>Frag</span><span>.</span><span>Bulk</span><span>;</span><span></span>
<span>  </span><span>DnsHeader</span><span>-&gt;</span><span>Identification</span><span>    </span><span>=</span><span> </span><span>(</span><span>UINT16</span><span>)</span><span>NET_RANDOM</span><span> </span><span>(</span><span>NetRandomInitSeed</span><span> </span><span>());</span><span></span>
<span>  </span><span>DnsHeader</span><span>-&gt;</span><span>Flags</span><span>.</span><span>Uint16</span><span>      </span><span>=</span><span> </span><span>0x0000</span><span>;</span><span></span>
<span>  </span><span>DnsHeader</span><span>-&gt;</span><span>Flags</span><span>.</span><span>Bits</span><span>.</span><span>RD</span><span>     </span><span>=</span><span> </span><span>1</span><span>;</span><span></span>
<span>  </span><span>DnsHeader</span><span>-&gt;</span><span>Flags</span><span>.</span><span>Bits</span><span>.</span><span>OpCode</span><span> </span><span>=</span><span> </span><span>DNS_FLAGS_OPCODE_STANDARD</span><span>;</span><span></span>
<span>  </span><span>DnsHeader</span><span>-&gt;</span><span>Flags</span><span>.</span><span>Bits</span><span>.</span><span>QR</span><span>     </span><span>=</span><span> </span><span>DNS_FLAGS_QR_QUERY</span><span>;</span><span></span>
<span>  </span><span>...</span><span></span>
</code></pre></div>

<p>It is also used to initialize the value of the IPv4 IP ID field in <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/Ip4Dxe/Ip4Driver.c#L656"><code>Ip4DriverBindingStart()</code></a>:</p>
<div><pre><span></span><code><span>//</span>
<span>  </span><span>// Initialize the IP4 ID</span>
<span>  </span><span>//</span>
<span>  </span><span>mIp4Id</span><span> </span><span>=</span><span> </span><span>(</span><span>UINT16</span><span>)</span><span>NET_RANDOM</span><span> </span><span>(</span><span>NetRandomInitSeed</span><span> </span><span>());</span><span></span>
</code></pre></div>

<p>which is simply incremented for each outgoing IPv4 datagram in <a href="https://github.com/tianocore/edk2/blob/master/NetworkPkg/Ip4Dxe/Ip4Output.c#L258"><code>Ip4Output()</code></a></p>
<div><pre><span></span><code><span>  </span><span>// Before IPsec process, prepared the IP head.</span>
<span>  </span><span>// If Ip4Output is transmitting RawData, don't update IPv4 header.</span>
<span>  </span><span>//</span>
<span>  </span><span>HeadLen</span><span> </span><span>=</span><span> </span><span>sizeof</span><span> </span><span>(</span><span>IP4_HEAD</span><span>)</span><span> </span><span>+</span><span> </span><span>((</span><span>OptLen</span><span> </span><span>+</span><span> </span><span>3</span><span>)</span><span> </span><span>&amp;</span><span> </span><span>(</span><span>~</span><span>0x03</span><span>));</span><span></span>

<span>  </span><span>if</span><span> </span><span>((</span><span>IpInstance</span><span> </span><span>!=</span><span> </span><span>NULL</span><span>)</span><span> </span><span>&amp;&amp;</span><span> </span><span>IpInstance</span><span>-&gt;</span><span>ConfigData</span><span>.</span><span>RawData</span><span>)</span><span> </span><span>{</span><span></span>
<span>    </span><span>RawData</span><span> </span><span>=</span><span> </span><span>TRUE</span><span>;</span><span></span>
<span>  </span><span>}</span><span> </span><span>else</span><span> </span><span>{</span><span></span>
<span>    </span><span>Head</span><span>-&gt;</span><span>HeadLen</span><span> </span><span>=</span><span> </span><span>(</span><span>UINT8</span><span>)(</span><span>HeadLen</span><span> </span><span>&gt;&gt;</span><span> </span><span>2</span><span>);</span><span></span>
<span>    </span><span>Head</span><span>-&gt;</span><span>Id</span><span>      </span><span>=</span><span> </span><span>mIp4Id</span><span>++</span><span>;</span><span></span>
<span>    </span><span>Head</span><span>-&gt;</span><span>Ver</span><span>     </span><span>=</span><span> </span><span>4</span><span>;</span><span></span>
<span>    </span><span>RawData</span><span>       </span><span>=</span><span> </span><span>FALSE</span><span>;</span><span></span>
<span>  </span><span>}</span><span></span>
</code></pre></div>

<p>The same idiom is used to initialize the fragment ID for IPv6 fragmentation Extension Headers, to generate DHCP transaction IDs on both Dhcp4 and Dhcp6 code, to obtain ephemeral port numbers for UDP and TCP, and in other parts of the stack.</p>
<p>The security and privacy vulnerabilities arising from the use of a weak pseudorandom number generator in various Internet Protocols are described in <a href="https://datatracker.ietf.org/doc/rfc9414/">RFC 9414</a> and a number of algorithms to address those issues are suggested in <a href="https://datatracker.ietf.org/doc/rfc9414/">RFC 9415</a>. In this particular case, the use of a weak PRNG could facilitate DNS and DHCP poisoning attacks, information leakage, denial of service, and data insertion attacks at the IPv4 and IPv6 layer (due also to the use of a per datagram unit increment of the corresponding ID fields).</p>
<p>At the root of this issue is the use of a <em>Linear Congruential Generator</em> to generate a sequence of pseudorandom <em>security-sensitive</em> numbers. The unsuitability of LCGs for security-sensitive purposes (where the numbers generated should not be guessable) has been known for decades, for example in <a href="https://www.enseignement.polytechnique.fr/profs/informatique/Francois.Morain/Master1/Crypto/projects/Stern87.pdf">Stern 1987</a>.</p>
<h3>Acknowledgements</h3>
<p>We would like to thank our colleagues at Quarkslab for providing feedback and reviewing and editing this blog post.
We would also like to thank Vijay Sarvepalli of CERT/CC, the team members of CERT-FR, and all the PSIRT and product security coordinators from the multiple vendors that participated in the disclosure process.</p>
<h3>Disclosure timeline</h3>
<p>Below we include a timeline of all the relevant events during the coordinated vulnerability disclosure process with the intent of providing transparency to the whole process and our actions. The timeline also serves as a detailed example of the complexity of reporting vulnerabilities and coordinating the development and release of security fixes in a complex multi-vendor firmware supply chain.</p>
<ul>
<li><strong>2023-08-03</strong> Quarkslab sent to CERT/CC a report describing the vulnerabilities and providing proof-of-concept programs to reproduce the first 7 of them. A case was opened in CERT's vulnerability coordination portal. Disclosure deadline is set to November 2nd, 2023.</li>
<li><strong>2023-08-03</strong> <strong>CERT/CC made the report in the vulnerability reporting portal available to vendors and set the target disclosure date to November 2nd, 2023</strong>.</li>
<li><strong>2023-08-04</strong> Quarkslab opened 9 issues in Google's ChromeOS issue tracker because EDK2 is included as a package in the ChromeOS source code tree.</li>
<li><strong>2023-08-05</strong> Google indicated that EDK2 is not used in production Chromebooks and therefore they are not affected by the vulnerabilities.</li>
<li><strong>2023-08-08</strong> Tianocore opened an issue in their issue tracker.</li>
<li><strong>2023-08-08</strong> Insyde Software requested clarifications about the disclosure date. Quarkslab indicated disclosure is set to November 2nd, 2023, 90 days since the initial report.</li>
<li><strong>2023-08-17</strong> Quarkslab posted on the vulnerability coordination portal a request for a status update and asked if the vulnerabilities have been triaged, if any vendors have confirmed being vulnerable, if there were any estimated dates for fixes, if CVEs have been assigned, and indicated that it did not have access to Tianocore's bug tracking system to see progress on the treatment of the issues.</li>
<li><strong>2023-
08-18</strong> AMI informed that Tianocore's PSIRT lead had retired and explained that once a new one was assigned, a volunteer would pick up the issue. Indicated that November 2nd, 2023 was too optimistic for a deadline and asked if Quarkslab had plans for public disclosure.</li>
<li><strong>2023-08-18</strong> Quarkslab replied that disclosure was potentially planned in talk at an upcoming security conference and that in any case, results of the associated research project had to be published in 2023.</li>
<li><strong>2023-08-18</strong> AMI informed that Tianocore was considering acknowledging vulnerability finders in their public advisories and that to improve responsiveness anyone could contribute fixes.</li>
<li><strong>2023-08-20</strong> Quarkslab encouraged Tianocore's adoption of the policy of acknowledging bug finders as other vendors do and asked if it was suggested that to improve responsiveness Quarkslab should contribute the fixes. Indicated that the suggestion would be considered but since vendors in the Tianocore consortium had 100x to 1000x more engineering capacity and based their commercial UEFI implementations on EDK2, it would be more reasonable for them to develop the fixes and not rely on external contributors.</li>
<li><strong>2023-08-28</strong> AMI wrote that often researchers are well positioned to implement fixes, informed that it opened 9 issues in Tianocore bug tracker to follow each vulnerability individually, and asked if Quarkslab felt it could remediate any.  </li>
<li><strong>2023-08-28</strong> Quarkslab replied that the maintainers and developers of EDK2 would be in the best position to develop and test fixes, as they are already familiar with the code and do not have to incur in any setup cost to do it. Quarkslab would rather like that the organizations supporting Tianocore dedicated their vast resources to implement fixes in a timely manner. In Quarkslab's opinion, fixes for vulnerabilities 1 to 7 should be easy to produce quickly, while vulnerabilities 8 and 9 would take more time as they require implementation and use of a new PRNG (possibly using building blocks that already exist in EDK2) in the PXE stack. However, given that these issues have been known and documented for over a quarter of a century, they should be considered public knowledge in any open source network stack.</li>
<li><strong>2023-09-06</strong> Insyde Software asked Quarkslab if the publication date could be postponed by 30 days, as the issues had to be addressed by 4 sets of PSIRT teams (Tianocore, IFVs, ODMs, OEMs). </li>
<li><strong>2023-09-06</strong> Quarkslab agreed to re-schedule disclosure to December 1st, 2023 and said that so far only Insyde Software indicated it was affected and addressing the vulnerabilities.</li>
<li><strong>2023-09-09</strong> Phoenix Technologies indicated that several members of Tianocore's open-source community were working on patches, and the first 7 vulnerabilities would have patches shortly and the other two would take a bit longer. CVEs would be assigned soon. </li>
<li><strong>2023-09-10</strong> Phoenix Technologies shared the CVEs assigned by Tianocore.</li>
<li><strong>2023-09-11</strong> A Tianocore core developer indicated that he was working on making fixes unit-testable.</li>
<li><strong>2023-09-14</strong> <strong>CERT/CC updated the target disclosure date to December 1st, 2023</strong>.</li>
<li><strong>2023-10-06</strong> AMI indicated that non-validated patches were available on Tianocore's bug tracker.</li>
<li><strong>2023-10-12</strong> Google indicated that it removed the unused EDK2 package from their source code repos. The 9 issues were closed.</li>
<li><strong>2023-10-23</strong> Microsoft asked if it was possible to postpose the Dec. 1, 2023 disclosure date as they would need more time to deploy a complete fix on their cloud infrastructure and depended on some partners for it. Also asked if Quarkslab was to publish the details in a blog post.</li>
<li><strong>2023-10-23</strong> Quarkslab agreed to reschedule disclosure to December 7th, 2023 but reminded that, as stated in August, needed to publish the research work within 2023. It also indicated that since vendors were already progressing towards releasing fixes, it did not think reasonable to delay disclosure much longer, and confirmed that details about the vulnerabilities would be published in a blog post.</li>
<li><strong>2023-10-25</strong> Microsoft said that postponing disclosure one week was immaterial as it would not allow sufficient time to roll out comprehensive fixes to customers. Asked for the specific technical content of the blog post to be published, expressing concerns that exploit code would be included and asked if it was possible not to do so. Indicated that they had confirmed with Tianocore that patches were not finalized yet and were unlikely to be available before the December disclosure date and that they disagreed with Quarkslab's assumption that "vendors were progressing towards releasing fixes". Microsoft asked to hold off disclosure until May 2024.</li>
<li><strong>2023-10-25</strong> A Tianocore core developer requested more time to get products patched and clarified that there were no validated patches on the open source side yet, a first draft had been submitted for review and the expectation was they'd become available in November to Tianocore's infosec community. Patches would then have to be integrated, tested and deployed to customer devices which usually takes months. The core developer referenced a <a href="https://uefi.org/sites/default/files/resources/What%20is%20UEFI-Aug31-2023-Final.pdf">UEFI Forum paper</a> which describes the complex supply chain challenges of the UEFI ecosystem, and indicated that "any public announcement before middle of 2024 would cause significant negative impact."</li>
<li><strong>2023-10-25</strong> Phoenix Technologies expressed strong support for Tianocore's and Microsoft's position and indicated that the ongoing case was mentioned in a podcast (without providing any technical details) to exemplify the difficulties of producing patches and why embargo lengths must be flexible. </li>
<li><strong>2023-10-27</strong> CERT/CC asked Tianocore and vendors to continue working with supply-chain channels and partners towards the disclosure date as it may be difficult for Quarkslab to postpone it since it was also working with other stakeholders.</li>
<li><strong>2023-11-01</strong> A Tianocore core developer indicated that some patches were being unit tested and submitted for validation.</li>
<li><strong>2023-11-07</strong> AMI told Quarkslab that Tianocore considered CVE-2023-45236 and CVE-2023-45237 weaknesses rather than vulnerabilities primarily due to lack of "proven, computationally feasible exploitability" and asked to provide a PoC if it existed.</li>
<li><strong>2023-11-08</strong> Dell asked for confirmation that Quarkslab planned to  disclose the vulnerabilities in a blog post.</li>
<li><strong>2023-11-11</strong> Microsoft asked Quarkslab to share a technical draft of the contents that would be published in the blog, reiterated its concerns that it would contain explicit details regarding exploit code and asked for the exploit code not to be added.</li>
<li><strong>2023-11-13</strong> Dell agreed with Microsoft's position that delaying disclosure one week did not make a difference, and said that a later disclosure (May 2024) would be more suitable. </li>
<li><strong>2023-11-13</strong> A Tianocore core developer indicated that patches for the vulnerabilities 1 to 7 were available in a private Pull Request on Tianocore's GitHub repository.</li>
<li><strong>2023-11-13</strong> Microsoft stated that 4 vendors had expressed concerns about the December 12th, 2023 disclosure date and asked CERT/CC to relay their message to Quarkslab.</li>
<li><strong>2023-11-14</strong> Quarkslab responded to AMI's message communicating Tianocore's assessment of <strong>CVE-2023-45236</strong> and <strong>CVE-2023-45237</strong> as weaknesses rather than vulnerabilities. Quarkslab expressed disagreement with such an assessment stating that <strong>CVE-2023-45236</strong> (TCP ISNs with the same algorithm as EDK2) had been <a href="https://www.win.tue.nl/~aeb/linux/hh/shimomura-25jan95.txt">exploited in the wild</a> in 1995 and merited a <a href="https://insights.sei.cmu.edu/documents/502/1995_019_001_496168.pdf">security advisory published by CERT</a>, mitigations were proposed in <a href="https://datatracker.ietf.org/doc/html/rfc1948">RFC 1948</a> in 1996, Microsoft considered it a <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/1999/ms99-046"><strong>Critical</strong> vulnerability</a> in 1999, motivated another <a href="https://vuls.cert.org/confluence/pages/viewpage.action?pageId=96665752">CERT Advisory</a> in 2001 and was <a href="https://nvd.nist.gov/vuln/detail/cve-2011-3188">fixed again in the Linux kernel</a> in 2011. Over almost 3 decades every major operating system vendor considered it a vulnerability and fixed it as such and therefore Quarkslab did not believe producing an actual exploit was necessary to prove "computationally feasible exploitability". 
With regards to <strong>CVE-2023-45237</strong> (Use of weak PRNG to generate numeric IDs in the network stack) the same long history of vulnerability disclosures and fixes could be pointed out in several components that suffered from the problem, the most known being predictable DNS query IDs, <a href="https://www.openbsd.org/advisories/sni_12_resolverid.txt">first reported and fixed in 1997</a> and multiple times afterwards, including the fixes issued in 2008 for almost every DNS resolver and DNS server on the planet (for example in <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2008/ms08-020">MS08-20</a>). Quarkslab's vulnerability report pointed at <a href="https://www.rfc-editor.org/info/rfc9414">RFC 9414</a> which details the long history of problems associated to generation of numeric IDs in network protocols. At the core of these issues is the use of a <em>Linear Congruential Generator</em> to generate a sequence of pseudorandom numbers. EDK2 uses the same LCG as glibc 2.26 (the exact same parameters). The unsuitability of LCGs for security-sensitive purposes (where the numbers generated should not be guessable) have been known for decades, for example in <a href="https://www.enseignement.polytechnique.fr/profs/informatique/Francois.Morain/Master1/Crypto/projects/Stern87.pdf">Stern 1987</a>, therefore Quarkslab did not consider necessary to produce an exploit to prove exploitability.</li>
<li><strong>2023-11-14</strong> Quarkslab replied to the prior requests and commentary from various vendors as follows:<ul>
<li>Stated that the blog post about the issues would contain the technical report submitted to the disclosure coordination forum and a detailed timeline of the relevant events in the disclosure process. It would include proof-of-concept code to trigger vulnerabilities 1 to 7 but NOT exploit code. Reiterated that the purpose of reporting the vulnerabilities was to help vendors identify and fix them, not to debate about the editorial policies for Quarkslab research work. Nonetheless it was willing to discuss that, as well as the quality and lack of technical information in the security advisories and bulletins published by vendors, at an appropriate venue or in a different context.</li>
<li>Indicated that the Quarkslab's statement of October 23rd ("vendors were progressing towards releasing fixes") was based not on opinion but the factual evidence of vendor posts on the vulnerability coordination portal.</li>
<li>Strongly disagreed with the opinion expressed by a vendor that "any public announcement before middle of 2024 would cause significant negative impact" and argued that what had significant negative impact was the risk those vulnerabilities were posing to the uninformed users and organizations that run EDK2-derived firmware implementations with the vulnerable NetworkPkg component, and that informing them of their exposure and giving them the necessary information to either fix the vulnerabilities (ideally with official patches), to mitigate them, or to be able to detect active attacks was actually the opposite of having "significant negative impact".</li>
<li>Indicated that 3 months after the initial report date not a single vendor had committed to an estimated release date for fixes. The original 90-day embargo period was extended to 120 days upon request from a vendor (Insyde Software) and at the time (2 months prior) no vendor objected the new deadline. Yet only 2 weeks ago one vendor proposed to postpone the disclosure deadline for 6 months with no actual concrete release date or timeline for fixes.</li>
<li>Commented that the referenced UEFI Forum paper provides a good description of the complexity of the UEFI firmware supply chain but it argued for a 300-day embargo period by presenting an exceptional case as if it was the general one, and assuming that the existing series of interlocked, extremely waterfall-oriented, software development lifecycles of all stakeholders should explain the need of such period. Quarkslab noted that in August 2023 the US Cybersecurity &amp; Infrastructure Security Agency (CISA) published <a href="https://www.cisa.gov/news-events/news/call-action-bolster-uefi-cybersecurity-now">A Call to Action: Bolster UEFI Cybersecurity Now</a> calling for UEFI vulnerability response, including timely and effective update mechanisms.</li>
<li>Summarized its position with the following: Quarkslab was being asked to extend the embargo period from 120 days (which had already been extended from the original 90) to about 10 months counting from initial report date, without any firm commitment from any vendor to an actual release date and an opaque timeline. Delaying disclosure implies keeping Quarkslab's partners and customers at risk and in the dark about the vulnerabilities, which in turn put the company in a very uncomfortable position where malicious activities or cyberattacks could happen during that extended time frame. Because of the above, a priori was not inclined to extend our embargo period but since Quarkslab is a company incorporated in France, it decided to consult with CERT-FR (the national CERT of France operated by ANSSI, the French cybersecurity agency) to determine how to proceed. Precise status updates and firm commitment to a release date from affected vendors would be useful to inform any decision.</li>
</ul>
</li>
<li><strong>2023-11-23</strong> Quarkslab contacted CERT-FR and provided the technical report of the vulnerabilities and a summary of the coordinated vulnerability disclosure timeline so far.</li>
<li><strong>2023-11-27</strong> CERT-FR acknowledged the report and summary timeline and requested further discussion in a conference call.</li>
<li><strong>2023-11-27</strong> Quarkslab informed all stakeholder that it was discussing with CERT-FR and in the meantime postponed disclosure to December 12th, 2023. Reiterated that status updates and firm commitment to a release date from affected vendors would be useful to inform any decision.</li>
<li><strong>2023-11-27</strong> <strong>CERT/CC updated the target disclosure date to December 12th, 2023</strong>.</li>
<li><strong>2023-12-06</strong> Quarkslab indicated that at a week before the disclosure date it still did not have any status update from any vendor nor commitments to any release date for fixes.</li>
<li><strong>2023-12-06</strong> Insyde Software submitted a status update and flagged it as public.</li>
<li><strong>2023-12-06</strong> AMI updated their status and indicated the PSIRT activities including advertisement and remediation have been on-going with customers. An advisory would be issued on December 12th, 2023.</li>
<li><strong>2023-12-06</strong> Microsoft updated the status and indicated internal discussions regarding fix commitment timelines were still ongoing.</li>
<li><strong>2023-12-09</strong> Quarkslab indicated that it was still coordinating with CERT-FR and CERT/CC and decided to postpone disclosure one week, to December 19th, 2023 to have a bit more time to prepare and converge on dissemination plans. </li>
<li><strong>2023-12-09</strong> <strong>CERT/CC updated the target disclosure date to December 19th, 2023</strong>.</li>
<li><strong>2023-12-12</strong> Microsoft asked Quarkslab to confirm that it would publish in the blog post the same report as provided in the forum. Asked to for a preview of Quarkslab post.</li>
<li><strong>2023-12-12</strong> Quarkslab replied that it already confirmed that the publication will be the same as the report provided to vendors in the vulnerability coordination portal and that it would include a detailed timeline of the relevant communications towards coordinated disclosure. Reiterated that Quarkslab participation in the portal was to coordinate with vendors the release of patches not to discuss the contents of Quarkslab's publications. Asked for Microsoft's estimated date to release fixes, affected products or services, and whether Azure would be exposed.</li>
<li><strong>2023-12-14</strong> CERT-FR asked Quarkslab to clarify circumstances in which the vulnerabilities could be exploited from remote networks.</li>
<li><strong>2023-12-15</strong> Quarkslab described scenarios in which some vulnerabilities could be exploited from remote networks.</li>
<li><strong>2023-12-15</strong> Quarkslab wrote that it discussed the disclosure date with CERT-FR and CERT/CC and CERT-FR indicated they'd like to have additional time to coordinate dissemination of the information to their stakeholders and to other national CERTs. All parties agreed that it would be useful to postpone publication past the end of the year, as many organizations impose a "freeze" on any changes to their data centers and compute infrastructure during the end-of-year period. In view of that it was decided to postpone disclosure to January 15th, 2024. However, if an attack leveraging any of the reported vulnerabilities was discovered in the wild or public disclosure of any of them was observed before the embargo date, Quarkslab would immediately publish the technical report describing the vulnerabilities.</li>
<li><strong>2023-12-15</strong> <strong>CERT/CC updated the target disclosure date to January 15th, 2024</strong>.</li>
<li><strong>2023-12-27</strong> CERT-FR asked CERT/CC and Quarkslab if they agreed that CERT-FR would send an early warning to national CERTs before January 15th, 2024.</li>
<li><strong>2023-12-27</strong> Quarkslab agreed to sending an early warning on January 11th, 2024 or any earlier date of CERT-FR's choosing.</li>
<li><strong>2023-12-27</strong> CERT/CC agreed to an early warning on January 11th, 2024 as well.</li>
<li><strong>2023-01-08</strong> CERT-FR requested an estimated release date for fixes from several vendors.</li>
<li><strong>2023-01-08</strong> Insyde Software informed that it had already deployed fixes to their downstream supply chain.</li>
<li><strong>2024-01-08</strong> <strong>CERT/CC updated the target disclosure date to January 16th, 2024</strong> as January 15th is a non-working day in the USA.</li>
<li><strong>2024-01-09</strong> AMI informed that it already communicated remediation information to its customers.</li>
<li><strong>2024-01-09</strong> Phoenix Technologies informed that it updated its status to vulnerable and was delivering fixes to partner OEMs.</li>
<li><strong>2024-01-16</strong> Quarkslab blog post published.</li>
</ul>

<hr><p>

If you would like to learn more about our security audits and explore how we can help you, <a href="https://content.quarkslab.com/talk-to-our-experts-blog">get in touch with us</a>!

</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Flowblade: Open-Source Video Editor (243 pts)]]></title>
            <link>https://jliljebl.github.io/flowblade/</link>
            <guid>39023565</guid>
            <pubDate>Wed, 17 Jan 2024 05:14:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jliljebl.github.io/flowblade/">https://jliljebl.github.io/flowblade/</a>, See on <a href="https://news.ycombinator.com/item?id=39023565">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

<p>
User quotes
</p>

<p>
"I found flowblade and I love it.  I edit movies 2 to 3 hours in length with many video clips.  What is a great help is the way the clips snap together, especially when I am deleting and editing out bad video and moving video around.", dnsXXXXX
</p>

<p>
"We - that is a group of German students and me - are currently shooting a movie for a school project, and after trying a few solutions we ended
up choosing Flowblade.",".. From then it worked well - no more crashes! A lot of filters I
actually thought flowblade was simply lacking are available now. Thank you for your support - Flowblade rocks!", R.W, Germany
</p>

<p>
"I'm a professional video editor and director who is working from more than 15 years for the main broadcasters here in Italy...[Flowblade is] already showing it's great potential because it looks like it has been thought by someone who knows what editors need for real.", M.S, Italy
</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[BBC BASIC raytracer in 432 characters (180 pts)]]></title>
            <link>https://mastodon.me.uk/@bbcmicrobot/111762132859648345</link>
            <guid>39023056</guid>
            <pubDate>Wed, 17 Jan 2024 03:53:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mastodon.me.uk/@bbcmicrobot/111762132859648345">https://mastodon.me.uk/@bbcmicrobot/111762132859648345</a>, See on <a href="https://news.ycombinator.com/item?id=39023056">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[ALOHA robot learns from humans to cook, clean, do laundry (117 pts)]]></title>
            <link>https://venturebeat.com/automation/stanfords-mobile-aloha-robot-learns-from-humans-to-cook-clean-do-laundry/</link>
            <guid>39022996</guid>
            <pubDate>Wed, 17 Jan 2024 03:43:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://venturebeat.com/automation/stanfords-mobile-aloha-robot-learns-from-humans-to-cook-clean-do-laundry/">https://venturebeat.com/automation/stanfords-mobile-aloha-robot-learns-from-humans-to-cook-clean-do-laundry/</a>, See on <a href="https://news.ycombinator.com/item?id=39022996">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		
		<section>
			
			<p><time title="2024-01-05T18:45:09+00:00" datetime="2024-01-05T18:45:09+00:00">January 5, 2024 10:45 AM</time>
			</p>
			
		</section>
		<div>
					<p><img width="750" height="419" src="https://venturebeat.com/wp-content/uploads/2024/01/Screen-Shot-2024-01-05-at-1.40.51-PM.png?fit=750%2C419&amp;strip=all" alt="Screengrab of YouTube video showing Stanford's robot Mobile ALOHA in action."></p><p><span>Credit: Stanford University</span></p>		</div><!-- .article-media-header -->
	</div><div id="primary" role="main">

			<article id="post-2927419">
				<div>
					<p>A new AI system developed by researchers at Stanford University makes impressive breakthroughs in training mobile robots that can perform complex tasks in different environments.&nbsp;</p>



<p>Called <a href="https://mobile-aloha.github.io/">Mobile ALOHA</a> (A Low-cost Open-source Hardware System for Bimanual Teleoperation) the system addresses the high costs and technical challenges of training mobile bimanual robots that require careful guidance from human operators.&nbsp;</p>



<figure><p>
<iframe title="Mobile ALOHA Robot - Teleoperating a 3-Course Cantonese Meal" width="500" height="281" src="https://www.youtube.com/embed/mnLVbwxSdNM?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
</p></figure>



<p>It costs a fraction of off-the-shelf systems and can learn from as few as 50 human demonstrations.&nbsp;</p>



<p>This new system comes against the backdrop of an acceleration in robotics, enabled partly by the success of generative models.</p>



<h2 id="h-limits-of-current-robotics-systems">Limits of current robotics systems</h2>



<p>Most robotic manipulation tasks focus on table-top manipulation. This includes a recent wave of models that have been built based on transformers and diffusion models, architectures widely used in generative AI.</p>



<p>However, many of these models lack the mobility and dexterity necessary for generally useful tasks. Many tasks in everyday environments require coordinating mobility and dexterous manipulation capabilities.</p>



<p>“With additional degrees of freedom added, the interaction between the arms and base actions can be complex, and a small deviation in base pose can lead to large drifts in the arm’s end-effector pose,” the Stanford researchers write in <a href="http://arxiv.org/abs/2401.02117">their paper</a>, adding that prior works have not delivered “a practical and convincing solution for bimanual mobile manipulation, both from a hardware and a learning standpoint.”</p>



<h2 id="h-mobile-aloha">Mobile ALOHA</h2>



<p>The new system developed by Stanford researchers builds on top of <a href="https://tonyzhaozh.github.io/aloha/">ALOHA</a>, a low-cost and whole-body teleoperation system for collecting bimanual mobile manipulation data. </p>



<p>A human operator demonstrates tasks by manipulating the robot arms through a teleoperated control. The system captures the demonstration data and uses it to train a control system through end-to-end imitation learning.</p>



<p>Mobile ALOHA extends the system by mounting it on a wheeled base. It is designed to provide a cost-effective solution for training robotic systems. The entire setup, which includes webcams and a laptop with a consumer-grade GPU, costs around $32,000, which is much cheaper than off-the-shelf bimanual robots, which can cost up to $200,000.</p>



<figure><img decoding="async" src="https://venturebeat.com/wp-content/uploads/2024/01/image.png?strip=all" alt="" data-recalc-dims="1"></figure>



<p><em>Mobile ALOHA configuration (source: </em><a href="http://arxiv.org/abs/2401.02117"><em>arxiv</em></a><em>)</em></p>



<p>Mobile ALOHA is designed to teleoperate all degrees of freedom simultaneously. The human operator is tethered to the system by the waist and drives it around the work environment while operating the arms with controllers. This enables the robot control system to simultaneously learn movement and other control commands. Once it gathers enough information, the model can then repeat the sequence of tasks autonomously.</p>



<p>The teleoperation system is capable of multiple hours of consecutive usage. The results are impressive and show that a simple training recipe enables the system to learn complex mobile manipulation tasks.&nbsp;</p>



<p>The demos show the trained robot cooking a three-course meal with delicate tasks such as breaking eggs, mincing garlic, pouring liquid, unpackaging vegetables, and flipping chicken in a frying pan.&nbsp;</p>



<p>Mobile ALOHA can also do a variety of house-keeping tasks, including watering plants, using a vacuum, loading and unloading a dishwasher, getting drinks from the fridge, opening doors, and operating washing machines</p>



<h2 id="h-imitation-learning-and-co-training">Imitation learning and co-training</h2>



<p>Like many recent works in robotics, Mobile ALOHA takes advantage of transformers, the architecture used in large language models. The original ALOHA system used an architecture called Action Chunking with Transformers (ACT), which takes images from multiple viewpoints and joint positions as input and predicts a sequence of actions.</p>



<figure><img decoding="async" fetchpriority="high" width="1600" height="441" src="https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all" alt="" srcset="https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all?w=1600&amp;strip=all 1600w, https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all?w=300&amp;strip=all 300w, https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all?w=768&amp;strip=all 768w, https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all?w=800&amp;strip=all 800w, https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all?w=1536&amp;strip=all 1536w, https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all?w=400&amp;strip=all 400w, https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all?w=750&amp;strip=all 750w, https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all?w=578&amp;strip=all 578w, https://venturebeat.com/wp-content/uploads/2024/01/image.png?resize=1600%2C441&amp;strip=all?w=930&amp;strip=all 930w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1"></figure>



<p><em>Action Chunking with Transformers (ACT) (source: </em><a href="https://tonyzhaozh.github.io/aloha/"><em>ALOHA webpage</em></a><em>)</em></p>



<p>Mobile ALOHA extends that system by adding movement signals to the input vector. This formulation allows Mobile ALOHA to reuse previous deep imitation learning algorithms with minimal changes.</p>



<p>“We observe that simply concatenating the base and arm actions then training via direct imitation learning can yield strong performance,” the researchers write. “Specifically, we concatenate the 14-DoF joint positions of ALOHA with the linear and angular velocity of the mobile base, forming a 16-dimensional action vector.”</p>



<p>The work also benefits from the success of recent methods that pre-train models on diverse robot datasets from other projects. Of special note is RT-X, a project by <a href="https://venturebeat.com/ai/deepminds-remarkable-new-ai-controls-robots-of-all-kinds/">DeepMind and 33 research institutions</a>, which combined several robotics datasets to create control systems that could generalize well beyond their training data and robot morphologies.&nbsp;</p>



<p>“Despite the differences in tasks and morphology, we observe positive transfer in nearly all mobile manipulation tasks, attaining equivalent or better performance and data efficiency than policies trained using only Mobile ALOHA data,” the researchers write.</p>



<p>Using existing data enabled the researchers to train Mobile ALOHA for complex tasks with very few human demonstrations</p>



<p>“With co-training, we are able to achieve over 80% success on these tasks with only 50 human demonstrations per task, with an average of 34% absolute improvement compared to no co-training,” the researchers write.</p>



<h2 id="h-not-production-ready">Not production-ready</h2>



<p>Despite its impressive results, Mobile ALOHA has drawbacks. For example, its bulkiness and unwieldy form factor do not make it suitable for tight environments.&nbsp;</p>



<p>In the future, the researchers plan to improve the system by adding more degrees of freedom and reducing the robot’s volume.</p>



<p>It is also worth noting that this is not a fully autonomous system that can learn to explore new environments on its own. It still requires full demonstrations by human operators in its environment, though it learns the tasks with fewer examples than previous methods, thanks to its co-training system.</p>



<p>The researchers will explore changes to the AI model that will allow the robot to self-improve and acquire new knowledge.&nbsp;<br>Given the recent trend of training control AI systems across different datasets and morphologies, this work can further accelerate the development of versatile mobile robots. And ideally, lead to enterprise-and-consumer grade helpful robots, a field that is rapidly heating up thanks to the work of other researchers and companies such as <a href="https://youtu.be/D2vj0WcvH5c?si=YbA_vkOL6yi9ASwJ">Tesla with its still-in development Optimus humanoid robot</a> and <a href="https://bostondynamics.com/news/hyundai-motor-group-completes-acquisition-of-boston-dynamics-from-softbank/">Hyundai with its Boston Dynamics division</a>, which does offer the <a href="https://spectrum.ieee.org/boston-dynamics-spot-robot-dog-now-available">robotic dog Spot for sale at around $74,000 USD</a>.</p>
<p><strong>VentureBeat's mission</strong> is to be a digital town square for technical decision-makers to gain knowledge about transformative enterprise technology and transact. <a href="https://venturebeat.com/newsletters/?utm_source=VBsite&amp;utm_medium=bottomBoilerplate" data-type="URL" data-id="/newsletters/">Discover our Briefings.</a></p><!-- Boilerplate CSS for "after" -->				</div><!-- .article-content -->

									
				
			</article><!-- #post-2927419 .article-wrapper -->


		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: I made a website to find best bus seat to avoid the sun while traveling (812 pts)]]></title>
            <link>https://sitinshade.com</link>
            <guid>39022693</guid>
            <pubDate>Wed, 17 Jan 2024 02:59:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://sitinshade.com">https://sitinshade.com</a>, See on <a href="https://news.ycombinator.com/item?id=39022693">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    
      <p> Find Best Bus Seat to Minimize Sun Exposure While Traveling</p>
      
      
      
        <div>
          <div>
            <p><label>Date</label></p>
          </div>
          
          <div>
            <p><label>Time</label></p>
          </div>
        </div>
        
        
        
        <div>
            <p><label>Timezone</label></p><div>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"></path>
            </svg>
          </div>
        </div>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Browsh: The modern text-based web browser (173 pts)]]></title>
            <link>https://www.brow.sh/</link>
            <guid>39022535</guid>
            <pubDate>Wed, 17 Jan 2024 02:38:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.brow.sh/">https://www.brow.sh/</a>, See on <a href="https://news.ycombinator.com/item?id=39022535">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="text" id="main" role="main">
      <div>
        <p><strong>Browsh is a fully-modern text-based browser.</strong> It renders
          anything that a modern browser can; HTML5, CSS3, JS, video and even WebGL.
          Its main purpose is to be run on a remote server and accessed via SSH/Mosh
          or the in-browser HTML service in order to significantly reduce bandwidth and thus both
          increase browsing speeds and decrease bandwidth costs.
        </p>
        <p><img src="https://www.brow.sh/assets/images/browsh-tty.jpg" alt="browsh in the tty">
        </p>
        <p><img src="https://www.brow.sh/assets/images/browsh-html.jpg" alt="browsh in the browser">
        </p>
      </div>


      

      <div>
        <div>
          <h2>Download (v1.8.0)</h2><p>
          Browsh is available as a single static binary on all major platforms.
          The only dependency is a recent 57+ version of Firefox.
          <br>
          <a href="https://www.brow.sh/downloads">Latest version</a> |
          <a href="https://github.com/browsh-org/browsh/releases">Releases archive</a>
          <br>
          <small>
          A Docker image is also
          available: <br> <code>docker run -it browsh/browsh</code>
          </small>
        </p></div>
        <div>
          <h2>Live SSH Demo</h2>
          <p><strong>Temporarily offline</strong></p><p>
            Just point your SSH client to <em>brow.sh</em>, eg;
            <code>ssh brow.sh</code>. No auth needed. The service
            is for demonstration only, sessions last 5 minutes and are logged.<br>
            <small>
              Note that SSH is actually a very inefficient protocol, for best results install
              Browsh on your own server along with <a href="https://mosh.org/">Mosh</a>.
            </small>
          </p>
        </div>
        <div>
          <h2>In-browser Services</h2>
          <p><strong>Temporarily offline</strong></p><div>
            <ul>
              <li>
                <a href="https://html.brow.sh/" target="_blank">html.brow.sh</a>
                Uses very basic graphics and HTML anchor tags.
                <small>Although this service may appear similar to the terminal client it does not yet have feature parity.</small>
              </li>
              <li>
                <a href="https://text.brow.sh/" target="_blank">text.brow.sh</a> Uses nothing but pure text,
                better for usage with <code>curl</code>, for instance.
              </li>
            </ul>
          </div>
        </div>
      </div>

      

      <div>
        <p id="youtube-showcase">
          <iframe src="https://www.youtube.com/embed/zqAoBD62gvo" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
        </p>

        <div id="open-blurb">
          <h2>Donate</h2><p>
          Browsh is currently maintained and funded by
          <a href="http://tombh.co.uk/" target="_blank">one person</a>.
          If you'd like to see Browsh continue to help those with slow and/or
          expensive Internet, please consider <a href="https://www.brow.sh/donate">donating</a>.
          </p>
        </div>
      </div>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Judge blocks JetBlue from acquiring Spirit Airlines (137 pts)]]></title>
            <link>https://www.nytimes.com/2024/01/16/business/jetblue-spirit-airlines-ruling-merger.html</link>
            <guid>39022274</guid>
            <pubDate>Wed, 17 Jan 2024 02:09:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nytimes.com/2024/01/16/business/jetblue-spirit-airlines-ruling-merger.html">https://www.nytimes.com/2024/01/16/business/jetblue-spirit-airlines-ruling-merger.html</a>, See on <a href="https://news.ycombinator.com/item?id=39022274">Hacker News</a></p>
Couldn't get https://www.nytimes.com/2024/01/16/business/jetblue-spirit-airlines-ruling-merger.html: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[OpenAI drops ban on military tools to partner with The Pentagon (334 pts)]]></title>
            <link>https://www.semafor.com/article/01/16/2024/openai-is-working-with-the-pentagon-on-cybersecurity-projects</link>
            <guid>39020778</guid>
            <pubDate>Tue, 16 Jan 2024 23:37:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.semafor.com/article/01/16/2024/openai-is-working-with-the-pentagon-on-cybersecurity-projects">https://www.semafor.com/article/01/16/2024/openai-is-working-with-the-pentagon-on-cybersecurity-projects</a>, See on <a href="https://news.ycombinator.com/item?id=39020778">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div><div><p><img alt="icon" loading="lazy" width="26" height="18" decoding="async" data-nimg="1" src="https://www.semafor.com/_next/static/media/2circles.337bd7ed.svg"></p><h3>Semafor Signals</h3></div><div><p>Insights from Wired, The Wall Street Journal, and The Information</p><p><img alt="Arrow Down" loading="lazy" width="49" height="49" decoding="async" data-nimg="1" src="https://www.semafor.com/_next/static/media/blue-arrow-down.388f0335.svg"></p></div></div><div><div><p><img src="https://www.semafor.com/_next/static/media/thenews@2x.f322bda2.png" alt="Title icon" width="20" height="16"></p><h3>The News</h3></div><div><p>OpenAI is working with the Pentagon on software projects, including ones related to cybersecurity, the company said Tuesday, in a dramatic change from its previous ban on providing its artificial intelligence technology to militaries.</p><p>The ChatGPT creator is also in discussions with the U.S. government about developing tools to reduce veteran suicides, Anna Makanju, the company’s vice president of global affairs, said at the World Economic Forum — but added that it will retain its ban on developing weapons.</p><p>Last week, OpenAI removed language in its usage policy that would ban its AI from being used in “military and warfare” applications, sparking <a href="https://theintercept.com/2024/01/12/open-ai-military-ban-chatgpt/?utm_source=substack&amp;utm_medium=email" rel="no-referrer">alarm among AI safety advocates.</a></p></div></div><div><div><p><img alt="icon" loading="lazy" width="20" height="16" decoding="async" data-nimg="1" src="https://www.semafor.com/_next/static/media/2circles-black.0f46bdfb.svg"></p><h3>SIGNALS</h3></div><p><strong>Semafor Signals:</strong> Global insights on today's biggest stories.</p><div><h3>Silicon Valley has changed its mind about collaborating with the Pentagon</h3><div><p>Wired</p><!-- --><p>, </p><!-- --><p>The Wall Street Journal</p><!-- --><p>, </p><!-- --><p>Semafor’s Technology Editor Reed Albergotti</p></div><p>Silicon Valley has softened its stance on collaborating with the U.S. military in recent years. In 2018, thousands of Google employees protested a Pentagon project, fearing technology they developed could be used for lethal purposes. That proved to be the <a href="https://www.wired.com/story/3-years-maven-uproar-google-warms-pentagon/" rel="noopener" target="_blank">high water mark of Silicon Valley opposition</a> to the Department of Defense, with Google since earning hundreds of millions from its defense contracts. The Pentagon has made <a href="https://www.wsj.com/amp/articles/pentagon-woos-silicon-valley-to-join-ranks-of-arms-makers-38b1d4c0" rel="noopener" target="_blank">a concerted effort</a> in recent years to win over Silicon Valley startups in order to develop new weapons technology and integrate advanced tools into the department’s operations. U.S.-China tensions and Russia’s war in Ukraine have also served to dispel many of the qualms entrepreneurs once had about military collaboration. “What’s emerged lately is a kind of <a href="https://www.semafor.com/article/01/03/2024/defense-tech-is-having-its-moment-in-silicon-valley" rel="noopener" target="_blank">techno-patriotism in Silicon Valley</a>,” wrote Semafor’s technology editor Reed Albergotti.</p></div><div><h3>AI may remake the military, but could come with profound risks</h3><div><p>Wired</p><!-- --><p>, </p><!-- --><p>Vox</p><!-- --><p>, </p><!-- --><p>Foreign Policy</p></div><p>Defense experts have been bullish about the impact AI will have on the military. Former Google CEO Eric Schmidt, now a prominent defense industry figure, has compared the arrival of AI to the <a href="https://www.wired.com/story/eric-schmidt-is-building-the-perfect-ai-war-fighting-machine/#:~:text=%E2%80%9CEinstein%20wrote%20a%20letter%20to,distributed%20systems%20are%20that%20powerful.%E2%80%9D" rel="noopener" target="_blank">advent of nuclear weapons</a>, Wired reported. “Einstein wrote a letter to Roosevelt in the 1930s saying that there is this new technology — nuclear weapons — that could change war, which it clearly did. I would argue that [AI-powered] autonomy and decentralized, distributed systems are that powerful,” Schmidt said. But advocacy groups have warned that integrating AI into warfare could come with profound risks given AI’s tendency to “hallucinate” — make up fake information and pass it off as real — which could have far higher stakes if AI-powered systema wwew integrated into <a href="https://www.vox.com/future-perfect/2023/11/28/23972547/the-militarized-ai-risk-thats-bigger-than-killer-robots" rel="noopener" target="_blank">command and control systems</a>. The Arms Control Association has warned that the rush to “​​exploit emerging technologies for military use has accelerated at a much faster pace than efforts to assess <a href="https://foreignpolicy.com/2023/04/11/ai-arms-race-artificial-intelligence-chatgpt-military-technology/" rel="noopener" target="_blank">the dangers they pose</a>.”</p></div><div><h3>OpenAI rules are unclear about scope of possible military deals</h3><div><p>The Information</p><!-- --><p>, </p><!-- --><p>Euromaidan Press</p><!-- --><p>, </p><!-- --><p>The Economist</p></div><p>Although OpenAI has ruled out developing weapons, its new policy would likely allow it to provide <a href="https://www.theinformation.com/articles/chatgpt-coming-to-an-army-near-you" rel="noopener" target="_blank">AI software to the Department of Defense</a> for uses such as helping analysts interpret data or write code, The Information reported. But as the war in Ukraine has shown, the divide between data crunching and warfare may not be as clear-cut as OpenAI would like. Ukraine has developed and imported software <a href="https://euromaidanpress.com/2023/08/09/ground-and-marine-drones-ai-and-javelin-training-simulator-how-ukrainian-military-technology-advancements-bring-country-closer-to-victory/" rel="noopener" target="_blank">to analyze large data</a>, which has allowed its artillery operators to be rapidly notified of Russian targets in the area and dramatically speed up <a href="https://www.economist.com/special-report/2023/07/03/the-war-in-ukraine-shows-how-technology-is-changing-the-battlefield" rel="noopener" target="_blank">the pace at which they can fire</a>. Meanwhile, The Information warned that the change in policy could be enough to reignite the debate over AI safety at OpenAI that contributed to Sam Altman’s brief firing as CEO.</p></div></div><div><p><img src="https://www.semafor.com/_next/static/media/semafor-logo-small.cc0a7c9c.svg" width="19" height="19" alt="Semafor Logo"></p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA["Amazonian dark earth" was the work of ancient humans (161 pts)]]></title>
            <link>https://www.bbc.com/future/article/20240116-the-dark-earth-revealing-the-amazons-secrets</link>
            <guid>39020600</guid>
            <pubDate>Tue, 16 Jan 2024 23:21:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bbc.com/future/article/20240116-the-dark-earth-revealing-the-amazons-secrets">https://www.bbc.com/future/article/20240116-the-dark-earth-revealing-the-amazons-secrets</a>, See on <a href="https://news.ycombinator.com/item?id=39020600">Hacker News</a></p>
<div id="readability-page-1" class="page"><section id="futurearticle20240116-the-dark-earth-revealing-the-amazons-secrets"><div id="headline-futurearticle20240116-the-dark-earth-revealing-the-amazons-secrets"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bx6q.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bx6q.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bx6q.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bx6q.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bx6q.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bx6q.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bx6q.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bx6q.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="The roots of a strangler fig in the Amazon (Credit: Alamy)" src="https://ychef.files.bbci.co.uk/976x549/p0h5bx6q.jpg" alt="The roots of a strangler fig in the Amazon (Credit: Alamy)" id=""></picture></div><div><article><div><p>Amid the discovery of a lost city in the Amazon rainforest, scientists are uncovering a different kind of relic underground – one that's still being used today.</p><div><p>D</p><div><p>Deep within the Amazon, Mark Robinson was up to his knees in buried treasure.</p>
<p>Together with an international team of scientists, Robinson was on an expedition to a remote patch of forest in Iténez, northwest Bolivia, close to the border with Brazil. Getting there had not been easy. To avoid a 10-hour boat ride, they took a hair-raising flight to the nearest village, Versalles, where the plane had to circle back over a grass runway to avoid landing on a herd of grazing animals. Then came a long trek through thick rainforest, navigating over gnarled roots and past marauding armies of ants. "It's hot, it's humid, you're getting bitten constantly," says Robinson, a senior lecturer in archaeology at the University of Exeter.</p>
<p>The journey, however, was worth it. The researchers had an important mission: they were searching for "Amazonian dark earth" (ADE), sometimes known as "black gold" or terra preta.</p>
<p>This layer of charcoal-black soil, which can be up to <a href="https://onlinelibrary.wiley.com/doi/full/10.1002/gea.21839">3.8m (12.5ft) thick</a>, is <a href="https://esajournals.onlinelibrary.wiley.com/doi/10.1002/ecs2.2035">found in patches across the Amazon basin</a>. It is intensely fertile – rich in decaying organic matter and nutrients essential for growing crops, such as <a href="https://link.springer.com/article/10.1007/s001140000193">nitrogen, potassium and phosphorus</a>. But unlike the thin, sandy soils typical of the rainforest, this layer was not deposited naturally – it was the work of ancient humans.</p>
<p>This rich soil is a relic from a very different time – an era when indigenous groups formed a thriving network of settlements across this rainforest world.&nbsp;</p>
<p>In January 2024, scientists announced the rediscovery of a long-vanished "garden" city. Hidden beneath the foliage of the rainforest in Ecuador's Upano valley was <a href="https://www.science.org/doi/10.1126/science.adi6317">a 2,000 year-old urban centre</a>, complete with plazas, streets and ceremonial platforms. (<em>Read more from BBC News about </em><a href="https://www.bbc.com/news/science-environment-67940671"><em>the lost city found in the Amazon</em></a><em>.</em>) The discovery has raised questions about whether there may be other ancient settlements concealed in the Amazon. And this is where ADE comes in.&nbsp;</p>
<p>It's thought that the garden city could only support so many people because of the region's fertile volcanic soil. But elsewhere in the Amazon, indigenous communities relied on ADE to improve the productivity of their land. Now there's growing interest in the lessons their methods may hold for societies today, from improving crop yields to beating climate change.</p></div></div><div id="future/article/20240116-the-dark-earth-revealing-the-amazons-secrets-p0h5bsnz"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bsnz.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bsnz.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bsnz.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bsnz.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bsnz.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bsnz.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bsnz.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bsnz.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="Amazonian dark earth is packed with ancient artefacts, such as pottery and fossilised seeds (Credit: Mark Robinson)" src="https://ychef.files.bbci.co.uk/976x549/p0h5bsnz.jpg" alt="Amazonian dark earth is packed with ancient artefacts, such as pottery and fossilised seeds (Credit: Mark Robinson)" id=""></picture><div><p>Amazonian dark earth is packed with ancient artefacts, such as pottery and fossilised seeds (Credit: Mark Robinson)</p></div></div><div><p><strong>A hidden influence</strong></p>
<p>Surrounded by the smells and sounds of the rainforest at Versalles, in the remoteness of the Amazon, Robinson says it would be tempting to think that you're in a pristine wilderness. But this is not the case.</p>
<p>"The more we find out, [it becomes clear that] it's not necessarily primary forest," says Robinson. "Everywhere we look, although it seems like a really arduous trip to us, and that we're in the most remote place, we just find evidence of past communities everywhere."</p>
<p>In 2017, research revealed that <a href="https://www.science.org/doi/10.1126/science.aal0157#:~:text=Plants%20domesticated%20by%20pre%2DColumbian,and%20richness%20of%20domesticated%20species.">domesticated trees</a> are five times more likely to be dominant in the Amazon than non-domesticated ones – with more appearing the closer you get to ancient settlements. Though today many of the Amazon’s indigenous communities have vanished, wiped out by Western colonists and the diseases they carried, their farming practices continue to shape the rainforest.</p>
<p>Another crucial element of this hidden influence is ADE, which is widespread. "This is the fascinating thing – it really is pan-Amazonian, we are finding it everywhere," says Robinson.</p>
<p>This <a href="https://eos.org/features/the-nutrient-rich-legacy-in-the-amazons-dark-earths">precious layer</a> contains a potent <a href="https://acsess.onlinelibrary.wiley.com/doi/abs/10.2136/sssaspecpub63.2014.0035.5">blend of inorganic material</a>, including ash, pottery, bone and shells, together with organic matter such as food scraps, manure, and urine. It's simultaneously a treasure trove of ancient rubbish that's extremely exciting to archaeologists like Robinson, and a functional part of the Amazonian soil – one that continues to enrich the rainforest and allow indigenous communities to farm there today.</p></div><div id="future/article/20240116-the-dark-earth-revealing-the-amazons-secrets-p0h5bq99"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bq99.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bq99.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bq99.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bq99.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bq99.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bq99.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bq99.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bq99.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="Amazonian dark earth has been estimated to cover 0.1%-10% of the Amazon basin (Credit: Getty Images)" src="https://ychef.files.bbci.co.uk/976x549/p0h5bq99.jpg" alt="Amazonian dark earth has been estimated to cover 0.1%-10% of the Amazon basin (Credit: Getty Images)" id=""></picture><div><p>Amazonian dark earth has been estimated to cover 0.1%-10% of the Amazon basin (Credit: Getty Images)</p></div></div><div><p>"They really are a goldmine," says Robinson. Along with fossilised seeds and ceramic artefacts dating back thousands of years, there are microscopic clues to what the rainforest may have been like thousands of years ago. One example is faecal spherulites: tiny <a href="https://www.sciencedirect.com/science/article/pii/S0305440317301681">crystals found in animal dung</a> that hint at the kinds of animals that once roamed across the landscape – and defecated in it.&nbsp;</p>
<p><strong>A living history</strong></p>
<p>ADE first piqued the interest of Westerners in the 1870s, when several scientists independently noticed black layers of soil that contrasted with the <a href="https://cdn.hackaday.io/files/20931895511904/Black%20Soil%20Green%20Rice.pdf">pale or reddish kind</a> that surrounded them. One early explorer <a href="https://books.google.com/books?hl=en&amp;lr=&amp;id=xGotEAAAQBAJ&amp;oi=fnd&amp;pg=PA129&amp;dq">described it as a</a> "fine, black loam", and noted that "strewn over it everywhere we find fragments of Indian pottery, so abundant in some places that they almost cover the ground".</p>
<p>However, how ADEs were created has been something of a mystery. Scientists have questioned whether these soils were produced by accident – the product of generations of indigenous people discarding rubbish – or via an intentional process to enrich the rainforest and make its ground more suitable for farming.</p>
<p>In 2023, an international team of scientists weighed in. By combining an analysis of the structure and composition of ADEs with observations of, and interviews with, the indigenous community at Kuikuro – in the southeastern Amazon, in central Brazil – the researchers concluded that these layers of soil were indeed <a href="https://www.science.org/doi/10.1126/sciadv.adh8499">made on purpose</a>.</p></div><div id="future/article/20240116-the-dark-earth-revealing-the-amazons-secrets-p0h5bttv"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bttv.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bttv.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bttv.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bttv.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bttv.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bttv.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bttv.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bttv.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="While the Iténez rainforest is still inhabited today, much of the Amazon basin was depopulated after the arrival of Western colonists (Credit: Mark Robinson)" src="https://ychef.files.bbci.co.uk/976x549/p0h5bttv.jpg" alt="While the Iténez rainforest is still inhabited today, much of the Amazon basin was depopulated after the arrival of Western colonists (Credit: Mark Robinson)" id=""></picture><div><p>While the Iténez rainforest is still inhabited today, much of the Amazon basin was depopulated after the arrival of Western colonists (Credit: Mark Robinson)</p></div></div><div><p>The age and distribution of these soil deposits tell the story of the rise and fall of ancient indigenous civilisations across the Amazon. While the oldest layers of these black soils are around <a href="https://www.pnas.org/doi/10.1073/pnas.2022213118">5,000 years old</a>, "we see a lot more [evidence of ADEs being produced] about 4,000 years ago", says Robinson. "There's a lot more activity, a lot of cultural changes."</p>
<p>It's not until around 2,000 years ago, however, that they reach their peak, says Robinson. That's the average age of the black deposits that are found over a wide area across the Amazon basin. At this point, communities were larger and formed vast networks. However, the settlements where people produced ADE were typically not on the same scale as the recently rediscovered city in Ecuador.</p>
<p>One reason for this could be the power of ADE itself. Within the setting of an abundant jungle habitat, enriched by indigenous people with everything they need – fruiting trees and rich soil for growing crops – Robinson believes that there may have been no need for people to turn to larger-scale agriculture. "So [it's possible that] you don't really need the extra hierarchical level [that tends to develop in mass settlements]," says Robinson.</p>
<p>But by around 500 years ago, something is clearly very wrong. "That's when we really see it [ADE production] drop off," says Robinson.</p>
<p>This is thought to reflect the aftermath of Christopher Columbus' arrival on South American soil on 1 August 1498. When he plunged the red and gold flag of Spain into the ground on the Paria Peninsula in Venezuela, it marked the beginning of a "great dying". It's been estimated that 56 million indigenous people were killed across the Americas by 1600 – so many, it <a href="https://www.sciencedirect.com/science/article/pii/S0277379118307261">cooled the Earth</a>'s climate.</p></div><div id="future/article/20240116-the-dark-earth-revealing-the-amazons-secrets-p0h5byhz"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5byhz.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5byhz.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5byhz.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5byhz.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5byhz.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5byhz.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5byhz.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5byhz.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="Taking inspiration from ancient methods such as Amazonian dark earth, today many companies are producing biochar as a way to lock away carbon and improve soil (Credit: Alamy)" src="https://ychef.files.bbci.co.uk/976x549/p0h5byhz.jpg" alt="Taking inspiration from ancient methods such as Amazonian dark earth, today many companies are producing biochar as a way to lock away carbon and improve soil (Credit: Alamy)" id=""></picture><div><p>Taking inspiration from ancient methods such as Amazonian dark earth, today many companies are producing biochar as a way to lock away carbon and improve soil (Credit: Alamy)</p></div></div><div><p><strong>A carbon sink</strong></p>
<p>Though many of the ancient inhabitants of the Amazon have long since vanished, their legacy remains. Intriguingly, not all of the ADEs they left behind have the same make-up – in fact, they vary widely, depending on the specific ingredients used in different locations.</p>
<p>"But the basic mechanism for creating the soils and enriching them seems to be similar," says Robinson. "They [indigenous people] are directly investing into the soils, starting with their own waste products," he says. The base is mostly composed of food scraps, with added faeces and charcoal. And it is the latter that is attracting increasing attention.</p>
<p>It turns out that not only are ADEs extraordinarily rich in nutrients, but they are powerful carbon sinks – with up to 7.5 times more carbon within <a href="https://www.css.cornell.edu/faculty/lehmann/research/terra%20preta/terrapretamain.html">compared to the surrounding soils</a>. As ADEs accumulate, the carbon becomes trapped underground, where it remains stable for hundreds of years – locking it away and delaying its entry into the atmosphere.</p>
<p>It's not clear why the carbon within ADEs behaves this way, but scientists suspect that it has something to do with "<a href="https://www.css.cornell.edu/faculty/lehmann/research/terra%20preta/terrapretamain.html">black carbon</a>", also known as "biochar". This key ingredient is made from organic material that has been turned to almost pure carbon at high temperatures, in the presence of little oxygen. The process doesn't emit as much carbon dioxide as charcoal production, but leads to a fine, crumbly black product that has been found in ADEs across the Amazon. (<a href="https://www.bbc.com/future/article/20200206-can-charcoal-cut-cows-methane-to-fight-climate-change"><em>Read more about biochar from the BBC</em></a>).</p></div><div id="future/article/20240116-the-dark-earth-revealing-the-amazons-secrets-p0h5bs2q"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bs2q.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h5bs2q.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bs2q.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h5bs2q.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bs2q.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h5bs2q.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bs2q.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h5bs2q.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="In the village of Versalles, the indigenous Itonama community still use the fertile Amazonian dark soil to grow crops (Credit: Mark Robinson)" src="https://ychef.files.bbci.co.uk/976x549/p0h5bs2q.jpg" alt="In the village of Versalles, the indigenous Itonama community still use the fertile Amazonian dark soil to grow crops (Credit: Mark Robinson)" id=""></picture><div><p>In the village of Versalles, the indigenous Itonama community still use the fertile Amazonian dark soil to grow crops (Credit: Mark Robinson)</p></div></div><div><p>Now businesses are attempting to capitalise on this ancient method, in a quest to help farmers to improve their soil and combat climate change at the same time. Take Carbon Gold, a company that produces biochar for use as an organic, peat-free planting aid. Founded in 2007 by the creator of a chocolate brand, the company based its methods on Mayan cacao farmers from Belize – who have also been using biochar for millennia.</p>
<p>In addition to locking away carbon, "biochar improves <a href="https://chembioagro.springeropen.com/articles/10.1186/s40538-020-00204-5">structure</a>, aeration, <a href="https://www.mdpi.com/2073-4395/12/2/311">water-holding capacity</a>, and <a href="https://www.nature.com/articles/s41467-017-01123-0">nutrient retention</a>" that can support healthy plant growth, says Sue Rawlings, the managing director at Carbon Gold. Today the company's clients include organic growers, gardeners, sports stadiums, premier league football clubs, major race and golf courses and Royal Parks and gardens in the UK, she says.</p>
<p>For his part, Robinson thinks copying the methods of ancient indigenous people in the Amazon is going to be essential for future generations. He points to the predictions that by 2050, <a href="https://www.jcu.edu.au/state-of-the-tropics/why-do-the-tropics-matter">around half of the world's population</a> will live in the tropics – with large amounts of migration into tropical forests.</p>
<p>"Finding ways for communities to be more sustainable in them, I think it's essential," he says. "And there are things we can learn from the past about this. I think we're just on the cusp of understanding this."</p>
<p>--</p>
<p><em>If you liked this story,&nbsp;</em><a href="https://cloud.email.bbc.com/SignUp10_08?&amp;at_bbc_team=studios&amp;at_medium=Onsite&amp;at_objective=acquisition&amp;at_ptr_name=bbc.com&amp;at_link_origin=featuresarticle&amp;at_campaign=essentiallist&amp;at_campaign_type=owned"><em>sign up for The Essential List newsletter</em></a><em>&nbsp;– a handpicked selection of features, videos and can't-miss news delivered to your inbox every Friday.</em></p>
<p><em>Join one million Future fans by liking us on </em><a href="https://www.facebook.com/BBCFuture/"><em>Facebook</em></a><em>, or follow us on </em><a href="https://twitter.com/BBC_Future"><em>Twitter</em></a><em> or </em><a href="https://www.instagram.com/bbcfuture_official/"><em>Instagram</em></a><em>.</em></p></div></div></article></div>;</section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[US developers can offer non-app store purchasing, Apple still collect commission (790 pts)]]></title>
            <link>https://www.macrumors.com/2024/01/16/us-app-store-alternative-purchase-option/</link>
            <guid>39020365</guid>
            <pubDate>Tue, 16 Jan 2024 22:58:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.macrumors.com/2024/01/16/us-app-store-alternative-purchase-option/">https://www.macrumors.com/2024/01/16/us-app-store-alternative-purchase-option/</a>, See on <a href="https://news.ycombinator.com/item?id=39020365">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="main" id="maincontent"><article expanded="true"><div data-io-article-url="/2024/01/16/us-app-store-alternative-purchase-option/"><p>Apple is making major changes to its U.S. iOS <a href="https://www.macrumors.com/guide/app-store/">App Store</a> policies, and developers are now able to direct customers to a non-App Store purchasing option for digital goods. Apple is allowing apps to feature a single link to a developer website that leads to an in-app purchase alternative, but Apple plans to continue to collect a 12 to 27 percent commission on content bought this way.</p>
<p><img src="https://images.macrumors.com/t/MuYr2cyAEYdr0CMrrvuycUPK5vs=/400x0/article-new/2022/01/iOS-App-Store-General-Feature-JoeBlue.jpg?lossy" srcset="https://images.macrumors.com/t/MuYr2cyAEYdr0CMrrvuycUPK5vs=/400x0/article-new/2022/01/iOS-App-Store-General-Feature-JoeBlue.jpg?lossy 400w,https://images.macrumors.com/t/j81xjhvPhb1xAaD6jc-kW3SoaHc=/800x0/article-new/2022/01/iOS-App-Store-General-Feature-JoeBlue.jpg?lossy 800w,https://images.macrumors.com/t/6S1CCkPCfv7Bu5OKPv07871bKhY=/1600x0/article-new/2022/01/iOS-App-Store-General-Feature-JoeBlue.jpg 1600w,https://images.macrumors.com/t/2D83fOzXH1a-mo51oJaSX0SjmzQ=/2500x0/filters:no_upscale()/article-new/2022/01/iOS-App-Store-General-Feature-JoeBlue.jpg 2500w" sizes="(max-width: 900px) 100vw, 697px" alt="iOS App Store General Feature JoeBlue" width="2250" height="1266"><br>Apple's update and the backstory that led to it are a bit complicated, but what <a href="https://www.macrumors.com/guide/iphone/">iPhone</a> and <a href="https://www.macrumors.com/roundup/ipad/">iPad</a> users need to know is that some apps in the U.S. storefront will soon feature a link to their website where subscriptions and other content can be purchased outside of the ‌App Store‌ in-app purchase system, likely with a discounted price.</p>
<p>Developers who want to offer this option will need to apply for a StoreKit External Purchase Link Entitlement, as Apple has outlined in both updated ‌App Store‌ Review Guidelines and the statement of compliance submitted to the Northern California U.S. District Court. With a Link Entitlement, a developer is able to direct a user to an out-of-app purchasing mechanism using an external purchase link. From Apple's modified ‌App Store‌ rules:<br>
</p>
<blockquote><p>Developers may apply for an entitlement to provide a link in their app to a website the developer owns or maintains responsibility for in order to purchase such items. Learn more about the entitlement. In accordance with the entitlement agreement, the link may inform users about where and how to purchase those in-app purchase items, and the fact that such items may be available for a comparatively lower price. The entitlement is limited to use only in the iOS or iPadOS App Store on the United States storefront. In all other storefronts, apps and their metadata may not include buttons, external links, or other calls to action that direct customers to purchasing mechanisms other than in-app purchase.</p>
<p>If your app engages in misleading marketing practices, scams, or fraud in relation to the entitlement, your app will be removed from the App Store and you may be removed from the Apple Developer Program.</p></blockquote>
<p>There are several requirements that developers need to adhere to maintain the privacy and security of the ‌App Store‌ ecosystem, and notably, Apple will collect a commission on purchases made using these Entitlement Links. Rather than 30 percent, Apple will collect a 27 percent fee on user purchases or year-one subscriptions made through the link. On the second year of a subscription, the commission fee drops to 12 percent, which is three percentage points lower than the 15 percent fee that Apple collects from second-year or longer subscriptions made through the in-app purchase system. Apps that participate in the ‌App Store‌ Small Business Program will be charged a 12 percent commission rate.</p>
<p>The commission will apply to transactions for digital goods and services that take place on a developers website within seven days after a user taps through an External Purchase Link to an external website. </p>
<p>Several key points about Entitlement Links are listed below.</p>
<ul>
<li>All links to outside purchasing methods must use the Entitlement Link system, and developers must apply and get Apple's approval.</li>
<li>Developers are permitted to have a single plain link on <strong>one</strong> screen of an app. The link can be at a sign-in screen, in user settings, or elsewhere, but it can only be in one place. The single location may not be an interstitial, modal, or pop-up.</li>
<li>The link can mention the specific price of content on a website, or that content is discounted on the website from the ‌App Store‌ price. Comparisons are allowed.</li>
<li>Links cannot be placed directly on an in-app purchase screen or in the in-app purchase flow.</li>
<li>Developers need to certify that the third-party payment service provider they are using for out-of-app purchasing meets industry standards for payment processors, and that they will offer users processes for managing subscriptions, requesting refunds, and disputing unauthorized transactions.</li>
<li>Apps that participate in Apple's Video Partner Program or News Partner Program are not eligible for Link Entitlement.</li>
<li>Apps that use the StoreKit External Purchase Link must continue to offer in-app purchases as an option.</li>
<li>‌App Store‌ pages are not able to include information about purchasing on a website or a link to a website.</li>
<li>Digital purchases that are sold on an app's website through the Entitlement Link must be available for use in that app.</li>
<li>The StoreKit External Purchase Link cannot discourage users from making in-app purchases or mimic an in-app purchase.</li>
<li>Links must open a new window in the default browser of the device, and are not able to open a web view.</li>
<li>No redirecting, intermediate links, or URL tracking parameters are allowed.</li>
<li>Developers are required to provide a periodic accounting of qualifying out-of-app purchases, and Apple has a right to audit developers' accounting to ensure compliance with their commission obligations and to charge interest and offset payments.</li>
</ul>
<p>The Link Entitlement process and the ‌App Store‌ changes are applicable only in the U.S. ‌App Store‌. Apps for all other storefronts are not able to include buttons, external links, or calls to action that direct customers to alternative purchasing options.</p>
<p><img src="https://images.macrumors.com/t/fPe_AZQfPf2CAhnY60W6NBJ1tBA=/400x0/article-new/2024/01/apple-external-link-examples.jpg?lossy" srcset="https://images.macrumors.com/t/fPe_AZQfPf2CAhnY60W6NBJ1tBA=/400x0/article-new/2024/01/apple-external-link-examples.jpg?lossy 400w,https://images.macrumors.com/t/Zhg-_b1Z5Havuv-49n69jJbaTXk=/800x0/article-new/2024/01/apple-external-link-examples.jpg?lossy 800w,https://images.macrumors.com/t/xJdNK9YgbXaKeoLrQArGAG_xxD0=/1600x0/article-new/2024/01/apple-external-link-examples.jpg 1600w,https://images.macrumors.com/t/0BqXjjWqbh3lgY14hXDIAoMftOg=/2500x0/filters:no_upscale()/article-new/2024/01/apple-external-link-examples.jpg 2500w" sizes="(max-width: 900px) 100vw, 697px" alt="apple external link examples" width="1635" height="920" data-old-src="https://images.macrumors.com/images-new/1x1.trans.gif" data-src="https://images.macrumors.com/t/fPe_AZQfPf2CAhnY60W6NBJ1tBA=/400x0/article-new/2024/01/apple-external-link-examples.jpg?lossy" data-srcset="https://images.macrumors.com/t/fPe_AZQfPf2CAhnY60W6NBJ1tBA=/400x0/article-new/2024/01/apple-external-link-examples.jpg?lossy 400w,https://images.macrumors.com/t/Zhg-_b1Z5Havuv-49n69jJbaTXk=/800x0/article-new/2024/01/apple-external-link-examples.jpg?lossy 800w,https://images.macrumors.com/t/xJdNK9YgbXaKeoLrQArGAG_xxD0=/1600x0/article-new/2024/01/apple-external-link-examples.jpg 1600w,https://images.macrumors.com/t/0BqXjjWqbh3lgY14hXDIAoMftOg=/2500x0/filters:no_upscale()/article-new/2024/01/apple-external-link-examples.jpg 2500w"><em></em></p><p><em>Examples of how Entitlement Links can be used in apps</em></p><p>Apple will provide an in-app warning to customers to let them know that they are leaving the ‌App Store‌ ecosystem to make a purchase on an external website and that ‌App Store‌ protections will not be available.</p>
<p><img src="https://images.macrumors.com/t/luUzlhnSjO9bR4tK8OwC1qc0z6c=/400x0/article-new/2024/01/apple-external-app-store-warning.jpg?lossy" srcset="https://images.macrumors.com/t/luUzlhnSjO9bR4tK8OwC1qc0z6c=/400x0/article-new/2024/01/apple-external-app-store-warning.jpg?lossy 400w,https://images.macrumors.com/t/VUmHxkAoOP8GY3Aobo_o6Q9PILc=/800x0/article-new/2024/01/apple-external-app-store-warning.jpg?lossy 800w,https://images.macrumors.com/t/gb-PABu893tLV5VX96yj86mCD0M=/1600x0/article-new/2024/01/apple-external-app-store-warning.jpg 1600w,https://images.macrumors.com/t/PHds6_lxLxrM2XJyaUe5x7Mux88=/2500x0/filters:no_upscale()/article-new/2024/01/apple-external-app-store-warning.jpg 2500w" sizes="(max-width: 900px) 100vw, 697px" alt="apple external app store warning" width="2030" height="1142" data-old-src="https://images.macrumors.com/images-new/1x1.trans.gif" data-src="https://images.macrumors.com/t/luUzlhnSjO9bR4tK8OwC1qc0z6c=/400x0/article-new/2024/01/apple-external-app-store-warning.jpg?lossy" data-srcset="https://images.macrumors.com/t/luUzlhnSjO9bR4tK8OwC1qc0z6c=/400x0/article-new/2024/01/apple-external-app-store-warning.jpg?lossy 400w,https://images.macrumors.com/t/VUmHxkAoOP8GY3Aobo_o6Q9PILc=/800x0/article-new/2024/01/apple-external-app-store-warning.jpg?lossy 800w,https://images.macrumors.com/t/gb-PABu893tLV5VX96yj86mCD0M=/1600x0/article-new/2024/01/apple-external-app-store-warning.jpg 1600w,https://images.macrumors.com/t/PHds6_lxLxrM2XJyaUe5x7Mux88=/2500x0/filters:no_upscale()/article-new/2024/01/apple-external-app-store-warning.jpg 2500w"><br>According to Apple's statement filed with the court, the requirements surrounding links are aimed at minimizing "fraud, scams, and confusion," while also providing developers with an opportunity to "entice users to other platforms" and give customers a choice between non-App Store purchasing and in-app purchases.</p>
<p>The changes today stem from Apple's 2021 legal battle with <a href="https://www.macrumors.com/guide/epic-games/">Epic Games</a>. Apple won the dispute and the court did not find that Apple had violated U.S. antitrust law, but Apple was at the time ordered to remove "anti-steering" rules preventing developers from informing customers about alternatives to in-app purchases. That order has been on hold <a href="https://www.macrumors.com/2023/07/17/app-store-rule-change-epic-games-delayed/">during the appeals process</a>, but the appeals process ended today.</p>
<p>Both Apple and ‌Epic Games‌ <a href="https://www.macrumors.com/2023/09/28/apple-epic-appeal-supreme-court/">had appealed</a> to the United States Supreme Court, but the Supreme Court <a href="https://www.macrumors.com/2024/01/16/supreme-court-declines-to-hear-apple-vs-epic-case/">declined to hear the case</a>. That means the initial ruling and the appeals court ruling that agreed with it are permanent, and Apple now has to comply with the part of that order that required it to change the ‌App Store‌ rules.</p>
<p>The anti-steering rule was two-pronged, requiring Apple to allow for links to in-app purchase alternatives and to allow developers to communicate with customers outside of the ‌App Store‌ through email and other contact information collected in the app. The outside communication part of the order was already satisfied with a change that Apple made to the ‌App Store‌ rules in 2021 to <a href="https://www.macrumors.com/2021/08/26/app-store-changes-developer-lawsuit-settlement/">settle a class-action developer lawsuit</a>.</p>
<p>Apple has already been allowing developers to use communication methods like email to inform customers about payment methods available outside of iOS apps, and Apple makes it clear in its messaging today that there are no limits on developers' out-of-app communications with users. The full statements that Apple provided to the court have been obtained by <em>MacRumors</em> and can be read below. </p>


<p><b>Update:</b> ‌Epic Games‌ CEO Tim Sweeney criticized Apple's ‌App Store‌ changes and said that Epic plans to contest Apple's "bad-faith compliance plan" in District Court. </p>
<div>
<blockquote data-lang="en" data-script="//platform.twitter.com/widgets.js">
<p lang="en" dir="ltr">A quick summary of glaring problems we've found so far:
1) Apple has introduced an anticompetitive new 27% tax on web purchases. Apple has never done this before, and it kills price competition. Developers can't offer digital items more cheaply on the web after paying a… <a href="https://t.co/YkHuapG7xa">pic.twitter.com/YkHuapG7xa</a>
— Tim Sweeney (@TimSweeneyEpic) <a href="https://twitter.com/TimSweeneyEpic/status/1747408148799881390?ref_src=twsrc%5Etfw">January 16, 2024</a></p></blockquote>
</div><br>
</div></article><p><h2>Popular Stories</h2></p><div><h3><a href="https://www.macrumors.com/2024/01/13/new-ios-features-coming-2024/">Apple Plans to Release These 8 New iOS Features This Year</a></h3><p>The calendar has turned to 2024, and there are many new iOS 17 and iOS 18 features that are expected to launch throughout the year. Below, we have recapped eight new iOS features expected in 2024, including Stolen Device Protection, collaborative Apple Music playlists, AirPlay on hotel room TVs, app sideloading in the EU, next-generation CarPlay, roadside assistance via satellite outside of...</p></div><div><h3><a href="https://www.macrumors.com/2024/01/15/apple-vision-pro-virtual-keyboard-criticism/">Apple Vision Pro Virtual Keyboard Blasted As 'Complete Write-Off'</a></h3><p>Monday January 15, 2024 3:25 am PST by <a href="https://www.macrumors.com/author/tim-hardwick/" rel="author">Tim Hardwick</a></p><p>Anyone paying attention to Apple's Vision Pro headset unveiling at WWDC 2023 will have seen its virtual keyboard demo. The keyboard floats in mid-air, allowing you to input text in your spatial computing environment while wearing the device. However, anyone planning to ditch their physical keyboard may want to hold onto it for a little while longer: According to Bloomberg's Mark Gurman, the ...</p></div><div><h3><a href="https://www.macrumors.com/2024/01/15/app-store-to-be-split-in-two/">App Store to Be 'Split in Two' Ahead of EU iPhone Sideloading Deadline</a></h3><p>Apple is preparing to split the App Store "in two" in the coming weeks ahead of European Union requirements that will force Apple to enable app sideloading in the region, Bloomberg's Mark Gurman reports. In the latest edition of his "Power On" newsletter, Gurman explained that Apple is gearing up to make changes to the App Store in the EU to comply with the region's impending Digital Markets ...</p></div><div><h3><a href="https://www.macrumors.com/2024/01/10/ios-17-3-coming-soon/">iOS 17.3 Coming Soon With These Two New Features for Your iPhone</a></h3><p>iOS 17.3 has been in beta testing since mid-December, and the upcoming software update includes two new features for the iPhone so far. Apple seeded the third beta of iOS 17.3 this week. The update should be coming soon, with a release likely later this month. Below, we provide additional details about the new features in iOS 17.3 so far. Stolen Device Protection Earlier this year, T...</p></div><div><h3><a href="https://www.macrumors.com/2024/01/12/iphone-16-capture-button-leak/">iPhone 16 Leak Reveals This All-New Button</a></h3><p>Following the addition of the Action button on the iPhone 15 Pro models, all iPhone 16 models may feature yet another all-new button. Apple plans to add a so-called "Capture" button to all iPhone 16 models, according to pre-production information obtained by MacRumors. The button would be located below the power button on the right side of the device, where the mmWave antenna window is...</p></div><div><h3><a href="https://www.macrumors.com/2024/01/16/here-are-all-the-new-m3-apple-macs-expected-in-2024/">Here Are All the New M3 Apple Macs Expected This Year</a></h3><p>Tuesday January 16, 2024 2:26 am PST by <a href="https://www.macrumors.com/author/tim-hardwick/" rel="author">Tim Hardwick</a></p><p>Apple in 2023 launched an M3-powered 24-inch iMac, as well as new 14-inch and 16-inch MacBook Pro models with M3 series chips. But the rest of Apple's Mac lineup is still to be updated to the latest M3 processors. Now that 2023 is over, attention naturally turns to the other Macs in the company's lineup and where they fit into Apple's M3 roadmap for the year ahead. Here's what the latest...</p></div><div><h3><a href="https://www.macrumors.com/2024/01/14/iphone-16-and-16-plus-8gb-ram-rumor/">iPhone 16 and iPhone 16 Plus Rumored to Feature Increased 8GB RAM and Wi-Fi 6E Support</a></h3><p>Apple's next-generation iPhone 16 and iPhone 16 Plus models will both feature 8GB of RAM, an increase over the 6GB of RAM in the iPhone 15 and iPhone 15 Plus, according to information shared today by technology analyst Jeff Pu. In a research note with investment firm Haitong International Securities, Pu reiterated his belief that all iPhone 16 models will be equipped with 8GB of RAM....</p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Nintendo Switch Emulator: Progress Report December 2023 (166 pts)]]></title>
            <link>https://blog.ryujinx.org/progress-report-december-2023/</link>
            <guid>39020265</guid>
            <pubDate>Tue, 16 Jan 2024 22:50:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.ryujinx.org/progress-report-december-2023/">https://blog.ryujinx.org/progress-report-december-2023/</a>, See on <a href="https://news.ycombinator.com/item?id=39020265">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
        <div><p>Happy New Year!</p><p>We hope everyone is having a great start to 2024 and that you’re all rejuvenated for another year of listening to these (mostly) regular rambles. We’ve got a fair bit to go through, including the usual sprinkling of graphical fixes, a nice meaty section that users of battery-powered devices will want to read and, of course, our usual yearly wrap up on a few different topics, including compatibility and performance across 2023.</p></div><p>We’ll start out with a certified retro title in Monster Hunter Rise (MHR). Released in the antiquated year of 2021, the game has received several updates and DLC throughout its life, the newest of which has been a pain to emulate since its release. From the ‘Sunbreak’ DLC and updates onwards, MHR would crash on boot before reaching the title screen with an error that was <em>very</em> complicated to solve within the buffer cache.</p><p>The old implementation made the assumption that all the memory regions where buffers could be located are contiguous (they’re next to each other). In most cases this assumption is correct, but if you can guess a title where it isn’t, then you probably have average pattern recognition skills. To solve this, support was <a href="https://github.com/Ryujinx/Ryujinx/pull/5427">implemented for Vulkan’s spare mapping feature</a>, which allows multi-range buffers to be created from multiple physical buffers.</p><figure><img src="https://blog.ryujinx.org/content/images/2024/01/01-min.png" alt="" loading="lazy" width="1920" height="1080" srcset="https://blog.ryujinx.org/content/images/size/w600/2024/01/01-min.png 600w, https://blog.ryujinx.org/content/images/size/w1000/2024/01/01-min.png 1000w, https://blog.ryujinx.org/content/images/size/w1600/2024/01/01-min.png 1600w, https://blog.ryujinx.org/content/images/2024/01/01-min.png 1920w" sizes="(min-width: 720px) 720px"></figure><p>Perhaps the obvious downside here is that the feature is limited to Vulkan. OpenGL does technically support sparse mappings, but doesn’t allow you to choose where it will be mapped, making it effectively useless for our use case. Metal on macOS is in the same boat as OpenGL; while supported, it does not provide enough control of the buffer mapping to be viable, with the limitation thus extending to MoltenVK too.<br>For devices and drivers that fully support Vulkan (Nvidia, Intel and AMD) however, Sunbreak and onwards is finally playable!</p><p><em>Fashion Designer</em>, a game which we’re sure will be topping Game of the Year charts across the globe, was exhibiting a particularly strange glitch.</p><figure><img src="https://lh7-us.googleusercontent.com/0Up8URFv1MPzsKsCubB3inZ31KAXkCRr-vCuoSuLedzXj9vKe2Pb8HSqbWQ2MzVmM1HiFhmQGLnFuTAYfVv1vjLftwXkSShra-OcZvLqzCjuwqfNbnwu7MV_gfQzq7dzlobkv_6619c30yUaGXA9DK4" alt="" loading="lazy" width="624" height="352"></figure><p>While we’re all <em>huugggge</em> fans of socks (having received around 30 pairs at Christmas), this seems like a few too many. On closer inspection, there are a few too many of everything. <br>If you’re one of the few folks left to play <em>Fashion Designer</em>, then each one of these icons is meant to be a different item of clothing. Duplicates are bad.</p><p>Our culprit resides within the texture cache, where everything has a specific lifespan before the texture is flushed. Certain flags on each texture get set when the texture is first accessed, and when it is finally swapped out for a new texture. <em>Fashion Designer</em> appeared to be rendering different objects to the same texture, and as such only the first use of the texture was correctly setting the cache flags. When the game went on to request more draws of different objects, the same object texture was being copied multiple times. By resolving this edge case, our full arrangement of clothing items can be viewed.</p><figure><img src="https://lh7-us.googleusercontent.com/w5iCJLyKoL080vnm6LwLfWUxe0eXYeZJWjBgOsQBRL23gYijQrYKdtcZzKUo44Rsakcsv1B4qe0p1-BBVnMMQB61ymE87yLyALQfMjDt-U4WHkfACNHRHcSsCg2NLIVcZbUonJryojvQTADKnwv5rII" alt="" loading="lazy" width="624" height="351"></figure><p>Remaining on quirky uses of textures for the time being, when you catch a Cicada in Yo-Kai Watch 1, a nice 2D image of the bug is meant to take up a large part of the screen. Unfortunately, due to a questionable if statement silencing the one log warning that would have told us immediately where the issue was, it has taken a fair while to track down the… bug.</p><figure><img src="https://lh7-us.googleusercontent.com/6DRyYfKggario26roh4J2MiTDvBtaio2xOJnHZXuwM0mrn45gVRVNn8l02wK4bMwlZDQfTKY0sgf6ONpVhyTOjzYkDReWoid4c3zGzzvtNgA12dfI7TzArqkeDaMXFDBkJuMkz_jPA-jfMdhvUhAQa4" alt="" loading="lazy" width="624" height="351"></figure><p>For whatever reason, the team developing Yo-Kai Watch 1 decided to perform an image store on a texture that is a quarter of the width of the base format, but stores four times the data per pixel as an RGBA32 texture. If this sounds pointless, it is, because what is done with that image straight away? It’s accessed as an RGBA8 image, which is an incompatible format conversion! <br><a href="https://github.com/Ryujinx/Ryujinx/pull/5943">Adding a copy dependency to these formats</a> resolves the bug and restores the bug.</p><figure><img src="https://lh7-us.googleusercontent.com/5P9ohGy-wvP2pZyeMbpxwHYpQ-89X4PZJ982HwrVQsp_3b0NOGGHXK9JXdD3RxDC_--mZP6aR4sFTq9z1M22BwZZ7aia8vT5VbiVH5A-gByYER7a2HF-LiHzS7FwFmkaflj4_Krx480TQoF-mmDMtfg" alt="" loading="lazy" width="624" height="352"></figure><p>This was also the cause of major graphical corruption in <em>Wet Steps</em>. The game still has a few other issues, but the difference is major.</p><!--kg-card-begin: html--><figure>
    
    <figcaption></figcaption>
</figure><!--kg-card-end: html--><p>Super Mario RPG had impressively few bugs when it released in late November, but our eagle-eyed users instantly noticed that Mario himself, and a few environmental objects, were slightly dull. While Mario is getting on in years and has probably lost the sparkle of his GameCube youth, it turned out that bindless elimination was not working correctly in a couple of cases. In the event that a shader handle is assigned twice via different paths, bindless elimination was unable to be extended, as it is unable to find the handle operation. However, even if different paths exist, the value is actually always the same, as any relevant data is unable to be modified once inside the shader pass. By <a href="https://github.com/Ryujinx/Ryujinx/pull/5957">fixing this to simply pick the first value if multiple routes exist</a>, Super Mario RPG renders correctly.</p><!--kg-card-begin: html--><figure>
    
    <figcaption></figcaption>
</figure><!--kg-card-end: html--><p>Another game that highlighted an unhandled edge case in bindless elimination was <em>Detective Pikachu Returns. </em>This one is more subtle, but <a href="https://github.com/Ryujinx/Ryujinx/pull/5958">extending through shuffle</a> resolves cubemap reflections throughout the game.</p><!--kg-card-begin: html--><figure>
    
    <figcaption></figcaption>
</figure><!--kg-card-end: html--><p>Let’s take a short interim to talk through some of the smaller, but perhaps interesting changes that have taken place over the last couple of months.</p><ul><li>When amiibos are first used (via AmiiboAPI), the API json will be <a href="https://github.com/Ryujinx/Ryujinx/pull/3681">stored locally</a> so that amiibos can be used offline.</li><li>Our minimum macOS version has been <a href="https://github.com/Ryujinx/Ryujinx/pull/5925">increased to macOS 12 Monterey</a>. We’re not sure why macOS 11 was chosen before, but it is wholly unsuitable for Switch emulation!</li><li><a href="https://github.com/Ryujinx/Ryujinx/pull/4956">Whole bunch of string, time and DateTime formatting change</a>s. Fixes sorting being backwards for play-time, file-size and last-played and most importantly, removes a load of log spam if games have never been played.</li><li>“Create Desktop Shortcut” actually <a href="https://github.com/Ryujinx/Ryujinx/pull/5852">works on macOS and also supports launching in fullscreen.</a></li></ul><p>Alright strap in, it’s time for the “Ryujinx blog teaches you computer science” segment.</p><p><strong><u><em>Sleeping</em></u></strong><br>We’re all aware that sleep is important right? Unfortunately, as is probably relatable to many, it’s actually more difficult than it may appear to sleep for the correct amount of time. Undersleeping and then feeling exhausted, oversleeping and missing your train is an all too common experience in the modern world. Computers are not so different.</p><p>When they’ve finished their tasks, they’d like nothing better than to pull up their duvet and tuck in for a solid 6ms nap before work the following nanosecond.</p><p>Ryujinx needs to operate on a <em>very </em>tight schedule and the best way to do this is actually <strong>not</strong> to sleep. No desktop kernel is truly “real time”, in the sense that it is impossible for us to sleep in one instant and wake whenever asked. There is always variability and delay to our requests (pretty graphs later).</p><p><strong><u><em>Alternatives to sleeping</em></u></strong><br>The alternative to sleeping is called “spin-waiting”, in which the program retains control of the CPU and continually asks it to “spin” until an event is triggered, which will release the CPU from this spin cycle. Spinning can be used to take very granular control over when and how the CPU stops and starts execution of a thread within a program, but comes with a major downside: it’s still active and using power the whole time. Consider sleeping vs spinwaits to be the difference between sleeping and sitting in a waiting room. You’re ready quicker if requested from a waiting room, but you’re less rested than if someone called you from sleep.</p><p><strong><u><em>The problem</em></u></strong><br>Now that we have the terminology out of the way, let’s look at the problem. If we have a single thread, monitoring a single event that wants to wait 1ms at a time, we have no problem at all.</p><figure><img src="https://blog.ryujinx.org/content/images/2024/01/12.png" alt="" loading="lazy" width="1020" height="244" srcset="https://blog.ryujinx.org/content/images/size/w600/2024/01/12.png 600w, https://blog.ryujinx.org/content/images/size/w1000/2024/01/12.png 1000w, https://blog.ryujinx.org/content/images/2024/01/12.png 1020w" sizes="(min-width: 720px) 720px"></figure><p>Pretty much all three major operating systems will allow us to sleep with 1ms granularity, and be able to wake at the right time. However, consider this same scenario but with 10 different wait events on the same thread, all out of sync with each other by 0.1ms.</p><figure><img src="https://blog.ryujinx.org/content/images/2024/01/13.png" alt="" loading="lazy" width="1026" height="421" srcset="https://blog.ryujinx.org/content/images/size/w600/2024/01/13.png 600w, https://blog.ryujinx.org/content/images/size/w1000/2024/01/13.png 1000w, https://blog.ryujinx.org/content/images/2024/01/13.png 1026w" sizes="(min-width: 720px) 720px"></figure><p>Now we start to run into issues. The solution we used up until the end of 2023 was to simply spin through these waits, but as you can see, this means spinning <em>the entire time,</em> as we need to be awake to handle the thread that is about to wake every 0.1ms.<br>We spoke in our <a href="https://blog.ryujinx.org/progress-report-october-2023/">last report</a> about a change to `ServerBase` which stopped polling every 1ms. This reduced CPU utilization and power usage dramatically due to the problem above. ServerBase was a major contributor to the huge stack of concurrent waits we had to deal with. Unfortunately, it is only one of many thread types that request constant waits; game threads are just as significant a problem.</p><p>So how do we move forward? The CS nerds reading have been shouting “nanosleep!” at their screens for the last couple of minutes, and they’re half right.</p><p><u><em><strong>Linux/macOS</strong></em></u><br>Linux and macOS both provide a <em>`nanosleep` </em>syscall to wait a precise number of nanoseconds. Nanosecond precision is more than capable of handling our above scenario, so let’s give it a whirl.</p><figure><img src="https://blog.ryujinx.org/content/images/2024/01/14.png" alt="" loading="lazy" width="1555" height="486" srcset="https://blog.ryujinx.org/content/images/size/w600/2024/01/14.png 600w, https://blog.ryujinx.org/content/images/size/w1000/2024/01/14.png 1000w, https://blog.ryujinx.org/content/images/2024/01/14.png 1555w" sizes="(min-width: 720px) 720px"></figure><p>Upon testing, we see that nanosleep is not quite as precise as its name claims. At very low nanosecond values we see very consistent (and small) wake error values, but once we reach the threshold of 0.5ms, a huge spike in error occurs, which eventually levels off at around 1.5ms.</p><figure><img src="https://blog.ryujinx.org/content/images/2024/01/15.png" alt="" loading="lazy" width="1204" height="746" srcset="https://blog.ryujinx.org/content/images/size/w600/2024/01/15.png 600w, https://blog.ryujinx.org/content/images/size/w1000/2024/01/15.png 1000w, https://blog.ryujinx.org/content/images/2024/01/15.png 1204w" sizes="(min-width: 720px) 720px"></figure><p>macOS curiously again has different behavior. At tiny wait requests, the syscall is remarkably accurate with minimal error on sleep requests down to the nanosecond. Unfortunately the error is directly proportional to the wait time requested, and keeps climbing until we see almost 0.5ms of delay when asking for a 3ms sleep, and over 3ms delay when asking for 20ms of sleep.</p><p>While these sound bad, the use case we wanted was already for those smaller sleep times, so both macOS and Linux have an efficient and easy way out here via <em>nanosleep</em>.<br>Let’s talk about Windows…</p><p><strong><u>Windows</u></strong></p><p>The Windows NT kernel is, <em><u>by far</u></em>, the least “real time” of the three major options presented. It has no nanosleep equivalent, and as such is highly limited in how to deal with our sleep problem. By default you can sleep to an accuracy of <strong>1ms </strong>which, as we hope to have reiterated, is not good enough for as low as two concurrent waits (each 0.5ms apart) let alone 10. Is all hope lost then? Is 1ms really the best we can do? We’re pretty smart so the answer is: hell no.</p><p>On most x86_64 systems, you can perform a query to the clock resolution and discover that there is actually a 0.5ms resolution “base clock”, and that perhaps more interestingly, by default, any waits you perform will align to the nearest “base clock tick” automatically. If you sleep with no thought, this means your thread may wake late due to alignment with the next base tick. However, if you have this information, and make a very smart guess about when the next tick will occur, you can time your sleep to 0.5ms precision and nearly always wake right before it.</p><p>None of this solves our 10 concurrent 1ms wait issues though. If we detect that a wait event is base-clock aligned or very close to, we can allow the system spoken about to align the waits and wake just before the next clock tick. If the wait is not base-clock aligned (or extremely precise like 0.01ms), then there is unfortunately nothing that the NT kernel provides us to solve this, beyond continuing to use spinwaits where needed.</p><p>Class dismissed, let’s look at what all of this actually does. We said before this whole thing is about CPU usage and power draw, so some more graphs seem to be in order.</p><figure><img src="https://blog.ryujinx.org/content/images/2024/01/16.png" alt="" loading="lazy" width="1350" height="862" srcset="https://blog.ryujinx.org/content/images/size/w600/2024/01/16.png 600w, https://blog.ryujinx.org/content/images/size/w1000/2024/01/16.png 1000w, https://blog.ryujinx.org/content/images/2024/01/16.png 1350w" sizes="(min-width: 720px) 720px"></figure><p>Apple and Linux devices will be seeing the largest benefit here, with some seriously impressive efficiency gains at equal frame rate and resolution. Tears of the Kingdom is being slashed by almost 40%, Red Dead Redemption and Breath of the Wild both see very healthy 15-20% shifts, and Pokémon Violet practically sheds everything with a 75% reduction. For perspective, that is an M2 MacBook Air emulating Pokémon Violet more efficiently than the Switch plays it natively.</p><p>Areas of games that don’t really do much like title screens, or when emulation is paused, see some wild reductions on devices like the Steam Deck.</p><!--kg-card-begin: html--><figure>
    
    <figcaption></figcaption>
</figure><!--kg-card-end: html--><p><a href="https://github.com/Ryujinx/Ryujinx/pull/5948">These changes</a> can result in additional hours of battery life while reducing the magnitude and frequency of thermal throttling, particularly in fanless devices such as the MacBook Air family. It also allows devices to reach and maintain their boost clocks during the times they’re actually needed, rather than being continually tricked into boosting on menus and when paused. If none of that sounds cool then we saved you some money on your next energy bill, take it or leave it!</p><p>Lastly, for those of you who find it interesting that we decided to write this thing in C#/.NET, we had a new and shiny .NET version to update to in November: .NET 8 (they grow up so fast…). Microsoft always provides an <a href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-8/">absolutely <em>huge</em> document</a> on all of the performance improvements they’ve brought to the table each year, but for us, they can usually be distilled into our patented Super Mario Odyssey pole benchmark.</p><!--kg-card-begin: html--><figure>
    
    <figcaption></figcaption>
</figure><!--kg-card-end: html--><p>This very blog also got a very cool mention during .NET conference 2023 as part of their excellent talk on Dynamic PGO. Check that out <a href="https://www.youtube.com/watch?v=WrpYcGic9b8">here</a>. </p><figure><img src="https://blog.ryujinx.org/content/images/2024/01/21-min.png" alt="" loading="lazy" width="1920" height="1080" srcset="https://blog.ryujinx.org/content/images/size/w600/2024/01/21-min.png 600w, https://blog.ryujinx.org/content/images/size/w1000/2024/01/21-min.png 1000w, https://blog.ryujinx.org/content/images/size/w1600/2024/01/21-min.png 1600w, https://blog.ryujinx.org/content/images/2024/01/21-min.png 1920w" sizes="(min-width: 720px) 720px"><figcaption><strong>Look ma! We’re on TV!</strong></figcaption></figure><p><strong><u>2023 roundup!</u></strong><br>So how did 2023 go for us overall? Well let’s take a look, shall we? <br>Hope you all aren’t bored with graphs yet.</p><figure><img src="https://blog.ryujinx.org/content/images/2024/01/22.png" alt="" loading="lazy" width="1457" height="898" srcset="https://blog.ryujinx.org/content/images/size/w600/2024/01/22.png 600w, https://blog.ryujinx.org/content/images/size/w1000/2024/01/22.png 1000w, https://blog.ryujinx.org/content/images/2024/01/22.png 1457w" sizes="(min-width: 720px) 720px"></figure><p>We added over <strong>700 </strong>games to our compatibility list during 2023 which brings the total for games tested (and reported) on Ryujinx to <strong>4255. </strong>Over 83% of those are reported as having no graphical, technical or stability issues <em>at all</em>, with a further 12% of titles having at least one problem. This category is mostly filled with titles that have minor graphical glitches or stability issues. In other systems of marking, they may be considered playable also. The remaining 4.5% of titles only progress as far as the menus, if at all.</p><p>As far as performance goes, we had a year on year average improvement of 36% in our own usual suite of games. As usual this is <em>highly</em> game and hardware-dependent.</p><figure><img src="https://blog.ryujinx.org/content/images/2024/01/23.png" alt="" loading="lazy" width="1388" height="862" srcset="https://blog.ryujinx.org/content/images/size/w600/2024/01/23.png 600w, https://blog.ryujinx.org/content/images/size/w1000/2024/01/23.png 1000w, https://blog.ryujinx.org/content/images/2024/01/23.png 1388w" sizes="(min-width: 720px) 720px"></figure><p>We’re not quite sure what happened to Persona 5 and NieR, but both have seen a 61% and 89% improvement respectively. Our two Zelda games tested jumped by 20% and 35% (Tears of the Kingdom does indeed run on our January builds), and our classic benchmark of Super Mario Odyssey continues to keep climbing no matter what we do.<br>All in all, a great result and as usual, all of this just works. With no need to fiddle with settings for different games, the out-of-box experience is the best it’s ever been.</p><p>2023 sure had plenty of game releases so let’s jot up just how many Ryujinx was right in the action for, running on day 1!</p><ol><li>The Legend of Zelda: Tears of the Kingdom ✓</li><li>Super Mario Wonder ✓</li><li>Super Mario RPG ✓</li><li>Pikmin 4 ✓</li><li>Metroid Prime Remastered ✓</li><li>Sea of Stars ✓</li><li>Octopath Traveller II ✓</li><li>Fire Emblem Engage ✓</li><li>Kirby’s Return to Dreamland Deluxe ✓</li><li>Advance Wars 1+2: Re-boot Camp ✓</li></ol><p>A ridiculous list of titles, first party and otherwise being playable with no changes always fills us with pride. It would be wrong of us to omit that a couple of these games (Tears of the Kingdom among them) did need some additional love to reach our standards, but the majority of the year has gone without a hitch.</p><p><strong><u>Closing words</u></strong><br>That’s all from us this fine January. We hope you’ll stick around for another year of this madness because we’re sure that 2024 will not be dull!</p><div><p>Onto our scheduled sales pitch: if you would like to contribute to Ryujinx then there are many ways in which you can assist us. Knowledgeable in emulation, graphics development or even just use C#/.NET in your day job and want something cool to stat-pad your resume? We’re always looking for more folks to check out our <a href="https://github.com/Ryujinx/Ryujinx">GitHub</a>. Fix bugs, add features, or our personal favourite: stare blankly at Visual Studio while imposter syndrome slowly creeps over your shoulder.<br>If you couldn’t write “Hello World” in English, let alone a programming language, you can still help us fund our development time and other costs monetarily via our <a href="https://www.patreon.com/ryujinx">Patreon</a>, or help us with testing games and helping fellow users figure out this whole emulation thing on our <a href="https://discord.gg/ryujinx">Discord</a>.</p><p>Until next time!</p></div>
    </section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Fluorite lenses: Corrective capabilities beyond ordinary optical glass (311 pts)]]></title>
            <link>https://global.canon/en/c-museum/special/exhibition2.html</link>
            <guid>39020258</guid>
            <pubDate>Tue, 16 Jan 2024 22:50:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://global.canon/en/c-museum/special/exhibition2.html">https://global.canon/en/c-museum/special/exhibition2.html</a>, See on <a href="https://news.ycombinator.com/item?id=39020258">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

          <h3>Fluorite lenses: Corrective capabilities beyond the limits of ordinary optical glass</h3>

          <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-1.jpg" alt="Fluorite lenses: Corrective capabilities beyond the limits of ordinary optical glass"></p><p>One crucial material that supports the high image quality characteristic of Canon lenses is fluorite, which is a crystallized form of calcium fluoride. It has long been known that using a fluorite lens in conjunction with a
            glass lens can reduce chromatic aberration to extremely low levels. However, natural fluorite occurs in small sizes that are suitable only for use in small optical equipment such as the object lenses of microscopes. Canon, in its pursuit
            of progress in imaging capabilities, was keen on utilizing fluorite in its photography lenses, set out to develop its own technology for forming large, high-purity artificial fluorite crystals using fluorite ore as a raw material. In May
            1969, the <a href="https://global.canon/en/c-museum/product/fl117.html">FL-F300mm f/5.6</a>—the world’s first consumer telephoto lens to employ fluorite lens elements—was released.</p>

          
          <h4>How fluorite lens elements correct chromatic aberration</h4>
          <p>You might have noticed the outlines of your subjects tinted in a way that resembles a color fringe. This is chromatic aberration, and it can also take the form of a haziness throughout the entire image. As this prevents the subject
              from being rendered accurately, it needs to be corrected so that the image quality is sharp, clear, and faithful to the scene.</p>
          <div>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-2.jpg" alt="The purple fringing at the edges if these branches is a form of chromatic aberration."></p><p>The purple fringing at the edges if these branches is a form of chromatic aberration.</p>
          </div>
          
          <p>Chromatic aberration happens because when light passes through a glass surface, the different-colored waves within it (red, green, blue, etc.) are refracted at different angles due to their different lengths, with each
            color converging at a different focal point. Such aberration is usually corrected by using a combination of concave and convex lenses, which refract the light in opposite directions to each other.</p>
          <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-3_en.jpg" alt="Chromatic aberration correction using concave and convex glass lenses">
          </p>
          <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-4_en.jpg" alt="Chromatic aberration correction using concave and convex glass lenses">
          </p>
          
          <p><strong>Chromatic aberration correction using concave and convex glass lenses</strong></p>
          <p>However, it is not possible to correct the chromatic aberration on all wavelengths by using ordinary glass. The chromatic aberration, which occurs on certain wavelengths such as red, is called residual chromatic
            aberration. As the refractive index of the wavelengths differ depending on the type of optical glass, there are limitations to how much residual chromatic aberration can be mitigated depending on the combination and properties of the
            optical glass. </p>
          <p>This is where fluorite comes in handy. As fluorite is a fundamentally different material than conventional optical glass, it can be used in combination with glass to correct chromatic aberration more effectively. It is
            particularly effective on telephoto lenses, where the long focal length exacerbates chromatic aberration.</p>

          <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-5_en.jpg" alt="Chromatic aberration correction using a convex fluorite lens and a concave glass lens">
          </p>
          <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-6_en.jpg" alt="Chromatic aberration correction using a convex fluorite lens and a concave glass lens">
          </p>
          
          <p><strong>Chromatic aberration correction using a convex fluorite lens and a concave glass lens</strong></p>
          <p>Canon’s fluorite lens elements incorporate natural fluorite as a raw material, endowing the lenses with low-refractive, low-dispersion properties not possible with glass lenses. Fluorite lenses are also unique in their
            extraordinary partial dispersion tendencies: the red to green wavelengths are dispersed with the same tendencies as glass, but the green to blue wavelengths are dispersed more than glass. Using a convex fluorite lens element alongside a
            high-dispersion glass concave lens element therefore eliminates residual chromatic aberration, making possible a lens that produces clear, sharp, and high-quality images.</p>
          <div>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-7_en.png" alt="Refraction and dispersion">
            </p>
            <div>
              <h5><strong>Refraction and dispersion</strong></h5>
              <p>‘Refraction’ is the phenomenon in which light changes direction when it passes through the surface of a material such as glass. The degree of the directional change is called the ‘refractive index’. As the refractive
                index varies depending on the color constituents (wavelengths) of the light, each color bends in a different direction. This is known as color dispersion. On optical glass, dispersion occurs at a fixed proportion regardless of the
                wavelength, whereas on fluorite, dispersion occurs at different proportions for different wavelengths and is known as ‘extraordinary partial dispersion’. </p>
            </div>
            
          </div>
          
          <h4>The emergence of fluorite lenses and how they improve the image quality of telephoto lenses</h4>
          <p>Fluorite lenses transcend traditional limitations to reduce chromatic aberration to an extremely low level. These lenses have their origins the Canon F Project, which started in August 1966. Canon’s lens developers strongly
            believed that to create a lens that was performed better than existing lenses, it was first necessary to create a new material, and it was this conviction that drive them to establish the technology for producing artificial fluorite
            crystals to use in camera lenses.</p>
          <p>The challenge in producing artificial fluorite crystals lay in the crystallization. The term “glass” was originally used to describe the state of a material. Being non-crystalline, it consists of atoms fixed in random
            positions--simply melting glass allows it to be processed into different shapes. On the other hand, fluorite is a crystalline substance, and its constituent atoms must be arranged in a specific configuration for it to crystalize. </p>
          <p>To pulverize natural fluorite, purify it, and then restore the exact atomic structure to recrystallize it into a size large enough for application in a camera lens is a near-impossible feat. Therefore, the developers had to
            ensure a precisely controlled vacuum environment where the temperature is kept at least 1,000℃, so they designed an apparatus to artificially produce large crystals with high purity In 1968, two years after the F project started, Canon
            finally managed to overcome these obstacles to successfully form artificial fluorite crystals large enough to be used in camera lenses. </p>
          <div>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-8.jpg" alt="natural fluorite crystals">
            </p>
            <p>The stones on the left are natural fluorite crystals. They are green and purple due to impurities within the crystals. At the middle is an artificial fluorite crystal ingot produced by Canon.<br>When heated, natural
                fluorite glows with a dreamy light that resembles that of fireflies, which is said to be the reason behind its Japanese name, <i>hotaru ishi</i>, literally “firefly stone”. Just like how fireflies require clean water to live, only
                pure fluorite can “shine” as photography lenses.</p>
            
          </div>
          
          <p>Another challenge in fluorite lens production is its polishing. As fluorite is softer and more delicate than glass, the same methods used for polishing glass are not suitable. Therefore, Canon developed a special technology
            for polishing fluorite lenses that requires up to four times longer than the time needed to polish ordinary optical glass. This technology was successfully commercialized the following year, in May 1969.
          </p>
          <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-9.jpg" alt="The first lens to employ fluorite lens elements was the FL-F300mm f/5.6 (released in 1969). The bright green line, meant to evoke the image of the glow of fluorite, indicates that the lens features a fluorite lens element."></p><p>The first lens to employ fluorite lens elements was the FL-F300mm f/5.6 (released in 1969). The bright green line, meant to evoke the image of the glow of fluorite, indicates that the lens features a fluorite
            lens element.</p>
          <p>The FL-F300mm f/5.6, whose successful commercialization was achieved by transcending many challenges, was highly acclaimed for is vivid, high-contrast rendering, and became widely used in such professions as
            photojournalism. </p>
          <p>Canon subsequently improved on is high temperature vacuum, temperature control, and polishing technologies, enabling the use of fluorite lens elements in many more lenses. Canon remains committed to pursuing the highest
            image quality for its telephoto lenses. </p>

          <h4>The fluorite lens production process</h4>
          <p>While the grinding and polishing processes may seem identical for all kinds of optical glass, each stage of the fluorite lens production process requires slow, meticulous attention to detail.</p>
          <div>

            <p><b>1. Raw materials</b><br>The raw material for fluorite lenses is naturally occurring fluorite ore.</p>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-10.jpg" alt="1. Raw materials">
            </p>
            
            <p><b>2. Pulverization and refinement</b><br>The raw fluorite is pulverized and refined to remove impurities before being poured into a graphite crucible that does not melt easily.</p>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-11.jpg" alt="2. Pulverization and refinement">
            </p>
            
            <p><b>3. Crystallization </b><br>The crucible is placed in a crystal-growing apparatus with a heater on top and heated to 1,400℃. After the raw fluorite has melted, the crucible is gradually lowered, allowing crystallization to occur
                starting from the bottom of the crucible.</p>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-12_en.png" alt="3. Crystallization ">
            </p>
            
            <p><b>4. Annealing</b><br>The annealing process removes strains that occur inside the crystals formed. Strain that lead to cracks are removed by heating the crystals to a high temperature insufficient to melt them, and then slowly
                cooling them to room temperature over a long period of several weeks.</p>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-13.jpg" alt="4. Annealing">
            </p>
            
            <p><b>5. Trimming and rough processing</b><br>The unnecessary parts of the crystal surface are trimmed off, and the crystal is rough-processed to the required size. The interior of the crystal is inspected for anomalies. </p>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-14.jpg" alt="5. Trimming and rough processing">
            </p>
            
            <p><b>6. Grinding</b><br>The top and bottom surfaces of the crystal are ground into a spherical shape with a surface that resembles frosted glass.</p>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-15.jpg" alt="6. Grinding">
            </p>
            
            <p><b>7. Polishing</b><br>The surfaces of the crystal are polished with a pellet made from coagulated polish until they are semi-transparent and meet the specified dimensions. Finally, a special polish is used to remove fine scratches.
              </p>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-16.jpg" alt="7. Polishing">
            </p>
            
            <p><b>8. Vapor deposition</b><br>Coating material is heat-evaporated under high vacuum conditions up to one-millionth to one-hundred millionth of one unit of atmospheric pressure. This forms a thin film over the polished lens. </p>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-17_en.png" alt="8. Vapor deposition">
            </p>
            
            <p><b>9. Completion</b><br>An experienced technician inspects purity using an interferometer. Only lens elements that pass the inspection are sent to be assembled in lenses. </p>
            <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-18.jpg" alt="9. Completion">
            </p>
            
          </div>
          <h4>Lenses that employ fluorite lens elements <span>(as at May 2021)</span></h4>
          <div>
            <p>Since the FL-F300mm, Canon has produced 39 more lenses that employ fluorite lens elements. As fluorite lens elements not only correct chromatic aberration but also contribute to reducing the size and weight of products,
                they are proactively used in large telephoto lenses.<br>These lenses are much beloved by many photographers who demand high image quality at super telephoto focal lengths, including not only professional sports photographers and
                photojournalists, but also enthusiasts who photograph subjects such as wild birds, trains and aircraft.</p>
            <div>
              <p><img src="https://global.canon/ja/c-museum/common/img/special/exhibition2-19.jpg" alt="RF600mm F4 L IS USM (released in 2021)"></p><p>RF600mm F4 L IS USM (released in 2021)</p>
            </div>

            
          </div>
          <h4>RF lenses that employ fluorite lens elements <span>(as at May 2021)</span></h4>
          


        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Stable Code 3B: Coding on the Edge (294 pts)]]></title>
            <link>https://stability.ai/news/stable-code-2024-llm-code-completion-release</link>
            <guid>39019532</guid>
            <pubDate>Tue, 16 Jan 2024 21:40:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://stability.ai/news/stable-code-2024-llm-code-completion-release">https://stability.ai/news/stable-code-2024-llm-code-completion-release</a>, See on <a href="https://news.ycombinator.com/item?id=39019532">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1705434376921_5483">
  <p>Today, we announce our first Large Language Model release of 2024: <a href="https://huggingface.co/stabilityai/stable-code-3b" target="_blank"><span>Stable Code 3B</span></a>. This new LLM is a follow-up to our previously released <a href="https://stability.ai/news/stablecode-llm-generative-ai-coding"><span>Stable Code Alpha 3B</span></a> and the first major Stable Code release, offering a new state-of-the-art model designed for code completion with multiple additional capabilities.&nbsp;</p><p>Compared to CodeLLaMA 7b, Stable Code 3B is 60% smaller while featuring a similar high-level performance across programming languages. Based on our pre-existing <a href="https://huggingface.co/stabilityai/stablelm-3b-4e1t" target="_blank"><span>Stable LM 3B</span></a> foundational model trained on 4 trillion tokens of natural language data, Stable Code was further trained on software engineering-specific data, including code. The model's compact size allows it to be run privately on the edge in real-time on modern laptops, even those without a dedicated GPU.</p><p>Stable Code 3B offers more features and significantly better performance across multiple languages with additional benefits such as support for Fill in the Middle capabilities (FIM) and expanded context size. Stable Code as a base is trained on sequences of up to 16,384 tokens but follows a similar approach to CodeLlama with the implementation of Rotary Embeddings, optionally allowing modification of the rotary base up to 1,000,000, further expanding the model’s context length up to 100k tokens.</p><p>Stable Code is trained on 18 programming languages (selected based on the <a href="https://survey.stackoverflow.co/2023/#section-most-popular-technologies-programming-scripting-and-markup-languages" target="_blank"><span>2023 StackOverflow Developer Survey</span></a>) and demonstrates state-of-the-art performance (compared to models of similar size) on the MultiPL-E metrics across multiple programming languages tested.</p><p><strong>Performance Comparison</strong></p>
</div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1705430802082_7238">
  <p><strong>Training Insights</strong></p><p>Our training pipeline consists of a multi-stage process similar to Codellama. We start with an LM pre-trained on natural language data, in this case, <a href="https://huggingface.co/stabilityai/stablelm-3b-4e1t" target="_blank"><span>StableLM-3B-4e1t</span></a>, followed up with unsupervised fine-tuning on multiple code and code-related datasets, including CommitPack, GitHub Issues, StarCoder &amp; other Math datasets. In the second step, we further fine-tune the model with longer sequences of 16,384 tokens with the base modification suggested in CodeLLama. The new stable-code model also supports Flash Attention 2 and is available for use.</p><p>Further references to the data and model can be found in our <a href="https://huggingface.co/stabilityai/stable-code-3b" target="_blank"><span>model card</span></a>. We will release a full technical report with additional details and ablations to be more transparent and open to the community.</p><p><strong>Commercial Applications</strong></p><p>Stay updated on our progress by signing up for our newsletter, and learn more about commercial applications by contacting us here.&nbsp;</p><p>Follow us on <a href="https://twitter.com/stabilityai" target="_blank"><span>Twitter</span></a>, <a href="https://www.instagram.com/stability.ai/" target="_blank"><span>Instagram</span></a>, <a href="https://www.linkedin.com/company/66318622/"><span>LinkedIn</span></a>, and join our <a href="https://discord.gg/stablediffusion"><span>Discord Community</span></a>.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Post-mortem for last week's incident at Kagi (310 pts)]]></title>
            <link>https://status.kagi.com/issues/2024-01-12-kagi-down-on-some-regions/</link>
            <guid>39019119</guid>
            <pubDate>Tue, 16 Jan 2024 21:04:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://status.kagi.com/issues/2024-01-12-kagi-down-on-some-regions/">https://status.kagi.com/issues/2024-01-12-kagi-down-on-some-regions/</a>, See on <a href="https://news.ycombinator.com/item?id=39019119">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><small>January 12, 2024 at 4:30 PM UTC</small></p><p><small><a href="https://status.kagi.com/affected/us-east4/">us-east4</a>
<a href="https://status.kagi.com/affected/us-west2/">us-west2</a>
<a href="https://status.kagi.com/affected/europe-west2/">europe-west2</a>
<a href="https://status.kagi.com/affected/asia-east2/">asia-east2</a>
<a href="https://status.kagi.com/affected/us-central1/">us-central1</a>
<a href="https://status.kagi.com/affected/europe-west4/">europe-west4</a>
<a href="https://status.kagi.com/affected/asia-southeast1/">asia-southeast1</a>
<a href="https://status.kagi.com/affected/australia-southeast1/">australia-southeast1</a>
<a href="https://status.kagi.com/affected/southamerica-east1/">southamerica-east1</a></small></p><p><strong>Resolved after
6h
50m of downtime.</strong>
<span>January 12, 2024 at 11:20 PM UTC</span></p><hr><p><em>Investigating</em> - We are experiencing issues following a deploy. Team is working on resolving this..
<span>(16:45 UTC — Jan 12)</span></p><p><em>Monitoring</em> - We have are reverting a configuration change that we believe to be the culprit, and are continuing to monitor as service is coming back to full health.
<span>(18:30 UTC — Jan 12)</span></p><p><em>Update</em> - In order to fully restore stability we will need to pause traffic momentarily. We will be redirecting users to this page while we restore load to the service in a controlled manner. We will follow up with further details as the situation progresses.
<span>(20:26 UTC — Jan 12)</span></p><p><em>Monitoring</em> - Traffic has been restored and we are continuing to monitor the service as it comes back to full health.
<span>(21:14 UTC — Jan 12)</span></p><p><em>Resolved</em> - All services are now operating as normal. Thank you for your patience while we resolved this issue.</p><h2 id="post-mortem">Post-Mortem</h2><p>Hi all,</p><p>This is Zac, the Tech Lead at Kagi.
I’m going to be sharing below a more in-depth post-mortem of our service interruption last week.
Assisting me in responding to this incident was Seth, one of our senior engineers, and Luan, our DevOps engineer.</p><p>This will be fairly technical, you can skip to “Next Steps” for takeaways.
The summary is that we were the target of some actors misusing the service, exploting a pathological case in our infrastructure, and we immediately released mitigations and are working on improvements in several areas of our code and communications.</p><h2 id="timeline">Timeline</h2><p>On January 12th, approx. 5:30PM UTC, the team became aware of an infrastructure issue occurring by way of our internal monitoring and user reports of issues.
The nature of the issue was causing slow loading or complete page timeouts for users in various regions.</p><p>This incident unfortunately took us quite some time to resolve - we deeply thank our users for their patience, and the opportunity to give some background as to what was going on, and how we plan to move forward.</p><p>At first, by what turned out to be a complete coincidence, the incident occurred at precisely the same time that we were performing an infrastructure upgrade to our VMs with additional RAM resources.
Our monitoring was reporting both high latency and issues with our application’s database connection pool.
While no code changes were part of this upgrade, and “old” instances were reporting some issues as well, we decided the first course of action was to revert this change.</p><p>This revert completed at around 6:50 PM, but as we continued to monitor the issue persisted.
Meanwhile, we had been inspecting the behavior of our application’s database connection pools, which were saturated with connections to our primary DB instance.
It was unclear what the exact cause of this was yet, but what was clear is that the total number of connections being established globally to our primary exceeded its maximum configured connection limit.</p><p>Our next move was to evaluate if we had somehow caught ourselves in a “spiral” of exhausting our maximum connections, wherein any instance that we would replace would simply get its connection pool exhausted again, queuing for access to the primary.
In several steps we tried replacing a few instances to see what effect reducing the congestion would have.
We also were making progress on evaluating various parts of the databases internal health and query performance.</p><p>With mild signs that cycling some instances was helping, at 9:30PM UTC we decided to pause all user traffic by redirecting users to our status page to give the database a break and completely reset all connection pools in one shot.
We installed the redirect and issued a restart of all nodes.
Once all appeared stable, we started letting traffic back in again.
Unfortunately, the issue persisted.</p><p>While looking at the database state, it became clear to our engineers that the root cause was in fact high contention on rows in the users table.
This contention caused a steep increase in write latency, which in turn put backpressure on our application’s connection pool, causing it to eventually exhaust all available connections as writes were taking too long to complete.
The writes were all stemming from one instance that would eventually starve the rest of our global instances of access to our primary, thus causing disruption in all other regions.</p><p>This didn’t exactly come as a surprise to us, as for the entirety of Kagi’s life so far we have actually used the cheapest, single-core database available to us on GCP!
To this day we’ve yet to exceed 50% load capacity on it, which we’ve worked hard to achieve.
This has always carried the risk of the database being relatively easy to knock over, but we have so far kept load and latency under control with redundancy, distributed read-replicas, and high scrutiny over the SQL we write.</p><p>We then took steps to identify the bad actors, where we found accounts created within 24hrs and over 60,000 searches performed in short time period from a single user facing account.
While we do offer unlimited searches to our users, such volume was a clear abuse of our platform, against our terms of use.
As such, we removed searching capability from the offending accounts.</p><p>At the same time, we issued a hotfix that disabled the particular writes that were causing high contention, in addition to some upgrades of our database driver, which included several relevant bug fixes to connection pool health.
This would help ensure that immediately the same pathological case could not be exploited again.</p><p>By midnight, the issue was fully resolved.
The team continued to closely monitor for any signals that the actors were returning, but they did not.</p><p>We were later in contact with an account that we blocked who claimed they were using their account to perform automated scraping of our results, which is not something our terms allow for.</p><h2 id="next-steps">Next Steps</h2><p>There’s a lot we took away from this incident, and we have immediate plans already in motion to make our system more robust to this type of abuse, as well as our communication processes around incidents.</p><p>First, regretfully we were not very prompt in updating our status page.
We owe it to our customers to be quick and transparent about any issues going on that might affect access to the product that they pay for.
To address this, we are moving to a status page platform to one that will more easily allow us expose some of our automated internal monitoring to users.
This way users have an idea of the platform’s health in real-time, even if our small team of engineers has their hands full to immediately post an update (which was not a very fast process to begin with, even if we were on top of it).
We should have this available by next week.</p><p>Secondly, we have directly mitigated the queries causing issues under load.
With this issue in mind, we are also running load tests to learn about any other similar deficiencies that may still exist, and what to avoid in the future.
We are also installing some additional monitoring to more quickly point us to the right place in our infra, and hopefully not waste as much time chasing a false-flag as we did this time.</p><p>Lastly, we are performing a re-upping of our systems set up to detect this kind of abuse of our terms, which were clearly too lax.
Besides any potential performance impact, this vector also directly costs us money as we pay for each search.
To protect our finances, and all of our subscribers continued access to unlimited (organic) searches, we need to set some automated limits to help us enforce this.
From analyzing our user’s usage, we have picked some limits that no good-faith user of Kagi should reasonably hit.</p><p>These new limits should already be in place by the time of this post, and we will monitor their impact and continue to tune them as needed.
If you believe you find yourself wrongly unable to access Kagi, please reach out to <a href="mailto:support@kagi.com">support@kagi.com</a>.</p><p>Thank you so much for bearing with us through this incident!
Please look forward to a more robust service as we implement these things, and as usual, more features &amp; improvements are on their way.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[6174 (477 pts)]]></title>
            <link>https://en.wikipedia.org/wiki/6174</link>
            <guid>39018769</guid>
            <pubDate>Tue, 16 Jan 2024 20:35:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://en.wikipedia.org/wiki/6174">https://en.wikipedia.org/wiki/6174</a>, See on <a href="https://news.ycombinator.com/item?id=39018769">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
							

						<p>From Wikipedia, the free encyclopedia</p>
					</div><div lang="en" dir="ltr" id="mw-content-text"><p>The number <b>6174</b> is known as <b>Kaprekar's constant</b><sup id="cite_ref-1"><a href="#cite_note-1">[1]</a></sup><sup id="cite_ref-Kaprekar1955_2-0"><a href="#cite_note-Kaprekar1955-2">[2]</a></sup><sup id="cite_ref-Kaprekar1980_3-0"><a href="#cite_note-Kaprekar1980-3">[3]</a></sup> after the <a href="https://en.wikipedia.org/wiki/India" title="India">Indian</a> <a href="https://en.wikipedia.org/wiki/Mathematician" title="Mathematician">mathematician</a> <a href="https://en.wikipedia.org/wiki/D._R._Kaprekar" title="D. R. Kaprekar">D. R. Kaprekar</a>. This number is renowned for the following rule:
</p>
<ol><li>Take any four-digit number, using at least two different digits (leading zeros are allowed).</li>
<li>Arrange the digits in descending and then in ascending order to get two four-digit numbers, adding leading zeros if necessary.</li>
<li>Subtract the smaller number from the bigger number.</li>
<li>Go back to step 2 and repeat.</li></ol>
<p>The above process, known as <a href="https://en.wikipedia.org/wiki/Kaprekar%27s_routine" title="Kaprekar's routine">Kaprekar's routine</a>, will always reach its <a href="https://en.wikipedia.org/wiki/Fixed_point_(mathematics)" title="Fixed point (mathematics)">fixed point</a>, 6174, in at most 7 iterations.<sup id="cite_ref-mathworld_4-0"><a href="#cite_note-mathworld-4">[4]</a></sup> Once 6174 is reached, the process will continue yielding 7641 – 1467 = 6174. For example, choose 1459:
</p>
<div>
<ul><li>9541 – 1459 = 8082</li>
<li>8820 – 0288 = 8532</li>
<li>8532 – 2358 = 6174</li>
<li>7641 – 1467 = <b>6174</b></li></ul>
</div><p>
The only four-digit numbers for which Kaprekar's routine does not reach 6174 are <a href="https://en.wikipedia.org/wiki/Repdigit" title="Repdigit">repdigits</a> such as 1111, which give the result <a href="https://en.wikipedia.org/wiki/0_(number)" title="0 (number)">0000</a> after a single iteration. All other four-digit numbers eventually reach 6174 if leading zeros are used to keep the number of digits at 4. For numbers with three identical numbers and a fourth number that is one number higher or lower (such as 2111), it is essential to treat 3-digit numbers with a leading zero; for example: 2111 – 1112 = 0999; 9990 – 999 = 8991; 9981 – 1899 = 8082; 8820 – 288 = 8532; 8532 – 2358 = 6174.<sup id="cite_ref-5"><a href="#cite_note-5">[5]</a></sup></p><table><tbody><tr><th colspan="2"><table><tbody><tr>
<td>← 6173</td>
<td>6174</td>
<td>6175 →</td>
</tr></tbody></table></th></tr><tr><td colspan="2"><div><ul><li><a href="https://en.wikipedia.org/wiki/List_of_numbers" title="List of numbers">List of numbers</a></li><li><a href="https://en.wikipedia.org/wiki/Integer" title="Integer">Integers</a></li></ul></div><div><p><a href="https://en.wikipedia.org/wiki/Negative_number" title="Negative number">←</a> <a href="https://en.wikipedia.org/wiki/0" title="0">0</a> <a href="https://en.wikipedia.org/wiki/1000_(number)" title="1000 (number)">1k</a> <a href="https://en.wikipedia.org/wiki/2000_(number)" title="2000 (number)">2k</a> <a href="https://en.wikipedia.org/wiki/3000_(number)" title="3000 (number)">3k</a> <a href="https://en.wikipedia.org/wiki/4000_(number)" title="4000 (number)">4k</a> <a href="https://en.wikipedia.org/wiki/5000_(number)" title="5000 (number)">5k</a> <a href="https://en.wikipedia.org/wiki/6000_(number)" title="6000 (number)">6k</a> <a href="https://en.wikipedia.org/wiki/7000_(number)" title="7000 (number)">7k</a> <a href="https://en.wikipedia.org/wiki/8000_(number)" title="8000 (number)">8k</a> <a href="https://en.wikipedia.org/wiki/9000_(number)" title="9000 (number)">9k</a> <a href="https://en.wikipedia.org/wiki/10000_(number)" title="10000 (number)">→</a></p></div></td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Cardinal_numeral" title="Cardinal numeral">Cardinal</a></th><td>six thousand one hundred seventy-four</td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Ordinal_numeral" title="Ordinal numeral">Ordinal</a></th><td>6174th<br>(six thousand one hundred seventy-fourth)</td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Factorization" title="Factorization">Factorization</a></th><td>2 × 3<sup>2</sup> × 7<sup>3</sup></td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Divisor" title="Divisor">Divisors</a></th><td>1, 2, 3, 6, 7, 9, 14, 18, 21, 42, 49, 63, 98, 126, 147, 294, 343, 441, 686, 882, 1029, 2058, 3087, 6174</td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Greek_numerals" title="Greek numerals">Greek numeral</a></th><td>,ϚΡΟΔ´</td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Roman_numerals" title="Roman numerals">Roman numeral</a></th><td><span>V</span>MCLXXIV, or <span>VI</span>CLXXIV</td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Binary_number" title="Binary number">Binary</a></th><td>1100000011110<sub>2</sub></td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Ternary_numeral_system" title="Ternary numeral system">Ternary</a></th><td>22110200<sub>3</sub></td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Senary" title="Senary">Senary</a></th><td>44330<sub>6</sub></td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Octal" title="Octal">Octal</a></th><td>14036<sub>8</sub></td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Duodecimal" title="Duodecimal">Duodecimal</a></th><td>36A6<sub>12</sub></td></tr><tr><th scope="row"><a href="https://en.wikipedia.org/wiki/Hexadecimal" title="Hexadecimal">Hexadecimal</a></th><td>181E<sub>16</sub></td></tr></tbody></table>
<meta property="mw:PageProp/toc">
<h2><span id="Other_.22Kaprekar.27s_constants.22"></span><span id="Other_&quot;Kaprekar's_constants&quot;">Other "Kaprekar's constants"</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=6174&amp;action=edit&amp;section=1" title="Edit section: Other &quot;Kaprekar's constants&quot;"><span>edit</span></a><span>]</span></span></h2>

<p>There can be analogous fixed points for digit lengths other than four; for instance, if we use 3-digit numbers, then most sequences (i.e., other than repdigits such as 111) will terminate in the value <a href="https://en.wikipedia.org/wiki/495_(number)" title="495 (number)">495</a> in at most 6 iterations. Sometimes these numbers (495, 6174, and their counterparts in other digit lengths or in bases other than 10) are called "Kaprekar constants".
</p>
<h2><span id="Other_properties">Other properties</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=6174&amp;action=edit&amp;section=2" title="Edit section: Other properties"><span>edit</span></a><span>]</span></span></h2>
<ul><li>6174 is a 7-<a href="https://en.wikipedia.org/wiki/Smooth_number" title="Smooth number">smooth number</a>, i.e. none of its prime factors are greater than 7.</li>
<li>6174 can be written as the sum of the first three powers of 18:
<ul><li>18<sup>3</sup> + 18<sup>2</sup> + 18<sup>1</sup> = 5832 + 324 + 18 = 6174, and coincidentally, 6 + 1 + 7 + 4 = 18.</li></ul></li>
<li>The sum of squares of the prime factors of 6174 is a square:
<ul><li>2<sup>2</sup> + 3<sup>2</sup> + 3<sup>2</sup> + 7<sup>2</sup> + 7<sup>2</sup> + 7<sup>2</sup> = 4 + 9 + 9 + 49 + 49 + 49 = 169 = 13<sup>2</sup></li></ul></li></ul>
<h2><span id="References">References</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=6174&amp;action=edit&amp;section=3" title="Edit section: References"><span>edit</span></a><span>]</span></span></h2>
<div><ol>
<li id="cite_note-1"><span><b><a href="#cite_ref-1">^</a></b></span> <span><cite id="CITEREFNishiyama2006"><a href="https://en.wikipedia.org/wiki/Yutaka_Nishiyama" title="Yutaka Nishiyama">Nishiyama, Yutaka</a> (March 2006). <a rel="nofollow" href="http://plus.maths.org/issue38/features/nishiyama/index.html">"Mysterious number 6174"</a>. <i><a href="https://en.wikipedia.org/wiki/Plus_Magazine" title="Plus Magazine">Plus Magazine</a></i>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Plus+Magazine&amp;rft.atitle=Mysterious+number+6174&amp;rft.date=2006-03&amp;rft.aulast=Nishiyama&amp;rft.aufirst=Yutaka&amp;rft_id=http%3A%2F%2Fplus.maths.org%2Fissue38%2Ffeatures%2Fnishiyama%2Findex.html&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3A6174"></span></span>
</li>
<li id="cite_note-Kaprekar1955-2"><span><b><a href="#cite_ref-Kaprekar1955_2-0">^</a></b></span> <span><cite id="CITEREFKaprekar_DR1955">Kaprekar DR (1955). "An Interesting Property of the Number 6174". <i><a href="https://en.wikipedia.org/wiki/Scripta_Mathematica" title="Scripta Mathematica">Scripta Mathematica</a></i>. <b>15</b>: 244–245.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Scripta+Mathematica&amp;rft.atitle=An+Interesting+Property+of+the+Number+6174&amp;rft.volume=15&amp;rft.pages=244-245&amp;rft.date=1955&amp;rft.au=Kaprekar+DR&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3A6174"></span></span>
</li>
<li id="cite_note-Kaprekar1980-3"><span><b><a href="#cite_ref-Kaprekar1980_3-0">^</a></b></span> <span><cite id="CITEREFKaprekar_DR1980">Kaprekar DR (1980). "On Kaprekar Numbers". <i>Journal of Recreational Mathematics</i>. <b>13</b> (2): 81–82.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Journal+of+Recreational+Mathematics&amp;rft.atitle=On+Kaprekar+Numbers&amp;rft.volume=13&amp;rft.issue=2&amp;rft.pages=81-82&amp;rft.date=1980&amp;rft.au=Kaprekar+DR&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3A6174"></span></span>
</li>
<li id="cite_note-mathworld-4"><span><b><a href="#cite_ref-mathworld_4-0">^</a></b></span> <span><a href="https://en.wikipedia.org/wiki/Kaprekar%27s_routine#CITEREFHanover2017" title="Kaprekar's routine">Hanover 2017</a>, p. 1, Overview.</span>
</li>
<li id="cite_note-5"><span><b><a href="#cite_ref-5">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.cut-the-knot.org/Curriculum/Arithmetic/Kaprekar.shtml">"Kaprekar's Iterations and Numbers"</a>. <i>www.cut-the-knot.org</i><span>. Retrieved <span>2022-09-21</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=www.cut-the-knot.org&amp;rft.atitle=Kaprekar%27s+Iterations+and+Numbers&amp;rft_id=https%3A%2F%2Fwww.cut-the-knot.org%2FCurriculum%2FArithmetic%2FKaprekar.shtml&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3A6174"></span></span>
</li>
</ol></div>
<h2><span id="External_links">External links</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=6174&amp;action=edit&amp;section=4" title="Edit section: External links"><span>edit</span></a><span>]</span></span></h2>

<ul><li><cite id="CITEREFBowley">Bowley, Roger. <a rel="nofollow" href="https://www.youtube.com/watch?v=d8TRcZklX_Q">"6174 is Kaprekar's Constant"</a>. <i>Numberphile</i>. <a href="https://en.wikipedia.org/wiki/University_of_Nottingham" title="University of Nottingham">University of Nottingham</a>: <a href="https://en.wikipedia.org/wiki/Brady_Haran" title="Brady Haran">Brady Haran</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Numberphile&amp;rft.atitle=6174+is+Kaprekar%27s+Constant&amp;rft.aulast=Bowley&amp;rft.aufirst=Roger&amp;rft_id=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Dd8TRcZklX_Q&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3A6174"></span></li>
<li><a rel="nofollow" href="http://www.panix.com/~baldwin/kaprekar.pl">Sample (Perl) code to walk any four-digit number to Kaprekar's Constant</a></li>
<li><a rel="nofollow" href="http://www.panix.com/~baldwin/kaprekar.py">Sample (Python) code to walk any four-digit number to Kaprekar's Constant</a></li>
<li><a rel="nofollow" href="https://gist.github.com/dakonr/10865d113dd2ca6a7dd3d3fcdb169c13#file-kaprekar_constant-c">Sample (C) code to walk the first 10000 numbers and their steps to Kaprekar's Constant</a></li></ul>
<!-- 
NewPP limit report
Parsed by mw1364
Cached time: 20240108183432
Cache expiry: 2592000
Reduced expiry: false
Complications: [vary‐revision‐sha1, show‐toc]
CPU time usage: 0.261 seconds
Real time usage: 0.360 seconds
Preprocessor visited node count: 1434/1000000
Post‐expand include size: 26512/2097152 bytes
Template argument size: 1448/2097152 bytes
Highest expansion depth: 14/100
Expensive parser function count: 3/500
Unstrip recursion depth: 1/20
Unstrip post‐expand size: 18080/5000000 bytes
Lua time usage: 0.156/10.000 seconds
Lua memory usage: 4900527/52428800 bytes
Number of Wikibase entities loaded: 0/400
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  334.287      1 -total
 47.53%  158.872      1 Template:Infobox_number
 30.39%  101.591      1 Template:Infobox_number/box
 29.60%   98.944      1 Template:Infobox
 28.58%   95.525      1 Template:Reflist
 22.44%   75.016      3 Template:Cite_web
 16.07%   53.705      1 Template:Short_description
 14.14%   47.272      1 Template:Commons_category
 13.68%   45.723      1 Template:Infobox_number/range
 13.49%   45.097      1 Template:Sister_project
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:52724119-0!canonical and timestamp 20240108183431 and revision id 1186034556. Rendering was triggered because: page-view
 -->
</div></div>]]></description>
        </item>
    </channel>
</rss>