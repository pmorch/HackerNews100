<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sun, 24 Nov 2024 23:30:05 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[This website is hosted on Bluesky (231 pts)]]></title>
            <link>https://danielmangum.com/posts/this-website-is-hosted-on-bluesky/</link>
            <guid>42230392</guid>
            <pubDate>Sun, 24 Nov 2024 20:43:33 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://danielmangum.com/posts/this-website-is-hosted-on-bluesky/">https://danielmangum.com/posts/this-website-is-hosted-on-bluesky/</a>, See on <a href="https://news.ycombinator.com/item?id=42230392">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        
        <p>Well, not this one. But <a href="https://porcini.us-east.host.bsky.network/xrpc/com.atproto.sync.getBlob?did=did:plc:j22nebhg6aek3kt2mex5ng7e&amp;cid=bafkreic5fmelmhqoqxfjz2siw5ey43ixwlzg5gvv2pkkz7o25ikepv4zeq">this
one</a>
is! How? Let’s take a closer look at <a href="https://bsky.app/">Bluesky</a> and the <a href="https://atproto.com/">AT
Protocol</a> that underpins it.</p>
<blockquote>
<p>Note: I communicated with the Bluesky team prior to the publishing of this
post. While the functionality described is not the intended use of the
application, it is known behavior and does not constitue a vulnerability
disclosure process. My main motivation for reaching out to them was because I
like the folks and don’t want to make their lives harder.</p>
</blockquote>



<p><img src="https://danielmangum.com/static/website_on_bsky_0.png" alt="website-on-bsky-0">
</p>
<p>Being able to host a website on Bluesky really has very little to do with
Bluesky itself. I happen to use Bluesky for hosting my <a href="https://atproto.com/guides/glossary#pds-personal-data-server">Personal Data Server
(PDS)</a>, but all of
the APIs leveraged in uploading the site contents are defined at the AT Protocol
level and implemented by a PDS. Bluesky offers access to my PDS via their <a href="https://docs.bsky.app/docs/advanced-guides/entryway">PDS
entryway</a>, which allows for
the many (have you heard that they are <a href="https://thehill.com/policy/technology/4999675-bluesky-ceo-1m-people-a-day-joining-in-past-week/">growing by a million users per
day</a>?)
PDS instances they run to be exposed via the <code>bsky.social</code> domain. That being
said, individual PDS instances can be accessed directly, and if you clicked the
link at the top of this post to access the Bluesky hosted website, then you have
already visited mine at <code>porcini.us-east.host.bsky.network</code>.</p>
<p>Most social applications, and many applications in general for that matter,
broadly have two primary types of content:
<a href="https://atproto.com/guides/glossary#record">records</a> and
<a href="https://atproto.com/guides/glossary#blob">blobs</a>. Records are the core entity
types that users create. They generally have some defined structure and
metadata, and they may reference other records or content. Blobs are typically
larger unstructured data, such as media assets, that may be uploaded by a user,
but are exposed via a record referencing them. For example, on Bluesky a user
may upload an image, then create a post that references it. From an end-user
perspective, these two operations appear to be one action, but they are
typically decoupled at the API level.</p>
<p>This decoupling is described in detail in the AT Protocol <a href="https://atproto.com/specs/blob">blob
specification</a>.</p>
<blockquote>
<p>Blob files are uploaded and distributed separately from records. Blobs are
authoritatively stored by the account’s PDS instance, but views are commonly
served by CDNs associated with individual applications (“AppViews”), to reduce
traffic on the PDS. CDNs may serve transformed (resized, transcoded, etc)
versions of the original blob.</p>
</blockquote>
<p>Later on, the specification details how blob lifecylce is to be managed.</p>
<blockquote>
<p>Blobs must be uploaded to the PDS before a record can be created referencing
that blob. Note that the server does not know the intended Lexicon when
receiving an upload, so can only apply generic blob limits and restrictions at
initial upload time, and then enforce Lexicon-defined limits later when the
record is created.</p>
</blockquote>
<p>Reading this section is what initially got my wheels turning. While Bluesky has
a limited set of media asset types that can be referenced by posts, posts are
just one record type that is defined by the Bluesky
<a href="https://atproto.com/specs/lexicon">lexicon</a> (<code>app.bsky.*</code>). Records, on the
other hand, are defined in the AT Protocol lexicon (<code>com.atproto.*</code>) and are
designed to accommodate creating any <em>type</em> of record defined by any lexicon.
Because different types of blobs may be relevant for other lexicons, the
specification highlights that restrictions cannot be enforced at time of upload.</p>
<p>Instead blobs are not made available until they are referenced, at which point
the validation can be performed based on the lexicon of the record type.</p>
<blockquote>
<p>After a successful upload, blobs are placed in temporary storage. They are not
accessible for download or distribution while in this state. Servers should
“garbage collect” (delete) un-referenced temporary blobs after an appropriate
time span (see implementation guidelines below). Blobs which are in temporary
storage should not be included in the <code>listBlobs</code> output.</p>
</blockquote>
<blockquote>
<p>The upload blob can now be referenced from records by including the returned
blob metadata in a record. When processing record creation, the server
extracts the set of all referenced blobs, and checks that they are either
already referenced, or are in temporary storage. Once the record creation
succeeds, the server makes the blob publicly accessible.</p>
</blockquote>
<p>However, applying validation does not mean that Bluesky’s restrictions will
necessarily be applied. A record that references a blob could very well be of a
type defined by a different lexicon, or, as we’ll see later on, part of a
<a href="https://docs.bsky.app/docs/advanced-guides/custom-schemas#sub-schemas">sub-schema</a>
enabled by an open union in the Bluesky lexicon. Let’s see how this works in
practice.</p>
<p>In order to perform data creation operations against a PDS, an access token must
be acquired for authentication. The
<a href="https://docs.bsky.app/docs/api/com-atproto-server-create-session"><code>com.atproto.server.createSession</code></a>
<a href="https://atproto.com/guides/glossary#xrpc">XRPC</a> method can be used to exchange
user credentials for a token. In the following <code>curl</code> command, I used
<code>danielmangum.com</code> as <code>$BSKY_HANDLE</code> and my password as <code>$BSKY_PWD</code>.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -X POST 'https://bsky.social/xrpc/com.atproto.server.createSession' \
</span></span><span><span>-H 'Content-Type: application/json' \
</span></span><span><span>-d '{"identifier": "'"$BSKY_HANDLE"'", "password": "'"$BSKY_PWD"'"}'
</span></span></code></pre></div><p>The response includes an <code>accessJWT</code> field, which will be used as <code>$ACCESS_JWT</code>
in subsequent operations. As described in the blob specification, a blob must be
uploaded prior to it being referenced. I wanted to verify that the blob was not
present in the
<a href="https://docs.bsky.app/docs/api/com-atproto-sync-list-blobs"><code>com.atproto.sync.listBlobs</code></a>
output, or accessible via the
<a href="https://docs.bsky.app/docs/api/com-atproto-sync-get-blob"><code>com.atproto.sync.getBlob</code></a>
methods immediately after upload, so I checked how many blobs were currently
being returned.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -s 'https://bsky.social/xrpc/com.atproto.sync.listBlobs?did='"$DID"'' \
</span></span><span><span>-H 'Authorization: Bearer '"$ACCESS_JWT"'' | jq -r '.cids | length'
</span></span></code></pre></div><p>The <a href="https://atproto.com/specs/did">decentralized identifier (<code>$DID</code>)</a> used
above can be obtained from the <code>createSession</code> output as well. It is the
underlying identifier for an account. Every Bluesky handle <a href="https://bsky.social/about/blog/4-28-2023-domain-handle-tutorial">resolves to a
DID</a>.</p>
<p>The
<a href="https://docs.bsky.app/docs/api/com-atproto-repo-upload-blob"><code>com.atproto.repo.uploadBlob</code></a>
method is used to upload a blob to a repository. The content of the website is a
simple <code>index.html</code> file.</p>
<div><pre tabindex="0"><code data-lang="html"><span><span>&lt;<span>h1</span>&gt;This Website is Hosted on Bluesky&lt;/<span>h1</span>&gt;
</span></span><span><span>
</span></span><span><span>&lt;<span>p</span>&gt;
</span></span><span><span>This website is just a blob uploaded to Bluesky via the API. Curious about how
</span></span><span><span>this works? Check out the write-up on &lt;<span>a</span>
</span></span><span><span><span>href</span>=<span>"https://danielmangum.com/posts/this-website-is-hosted-on-bluesky/"</span>&gt;danielmangum.com&lt;/<span>a</span>&gt;.
</span></span><span><span>&lt;/<span>p</span>&gt;
</span></span></code></pre></div><p>To upload it, I used the following command.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -X POST 'https://bsky.social/xrpc/com.atproto.repo.uploadBlob' \
</span></span><span><span>-H 'Authorization: Bearer '"$ACCESS_JWT"'' \
</span></span><span><span>-H 'Content-Type: text/html' \
</span></span><span><span>--data-binary '@index.html'
</span></span></code></pre></div><div><pre tabindex="0"><code data-lang="json"><span><span>{
</span></span><span><span>  <span>"blob"</span>: {
</span></span><span><span>    <span>"$type"</span>: <span>"blob"</span>,
</span></span><span><span>    <span>"ref"</span>: {
</span></span><span><span>      <span>"$link"</span>: <span>"bafkreic5fmelmhqoqxfjz2siw5ey43ixwlzg5gvv2pkkz7o25ikepv4zeq"</span>
</span></span><span><span>    },
</span></span><span><span>    <span>"mimeType"</span>: <span>"text/html"</span>,
</span></span><span><span>    <span>"size"</span>: <span>268</span>
</span></span><span><span>  }
</span></span><span><span>}
</span></span></code></pre></div><p>The returned <code>$link</code> can be used as the <a href="https://atproto.com/guides/glossary#cid-content-id">Content Identifier
(<code>cid</code>)</a> when fetching the
blob via the <code>getBlob</code> method. However, according to the specification, because
this blob has to be referenced, it shouldn’t be visible. I checked to see if I
could access it with the following command.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -L 'https://bsky.social/xrpc/com.atproto.sync.getBlob?did='"$DID"'&amp;cid='"$LINK"'' 
</span></span></code></pre></div><div><pre tabindex="0"><code data-lang="json"><span><span>{
</span></span><span><span>  <span>"error"</span>: <span>"InternalServerError"</span>,
</span></span><span><span>  <span>"message"</span>: <span>"Internal Server Error"</span>
</span></span><span><span>}
</span></span></code></pre></div><p>Not the error I was expecting, but it looks like I indeed cannot access it. I
was also able to determine that it had not beed added to the <code>listBlobs</code> output.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -s 'https://bsky.social/xrpc/com.atproto.sync.listBlobs?did='"$DID"'' \
</span></span><span><span>-H 'Authorization: Bearer '"$ACCESS_JWT"'' | jq -r '.cids | length'
</span></span></code></pre></div><p>Blobs can be referenced in <a href="https://github.com/bluesky-social/atproto/blob/b5c6bce9703faa7a8eb7f629d34f173116cb37b8/lexicons/app/bsky/feed/post.json"><code>app.bsky.feed.post</code>
records</a>
on Bluesky by including an <a href="https://docs.bsky.app/docs/advanced-guides/posts#images-embeds">embedded
image</a>. However,
the <a href="https://github.com/bluesky-social/atproto/blob/b5c6bce9703faa7a8eb7f629d34f173116cb37b8/lexicons/app/bsky/embed/images.json#L23"><code>app.bsky.embed.image</code>
schema</a>
retricts the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/MIME_types">MIME
type</a> to those
prefixed with <code>image/*</code>. We can see this validation in action if we try to
create a post with an embedded image.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -X POST 'https://bsky.social/xrpc/com.atproto.repo.createRecord' \
</span></span><span><span>-H 'Authorization: Bearer '"$ACCESS_JWT"'' \
</span></span><span><span>-H 'Content-Type: application/json' \
</span></span><span><span>-d '{
</span></span><span><span>  "repo": "danielmangum.com",
</span></span><span><span>  "collection": "app.bsky.feed.post",
</span></span><span><span>  "record": {
</span></span><span><span>    "$type": "app.bsky.feed.post",
</span></span><span><span>    "text": "testing123",
</span></span><span><span>    "createdAt": "2024-11-23T05:49:35.422015Z",
</span></span><span><span>    "embed": {
</span></span><span><span>      "$type": "app.bsky.embed.images",
</span></span><span><span>      "images": [
</span></span><span><span>        {
</span></span><span><span>          "alt": "that is not an image that is a website!",
</span></span><span><span>          "image": {
</span></span><span><span>            "$type": "blob",
</span></span><span><span>            "ref": {
</span></span><span><span>              "$link": "bafkreidphtuvbzublyzacxukmmk2ikiur5ahme75fegokbhh26o4wfzvry"
</span></span><span><span>            },
</span></span><span><span>            "mimeType": "text/html",
</span></span><span><span>            "size": 21
</span></span><span><span>          }
</span></span><span><span>        }
</span></span><span><span>      ]
</span></span><span><span>    }
</span></span><span><span>  }
</span></span><span><span>}'
</span></span></code></pre></div><div><pre tabindex="0"><code data-lang="json"><span><span>{
</span></span><span><span>  <span>"error"</span>: <span>"InvalidMimeType"</span>,
</span></span><span><span>  <span>"message"</span>: <span>"Wrong type of file. It is text/html but it must match image/*."</span>
</span></span><span><span>}
</span></span></code></pre></div><p>For completeness, I also tried specifying the <code>mimeType</code> as <code>image/jpeg</code> and
verified that the PDS also validates that the blob reference MIME type matches
the blob.</p>
<div><pre tabindex="0"><code data-lang="json"><span><span>{
</span></span><span><span>  <span>"error"</span>: <span>"InvalidMimeType"</span>,
</span></span><span><span>  <span>"message"</span>: <span>"Referenced Mimetype does not match stored blob. Expected: text/html, Got: image/jpeg"</span>
</span></span><span><span>}
</span></span></code></pre></div><p>However, the <a href="https://atproto.com/specs/data-model#blob-type"><code>blob</code> <code>$type</code> is part of the AT Protocol data
model</a> and not specific to
Bluesky. Because Bluesky’s PDS implementation is open source, we can see exactly
how a <a href="https://github.com/bluesky-social/atproto/blob/b5c6bce9703faa7a8eb7f629d34f173116cb37b8/packages/lexicon/src/blob-refs.ts#L26"><code>BlobRef</code> is
defined</a>.</p>
<div><pre tabindex="0"><code data-lang="ts"><span><span><span>export</span> <span>class</span> BlobRef {
</span></span><span><span>  <span>public</span> original: <span>JsonBlobRef</span>
</span></span><span><span>
</span></span><span><span>  <span>constructor</span>(
</span></span><span><span>    <span>public</span> ref: <span>CID</span>,
</span></span><span><span>    <span>public</span> mimeType: <span>string</span>,
</span></span><span><span>    <span>public</span> size: <span>number</span>,
</span></span><span><span>    original?: <span>JsonBlobRef</span>,
</span></span><span><span>  ) {
</span></span><span><span>    <span>this</span>.original = original ?? {
</span></span><span><span>      $type: <span>'blob'</span>,
</span></span><span><span>      ref,
</span></span><span><span>      mimeType,
</span></span><span><span>      size,
</span></span><span><span>    }
</span></span><span><span>  }
</span></span></code></pre></div><p>We can also see exactly how the PDS <a href="https://github.com/bluesky-social/atproto/blob/b5c6bce9703faa7a8eb7f629d34f173116cb37b8/packages/pds/src/repo/prepare.ts#L282">identifies blobs in a
record</a>.</p>
<div><pre tabindex="0"><code data-lang="ts"><span><span><span>export</span> <span>const</span> findBlobRefs = (
</span></span><span><span>  val: <span>LexValue</span>,
</span></span><span><span>  path: <span>string</span>[] = [],
</span></span><span><span>  layer = <span>0</span>,
</span></span><span><span>): FoundBlobRef[] =&gt; {
</span></span><span><span>  <span>if</span> (layer &gt; <span>32</span>) {
</span></span><span><span>    <span>return</span> []
</span></span><span><span>  }
</span></span><span><span>  <span>// walk arrays
</span></span></span><span><span><span></span>  <span>if</span> (<span>Array</span>.isArray(val)) {
</span></span><span><span>    <span>return</span> val.flatMap((item) =&gt; findBlobRefs(item, path, layer + <span>1</span>))
</span></span><span><span>  }
</span></span><span><span>  <span>// objects
</span></span></span><span><span><span></span>  <span>if</span> (val &amp;&amp; <span>typeof</span> val === <span>'object'</span>) {
</span></span><span><span>    <span>// convert blobs, leaving the original encoding so that we don't change CIDs on re-encode
</span></span></span><span><span><span></span>    <span>if</span> (val <span>instanceof</span> BlobRef) {
</span></span><span><span>      <span>return</span> [
</span></span><span><span>        {
</span></span><span><span>          ref: <span>val</span>,
</span></span><span><span>          path,
</span></span><span><span>        },
</span></span><span><span>      ]
</span></span><span><span>    }
</span></span><span><span>    <span>// retain cids &amp; bytes
</span></span></span><span><span><span></span>    <span>if</span> (CID.asCID(val) || val <span>instanceof</span> Uint8Array) {
</span></span><span><span>      <span>return</span> []
</span></span><span><span>    }
</span></span><span><span>    <span>return</span> <span>Object</span>.entries(val).flatMap(([key, item]) =&gt;
</span></span><span><span>      findBlobRefs(item, [...path, key], layer + <span>1</span>),
</span></span><span><span>    )
</span></span><span><span>  }
</span></span><span><span>  <span>// pass through
</span></span></span><span><span><span></span>  <span>return</span> []
</span></span><span><span>}
</span></span></code></pre></div><p>The important thing to notice is that identifying blob references does require
the presence of a lexicon schema. <code>findBlobRefs</code> recursively navigates a
<code>LexValue</code> and looks for <code>$type: blob</code>. In order to support new lexicons over
time, the PDS needs to be able to handle lexicons that it doesn’t know about.
Because blobs are a fundamental component of so many applications, these new
lexicons also need to be able to leverage them. To put this into action, I
attempted to create a record of type <code>com.danielmangum.hack.website</code>, which
included a reference to the uploaded HTML blob.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -X POST 'https://bsky.social/xrpc/com.atproto.repo.createRecord' \
</span></span><span><span>-H 'Authorization: Bearer '"$ACCESS_JWT"'' \
</span></span><span><span>-H 'Content-Type: application/json' \
</span></span><span><span>-d '{
</span></span><span><span>  "repo": "danielmangum.com",
</span></span><span><span>  "collection": "com.danielmangum.hack.website",
</span></span><span><span>  "record": {
</span></span><span><span>    "$type": "com.danielmangum.hack.website",
</span></span><span><span>    "website": {
</span></span><span><span>      "$type": "blob",
</span></span><span><span>      "ref": {
</span></span><span><span>        "$link": "bafkreic5fmelmhqoqxfjz2siw5ey43ixwlzg5gvv2pkkz7o25ikepv4zeq"
</span></span><span><span>      },
</span></span><span><span>      "mimeType": "text/html",
</span></span><span><span>      "size": 268
</span></span><span><span>    }
</span></span><span><span>  }
</span></span><span><span>}'
</span></span></code></pre></div><div><pre tabindex="0"><code data-lang="json"><span><span>{
</span></span><span><span>  <span>"uri"</span>: <span>"at://did:plc:j22nebhg6aek3kt2mex5ng7e/com.danielmangum.hack.website/3lbnguuzckm2u"</span>,
</span></span><span><span>  <span>"cid"</span>: <span>"bafyreicjcptshc7lmgb7abxlvcb5fmqqjdj6neie23szyum7rcaowmm5qm"</span>,
</span></span><span><span>  <span>"commit"</span>: {
</span></span><span><span>    <span>"cid"</span>: <span>"bafyreid6apjjy56xoyenxmg5xv356twh22n3hayecoxlf6mflpltlzpuwu"</span>,
</span></span><span><span>    <span>"rev"</span>: <span>"3lbnguuzmd42u"</span>
</span></span><span><span>  },
</span></span><span><span>  <span>"validationStatus"</span>: <span>"unknown"</span>
</span></span><span><span>}
</span></span></code></pre></div><p>It worked! We can see in the response that the PDS was unable to validate the
record (<code>validationStatus: unknown</code>) because it does not know about the
<code>com.danielmangum.hack.*</code> lexicon. Nevertheless, it will agree to persist the
record. The next step was to check whether the referenced blob had been
persisted.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -s 'https://bsky.social/xrpc/com.atproto.sync.listBlobs?did='"$DID"'' \
</span></span><span><span>-H 'Authorization: Bearer '"$ACCESS_JWT"'' | jq -r '.cids | length'
</span></span></code></pre></div><p>It looked like it had as the count had increased by 1. Fetching the blob
directly would tell us for sure. Importantly, <code>getBlob</code> <em>does not require
passing the <code>$ACCESS_JWT</code></em> because unauthenticated parties need to be able to
fetch blobs to process alongside records that reference them.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl 'https://bsky.social/xrpc/com.atproto.sync.getBlob?did='"$DID"'&amp;cid=bafkreic5fmelmhqoqxfjz2siw5ey43ixwlzg5gvv2pkkz7o25ikepv4zeq'
</span></span></code></pre></div><div><pre tabindex="0"><code data-lang="fallback"><span><span>{
</span></span><span><span>  "error": "Redirecting",
</span></span><span><span>  "message": "Redirecting to new blob location"
</span></span><span><span>}
</span></span></code></pre></div><p>Adding <code>-L</code> to the command enables following redirects.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -L 'https://bsky.social/xrpc/com.atproto.sync.getBlob?did='"$DID"'&amp;cid=bafkreic5fmelmhqoqxfjz2siw5ey43ixwlzg5gvv2pkkz7o25ikepv4zeq'
</span></span></code></pre></div><div><pre tabindex="0"><code data-lang="html"><span><span>&lt;<span>h1</span>&gt;This Website is Hosted on Bluesky&lt;/<span>h1</span>&gt;
</span></span><span><span>
</span></span><span><span>&lt;<span>p</span>&gt;
</span></span><span><span>This website is just a blob uploaded to Bluesky via the API. Curious about how
</span></span><span><span>this works? Check out the write-up on &lt;<span>a</span>
</span></span><span><span><span>href</span>=<span>"https://danielmangum.com/posts/this-website-is-hosted-on-bluesky/"</span>&gt;danielmangum.com&lt;/<span>a</span>&gt;.
</span></span><span><span>&lt;/<span>p</span>&gt;
</span></span></code></pre></div><p>Examining the redirect response, we can see that we are being directed directly
to my PDS.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>&lt; HTTP/2 302 
</span></span><span><span>&lt; date: Sun, 24 Nov 2024 13:58:21 GMT
</span></span><span><span>&lt; content-type: application/json; charset=utf-8
</span></span><span><span>&lt; content-length: 68
</span></span><span><span>&lt; location: https://porcini.us-east.host.bsky.network/xrpc/com.atproto.sync.getBlob?did=did:plc:j22nebhg6aek3kt2mex5ng7e&amp;cid=bafkreic5fmelmhqoqxfjz2siw5ey43ixwlzg5gvv2pkkz7o25ikepv4zeq
</span></span><span><span>&lt; x-powered-by: Express
</span></span><span><span>&lt; access-control-allow-origin: *
</span></span><span><span>&lt; ratelimit-limit: 3000
</span></span><span><span>&lt; ratelimit-remaining: 2997
</span></span><span><span>&lt; ratelimit-reset: 1732456898
</span></span><span><span>&lt; ratelimit-policy: 3000;w=300
</span></span><span><span>&lt; etag: W/"44-1je7JKzDJZFd5iRtOI+IS+zlOOE"
</span></span><span><span>&lt; vary: Accept-Encoding
</span></span></code></pre></div><p>Opening the <a href="https://porcini.us-east.host.bsky.network/xrpc/com.atproto.sync.getBlob?did=did:plc:j22nebhg6aek3kt2mex5ng7e&amp;cid=bafkreic5fmelmhqoqxfjz2siw5ey43ixwlzg5gvv2pkkz7o25ikepv4zeq"><code>location</code>
URL</a>
in the browser presents the website as expected, And just like that, we have a
website hosted on Bluesky! While this is not <em>really</em> the intended use of blobs
on Bluesky specifically, it <em>could</em> be a legitimate use case in the future.
Records that reference website content, code, or other binary artifacts are a
possibility on the AT Protocol. That being said, if a service like Bluesky is
running PDS instances on behalf of users, this <strong>effectively equates to free
(albiet unreliable) arbiratry file hosting</strong>, which has implications beyond just
racking up large storage and egress data fees. Returning back to the blobs
specification, there is an additional section on <a href="https://atproto.com/specs/blob#security-considerations">Security
Considerations</a>.</p>
<blockquote>
<p>Serving arbitrary user-uploaded files from a web server raises many content
security issues. For example, cross-site scripting (XSS) of scripts or SVG
content form the same “origin” as other web pages. It is effectively mandatory
to enable a Content Security Policy (LINK:
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP</a>) for the <code>getBlob</code>
endpoint. It is effectively not supported to dynamically serve assets directly
out of blob storage (the <code>getBlob</code> endpoint) directly to browsers and web
applications. Applications must proxy blobs, files, and assets through an
independent CDN, proxy, or other web service before serving to browsers and
web agents, and such services are expected to implement security precautions.</p>
</blockquote>
<p>Bluesky does <a href="https://github.com/bluesky-social/atproto/blob/b5c6bce9703faa7a8eb7f629d34f173116cb37b8/packages/pds/src/api/com/atproto/sync/getBlob.ts#L8">apply recommended CSP headers to the endpoint in the
handler</a>,
which guards against some of the issues described.</p>
<div><pre tabindex="0"><code data-lang="ts"><span><span>      res.setHeader(<span>'x-content-type-options'</span>, <span>'nosniff'</span>)
</span></span><span><span>      res.setHeader(<span>'content-security-policy'</span>, <span>`default-src 'none'; sandbox`</span>)
</span></span></code></pre></div><p>There is also a <a href="https://github.com/bluesky-social/atproto/blob/b5c6bce9703faa7a8eb7f629d34f173116cb37b8/packages/pds/src/config/config.ts#L28">default size limit on blob of 5
MB</a>.</p>
<div><pre tabindex="0"><code data-lang="ts"><span><span>    blobUploadLimit: <span>env.blobUploadLimit</span> ?? <span>5</span> * <span>1024</span> * <span>1024</span>, <span>// 5mb
</span></span></span></code></pre></div><p>Images, the most common blob type on the Bluesky application, are expectedly not
served directly from PDS instances, but from the Bluesky CDN. For example, the
following URL points to the feed thumbnail version of an image I recently
uploaded as part of a post.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>https://cdn.bsky.app/img/feed_thumbnail/plain/did:plc:j22nebhg6aek3kt2mex5ng7e/bafkreie5ci75iujpv34slnh3o4b7xcuxklpcguzed6qqmi4eaagn6cg4ve@jpeg
</span></span></code></pre></div><p>A different URL provides the full size version.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>https://cdn.bsky.app/img/feed_fullsize/plain/did:plc:j22nebhg6aek3kt2mex5ng7e/bafkreie5ci75iujpv34slnh3o4b7xcuxklpcguzed6qqmi4eaagn6cg4ve@jpeg
</span></span></code></pre></div><p>However, the post that references the image just includes the <code>cid</code>. The
application itself needs to be aware of how images are served from the CDN.</p>
<div><pre tabindex="0"><code data-lang="json"><span><span>{
</span></span><span><span>  <span>"$type"</span>: <span>"app.bsky.feed.post"</span>,
</span></span><span><span>  <span>"createdAt"</span>: <span>"2024-11-12T14:18:44.263Z"</span>,
</span></span><span><span>  <span>"embed"</span>: {
</span></span><span><span>    <span>"$type"</span>: <span>"app.bsky.embed.images"</span>,
</span></span><span><span>    <span>"images"</span>: [
</span></span><span><span>      {
</span></span><span><span>        <span>"alt"</span>: <span>"Title image for blog post \"USB On-The-Go on the ESP32-S3\" on danielmangum.com."</span>,
</span></span><span><span>        <span>"aspectRatio"</span>: {
</span></span><span><span>          <span>"height"</span>: <span>1080</span>,
</span></span><span><span>          <span>"width"</span>: <span>1920</span>
</span></span><span><span>        },
</span></span><span><span>        <span>"image"</span>: {
</span></span><span><span>          <span>"$type"</span>: <span>"blob"</span>,
</span></span><span><span>          <span>"ref"</span>: {
</span></span><span><span>            <span>"$link"</span>: <span>"bafkreie5ci75iujpv34slnh3o4b7xcuxklpcguzed6qqmi4eaagn6cg4ve"</span>
</span></span><span><span>          },
</span></span><span><span>          <span>"mimeType"</span>: <span>"image/jpeg"</span>,
</span></span><span><span>          <span>"size"</span>: <span>869901</span>
</span></span><span><span>        }
</span></span><span><span>      }
</span></span><span><span>    ]
</span></span><span><span>  },
</span></span><span><span>  <span>"facets"</span>: [
</span></span><span><span>    {
</span></span><span><span>      <span>"features"</span>: [
</span></span><span><span>        {
</span></span><span><span>          <span>"$type"</span>: <span>"app.bsky.richtext.facet#link"</span>,
</span></span><span><span>          <span>"uri"</span>: <span>"https://danielmangum.com/posts/usb-otg-esp32s3/"</span>
</span></span><span><span>        }
</span></span><span><span>      ],
</span></span><span><span>      <span>"index"</span>: {
</span></span><span><span>        <span>"byteEnd"</span>: <span>261</span>,
</span></span><span><span>        <span>"byteStart"</span>: <span>229</span>
</span></span><span><span>      }
</span></span><span><span>    }
</span></span><span><span>  ],
</span></span><span><span>  <span>"langs"</span>: [
</span></span><span><span>    <span>"en"</span>
</span></span><span><span>  ],
</span></span><span><span>  <span>"text"</span>: <span>"ICYMI: This weekend I wrote about USB On-The-Go on the ESP32-S3. OTG allows devices to also act as USB hosts. I dive into how the USB PHY is configured, and demonstrate connecting two ESP32-S3's, as well as a Raspberry Pi Pico.\n\ndanielmangum.com/posts/usb-ot..."</span>
</span></span><span><span>}
</span></span></code></pre></div><p>The logic is present in <a href="https://github.com/bluesky-social/atproto/blob/b5c6bce9703faa7a8eb7f629d34f173116cb37b8/packages/bsky/src/image/uri.ts#L12">the
<code>ImageUriBuilder</code></a>,
which <a href="https://github.com/bluesky-social/atproto/blob/b5c6bce9703faa7a8eb7f629d34f173116cb37b8/packages/bsky/src/index.ts#L64">will use a CDN if one is
configured</a>.</p>
<div><pre tabindex="0"><code data-lang="ts"><span><span>    <span>const</span> imgUriBuilder = <span>new</span> ImageUriBuilder(
</span></span><span><span>      config.cdnUrl || <span>`</span><span>${</span>config.publicUrl<span>}</span><span>/img`</span>,
</span></span><span><span>    )
</span></span></code></pre></div><p>So why does Bluesky provide direct unauthenticated access to the PDS <code>getBlobs</code>
endpoint? Once again illustrating the beauty of open source, there is an <a href="https://github.com/bluesky-social/atproto/issues/523">issue
describing the original
motivation</a>. In it, image
labeling and user content export, as well as additional future use cases, are
enumerated. There is also a
<a href="https://github.com/bluesky-social/atproto/issues/523#issuecomment-1450545120">mention</a>
of the possibility of users hotlinking content and Bluesky for free hosting, so
these issues are clearly top-of-mind. The <a href="https://github.com/bluesky-social/atproto/pull/606">original
implementation</a> did not
include the proper security headers, but they were <a href="https://github.com/bluesky-social/atproto/commit/3d1b3b367575f2b4d2856a4795b1ca94a9f16554">subsequently
added</a>.</p>
<p>Traditional social platforms can place more restrictions on blobs at time of
upload because there is a limited set of valid content. The extensibility of
Bluesky and the AT Protocol, which is what differentiates it from traditional
networks, also necessitates more complexity. However, I, and clearly the awesome
folks building Bluesky, think it’s clearly worth it.</p>
<h2 id="bonus-content">
  Bonus Content
  <a href="#bonus-content">
    
    <span>Link to heading</span>
  </a>
</h2>
<p>I mentioned sub-schemas and open unions earlier in this post. The
<code>app.bsky.feed.post</code> type includes a union for valid embeds. Per the AT Protocol
lexicon specification, unions are open unless explicitly marked as <code>closed</code>.</p>
<blockquote>
<p>By default unions are “open”, meaning that future revisions of the schema
could add more types to the list of refs (though can not remove types). This
means that implementations should be permissive when validating, in case they
do not have the most recent version of the Lexicon. The <code>closed</code> flag
(boolean) can indicate that the set of types is fixed and can not be extended
in the future.</p>
</blockquote>
<p>The embed union is not marked as closed.</p>
<div><pre tabindex="0"><code data-lang="json"><span><span>          <span>"embed"</span><span>:</span> {
</span></span><span><span>            <span>"type"</span>: <span>"union"</span>,
</span></span><span><span>            <span>"refs"</span>: [
</span></span><span><span>              <span>"app.bsky.embed.images"</span>,
</span></span><span><span>              <span>"app.bsky.embed.video"</span>,
</span></span><span><span>              <span>"app.bsky.embed.external"</span>,
</span></span><span><span>              <span>"app.bsky.embed.record"</span>,
</span></span><span><span>              <span>"app.bsky.embed.recordWithMedia"</span>
</span></span><span><span>            ]
</span></span><span><span>          }<span>,</span>
</span></span></code></pre></div><p>Therefore, posts can be created with an embed <code>$type</code> that is not enumerated.
For example, I could also persist the website HTML via <a href="https://bsky.app/profile/danielmangum.com/post/3lbpfxwnjoq23">making a post on
Bluesky</a> with a
custom embed.</p>
<div><pre tabindex="0"><code data-lang="fallback"><span><span>curl -X POST 'https://bsky.social/xrpc/com.atproto.repo.createRecord' \
</span></span><span><span>-H 'Authorization: Bearer '"$ACCESS_JWT"'' \
</span></span><span><span>-H 'Content-Type: application/json' \
</span></span><span><span>-d '{
</span></span><span><span>  "repo": "danielmangum.com",
</span></span><span><span>  "collection": "app.bsky.feed.post",
</span></span><span><span>  "record": {
</span></span><span><span>    "$type": "app.bsky.feed.post",
</span></span><span><span>    "text": "This post embeds a website.",
</span></span><span><span>    "createdAt": "2024-11-23T05:49:35.422015Z",
</span></span><span><span>    "embed": {
</span></span><span><span>      "$type": "com.danielmangum.hack.sites",
</span></span><span><span>      "sites": [
</span></span><span><span>        {
</span></span><span><span>          "site": {
</span></span><span><span>            "$type": "blob",
</span></span><span><span>            "ref": {
</span></span><span><span>              "$link": "bafkreic5fmelmhqoqxfjz2siw5ey43ixwlzg5gvv2pkkz7o25ikepv4zeq"
</span></span><span><span>            },
</span></span><span><span>            "mimeType": "text/html",
</span></span><span><span>            "size": 268
</span></span><span><span>          }
</span></span><span><span>        }
</span></span><span><span>      ]
</span></span><span><span>    }
</span></span><span><span>  }
</span></span><span><span>}'
</span></span></code></pre></div><div><pre tabindex="0"><code data-lang="fallback"><span><span>{
</span></span><span><span>  "uri": "at://did:plc:j22nebhg6aek3kt2mex5ng7e/app.bsky.feed.post/3lbpfxwnjoq23",
</span></span><span><span>  "cid": "bafyreidnlyhcvlzl5hc3btih6ly5anjld6ss4bgocyichnm72cpnjuzsvu",
</span></span><span><span>  "commit": {
</span></span><span><span>    "cid": "bafyreibv77m3bdyywmotn7ncbbrqv6pv7irzmw27bzklt4tppgsoodarma",
</span></span><span><span>    "rev": "3lbpfxwo57q23"
</span></span><span><span>  },
</span></span><span><span>  "validationStatus": "valid"
</span></span><span><span>}
</span></span></code></pre></div><p>In the Bluesky application, the embed is silently ignored.</p>



<p><img src="https://danielmangum.com/static/website_on_bsky_1.png" alt="website-on-bsky-1">
</p>
<p>However, the content is persisted and the reference is included in the post
record, so a different application could choose to start rendering the embed.</p>
<div><pre tabindex="0"><code data-lang="json"><span><span>{
</span></span><span><span>  <span>"$type"</span>: <span>"app.bsky.feed.post"</span>,
</span></span><span><span>  <span>"createdAt"</span>: <span>"2024-11-23T05:49:35.422015Z"</span>,
</span></span><span><span>  <span>"embed"</span>: {
</span></span><span><span>    <span>"$type"</span>: <span>"com.danielmangum.hack.sites"</span>,
</span></span><span><span>    <span>"sites"</span>: [
</span></span><span><span>      {
</span></span><span><span>        <span>"site"</span>: {
</span></span><span><span>          <span>"$type"</span>: <span>"blob"</span>,
</span></span><span><span>          <span>"ref"</span>: {
</span></span><span><span>            <span>"$link"</span>: <span>"bafkreic5fmelmhqoqxfjz2siw5ey43ixwlzg5gvv2pkkz7o25ikepv4zeq"</span>
</span></span><span><span>          },
</span></span><span><span>          <span>"mimeType"</span>: <span>"text/html"</span>,
</span></span><span><span>          <span>"size"</span>: <span>268</span>
</span></span><span><span>        }
</span></span><span><span>      }
</span></span><span><span>    ]
</span></span><span><span>  },
</span></span><span><span>  <span>"text"</span>: <span>"This post embeds a website."</span>
</span></span><span><span>}
</span></span></code></pre></div><p>In my opinion, this is one of the most interesting features of lexicons because
it allows for “micro-extensions” that build on existing use cases (e.g.
“microblogging”). For example, I for one would love a world in which small code
snippets could be embedded in my posts and run in a
<a href="https://webassembly.org/">WebAssembly</a> sandbox by other users. But that’s a
post for another day.</p>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Starlink Direct to Cell (206 pts)]]></title>
            <link>https://www.starlink.com/business/direct-to-cell</link>
            <guid>42230103</guid>
            <pubDate>Sun, 24 Nov 2024 20:08:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.starlink.com/business/direct-to-cell">https://www.starlink.com/business/direct-to-cell</a>, See on <a href="https://news.ycombinator.com/item?id=42230103">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="backgroundWrapper1"><shui-background-image _nghost-sc290=""><div _ngcontent-sc290=""><shui-factory><!----></shui-factory><shui-order-call-to-action _nghost-sc297="" id="ubiquitousCoverageBlock"><div _ngcontent-sc297=""><p>UBIQUITOUS COVERAGE</p><p>Starlink satellites with Direct to Cell capabilities enable ubiquitous access to texting, calling, and browsing wherever you may be on land, lakes, or coastal waters. Direct to Cell will also connect IoT devices with common LTE standards.</p></div></shui-order-call-to-action><shui-key-features-wrapper-helper _nghost-sc324="" id="dtcFeatures"><div _ngcontent-sc324=""><shui-key-features _ngcontent-sc324="" _nghost-sc323=""><shui-feature-badge _ngcontent-sc323="" alignment="center" _nghost-sc311=""></shui-feature-badge><!----><!----><shui-feature-badge _ngcontent-sc323="" alignment="center" _nghost-sc311=""><div _ngcontent-sc311=""><p>Voice &amp; Data</p><p>Starting 2025</p></div></shui-feature-badge><!----><!----><shui-feature-badge _ngcontent-sc323="" alignment="center" _nghost-sc311=""></shui-feature-badge><!----><!----><!----></shui-key-features></div></shui-key-features-wrapper-helper><shui-image-block _nghost-sc296="" id="dtcDiagram"><div _ngcontent-sc296=""><div _ngcontent-sc296=""><!----><!----><picture _ngcontent-sc296="" draggable="false"><!----><source _ngcontent-sc296="" media="(min-width: 959.9px)" srcset="https://api.starlink.com/public-files/quad_picture.png"><!----><!----><img _ngcontent-sc296="" loading="lazy" alt="" draggable="false" src="https://api.starlink.com/public-files/quad_picture.png"><!----></picture><!----></div><div _ngcontent-sc296=""><h2 _ngcontent-sc296="">STAY CONNECTED</h2><p _ngcontent-sc296=""> Direct to Cell works with existing LTE phones wherever you can see the sky. No changes to hardware, firmware, or special apps are required, providing seamless access to text, voice, and data. </p><!----><!----></div><!----><!----></div></shui-image-block><!----></div></shui-background-image></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[WireGuard: Beyond the most basic configuration (136 pts)]]></title>
            <link>https://sloonz.github.io/posts/wireguard-beyond-basic-configuration/</link>
            <guid>42229299</guid>
            <pubDate>Sun, 24 Nov 2024 18:08:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://sloonz.github.io/posts/wireguard-beyond-basic-configuration/">https://sloonz.github.io/posts/wireguard-beyond-basic-configuration/</a>, See on <a href="https://news.ycombinator.com/item?id=42229299">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div><p>Last week I wanted to replace my OpenVPN setup with WireGuard. The
basics were well-documented, going beyond the basics was a bit trickier.
Let me teach you want I learned.</p><h2 id="the-basics">The basics</h2><p>But first, let’s summarize the basics. I have a server with a hosting
provider that I want to use as a VPN server. I won’t delve into details
here, since there are so many great explanations on the web already
(<a href="https://www.wireguard.com/quickstart/#nat-and-firewall-traversal-persistence">here</a>,
<a href="https://www.wireguard.com/netns/">here</a>,
<a href="https://volatilesystems.org/wireguard-in-a-separate-linux-network-namespace.html">here</a>
or <a href="https://wiki.archlinux.org/title/WireGuard">here</a>), let’s just
make a quick summary of a simple setup, as a base for discussing the
(slightly) more advanced usages I had to configure myself:</p><ol><li><p>Generate a keypair (private key/public key) for the server.</p></li><li><p>Generate a keypair (private key/public key) for each client.</p></li><li><p>Pick a network for the VPN (for me: <code>10.100.0.0/16</code>), an IP for the
server (<code>10.100.0.1</code>) and the clients (<code>10.100.0.2</code>, <code>10.100.0.3</code>, etc.)</p></li><li><p>Create the configuration for the server</p></li></ol><pre tabindex="0"><code>[Interface]
Address = 10.100.0.1/24
PrivateKey = (redacted)
ListenPort = 51820
PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o ens0 -j MASQUERADE
PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o ens0 -j MASQUERADE

[Peer]
PublicKey = (redacted)
AllowedIPs = 10.100.0.2/32

[Peer]
PublicKey = (redacted)
AllowedIPs = 10.100.0.3/32
</code></pre><ol start="5"><li><p>Start the server, <code>wg up /etc/wireguard/wg0.conf</code></p></li><li><p>Create the configuration for the client</p></li></ol><pre tabindex="0"><code>[Interface]
PrivateKey = (redacted)

[Peer]
PublicKey = (redacted)
Endpoint = my-server.example.com:51820
AllowedIPs = 0.0.0.0/0, ::/0
</code></pre><ol start="7"><li>Start the client: <code>wg up /etc/wireguard/wg0.conf</code></li></ol><p>(optionally, not pictured here: create a network namespace for your VPN,
so your main connection still has a direct access to the internet, but
you can put applications that want the VPN in the VPN network namespace).</p><h2 id="nat">NAT</h2><p>Some applications (looking at you, BitTorrent client) do not play well
behind a NAT. Unfortunately, your VPN (wireguard or not) acts as a
NAT. One widely used method to work around those issues is UPnP.</p><p>UPnP solves two issues:</p><ul><li><p>Your computer does not know its public address on the internet (from
the point of view of an external system) ; behind a VPN, you public
address is the address of the VPN server, not the address assigned
to you by your ISP (your VPN software knows that address — but the
rest of the system generally has absolutely no knowledge of it). And
if that address is not known by your peer-to-peer software, it cannot
communicate it to other peers.</p></li><li><p>Even if that address is known and correctly communicated to a peer,
if you listen to a port (for example, TCP 8043), the peer will try to
reach you on that port, but on your VPN server IP. For that connection to
actually reach your computer, your VPN software will have to set up a port
forwarding rule (from VPN server 8043 to your ISP-assigned IP address,
port 8043 — in a real setup, the two ports may actually differ, but
let’s keep it simple for that explanation). UPnP provides a way to
do that.</p></li></ul><p>Let’s show that (obviously) our simple WireGuard-based VPN setup
does not provide UPnP (<code>external-ip</code> is a tool provided by <code>miniupnpc</code>,
an UPnP client):</p><pre tabindex="0"><code>$ external-ip
No IGD UPnP Device found on the network !
</code></pre><p>That was expected. Wireguard, being a very simple kernel module, does
not come with batteries included in the form of a UPnP server. We will
have to do it manually. Thankfully, it is pretty straightforward:</p><ol><li><p>Install <code>miniupnpd</code> (on the server, obviously).</p></li><li><p>Configure <code>miniupnpd</code>.</p></li><li><p>Add <code>PostUp = systemctl start miniupnpd</code> and <code>PostDown = systemctl stop miniupnpd</code> in your wireguard configuration file.</p></li></ol><p>The only non-trivial step here is configuring <code>miniupnpd</code>. All the
action lies in <code>/etc/miniupnpd/miniupnpd.conf</code>. Here is what you have
to configure:</p><ul><li><p><code>ext_ifname=ens0</code>: this is the internet-facing interface of your server
(it may be different from <code>ens0</code>).</p></li><li><p><code>listening_ip=wg0</code>: this is the wireguard network interface on your
server.</p></li><li><p><code>uuid=06df7440-dbac-404c-9c07-0b0dbfca609e</code>: use <code>uuidgen</code> to generate
one. Or you can steal mine, it doesn’t matter, since everything happens
in a private, non-routable network.</p></li><li><p><code>allow 1024-65535 10.100.0.0/16 1024-65535</code>: this is where you specify
your wireguard network (in my basic setup <code>10.100.0.0/16</code>).</p></li></ul><p>Let’s check that it works:</p><pre tabindex="0"><code>$ external-ip
(redacted, but it correctly returned my server IP)
$ upnpc -n 10.100.0.2 8043 8043 tcp 300
external (redacted:server-ip):8043 TCP is redirected to internal 10.100.0.2:8043 (duration=300)
$ socat TCP-LISTEN:8043 STDIO
</code></pre><p>And on another machine:</p><pre tabindex="0"><code>$ socat TCP:(redacted:server-ip):8043 STDIO
</code></pre><p>You can see that the two <code>socat</code> instances can communicate with each
other, passing through your VPN.</p><h2 id="ipv6">IPv6</h2><p>You know what’s even better than supporting UPnP to work around the
issues introduced that NAT ? Not having NAT. And the good news is,
with IPv6, you actually can.</p><p>The few tutorials who actually explains how to setup IPv6 for a
WireGuard-based VPN usually mirror the IPv4 setup: assign a private,
non-routable network to it (<code>10.100.0.0/16</code> for IPv4 get translated
to something like <code>fd00:dead:beef::/48</code> for IPv6), assign IP addresses
in this network to the server and the clients, and add an <code>ip6tables</code>
masquerade action.</p><p>We’re not going to do that. We can do better, and we will do better.</p><p>The first thing to notice is that my hosting provider has assigned to me
a whole /48 network for my account (<code>2001:aaaa:bbbb::/48</code>), and a /56
(<code>2001:aaaa:bbbb:1000::1/56</code>) for my server. We can take advantage of
that to assign different publicly routable IPv6 addresses to our clients,
instead of assigning private, non-routable addresses.</p><p>Let’s start with the server configuration. Let’s add IPv6. We assign
the /80 subnetwork <code>2001:aaaa:bbbb:1000:cafe::/80</code> to VPN network. I’ll
only list added configuration lines, not repeating existing ones:</p><pre tabindex="0"><code>[Interface]
Address = 2001:aaaa:bbbb:1000:cafe::1/80

[Peer]
AllowedIPs = 2001:aaaa:bbbb:1000:cafe::2/128

[Peer]
AllowedIPs = 2001:aaaa:bbbb:1000:cafe::3/128
</code></pre><p>Client-side, this is not much more complicated:</p><pre tabindex="0"><code>[Interface]
Address = 2001:aaaa:bbbb:1000:cafe::2/128
</code></pre><p>Just one sanity check: on your server, <code>ip -6 route get 2001:aaaa:bbbb:1000:cafe::2</code> must return the WireGuard interface
(<code>wg0</code>). If not, you will have to give a lower metric to <code>wg0</code> in your
routes. But you can now, on your client, directly listen to a port:</p><pre tabindex="0"><code>$ socat TCP6-LISTEN:8043
</code></pre><p>and it will be accessible from the public internet without any UPnP setup:</p><pre tabindex="0"><code>$ socat TCP6:[2001:aaaa:bbbb:1000:cafe::2]:8043
</code></pre><p>Also, the IP address on the device of your default route will be
<code>2001:aaaa:bbbb:1000:cafe::2</code>, meaning no need for UPnP to dectect your
public, routable IPv6: your VPN interface IP (which is private in the
IPv4 case, but now public for IPv6) is also your public IP.</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Those correction notices, in full (110 pts)]]></title>
            <link>https://statmodeling.stat.columbia.edu/2024/11/24/those-correction-notices-in-full-yes-its-possible-to-directly-admit-and-learn-from-error/</link>
            <guid>42228866</guid>
            <pubDate>Sun, 24 Nov 2024 17:00:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://statmodeling.stat.columbia.edu/2024/11/24/those-correction-notices-in-full-yes-its-possible-to-directly-admit-and-learn-from-error/">https://statmodeling.stat.columbia.edu/2024/11/24/those-correction-notices-in-full-yes-its-possible-to-directly-admit-and-learn-from-error/</a>, See on <a href="https://news.ycombinator.com/item?id=42228866">Hacker News</a></p>
Couldn't get https://statmodeling.stat.columbia.edu/2024/11/24/those-correction-notices-in-full-yes-its-possible-to-directly-admit-and-learn-from-error/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Senators say TSA's facial recognition program is out of control (131 pts)]]></title>
            <link>https://gizmodo.com/senators-say-tsas-facial-recognition-program-is-out-of-control-heres-how-to-opt-out-2000528310</link>
            <guid>42228795</guid>
            <pubDate>Sun, 24 Nov 2024 16:44:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gizmodo.com/senators-say-tsas-facial-recognition-program-is-out-of-control-heres-how-to-opt-out-2000528310">https://gizmodo.com/senators-say-tsas-facial-recognition-program-is-out-of-control-heres-how-to-opt-out-2000528310</a>, See on <a href="https://news.ycombinator.com/item?id=42228795">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
              
              
              <p>A bipartisan group of 12 senators has urged the Transportation Security Administration’s inspector general to investigate the agency’s use of facial recognition, saying it poses a significant threat to privacy and civil liberties.</p>

 <p>Their <a href="https://www.merkley.senate.gov/wp-content/uploads/Merkley-Letter-to-IG-FINAL.pdf">letter</a> comes just before one of the busiest travel periods of the year when millions of Americans are expected to pass through the nation’s airports.</p> <p>“This technology will soon be in use at hundreds of major and mid-size airports without an independent evaluation of the technology’s precision or an audit of whether there are sufficient safeguards in place to protect passenger privacy,” the senators wrote.</p>

 <p>The letter was signed by Jeffrey Merkley (D-OR), John Kennedy (R-LA), Ed Markey (D-MA), Ted Cruz (R-TX), Roger Marshall (R-Kansas), Ron Wyden (D-OR),&nbsp; Steve Daines (R-MT), Elizabeth Warren (D-MA), Bernie Sanders (I-VT), Cynthia Lummis (R-WY), Chris Van Hollen (D-MD), and Peter Welch (D-VT).</p> <p>While the TSA’s facial recognition program is currently optional and only in a few dozen airports, the agency announced in June that it plans to expand the technology to more than 430 airports. And the senators’ letter quotes a talk given by TSA Administrator David Pekoske in 2023 in which he said “we will get to the point where we require biometrics across the board.”</p>

 <p>“While the TSA claims facial recognition is optional, it is confusing and intimidating to opt out of TSA’s facial recognition scans, and our offices have received numerous anecdotal reports of Transportation Security Officers (TSOs) becoming belligerent when a traveler askes to opt out, or simply being unaware of that right,” the senators wrote. They added that in some airports the signage instructing flyers to step in front of a camera is prominently displayed while signs advising passengers of their right to opt out of face scan is “strategically placed in inconspicuous locations.”</p> <p>In an <a href="https://www.merkley.senate.gov/wp-content/uploads/2024_05_02_LTR-TSA-Freeze-to-Leadership.pdf">earlier letter</a> sent by many of the same senators to Senate Majority Leader Chuck Schumer (D-NY) and Minority Leader Mitch McConnell (R-KY), the senators said that the TSA has not produced any evidence in response to congressional inquiries showing that the implementation of facial recognition has led to the discovery of more fraudulent identity documents. Meanwhile, the TSA <a href="https://www.washingtonpost.com/technology/2023/07/11/tsa-airport-security-facial-recognition/">has said</a> the systems have a three percent false negative rate—how often they fail to properly match a person to their image in the database—which would equate to 68,000 failures daily if the technology was spread across all airports.</p>

 <p>The latest letter urges the TSA’s inspector general to evaluate the agency’s facial recognition program to determine whether it’s resulted in a meaningful reduction in passenger delays, assess whether it’s prevented anyone on no-fly lists from boarding a plane, and identify how frequently it results in identity verification errors.</p> <p>To opt out of a face scan at an airport, a traveler need only say that they decline facial recognition. They can then proceed normally through security by presenting an identification document, such as a driver’s license or passport.</p>

 <p><strong><em>Correction:</em></strong><em> An earlier version of this story quoted from the wrong letter sent by senators regarding the TSA’s facial recognition problem and incorrectly identified the senators who had signed the latest letter to the TSA’s inspector general.</em></p>
                          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Howstuffworks.com creator, Marshall Brain, has died (259 pts)]]></title>
            <link>https://www.wral.com/news/local/nc-state-marshall-brain-dies-november-2024/</link>
            <guid>42228759</guid>
            <pubDate>Sun, 24 Nov 2024 16:39:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.wral.com/news/local/nc-state-marshall-brain-dies-november-2024/">https://www.wral.com/news/local/nc-state-marshall-brain-dies-november-2024/</a>, See on <a href="https://news.ycombinator.com/item?id=42228759">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>
      <section>
				
        
				
					<p>A North Carolina State University faculty member and creator of the popular website "How Stuff Works" has died.</p>
				
        <p><span>
            Updated
            <formatted-timestamp iso-date="2024-11-24T14:52:56.373Z">
              ${new Date(updatedAt).toLocaleString() || updatedAt}
            </formatted-timestamp>
					</span>
          
        </p>
      </section>

      

      <section>

        <div>
					
          <figure>
						
							<div>
								<video id="hero-video" controls="" poster="https://images.wral.com/d5e9f942-c3e4-42f0-b449-f6b85291bf11?w=964&amp;h=542">
									
										<source src="https://media-hls.wral.com/vodhttporigins3/_definst_/smil:amazons3/cbcnm-static-web-content/home/web/wral/public/asset/news/local/2024/11/22/21735146/3263999-nc_state-DMID1-65213aki2.smil/playlist.m3u8" type="application/x-mpegURL">
									
									<track kind="captions">
								</video>
								
								<div>
									<p>NC State faculty member found dead in office</p>
								</div>
							</div>
							
						

						
					</figure>
					
          
          
            
          

        </div>

				<div>
					
						<p>A North Carolina State University faculty member and creator of the popular website "How Stuff&nbsp;Works" has died.</p>
						
						
						
					
						<p>Marshall Brain died inside his office Wednesday on N.C. State’s centennial campus.</p>
						
							
						
						
						
					
						<p>While&nbsp;the university would not confirm any details related to his death, sources close to Brain said he died by suicide.</p>
						
						
						
					
						<p>The N.C. State Police Department said it is no longer investigating, and foul play is not suspected.</p>
						
						
						
					
						<p>Brain contributed several articles to <a href="http://www.wral.com/">WRAL.com</a> over the years, <a href="https://www.wral.com/story/marshall-brain-anatomy-of-a-failed-doomsday-scenario/20997204/" target="_blank">including an editorial piece</a>. He’s also author of "<a href="https://www.amazon.com/Doomsday-Book-Science-Humanitys-Greatest/dp/1454939966/" target="_blank" rel="noopener">The Doomsday Book: The Science Behind Humanity’s Greatest Threats."</a></p>
						
						
						
					
						<h2><a href="https://www.wral.com/20833852/">Get Help: County-by-county guide to mental health and crisis resources in NC</a></h2>
						
						
						
					
						<p>If you're having suicidal thoughts or a mental health crisis,<i> </i><a href="https://www.ncdhhs.gov/divisions/mental-health-developmental-disabilities-and-substance-use-services/crisis-services/988-suicide-crisis-lifeline">call or text 988</a> or call the <a href="https://www.nami.org/Advocacy/Policy-Priorities/Responding-to-Crises/National-Hotline-for-Mental-Health-Crises-and-Suicide-Prevention">National Suicide Prevention Lifeline</a> at 800-273-8255. Veterans can press “1” after dialing<i> </i><a href="https://www.ncdhhs.gov/divisions/mental-health-developmental-disabilities-and-substance-use-services/crisis-services/988-suicide-crisis-lifeline">988</a> to connect directly to the Veterans Crisis Lifeline. For texts, veterans should continue to text the Veterans Crisis Lifeline short code: 838255.</p>
						
						
							
							
						
						
					
					
				</div>

        <div>
					
					
					
					
						<p>
							© 2024  Copyright Capitol Broadcasting Company
						</p>
					
        </div>

				<!-- RevContent -->
				


      </section>

      
    </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Linux 6.13 will report the number of hung tasks since boot (101 pts)]]></title>
            <link>https://www.phoronix.com/news/Linux-6.13-Non-MM</link>
            <guid>42228672</guid>
            <pubDate>Sun, 24 Nov 2024 16:20:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.phoronix.com/news/Linux-6.13-Non-MM">https://www.phoronix.com/news/Linux-6.13-Non-MM</a>, See on <a href="https://news.ycombinator.com/item?id=42228672">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><img alt="LINUX KERNEL" src="https://www.phoronix.com/assets/categories/linuxkernel.webp" width="100" height="100"></p><p>
Following <a href="https://www.phoronix.com/news/Linux-6.13-MM-Patches">all of the MM patches earlier this week</a> sent in by Andrew Morton, on Sunday morning he sent out all of the non-MM patches that he manages for the Linux kernel. Notable for Linux 6.13 with this pull request is presenting the hung task counter as well as finishing off the folio conversion in the NILFS2 code.
</p><p>
Among the patches in the non-MM pull request is adding the code to detect the count of the number of hung tasks since boot time. Back when the idea and patches were first floated this work was covered on Phoronix within <a href="https://www.phoronix.com/news/Linux-hung_task_detect_count">Linux Working On A Counter To Keep Track Of The Number Of Hung Tasks Since Boot</a>.
</p><p>
Long story short this adds <strong>/proc/sys/kernel/hung_task_detect_count</strong> for indicating the number of hung task warnings since the system/server was booted. This is intended to help out particularly with Linux servers as a health metric for administrators to gauge if there may be software/hardware problems at play if encountering a number of unexpected hung tasks. It's a simple metric but until now there hasn't been any convenient "hung_task_detect_count" report readily available.
</p><p><img src="https://www.phoronix.net/image.php?id=2024&amp;image=hung_task_detect_count" alt="hung_task_detect_count"></p>
<p>Also part of today's non-MM pull are clean-ups to the resource management code and finishing off the folio conversion for the NILFS2 file-system.
</p><p>
See the <a href="https://lore.kernel.org/lkml/20241124020841.3a96d9e26be9ce4d5810d0b5@linux-foundation.org/">non-MM pull request</a> for the full list of patches.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A Career Ending Mistake (286 pts)]]></title>
            <link>https://bitfieldconsulting.com/posts/career</link>
            <guid>42228538</guid>
            <pubDate>Sun, 24 Nov 2024 15:56:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://bitfieldconsulting.com/posts/career">https://bitfieldconsulting.com/posts/career</a>, See on <a href="https://news.ycombinator.com/item?id=42228538">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-block-type="23" id="block-yui_3_17_2_1_1667929911209_9668"><p>This isn’t about the time I inadvertently shut down one of Britain’s nuclear power stations, an entirely true story for which the world is nevertheless not yet prepared. Nor is it about the poor junior developer who <a href="https://np.reddit.com/r/cscareerquestions/comments/6ez8ag/accidentally_destroyed_production_database_on/">accidentally destroyed the production database</a> on their first day (they’ll be fine, bless them).</p>
<p>Instead, I want to talk about another kind of career ending mistake, one that affects more than just the unlucky few. Indeed, it’s a mistake we’re probably all making right now. And that’s <em>not planning the end of our careers</em>.</p>
<h3 id="the-end">The end</h3>
<p>By “the end”, I don’t necessarily mean picking your retirement date. This is really about the aim or goal of your career. Where will you be when you realise that this is where you’ve always wanted to be?</p>
<p>If you love what you’re doing now and don’t ever want to change jobs, great: you’ve reached the end of your career, even if it plays out over many decades. If you don’t love it, though, and that’s much more likely, then it’s worth asking what job you <em>would</em> love, and how you’re going to get it.</p>
<p>So, where do you want to end up? And is that where you’re currently heading? If not, what should you do about it?</p>
<h3 id="out-of-control">Out of control</h3>
<p>The word “career” means, among other things, “to rush about wildly”, or, of a vehicle, “to move fast and in a way that is out of control”. Isn’t that apt? And doesn’t it describe the career experience of most of us pretty well?</p>
<blockquote>
<p><em>The indispensable first step to getting what you want is this: decide what you want.</em><br>
 —Saying</p>
</blockquote>
<p>Most of us, in fact, don’t really know what we want to do with our working lives until we’re more or less doing it. By the time we’ve made our minds up where we want to go, we may already be a long way down the wrong track.</p>
<p>It’s not surprising, then, that many of us find ourselves in less than fully satisfying jobs, with doubtful or non-existent prospects for advancement. In all honesty, if we <em>are</em> happy in our jobs, it’s probably more often a matter of luck than of design.</p>
<p>Maybe rather than rushing around wildly, we should give a little thought to what we want to achieve in our careers. Rather than just sit back and hope we get the career we want, maybe we should actively plan and take steps to bring it about.</p>
<p>As software engineers, we’re constantly making detailed, elaborate plans for computers to execute; that’s what software is, after all. Isn’t it kind of weird that we rarely give a moment’s thought to the program we want to write for ourselves?</p>
<h3 id="choose-your-destination">Choose your destination</h3>
<p>The best time to start a pension is always twenty years ago, and career planning is a bit like that, too. By the time you realise you need it, you usually wish you’d started a lot earlier. On the other hand, it would be foolish to let that prevent you from starting at all. Even a late, sketchy, and uncertain plan is way better than no plan.</p>
<p>So what would a career plan look like? And when should we start making it?</p>
<p>The first phase of your career is probably too early to make serious plans, and any decisions you make at this stage are rarely critical: there’s plenty of room to experiment and make mistakes.</p>
<p>In the final phase, by contrast, you have fewer options, and there’s not much time to pull off a significant change of direction. The autopilot tends to lock in and steer you further down the glide path you’re already on.</p>
<p>You should be planning, in other words, to enter the final phase of your career in the right position, at the right level, and at the right time to land where you want to. So where is that, exactly?</p>
<h3 id="three-kinds-of-careers">Three kinds of careers</h3>
<p>Your career is likely to encompass lots of different things. Over the years, you’ll do all sorts of different jobs at different companies, and the perfect career destination for you may end up being something you can’t even imagine right now.</p>
<p>To help us think about it, though, let’s divide the possibilities, very broadly, into three groups:</p>
<ol type="1">
<li>Seniority</li>
<li>Management</li>
<li>Independence</li>
</ol>
<p>In the rest of this article, we’ll take a closer look at each of these destination airports, check out the local weather conditions, and ask what kind of flight plan would get us there.</p>
<p>So, what kind of career do you want to have?</p>
</div><div data-block-type="23" id="block-yui_3_17_2_1_1667929911209_12674"><h2 id="seniority">Seniority</h2>
<p>The first kind of career destination we’ll consider is <em>senior
individual contributor</em> (IC), which usually means something like
“high-level engineer”. A senior IC doesn’t run their own firm, or work
independently. They’re at the top of their game technically, and may be
a technical leader for others, but they spend the majority of their time
<em>doing</em> the work, not managing other people who do.</p>
<h3 id="what-does-a-senior-ic-do">What does a senior IC do?</h3>
<p>The exact ranks and job titles for senior engineers vary from one
company to the next, and there may be many levels for you to achieve
within a given company. But in terms of your <em>eventual</em> career
goal, let’s say we’re talking about the top level you can reach while
still being primarily an engineer.</p>
<p>In a small company, that might simply be something like “senior
developer”, or even team leader. In larger companies, the pinnacle of
engineering pay and responsibilities might be called something like
“principal engineer” or even “distinguished engineer” (sounds good,
doesn’t it?).</p>
<p>This isn’t an executive position: you won’t have your own washroom,
or a seat on the board. On the other hand, you’ll have plenty of money,
status, and authority, and unlike your colleagues in management, you
won’t spend all day in meetings. You’ll be at the highest level of your
profession, and getting well paid to excel at the work you love.</p>
<blockquote>
<p><em>Your work is going to fill a large part of your life, and the
only way to be truly satisfied is to do what you believe is great work.
And the only way to do great work is to love what you do.</em><br>
—Steve Jobs, <a href="https://news.stanford.edu/2005/06/14/jobs-061505/">Stanford
commencement address</a></p>
</blockquote>
<h3 id="what-they-dont-do">What they don’t do</h3>
<p>There are a few limitations, though. You probably won’t get to choose
<em>what</em> to work on, and you may not agree with all the decisions
of the powers that be. In fact, it’s practically certain you won’t.
After all, you know more about the subject matter than they do. If, in
the end, you can’t live with those decisions, you can go work for
another company, but of course you’ll find the same dynamic there.</p>
<p>A senior IC role appeals to those who want to stay technical and keep
their hands on the keyboard, or at least the mouse. You don’t have the
time-consuming, cross-disciplinary responsibilities of a business owner,
or the political challenges of a manager. You get to do all the fun
stuff: the building and making. And you can do it until you choose to
retire—hopefully in financial comfort.</p>
<h3 id="how-to-get-there">How to get there</h3>
<p>Find out what the situation is where you work. If senior ICs are a
thing in your company, talk to them. Ask them for advice. How did they
get where they are? What were the steps along the way? And is it what
they thought it would be?</p>
<p>Talk to your boss. Do they know this is what you want? What are they
prepared to do to help you get it? And what will they expect from you in
return? Establishing this dialogue is important, but it’s not enough:
you need to keep it open throughout your employment. Check in with them
often on how you’re doing, and what more you can do to help them help
<em>you</em>.</p>
<p>Don’t wait for annual reviews. A year is too long to wait to find out
that you’ve made no progress towards your career goal. Some people
blithely assume that if they keep doing what they’re doing for long
enough and don’t screw up, they’ll eventually make senior IC.</p>
<p>Well, maybe. But a more reliable strategy is to take personal control
of your skills development, and start taking it seriously.</p>
<h3 id="seniority-means-mastery">Seniority means mastery</h3>
<p>The most senior engineers in any company are the most accomplished,
the most experienced, and those who have the most to teach others. If
you want to reach this level, you’ll need to become a master of your
chosen craft.</p>
<p>Don’t wait for the company to train you. They prefer to promote
people who don’t need training. Instead, once you’ve found the craft you
love, you’ll need to dedicate yourself to mastering it.</p>
<p>Start seeing your current work not as a simple exchange of your time
for their money, but rather as an opportunity to find out what you’re
good at, and to get better at it. A professional coach can help you
figure this out, support your learning, and keep your eye on the
ball.</p>
<blockquote>
<p><em>Manhood is patience. Mastery is nine times patience.</em><br>
—Ursula K. Le Guin, <a href="https://amzn.to/3o7CwKW">“A Wizard of
Earthsea”</a></p>
</blockquote>
<h2 id="management">Management</h2>
<p>While very senior engineers can be well-compensated, their roles are
usually not the most senior in the <em>company</em>. If you want to rise
even higher in pay and responsibility while staying within the firm, you
may need to think about leaving your technical work behind and switching
to <em>management</em>.</p>
<p>Management is perhaps the default destination for many tech careers.
Provided you can stay in a company long enough, the natural path to
further advancement may be for you to become a manager.</p>
<p>If you don’t change direction, in other words, you may end up where
you’re heading. But <em>is</em> that where you want to go?</p>
<h3 id="what-does-a-manager-do">What does a manager do?</h3>
<p>Engineering managers need a solid foundation of technical competence,
to be sure, but the work itself is primarily about leading, supervising,
hiring, and developing the skills of other technical people. It turns
out those are all skills, too, and relatively rare ones.</p>
<p>Managing people is hard; much harder than programming. Computers just
do what you tell them, whether that’s right or wrong (usually wrong).
Anyone can get good at programming, if they’re willing to put in enough
time and effort. I’m not sure anyone can get good at managing, and most
don’t. Most managers are <em>terrible</em>.</p>
<p>That’s quite a sweeping statement, I know. (Prove me wrong, managers,
prove me wrong.) But, really, would a car mechanic last long in the job
if they couldn’t fit a tyre, or change a spark plug? Would a doctor
succeed if they regularly amputated the wrong leg? We would hope not.
But many managers are just as incompetent, in their own field, and yet
they seem to get away with it.</p>
<h3 id="being-a-great-manager">Being a great manager</h3>
<p>Good managers, then, like good teachers, are rare, but all the more
precious for it. If you’ve ever had a really good boss, you’ll remember
them all your life, and, if you’re lucky, emulate them. (You’ll remember
the really bad ones, too.) And just because managers don’t cut code or
solder chips, it doesn’t mean they don’t have a big influence on the
success of projects and companies.</p>
<p>Indeed, managers can have an outsize influence on events. I’m sure we
can all cite examples of promising projects that sank without trace
because of a disastrous manager. I’m less sure that there are many
examples of inspirational managers rescuing doomed projects from the
brink, though it does happen.</p>
<p>If you want to become a great manager, which I think is the only kind
worth being, start practising now. Learn people skills, communication,
collaboration, psychology. Work on understanding the things that make
different kinds of people tick. Manage <em>yourself</em> excellently. If
you can’t organise yourself, how do you expect to be responsible for a
team?</p>
<h3 id="getting-started">Getting started</h3>
<p>Study your own manager. If they do the job well, figure out why (and
talk to them about it). If they’re a shambles, figure out what they’re
doing wrong, and decide how you’d do better.</p>
<p>A great manager understands what’s happening with each person in
their team, and can be there to eliminate problems and roadblocks almost
before they happen. Why shouldn’t you start doing this kind of thing
right now, rather than waiting to be told? Sometimes the de facto leader
of a team is simply the person that everyone turns to when they have a
problem they can’t solve on their own. If that’s you, you may already be
on the road to becoming a memorable manager—for the right reasons.</p>
<h2 id="independence">Independence</h2>
<p>Being independent means working for yourself, most likely in your own
company, and maybe with others working for you, but also maybe not. Just
being a one-person company doesn’t necessarily make you truly
independent, though. For example, are you a consultant or a
contractor?</p>
<p>While the client tells a contractor what to do, a consultant tells
the <em>client</em> what to do. The difference matters. A consultant is
independent; a contractor is not.</p>
<h3 id="the-pros-and-cons-of-independent-working">The pros and cons of
independent working</h3>
<p>Running your own business, or otherwise being an independent worker,
is great for those who like it. I do, and I was never really happy
working for someone else. I couldn’t wait to strike out on my own. I was
probably a pretty mediocre employee for that reason, among others. And
there was the little <em>nuclear</em> incident, of course.</p>
<p>On the other hand, not everyone wants the hassle of figuring out how
to market their business and pitch clients, or the headache of handling
accounts and taxes. And not everyone can manage on an irregular,
unpredictable income, especially if they have a family to support. You
don’t get vacations, insurance, or sick pay. On the plus side, you own a
business.</p>
<h3 id="when-its-time-to-leave">When it’s time to leave</h3>
<p>If you do want to swap your stable job and decent salary for the joys
of career independence, the transition needs a little careful planning.
It would be unwise, for example, to just quit one day in a fit of pique,
<em>then</em> start wondering how you’re going to make rent the first
few months. Timing is important.</p>
<blockquote>
<p>DENPOK: <em>Lao Tzu teaches: the best fighter is never angry. More
important than the blow is knowing <strong>when</strong> to strike.
Like, perhaps, after we experience the executive whitewater rafting trip
in Coeur d’Alene.</em><br>
—<a href="https://amzn.to/3uVthBs">“Silicon Valley”</a></p>
</blockquote>
<p>And to make money on your own, you’ll need to be <em>excellent</em>
at what you do. There’s no one else to pick up the slack. In a big
company, you can learn on the job. When you run your own company, you’d
better already know your trade.</p>
<h3 id="testing-the-waters">Testing the waters</h3>
<p>If you can make the time, it’s a good idea to dip your toe into
independent working by doing a few small, one-off side gigs. You’ll gain
experience and some satisfied clients, making it easier to go fully
independent when you want to. And if it turns out that you don’t enjoy
the experience of working for yourself, it’s better to find that out
<em>before</em> you rage-quit your job, isn’t it?</p>
<p>Of course, we don’t always leave our jobs through choice. Layoffs are
a fact of life in a volatile industry. You may not see the rocks coming;
companies tend to fail gradually, then suddenly. But an unexpected
transition to “funemployment” needn’t be a disaster. If you’ve always
dreamed of being independent but somehow never quite worked up the
courage to jump ship voluntarily, then being made to walk the plank
could be just the spur you need.</p>
<h2 id="making-the-choice">Making the choice</h2>
<p>I hope I’ve encouraged you to think about where your career is going,
where you <em>want</em> to go, and what you can do to get there. Of
course, you may not yet know how you want to spend the bulk of your
career. That’s okay, and completely normal.</p>
<p>But you can <em>think</em> about it, even if it’s too early to come
to any firm decisions. And you’re not limited to just <em>one</em> of
these potential destinations: many successful careers combine seniority,
management, and independence in some way.</p>
<p>For example, you could be a full-time or part-time manager, and also
run your own business on the side. Or you could achieve independence by
being a roving consultant within a large organisation, while still
technically being a senior engineer. Or you could combine all three by
being the chief executive <em>and</em> the director of engineering in
your own firm. There are many possibilities.</p>
<h3 id="figuring-out-who-you-are">Figuring out who you are</h3>
<p>You can inquire of yourself what things you value, and how your
working life could contribute to them. As your experience and knowledge
of the world grows, ideas may start to slot into place for you about
what you want to do and be.</p>
<blockquote>
<p><em>Tell me, what is it you plan to do</em><br>
<em>With your one wild and precious life?</em><br>
—Mary Oliver, <a href="https://amzn.to/3uVsUGY">“The Summer Day”</a></p>
</blockquote>
<p>Your future may not, in fact, lie in the tech industry. That’s all
right, too. I have more than one friend who, despite achieving
considerable success as an engineer, has decided that this isn’t really
what they want to do in the long term.</p>
<p>If you want to quit and be a doctor instead, or a schoolteacher, a <a href="https://xkcd.com/2124/">spaaaaaace</a> engineer, a woodworker, or
simply wander the world like a <a href="https://www.youtube.com/watch?v=B7YDcLP2DeY">badass</a> righting
wrongs, go to it. <a href="https://bitfieldconsulting.com/posts/time-lords">Don’t waste any more of
your one wild and precious life</a> careering down a blind alley.</p>
<h3 id="making-small-course-corrections">Making small course
corrections</h3>
<p>Once you do have a sense of where you want to go, it can help guide
your choices. Even if you don’t know exactly what your perfect job looks
like, you may start to feel that you won’t be truly happy until you’re
independent, or a senior IC, or a manager. You can steer away from
things that would limit your options in those areas, and instead seek
out companies, fields, or sectors where you’ll have the best chance of
achieving the career you want.</p>
<p>That’s not to say you should have a detailed map of every step that
you plan to take (“make junior VP by Q4 2035”). As engineers, we already
know that a too-rigid plan rarely survives contact with reality.
Instead, assume life will throw all kinds of crazy and unexpected things
at you. Plan to be flexible, and to change your plans.</p>
<h3 id="its-about-the-planning-not-the-plan">It’s about the planning,
not the plan</h3>
<p>You can’t stop the waves, as the saying goes, but you can <a href="https://bitfieldconsulting.com/posts/tao-of-go">learn to surf</a>. Chance favours the prepared
mind. Never underestimate the role of serendipity. The perfect
opportunity may show up just when you least expect it, but if you’ve
never thought about what you want, how will you recognise it?</p>
<p>The time to start planning for the end of your career is now. It’s
never too early, and it’s also never too late, provided, of course, that
you don’t have your own little <em>incident</em>. <a href="https://bitfieldconsulting.com/books/code">Let’s be careful out there</a>.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Full LLM training and evaluation toolkit (137 pts)]]></title>
            <link>https://github.com/huggingface/smollm</link>
            <guid>42228472</guid>
            <pubDate>Sun, 24 Nov 2024 15:44:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/huggingface/smollm">https://github.com/huggingface/smollm</a>, See on <a href="https://news.ycombinator.com/item?id=42228472">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">SmolLM2</h2><a id="user-content-smollm2" aria-label="Permalink: SmolLM2" href="#smollm2"></a></p>
<p dir="auto">SmolLM2 is a family of compact language models available in three size: 135M, 360M, and 1.7B parameters. They are capable of solving a wide range of tasks while being lightweight enough to run on-device.</p>
<p dir="auto">You can find our most capable model <strong>🤏 SmolLM2-1.7B-Instruct</strong> <a href="https://huggingface.co/HuggingFaceTB/SmolLM2-1.7B-Instruct" rel="nofollow">here</a>.</p>
<p dir="auto"><strong>New: Introducing <a href="https://huggingface.co/datasets/HuggingFaceTB/smoltalk" rel="nofollow">SmolTalk</a>, the SFT dataset of SmolLM2 🚀</strong></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/919b15524c95e8c27a14584c356023d8a4e234a595ebbc841abdae2e111c9549/68747470733a2f2f63646e2d75706c6f6164732e68756767696e67666163652e636f2f70726f64756374696f6e2f75706c6f6164732f3631633134313334326161633736346365313635346534332f79343568494d4e52455737775f58704859425f30712e706e67"><img src="https://camo.githubusercontent.com/919b15524c95e8c27a14584c356023d8a4e234a595ebbc841abdae2e111c9549/68747470733a2f2f63646e2d75706c6f6164732e68756767696e67666163652e636f2f70726f64756374696f6e2f75706c6f6164732f3631633134313334326161633736346365313635346534332f79343568494d4e52455737775f58704859425f30712e706e67" alt="Evaluation Results" width="600" data-canonical-src="https://cdn-uploads.huggingface.co/production/uploads/61c141342aac764ce1654e43/y45hIMNREW7w_XpHYB_0q.png"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Table of Contents</h2><a id="user-content-table-of-contents" aria-label="Permalink: Table of Contents" href="#table-of-contents"></a></p>
<ol dir="auto">
<li><a href="#usage">Usage</a>
<ul dir="auto">
<li><a href="#transformers">Transformers</a></li>
<li><a href="#chat-in-trl">Chat in TRL</a></li>
<li><a href="#local-applications">Local applications</a></li>
</ul>
</li>
<li><a href="#smol-tools">Smol-tools</a></li>
<li><a href="#pre-training">Pre-training</a></li>
<li><a href="#fine-tuning">Fine-tuning</a></li>
<li><a href="#evaluation">Evaluation</a></li>
<li><a href="#synthetic-data-pipelines">Synthetic data pipelines</a></li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<p dir="auto">Our most powerful model is <code>SmolLM2-1.7B-Instruct</code>, which you can use as an assistant with <code>transformers</code>, <code>trl</code>, or using quantized versions with tools like <code>llama.cpp</code>, <code>MLX</code>, and <code>transformers.js</code>. For lighter applications, you can also use the smaller models <code>SmolLM2-360M</code> and<code>SmolLM2-135M</code>, which are suitable for on-device usage and can be integrated similarly.
All available in this <a href="https://huggingface.co/collections/HuggingFaceTB/smollm2-6723884218bcda64b34d7db9" rel="nofollow">collection</a>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Transformers</h3><a id="user-content-transformers" aria-label="Permalink: Transformers" href="#transformers"></a></p>

<div dir="auto" data-snippet-clipboard-copy-content="from transformers import AutoModelForCausalLM, AutoTokenizer
checkpoint = &quot;HuggingFaceTB/SmolLM2-1.7B-Instruct&quot;

device = &quot;cuda&quot; # for GPU usage or &quot;cpu&quot; for CPU usage
tokenizer = AutoTokenizer.from_pretrained(checkpoint)
# for multiple GPUs install accelerate and do `model = AutoModelForCausalLM.from_pretrained(checkpoint, device_map=&quot;auto&quot;)`
model = AutoModelForCausalLM.from_pretrained(checkpoint).to(device)

messages = [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Write a 100-word article on 'Benefits of Open-Source in AI research&quot;}]
input_text=tokenizer.apply_chat_template(messages, tokenize=False)
inputs = tokenizer.encode(input_text, return_tensors=&quot;pt&quot;).to(device)
outputs = model.generate(inputs, max_new_tokens=50, temperature=0.2, top_p=0.9, do_sample=True)
print(tokenizer.decode(outputs[0]))"><pre><span>from</span> <span>transformers</span> <span>import</span> <span>AutoModelForCausalLM</span>, <span>AutoTokenizer</span>
<span>checkpoint</span> <span>=</span> <span>"HuggingFaceTB/SmolLM2-1.7B-Instruct"</span>

<span>device</span> <span>=</span> <span>"cuda"</span> <span># for GPU usage or "cpu" for CPU usage</span>
<span>tokenizer</span> <span>=</span> <span>AutoTokenizer</span>.<span>from_pretrained</span>(<span>checkpoint</span>)
<span># for multiple GPUs install accelerate and do `model = AutoModelForCausalLM.from_pretrained(checkpoint, device_map="auto")`</span>
<span>model</span> <span>=</span> <span>AutoModelForCausalLM</span>.<span>from_pretrained</span>(<span>checkpoint</span>).<span>to</span>(<span>device</span>)

<span>messages</span> <span>=</span> [{<span>"role"</span>: <span>"user"</span>, <span>"content"</span>: <span>"Write a 100-word article on 'Benefits of Open-Source in AI research"</span>}]
<span>input_text</span><span>=</span><span>tokenizer</span>.<span>apply_chat_template</span>(<span>messages</span>, <span>tokenize</span><span>=</span><span>False</span>)
<span>inputs</span> <span>=</span> <span>tokenizer</span>.<span>encode</span>(<span>input_text</span>, <span>return_tensors</span><span>=</span><span>"pt"</span>).<span>to</span>(<span>device</span>)
<span>outputs</span> <span>=</span> <span>model</span>.<span>generate</span>(<span>inputs</span>, <span>max_new_tokens</span><span>=</span><span>50</span>, <span>temperature</span><span>=</span><span>0.2</span>, <span>top_p</span><span>=</span><span>0.9</span>, <span>do_sample</span><span>=</span><span>True</span>)
<span>print</span>(<span>tokenizer</span>.<span>decode</span>(<span>outputs</span>[<span>0</span>]))</pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Chat in TRL</h3><a id="user-content-chat-in-trl" aria-label="Permalink: Chat in TRL" href="#chat-in-trl"></a></p>
<p dir="auto">You can also use the TRL CLI to chat with the model from the terminal:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pip install trl
trl chat --model_name_or_path HuggingFaceTB/SmolLM2-1.7B-Instruct --device cpu"><pre>pip install trl
trl chat --model_name_or_path HuggingFaceTB/SmolLM2-1.7B-Instruct --device cpu</pre></div>
<p dir="auto">You can find more details on how to leverage the model for use cases such as text summarization, text rewriting and function calling in the model card: <a href="https://huggingface.co/HuggingFaceTB/SmolLM2-1.7B-Instruct" rel="nofollow">https://huggingface.co/HuggingFaceTB/SmolLM2-1.7B-Instruct</a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Local applications</h3><a id="user-content-local-applications" aria-label="Permalink: Local applications" href="#local-applications"></a></p>
<p dir="auto">You can use the models locally with frameworks like <code>llama.cpp</code>, <code>MLX</code>, and <code>transformers.js</code>, which support SmolLM2.
All models are available in this <a href="https://huggingface.co/collections/HuggingFaceTB/smollm2-6723884218bcda64b34d7db9" rel="nofollow">collection</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Smol-tools</h2><a id="user-content-smol-tools" aria-label="Permalink: Smol-tools" href="#smol-tools"></a></p>
<p dir="auto">A collection of lightweight AI-powered tools built with LLaMA.cpp and small language models. These tools are designed to run locally on your machine without requiring expensive GPU resources.
Further instructions on how to use the tools can be found in the <a href="https://github.com/huggingface/smollm/blob/main/smol_tools/README.md">smol-tools README</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Pre-training</h2><a id="user-content-pre-training" aria-label="Permalink: Pre-training" href="#pre-training"></a></p>
<p dir="auto">You can find scripts for launching pre-training with <a href="https://github.com/huggingface/nanotron/">nanotron</a> under <a href="https://github.com/huggingface/smollm/blob/main/pre-training/README.md">pre-training</a>, we share the exact configs for training SmolLM1 and will upload SmolLM2's configs soon.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Fine-tuning</h2><a id="user-content-fine-tuning" aria-label="Permalink: Fine-tuning" href="#fine-tuning"></a></p>
<p dir="auto">You can find an example script to finetune SmolLM2 using <code>TRL</code> and <code>PEFT</code> in the <code>finetuning</code> folder. We also link to our post-training scripts for SmolLM2 using the alignement handbook.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Evaluation</h2><a id="user-content-evaluation" aria-label="Permalink: Evaluation" href="#evaluation"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/9390426af7c12fcab4f192c7f8d3414e3d22451cfe9b8241dc2e6d7331d0b493/68747470733a2f2f63646e2d75706c6f6164732e68756767696e67666163652e636f2f70726f64756374696f6e2f75706c6f6164732f3631633134313334326161633736346365313635346534332f542d63484a564137464261493063674441707a456a2e706e67"><img src="https://camo.githubusercontent.com/9390426af7c12fcab4f192c7f8d3414e3d22451cfe9b8241dc2e6d7331d0b493/68747470733a2f2f63646e2d75706c6f6164732e68756767696e67666163652e636f2f70726f64756374696f6e2f75706c6f6164732f3631633134313334326161633736346365313635346534332f542d63484a564137464261493063674441707a456a2e706e67" alt="image/png" data-canonical-src="https://cdn-uploads.huggingface.co/production/uploads/61c141342aac764ce1654e43/T-cHJVA7FBaI0cgDApzEj.png"></a></p>
<p dir="auto">You can find more detailed evaluation of each model size in the model cards in this <a href="https://huggingface.co/collections/HuggingFaceTB/smollm2-6723884218bcda64b34d7db9" rel="nofollow">collection</a>.
We use <a href="https://github.com/huggingface/lighteval">lighteval</a> for all our evaluations, for more details refer to the <a href="https://github.com/huggingface/smollm/blob/main/evaluation/README.md">evaluation README</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Synthetic data pipelines</h2><a id="user-content-synthetic-data-pipelines" aria-label="Permalink: Synthetic data pipelines" href="#synthetic-data-pipelines"></a></p>
<p dir="auto">We released <a href="https://huggingface.co/datasets/HuggingFaceTB/smoltalk" rel="nofollow">SmolTalk</a> the SFT dataset used for building SmolLM2 instruct models. It was created with <a href="https://github.com/argilla-io/distilabel">distilabel</a> and you can check and execute the synthetic data pipelines in <a href="https://github.com/huggingface/smollm/blob/main/distilabel_pipelines/README.md">distilabel_pipelines README</a></p>
<div dir="auto">
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f7469fe83fb142b50df98d220431dc4c487f70ad946d2defeafa09be9e67b36d/68747470733a2f2f63646e2d75706c6f6164732e68756767696e67666163652e636f2f70726f64756374696f6e2f75706c6f6164732f3631633134313334326161633736346365313635346534332f4a4c5445626e7342515f71593033326d78467a67432e706e67"><img src="https://camo.githubusercontent.com/f7469fe83fb142b50df98d220431dc4c487f70ad946d2defeafa09be9e67b36d/68747470733a2f2f63646e2d75706c6f6164732e68756767696e67666163652e636f2f70726f64756374696f6e2f75706c6f6164732f3631633134313334326161633736346365313635346534332f4a4c5445626e7342515f71593033326d78467a67432e706e67" width="800" data-canonical-src="https://cdn-uploads.huggingface.co/production/uploads/61c141342aac764ce1654e43/JLTEbnsBQ_qY032mxFzgC.png"></a></p><p dir="auto"><em>Comparison of models finetuned on SmolTalk and Orca AgentInstruct 1M. For more details, refer to the <a href="https://huggingface.co/datasets/HuggingFaceTB/smoltalk" rel="nofollow">dataset card</a>.</em></p>
</div>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The size of BYD's factory (114 pts)]]></title>
            <link>https://twitter.com/taylorogan/status/1859146242519167249</link>
            <guid>42228138</guid>
            <pubDate>Sun, 24 Nov 2024 14:37:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/taylorogan/status/1859146242519167249">https://twitter.com/taylorogan/status/1859146242519167249</a>, See on <a href="https://news.ycombinator.com/item?id=42228138">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Charset="WTF-8" (136 pts)]]></title>
            <link>https://wtf-8.xn--stpie-k0a81a.com/</link>
            <guid>42226953</guid>
            <pubDate>Sun, 24 Nov 2024 09:38:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://wtf-8.xn--stpie-k0a81a.com/">https://wtf-8.xn--stpie-k0a81a.com/</a>, See on <a href="https://news.ycombinator.com/item?id=42226953">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p>© 2024 <a href="https://www.janstepien.com/">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;ę&nbsp;&nbsp;&nbsp;ń.</a> All rights reserved.</p>
    <!-- ��� ��ę���ń -->
    <p><a href="https://wtf-8.xn--stpie-k0a81a.com/feed.xml">Web feed</a></p>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Denmark will plant 1B trees and convert 10% of farmland into forest (182 pts)]]></title>
            <link>https://apnews.com/article/denmark-forest-trees-fertilizer-e55416347fcc385a3ea8e2415726f908</link>
            <guid>42226185</guid>
            <pubDate>Sun, 24 Nov 2024 05:59:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://apnews.com/article/denmark-forest-trees-fertilizer-e55416347fcc385a3ea8e2415726f908">https://apnews.com/article/denmark-forest-trees-fertilizer-e55416347fcc385a3ea8e2415726f908</a>, See on <a href="https://news.ycombinator.com/item?id=42226185">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                                        <p>COPENHAGEN, Denmark (AP) — Danish lawmakers on Monday agreed on a deal to plant 1 billion trees and convert 10% of farmland into forest and natural habitats over the next two decades in an effort to reduce fertilizer usage.</p><p>The government called the agreement “the biggest change to the Danish landscape in over 100 years.” </p><p>“The Danish nature will change in a way we have not seen since the wetlands were drained in 1864,” said Jeppe Bruus, head of Denmark’s Green Tripartite Ministry, created to implement a green deal reached in June among farmers, the industry, the labor unions and environmental groups.</p><p>Under the agreement, 43 billion kroner ($6.1 billion) have been earmarked to acquire land from farmers over the next two decades, the government said. </p><p>Danish forests would grow on an additional 250,000 hectares (618,000 acres), and another 140,000 hectares (346,000 acres), which are currently cultivated on climate-damaging low-lying soils, must be converted to nature. Currently, 14.6% of land is covered by forests. </p>
    

<p>The deal was reached by the three-party Danish <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/denmark-government-shuffle-ministries-1227b4b0ca8f72bd0179c9992328319b">government</a></span> — made up of the Social Democrats, the Liberals and the center Moderates — and the Socialist People’s Party, the Conservatives, Liberal Alliance and the Social Liberal Party.</p>

<p>A vote in parliament on the deal is considered a formality.</p><p><span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/denmark-cow-tax-greenhouse-gases-9a570518639e0a1990806fd1a05ac11a">In June</a></span>, the government said livestock farmers will be taxed for the greenhouse gases emitted by their cows, sheep and pigs from 2030, the first country to do so as it targets a major source of methane emissions, one of the most potent gases contributing to global warming.</p><h2>___</h2><p>Read more of AP’s climate coverage at <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/hub/environment">http://www.apnews.com/climate-and-environment</a></span></p>
                                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Supreme Court allows multibillion-dollar class action to proceed against Meta (108 pts)]]></title>
            <link>https://apnews.com/article/supreme-court-meta-facebook-lawsuit-9173ad92e11df4b2a565418e419dfb88</link>
            <guid>42226081</guid>
            <pubDate>Sun, 24 Nov 2024 05:23:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://apnews.com/article/supreme-court-meta-facebook-lawsuit-9173ad92e11df4b2a565418e419dfb88">https://apnews.com/article/supreme-court-meta-facebook-lawsuit-9173ad92e11df4b2a565418e419dfb88</a>, See on <a href="https://news.ycombinator.com/item?id=42226081">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                                        <p>WASHINGTON (AP) — The <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/hub/us-supreme-court">Supreme Court</a></span> is allowing a multibillion-dollar class action investors’ lawsuit to proceed against Facebook parent <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/hub/meta-platforms-inc">Meta</a></span>, stemming from the privacy scandal involving the <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/2022-midterm-elections-steve-bannon-technology-lawsuits-campaigns-9a8b7633eb11d08d0a58a45b7dab1770">Cambridge Analytica</a></span> political consulting firm.</p><p>The justices heard arguments in November in Meta’s bid to shut down the lawsuit. On Friday, they decided that they were wrong to take up the case in the first place.</p><p>The high court dismissed the company’s appeal, leaving in place an appellate ruling allowing the case to go forward.</p><p>Investors allege that Meta did not fully disclose the risks that <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/c8f615be9523421998b4fcc16374ff37">Facebook users’ personal information would be misused</a></span> by Cambridge Analytica, a firm that supported <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/hub/donald-trump">Donald Trump</a></span> ’s first successful Republican presidential campaign in 2016.</p><p>Inadequacy of the disclosures led to two significant price drops in the price of the company’s shares in 2018, after the public learned about the extent of the privacy scandal, the investors say.</p>
    

<p>Meta spokesman Andy Stone said the company was disappointed by the court’s action. “The plaintiff’s claims are baseless and we will continue to defend ourselves as this case is considered by the District Court,” Stone said in an emailed statement.</p>



<p> Meta already has paid a $5.1 billion fine and reached a $725 million privacy settlement with users.</p><div data-module="" data-gtm-region="What to know about Trump's second term: Staffing the administration: Here are the people Trump has picked for key positions so far. Plus, a look at recess appointments and how could Trump use them to fill his Cabinet.Follow all of our coverage as Donald Trump assembles his second administration." data-align-center=""><p><b>What to know about Trump’s second term:</b><br></p><ul><li><b>Staffing the administration:</b> Here are the <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/trump-staff-picks-stefanik-wiles-stephen-miller-tom-homan-243d73610b03a3ee18c4d5f68756af7c">people Trump has picked</a></span> for key positions so far. Plus, a look at <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/recess-appointments-trump-cabinet-gop-senate-f484a152e152e8495254d1f83877c71a">recess appointments</a></span> and how could Trump use them to fill his Cabinet.</li></ul><p><i>Follow all of our coverage as </i><span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/hub/donald-trump"><i>Donald Trump</i></a></span><i> assembles his second administration.</i></p></div>
<p>Cambridge Analytica had ties to Trump political strategist <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/hub/steve-bannon">Steve Bannon</a></span>. It had paid a Facebook app developer for access to the personal information of about 87 million Facebook users. That data was then used to target U.S. voters during the 2016 campaign.</p>
    
    
    
<p>The lawsuit is one of two high court cases involving class-action lawsuits against tech companies. The justices also are wrestling with whether to shut down a class action against <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/nvidia-market-value-stock-price-revenue-chips-fe1d0d081191d5168332bf1c9ea3b85f">Nvidia</a></span>. Investors say the company misled them about its dependence on selling computer chips for the mining of volatile cryptocurrency. </p>
                                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Dear friend, you have built a Kubernetes (117 pts)]]></title>
            <link>https://www.macchaffee.com/blog/2024/you-have-built-a-kubernetes/</link>
            <guid>42226005</guid>
            <pubDate>Sun, 24 Nov 2024 05:03:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.macchaffee.com/blog/2024/you-have-built-a-kubernetes/">https://www.macchaffee.com/blog/2024/you-have-built-a-kubernetes/</a>, See on <a href="https://news.ycombinator.com/item?id=42226005">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody">
        <p><em>This post will make more sense if you first read <a href="https://rachit.pl/post/you-have-built-a-compiler/">Dear Sir, You Have Built a Compiler</a>.</em></p>
<p>Dear friend,</p>
<p>I am afraid to inform you that you have built a Kubernetes. I know you wanted to "choose boring tech" to just run some containers. You said that "Kubernetes is overkill" and "it's just way too complex for a simple task" and yet, six months later, you have pile of shell scripts that do not work—breaking every time there's a slight shift in the winds of production.</p>
<p>Surely, switching to Docker Compose will be the end of your woes; at least that way, someone else maintains a standard config file format for you to use. But wait, Compose is still <a href="https://www.macchaffee.com/blog/2024/docker-compose/">not a holistic solution</a>. "Do I really need a separate solution for deployment, rolling updates, rollbacks, and scaling?" you ask yourself? Surely not. Your app is so simple; a backend, a reverse proxy, postgres, and a job runner. So you march on, and add another few sections to your <code>deploy.sh</code> script, certain, that this will be the last of what you need to do to maintain this pile of hacks.</p>
<p>Ah, but wait! Inevitably, you find a reason to expand to a second server. While it's true <a href="https://news.ycombinator.com/item?id=41340751">a single server can go a long way</a> many things can force this decision, such as the need for special hardware, high availability, or the speed of light. Tired, you parameterize your deploy script and configure firewall rules, distracted from the crucial features you should be working on and shipping. One of your team members suggests connecting the servers with Tailscale: an overlay network with service discovery. After that you will know, yes know, that there is no tougher complexity hurdle to clear than the networking.</p>
<p>Except if you quit or go on vacation, who will maintain this custom pile of shell scripts? The untested tarball handling? The inscrutable iptables rules? Who will know about those undocumented sysctl edits you made on the VM? So you add everything to Ansible, so that you may treat your VM as immutable and version-controlled. Certain, of course, that because you’re not using Kubernetes, it is going to be way easier to maintain than a Kubernetes cluster. What glorious engineering, you say to yourself.</p>
<p>In the last leg of your journey to avoid building a Kubernetes, your manager tells you that your app needs to programmatically spawn other containers. Spawning containers, of course, requires you to mount the Docker socket in your web app, which is wildly insecure. Not my problem, your manager says. So you write a separate service that exposes a safe subset of the Docker API to your web app. Done at last, you say to yourself, without having to build a Kubernetes.</p>
<p>A standard config format, a deployment method, an overlay network, service discovery, immutable nodes, and an API server. Dear friend, you have built a Kubernetes.</p>
<p><em>Addressed to,</em></p>
<p><em>Those who did not want to use Kubernetes.</em></p>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Frosted Glass from Games to the Web: HTML glass UI inspired by AAA game dev (654 pts)]]></title>
            <link>https://www.tyleo.com/html-glass.html</link>
            <guid>42225481</guid>
            <pubDate>Sun, 24 Nov 2024 02:19:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.tyleo.com/html-glass.html">https://www.tyleo.com/html-glass.html</a>, See on <a href="https://news.ycombinator.com/item?id=42225481">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><h2>Frosted Glass from Games to the Web</h2></p><h3>Crafting beautiful HTML glass UI inspired by AAA game development.</h3><p>During my time as a UI developer for <b>Forza Horizon 3</b> and<!-- --> <b>Forza Motorsport 7</b>, I had the opportunity to work with stunning frosted acrylic design elements. Here's an example from <b>Horizon 3</b>:</p><p><img src="https://www.tyleo.com/img/forza-horizon-3-de4ab5d4.webp"></p><p>Inspired by this design, I've always wanted to create a similar effect using HTML. On this page, I share my attempt at achieving a beautiful glass effect, along with sample code and assets for anyone who wants to explore this technique themselves. Here's a look at the final product:</p><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h3 id="final-recipe-lookahead">Final Recipe Lookahead</h3><p>Before diving into the core of this tutorial, some readers may prefer to skip straight to the final recipe so they can paste it right into their own page. Those readers can find it conveniently tucked away in this toggle.</p><div><h3>Light Reflection Asset</h3><p><img src="https://www.tyleo.com/img/light-f71eeaec.png"></p><h3>JavaScript Version</h3><p>This works on all platforms.</p><h4>HTML</h4><div><pre>1
2
3
4</pre><div><pre><span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>glass</span><span>"</span><span>&gt;</span><span></span></span><span><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>light</span><span>"</span><span> </span><span>data-js-background-attachment-fixed</span><span>/&gt;</span><span></span></span><span><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>drag-me</span><span>"</span><span>&gt;</span><span>Drag Me</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></span><span><span></span><span>&lt;/</span><span>div</span><span>&gt;</span></span></pre></div></div><h4>CSS</h4><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56</pre><div><pre><span><span>.glass</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>box-shadow</span><span>:</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>-0.75</span><span>px</span><span> </span><span>-0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.1</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset +</span><span>0.75</span><span>px</span><span> +</span><span>0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    </span><span>3</span><span>px</span><span> </span><span>2</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0.25</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>40</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>border-radius</span><span>:</span><span> </span><span>5</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>overflow</span><span>:</span><span> hidden</span><span>;</span><span></span></span><span><span></span><span>}</span><span></span></span><span><span>
</span></span><span><span></span><span>.light</span><span> </span><span>{</span><span></span></span><span><span>   </span><span></span></span><span><span>   </span><span>background-image</span><span>:</span><span> </span><span>url</span><span>(</span><span>path/to/light.png</span><span>)</span><span>;</span><span></span></span><span><span>   </span><span>background-repeat</span><span>:</span><span> repeat</span><span>;</span><span></span></span><span><span>   </span><span>background-size</span><span>:</span><span> </span><span>750</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>   </span><span></span></span><span><span>   </span><span>opacity</span><span>:</span><span> </span><span>0.075</span><span>;</span><span></span></span><span><span>
</span></span><span><span>   </span><span></span></span><span><span>   </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></span><span><span>   </span><span>bottom</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>   </span><span>left</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>   </span><span>right</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>   </span><span>top</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>
</span></span><span><span>   </span><span></span></span><span><span>   </span><span>z-index</span><span>:</span><span> </span><span>-1</span><span>;</span><span></span></span><span><span></span><span>}</span><span></span></span><span><span>
</span></span><span><span></span><span>.drag-me</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>display</span><span>:</span><span> flex</span><span>;</span><span></span></span><span><span>  </span><span>align-items</span><span>:</span><span> center</span><span>;</span><span></span></span><span><span>  </span><span>justify-content</span><span>:</span><span> center</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>height</span><span>:</span><span> </span><span>30</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>background-color</span><span>:</span><span> </span><span>rgba</span><span>(</span><span>12</span><span>,</span><span> </span><span>13</span><span>,</span><span> </span><span>14</span><span>,</span><span> </span><span>0.75</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><h4>JS</h4><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre><div><pre><span></span><span></span><span></span><span></span><span><span></span></span><span><span></span><span>const</span><span> </span><span>updateDataJSBackgroundAttachmentFixedElements</span><span> </span><span>=</span><span> </span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>const</span><span> elements </span><span>=</span><span> document</span><span>.</span><span>querySelectorAll</span><span>(</span><span></span></span><span><span>    </span><span>"[data-js-background-attachment-fixed]"</span><span>,</span><span></span></span><span><span>  </span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>for</span><span> </span><span>(</span><span>const</span><span> element </span><span>of</span><span> elements</span><span>)</span><span> </span><span>{</span><span></span></span><span><span>    </span><span></span></span><span><span>    </span><span>if</span><span> </span><span>(</span><span>!</span><span>(</span><span>element </span><span>instanceof</span><span> </span><span>HTMLElement</span><span>)</span><span>)</span><span> </span><span>continue</span><span>;</span><span></span></span><span><span>
</span></span><span><span>    </span><span></span></span><span><span>    </span><span>const</span><span> clientRect </span><span>=</span><span> element</span><span>.</span><span>getBoundingClientRect</span><span>(</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>    </span><span></span></span><span><span>    </span><span>const</span><span> backgroundPositionX </span><span>=</span><span> </span><span>`</span><span>${</span><span>(</span><span>-</span><span>clientRect</span><span>.</span><span>x</span><span>)</span><span>.</span><span>toString</span><span>(</span><span>)</span><span>}</span><span>px</span><span>`</span><span>;</span><span></span></span><span><span>    </span><span>const</span><span> backgroundPositionY </span><span>=</span><span> </span><span>`</span><span>${</span><span>(</span><span>-</span><span>clientRect</span><span>.</span><span>y</span><span>)</span><span>.</span><span>toString</span><span>(</span><span>)</span><span>}</span><span>px</span><span>`</span><span>;</span><span></span></span><span><span>
</span></span><span><span>    element</span><span>.</span><span>style</span><span>.</span><span>backgroundPositionX </span><span>=</span><span> backgroundPositionX</span><span>;</span><span></span></span><span><span>    element</span><span>.</span><span>style</span><span>.</span><span>backgroundPositionY </span><span>=</span><span> backgroundPositionY</span><span>;</span><span></span></span><span><span>  </span><span>}</span><span></span></span><span><span></span><span>}</span><span>;</span><span></span></span><span><span>
</span></span><span><span></span></span><span></span><span></span><span></span><span></span><span><span></span></span><span><span></span><span>const</span><span> </span><span>initDataJSBackgroundAttachmentFixed</span><span> </span><span>=</span><span> </span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></span><span><span>  </span><span>requestAnimationFrame</span><span>(</span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></span><span><span>    </span><span>updateDataJSBackgroundAttachmentFixedElements</span><span>(</span><span>)</span><span>;</span><span></span></span><span><span>    </span><span>initDataJSBackgroundAttachmentFixed</span><span>(</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>}</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span><span>;</span><span></span></span><span><span>
</span></span><span><span></span><span>initDataJSBackgroundAttachmentFixed</span><span>(</span><span>)</span><span>;</span></span></pre></div></div><h3>Non-JavaScript Version</h3><p>This won't work on every platform.</p><h4>HTML</h4><div><pre>1
2
3</pre><div><pre><span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>glass</span><span>"</span><span>&gt;</span><span></span></span><span><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>drag-me</span><span>"</span><span>&gt;</span><span>Drag Me</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></span><span><span></span><span>&lt;/</span><span>div</span><span>&gt;</span></span></pre></div></div><h4>CSS</h4><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62</pre><div><pre><span><span>.glass</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>box-shadow</span><span>:</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>-0.75</span><span>px</span><span> </span><span>-0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.1</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset +</span><span>0.75</span><span>px</span><span> +</span><span>0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    </span><span>3</span><span>px</span><span> </span><span>2</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0.25</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>40</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>border-radius</span><span>:</span><span> </span><span>5</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>overflow</span><span>:</span><span> hidden</span><span>;</span><span></span></span><span><span></span><span>}</span><span></span></span><span><span>
</span></span><span><span></span><span>.glass</span><span>::before</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>content</span><span>:</span><span> </span><span>""</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>background-image</span><span>:</span><span> </span><span>url</span><span>(</span><span>path/to/light.png</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>background-repeat</span><span>:</span><span> repeat</span><span>;</span><span></span></span><span><span>  </span><span>background-size</span><span>:</span><span> </span><span>750</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>opacity</span><span>:</span><span> </span><span>0.075</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></span><span><span>  </span><span>bottom</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>  </span><span>left</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>  </span><span>right</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>  </span><span>top</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>z-index</span><span>:</span><span> </span><span>-1</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>background-attachment</span><span>:</span><span> fixed</span><span>;</span><span></span></span><span><span></span><span>}</span><span></span></span><span><span>
</span></span><span><span></span><span>.drag-me</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>display</span><span>:</span><span> flex</span><span>;</span><span></span></span><span><span>  </span><span>align-items</span><span>:</span><span> center</span><span>;</span><span></span></span><span><span>  </span><span>justify-content</span><span>:</span><span> center</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>height</span><span>:</span><span> </span><span>30</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>background-color</span><span>:</span><span> </span><span>rgba</span><span>(</span><span>12</span><span>,</span><span> </span><span>13</span><span>,</span><span> </span><span>14</span><span>,</span><span> </span><span>0.75</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div></div><p>Now, on with the show!</p><h3><span><span>backdrop-filter</span></span> Does Heavy Lifting</h3><p>The key to a good frosted glass effect is using a<!-- --> <a href="https://en.wikipedia.org/wiki/Gaussian_blur">Gaussian blur</a> <!-- -->to obscure the background, mimicing the look of a translucent screen. Most browsers and game engines efficiently approximate Gaussian blurs by using <a href="https://en.wikipedia.org/wiki/Box_blur">box blurs</a>.</p><p>In CSS, Gaussian blurs can be applied by using<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/backdrop-filter"><span><span>backdrop-filter</span></span></a> <!-- -->with the<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/blur"><span><span>blur</span></span></a> <!-- -->function. On iOS <span><span>-webpkit-backdrop-filter</span></span> is required unless you go deep into the settings where no man has ventured before (Settings -&gt; Safari -&gt; Advanced -&gt; Feature Flags -&gt; 'CSS Unprefixed Backdrop Filter'). Box blur is only recently supported by browsers. So Internet Explorer users can't experience these demos.</p><p>Putting this all together, our glass is a simple<!-- --> <span><span>div</span></span>:</p><p>We style the <span><span>div</span></span> with a <span><span>glass</span></span> <!-- -->class:</p><div><pre>1
2
3
4
5</pre><div><pre><span><span>.glass</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><p>This is the result. Drag it to see how the blur interacts with the background.</p><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h3>Adding Depth</h3><p>We've crafted a respectable piece of glass using<!-- --> <span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>;</span><span>)</span></span>. Many guides stop here, but there's room for improvement! Right now, our glass looks flat and boring. Real glass has an interesting visual character around its edges that we're missing. Let's bring that to life.</p><h4>Edges</h4><p>First we'll add edges to our glass. Others, like<!-- --> <a href="https://css.glass/">css.glass</a>, do this using<!-- --> <span><span>border</span><span>:</span><span> </span><span>1</span><span>px</span><span> solid</span></span>. Borders affect the element's size and how it interacts with children. I prefer using<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow"><span><span>box-shadow</span><span>:</span><span> inset</span></span></a>. By using <span><span>box-shadow</span><span>:</span><span> inset</span></span> the children seamlessly fill the content area of the glass without negative<!-- --> <span><span>margin</span></span>s or other magic. This allows them to behave like decals applied to the glass surface.</p><p><span><span>box-shadow</span></span> requires at least two size values and supports up to four. The first two define the shadow's x and y offsets. To mimic the edges of glass, we use two translucent white<!-- --> <span><span>box-shadow</span></span>s.</p><p>The first shadow represents the edge of the glass as seen from outside. In our example this appears along the bottom and left edges. The second shadow represents the edge as seen through the glass. In our example this appears along the top and right edges.</p><p>Since light diminishes when viewing the edge through the glass, the top and left edges are softer and more translucent compared to the bottom and right edges. This subtle difference creates the illusion that the glass is slightly elevated at the bottom-right corner.</p><div><pre>1
2
3
4
5
6
7
8
9
10
11</pre><div><pre><span><span>.glass</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>box-shadow</span><span>:</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>-0.75</span><span>px</span><span> </span><span>-0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.1</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset +</span><span>0.75</span><span>px</span><span> +</span><span>0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h4>Real Shadow</h4><p>Our glass now has some nice depth, but something still feels off—it has that uncanny appearance of a 3D object trapped in 2D space. To fix this, let's make it look physically raised from the background. Thankfully, there's a simple CSS trick for this: a traditional, dark<!-- --> <span><span>box-shadow</span></span>.</p><p>Let's add a <span><span>box-shadow</span></span> proportional to the size of our edges to create the desired lift effect:</p><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre><div><pre><span><span>.glass</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>box-shadow</span><span>:</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>-0.75</span><span>px</span><span> </span><span>-0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.1</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset +</span><span>0.75</span><span>px</span><span> +</span><span>0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    </span><span>3</span><span>px</span><span> </span><span>2</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0.25</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h3>Blending in Light</h3><p>Our glass has a nice depth and we're at a great stopping point. In comparison to<!-- --> <a href="https://freefrontend.com/css-glassmorphism/">other glass designs</a> <!-- -->we are already ahead of the curve—but there's more to do! Lets shift our focus to the interaction between glass and light.</p><h4>Simple Subsurface Scattering</h4><p>We'll start playing with light by introducing a<!-- --> <a href="https://en.wikipedia.org/wiki/Subsurface_scattering">subsurface scattering</a> <!-- -->approximation. Subsurface scattering refers to the way light disperses within a translucent surface. For glass, this is most noticable around the edges.</p><p>We will use <span><span>box-shadow</span><span>:</span><span> inset</span></span> to simulate this effect. This will add a subtle layer of light that penetrates slightly into the glass from the edges. To fully appreciate the effect, try dragging the glass over a darker area of the image.</p><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre><div><pre><span><span>.glass</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>box-shadow</span><span>:</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>-0.75</span><span>px</span><span> </span><span>-0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.1</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset +</span><span>0.75</span><span>px</span><span> +</span><span>0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    </span><span>3</span><span>px</span><span> </span><span>2</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0.25</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h4>More Subsurface Scattering</h4><p>As you can see, the subsurface scattering is subtle. Lets add another, deeper layer to enhance it further.</p><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre><div><pre><span><span>.glass</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>box-shadow</span><span>:</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>-0.75</span><span>px</span><span> </span><span>-0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.1</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset +</span><span>0.75</span><span>px</span><span> +</span><span>0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    </span><span>3</span><span>px</span><span> </span><span>2</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0.25</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>40</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h3>More Interesting Light</h3><p>We've done a good job <i>refracting</i> light from the background through our glass element. But another key characteristic of glass is its ability to <i>reflect</i> light off its surface. This reflective quality is the secret sauce to give our glass a distinctive look from other HTML glass examples.</p><h4>Rays of Light</h4><p>We'll blend in a image of light rays to create this effect. If you're interested in creating a similar image yourself, there are plenty of tutorials online. Here's one from<!-- --> <a href="https://www.youtube.com/watch?v=ZwgkK6PUkQ4">YouTube</a>, and here's<!-- --> <a href="https://phlearn.com/tutorial/light-rays-levels-photoshop/">a detailed textual walkthrough</a> <!-- -->if you prefer that approach. Alternatively, you can use download and use these light rays I created:</p><p><img src="https://www.tyleo.com/img/light-f71eeaec.png"></p><p>We'll explore a few ways to blend this image into the background. The first is to set it as the <span><span>background-image</span></span> of our glass element. Doing this directly on the element causes the<!-- --> <span><span>box-filter</span></span> to blur the<!-- --> <span><span>background-image</span></span>—we don't want that. Instead, we can apply the <span><span>background-image</span></span> to a pseudo child element using<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::before"><span><span>:</span><span>:</span><span>before</span></span></a>.</p><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre><div><pre><span><span>.glass</span><span>::before</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>content</span><span>:</span><span> </span><span>""</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>background-image</span><span>:</span><span> </span><span>url</span><span>(</span><span>path/to/light.png</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>background-repeat</span><span>:</span><span> repeat</span><span>;</span><span></span></span><span><span>  </span><span>background-size</span><span>:</span><span> </span><span>750</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>opacity</span><span>:</span><span> </span><span>0.075</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></span><span><span>  </span><span>bottom</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>  </span><span>left</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>  </span><span>right</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>  </span><span>top</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>z-index</span><span>:</span><span> </span><span>-1</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><p>Use the "Toggle Fill Space" option to most easily observe this effect.</p><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h4>Dynamic Light</h4><p>Our light rays are blending nicely, but they appear static on the glass. In reality, moving glass through light creates dynamic reflections as the light shifts across the glass surface. Unfortunately, replicating this effect across all browsers is challenging. To address this, we'll explore two solutions: a pure CSS approach that works on most platforms except mobile, and a CSS + JavaScript solution which works everywhere.</p><p>The CSS solution is satisfyingly simple. We just add<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/background-attachment"><span><span>background-attachement</span><span>:</span><span> fixed</span></span></a> <!-- -->to our <span><span>:</span><span>:</span><span>before</span></span> element.</p><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre><div><pre><span><span>.glass</span><span>::before</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>content</span><span>:</span><span> </span><span>""</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>background-image</span><span>:</span><span> </span><span>url</span><span>(</span><span>path/to/light.png</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>background-repeat</span><span>:</span><span> repeat</span><span>;</span><span></span></span><span><span>  </span><span>background-size</span><span>:</span><span> </span><span>750</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>opacity</span><span>:</span><span> </span><span>0.075</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></span><span><span>  </span><span>bottom</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>  </span><span>left</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>  </span><span>right</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>  </span><span>top</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>z-index</span><span>:</span><span> </span><span>-1</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>background-attachment</span><span>:</span><span> fixed</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><p>Use the "Toggle Fill Space" option and scroll or move the glass to observe the effect. Keep in mind that mobile support may be limited; we'll address this in the next example.</p><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h4>Cross-Platform Dynamic Light</h4><p>We'll use JavaScript to simulate<!-- --> <span><span>background-attachment</span><span>:</span><span> fixed</span></span> on all platforms <!-- -->:(<!-- -->. To achieve the effect, we'll dynamically adjust the<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/background-position"><span><span>background-position</span></span></a> <!-- -->as the image moves within the viewport. Since accessing<!-- --> <span><span>:</span><span>:</span><span>before</span></span> elements directly from JavaScript is inefficient, we'll use a <span><span>div</span></span> instead.</p><p>Our JavaScript will target elements with a specific<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes"><span><span>data-*</span></span> attribute</a>. We'll use the attribute<!-- --> <span><span>data-js-background-attachment-fixed</span></span>.</p><p>Putting this all together, we now have two <span><span>div</span></span>s:</p><div><pre>1
2
3</pre><div><pre><span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>glass</span><span>"</span><span>&gt;</span><span></span></span><span><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>light</span><span>"</span><span> </span><span>data-js-background-attachment-fixed</span><span>/&gt;</span><span></span></span><span><span></span><span>&lt;/</span><span>div</span><span>&gt;</span></span></pre></div></div><p>We style the new child <span><span>div</span></span> with a<!-- --> <span><span>light</span></span> class:</p><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre><div><pre><span><span>.light</span><span> </span><span>{</span><span></span></span><span><span>   </span><span></span></span><span><span>   </span><span>background-image</span><span>:</span><span> </span><span>url</span><span>(</span><span>path/to/light.png</span><span>)</span><span>;</span><span></span></span><span><span>   </span><span>background-repeat</span><span>:</span><span> repeat</span><span>;</span><span></span></span><span><span>   </span><span>background-size</span><span>:</span><span> </span><span>750</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>   </span><span></span></span><span><span>   </span><span>opacity</span><span>:</span><span> </span><span>0.075</span><span>;</span><span></span></span><span><span>
</span></span><span><span>   </span><span></span></span><span><span>   </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></span><span><span>   </span><span>bottom</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>   </span><span>left</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>   </span><span>right</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>   </span><span>top</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></span><span><span>
</span></span><span><span>   </span><span></span></span><span><span>   </span><span>z-index</span><span>:</span><span> </span><span>-1</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><p>This JavaScript updates our background:</p><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre><div><pre><span></span><span></span><span></span><span></span><span><span></span></span><span><span></span><span>const</span><span> </span><span>updateDataJSBackgroundAttachmentFixedElements</span><span> </span><span>=</span><span> </span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>const</span><span> elements </span><span>=</span><span> document</span><span>.</span><span>querySelectorAll</span><span>(</span><span></span></span><span><span>    </span><span>"[data-js-background-attachment-fixed]"</span><span>,</span><span></span></span><span><span>  </span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>for</span><span> </span><span>(</span><span>const</span><span> element </span><span>of</span><span> elements</span><span>)</span><span> </span><span>{</span><span></span></span><span><span>    </span><span></span></span><span><span>    </span><span>if</span><span> </span><span>(</span><span>!</span><span>(</span><span>element </span><span>instanceof</span><span> </span><span>HTMLElement</span><span>)</span><span>)</span><span> </span><span>continue</span><span>;</span><span></span></span><span><span>
</span></span><span><span>    </span><span></span></span><span><span>    </span><span>const</span><span> clientRect </span><span>=</span><span> element</span><span>.</span><span>getBoundingClientRect</span><span>(</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>    </span><span></span></span><span><span>    </span><span>const</span><span> backgroundPositionX </span><span>=</span><span> </span><span>`</span><span>${</span><span>(</span><span>-</span><span>clientRect</span><span>.</span><span>x</span><span>)</span><span>.</span><span>toString</span><span>(</span><span>)</span><span>}</span><span>px</span><span>`</span><span>;</span><span></span></span><span><span>    </span><span>const</span><span> backgroundPositionY </span><span>=</span><span> </span><span>`</span><span>${</span><span>(</span><span>-</span><span>clientRect</span><span>.</span><span>y</span><span>)</span><span>.</span><span>toString</span><span>(</span><span>)</span><span>}</span><span>px</span><span>`</span><span>;</span><span></span></span><span><span>
</span></span><span><span>    element</span><span>.</span><span>style</span><span>.</span><span>backgroundPositionX </span><span>=</span><span> backgroundPositionX</span><span>;</span><span></span></span><span><span>    element</span><span>.</span><span>style</span><span>.</span><span>backgroundPositionY </span><span>=</span><span> backgroundPositionY</span><span>;</span><span></span></span><span><span>  </span><span>}</span><span></span></span><span><span></span><span>}</span><span>;</span><span></span></span><span><span>
</span></span><span><span></span></span><span></span><span></span><span></span><span></span><span><span></span></span><span><span></span><span>const</span><span> </span><span>initDataJSBackgroundAttachmentFixed</span><span> </span><span>=</span><span> </span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></span><span><span>  </span><span>requestAnimationFrame</span><span>(</span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></span><span><span>    </span><span>updateDataJSBackgroundAttachmentFixedElements</span><span>(</span><span>)</span><span>;</span><span></span></span><span><span>    </span><span>initDataJSBackgroundAttachmentFixed</span><span>(</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>}</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span><span>;</span><span></span></span><span><span>
</span></span><span><span></span><span>initDataJSBackgroundAttachmentFixed</span><span>(</span><span>)</span><span>;</span></span></pre></div></div><p>Use the "Toggle Fill Space" option and scroll or move the glass to observe the effect.</p><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h3>Bits n' Bobs</h3><p>Now that our glass effect is complete, let's finalize it by adding the remaining CSS properties and HTML to fully replicate our initial example. That means beautiful rounded corners and extra elements to enhance the glass with color and text.</p><h4>Rounded Corners</h4><p>Rounding the corners of our glass is straightforward—simply use the<!-- --> <span><span>border-radius</span></span> property.</p><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre><div><pre><span><span>.glass</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>box-shadow</span><span>:</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>-0.75</span><span>px</span><span> </span><span>-0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.1</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset +</span><span>0.75</span><span>px</span><span> +</span><span>0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    </span><span>3</span><span>px</span><span> </span><span>2</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0.25</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>40</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>border-radius</span><span>:</span><span> </span><span>5</span><span>px</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h4>Colored Glass</h4><p>To color our glass, we'll add one final element on top, using a<!-- --> <span><span>background-color</span></span> with an alpha value for translucency. Since our glass has rounded corners, the child element will extend beyond the glass surface. To prevent this, we'll use<!-- --> <span><span>overflow</span><span>:</span><span> hidden</span></span> to clip it.</p><p>Here is our final HTML:</p><div><pre>1
2
3
4</pre><div><pre><span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>glass</span><span>"</span><span>&gt;</span><span></span></span><span><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>light</span><span>"</span><span> </span><span>data-js-background-attachment-fixed</span><span>/&gt;</span><span></span></span><span><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>"</span><span>drag-me</span><span>"</span><span>&gt;</span><span>Drag Me</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></span><span><span></span><span>&lt;/</span><span>div</span><span>&gt;</span></span></pre></div></div><p>And our final CSS for the <span><span>glass</span></span> and<!-- --> <span><span>drag-me</span></span> classes:</p><div><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre><div><pre><span><span>.glass</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>  </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>10</span><span>px</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span>box-shadow</span><span>:</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>-0.75</span><span>px</span><span> </span><span>-0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.1</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset +</span><span>0.75</span><span>px</span><span> +</span><span>0.5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    </span><span>3</span><span>px</span><span> </span><span>2</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0.25</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>10</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>,</span><span></span></span><span><span>    </span><span></span></span><span><span>    inset </span><span>0</span><span>px</span><span> </span><span>0</span><span>px</span><span> </span><span>40</span><span>px</span><span> </span><span>5</span><span>px</span><span> </span><span>rgba</span><span>(</span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>255</span><span>,</span><span> </span><span>0.025</span><span>)</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>border-radius</span><span>:</span><span> </span><span>5</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>overflow</span><span>:</span><span> hidden</span><span>;</span><span></span></span><span><span></span><span>}</span><span></span></span><span><span>
</span></span><span><span></span><span>.drag-me</span><span> </span><span>{</span><span></span></span><span><span>  </span><span></span></span><span><span>  </span><span>display</span><span>:</span><span> flex</span><span>;</span><span></span></span><span><span>  </span><span>align-items</span><span>:</span><span> center</span><span>;</span><span></span></span><span><span>  </span><span>justify-content</span><span>:</span><span> center</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>height</span><span>:</span><span> </span><span>30</span><span>px</span><span>;</span><span></span></span><span><span>
</span></span><span><span>  </span><span></span></span><span><span>  </span><span>background-color</span><span>:</span><span> </span><span>rgba</span><span>(</span><span>12</span><span>,</span><span> </span><span>13</span><span>,</span><span> </span><span>14</span><span>,</span><span> </span><span>0.75</span><span>)</span><span>;</span><span></span></span><span><span></span><span>}</span></span></pre></div></div><p>Rendering it out we see our old friend:</p><div data-click-drag-area="true"><p><img src="https://www.tyleo.com/img/moon-be3d2442.png"></p></div><h3>Thanks for Staying!</h3><p>Thanks for following along as we created an amazing glass effect! I hope you enjoyed the journey. For a quick way to copy all the assets and code, don't forget to check out the<!-- --> <b><a href="#final-recipe-lookahead">Final Recipe Lookahead</a></b> <!-- -->section near the beginning.</p><a href="https://news.ycombinator.com/item?id=42225481"></a></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ice base melt revealed by multibeam imagery of an Antarctic ice shelf (106 pts)]]></title>
            <link>https://www.science.org/doi/10.1126/sciadv.adn9188</link>
            <guid>42224719</guid>
            <pubDate>Sat, 23 Nov 2024 23:30:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.science.org/doi/10.1126/sciadv.adn9188">https://www.science.org/doi/10.1126/sciadv.adn9188</a>, See on <a href="https://news.ycombinator.com/item?id=42224719">Hacker News</a></p>
Couldn't get https://www.science.org/doi/10.1126/sciadv.adn9188: Error: Request failed with status code 403]]></description>
        </item>
    </channel>
</rss>