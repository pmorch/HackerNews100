<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Thu, 19 Sep 2024 17:30:06 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Glass Antenna Turns windows into 5G Base Stations (141 pts)]]></title>
            <link>https://spectrum.ieee.org/5g-antenna-transparent-window</link>
            <guid>41592552</guid>
            <pubDate>Thu, 19 Sep 2024 14:53:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://spectrum.ieee.org/5g-antenna-transparent-window">https://spectrum.ieee.org/5g-antenna-transparent-window</a>, See on <a href="https://news.ycombinator.com/item?id=41592552">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-headline="Glass Antenna Turns Windows Into 5G Base Stations"><p>Since <a href="https://spectrum.ieee.org/tag/5g">5G</a> began its rollout <a href="https://www.reuters.com/article/technology/who-was-first-to-launch-5g-depends-who-you-ask-idUSKCN1RH1V1/" rel="noopener noreferrer" target="_blank">in 2018 or 2019</a>, fifth-generation wireless networks have spread across the globe <a href="https://www.nperf.com/en/map/5g" target="_blank">to cover hundreds of millions of users</a>. But while it offers <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8747744/" target="_blank">lower latency</a> than precursor networks, 5G also requires more base stations. To avoid installing unsightly equipment on more and more shared spaces, Japanese companies are developing transparent glass antennas that allow windows to serve as base stations that can be shared by several carriers.<br></p><p>Because 5G networks <a href="https://www.techtarget.com/searchnetworking/feature/A-deep-dive-into-the-differences-between-4G-and-5G-networks" target="_blank">include spectrum</a> comprising higher frequencies than 4G, base stations for 5G networks serve a smaller coverage footprint. Which means more base stations are needed compared to 4G. Due to a lack of installation spots and the high cost of rolling out 5G networks, carriers in Japan have been sharing mobile infrastructure.</p><p>Last month the Tokyo-based communications company <a href="https://en.jtower.co.jp/" rel="noopener noreferrer" target="_blank">JTower</a> announced the deployment of the new glass antenna, created in part by <a href="https://en.wikipedia.org/wiki/AGC_Inc." target="_blank">glassmaker AGC</a> (one of the world‚Äôs largest) and the mobile carrier <a href="https://en.wikipedia.org/wiki/NTT_Docomo" target="_blank">NTT Docomo</a>. The first was installed on a window in Tokyo‚Äôs <a href="https://en.wikipedia.org/wiki/Shinjuku" target="_blank">Shinjuku district</a>. </p><p>The product is ‚Äúthe world‚Äôs first antenna that turns a window into a base station that can be attached to a building window inside and turn the outdoors into a service area without spoiling the cityscape or the exterior appearance of the building,‚Äù says Shota Ochiai, a marketing manager at AGC.</p><p><a href="https://www.gov-online.go.jp/pdf/hlj/20191001/24-25.pdf" target="_blank">NTT Docomo reports</a> that it uses transparent conductive materials as the basis for its antenna, sandwiching the conductive material along with a transparent resin, the kind used in laminated windshields, in between two sheets of glass. </p><p>‚ÄúI don‚Äôt think the idea for using transparent conductive materials as an antenna existed before,‚Äù said AGC‚Äôs Kentaro Oka in a company statement. ‚ÄúThe durability of the antenna was significantly increased by placing the conductive materials between glass.‚Äù</p><p>The transparent antenna can be engineered according to the thickness of the glass to reduce the attenuation and reflection of the radio signals being absorbed and emitted by the window-sized device. ‚ÄúThe glass antenna uses our proprietary technology to smooth out the disruption in the direction of radio waves when they pass through a window,‚Äù says Ochia.</p><h3>A brief history of the window antenna<br></h3><p>Branded <a href="https://wavebyagc.com/en/waveantenna/" target="_blank">WAVEANTENNA</a>, the antenna is installed on the interior surface of windows. Apart perhaps from its cabling, the WAVEANTENNA is an otherwise inconspicuous piece of equipment that is often tucked out of sight, placed near the top or otherwise at the edges of a window.</p><p> It is compatible with frequencies in the <a href="https://en.wikipedia.org/wiki/5G_NR_frequency_bands" target="_blank">5G Sub6 band</a>‚Äîmeaning signals that are less than 6 gigahertz (GHz). <a href="https://www.sannytelecom.com/what-is-a-5g-sub-6-ghz-antenna/" target="_blank">Sub6 antennas</a> represent critical portions of a 5G deployment, as their lower frequency ranges penetrate barriers like walls and buildings better than the substantially higher-bandwidth <a href="https://www.ericsson.com/en/reports-and-papers/further-insights/leveraging-the-potential-of-5g-millimeter-wave" target="_blank">millimeter-wave portions of the 5G spectrum</a>. </p><p>An earlier version of the product was launched in 2020, while a version that could handle sharing by multiple cell networks was introduced last year, according to AGC. The company says its antenna is optimized for frequencies between 3.7 and 4.5 GHz bands, which still allows for substantial bandwidth‚Äîalbeit not comparable with what an ideal millimeter-wave 5G deployment could reach. (Millimeter waves can deliver typically between 10 and 50 GHz of bandwidth.)</p><p>The glass antenna can help expand 5G coverage as infrastructure sharing will become more important to carriers, AGC says. Besides increasing the number of locations for base stations, the device makes it easier to select the appropriate installation height, according to Ochiai.</p><p>AGC has also applied 5G glass antennas to automobiles, where they can help reduce dropped signals. The company reports that users include <a href="https://halo.car/" target="_blank">Halo.Car</a>, an on-demand EV rental service in Las Vegas that relies on high-speed networks for remote drivers to deliver cars to customers.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Pivotal Tracker will shut down (195 pts)]]></title>
            <link>https://www.pivotaltracker.com/blog/2024-09-18-end-of-life</link>
            <guid>41591622</guid>
            <pubDate>Thu, 19 Sep 2024 13:25:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.pivotaltracker.com/blog/2024-09-18-end-of-life">https://www.pivotaltracker.com/blog/2024-09-18-end-of-life</a>, See on <a href="https://news.ycombinator.com/item?id=41591622">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-swiftype-name="body" data-swiftype-type="text">
          <p>The VMware Tanzu division is announcing the end-of-life (EOL) for the Pivotal Tracker offering, effective April 30, 2025.</p>

<p>Customers with active Pivotal Tracker subscriptions may continue to use the offering through April 30, 2025, after which time the offering will sunset. You can export your data any time before April 30, 2025.</p>

<p>It is recommended to migrate any needed data out of Pivotal Tracker on a timely basis. Please review the instructions to export data <a href="https://www.pivotaltracker.com/help/articles/csv_import_export/">here</a>. If you have any issue in migrating data, <a href="mailto:support@pivotaltracker.com">raise a support ticket</a>. The VMware Tanzu division will not provide any support for migrating data beyond April 30, 2025.</p>

<p>Thank you,
VMware Tanzu Division</p>

<hr>
<h2 id="faq">FAQ</h2>

<h3 id="1-what-accounts-does-this-affect">1. What accounts does this affect?</h3>
<ul>
  <li>All accounts, whether under a free, sponsored (academic or non-profit), paid monthly/annual, or Enterprise subscription plan. They will remain available until April 30, 2025. No further renewals or transactions will take place.</li>
</ul>

<h3 id="2-how-do-i-download-my-project-data">2. How do I download my project data?</h3>
<ul>
  <li>Please see <a href="https://www.pivotaltracker.com/help/articles/csv_import_export/">our CSV export Help Center article</a> for assistance with exporting your project stories, epics, history and file attachments. We will be adding additional guidance to our Help Center over the next few months based on any new information we receive as well as the feedback we receive from you.</li>
</ul>

<h3 id="3-will-i-have-access-to-my-past-invoices">3. Will I have access to my past invoices?</h3>
<ul>
  <li>Yes, your past invoices will remain available on the existing <a href="https://www.pivotaltracker.com/help/articles/managing_your_account/#the-plans--billing-page">Plans &amp; Billing page</a>.</li>
</ul>

<h3 id="4-will-it-be-possible-to-create-new-users-or-accounts">4. Will it be possible to create new users or accounts?</h3>
<ul>
  <li>It will no longer be possible to sign up for Tracker without an invite or create new accounts. However, it will still be possible to invite new users to your account/projects, as long as you don‚Äôt exceed your collaborator limit.</li>
</ul>

        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Chili. Rust port of Spice, a low-overhead parallelization library (139 pts)]]></title>
            <link>https://github.com/dragostis/chili</link>
            <guid>41591449</guid>
            <pubDate>Thu, 19 Sep 2024 13:04:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/dragostis/chili">https://github.com/dragostis/chili</a>, See on <a href="https://news.ycombinator.com/item?id=41591449">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">chili</h2><a id="user-content-chili" aria-label="Permalink: chili" href="#chili"></a></p>
<p dir="auto"><a href="https://crates.io/crates/chili" rel="nofollow"><img src="https://camo.githubusercontent.com/c46860cb575bafe36a6be9f31657ea7284156b402dacac251c2e11e590fb8d2f/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f6368696c692e737667" alt="Crates.io" data-canonical-src="https://img.shields.io/crates/v/chili.svg"></a>
<a href="https://docs.rs/chili" rel="nofollow"><img src="https://camo.githubusercontent.com/ba01867190b37ab33b8213bf36d07e90c21058c078ed3f5dd262694f7b6bd0b8/68747470733a2f2f646f63732e72732f6368696c692f62616467652e737667" alt="Docs" data-canonical-src="https://docs.rs/chili/badge.svg"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Rust port of <a href="https://github.com/judofyr/spice">Spice</a>, a low-overhead parallelization library</h2><a id="user-content-rust-port-of-spice-a-low-overhead-parallelization-library" aria-label="Permalink: Rust port of Spice, a low-overhead parallelization library" href="#rust-port-of-spice-a-low-overhead-parallelization-library"></a></p>
<p dir="auto">Very low-overhead parallelization primitive, almost identical to
<a href="https://docs.rs/rayon/latest/rayon/fn.join.html" rel="nofollow"><code>rayon::join</code></a>. At any fork point during computation, it <em>may</em> run the two
passed closures in parallel.</p>
<p dir="auto">It works best in cases where there are many small computations and where it is
expensive to estimate how many are left on the current branch in order to stop trying to share work across threads.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Example</h2><a id="user-content-example" aria-label="Permalink: Example" href="#example"></a></p>
<p dir="auto">The following example sums up all nodes in a binary tree in parallel.</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn sum(node: &amp;Node, scope: &amp;mut Scope<'_>) -> u64 {
    let (left, right) = scope.join(
        |s| node.left.as_deref().map(|n| sum(n, s)).unwrap_or_default(),
        |s| node.right.as_deref().map(|n| sum(n, s)).unwrap_or_default(),
    );

    node.val + left + right
}"><pre><span>fn</span> <span>sum</span><span>(</span><span>node</span><span>:</span> <span>&amp;</span><span>Node</span><span>,</span> <span>scope</span><span>:</span> <span>&amp;</span><span>mut</span> <span>Scope</span><span>&lt;</span><span>'</span>_<span>&gt;</span><span>)</span> -&gt; <span>u64</span> <span>{</span>
    <span>let</span> <span>(</span>left<span>,</span> right<span>)</span> = scope<span>.</span><span>join</span><span>(</span>
        |s| node<span>.</span><span>left</span><span>.</span><span>as_deref</span><span>(</span><span>)</span><span>.</span><span>map</span><span>(</span>|n| <span>sum</span><span>(</span>n<span>,</span> s<span>)</span><span>)</span><span>.</span><span>unwrap_or_default</span><span>(</span><span>)</span><span>,</span>
        |s| node<span>.</span><span>right</span><span>.</span><span>as_deref</span><span>(</span><span>)</span><span>.</span><span>map</span><span>(</span>|n| <span>sum</span><span>(</span>n<span>,</span> s<span>)</span><span>)</span><span>.</span><span>unwrap_or_default</span><span>(</span><span>)</span><span>,</span>
    <span>)</span><span>;</span>

    node<span>.</span><span>val</span> + left + right
<span>}</span></pre></div>
<p dir="auto">This is the ideal example since per-node computation is very cheap and the
nodes don't keep track of how many descendants are left.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Benchmarks</h2><a id="user-content-benchmarks" aria-label="Permalink: Benchmarks" href="#benchmarks"></a></p>
<p dir="auto">The following benchmarks measure the time it takes to sum up all the values in
a balanced binary tree with varying number of nodes.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">AMD Ryzen 7 4800HS (8 cores)</h3><a id="user-content-amd-ryzen-7-4800hs-8-cores" aria-label="Permalink: AMD Ryzen 7 4800HS (8 cores)" href="#amd-ryzen-7-4800hs-8-cores"></a></p>
<p dir="auto">While the improvement over the baseline in the 134M nodes case is close to the
theoretical maximum, it's worth noting that the actual time per node is 0.8ns
vs. a theoretical 1.8 / 8 = 0.2ns, if we're to compare against the 1K nodes
case.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Number of nodes</th>
<th>Baseline</th>
<th>Rayon</th>
<th>chili</th>
<th>Baseline / chili</th>
</tr>
</thead>
<tbody>
<tr>
<td>1023</td>
<td>1.8 ¬µs</td>
<td>51.1 ¬µs</td>
<td>3.4 ¬µs</td>
<td><strong>x0.53</strong></td>
</tr>
<tr>
<td>16777215</td>
<td>94.4 ms</td>
<td>58.1 ms</td>
<td>13.6 ms</td>
<td><strong>x6.94</strong></td>
</tr>
<tr>
<td>134217727</td>
<td>797.5 ms</td>
<td>497.2 ms</td>
<td>101.8 ms</td>
<td><strong>x7.83</strong></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h3 tabindex="-1" dir="auto">Apple M1 (8 cores)</h3><a id="user-content-apple-m1-8-cores" aria-label="Permalink: Apple M1 (8 cores)" href="#apple-m1-8-cores"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Number of nodes</th>
<th>Baseline</th>
<th>Rayon</th>
<th>chili</th>
<th>Baseline / chili</th>
</tr>
</thead>
<tbody>
<tr>
<td>1023</td>
<td>1.6 ¬µs</td>
<td>29.2 ¬µs</td>
<td>3.5 ¬µs</td>
<td><strong>x0.46</strong></td>
</tr>
<tr>
<td>16777215</td>
<td>39.4 ms</td>
<td>40.5 ms</td>
<td>11.2 ms</td>
<td><strong>x3.51</strong></td>
</tr>
<tr>
<td>67108863</td>
<td>156.5 ms</td>
<td>167.1 ms</td>
<td>44.3 ms</td>
<td><strong>x3.53</strong></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h3 tabindex="-1" dir="auto">chili overhead on AMD Ryzen 7 4800HS (8 cores)</h3><a id="user-content-chili-overhead-on-amd-ryzen-7-4800hs-8-cores" aria-label="Permalink: chili overhead on AMD Ryzen 7 4800HS (8 cores)" href="#chili-overhead-on-amd-ryzen-7-4800hs-8-cores"></a></p>
<p dir="auto">The overhead in the 1K nodes case remains approximately constant with respect
to the number of threads.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Number of nodes</th>
<th>Baseline</th>
<th>1 thread</th>
<th>2 threads</th>
<th>4 threads</th>
<th>8 threads</th>
</tr>
</thead>
<tbody>
<tr>
<td>1023</td>
<td>1.8 ns</td>
<td>3.5 ns</td>
<td>3.5 ns</td>
<td>3.5 ns</td>
<td>3.5 ns</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: A CLI tool I made to self-host any app with two commands on a VPS (127 pts)]]></title>
            <link>https://github.com/MightyMoud/sidekick</link>
            <guid>41591018</guid>
            <pubDate>Thu, 19 Sep 2024 12:17:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/MightyMoud/sidekick">https://github.com/MightyMoud/sidekick</a>, See on <a href="https://news.ycombinator.com/item?id=41591018">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><div dir="auto">
  <p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/d8090e74ca92107b4fedd753fbb0acca5d706d94519efd3895c318d00dc8537b/68747470733a2f2f656d6f6a692e6172616e6a612e636f6d2f7374617469632f656d6f6a692d646174612f696d672d6170706c652d3136302f31663931632d31663366622e706e67"><img width="110px" src="https://camo.githubusercontent.com/d8090e74ca92107b4fedd753fbb0acca5d706d94519efd3895c318d00dc8537b/68747470733a2f2f656d6f6a692e6172616e6a612e636f6d2f7374617469632f656d6f6a692d646174612f696d672d6170706c652d3136302f31663931632d31663366622e706e67" data-canonical-src="https://emoji.aranja.com/static/emoji-data/img-apple-160/1f91c-1f3fb.png"></a>
    <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/1ddaacf5c40df0226d02f96a3fed5b0bfacb5f36b13c9b730c9908555ed96854/68747470733a2f2f656d6f6a692e6172616e6a612e636f6d2f7374617469632f656d6f6a692d646174612f696d672d6170706c652d3136302f31663931622d31663366622e706e67"><img width="110px" src="https://camo.githubusercontent.com/1ddaacf5c40df0226d02f96a3fed5b0bfacb5f36b13c9b730c9908555ed96854/68747470733a2f2f656d6f6a692e6172616e6a612e636f6d2f7374617469632f656d6f6a692d646174612f696d672d6170706c652d3136302f31663931622d31663366622e706e67" data-canonical-src="https://emoji.aranja.com/static/emoji-data/img-apple-160/1f91b-1f3fb.png"></a>
  </p>
<p dir="auto">Bare metal to production ready in mins; imagine fly.io on your VPS</p>
  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/hero.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/hero.png"></a>
  </p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/87f8359efd18081619ea010935d720debfc9542a50cdddfcd83735d1fcac5844/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6d69676874796d6f75642f736964656b69636b"><img src="https://camo.githubusercontent.com/87f8359efd18081619ea010935d720debfc9542a50cdddfcd83735d1fcac5844/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6d69676874796d6f75642f736964656b69636b" alt="GitHub" data-canonical-src="https://img.shields.io/github/license/mightymoud/sidekick"></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/36eff5114844440c8f3bffa3606482432197529c22fa5286a92ae0c7410862e1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f676f2d6d6f642f676f2d76657273696f6e2f6d69676874796d6f75642f736964656b69636b"><img src="https://camo.githubusercontent.com/36eff5114844440c8f3bffa3606482432197529c22fa5286a92ae0c7410862e1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f676f2d6d6f642f676f2d76657273696f6e2f6d69676874796d6f75642f736964656b69636b" alt="GitHub go.mod Go version" data-canonical-src="https://img.shields.io/github/go-mod/go-version/mightymoud/sidekick"></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/e8963bc326d3337b2226323a6e01c069c998a6a512d1d123343cf8fc170483f9/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f7461672f6d69676874796d6f75642f736964656b69636b"><img src="https://camo.githubusercontent.com/e8963bc326d3337b2226323a6e01c069c998a6a512d1d123343cf8fc170483f9/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f7461672f6d69676874796d6f75642f736964656b69636b" alt="GitHub tag (latest SemVer)" data-canonical-src="https://img.shields.io/github/v/tag/mightymoud/sidekick"></a></p>
</div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Features</h2><a id="user-content-features" aria-label="Permalink: Features" href="#features"></a></p>
<ul dir="auto">
<li>üëç One command VPS setup (docker, traefik, sops, age)</li>
<li>üíª deploy any application from a dockerfile</li>
<li>‚úä Zero downtime deployment</li>
<li>üåè High availbility and load balancing</li>
<li>üîí Zero config SSL Certs</li>
<li>‚úÖ Connect domains or use sslip.io out of the box</li>
<li>üî• Built in integration with SOPS</li>
<li>üõ∏ Escape the vendorlock forever</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Motivation</h2><a id="user-content-motivation" aria-label="Permalink: Motivation" href="#motivation"></a></p>
<p dir="auto">I'm tired of the complexity involved in hosting my side projects. While some platforms, like Fly.io, stand out in the crowded field of Heroku replacements, I believe a simple VPS can be just as effective. That's why I created Sidekick: to make hosting side projects as straightforward, affordable, and production-ready as possible. You'll be surprised how much traffic a $8/month instance on DigitalOcean can handle.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<p dir="auto">With GO installed on your system you need to run</p>
<div dir="auto" data-snippet-clipboard-copy-content="go install github.com/mightymoud/sidekick@latest"><pre>go install github.com/mightymoud/sidekick@latest</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<p dir="auto">Sidekick helps you along all the steps of deployment on your VPS. From basic setup to zero downtime deploys, we got you! ‚úä</p>
<p dir="auto">First you need a VPS with Ubuntu LTS. I recommend DigitalOcean. Hetzner also gets very good reviews. You can host your own silicon too. As long as you have a public IP address you can use Sidekick.</p>
<p dir="auto">Just make sure the following is true:</p>
<ul dir="auto">
<li>VPS running Ubuntu - LTS recommended</li>
<li>SSH Public Key availble on your machine to login to VPS.</li>
</ul>
<p dir="auto">That's it!</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">VPS Setup</h3><a id="user-content-vps-setup" aria-label="Permalink: VPS Setup" href="#vps-setup"></a></p>
  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/init.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/init.png"></a>
  </p>
<p dir="auto">First you need to setup your VPS. To do this you need to run:</p>

<p dir="auto">Then you need to enter the following:</p>
<ul dir="auto">
<li>IP Address of your VPS</li>
<li>An email address to use for setting up SSL certs</li>
<li>Docker registery to host your docker images - defaults to <code>docker.io</code></li>
<li>Docker username in the said registery</li>
<li>Confirm you are currently logged in to that said registery with the username - This is needed to be able to push images on your behalf</li>
</ul>
<p dir="auto">After that Sidekick will setup many things on your VPS - Usually takes around 2 mins</p>
<details>
  <summary>What does Sidekick do when I run this command</summary>
<ul dir="auto">
<li>Login with <code>root</code> user</li>
<li>Make a new user <code>sidekick</code> and grant sudo access</li>
<li>Logout from <code>root</code> and login with <code>sidekick</code></li>
<li>Update and upgrade your Ubuntu system</li>
<li>Install <code>sops</code> and copy over the public key to your sidekick config file</li>
<li>Use <code>age</code> to make secret and public keys to use later for encrypting env file.</li>
<li>Send public key back to host machine to be used later for encryption</li>
<li>Install Docker</li>
<li>Setup Traefik and SSL certs on your VPS</li>
</ul>
</details>
<p dir="auto"><h3 tabindex="-1" dir="auto">Launch a new application</h3><a id="user-content-launch-a-new-application" aria-label="Permalink: Launch a new application" href="#launch-a-new-application"></a></p>
  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/launch.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/launch.png"></a>
  </p>
<p dir="auto">In your application folder, make sure you have a working <code>Dockerfile</code> that you can build and run. Also make sure you know at which port your app is expecting to recieve traffic.</p>
<p dir="auto">Then run:</p>

<p dir="auto">Then you need to enter the following:</p>
<ul dir="auto">
<li>Url friendly name of your app - if you opt to use <code>sslip.io</code> domain for testing this would be your subdomain</li>
<li>HTTP exposed port for your app to get requests - Sidekick will scan your docker file to try to extract this number and default it.</li>
<li>Domain at which you want this application to be reachable - If you choose your own domain make sure to point the domain to your VPS IP address; otherwise we default to <code>sslip.io</code> domain so you can play around.</li>
<li>If you have any <code>env</code> file with secrets in it. Sidekick will attempt to find <code>.env</code> file in the root of your folder. Sidekick will use <code>sops</code> to encrypt your env file and inject the values securely at run time.</li>
</ul>
<p dir="auto">Should take around 2 more mins to be able to visit your application live on the web if all goes well.</p>
<details>
  <summary>What does Sidekick do when I run this command</summary>
<ul dir="auto">
<li>Build your docker image locally for linux</li>
<li>Push the docker image to the registery</li>
<li>Encrpt your env file, if available and push it to your VPS</li>
<li>Use sops to dycrpt your env file and start and env with the values injected</li>
<li>Spin up your docker image using docker compose and route traffic to it using Traefik on the specified port</li>
</ul>
</details>
<p dir="auto"><h3 tabindex="-1" dir="auto">Deploy a new version</h3><a id="user-content-deploy-a-new-version" aria-label="Permalink: Deploy a new version" href="#deploy-a-new-version"></a></p>
  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/deploy.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/deploy.png"></a>
  </p>
With your application deployed, it's super simple to redeploy a new version.
<p dir="auto">At any point any time you need to only run:</p>

<p dir="auto">That's all. It won't take long, we use cache from earlier docker images, your latest version should be up soon.
Sidekick will deploy the new version without any downtime - you can see more in the source code.
This command will also do a couple of things behind the scenes. You can check that below</p>
<details>
  <summary>What does Sidekick do when I run this command</summary>
<ul dir="auto">
<li>Build your docker image locally for linux</li>
<li>Compare your latest env file checksum for changes from last time you deployed your application.</li>
<li>If your env file has changed, sidekick will re encrypt it and replace the encrypte.env file on your server.</li>
<li>Deploy the new version with zero downtime deploys so you don't miss any traffic.</li>
</ul>
</details>
<p dir="auto"><h3 tabindex="-1" dir="auto">Deploy a preview environment</h3><a id="user-content-deploy-a-preview-environment" aria-label="Permalink: Deploy a preview environment" href="#deploy-a-preview-environment"></a></p>
  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/preview.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/preview.png"></a>
  </p>
Sidekick also allows you to deploy preview envs at any point from your application. Preview envs are attached to your commit hash and require a clean git tree before you can initiate them. 
Once you have a clean git tree, you can run the following command to deploy a preview environment:

<details>
  <summary>What does Sidekick do when I run this command</summary>
<ul dir="auto">
<li>Build your docker image locally for linux</li>
<li>Tag the new image with the short checksum of your git commit</li>
<li>Compare your latest env file checksum for changes from last time you deployed your application.</li>
<li>If your env file has changed, sidekick will re encrypt it and replace the encrypte.env file on your server.</li>
<li>Add a new folder inside your app folder called "preview" where Sidekick will store and manage all your preview deployments</li>
<li>Deploy a new version of your app reachable on a short hash based subdomain</li>
</ul>
</details>
<p dir="auto"><h2 tabindex="-1" dir="auto">Inspiration</h2><a id="user-content-inspiration" aria-label="Permalink: Inspiration" href="#inspiration"></a></p>
<ul dir="auto">
<li><a href="https://fly.io/" rel="nofollow">https://fly.io/</a></li>
<li><a href="https://kamal-deploy.org/" rel="nofollow">https://kamal-deploy.org/</a></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Vision</h2><a id="user-content-vision" aria-label="Permalink: Vision" href="#vision"></a></p>
<p dir="auto">Simple CLI tool that can help you:</p>
<ul dir="auto">
<li>Setup your VPS</li>
<li>Deploy all your side projects on a single VPS</li>
<li>Load balance multiple container per project</li>
<li>Deploy new versions with Zero downtime</li>
<li>Deploy preview environments with ease</li>
<li>Manage env secrets in a secure way</li>
<li>Connect any number of domains and subdomains to your projects with ease</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Remove sidekick</h2><a id="user-content-remove-sidekick" aria-label="Permalink: Remove sidekick" href="#remove-sidekick"></a></p>
<p dir="auto">You can easily remove sidekick if you hate it.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// Mac/Linux
cd $HOME/go/bin
rm sidekick
cd ~/.config
rm -rf sidekick

// Win
cd %USERPROFILE%\go\bin
del sidekick.exe

// Powershell
cd $HOME\go\bin
Remove-Item sidekick.exe"><pre>// Mac/Linux
<span>cd</span> <span>$HOME</span>/go/bin
rm sidekick
<span>cd</span> <span>~</span>/.config
rm -rf sidekick

// Win
<span>cd</span> %USERPROFILE%<span>\g</span>o<span>\b</span>in
del sidekick.exe

// Powershell
<span>cd</span> <span>$HOME</span><span>\g</span>o<span>\b</span>in
Remove-Item sidekick.exe</pre></div>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Roadmap</h2><a id="user-content-roadmap" aria-label="Permalink: Roadmap" href="#roadmap"></a></p>
<p dir="auto">I still have a couple more feature I want to add here. Also considering some of those to be on a paid version.</p>
<ul dir="auto">
<li>Preview env deployments</li>
<li>A way to deploy more complicated projects defined in docker compose file</li>
<li>Better zero downtime deploys with watchtower</li>
<li>Firewall setup</li>
<li>Managing multiple VPSs</li>
<li>Easy way to deploy databases with one command</li>
<li>TUI for monitoring your VPS</li>
<li>Streaming down compose logs - ala <code>fly logs</code></li>
<li>Auto deploy on image push - to work with CICD better</li>
</ul>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[US health system ranks last compared with peer nations, report finds ‚Äì US news (130 pts)]]></title>
            <link>https://www.theguardian.com/us-news/2024/sep/18/american-health-system-ranks-last</link>
            <guid>41588717</guid>
            <pubDate>Thu, 19 Sep 2024 05:08:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/us-news/2024/sep/18/american-health-system-ranks-last">https://www.theguardian.com/us-news/2024/sep/18/american-health-system-ranks-last</a>, See on <a href="https://news.ycombinator.com/item?id=41588717">Hacker News</a></p>
Couldn't get https://www.theguardian.com/us-news/2024/sep/18/american-health-system-ranks-last: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla has fired their Chief Product Officer after cancer diagnosis (167 pts)]]></title>
            <link>https://mastodon.social/@stevetex/113162099798398758</link>
            <guid>41588667</guid>
            <pubDate>Thu, 19 Sep 2024 05:00:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mastodon.social/@stevetex/113162099798398758">https://mastodon.social/@stevetex/113162099798398758</a>, See on <a href="https://news.ycombinator.com/item?id=41588667">Hacker News</a></p>
Couldn't get https://mastodon.social/@stevetex/113162099798398758: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Ask HN: My son might be blind ‚Äì how to best support (279 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=41588200</link>
            <guid>41588200</guid>
            <pubDate>Thu, 19 Sep 2024 03:27:43 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=41588200">Hacker News</a></p>
Couldn't get https://news.ycombinator.com/item?id=41588200: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Nintendo Files Suit for Infringement of Patent Rights Against Pocketpair, Inc (283 pts)]]></title>
            <link>https://www.nintendo.co.jp/corporate/release/en/2024/240919.html</link>
            <guid>41587214</guid>
            <pubDate>Thu, 19 Sep 2024 00:37:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nintendo.co.jp/corporate/release/en/2024/240919.html">https://www.nintendo.co.jp/corporate/release/en/2024/240919.html</a>, See on <a href="https://news.ycombinator.com/item?id=41587214">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="single_frame">
        <div>
          <p>September 19, 2024</p>
          <p>To Whom It May Concern</p>
          <p>
            The Pok√©mon Company<br>
            Nintendo Co., Ltd.
          </p>
        </div>
      
      <div>

        <p>
          Nintendo Co., Ltd. (HQ: Kyoto, Minami-ku, Japan; Representative Director and President: Shuntaro Furukawa, ‚ÄúNintendo‚Äù hereafter), together with The Pok√©mon Company, filed a patent infringement lawsuit in the Tokyo District Court against Pocketpair, Inc. (HQ: 2-10-2 Higashigotanda, Shinagawa-ku, Tokyo, ‚ÄúDefendant‚Äù hereafter) on September 18, 2024.
        </p>
        <p>
          This lawsuit seeks an injunction against infringement and compensation for damages on the grounds that <i>Palworld</i>, a game developed and released by the Defendant, infringes multiple patent rights.
        </p>
        <p>
          Nintendo will continue to take necessary actions against any infringement of its intellectual property rights including the Nintendo brand itself, to protect the intellectual properties it has worked hard to establish over the years.
        </p>
      </div>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Lichess: Post-Mortem of Our Longest Downtime (122 pts)]]></title>
            <link>https://lichess.org/@/Lichess/blog/post-mortem-of-our-longest-downtime/XAgG7jbd</link>
            <guid>41586579</guid>
            <pubDate>Wed, 18 Sep 2024 23:02:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://lichess.org/@/Lichess/blog/post-mortem-of-our-longest-downtime/XAgG7jbd">https://lichess.org/@/Lichess/blog/post-mortem-of-our-longest-downtime/XAgG7jbd</a>, See on <a href="https://news.ycombinator.com/item?id=41586579">Hacker News</a></p>
<div id="readability-page-1" class="page"><p><strong>From 14:54 UTC on the 12th September until 01:33 UTC on the 13th September, Lichess experienced the longest downtime in its history.</strong></p><div><p>Surprisingly, this downtime was even longer than that time the datacenter where some of our servers were burned down.</p>
<p>We‚Äôre a community platform, which is solely funded by our community through small charitable donations ‚Äî so you, as our beneficiaries and stakeholders, who support us and encourage us ‚Äî deserve to get clarification on what happened, what we did, and what we‚Äôll do in the future to mitigate this risk again.</p>
<h2><a href="#what-happened" id="what-happened"></a>What happened</h2>
<p>Essentially, our main server (known as manta) lost connection to our private network at 14:54 UTC. Thibault, our founder and main developer, and Lucas, our charity President and main system administrator, immediately began investigating.</p>
<p>Within minutes, they had both attempted our usual failsafes and identified the cause was likely a physical hardware issue in our provider‚Äôs (OVH) data centre. After that issue was finally fixed by OVH technicians, a secondary issue cropped up on the same server, this time affecting access to the internet, which could also only be fixed physically by a technician in the data centre. From start to finish, the interventions lasted approximately 10 hours.</p>
<h2><a href="#what-we-did" id="what-we-did"></a>What we did</h2>
<p>With Thibault and Lucas trying multiple fixes, the content team also quickly stepped into motion. The downtime was unfortunate, given the Chess Olympiad was in progress and our daily commentary was live with hours left.</p>
<p>When it became clear the downtime would be more than a few minutes, they began setting up our commentator, GM Illia Nyzhnyk, to a private sandbox version of Lichess. Illia ‚Äî streaming for Lichess solo for the first time ‚Äî handled the situation exceptionally professionally, and continued his excellent commentary almost seamlessly.</p>
<p>With our own options quickly exhausted on the technical side, Lucas submitted a support ticket to our provider at 15:33 UTC.</p>
<p>There wasn‚Äôt much more we could do other than wait for OVH to send a technician to fix the physical issue with our server. Thibault, Lucas, and by now several other developers and systems administrators, were now discussing increasingly outlandish (and exceptionally expensive) ideas to get Lichess temporarily back online.</p>
<p>After a follow up on our ticket to OVH, around two hours later, OVH let us know that a network connector had been replaced and the intervention was deemed successful.</p>
<p>However, we were then almost immediately hit by an additional issue; now it looked like the other network connector of the server was out of order! We then had to send another support ticket, but with it coming up to 19:00 UTC, or 21:00 in Europe, and without getting further replies from OVH, it seemed our next intervention had been pushed until morning.</p>
<p>By now, virtually all of our systems administrators and developers were in the same channel, with over 1,000 messages being sent in the infrastructure channel of our Zulip. Unfortunately, there was once again nothing more we could do other than wait.</p>
<p>Coming up to 22:00 UTC, and having heard nothing further from OVH, we assumed the issue likely would only be looked at in the morning. Lucas decided to call it a night (with call alerts set up) an hour later. Thibault stayed up.</p>
<p>At 00:41 UTC it seemed action was being taken on the server, judging from the logs and some bumpy restarts. In the end, Lichess was up and stable from 01:25 UTC.</p>
<h2><a href="#what-well-do-in-the-future" id="what-well-do-in-the-future"></a>What we‚Äôll do in the future</h2>
<p>We‚Äôre in the process of getting further information from OVH to understand which component(s) had to be physically replaced, and why the intervention seemed to take an unusually long time.</p>
<p>Beyond that, we are investigating failsafes we can set up for these issues. The issue is not solely with OVH ‚Äî to some extent, we also should have further failsafes set up. However, these failsafes take a considerable amount of time and expertise to set up, dealing with very sensitive parts of Lichess. With the time and expertise it takes, and on the budget that we have, we must ruthlessly prioritise.</p>
<p>While our developers and system administrators are incredibly talented, they are generally part-time volunteers; Lucas has a day job as a system administrator. Another of our sysadmins is a CTO at an innovative big geo startup. Another is in aeronautics for a living.</p>
<p>This is not shared to excuse us, but to highlight that the skills and resources we already rely on are often stretched thin, with other obligations ‚Äî and that these individuals have all contributed their time because they play on Lichess and like the site.</p>
<h2><a href="#faq" id="faq"></a>FAQ</h2>
<h3><a href="#i-lost-rating-points--will-these-be-refunded" id="i-lost-rating-points--will-these-be-refunded"></a>I lost rating points ‚Äî will these be refunded?</h3>
<p>Unfortunately, any rating lost will not be refunded. We appreciate this is unfortunate, but technically it is very difficult to be able to refund rating after such a crash.<br>On the bright side, rating is not a currency, it automatically adjusts to your skill. It will return to normal after just a few more rated games.</p>
<h3><a href="#ive-only-been-getting-games-as-white--black-is-that-connected-to-the-crash" id="ive-only-been-getting-games-as-white--black-is-that-connected-to-the-crash"></a>I‚Äôve only been getting games as white / black. Is that connected to the crash?</h3>
<p>We recently made a change where players can no longer choose to play as black or white in all games except for direct challenges. Some players have a debt to a certain colour, to rebalance the games they owe with that colour. These issues are not linked. However, we will be adding a small change so that the rebalancing will be more gradual, and not 20+ games of one colour in a row.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ruby-SAML pwned by XML signature wrapping attacks (152 pts)]]></title>
            <link>https://ssoready.com/blog/engineering/ruby-saml-pwned-by-xml-signature-wrapping-attacks/</link>
            <guid>41586031</guid>
            <pubDate>Wed, 18 Sep 2024 21:59:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ssoready.com/blog/engineering/ruby-saml-pwned-by-xml-signature-wrapping-attacks/">https://ssoready.com/blog/engineering/ruby-saml-pwned-by-xml-signature-wrapping-attacks/</a>, See on <a href="https://news.ycombinator.com/item?id=41586031">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>
            GitLab and others are affected. The blame lies in the SAML specification, and in credulous engineers that implement it.
        </p><div>
            <p><a href="https://nvd.nist.gov/vuln/detail/CVE-2024-45409">CVE-2024-45409</a> was published
on September 10, 2024. It‚Äôs yet another XML signature wrapping attack, this time
affecting the main Ruby implementation of SAML. The vuln allows an attacker log
in as any arbitrary user of the affected system.</p>
<p>This attack keeps coming up
<a href="https://lists.w3.org/Archives/Public/public-xmlsec/2009Nov/att-0019/Camera-Ready.pdf">again</a>
and <a href="https://www.cve.org/CVERecord?id=CVE-2020-5390">again</a>, and it keeps
affecting huge swaths of the internet ‚Äî this time,
<a href="https://about.gitlab.com/releases/2024/09/17/patch-release-gitlab-17-3-3-released/#saml-authentication-bypass">GitLab</a>
and much of the Ruby ecosystem ‚Äî at a time.</p>
<p>Here‚Äôs what this issue is, why it keeps happening, and what we can do about it.</p>
<h2 id="xml-signature-wrapping">XML Signature Wrapping</h2>
<p>XML signatures are the year 2000‚Äôs answer to
<a href="https://en.wikipedia.org/wiki/JSON_Web_Token">JWTs</a>. In 2024, JWTs are a very
common answer to ‚ÄúI need to sign some data and send it over the internet‚Äù. It‚Äôs
not a perfect spec, but it‚Äôs workable.</p>
<p>XML signatures do the same thing, but every conceivable step is much more
complicated.</p>
<p>All an XML signature does is let you cryptographically sign an XML document.
Same thing as what JWTs do with <code>alg: "RS256"</code> (no <code>ES256</code>, because remember:
the year is 2000).</p>
<p>There is exactly one sane way to cryptographically sign data:</p>
<ol>
<li>You take your message, and convert it to bytes</li>
<li>You sign the bytes, which produces some more bytes</li>
<li>You transmit two things: the message-bytes from (1), and the signature-bytes from (2)</li>
<li><a href="https://en.wikipedia.org/wiki/KISS_principle">Don‚Äôt get cute</a>.</li>
</ol>
<p>Steps 1-3 is what JWT does. It does step (3) by separating the message and the
signature with a period (<code>.</code>), which works because it also base64s the message
and the signature, and <code>.</code> can‚Äôt appear in base64. People hate on JWT because it
forgot about (4); it‚Äôs part of an overarching attempt to standardize all of
crypto under something called
<a href="https://datatracker.ietf.org/group/jose/documents/">JOSE</a> (and
<a href="https://datatracker.ietf.org/doc/html/rfc8152">COSE</a>), a bad idea. But overall
they‚Äôre pretty good. They work. You can mostly ignore the overreach on the part
of the spec authors.</p>
<p>XML Signatures takes a different approach. Instead, it:</p>
<ol>
<li>Lets you sign <em>subsets</em> of a message,</li>
<li>Or none of the message at all,</li>
<li>Because instead of sending a signature accompanying your message, you <em>edit the very message you‚Äôre signing</em> to sprinkle in some <code>&lt;ds:Signature&gt;</code> elements,</li>
<li>Each of which sign a different
subset of the message. A <code>ds:Signature</code> uses a URI to point to other parts of
the message, and say ‚Äúhere‚Äôs a signature for that part of the message‚Äù</li>
</ol>
<p>If you ignore the XML-ness of it all, it‚Äôs the equivalent of signing <code>{"email": "bob@company.com"}</code> by modifying it to be:</p>
<div><pre tabindex="0"><code data-lang="json"><span><span><span>{</span>
</span></span><span><span>   <span>"email"</span><span>:</span> <span>"bob@company.com"</span><span>,</span> 
</span></span><span><span>   <span>"__sig"</span><span>:</span> <span>{</span>
</span></span><span><span>      <span>"uri"</span><span>:</span> <span>"/email"</span><span>,</span> 
</span></span><span><span>      <span>"sig"</span><span>:</span> <span>"... signature for the string bob@company.com ..."</span>
</span></span><span><span>   <span>}</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><p>This is a bad idea. It introduces the need for some ‚Äúsignature discovery‚Äù step,
where you search through the document for signatures (<code>__sig</code> in my JSON
example; <code>&lt;ds:Signature&gt;</code> elements in XML signatures). It basically begs
engineers to do this:</p>
<div><pre tabindex="0"><code data-lang="python"><span><span><span>def</span> <span>validate_xml</span><span>(</span><span>xml_document</span><span>):</span>
</span></span><span><span>    <span>for</span> <span>signature</span> <span>in</span> <span>find_xml_signature_elements</span><span>(</span><span>xml_document</span><span>):</span>
</span></span><span><span>        <span>element</span> <span>=</span> <span>resolve_uri</span><span>(</span><span>signature</span><span>[</span><span>"SignedInfo"</span><span>][</span><span>"Reference"</span><span>][</span><span>"URI"</span><span>],</span> <span>xml_document</span><span>)</span>
</span></span><span><span>        <span>verify_signature</span><span>(</span><span>element</span><span>,</span> <span>signature</span><span>[</span><span>"SignatureValue"</span><span>]</span>
</span></span></code></pre></div><p>Note that this doesn‚Äôt actually <em>do</em> anything if the document doesn‚Äôt have any
signature at all.</p>
<p>People write a ton of bugs related to this ‚Äúsignature discovery‚Äù step. Every
such bug is what they call a ‚ÄúXML Signature Wrapping‚Äù attack; someone wrote some
tricky XML that makes your code lose track of what‚Äôs actually being signed.</p>
<p>To anticipate the obvious suggestion: no, sadly you can‚Äôt just check whether the
top-level XML document is signed, because that‚Äôs not how SAML does it (more
later), and SAML is the only reason people do XML Signatures (again, more
later).</p>
<p>So you instead in practice have people adapting their previous code to make sure
that the part of the message they care about is, in fact, signed:</p>
<div><pre tabindex="0"><code data-lang="python"><span><span><span>def</span> <span>validate_xml</span><span>(</span><span>xml_document</span><span>,</span> <span>uri_checklist</span><span>):</span>
</span></span><span><span>    <span>checked_uris</span> <span>=</span> <span>[]</span>
</span></span><span><span>    <span>for</span> <span>signature</span> <span>in</span> <span>find_xml_signature_elements</span><span>(</span><span>xml_document</span><span>):</span>
</span></span><span><span>        <span>element</span> <span>=</span> <span>resolve_uri</span><span>(</span><span>signature</span><span>[</span><span>"SignedInfo"</span><span>][</span><span>"Reference"</span><span>][</span><span>"URI"</span><span>],</span> <span>xml_document</span><span>)</span>
</span></span><span><span>        <span>verify_signature</span><span>(</span><span>element</span><span>,</span> <span>signature</span><span>[</span><span>"SignatureValue"</span><span>]</span>
</span></span><span><span>        <span>checked_uris</span><span>.</span><span>append</span><span>(</span><span>signature</span><span>[</span><span>"SignedInfo"</span><span>][</span><span>"Reference"</span><span>][</span><span>"URI"</span><span>])</span>
</span></span><span><span>    
</span></span><span><span>    <span>for</span> <span>uri</span> <span>in</span> <span>uri_checklist</span><span>:</span>
</span></span><span><span>        <span>if</span> <span>uri</span> <span>not</span> <span>in</span> <span>checked_uris</span><span>:</span>
</span></span><span><span>            <span>throw</span> <span>MissingSignatureError</span><span>()</span>
</span></span></code></pre></div><p>There are a million ways this goes wrong, but here‚Äôs the one <code>ruby-saml</code> ran
into: there‚Äôs nothing that guarantees the <code>URI</code> the signature points to is
unique.</p>
<p>So what you could do is take a legitimate message, and just stick some other
stuff into the message, reusing the same <code>URI</code>. And then hope your victim‚Äôs code
will get confused as to what it just signed.</p>
<p>Something like this:</p>
<div><pre tabindex="0"><code data-lang="xml"><span><span><span>&lt;Document&gt;</span>
</span></span><span><span>    <span>&lt;!-- a faked message; this is never actually signed --&gt;</span>
</span></span><span><span>    <span>&lt;ImportantStuff&gt;</span>
</span></span><span><span>        <span>&lt;Message</span> <span>id=</span><span>"dead[...]beef"</span><span>&gt;</span>
</span></span><span><span>            <span>&lt;Email&gt;</span>eve@evil.com<span>&lt;/Email&gt;</span>
</span></span><span><span>        <span>&lt;/Message&gt;</span>
</span></span><span><span>    <span>&lt;/ImportantStuff&gt;</span>
</span></span><span><span>    
</span></span><span><span>    <span>&lt;!-- attacker-supplied message, copied out of the ImportantStuff from a legit message --&gt;</span>
</span></span><span><span>    <span>&lt;Message</span> <span>id=</span><span>"dead[...]beef"</span><span>&gt;</span>
</span></span><span><span>        <span>&lt;Email&gt;</span>alice@customer.com<span>&lt;/Email&gt;</span>
</span></span><span><span>    <span>&lt;/Message&gt;</span>
</span></span><span><span>    
</span></span><span><span>    <span>&lt;!-- a signature for alice@customer.com --&gt;</span>
</span></span><span><span>    <span>&lt;Signature&gt;</span>
</span></span><span><span>        <span>&lt;SignedInfo&gt;</span>
</span></span><span><span>            <span>&lt;Reference</span> <span>URI=</span><span>"dead[...]beef"</span> <span>/&gt;</span>
</span></span><span><span>        <span>&lt;/SignedInfo&gt;</span>
</span></span><span><span>        <span>&lt;SignatureValue&gt;</span>... the correct signature, but for alice@customer.com ...<span>&lt;/SignatureValue&gt;</span>
</span></span><span><span>    <span>&lt;/Signature&gt;</span>
</span></span><span><span><span>&lt;/Document&gt;</span>
</span></span></code></pre></div><p>The victim code finds the signature, resolves the uri to the top-level
<code>Message</code>, but then later on would process <code>ImportantStuff</code> instead of
<code>Message</code>, if that‚Äôs where the <code>Message</code> is normally placed.</p>
<p>It‚Äôs a mess. Ruby-SAML patched this by <a href="https://github.com/SAML-Toolkits/ruby-saml/commit/4865d030cae9705ee5cdb12415c654c634093ae7">throwing if <code>resolve_uri</code> finds more
than one
match</a>.
But Ruby-SAML has no reliable way of validating which parts of an XML document
were signed, and so I wouldn‚Äôt be surprised if there were more issues in that
codebase lurking.</p>
<h2 id="saml-is-why-this-matters">SAML is why this matters</h2>
<p>Nobody cares about XML Signatures anymore, except in the context of SAML. SAML
is what people mean by ‚Äúenterprise single-sign-on‚Äù, and it works by having an
Identity Provider (Okta, Microsoft Entra, Google Workspace, etc.) send a signed
XML message to a Service Provider (a B2B SaaS product). That message typically
just contains the logging in user‚Äôs email address. It‚Äôs an elaborate email
address transmission protocol.</p>
<p>Concretely, SAML requests are a POST from your user‚Äôs browser containing:</p>
<div><pre tabindex="0"><code data-lang="xml"><span><span><span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span></span><span><span><span>&lt;saml2p:Response&gt;</span>
</span></span><span><span>    <span>&lt;saml2:Assertion</span> <span>ID=</span><span>"id2829877824622019702853127"</span><span>&gt;</span>
</span></span><span><span>        <span>&lt;saml2:Issuer&gt;</span>
</span></span><span><span>            http://www.okta.com/exkig8gdo63cjI4OD5d7
</span></span><span><span>        <span>&lt;/saml2:Issuer&gt;</span>
</span></span><span><span>        <span>&lt;ds:Signature&gt;</span>
</span></span><span><span>            <span>&lt;ds:SignedInfo&gt;</span>
</span></span><span><span>                <span>&lt;ds:Reference</span> <span>URI=</span><span>"#id2829877824622019702853127"</span><span>&gt;</span>
</span></span><span><span>                <span>&lt;/ds:Reference&gt;</span>
</span></span><span><span>            <span>&lt;/ds:SignedInfo&gt;</span>
</span></span><span><span>            <span>&lt;ds:SignatureValue&gt;</span>
</span></span><span><span>                n744L/[...]mDruC1H9E0Lz7sbZg==
</span></span><span><span>            <span>&lt;/ds:SignatureValue&gt;</span>
</span></span><span><span>        <span>&lt;/ds:Signature&gt;</span>
</span></span><span><span>        <span>&lt;saml2:Subject&gt;</span>
</span></span><span><span>            <span>&lt;saml2:NameID&gt;</span>
</span></span><span><span>                ulysse.carion@ssoready.com
</span></span><span><span>            <span>&lt;/saml2:NameID&gt;</span>
</span></span><span><span>        <span>&lt;/saml2:Subject&gt;</span>
</span></span><span><span>    <span>&lt;/saml2:Assertion&gt;</span>
</span></span><span><span><span>&lt;/saml2p:Response&gt;</span>
</span></span></code></pre></div><p>And ‚Äúimplementing SAML‚Äù mostly consists of:</p>
<ol>
<li>‚ÄúValidating‚Äù the message, with all the fraught gotchas that entails</li>
<li>Logging in the user as <code>ulysse.carion@ssoready.com</code>.</li>
</ol>
<p>Notice how this is roughly the same shape of message that I laid out in the
previous example. I won‚Äôt disclose it here because that‚Äôd be irresponsible, but
you can do the same attack. You could get me to validate the message in step
(1), but then have some other thing in the message, also with
<code>ID="id2829877824622019702853127"</code>, that I use in step (2).</p>
<p>To repeat it again, the core dumb idea here is that you‚Äôre signing a message,
instead of signing bytes. XML Signatures interweaves cryptography and the XML
tree model into a messy knot. It‚Äôs really hard to make sure the message you‚Äôre
processing is the same as the bytes you verified.</p>
<h2 id="how-to-fix-this-disregard-the-spec">How to fix this: disregard the spec</h2>
<p>SAML library authors need to stop being so credulous about the spec.</p>
<p>When a specification is a collection of security flaws, responsible engineers
disregard the specification. Responsible engineers should disregard what the
SAML and XML Signatures spec authors wrote down, and instead implement the
secure thing at its core.</p>
<p>Put another way, the reason XML wrapping attacks keep coming up is that people
architect their code like this:</p>
<ol>
<li><code>saml-ruby</code> calls into some</li>
<li><code>xml-signatures-ruby</code> dependency or submodule</li>
</ol>
<p>This seems like good, sane composition. But XML Signatures is insane. It cannot
be composed. XML Signatures can‚Äôt say ‚Äúyes this message is valid‚Äù. What it can
say is ‚Äúthese N potentially-overlapping subsets of this XML document are
correctly signed‚Äù (It‚Äôs actually <a href="https://ssoready.com/blog/engineering/xml-dsig-is-unfortunate/">considerably worse than
that</a>, but whatever). There‚Äôs no
building on top of XML Signatures.</p>
<p>So here‚Äôs the sane thing to do instead:</p>
<ol>
<li>Notice that every Identity Provider in the world has practically agreed to
shape their SAML payloads in the same shape.</li>
<li>Assume all messages shaped otherwise are invalid.</li>
<li>Disregard the <code>URI</code> in XML signatures.</li>
<li>Presume in advance that they‚Äôre signing exactly the subset of the SAML
payload they should be signing, which is also the subset of the payload
you‚Äôll be processing later.</li>
<li>Verify <em>that</em> signature, and only that signature.</li>
</ol>
<p>In other words: forget XML signatures. Treat it as some weird relic. Just look
at the SAML payload, and implement the de-facto protocol that has emerged.</p>
<p>Ignore <a href="https://en.wikipedia.org/wiki/Robustness_principle">Postel</a>. When it
comes to processing cryptographic signatures, loosey-goosey isn‚Äôt ‚Äúliberal‚Äù,
it‚Äôs libertine.</p>

        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: I've Built an Accounting System (149 pts)]]></title>
            <link>https://github.com/denys-olleik/accounting</link>
            <guid>41585468</guid>
            <pubDate>Wed, 18 Sep 2024 21:04:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/denys-olleik/accounting">https://github.com/denys-olleik/accounting</a>, See on <a href="https://news.ycombinator.com/item?id=41585468">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/yt-thumb.png"><img src="https://github.com/denys-olleik/accounting/raw/master/yt-thumb.png" alt="Watch the video"></a></p>
<p dir="auto"><a href="https://www.youtube.com/watch?v=MoYr0cgosOY" rel="nofollow">Watch the video on YouTube</a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">It doesn't have to be this confusing...</h2><a id="user-content-it-doesnt-have-to-be-this-confusing" aria-label="Permalink: It doesn't have to be this confusing..." href="#it-doesnt-have-to-be-this-confusing"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Account Type</th>
<th>Debit</th>
<th>Credit</th>
</tr>
</thead>
<tbody>
<tr>
<td>Assets</td>
<td>Increase</td>
<td>Decrease</td>
</tr>
<tr>
<td>Liabilities</td>
<td>Decrease</td>
<td>Increase</td>
</tr>
<tr>
<td>Equity/Capital</td>
<td>Decrease</td>
<td>Increase</td>
</tr>
<tr>
<td>Revenue/Income</td>
<td>Decrease</td>
<td>Increase</td>
</tr>
<tr>
<td>Expenses</td>
<td>Increase</td>
<td>Decrease</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h2 tabindex="-1" dir="auto">Screenshots</h2><a id="user-content-screenshots" aria-label="Permalink: Screenshots" href="#screenshots"></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/chrome_1YoniUtAt3.gif"><img src="https://github.com/denys-olleik/accounting/raw/master/chrome_1YoniUtAt3.gif" alt="Watch the video" data-animated-image=""></a></h2><a id="" aria-label="Permalink: " href="#"></a></div>
<div dir="auto"><h2 tabindex="-1" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/chrome_gp6bHABAqw.png"><img src="https://github.com/denys-olleik/accounting/raw/master/chrome_gp6bHABAqw.png" alt="Watch the video"></a></h2><a id="user-content--1" aria-label="Permalink: " href="#-1"></a></div>
<div dir="auto"><h2 tabindex="-1" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/chrome_CodNSOn0C2.png"><img src="https://github.com/denys-olleik/accounting/raw/master/chrome_CodNSOn0C2.png" alt="Watch the video"></a></h2><a id="user-content--2" aria-label="Permalink: " href="#-2"></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/chrome_YHpC5nO5Ir.png"><img src="https://github.com/denys-olleik/accounting/raw/master/chrome_YHpC5nO5Ir.png" alt="Watch the video"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Introduction</h2><a id="user-content-introduction" aria-label="Permalink: Introduction" href="#introduction"></a></p>
<p dir="auto">GAAP and IFRS compliant implementation of a forward-only double-entry accounting method with a relational database. Suitable for U.S. and international organizations.</p>
<p dir="auto">The only system capable of managing everything from a single laundromat to a cartel, multiple aircraft carriers, and everything in between, uncontaminated by Silicon Valley üêÇüí©.</p>
<p dir="auto">Due to its wide scope, the system is designed to be incomplete, allowing organizations to finalize the implementation.</p>
<ul dir="auto">
<li><strong>Using</strong>: C# ‚Ä¢ ASP.NET MVC ‚Ä¢ Vue.js ‚Ä¢ PostgreSQL</li>
</ul>
<p dir="auto">This solution contains example integrations of feature-specific junction tables which group the journal entries into a transaction for specific user action or feature.</p>
<p dir="auto">A feature should be integrated with the journal if it affects one of the following account types: revenue, expense, liabilities, assets, or equity.</p>
<p dir="auto">Since every feature that impacts the journal requires a minimum of two entries, a <code>TransactionGuid</code> column is used to group these entries together.</p>
<p dir="auto">To implement a new feature affecting the journal, create a table to group the transaction. Prefix the table with <code>GeneralLedger...</code>, then append the names of the tables referenced by the foreign keys that appear immediately after the <code>GeneralLedgerId</code> foreign key and before the <code>Reversed...</code> column (excluding the "Id" suffix from each). For example, <code>GeneralLedgerInvoiceInvoiceLine</code> is named as such because the foreign keys after the <code>GeneralLedgerId</code> but before <code>Reversed...</code> columns are <code>InvoiceId</code> and <code>InvoiceLineId</code>. Include a <code>Reversed...</code> column to reference the entries being reversed, and a <code>TransactionGuid</code> for grouping entries. This structure supports a reversal-and-amendment strategy in a forward-only journal, where entries cannot be modified once recorded. For example, if the revenue recognition for invoice line-items needs to be adjusted after initial creation, the original entries are reversed, and new ones are added.</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;GeneralLedgerInvoiceInvoiceLine&quot;
(
	&quot;GeneralLedgerInvoiceInvoiceLineID&quot; SERIAL PRIMARY KEY NOT NULL,
	&quot;GeneralLedgerId&quot; INT NOT NULL,
	&quot;InvoiceId&quot; INT NOT NULL,
	&quot;InvoiceLineId&quot; INT NOT NULL,
	&quot;ReversedGeneralLedgerInvoiceInvoiceLineId&quot; INT NULL,
	&quot;TransactionGuid&quot; UUID NOT NULL,
	&quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE 'UTC'),
	&quot;CreatedById&quot; INT NOT NULL,
	&quot;OrganizationId&quot; INT NOT NULL,
	FOREIGN KEY (&quot;GeneralLedgerId&quot;) REFERENCES &quot;GeneralLedger&quot;(&quot;GeneralLedgerID&quot;),
	FOREIGN KEY (&quot;InvoiceId&quot;) REFERENCES &quot;Invoice&quot;(&quot;InvoiceID&quot;),
	FOREIGN KEY (&quot;InvoiceLineId&quot;) REFERENCES &quot;InvoiceLine&quot;(&quot;InvoiceLineID&quot;),
	FOREIGN KEY (&quot;ReversedGeneralLedgerInvoiceInvoiceLineId&quot;) REFERENCES &quot;GeneralLedgerInvoiceInvoiceLine&quot;(&quot;GeneralLedgerInvoiceInvoiceLineID&quot;),
	FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
	FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;(&quot;OrganizationID&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>GeneralLedgerInvoiceInvoiceLine</span>"
(
	<span><span>"</span>GeneralLedgerInvoiceInvoiceLineID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
	<span><span>"</span>GeneralLedgerId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>InvoiceId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>InvoiceLineId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>ReversedGeneralLedgerInvoiceInvoiceLineId<span>"</span></span> <span>INT</span> <span>NULL</span>,
	<span><span>"</span>TransactionGuid<span>"</span></span> UUID <span>NOT NULL</span>,
	<span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE <span><span>'</span>UTC<span>'</span></span>),
	<span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span>FOREIGN KEY</span> (<span><span>"</span>GeneralLedgerId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>GeneralLedger<span>"</span></span>(<span><span>"</span>GeneralLedgerID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>InvoiceId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Invoice<span>"</span></span>(<span><span>"</span>InvoiceID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>InvoiceLineId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>InvoiceLine<span>"</span></span>(<span><span>"</span>InvoiceLineID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>ReversedGeneralLedgerInvoiceInvoiceLineId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>GeneralLedgerInvoiceInvoiceLine<span>"</span></span>(<span><span>"</span>GeneralLedgerInvoiceInvoiceLineID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>(<span><span>"</span>OrganizationID<span>"</span></span>)
);</pre></div>
<p dir="auto">This naming strategy makes it easy for developers to understand the relationship between features and the journal.</p>
<p dir="auto">The <code>GeneralLedgerInvoiceInvoiceLine</code> is used to record entries during creation of the invoice, the modification of the line-items, and the removal of the line-items from the invoice. However, if you require these concepts to be separated even further, you could adopt a different naming strategy, for example, <code>GeneralLedgerInvoiceInvoiceLineCreated</code>, <code>GeneralLedgerInvoiceInvoiceLineUpdated</code>, <code>GeneralLedgerInvoiceInvoiceLineRemoved</code>.</p>
<p dir="auto">For example, it may be useful to know how much revenue is lost due to line-items being removed from the invoice.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Journal, accounts, and double-entry</h2><a id="user-content-journal-accounts-and-double-entry" aria-label="Permalink: Journal, accounts, and double-entry" href="#journal-accounts-and-double-entry"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;Account&quot;
(
	&quot;AccountID&quot; SERIAL PRIMARY KEY NOT NULL,
	&quot;Name&quot; VARCHAR(200) NOT NULL,
	&quot;Type&quot; VARCHAR(50) NOT NULL CHECK (&quot;Type&quot; IN ('assets', 'liabilities', 'equity', 'revenue', 'expense')),
	-- ...
	&quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE 'UTC'),
	&quot;ParentAccountId&quot; INT NULL,
	&quot;CreatedById&quot; INT NOT NULL,
	&quot;OrganizationId&quot; INT NOT NULL,
	FOREIGN KEY (&quot;ParentAccountId&quot;) REFERENCES &quot;Account&quot;(&quot;AccountID&quot;),
	FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
	FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;(&quot;OrganizationID&quot;),
	UNIQUE (&quot;Name&quot;, &quot;OrganizationId&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>Account</span>"
(
	<span><span>"</span>AccountID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
	<span><span>"</span>Name<span>"</span></span> <span>VARCHAR</span>(<span>200</span>) <span>NOT NULL</span>,
	<span><span>"</span>Type<span>"</span></span> <span>VARCHAR</span>(<span>50</span>) <span>NOT NULL</span> <span>CHECK</span> (<span><span>"</span>Type<span>"</span></span> <span>IN</span> (<span><span>'</span>assets<span>'</span></span>, <span><span>'</span>liabilities<span>'</span></span>, <span><span>'</span>equity<span>'</span></span>, <span><span>'</span>revenue<span>'</span></span>, <span><span>'</span>expense<span>'</span></span>)),
	<span><span>--</span> ...</span>
	<span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE <span><span>'</span>UTC<span>'</span></span>),
	<span><span>"</span>ParentAccountId<span>"</span></span> <span>INT</span> <span>NULL</span>,
	<span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span>FOREIGN KEY</span> (<span><span>"</span>ParentAccountId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Account<span>"</span></span>(<span><span>"</span>AccountID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>(<span><span>"</span>OrganizationID<span>"</span></span>),
	UNIQUE (<span><span>"</span>Name<span>"</span></span>, <span><span>"</span>OrganizationId<span>"</span></span>)
);</pre></div>
<p dir="auto">The <code>ParentAccountId</code> allows for hierarchical relationships which allow for better reporting and analysis. However, ensuring that the <code>ParentAccountId</code> is of the same <code>Type</code> as the <code>AccountID</code> is enforced at application level.</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;GeneralLedger&quot;
(
	&quot;GeneralLedgerID&quot; SERIAL PRIMARY KEY NOT NULL,
	&quot;AccountId&quot; INT NOT NULL,
	&quot;Credit&quot; DECIMAL(20, 4) NULL,
	&quot;Debit&quot; DECIMAL(20, 4) NULL,
	&quot;CurrencyCode&quot; VARCHAR(3) NULL, 
	&quot;ExchangeRate&quot; DECIMAL(12, 5) NULL, 
	&quot;Memo&quot; TEXT NULL,
	&quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE 'UTC'),
	&quot;CreatedById&quot; INT NOT NULL,
	&quot;OrganizationId&quot; INT NOT NULL,
	FOREIGN KEY (&quot;AccountId&quot;) REFERENCES &quot;Account&quot;(&quot;AccountID&quot;),
	FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
	FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;(&quot;OrganizationID&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>GeneralLedger</span>"
(
	<span><span>"</span>GeneralLedgerID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
	<span><span>"</span>AccountId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>Credit<span>"</span></span> <span>DECIMAL</span>(<span>20</span>, <span>4</span>) <span>NULL</span>,
	<span><span>"</span>Debit<span>"</span></span> <span>DECIMAL</span>(<span>20</span>, <span>4</span>) <span>NULL</span>,
	<span><span>"</span>CurrencyCode<span>"</span></span> <span>VARCHAR</span>(<span>3</span>) <span>NULL</span>, 
	<span><span>"</span>ExchangeRate<span>"</span></span> <span>DECIMAL</span>(<span>12</span>, <span>5</span>) <span>NULL</span>, 
	<span><span>"</span>Memo<span>"</span></span> <span>TEXT</span> <span>NULL</span>,
	<span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE <span><span>'</span>UTC<span>'</span></span>),
	<span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span>FOREIGN KEY</span> (<span><span>"</span>AccountId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Account<span>"</span></span>(<span><span>"</span>AccountID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>(<span><span>"</span>OrganizationID<span>"</span></span>)
);</pre></div>
<p dir="auto">Journal entries are made in transactions of at least two entries where the sum of credits equals debits.</p>
<p dir="auto">Double entry is misleading because some people assume the entries of a transactions are made in pairs, or have an even number of entries.</p>
<p dir="auto">A typical chart-of-accounts might look like...</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>AccountID</th>
<th>Name</th>
<th>Type</th>
<th>ParentAccountId</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>accounts-receivable</td>
<td>assets</td>
<td>NULL</td>
</tr>
<tr>
<td>2</td>
<td>revenue</td>
<td>revenue</td>
<td>NULL</td>
</tr>
<tr>
<td>3</td>
<td>revenue-service</td>
<td>revenue</td>
<td>2</td>
</tr>
<tr>
<td>4</td>
<td>revenue-product</td>
<td>revenue</td>
<td>2</td>
</tr>
<tr>
<td>5</td>
<td>cash</td>
<td>assets</td>
<td>NULL</td>
</tr>
<tr>
<td>6</td>
<td>chase-9988</td>
<td>assets</td>
<td>NULL</td>
</tr>
<tr>
<td>7</td>
<td>chase-9988-debit-card-2323</td>
<td>assets</td>
<td>6</td>
</tr>
<tr>
<td>8</td>
<td>expense</td>
<td>expense</td>
<td>NULL</td>
</tr>
<tr>
<td>9</td>
<td>expense-diesel</td>
<td>expense</td>
<td>8</td>
</tr>
<tr>
<td>10</td>
<td>expense-meals</td>
<td>expense</td>
<td>8</td>
</tr>
<tr>
<td>11</td>
<td>expense-maintenance</td>
<td>expense</td>
<td>8</td>
</tr>
<tr>
<td>12</td>
<td>discover-5555</td>
<td>liabilities</td>
<td>NULL</td>
</tr>
<tr>
<td>13</td>
<td>inventory</td>
<td>assets</td>
<td>NULL</td>
</tr>
<tr>
<td>14</td>
<td>sales-tax-payable</td>
<td>liabilities</td>
<td>NULL</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Keep an eye on number 14.</p>
<p dir="auto">Consider a transaction where an invoice is created with one line-item which requires sales tax to be collected...</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>GeneralLedgerID</th>
<th>AccountId</th>
<th>Credit</th>
<th>Debit</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1  (ar)</td>
<td>0.00</td>
<td>1100.00</td>
</tr>
<tr>
<td>2</td>
<td>2  (revenue)</td>
<td>1000.00</td>
<td>0.00</td>
</tr>
<tr>
<td>3</td>
<td>14 (liabilities)</td>
<td>100.00</td>
<td>0.00</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">The above table shows a valid transaction made up of three entries where debits equal credits.</p>
<p dir="auto">Examine the <code>TransactionGuid</code> column in the table below from the result of <code>SELECT * FROM "GeneralLedgerInvoiceInvoiceLine";</code> to identify transaction boundary.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>ID</th>
<th>GeneralLedgerId</th>
<th>InvoiceId</th>
<th>InvoiceLineId</th>
<th>ReversedId</th>
<th>TransactionGuid</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>NULL</td>
<td>e0b84e1c-e62d-60f2-0a96-61f895c14fcf</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>NULL</td>
<td>e0b84e1c-e62d-60f2-0a96-61f895c14fcf</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>1</td>
<td>2</td>
<td>NULL</td>
<td>e0b84e1c-e62d-60f2-0a96-61f895c14fcf</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>NULL</td>
<td>e0b84e1c-e62d-60f2-0a96-61f895c14fcf</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>6</td>
<td>6</td>
<td>1</td>
<td>1</td>
<td>NULL</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>7</td>
<td>7</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>8</td>
<td>8</td>
<td>1</td>
<td>1</td>
<td>NULL</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>9</td>
<td>9</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>10</td>
<td>10</td>
<td>1</td>
<td>2</td>
<td>NULL</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>11</td>
<td>11</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>12</td>
<td>12</td>
<td>1</td>
<td>2</td>
<td>NULL</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>13</td>
<td>13</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>227fa74a-3166-01b6-61db-0f6a6af4a52e</td>
</tr>
<tr>
<td>14</td>
<td>14</td>
<td>1</td>
<td>1</td>
<td>8</td>
<td>227fa74a-3166-01b6-61db-0f6a6af4a52e</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Note the reversing entries and the three separate transactions.</p>
<ol dir="auto">
<li>Rows 1-4 invoice with two line-items is created.</li>
<li>Rows 5-12 both line-items updated.</li>
<li>Rows 13-14 one line-item is removed.</li>
</ol>
<p dir="auto"><strong>To prevent confusion regarding how to determine if a line-item was removed from an invoice, and without adding additional flags or columns to indicate line-item removal, the line-items whose transactions end with a reversal are considered removed from the invoice.</strong></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Payments</h2><a id="user-content-payments" aria-label="Permalink: Payments" href="#payments"></a></p>
<ul dir="auto">
<li>Payments are received against invoice line-items.</li>
<li>Payments can be partial.</li>
<li>The relationship between payment and invoice is many-to-many.</li>
</ul>
<p dir="auto">The <code>GeneralLedgerInvoiceInvoiceLinePayment</code> links the journal entries with the payment.</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;GeneralLedgerInvoiceInvoiceLinePayment&quot;
(
  &quot;GeneralLedgerInvoiceInvoiceLinePaymentID&quot; SERIAL PRIMARY KEY NOT NULL,
  &quot;GeneralLedgerId&quot; INT NOT NULL,
  &quot;InvoiceInvoiceLinePaymentId&quot; INT NOT NULL,
  &quot;ReversedGeneralLedgerInvoiceInvoiceLinePaymentId&quot; INT NULL,
  &quot;TransactionGuid&quot; UUID NOT NULL,
  &quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE  'UTC'),
  &quot;CreatedById&quot; INT NOT NULL,
  &quot;OrganizationId&quot; INT NOT NULL,
  FOREIGN KEY (&quot;GeneralLedgerId&quot;) REFERENCES &quot;GeneralLedger&quot;  (&quot;GeneralLedgerID&quot;),
  FOREIGN KEY (&quot;InvoiceInvoiceLinePaymentId&quot;) REFERENCES  &quot;InvoiceInvoiceLinePayment&quot;(&quot;InvoiceInvoiceLinePaymentID&quot;),
  FOREIGN KEY (&quot;ReversedGeneralLedgerInvoiceInvoiceLinePaymentId&quot;)  REFERENCES &quot;GeneralLedgerInvoiceInvoiceLinePayment&quot;  (&quot;GeneralLedgerInvoiceInvoiceLinePaymentID&quot;),
  FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
  FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;  (&quot;OrganizationID&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>GeneralLedgerInvoiceInvoiceLinePayment</span>"
(
  <span><span>"</span>GeneralLedgerInvoiceInvoiceLinePaymentID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
  <span><span>"</span>GeneralLedgerId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>InvoiceInvoiceLinePaymentId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>ReversedGeneralLedgerInvoiceInvoiceLinePaymentId<span>"</span></span> <span>INT</span> <span>NULL</span>,
  <span><span>"</span>TransactionGuid<span>"</span></span> UUID <span>NOT NULL</span>,
  <span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE  <span><span>'</span>UTC<span>'</span></span>),
  <span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span>FOREIGN KEY</span> (<span><span>"</span>GeneralLedgerId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>GeneralLedger<span>"</span></span>  (<span><span>"</span>GeneralLedgerID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>InvoiceInvoiceLinePaymentId<span>"</span></span>) <span>REFERENCES</span>  <span><span>"</span>InvoiceInvoiceLinePayment<span>"</span></span>(<span><span>"</span>InvoiceInvoiceLinePaymentID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>ReversedGeneralLedgerInvoiceInvoiceLinePaymentId<span>"</span></span>)  <span>REFERENCES</span> <span><span>"</span>GeneralLedgerInvoiceInvoiceLinePayment<span>"</span></span>  (<span><span>"</span>GeneralLedgerInvoiceInvoiceLinePaymentID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>  (<span><span>"</span>OrganizationID<span>"</span></span>)
);</pre></div>
<p dir="auto">An incoming check is usually entered into the system before it is deposited. Ideally, the check should be entered into a check-in-transit or similar asset account and later synchronized when it appears on the statement.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Reconciliations</h2><a id="user-content-reconciliations" aria-label="Permalink: Reconciliations" href="#reconciliations"></a></p>
<p dir="auto">The pattern repeats in the <code>GeneralLedgerReconciliationTransaction</code> table. A bank or credit card statement contains rows of transactions. Credit card statements will have expense transactions while bank statements will have both expense and revenue transactions.</p>
<p dir="auto">Each transaction in the statement should be uniquely identifiable, but often the exported CSV does not contain a column to uniquely identify the row.</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;GeneralLedgerReconciliationTransaction&quot;
(
  &quot;GeneralLedgerReconciliationTransactionID&quot; SERIAL PRIMARY KEY NOT NULL,
  &quot;GeneralLedgerId&quot; INT NOT NULL,
  &quot;ReconciliationTransactionId&quot; INT NOT NULL,
  &quot;ReversedGeneralLedgerReconciliationTransactionId&quot; INT NULL,
  &quot;TransactionGuid&quot; UUID NOT NULL,
  &quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE  'UTC'),
  &quot;CreatedById&quot; INT NOT NULL,
  &quot;OrganizationId&quot; INT NOT NULL,
  FOREIGN KEY (&quot;GeneralLedgerId&quot;) REFERENCES &quot;GeneralLedger&quot;  (&quot;GeneralLedgerID&quot;),
  FOREIGN KEY (&quot;ReconciliationTransactionId&quot;) REFERENCES  &quot;ReconciliationTransaction&quot;(&quot;ReconciliationTransactionID&quot;),
  FOREIGN KEY (&quot;ReversedGeneralLedgerReconciliationTransactionId&quot;)  REFERENCES &quot;GeneralLedgerReconciliationTransaction&quot;  (&quot;GeneralLedgerReconciliationTransactionID&quot;),
  FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
  FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;  (&quot;OrganizationID&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>GeneralLedgerReconciliationTransaction</span>"
(
  <span><span>"</span>GeneralLedgerReconciliationTransactionID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
  <span><span>"</span>GeneralLedgerId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>ReconciliationTransactionId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>ReversedGeneralLedgerReconciliationTransactionId<span>"</span></span> <span>INT</span> <span>NULL</span>,
  <span><span>"</span>TransactionGuid<span>"</span></span> UUID <span>NOT NULL</span>,
  <span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE  <span><span>'</span>UTC<span>'</span></span>),
  <span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span>FOREIGN KEY</span> (<span><span>"</span>GeneralLedgerId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>GeneralLedger<span>"</span></span>  (<span><span>"</span>GeneralLedgerID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>ReconciliationTransactionId<span>"</span></span>) <span>REFERENCES</span>  <span><span>"</span>ReconciliationTransaction<span>"</span></span>(<span><span>"</span>ReconciliationTransactionID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>ReversedGeneralLedgerReconciliationTransactionId<span>"</span></span>)  <span>REFERENCES</span> <span><span>"</span>GeneralLedgerReconciliationTransaction<span>"</span></span>  (<span><span>"</span>GeneralLedgerReconciliationTransactionID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>  (<span><span>"</span>OrganizationID<span>"</span></span>)
);</pre></div>
<p dir="auto">Integration with banks to pull the transaction data programatically is possible, but CSV import is used as universal fallback option.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<ol start="0" dir="auto">
<li>Have <code>dotnet</code> installed.</li>
<li>Have <code>psql</code> installed.
<ol dir="auto">
<li>Have <code>CREATE EXTENSION IF NOT EXISTS postgis;</code> installed.</li>
<li>Have <code>CREATE EXTENSION IF NOT EXISTS pgcrypto;</code> installed.</li>
</ol>
</li>
<li>Update connection strings in <code>appsettings.json</code>.</li>
<li>Set <code>database-reset.json</code> to <code>true</code> and run. This does two things...
<ol dir="auto">
<li>Uses the main database context to create the application database.</li>
<li>Runs <code>create-db...</code> script to create tables, columns, relationships, indexes, etc. I will later separate sample data to be optional.</li>
</ol>
</li>
<li>Use <code>test@example.com</code> pw <code>test</code> to login and choose "Farm To Market LLC", it already has sample chart of accounts.</li>
<li>Create invoice.</li>
<li>Receive payment.</li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Backup and import/export strategy</h2><a id="user-content-backup-and-importexport-strategy" aria-label="Permalink: Backup and import/export strategy" href="#backup-and-importexport-strategy"></a></p>
<p dir="auto">The system will have three levels of backups.</p>
<ol dir="auto">
<li><strong>Ledger</strong> - System will attempt to perform a backup upon every action/transaction that affects the ledger. Backups will be in human and machine readable format such as csv, json, or xml (you'll get to pick whichever you hate the least).</li>
<li><strong>Database</strong> - Performed as often as resources allow, ideally every hour.</li>
<li><strong>Instance</strong> - Entire virtual machine instance is backed up daily.</li>
</ol>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Ambitions of Grandeur: Rebuilding an Institution</h2><a id="user-content-ambitions-of-grandeur-rebuilding-an-institution" aria-label="Permalink: Ambitions of Grandeur: Rebuilding an Institution" href="#ambitions-of-grandeur-rebuilding-an-institution"></a></p>
<p dir="auto">Why doesn't anyone want to be an accountant? Because it's not accounting anymore.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/Double-entry_example_from_1926.png"><img src="https://github.com/denys-olleik/accounting/raw/master/Double-entry_example_from_1926.png" alt="test"></a></p>
<p dir="auto">I don't remember QwackBooks ever looking like that.</p>
<p dir="auto">Intuit didn't invent accounting; they've stolen it.</p>
<p dir="auto">Accounting existed before computers, databases, and software. Transactions were recorded in physical journals using pen and paper, which forced accountants to have a better understanding of company finances due to the process of manual entry, with little room for error. Now, the process has been automated through software, and the journal entries are hidden away, leaving only the final report to spot errors and fraud.</p>
<p dir="auto">None of you can call yourselves accountants; you're just QwackBooks users. The truck drivers of the office. Your boss thinks of you as a whiny, tail-dragging ‚ñà‚ñà‚ñà‚ñà‚ñà. That's why he needs just one of you who knows the entire system. Maybe you'll get lucky with an assistant, but most likely they'll cause more problems, because it'll be the boss's daughter and she doesn't give a ‚ñà‚ñà‚ñà‚ñà.</p>
<p dir="auto">Companies that adopt my system are far less likely to get audited than those using QwackBooks or some half-baked ERP system thrown together by a committee in India and managed by another in San Francisco. These systems often go through months of customization and setup before they can be used, and still end in failed implementations.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/david-vs-goliath.png"><img src="https://github.com/denys-olleik/accounting/raw/master/david-vs-goliath.png" alt=""></a></p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Cloudflare misidentifies Hetzner IPs as being located in Iran (197 pts)]]></title>
            <link>https://gitlab.com/gitlab-com/gl-infra/production/-/issues/8121#note_1237201726</link>
            <guid>41585249</guid>
            <pubDate>Wed, 18 Sep 2024 20:46:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gitlab.com/gitlab-com/gl-infra/production/-/issues/8121#note_1237201726">https://gitlab.com/gitlab-com/gl-infra/production/-/issues/8121#note_1237201726</a>, See on <a href="https://news.ycombinator.com/item?id=41585249">Hacker News</a></p>
Couldn't get https://gitlab.com/gitlab-com/gl-infra/production/-/issues/8121#note_1237201726: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Comic Mono (401 pts)]]></title>
            <link>https://dtinth.github.io/comic-mono-font/</link>
            <guid>41585156</guid>
            <pubDate>Wed, 18 Sep 2024 20:36:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://dtinth.github.io/comic-mono-font/">https://dtinth.github.io/comic-mono-font/</a>, See on <a href="https://news.ycombinator.com/item?id=41585156">Hacker News</a></p>
Couldn't get https://dtinth.github.io/comic-mono-font/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[LinkedIn is now using everyone's content to train their AI tool (398 pts)]]></title>
            <link>https://twitter.com/RachelTobac/status/1836471586624540705</link>
            <guid>41584486</guid>
            <pubDate>Wed, 18 Sep 2024 19:37:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/RachelTobac/status/1836471586624540705">https://twitter.com/RachelTobac/status/1836471586624540705</a>, See on <a href="https://news.ycombinator.com/item?id=41584486">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Is Tor still safe to use? (707 pts)]]></title>
            <link>https://blog.torproject.org/tor-is-still-safe/</link>
            <guid>41583847</guid>
            <pubDate>Wed, 18 Sep 2024 18:41:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.torproject.org/tor-is-still-safe/">https://blog.torproject.org/tor-is-still-safe/</a>, See on <a href="https://news.ycombinator.com/item?id=41583847">Hacker News</a></p>
Couldn't get https://blog.torproject.org/tor-is-still-safe/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[iOS 18 breaks IMAPS self-signed certs (114 pts)]]></title>
            <link>https://forums.developer.apple.com/forums/thread/756626</link>
            <guid>41583689</guid>
            <pubDate>Wed, 18 Sep 2024 18:29:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://forums.developer.apple.com/forums/thread/756626">https://forums.developer.apple.com/forums/thread/756626</a>, See on <a href="https://news.ycombinator.com/item?id=41583689">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-action="posts-container" value="756626021" data-has-more="false">
            
              
              
              <div data-post-id="756626021" tabindex="-1" data-post-type="QUESTION" data-action="data-container" role="article" aria-label="Thread post" id="question-container" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1718063648410" data-author-id="392237-3541-en" data-url="/thread/756626" aria-labelledby="replyname-756626021" aria-describedby="post-status-756626021
    
      
    " data-op="tkmcintosh" data-contributors=",tkmcintosh,tkmcintosh,tkmcintosh,tkmcintosh,Davidchill79,Davidchill79,tkmcintosh,tkmcintosh,tkmcintosh,">
        
          <p>The same problem encountered with iOS 17 beta 1 and beta 2 is back:</p>
<blockquote>
<p>Unable to create a secure connection to the server ("bad certificate format" -9,808).</p>
</blockquote>
        
      </div>
            
            
            
              <div role="region" aria-labelledby="answers-title" id="answers-list">
                
                  

<div role="article" data-post-id="790218022" id="790218022" data-authorname="DTS Engineer" data-timestamp="1718136552889" data-author-id="2676-3541-en" data-url="/thread/756626?answerId=790218022#790218022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-790218022" aria-describedby="post-status-790218022
    
      
    ">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
    <span role="status" aria-label="Apple Staff"></span>
  
  
  
    
  
</p>

  
  
</div>

                
                  

<section role="article" data-post-id="792810022" id="792810022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1719378553203" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=792810022#792810022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-792810022" aria-describedby="post-status-792810022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Problem remains in iOS 18.0 beta 2 (22A5297f).
No change.</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="794820022" id="794820022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1720636063543" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=794820022#794820022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-794820022" aria-describedby="post-status-794820022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Still occurs on iOS 18.0 beta 3 (22A5307f).</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="797186022" id="797186022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1721934226619" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=797186022#797186022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-797186022" aria-describedby="post-status-797186022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Problem remains in iOS 18 beta 4 (22A5316j). No change.</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="797765022" id="797765022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1722307436945" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=797765022#797765022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-797765022" aria-describedby="post-status-797765022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Problem remains on iOS 18 beta 4 v2 (22A5316k). No change.</p>
      
    </div>

</section>

                
                  

<div role="article" data-post-id="799528022" id="799528022" data-authorname="Davidchill79" data-author-link="/profile/Davidchill79" data-timestamp="1723245384370" data-author-id="95292459-3541-en" data-url="/thread/756626?answerId=799528022#799528022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-799528022" aria-describedby="post-status-799528022
    
      
    ">
  
    <a href="https://forums.developer.apple.com/forums/profile/Davidchill79">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>

                
                  

<section role="article" data-post-id="799533022" id="799533022" data-authorname="Davidchill79" data-author-link="/profile/Davidchill79" data-timestamp="1723245779101" data-author-id="95292459-3541-en" data-url="/thread/756626?answerId=799533022#799533022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-799533022" aria-describedby="post-status-799533022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/Davidchill79">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>I got the same with 22A5326f ... I even reinstalled the profiles and hit the "trust" button but nothing solves it.</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="799542022" id="799542022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1723254964207" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=799542022#799542022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-799542022" aria-describedby="post-status-799542022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>As you said, behavior is still regressed in iOS 18.0 beta 5 (22A5326f)! Added more comments in the thread linked by DTS above about the similar problem that occurred in iOS 17.0 betas.</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="799855022" id="799855022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1723517819848" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=799855022#799855022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-799855022" aria-describedby="post-status-799855022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div data-post-id="799855022" tabindex="-1" data-post-type="ANSWER" data-action="content-post-body-content">
        
          <p>Still broken in iOS 18.0 beta 6 (22A5338b)!</p>
<p>Haven't been able to use mail on my iPhone since WWDC :(</p>
        
      </div>

</section>

                
                  

<section role="article" data-post-id="803159022" id="803159022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1725993399633" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=803159022#803159022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-803159022" aria-describedby="post-status-803159022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Sadly, this regression has shipped in iOS 18.0 (22A3354). I am not optimistic that we will see a fix going forward. :(</p>
      
    </div>

</section>

                
              </div>
            
            
            
            
            
              
                

              
            
            
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[OpenAI Threatening to Ban Users for Asking Strawberry About Its Reasoning (265 pts)]]></title>
            <link>https://futurism.com/the-byte/openai-ban-strawberry-reasoning</link>
            <guid>41583605</guid>
            <pubDate>Wed, 18 Sep 2024 18:22:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://futurism.com/the-byte/openai-ban-strawberry-reasoning">https://futurism.com/the-byte/openai-ban-strawberry-reasoning</a>, See on <a href="https://news.ycombinator.com/item?id=41583605">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="incArticle"><h2>"Additional violations of this policy may result in loss of access to GPT-4o with Reasoning."</h2><h2>Ban Hammer</h2><p>OpenAI claims that its latest AI model, code-named "Strawberry"&nbsp;and released as o1-preview,&nbsp;is supposed to be capable of "reasoning." But understanding how its <a href="https://futurism.com/openai-strawberry-thought-process-scheming">thought process</a> works, apparently, is something that the ChatGPT maker is serious about keeping off-limits.</p><p>As <a href="https://arstechnica.com/information-technology/2024/09/openai-threatens-bans-for-probing-new-ai-models-reasoning-process/"><i>Ars Technica </i>reports</a>, OpenAI is now threatening to ban users that try to get the large language model to reveal how it thinks ‚Äî a glaring example of how the company has long since <a href="https://futurism.com/openai-sleazy-company-creating-agi">abandoned its original vision</a> of championing open source AI.</p><p>According to accounts on social media, users are <a href="https://x.com/MarcoFigueroa/status/1834741170024726628">receiving emails</a> from the Microsoft-backed startup informing them that their requests made to <a href="https://futurism.com/the-byte/chatgpt-voice-mode-scream">ChatGPT</a> have been flagged for "attempting to circumvent safeguards."</p><p>"Additional violations of this policy may result in loss of access to GPT-4o with Reasoning," the emails state.</p><h2>Hush Hush</h2><p>This clampdown is more than a bit ironic given that a lot of the hype around Strawberry was built around its "chain-of-thought" reasoning that allowed the AI to articulate how it arrived at an answer, step by step. OpenAI chief technology officer Mira Murati <a href="https://www.wired.com/story/openai-o1-strawberry-problem-reasoning/">called this</a> a "new paradigm" for the technology.</p><p>Reports vary on what triggers the violations. As <i>Ars </i>found, some users claim that using the term "<a href="https://x.com/voooooogel/status/1834536216160768377">reasoning trace</a>" is what got them in trouble. Others say that even using the word "<a href="https://x.com/dyushag/status/1834379249731444820">reasoning</a>" on its own was enough to alert OpenAI's systems. Users can still see what is essentially a summary of Strawberry's thought process, but it's cobbled together by a second AI model and is heavily watered-down.</p><p>In a <a href="https://openai.com/index/learning-to-reason-with-llms/#hiding-the-chains-of-thought">blog post</a>, OpenAI argues that it needs to hide the chain-of-thought so that it wouldn't need to put a filter on how its AI thinks, in case it says stuff that isn't compliant with safety policies while thinking out loud. That way, developers can safely see its "raw" thought process behind-the-scenes.</p><p>But as the company freely admits, this measure also helps it maintain a "competitive advantage," staving off competitors from trying to ride its coattails.</p><h2>Red Alert</h2><p>The flipside of this approach, however, is that concentrates more responsibility for aligning the language language model into the hands of OpenAI, instead of democratizing it. That poses a problem for red-teamers, or programmers that try to hack AI models to make them safer.</p><p>"I'm not at all happy about this policy decision," AI researcher Simon Willison <a href="https://simonwillison.net/2024/Sep/12/openai-o1/">wrote on his blog</a>, as quoted by <i>Ars</i>. "As someone who develops against LLMs, interpretability and transparency are everything to me ‚Äî the idea that I can run a complex prompt and have key details of how that prompt was evaluated hidden from me feels like a big step backwards."</p><p>As it stands, it seems that OpenAI is continuing down a path of keeping its AI models an ever more opaque black box.</p><p><strong>More on OpenAI: </strong><em><a href="https://futurism.com/openai-strawberry-thought-process-scheming">OpenAI's Strawberry "Thought Process" Sometimes Shows It Scheming to Trick Users</a></em></p><br></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Qwen2.5: A Party of Foundation Models (158 pts)]]></title>
            <link>https://qwenlm.github.io/blog/qwen2.5/</link>
            <guid>41583062</guid>
            <pubDate>Wed, 18 Sep 2024 17:42:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://qwenlm.github.io/blog/qwen2.5/">https://qwenlm.github.io/blog/qwen2.5/</a>, See on <a href="https://news.ycombinator.com/item?id=41583062">Hacker News</a></p>
Couldn't get https://qwenlm.github.io/blog/qwen2.5/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Meta AI: "The Future of AI Is Open Source and Decentralized" (209 pts)]]></title>
            <link>https://twitter.com/AIatMeta/status/1834633042339741961</link>
            <guid>41583028</guid>
            <pubDate>Wed, 18 Sep 2024 17:40:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/AIatMeta/status/1834633042339741961">https://twitter.com/AIatMeta/status/1834633042339741961</a>, See on <a href="https://news.ycombinator.com/item?id=41583028">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
    </channel>
</rss>