<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Fri, 22 Dec 2023 18:00:05 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[From Nand to Tetris: Building a Modern Computer from First Principles (192 pts)]]></title>
            <link>https://www.nand2tetris.org</link>
            <guid>38735066</guid>
            <pubDate>Fri, 22 Dec 2023 15:31:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nand2tetris.org">https://www.nand2tetris.org</a>, See on <a href="https://news.ycombinator.com/item?id=38735066">Hacker News</a></p>
<div id="readability-page-1" class="page"><p id="comp-j847hr0w" data-testid="richTextElement"><h6><span><span><span><span><span>And of the book </span></span></span></span><a href="https://www.amazon.com/Elements-Computing-Systems-Building-Principles/dp/0262640686/ref=ed_oe_p" target="_blank"><span><span><span><span><span>The Elements of Computing Systems,&nbsp;</span></span></span></span></span></a><span><span><span><span>By </span></span></span></span><a href="http://www.cs.huji.ac.il/~noam/" target="_blank"><span><span><span><span><span>Noam Nisan</span></span></span></span></span></a><span><span><span><span> and</span><span> </span><a href="http://www.shimonschocken.com/" target="_blank"><span><span>Shimon Schocken</span></span></a><span> (MIT Press)</span></span></span></span></span></h6></p><div id="comp-j847if12" data-testid="richTextElement"><p><span><span><span><span>The site contains all the lectures, project materials and tools necessary for building a general-purpose computer system and a modern software hierarchy from the ground up.<p>

The materials are aimed at students, instructors, and self-learners. Everything is free and open-source, as long as you operate in a non-profit, educational setting.</p></span></span></span></span><br>
&nbsp;</p>

<p><span><span><span><span>The materials also support two on-line courses:&nbsp;</span></span></span><span><span><span><span><a href="https://www.coursera.org/learn/build-a-computer" target="_blank" rel="noreferrer noopener">Nand2Tetris Part</a></span></span></span></span><span><span><span><a href="https://www.coursera.org/learn/build-a-computer" target="_blank" rel="noreferrer noopener"><span><span> </span></span></a></span></span></span><span><span><span><span><a href="https://www.coursera.org/learn/build-a-computer" target="_blank" rel="noreferrer noopener">I</a></span></span><span><span><span> </span></span></span><span>(hardware projects/chapters 1-6), and&nbsp;</span><a href="https://www.coursera.org/learn/nand2tetris2" target="_blank" rel="noreferrer noopener"><span><span>Nand2Tetris Part II</span></span></a></span></span><span><span><span> (software projects/chapters 7-12).</span></span></span></span></p>

<p><span><span>​</span></span></p>

<p><span><span><span><span>Nand to Tetris courses are taught at 400+ universities, high schools, and bootcamps. The students who take them range from high schoolers to Ph.D. students to Google engineers. Here is the&nbsp;</span></span></span><a href="https://drive.google.com/file/d/1EWCOVIcg0-dX0XtL3KwNyra6jzMogXLL/view?usp=sharing" target="_blank" rel="noreferrer noopener"><span><span><span><span>extended course syllabus.</span></span></span></span></a></span></p>

<p><span><span>​</span></span></p>

<p><span><span><span><span><span><span>Instructors:</span></span></span></span></span><span><span><span>&nbsp;For additional course materials, contact <a data-auto-recognition="true" href="mailto:schocken@gmail.com">schocken@gmail.com</a></span></span></span></span></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Hyperloop was always a scam (142 pts)]]></title>
            <link>https://www.disconnect.blog/p/the-hyperloop-was-always-a-scam</link>
            <guid>38734909</guid>
            <pubDate>Fri, 22 Dec 2023 15:16:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.disconnect.blog/p/the-hyperloop-was-always-a-scam">https://www.disconnect.blog/p/the-hyperloop-was-always-a-scam</a>, See on <a href="https://news.ycombinator.com/item?id=38734909">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic" width="1200" height="675" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/07c65282-6c6f-4629-87c7-58ed30f27658.heic&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:675,&quot;width&quot;:1200,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:31189,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/heic&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F07c65282-6c6f-4629-87c7-58ed30f27658.heic 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption>Original Hyperloop concept image.</figcaption></figure></div><p><span>Ten years after Elon Musk unveiled the white paper for the vacuum-tube transport system he dubbed the Hyperloop, it’s time to drive the final nail into its coffin. Earlier this year, </span><em>Motley Fool</em><span> was already reporting that </span><a href="https://www.fool.com/investing/2023/02/21/hyperloop-startups-are-dying-a-quiet-death/" rel="">things were tough in Hyperloop world</a><span> with startups “dying a quiet death” as higher interest rates meant investors weren’t going for projects that were clearly never going to pay off.</span></p><p><span>Hyperloop One, previously known as </span><em>Virgin</em><span> Hyperloop One, was struggling too. Last year it finally had to admit its passenger tube dreams were never going to be realized, so it tried to </span><a href="https://www.bbc.com/news/technology-60478719" rel="">convince some Emiratis</a><span> that narrow, low-capacity tubes were actually going to be a great way of moving cargo. Well, they clearly didn’t buy it for long because yesterday </span><em>Bloomberg</em><span> reported Hyperloop One is </span><a href="https://www.bloomberg.com/news/articles/2023-12-21/hyperloop-one-to-shut-down-after-raising-millions-to-reinvent-transit" rel="">finally shutting down</a><span>.</span></p><p>To be clear, Hyperloop One is not associated with Musk himself. After launching in 2014, it was partly funded from Richard Branson’s fortune for a while, but even that didn’t last, with the Virgin branding disappearing along with the vision for transforming passenger transportation. I sincerely hope the media (and investors) take its collapse as a sign to stop giving any oxygen to Hyperloop fantasies. The technology was never really meant to go anywhere. Its main goal was always to stop a better transport future from being realized.</p><p>A decade on, people often forget what was really motivating the Hyperloop when Musk first started pushing it. In the early 2010s, there was a big debate around California’s plan to build a high-speed rail line from Los Angeles to San Francisco, with further extensions to San Diego and Sacramento to follow. Naturally, conservative, automotive, and airline interests were vehemently opposed to a technology that Japan and Europe had been living with for decades arriving on American shores because it threatened their commercial interests.</p><p><span>Elon Musk, as an automaker and (let’s be honest) somewhat of a conservative himself, eagerly adopted the arguments against the bullet train with his own spin. He began incessantly repeating a line he </span><a href="https://www.youtube.com/watch?v=qox_m6jyfmA" rel="">doled out</a><span> at the D11 conference with Walt Mossberg and Kara Swisher in 2013, calling it, “the slowest bullet train in the world and the most expensive bullet train per mile in the world” — and that meant it not only had to be opposed, but that the geniuses in Silicon Valley could surely do better than people who actually had a clue about trains and transportation.</span></p><p><span>When he unveiled the Hyperloop concept, Musk claimed that building it on the Los Angeles to San Francisco route would not only result in a far faster trip, but would also cost only a fraction of the price — as little as $6 billion. That figure was immediately debunked by people who </span><a href="https://web.archive.org/web/20130819164738/http://america.aljazeera.com/articles/2013/8/14/economists-don-tbelievethehyperloop.html" rel="">actually understood what went into building that kind of infrastructure</a><span>, with the real cost estimated around at least $100 billion, even though it would have far less capacity than a high-speed train. But there’s another feature that’s often forgotten: the Hyperloop was also for cars. “You just drive on, and the pod departs,” Musk told </span><em>Bloomberg Businessweek</em><span> in </span><a href="https://web.archive.org/web/20130815003336/http://www.businessweek.com/articles/2013-08-12/revealed-elon-musk-explains-the-hyperloop" rel="">his first interview</a><span> about the idea. That fantasy would show up again in the Boring Company a few years later.</span></p><p><span>In 2013, Musk’s star was rising. He was gracing the covers of magazines and being hailed as our future-builder. He’d already served as inspiration for Robert Downey Jr.’s take on Tony Stark in </span><em>Iron Man</em><span> and was largely seen as a man who could do no wrong. When he chose to speak out against the bullet train, that amplified the campaign against it, further seeping political support from an already challenged project. And that was the point. Musk never had any intention of building the Hyperloop. He only needed it to help kill or substantially delay the high-speed rail project and the alternate vision of sustainable </span><em>collective</em><span> transportation it offered. It threatened his interests as an automaker and his elite vision of “individualized” mobility that simply worked better for him.</span></p><p><span>In 2015, Ashlee Vance’s biography </span><em>Elon Musk: Tesla, SpaceX, and the Quest for a Fantastic Future</em><span> was published to an audience eager to consume a hagiography of the man supposedly saving the world and preparing us to colonize the stars. But buried within those 300-odd pages was an admission that many people seemed to have glossed over. On the subject of the Hyperloop, Vance wrote,</span></p><blockquote><p>Musk told me that the idea originated out of his hatred for California’s proposed high-speed rail system. … He insisted the Hyperloop would cost about $6 billion to $10 billion, go faster than a plane, and let people drive their cars onto a pod and drive out into a new city. At the time, it seemed that Musk had dished out the Hyperloop proposal just to make the public and legislators rethink the high-speed train. He didn’t actually intend to build the thing. … With any luck, the high-speed rail would be canceled. Musk said as much to me during a series of e-mails and phone calls leading up to the announcement.</p></blockquote><p><span>The only thing that could be clearer is if Vance released the e-mails and phone calls he’s referring to, but what he wrote is conclusive enough. Years later, after I </span><a href="https://twitter.com/parismarx/status/1167410460125097990" rel="">began</a><span> </span><a href="https://time.com/6203815/elon-musk-flaws-billionaire-visions/" rel="">resurrecting</a><span> that passage, Vance </span><a href="https://jalopnik.com/did-musk-propose-hyperloop-to-stop-california-high-spee-1849402460" rel="">claimed</a><span> my telling was “vaguely accurate but a disingenuous take on the situation.” Speaking to </span><em>Jalopnik</em><span> in 2022, he said, “I honestly do not think that was the goal of Hyperloop at all. I think if there was a better public transport system, my impression — and I think it’s genuine — is that Elon would be all for it.” Yet that completely contradicted what he had written years earlier, that Musk wanted to make lawmakers “rethink the high-speed train” and hoped it “would be canceled.”</span></p><p><span>Vance’s original telling is more credible because stopping collective transport projects has become a pattern for Musk. He proposed the Hyperloop to imperil high-speed rail. He also proposed the Boring Company tunnel system as his solution to traffic, after previously believing </span><a href="https://la.curbed.com/2018/11/9/18077612/elon-musk-mayor-garcetti-tunnels-boring-company" rel="">double-decker highways</a><span> would do the trick, instead of advocating for much better public transit because he felt transit was “</span><a href="https://www.wired.com/story/elon-musk-awkward-dislike-mass-transit/" rel="">a pain in the ass</a><span>” and suggested it was filled with serial killers. Counter to Vance’s more recent suggestion, there’s no evidence Musk would back better public transit, but plenty that he wanted to stall out plans for improved collective transport altogether. He did exactly that with the Boring Company: selling cities </span><a href="https://nymag.com/intelligencer/2022/08/elon-musks-biggest-boondoggle.html" rel="">useless tunnels</a><span> that were rarely ever built and which often displaced realistic transit plans.</span></p><p data-attrs="{&quot;url&quot;:&quot;https://www.disconnect.blog/p/the-hyperloop-was-always-a-scam?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;action&quot;:null,&quot;class&quot;:null}" data-component-name="ButtonCreateButton"><a href="https://www.disconnect.blog/p/the-hyperloop-was-always-a-scam?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share" rel=""><span>Share</span></a></p><p><span>Unfortunately, the harm of the Hyperloop went far beyond California. Companies claiming they’d realize the bullshit idea claimed to be moving forward with projects in </span><a href="https://indianexpress.com/article/explained/explained-after-hype-over-hyperloop-why-theres-a-question-mark-over-ultra-modern-project-6223864/" rel="">India</a><span>, </span><a href="https://www.thenationalnews.com/uae/transport/virgin-hyperloop-aims-for-2022-test-launch-as-chief-warns-against-rushing-technology-1.842589" rel="">Dubai</a><span>, </span><a href="https://lareleveetlapeste.fr/lhyperloop-delon-musk-un-fiasco-planetaire-qui-a-coute-plus-de-55-millions-deuros-a-la-metropole-de-toulouse/" rel="">France</a><span>, </span><a href="https://edmonton.ctvnews.ca/alta-hyperloop-project-awaiting-government-meeting-committing-to-stop-in-red-deer-1.6217544" rel="">Canada</a><span>, and countless other parts of the world only for every single one to amount to nothing. Sure, some short tubes got built in a few places to try to keep squeezing money out of investors and governments, but the only thing they really achieved was to distract people with fantasies while they could’ve been focused on building something real.</span></p><p><span>In the time since California started talking about high-speed rail and Elon Musk interjected with his fantasy to help sidetrack it, China moved ahead and built a network consisting of 42,000 kilometres (26,000 miles) of track. Europe is continuing to expand its own network, and Japan is building a maglev line that will run at speeds of over 500 km/h (310 mph). The first segment from Tokyo to Nagoya could </span><a href="https://www.japantimes.co.jp/news/2023/12/15/japan/maglev-shinkansen-opening-delayed/" rel="">open by 2027</a><span>. Not to be outdone, China is working on </span><a href="https://www.cnbctv18.com/travel/china-completes-first-operation-of-worlds-fastest-train-that-travels-at-600-kmhour-16321471.htm" rel="">a maglev of its own</a><span> to beat its Japanese rivals.</span></p><p><span>While the Hyperloop deception spread far and wide, nowhere was it stronger than in the United States. As countries around the world </span><a href="https://en.wikipedia.org/wiki/List_of_high-speed_railway_lines" rel="">moved forward</a><span> with real transport improvements, North Americans were distracted by the fantasies of clueless, but self-confident tech moguls. They left people trapped in their cars and denied better options to get around that people in many other parts of the world — even those that are quite a bit poorer — take for granted. Now all they can do is shovel money at automakers to try to power cars with batteries instead of internal combustion engines. They have no vision for a better, less car dependent alternative.</span></p><p>The tech industry’s move into transportation was not only a failure; it was an active campaign to deny the public access to better transit and trains because the billionaires of Silicon Valley don’t personally want to get around that way. The Hyperloop was one part of that, but so were the Boring Company, ride-hailing services, and self-driving cars. The Hyperloop’s failure provides a lesson we’re learning far too late: that Silicon Valley won’t deliver us a better world if they can’t find some way to profit off it. We need to stop falling for their grand deceptions, and tell our media to stop echoing them too.</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Heynote – A Dedicated Scratchpad for Developers (372 pts)]]></title>
            <link>https://heynote.com/</link>
            <guid>38733968</guid>
            <pubDate>Fri, 22 Dec 2023 13:33:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://heynote.com/">https://heynote.com/</a>, See on <a href="https://news.ycombinator.com/item?id=38733968">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
          <h3>One buffer, many blocks</h3>
          <p>
            At its core, Heynote is a large, persistent text buffer divided into blocks. 
            Creating a new block is as easy as pressing <span><span>⌘</span>-Enter</span>, 
            and pressing <span><span>⌘</span>-A</span> within 
            a block selects the content of just that block.
          </p>
          <p>
            Works great for that Slack message you don't want to accidentally send, a JSON response 
            from an API you're working with, notes from a meeting, your daily to-do list, etc.
          </p>
        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[In the Long Run, We're All Dad (221 pts)]]></title>
            <link>https://www.astralcodexten.com/p/in-the-long-run-were-all-dad</link>
            <guid>38733440</guid>
            <pubDate>Fri, 22 Dec 2023 12:20:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.astralcodexten.com/p/in-the-long-run-were-all-dad">https://www.astralcodexten.com/p/in-the-long-run-were-all-dad</a>, See on <a href="https://news.ycombinator.com/item?id=38733440">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p><strong>I.</strong></p><p>In February 2023 I found myself sitting in the waiting room of a San Francisco fertility clinic, holding a cup of my own semen.</p><p>The Bible tells the story of Onan, son of Judah. Onan’s brother died. Tradition dictated that Onan should impregnate his brother’s wife, ensuring that his brother’s line would (in some sense) live on. Onan refused, instead “spilling the seed on the ground”. God smote Onan, starting a 4,000-year-old tradition of religious people getting angry about wasting sperm on anything other than procreative sex.</p><p>Modern academics have a perfectly reasonable explanation for all of this. If Onan had impregnated his brother’s wife, the resulting child would have been the heir to the family fortune. Onan refused so he could keep the fortune for himself and his descendants. So the sin of Onan was greed, not masturbation. All that stuff in the Talmud about how the hands of masturbators should be cut off, or how masturbation helped cause Noah’s Flood (really! Sanhedrin 108b!) is just a coincidence. God hates greed, just like us.</p><p>Modern academics are great, but trusting them feels somehow too convenient. So there in the waiting room, I tried to put myself in the mindset of the rabbis thousands of years ago who thought wasting semen was a such a dire offense.</p><p>The average ejaculation contains about 300 million sperm. There are about 300 million people in the United States. If every sperm in a single ejaculation got to fertilize an egg and incubate in a womb, it would be enough to populate a second America.</p><p>America has about 200 living Nobel Prize winners. 735 billionaires. 1,000,000 doctors, 5,000,000 nurses. 100,000 pilots, 700,000 cops. Also 700,000 drug dealers, 100,000 murderers, and 1,700 NYT journalists.</p><p>That doesn’t necessarily mean my cup contained exactly 100,000 future pilots. If we assume complete genetic determinism, my sperm form a normal distribution around my personal genetic average. I’m terrible at three dimensional reasoning, so let’s say I’m two standard deviations less likely than usual to become a pilot. If my wife is normal on this trait, and we average it out, that means only about 32,000 future pilots in the cup.</p><p><span>On the other hand, I’m better than average at writing. I might be among the top 20,000 most-read authors in the US, so maybe +4SD above average. Again assuming my wife is normal, that suggests even the average kid we have will be a good writer. But imagine an entire America worth of people </span><em>centered</em><span> around being a good writer. The best writer in existing America should be +6SD above average; the best writer among the sperm in the cup is +8SD. 8SD is “best in two quadrillion”. There has never been a writer that good in the whole history of the world. There is a sperm in that cup who could write at an utterly superhuman level, write things none of us could possibly imagine, things so good it’s not even clear you would still call them writing and not some entirely new semi-divine form of art.</span></p><p>There’s also, on priors, some sperm who would shoot up a school. There’s a decent chance of a few who, if given an egg and a womb, would destroy the world, and a few others who would save it. A few hundred might ruin my life so thoroughly that I would commit suicide to escape them. A few dozen might be so great that people would build statues to me just for being their father, the same way some people build statues to St. Joseph.</p><p>The nurse called my name, I handed her the cup, and she took it away to pour into some lab apparatus. Good bye, 200 Nobelists. Good by, 32,000 pilots. Good bye, son who would have destroyed the world. Good bye, daughter who would have saved it. I waited to see if God would smite me. He did not. A few weeks later the clinic called and said there was nothing wrong with my sperm. My fertility problems were just bad luck. I should just keep trying.</p><p><span>There’s an old Jewish joke. How do you make God laugh? Tell Him your plans. 1/10,000 chance of a pilot, because I’m bad at navigation and the base rates are low. 1/10 chance of a doctor, because of all the doctors in my family. I knew it was bogus. Partly because I’m bad at standard deviations and probably got the numbers wrong. But partly because anything can happen. Maybe I was having all this trouble because the lab missed something and I really </span><em>was</em><span> infertile. Maybe my </span><em>wife</em><span> was infertile. Maybe we’d eaten too many microplastics and it was all over. Maybe we’d have a kid, an amazing kid who could have changed everything, but the world would end in 2027 and they’d never get a chance. Still, you’ve got to calculate. One in three million chance of becoming a billionaire. One in thirty thousand chance of committing murder. One out of this. One in that. One one one one one, until you reach semantic satiation on the number “one” and the syllable loses all meaning.</span></p><p>This time God chose to frustrate my calculations even faster and more decisively than usual: He blessed me with twins.</p><p><strong>II.</strong></p><p>Natural selection didn’t design the female body to carry two children. It barely, grudgingly, designed it to carry one. Two is a cruel joke.</p><p>I remember cutting an onion, sometime during month one. My wife asked if they were a different variant from usual, or if they’d gone bad. They hadn’t. It had to be morning sickness. We laughed and hugged each other. This pregnancy thing was starting to feel real!</p><p>A month later - including a hunt through the kitchen to cleanse it of any shred of onion, or anything that had ever touched an onion - we agreed that actually, morning sickness was bad. Two months later, we debated bringing my wife to the ER because she hadn’t eaten anything other than plain saltine crackers in several days. We did manage to avoid the hospital, but it was rough. I’m surprised more people don’t name their children after Zofran®. Women get such positive feelings about it, right when they’re considering baby names. For a girl, you could nickname her Zoe. For a boy, Frank. </p><p><span>And after the morning sickness it was asthma. After the asthma, anemia. After the anemia, hip pain, trouble sleeping, trouble walking, trouble with </span><em>everything</em><span>.</span></p><p>I’ve heard rumors of some women who keep working all through pregnancy, with a smile on their face. Pronatalist influencer Simone Collins says she was taking business calls from her hospital room during the delivery. I think it’s a conspiracy. All the pronatalist influencers get together and say that pregnancy isn’t so bad. Young women believe them, and so the human race survives another generation. </p><p><span>As my wife labored to build our childrens’ physical forms, I toiled to give them their spiritual-semiotic identity. The theory of </span><a href="https://en.wikipedia.org/wiki/Nominative_determinism" rel="">nominative determinism</a><span> posits that a person’s name shapes the course of their future life. Its proponents have collected a mountain of evidence: British chief justice </span><a href="https://en.wikipedia.org/wiki/Igor_Judge,_Baron_Judge" rel="">Igor Judge</a><span>, neurologist </span><a href="https://en.wikipedia.org/wiki/Russell_Brain,_1st_Baron_Brain" rel="">Lord Brain</a><span>, poker champion </span><a href="https://en.wikipedia.org/wiki/Chris_Moneymaker" rel="">Chris Moneymaker</a><span>, investment CEO </span><a href="https://en.wikipedia.org/wiki/Eugene_Profit" rel="">Eugene Profit</a><span>. The Chinese think the </span><a href="https://www.thoughtco.com/number-of-stroke-chinese-names-2278472" rel="">number of strokes</a><span> in the characters that form </span><a href="https://www.bbc.com/worklife/article/20201209-why-some-chinese-believe-a-name-change-could-improve-luck" rel="">a child’s name</a><span> must add up to a lucky number; the Jews believe each letter corresponds to a number, and a person’s name resonates spiritually with all other words whose letters sum to the same amount. </span></p><p><span>Now the statisticians have joined the fray: </span><a href="https://www.experiencedmommy.com/baby-name-salary/" rel="">did you know</a><span> that children with short first names earn over $10,000 more than longer ones? Or that men named "Jim" make 50% more than men named "Isaiah"? Is this causation or confounding? Names indicate whether you are black or white, rich or poor, and whether your parents are traditional or eccentric; what is left after adjusting for this effect? The only paper I’ve seen even begin to address the question is </span><a href="https://www.nber.org/system/files/working_papers/w11195/w11195.pdf" rel="">a sibling-control study by David Figlio</a><span>, who finds that even within families, children with lower-class names perform worse. And you don’t need scientists to know that names affect how other people see you. Just ask Chad, Karen, Tyrone, or the poor doctor I worked with once named Osama (he went by “Sam”).</span></p><p>But also, some people love their names, and other people hate theirs. This was the factor I was least sure about, so I surveyed 1518 blog readers.</p><figure data-component-name="Image3Dynamic"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 424w, https://substackcdn.com/image/fetch/w_652,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 652w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 1272w, https://substackcdn.com/image/fetch/w_1304,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 1304w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 1456w, https://substackcdn.com/image/fetch/w_1956,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 1956w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_652,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png" sizes="100vw" alt="Graph of people's name preferences, showing they are happiest with names of rank 501 - 1000" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 424w, https://substackcdn.com/image/fetch/w_652,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 652w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 1272w, https://substackcdn.com/image/fetch/w_1304,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 1304w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 1456w, https://substackcdn.com/image/fetch/w_1956,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9242b644-1695-46be-bc07-6042c379a03b_636x416.png 1956w" width="652"></picture></div></figure><p><span>Here “popularity rank” comes from the </span><a href="https://www.ssa.gov/oact/babynames/" rel="">List Of Most Popular Baby Names</a><span> for the respondent’s birth year - for example, Scott was the 39th most popular boys’ name in 1984, so I am rank 39. I find that people are happiest with names in the 501 - 1000 range (a separate question, which asked people to rate their happiness with their name on a scale of 1 - 5 without reference to whether it was traditional or unusual, got the same result). </span></p><p>What about other considerations?</p><figure data-component-name="Image3Dynamic"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 424w, https://substackcdn.com/image/fetch/w_682,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 682w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 1272w, https://substackcdn.com/image/fetch/w_1364,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 1364w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 1456w, https://substackcdn.com/image/fetch/w_2046,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 2046w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_682,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png" sizes="100vw" alt="Another graph of name preferences, showing they are happiest with older names, historical names, or names honoring deceased relatives." srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 424w, https://substackcdn.com/image/fetch/w_682,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 682w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 1272w, https://substackcdn.com/image/fetch/w_1364,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 1364w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 1456w, https://substackcdn.com/image/fetch/w_2046,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4c790d21-2ecf-4187-a0ad-96bdf8723bfb_707x339.png 2046w" width="682"></picture></div></figure><p>I asked people how happy they would be with ten different types of names. </p><p><span>People expressed a strong preference for common older names like John and Mary. Does this contradict the finding above that people with very common names were least happy? Not </span><em>necessarily </em><span>- the common names on the question above included all common names (the #1 most common name for boys born last year is “Liam”), so maybe people like common </span><em>older</em><span> names in particular? But I looked at people in the sample named John, Michael, Mary, and Sarah, and they didn’t differ much from the overall common names category. So people may </span><em>think</em><span> they would like names like these, but actual Johns and Marys wish they were named something a little more unusual.</span></p><p>The least popular categories included “new-fangled name” and “sci-fi / fantasy name”. The most popular were “name honoring a deceased relative”, “name from your ethnic origin”, and “historical figure”. </p><p>So that’s why I decided to name my children Napoleon Herschel Siskind and Hatshepsut Tzeitel Siskind. </p><p>No, seriously, I’m not comfortable telling the Internet my kids’ names. I’ll let them get doxxed the usual way - by the NYT, the first time they express a problematic opinion.</p><p>But I need some way to refer to them online, so their nicknames are Kai and Lyra.</p><p><strong>III.</strong></p><p><span>On December 13, 2023, two surprisal-minimization engines registered an unpredecented spike in surprisal. They were thrust from a sunless sea into a blooming buzzing confusion, flooded with inexplicable data through input channels they didn’t even know they had. The engines heroically tested hyperprior after hyperprior to compress the data into something predictable. Certain patterns quickly emerged. Probability distributions resolved into solid objects. The highest-resolution input channel snapped into place as a two-dimensional surface being projected onto by a three dimensional space. But - a blur of calculations - the three-dimensional nature of space implies that it must be intractably large! And if there are n solid objects in the world, that implies the number of object-object interactions increases as n(n-1)/2, which would quickly become impossible to track. Their hearts sinking, the engines started to worry it will might take </span><em>hours</em><span> before they were fully able to predict every aspect of this new environment. A panic reflex they didn’t know they had kicked in, and they began to cry.</span></p><p><span>Some outside force picked them up, rocked them back and forth. A million inexplicable sense-data, overwhelmed by a single stimulus - a </span><em>rhythmic</em><span> stimulus. The predictability of importance-weighted sense-data shot way up! Kullback-Leibler divergence dropped to near-zero! The panic reflex subsided, and the engines - exhausted by their sudden spurt of computation - shut off to </span><a href="https://www.sciencedirect.com/science/article/abs/pii/S1084952121000318" rel="">renormalize synaptic weights</a><span>.</span></p><p>Soon the engines will discover that things are even worse than they think. Some of their predictions are hard-coded; they will never be able to change them to match the world. Their only hope is to change the world to match their predictions: they are obligate agents. As they grow older, their goal systems will throw up increasingly complicated hard-coded forecasts; food, water, belonging, social status, sex. Their only path towards predictive accuracy will be to obtain all of these things from a hostile world. It’s a lousy deal.</p><p><span>My poor, fragile, little cognitive engines! These, then, will be the twin imperatives of your life: </span><a href="https://slatestarcodex.com/2017/09/05/book-review-surfing-uncertainty/" rel="">surprisal minimization</a><span> and </span><a href="https://slatestarcodex.com/2019/03/20/translating-predictive-coding-into-perceptual-control/" rel="">active inference</a><span>. If your brains are still too small to process such esoteric terms, there are others available. Your father’s ancestors called them </span><em>Torah</em><span> and </span><em>tikkun olam</em><span>; your mother’s ancestors called them Truth and Beauty; your current social sphere calls them Rationality and Effective Altruism. You will learn other names, too: no perspective can exhaust their infinite complexity. Whatever you call them, your lives will be spent in their service, pursuing them even unto that far-off and maybe-mythical point where they blur into One.</span></p><p>If you pursue them only far enough to reduce your own predictive error, it will still be a life well-lived, and nobody will blame you for it. But if you choose, you can take an extra burden upon yourself, improving not just your own models but the broader predictions of the world. You can push forward the frontiers of knowledge, or improve the lot of all humankind. It’s a crazy thing to try, when even your own local predictions are so far from perfect accuracy. I cannot exactly tell you why you should want to do something like this. If you feel it, you feel it; if not, so it goes.</p><p><span>But a parable: when you were born, your mother kissed you.  Along with the kiss came a microdose of </span><a href="https://www.astralcodexten.com/p/defying-cavity-lantern-bioworks-faq" rel="">the BCS3-L1 genetically engineered bacterium</a><span>. Without any teeth to cling to, it fell into the pit of your stomach and died. But she’ll kiss you again and again, transferring a few more BCS3-LI each time. In a few months, one of the colonists will find an incipient tooth and hang on for dear life. It will fight off competitors, wage epic battles that will determine the fate of the mouth for decades to come. It will win, because its genetic enhancements are pretty good. Then, if some smart people got their calculations right, it will do exactly nothing. No tooth decay. No cavities. The teeth will stay safe and clean.</span></p><p>When you get older, I’ll tell you the story behind this. Your mother worked for a company synthesizing genetically engineered tooth bacteria that prevent cavities. She isn’t the kind of person who would push a product on others that she hadn’t tried herself. So she infected herself with the bacterium, fresh out of the lab. Other people in the company did the same. But only she was pregnant. Babies get their mouth bacteria from their mothers. So you might be the first children in the world to grow up without s-mutans-mediated tooth decay.</p><p><span>Tooth decay isn’t the worst thing in the world. As victories go, this is a relatively minor one. I tell it to you only because it is ours. Our drop of water in a vast ocean of victories that have improved the lot of humankind on every continent, for as long as the species lasts. There is nothing that hammers this in like being a new father - nothing like seeing two tiny rudimentary week-old cognitive engines struggle not to fade into the entropic background. Kai, you wouldn’t come out of your mother on your own - the obstetrician used </span><a href="https://en.wikipedia.org/wiki/Vacuum_extraction" rel="">vacuum extraction</a><span> to save your life. Neither of you was a great breastfeeder at first, and if we hadn’t had nurses and bottles and formula, you might not have made it. A few days after your birth, it rained two inches in fifty degree weather; if we didn’t have central heating and space heaters and warm blankets, who knows what would have happened?  In 1800, about 50% of babies died before their fifth birthday. This statistic used to feel like a brute fact. Now I’m noticing all the little cracks that Death could creep in through, if we didn’t have our cornucopia of technologies and our team of vigilant pediatricians.</span></p><figure data-component-name="Image3Dynamic"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 424w, https://substackcdn.com/image/fetch/w_580,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 580w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 848w, https://substackcdn.com/image/fetch/w_1160,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 1160w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 1456w, https://substackcdn.com/image/fetch/w_1740,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 1740w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_580,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png" sizes="100vw" alt="A graph showing global child mortality plummeting from 1800 to today" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 424w, https://substackcdn.com/image/fetch/w_580,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 580w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 848w, https://substackcdn.com/image/fetch/w_1160,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 1160w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 1456w, https://substackcdn.com/image/fetch/w_1740,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F52a819de-b799-4ab2-88d3-bd873a59158b_825x764.png 1740w" width="580"></picture></div></figure><p>There are two of you. Back in 1800, statistically, one of you would have made it. I look at you now - such beautiful, fragile cognitive engines - and I cannot bear the thought of losing either one. The statistics for the 21st century suggest I won’t have to.</p><p>I was thinking about this recently, because - well, I feel kind of bad. I instantiated two surprisal-minimization engines - two conscious algorithms designed to feel negative qualia in the presence of hard-to-predict stimuli - on a world ruled by 195 mutually-hostile and frequently-shifting coalitions of over-evolved murder-monkeys, many of whom have nuclear weapons. I cannot quite remember why I thought this would be a good idea. I blame the pronatalist influencer conspiracy. </p><p>But if I have any excuse at all, it’s excessive enthusiasm for this grand project of world-scale surprise minimization and active inference. You are here to benefit from it, to enjoy sensual and intellectual pleasures that our ancestors could never know. And also, if you choose, to continue it, push it forward into a new era. You have already contributed in a tiny way - as guinea pigs - to the conquest of tooth decay. But there are so many other worse sources of prediction error out there. What else might you conquer, my two little surprisal-minimization engines?</p><p><strong>IV.</strong></p><p><span>There is a secret known only to parents of twins, medical residents, and </span><a href="https://guzey.com/theses-on-sleep/" rel="">Alexey Guzey</a><span>: the human body does not actually need sleep. After 31 hours awake, you get </span><a href="https://www.astralcodexten.com/p/sleep-is-the-mate-of-death" rel="">an integer overflow</a><span> in God’s database and go back to being well-rested again. Also you gain the ability to see angels.</span></p><p>This has become the new rhythm of our lives. Changing, nursing, burping, first one child, then the other. Twenty minutes per child, times two children, times once every 2-3 hours; you can do the math. We do everything else - laundry, shopping, cooking, occasionally even napping - in the precious intervals when both babies are asleep.</p><p><span>The </span><a href="https://www.nytimes.com/wirecutter/reviews/snoo-smart-sleeper-what-to-know/" rel="">Snoo </a><span>is a $1500 computerized bassinet that continually assesses babies’ needs and tries to calm them with various soothing noises and automated rocking motions. We got two, both of which have been soundly rejected. The twins insist on sleeping in their carseats, which we’ve grudgingly moved to the nursery. At first I was miffed, but now I see their logic. You’ve got to learn to resist the algorithmic content mills early.</span></p><p>Kai has some baby version of Alien Hand Syndrome. His arms are controlled by a malevolent entity with a grudge against the rest of his body. If we leave them loose, they wave wildly in all directions, and he freaks out. This is apparently a common problem, best solved by heavy swaddling clothes. The malevolent entity struggles against the swaddle and occasionally breaks free, like some 1980s horror movie monster. Every nursing, we must struggle against it and bind it anew before returning him to his carseat.</p><p>Lyra is already an overachiever. She has clearly read all the How To Be A Baby textbooks, learned when crying is appropriate, and only cries at those specific times. She drinks the exact amount of milk recommended on the Baby Age-Appropriate Nursing Chart, then refuses to accept more. I’m worried that if we don’t teach her to think independently soon, she’ll end up somewhere terrible like Harvard.</p><p>I look over at them. They seem so peaceful in their stupid carseats. Let them sleep. Let them nurse as often as they want. They’ll need all their strength for what’s ahead.</p><p><span>Kai. Lyra. You’ll </span><a href="https://www.youtube.com/watch?v=VGDhrH_uLUw" rel="">live to see a million things that man was never meant to see</a><span>. You were born just in time for a high-speed collision with the hinge of history. I’m only 39, I expect to be around when whatever-it-is happens - but if not, you’re our family’s ambassador to the singularity. A thousand generations, from hardy Neolithic farmers to studious Russian rabbis to overprivileged American office workers - they all lived and died so you could be here and experience this, and maybe tilt the course of what’s coming by a couple of micro-degrees.</span></p><p><span>Parents are supposed to teach their children the skills they need to navigate the world. This already feels somewhat obsolete - where are the Google programmers who were taught Python by their fathers, or the Instagram influencers who learned content creation on their mother’s knee? Soon it will be completely hopeless. Where we’re going there are no roads. You’ll have to figure it out by yourself. If I am to pass on anything of value to you, it can only be </span><a href="https://www.lesswrong.com/posts/SXK87NgEPszhWkvQm/mundane-magic" rel="">the ultimate power</a><span>, the technique that forms all other techniques. </span></p><p>I’ve always wondered why I wrote so much. Now I realize I was leaving you bread crumbs.</p><figure data-component-name="Image3Dynamic"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 424w, https://substackcdn.com/image/fetch/w_550,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 550w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 848w, https://substackcdn.com/image/fetch/w_1100,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 1100w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 1456w, https://substackcdn.com/image/fetch/w_1650,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 1650w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_550,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png" sizes="100vw" alt="Me, my wife, and the twins." srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 424w, https://substackcdn.com/image/fetch/w_550,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 550w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 848w, https://substackcdn.com/image/fetch/w_1100,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 1100w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 1456w, https://substackcdn.com/image/fetch/w_1650,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fae22914c-e8a8-4cbe-b776-c677202b9f6b_683x514.png 1650w" width="550"></picture></div></figure><p>Happy holidays, from our family to yours. ACX will return to its normal posting schedule in January.</p><figure data-component-name="Image3Dynamic"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 424w, https://substackcdn.com/image/fetch/w_728,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 728w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 1456w, https://substackcdn.com/image/fetch/w_2184,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 2184w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_728,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png" sizes="100vw" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 424w, https://substackcdn.com/image/fetch/w_728,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 728w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 1456w, https://substackcdn.com/image/fetch/w_2184,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb382aef1-8cfc-4394-826f-a180c9c6f946_439x115.png 2184w" width="728"></picture></div></figure><p>…of 2042.</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Do I need to get out the soldering-iron again? (2018) (101 pts)]]></title>
            <link>https://www.naughtycomputer.uk/do_i_really_need_to_get_out_the_soldering_iron_again.html</link>
            <guid>38732862</guid>
            <pubDate>Fri, 22 Dec 2023 10:27:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.naughtycomputer.uk/do_i_really_need_to_get_out_the_soldering_iron_again.html">https://www.naughtycomputer.uk/do_i_really_need_to_get_out_the_soldering_iron_again.html</a>, See on <a href="https://news.ycombinator.com/item?id=38732862">Hacker News</a></p>
Couldn't get https://www.naughtycomputer.uk/do_i_really_need_to_get_out_the_soldering_iron_again.html: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[NewPipe 0.26 (152 pts)]]></title>
            <link>https://github.com/TeamNewPipe/NewPipe/releases/tag/v0.26.0</link>
            <guid>38732781</guid>
            <pubDate>Fri, 22 Dec 2023 10:14:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/TeamNewPipe/NewPipe/releases/tag/v0.26.0">https://github.com/TeamNewPipe/NewPipe/releases/tag/v0.26.0</a>, See on <a href="https://news.ycombinator.com/item?id=38732781">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-pjax="true" data-test-selector="body-content" data-view-component="true"><p>This version also includes the changes from NewPipe Extractor <a href="https://github.com/TeamNewPipe/NewPipeExtractor/releases/tag/v0.23.0">v0.23.0</a> and <a href="https://github.com/TeamNewPipe/NewPipeExtractor/releases/tag/v0.23.1">v0.23.1</a>, which <strong>fix the recurring "Could not get like count" error</strong> on YouTube streams.</p>
<h3>New</h3>
<ul>
<li>
<p>Access more content provided by <strong>channels</strong> which is grouped in different <strong>tabs</strong> (<a data-error-text="Failed to load title" data-id="1812601152" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipeExtractor/issues/1082" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipeExtractor/pull/1082/hovercard" href="https://github.com/TeamNewPipe/NewPipeExtractor/pull/1082">TeamNewPipe/NewPipeExtractor#1082</a> <a data-error-text="Failed to load title" data-id="1419970052" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/9182" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/9182/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/9182">#9182</a> <a data-error-text="Failed to load title" data-id="2034411483" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10645" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10645/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10645">#10645</a> <a data-error-text="Failed to load title" data-id="2051311795" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10670" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10670/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10670">#10670</a> <a data-error-text="Failed to load title" data-id="2051434843" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10673" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10673/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10673">#10673</a>). The content of the channel tabs can vary by service:</p>
<ul>
<li>YouTube: videos, shorts, live, playlists, about
<ul>
<li>Note that YouTube does not provide upload date and duration for shorts, so they won't show up in the feed</li>
</ul>
</li>
<li>PeerTube: videos, playlists, channels (for accounts), about</li>
<li>SoundCloud: tracks, playlists, albums, about</li>
<li>Bandcamp: albums, tracks, about</li>
<li>media.ccc.de: videos, about</li>
</ul>
</li>
<li>
<p>Allow selecting <strong>image quality</strong> among multiple images <a data-error-text="Failed to load title" data-id="1691418409" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10062" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10062/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10062">#10062</a> <a data-error-text="Failed to load title" data-id="1933206762" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10482" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10482/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10482">#10482</a><br>
NewPipe supports selecting the image quality among multiple image versions. This comes with three different presets which can be selected from within the settings (low, medium and high quality). This is most noticeable in the recently introduced card style for stream lists which is now able to show thumbnails in higher resolutions. Some services (e.g. YouTube) do not always provide the highest quality thumbnails for those lists.</p>
</li>
</ul>
<h3>Improved</h3>
<ul>
<li>Adjust empty state message for <code>ListInfoFragment</code>s depending on <code>Info</code> stream type <a data-error-text="Failed to load title" data-id="1837669205" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10304" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10304/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10304">#10304</a></li>
<li>Show loading indicator before opening the download dialog from the share menu <a data-error-text="Failed to load title" data-id="1889285253" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10407" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10407/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10407">#10407</a></li>
<li>Improved accessibility of player interfaces <a data-error-text="Failed to load title" data-id="1783815362" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10199" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10199/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10199">#10199</a></li>
<li>Include a high-resolution option in the default resolution settings <a data-error-text="Failed to load title" data-id="1647706746" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/9987" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/9987/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/9987">#9987</a></li>
<li>Show play queue button in main player when there is one stream <a data-error-text="Failed to load title" data-id="1874120333" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10396" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10396/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10396">#10396</a></li>
<li>Add option to add playlist name and video name to playlist sharing content <a data-error-text="Failed to load title" data-id="1899741263" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10427" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10427/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10427">#10427</a></li>
<li>Improve audio stream selection for video-only streams in the downloader <a data-error-text="Failed to load title" data-id="1910300762" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10446" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10446/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10446">#10446</a></li>
</ul>
<h3>Localization and Documentation</h3>
<ul>
<li>Make capitalization of "Night theme" setting consistent with others <a data-error-text="Failed to load title" data-id="1840112286" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10313" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10313/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10313">#10313</a></li>
<li>Update Weblate &amp; fix string formats <a data-error-text="Failed to load title" data-id="1865694170" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10376" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10376/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10376">#10376</a></li>
<li>Fix selection of wrong languages in language picker <a data-error-text="Failed to load title" data-id="1887533765" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10406" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10406/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10406">#10406</a></li>
<li>Make "latest release" link more obvious to bug reporters <a data-error-text="Failed to load title" data-id="1848064107" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10331" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10331/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10331">#10331</a></li>
<li>[Readme] Remove Bitcoin and Bountysource donation options <a data-error-text="Failed to load title" data-id="1942181406" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10491" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10491/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10491">#10491</a></li>
<li>[Readme] Add Matrix room link <a data-error-text="Failed to load title" data-id="2029142174" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10632" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10632/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10632">#10632</a></li>
</ul>
<h3>Fixed</h3>
<ul>
<li>Fix player audio focus not respecting mute <a data-error-text="Failed to load title" data-id="1828895982" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10275" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10275/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10275">#10275</a></li>
<li>Fix downloads of streams with missing <code>MediaFormat</code> <a data-error-text="Failed to load title" data-id="1758837550" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10165" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10165/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10165">#10165</a></li>
<li>[YouTube] Fix extraction of age-restricted music videos <a data-error-text="Failed to load title" data-id="1901722153" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipeExtractor/issues/1108" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipeExtractor/pull/1108/hovercard" href="https://github.com/TeamNewPipe/NewPipeExtractor/pull/1108">TeamNewPipe/NewPipeExtractor#1108</a> <a data-error-text="Failed to load title" data-id="1908467912" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10440" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10440/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10440">#10440</a></li>
<li>Fix restoring software license dialog <a data-error-text="Failed to load title" data-id="1905389329" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10436" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10436/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10436">#10436</a></li>
<li>Fix inconsistency between user interaction and database commit order when re-adding videos to a playlist <a data-error-text="Failed to load title" data-id="1206435598" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/8248" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/8248/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/8248">#8248</a></li>
<li>Fix playing SoundCloud songs under some conditions: now OPUS HLS streams are considered as unplayable, and thus other streams are preferred <a data-error-text="Failed to load title" data-id="1995699986" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10579" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10579/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10579">#10579</a></li>
<li>Fix app not responding, background app crashes and issues with starting the player <a data-error-text="Failed to load title" data-id="1995594629" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10578" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10578/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10578">#10578</a></li>
<li>Fix some null pointer exceptions <a data-error-text="Failed to load title" data-id="1995272772" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10576" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10576/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10576">#10576</a> <a data-error-text="Failed to load title" data-id="1995547067" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10577" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10577/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10577">#10577</a></li>
<li>Fix custom filename replacement character being interpreted as regex and crashing the app <a data-error-text="Failed to load title" data-id="1940278485" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10489" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10489/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10489">#10489</a></li>
<li>Fix notifying about old "new" streams <a data-error-text="Failed to load title" data-id="1943384759" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10494" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10494/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10494">#10494</a></li>
<li>Fix channel avatar not loading correctly sometimes <a data-error-text="Failed to load title" data-id="1997857448" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10581" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10581/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10581">#10581</a></li>
<li>Fix application lagging with many main page tabs <a data-error-text="Failed to load title" data-id="2051332864" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10671" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10671/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10671">#10671</a></li>
</ul>
<h3>Development</h3>
<ul>
<li>Simplify <code>MainActivity.tabSelected(MenuItem)</code> <a data-error-text="Failed to load title" data-id="1857851563" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10360" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10360/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10360">#10360</a></li>
<li>Image minizier: replace <code>Number.toFixed(0)</code> with <code>Math.floor()</code> <a data-error-text="Failed to load title" data-id="1865713034" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10377" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10377/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10377">#10377</a></li>
<li>Update miscellaneous libraries <a data-error-text="Failed to load title" data-id="1805818623" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10234" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10234/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10234">#10234</a> <a data-error-text="Failed to load title" data-id="1811092900" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10244" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10244/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10244">#10244</a></li>
<li>Improve the download helpers using the Java 7 NIO API. <a data-error-text="Failed to load title" data-id="1815080809" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10248" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10248/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10248">#10248</a></li>
<li>Fix memory leaks and add documentation <a data-error-text="Failed to load title" data-id="1871702250" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10394" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10394/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10394">#10394</a></li>
<li>Replace <code>MathUtils.clamp</code> with Kotlin <code>coerceIn</code> <a data-error-text="Failed to load title" data-id="1800046942" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10224" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10224/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10224">#10224</a></li>
<li>Bump AGP to 8.1.1 <a data-error-text="Failed to load title" data-id="1899967378" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10428" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10428/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10428">#10428</a></li>
<li>Improve codequality <a data-error-text="Failed to load title" data-id="1905038563" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10435" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10435/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10435">#10435</a></li>
<li>Update extractor and remove <code>DeobfuscateException</code> handling <a data-error-text="Failed to load title" data-id="1908467912" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10440" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10440/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10440">#10440</a></li>
<li>Add workflow "PR size labeler" to label PRs based on the number of changed lines <a data-error-text="Failed to load title" data-id="1761955759" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10170" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10170/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10170">#10170</a> <a data-error-text="Failed to load title" data-id="1910332881" data-permission-text="Title is private" data-url="https://github.com/TeamNewPipe/NewPipe/issues/10447" data-hovercard-type="pull_request" data-hovercard-url="/TeamNewPipe/NewPipe/pull/10447/hovercard" href="https://github.com/TeamNewPipe/NewPipe/pull/10447">#10447</a></li>
</ul></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Don't Believe Your Eyes – A WhatsApp Clickjacking Vulnerability (264 pts)]]></title>
            <link>https://00xbyte.github.io/posts/Don%27t-Believe-Your-Eyes-A-WhatsApp-Clickjacking-Vulnerability/</link>
            <guid>38732770</guid>
            <pubDate>Fri, 22 Dec 2023 10:12:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://00xbyte.github.io/posts/Don%27t-Believe-Your-Eyes-A-WhatsApp-Clickjacking-Vulnerability/">https://00xbyte.github.io/posts/Don%27t-Believe-Your-Eyes-A-WhatsApp-Clickjacking-Vulnerability/</a>, See on <a href="https://news.ycombinator.com/item?id=38732770">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Imagine you have received a WhatsApp message with a link to <code>ln.instagram.com</code>.<br> Where do you think the link leads? Instagram? Think again.</p><p>I have found a <a href="https://en.wikipedia.org/wiki/Clickjacking">clickjacking</a> vulnerability in WhatsApp that enables phishing attacks.<br> An attacker can send anyone a crafted message with a link that appears to lead to a legitimate website, but in fact leads to any website of the attacker’s choice.</p><h2 id="discovery-process"><span>Discovery Process</span><a href="#discovery-process"><i></i></a></h2><p>I started my research looking for a way to make a message recipient perform an HTTP request. My initial thought was to check WA’s link preview feature. I hoped the the link would be rendered twice, once by the sender and once by the receiver. In order to check my theory, I created a <a href="https://webhook.site/">webhook</a> and sent it to a friend. Sadly only one request was made, only by me.<br> <strong>That got me thinking. If the receiver does not render the link for themselves, that must mean I send both the link and the preview</strong>. If so, I wonder if I can send a link to one site with a preview of another?</p><h3 id="issue-1---link-preview-mismatch"><span>Issue #1 - Link Preview Mismatch</span><a href="#issue-1---link-preview-mismatch"><i></i></a></h3><p>I decided to take a look into what data is sent in a WA message that contains a link with a preview. My goal was to intercept the message, change the link and the preview to mismatch, and send it. <br> I decided to intercept a message via WA web, as hopefully that would be a faster setup than debugging an emulator. I then ran into a problem - WA uses and E2EE so I couldn’t simply modify the message with proxy like Burp Suite.</p><p><a href="https://00xbyte.github.io/assets/img/post/websocket.png"><img src="https://00xbyte.github.io/assets/img/post/websocket.png" data-src="/assets/img/post/websocket.png" alt="" width="540" height="400" data-proofer-ignore=""></a></p><p>Instead of understanding the encryption mechanism, I decided insert a breakpoint a moment before the message was encrypted and sent through the websocket. WA web’s javascript was uglified and minified, however after a while of searching I found the right place.</p><p><a href="https://00xbyte.github.io/assets/img/post/link%20object.png"><img src="https://00xbyte.github.io/assets/img/post/link%20object.png" data-src="/assets/img/post/link%20object.png" alt="" width="540" height="400" data-proofer-ignore=""></a></p><p>Exactly as I suspected, the link and the preview were sent separately!<br> I created a message object for<code>instagram.com</code> and changed the <code>text</code> property to <code>google.com</code>. Unfortunately, the message that was sent did not have a preview anymore. Only a link to Google.<br> Blackbox testing taught me that:</p><div><table><thead><tr><th>Property</th><th>Purpose</th></tr></thead><tbody><tr><td><code>text</code></td><td>The text of the message</td></tr><tr><td><code>canonicalURL</code></td><td>The domain that is shown at the bottom of the preview</td></tr><tr><td><code>matchedText</code></td><td>Seems to be compared against <code>canonicalURL</code>, also tested that its value apears in <code>text</code></td></tr></tbody></table></div><p>I discovered that if the <code>matchedText</code> was deleted from the object, I could create a mismatch!</p><p><a href="https://00xbyte.github.io/assets/img/post/preview%20mismatch.jpg"><img src="https://00xbyte.github.io/assets/img/post/preview%20mismatch.jpg" data-src="/assets/img/post/preview%20mismatch.jpg" alt="" width="540" height="400" data-proofer-ignore=""></a></p><p>Success! I have created a message with a preview to one site, and when clicked, leads to another. This was a great start, but I didn’t want the real link to be shown in the message. I was looking for ways to hide the message text.</p><h3 id="issue-2---disguising-links-2k2e"><span>Issue #2 - Disguising Links (2K2E)</span><a href="#issue-2---disguising-links-2k2e"><i></i></a></h3><p>I remembered that some unicode characters can change the representation of text, so I tried fuzzing characters to see their effect:</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
</pre></td><td><pre><span>function</span> <span>fuzz</span><span>(</span><span>start</span><span>,</span> <span>end</span><span>)</span> <span>{</span>
	<span>for </span><span>(</span><span>let</span> <span>i</span> <span>=</span> <span>start</span><span>;</span> <span>i</span> <span>&lt;=</span> <span>end</span> <span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
	    <span>j</span> <span>=</span> <span>i</span><span>.</span><span>toString</span><span>(</span><span>16</span><span>)</span>
	    <span>if </span><span>(</span><span>j</span><span>.</span><span>length</span> <span>&lt;</span> <span>4</span><span>)</span> <span>{</span> <span>j</span> <span>=</span> <span>"</span><span>0</span><span>"</span><span>.</span><span>repeat</span><span>(</span><span>4</span> <span>-</span><span>j</span><span>.</span><span>length</span><span>)</span> <span>+</span> <span>j</span><span>}</span>
 	    <span>msg</span> <span>+=</span> <span>eval</span><span>(</span><span>"</span><span>\"\\</span><span>u</span><span>"</span><span>+</span><span>j</span><span>+</span><span>"</span><span>\"</span><span>"</span><span>)</span>
			<span>+</span> <span>"</span><span>https://google.com/</span><span>"</span> <span>+</span> <span>i</span><span>.</span><span>toString</span><span>(</span><span>16</span><span>)</span>
			<span>+</span> <span>"</span><span>\n</span><span>"</span> 
	<span>}</span>
<span>}</span>
</pre></td></tr></tbody></table></code></p></div><p>I observed the results and one result caught my eye. One of the lines (<code>202e</code>) was in reverse:</p><p><a href="https://00xbyte.github.io/assets/img/post/fuzzing.jpg"><img src="https://00xbyte.github.io/assets/img/post/fuzzing.jpg" data-src="/assets/img/post/fuzzing.jpg" alt="" width="540" height="400" data-proofer-ignore=""></a></p><p>Apparently, the unicode character <a href="https://unicode-explorer.com/c/202E"><code>U+202E</code></a> (Right-To-Left Override) alters the way that text is presented to the user by displaying it in reverse order.<br> That was a great start but this link looks horrible. Nobody would click it.</p><h4 id="crafting-a-mirror-url"><span>Crafting A Mirror URL</span><a href="#crafting-a-mirror-url"><i></i></a></h4><p>I wanted to create a URL that, when reversed, looked like <code>https://instagram.com</code>. This means that the link should be <code>moc.margatsni//:sttph</code> (<code>\u202e</code>+<code>moc.margatsni//:sttph</code> = <code>https://instagram.com</code> )</p><p>This fist problem is the TLD. I cannot register a <code>.margatsni</code> domain.<br> My solution was to find a TLD that could look like a subdomain. For example the TLD <code>.nl</code> (Netherlands) would result in <code>ln.instagram.com</code> (<code>ln</code> as in link)</p><p>Problem number two was that the URL needed to start with <code>https://</code> in order to look legitimate.<br> My solution to this was to append the string <code>//:sptth</code> (which is a valid path) to the URL, so that <code>https://moc.margatsni.nl//:sttph</code> would appear as <code>https://ln.instagram.com//:sptth</code></p><blockquote><p>With a mirror URL and the <code>U+202E</code> character, an attacker can make any URL look like any other!<br> I call this vulnerability <strong>2K2E</strong></p></blockquote><h3 id="final-result"><span>Final Result</span><a href="#final-result"><i></i></a></h3><p>Finally I have a legitimate looking URL that seems like it leads to Instagram, when in fact it leads to my blog <a href="https://00xbyte.github.io/">Security Is Broken</a>.</p><p><a href="https://00xbyte.github.io/assets/img/post/clickjacking.png"><img src="https://00xbyte.github.io/assets/img/post/clickjacking.png" data-src="/assets/img/post/clickjacking.png" alt="" width="540" height="400" data-proofer-ignore=""></a></p><h2 id="attack-scenario"><span>Attack Scenario</span><a href="#attack-scenario"><i></i></a></h2><p>Utilizing both these issues can allow attackers to perform phishing attacks where they construct legitimate looking links that lead to malicious websites.</p><p>The full attack flow:</p><ol><li>An attacker purchases the mirror domain of the site they would like to impersonate. For example <code>moc.margatsni.nl</code> to impersonate <code>ln.instagram.com</code></li><li>The attacker creates a message with a link to original domain in order to use its preview.<div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td><pre><span>{</span><span>
 </span><span>"text"</span><span>:</span><span> </span><span>"https://instagram.com/"</span><span>,</span><span>
 </span><span>"matchedText"</span><span>:</span><span> </span><span>"https://instagram.com/"</span><span>,</span><span>
 </span><span>"canonicalUrl"</span><span>:</span><span> </span><span>"https://instagram.com/"</span><span>,</span><span>
 </span><span>"description"</span><span>:</span><span> </span><span>"Create an account..."</span><span>,</span><span>
 </span><span>"title"</span><span>:</span><span> </span><span>"Instagram"</span><span>,</span><span>
 </span><span>"jpegThumbnail"</span><span>:</span><span> </span><span>{},</span><span>
 </span><span>"previewType"</span><span>:</span><span> </span><span>0</span><span>,</span><span>
 </span><span>"mediaKey"</span><span>:</span><span> </span><span>{},</span><span>
 </span><span>"mediaKeyTimestamp"</span><span>:</span><span> </span><span>1693302818542</span><span>,</span><span>
 </span><span>"thumbnailDirectPath"</span><span>:</span><span> </span><span>"/v/t62.36..."</span><span>,</span><span>
 </span><span>"thumbnailSha256"</span><span>:</span><span> </span><span>{},</span><span>
 </span><span>"thumbnailEncSha256"</span><span>:</span><span> </span><span>{},</span><span>
 </span><span>"thumbnailHeight"</span><span>:</span><span> </span><span>1024</span><span>,</span><span>
 </span><span>"thumbnailWidth"</span><span>:</span><span> </span><span>1024</span><span>,</span><span>
 </span><span>"inviteLinkGroupTypeV2"</span><span>:</span><span> </span><span>0</span><span>
</span><span>}</span><span>
</span></pre></td></tr></tbody></table></code></p></div></li><li>The attacker then removes the <code>matchedText</code> property and changes the <code>text</code> property to the following value: <code>U+202E</code> + “URL to the mirror domain” + <code>//:sptth</code><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td><pre><span>{</span><span>
 </span><span>"text"</span><span>:</span><span> </span><span>"</span><span>\u</span><span>202ehttps://moc.margatsni.nl//:sptth"</span><span>,</span><span>
 </span><span>"canonicalUrl"</span><span>:</span><span> </span><span>"https://instagram.com/"</span><span>,</span><span>
 </span><span>"description"</span><span>:</span><span> </span><span>"Create an account..."</span><span>,</span><span>
 </span><span>"title"</span><span>:</span><span> </span><span>"Instagram"</span><span>,</span><span>
 </span><span>"jpegThumbnail"</span><span>:</span><span> </span><span>{},</span><span>
 </span><span>"previewType"</span><span>:</span><span> </span><span>0</span><span>,</span><span>
 </span><span>"mediaKey"</span><span>:</span><span> </span><span>{},</span><span>
 </span><span>"mediaKeyTimestamp"</span><span>:</span><span> </span><span>1693302818542</span><span>,</span><span>
 </span><span>"thumbnailDirectPath"</span><span>:</span><span> </span><span>"/v/t62.36..."</span><span>,</span><span>
 </span><span>"thumbnailSha256"</span><span>:</span><span> </span><span>{},</span><span>
 </span><span>"thumbnailEncSha256"</span><span>:</span><span> </span><span>{},</span><span>
 </span><span>"thumbnailHeight"</span><span>:</span><span> </span><span>1024</span><span>,</span><span>
 </span><span>"thumbnailWidth"</span><span>:</span><span> </span><span>1024</span><span>,</span><span>
 </span><span>"inviteLinkGroupTypeV2"</span><span>:</span><span> </span><span>0</span><span>
</span><span>}</span><span>
</span></pre></td></tr></tbody></table></code></p></div></li><li>Finally the attacker sends the crafted message to their victim</li></ol><blockquote><p>Because we support many different platforms and environments, there are a significant number of ways that some platform could choose to normalize a URL differently than our server-side logic does. To address that, we have systems in place which allow us to adjust our URL normalization logic dynamically in the event of real-world spam and abuse.</p></blockquote><p>Sadly, Meta has shown no intention to resolve this security issue and from their response it seems that they will try to stop these attacks only if their systems detect them as spam. This means that WhatsApp users can only cross their fingers that they won’t fall victims to 2K2E attacks.<br> <strong>Apposed to WhatsApp, other platforms such as X, TikTok, and Pinterest, all have sanitization of the <code>U+202E</code> character.</strong></p><h2 id="mitigation"><span>Mitigation</span><a href="#mitigation"><i></i></a></h2><p>Because Meta has no intention of fixing this issue, links on WhatsApp cannot be trusted. In order to not fall victim to a 2K2E phishing attack, before clicking on a link, copy it. The clipboard preview should show the link address while sanitizing the <code>U+202E</code> character.</p><h2 id="update"><span>Update</span><a href="#update"><i></i></a></h2><p>I have found other services that do not have proper sanitization and are vulnerable to 2K2E as well.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[TextDiffuser-2: Unleashing the Power of Language Models for Text Rendering (106 pts)]]></title>
            <link>https://jingyechen.github.io/textdiffuser2/</link>
            <guid>38732713</guid>
            <pubDate>Fri, 22 Dec 2023 10:01:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jingyechen.github.io/textdiffuser2/">https://jingyechen.github.io/textdiffuser2/</a>, See on <a href="https://news.ycombinator.com/item?id=38732713">Hacker News</a></p>
<div id="readability-page-1" class="page">



<div>
          
          

          <p><span><sup>1</sup>HKUST,</span>
			      <span><sup>2</sup>Sun Yat-sen University,</span>
            <span><sup>3</sup>Microsoft Research</span>
          </p>

          
        </div>


 









  




<div>
        <h2>Abstract</h2>
        <p>
            The diffusion model has been proven a powerful generative model in recent years, yet remains a challenge in generating visual text. Several methods alleviated this issue by incorporating explicit text position and content as guidance on where and what text to render. However, these methods still suffer from several drawbacks, such as limited flexibility and automation, constrained capability of layout prediction, and restricted style diversity. In this paper, we present TextDiffuser-2, aiming to unleash the power of language models for text rendering. Firstly, we fine-tune a large language model for layout planning. The large language model is capable of automatically generating keywords for text rendering and also supports layout modification through chatting. Secondly, we utilize the language model within the diffusion model to encode the position and texts at the line level. Unlike previous methods that employed tight character-level guidance, this approach generates more diverse text images. We conduct extensive experiments and incorporate user studies involving human participants as well as GPT-4V, validating TextDiffuser-2's capacity to achieve a more rational text layout and generation with enhanced diversity.
          </p>


    <div>
        <br>
        <h2>Motivation - Why TextDiffuser-2 is Needed? 🤷‍♂</h2>
        <div><p>
          Although showing impressive rendering accuracy, we have noticed several drawbacks in existing text rendering methods:
          </p><ul>
            <li>(1) <b>Limited flexibility and automation</b>: GlyphControl needs users to design glyph images to provide layout guidance, while GlyphDraw and TextDiffuser rely on the manual specification of keywords. These requirements hinder the direct conversion of natural user prompts into corresponding images, thereby narrowing the flexibility and automation capabilities.</li>
            <li>(2) <b>Constrained capability of layout prediction</b>: GlyphDraw can only render images with a single text line, constraining its applicability for scenarios involving multiple text lines. For TextDiffuser, the produced text layouts are not visually appealing, which is primarily attributed to the limited capability of the Layout Transformer.</li>
            <li>(3) <b>Restricted style diversity</b>: For TextDiffuser, the utilization of character-level segmentation masks as control signals implicitly imposes constraints on the position of each character, thereby restricting the diversity of text styles and posing challenges when rendering handwritten or artistic fonts.</li>
            <li>(4) <b>No open-source code</b>: Existing methods may not provide available code, API, or demo.</li>
          </ul>
        </div>
      </div>

    <!-- Pipeline. -->
    <div>
        <br>
        <h2>TextDiffuser-2 Pipeline</h2>
          <p><img src="https://jingyechen.github.io/textdiffuser2/static/images/architecture.jpg" alt="pipeline1"></p><p>
            The architecture of TextDiffuser-2. The language model M1 and the diffusion model are trained in two stages. The language model M1 can convert the user prompt into a language-format layout and also allows users to specify keywords optionally. Further, the prompt and language-format layout is encoded with the trainable language model M2 within the diffusion model for generating images. M1 is trained via the cross-entropy loss in the first stage, while M2 and U-Net are trained using the denoising L2 loss in the second stage.
          </p>
      </div>
<!-- 
    <script
    type="module"
    src="https://gradio.s3-us-west-2.amazonaws.com/4.8.0/gradio.js"
  ></script>
  

  <gradio-app src="https://jingyechen22-textdiffuser-2.hf.space" style="width: auto;"></gradio-app> -->
  

    <!-- Pipeline. -->
    <div>
        <br>
        <h2>Text-to-Image Visualizations</h2>
        <p><img src="https://jingyechen.github.io/textdiffuser2/static/images/t2i.jpg" alt="more_results_single"></p><p>
            Visualizations of text-to-image results compared with existing methods. TextDiffuser-2 can automatically extract keywords from
            prompts for accurate rendering. Additionally, the fonts generated by TextDiffuser-2 exhibit a wide range of diversity.
          </p>
      </div>


    <div>
        <br>
        <h2>Style Diversity</h2>
        <p><img src="https://jingyechen.github.io/textdiffuser2/static/images/diverse.jpg" alt="more_results_single"></p><p>
            Visualization of diversity in generating multiple images under the same prompt. TextDiffuser-2 is capable of generating more
artistic fonts, with increased diversity in the positioning of characters and the inclination angle of text lines.
          </p>
      </div>


    <div>
        <br>
        <h2>Inpainting Ability</h2>
        <p><img src="https://jingyechen.github.io/textdiffuser2/static/images/inpaint.jpg" alt="more_results_single"></p><p>
            Visualizations of the text inpainting task compared with TextDiffuser. TextDiffuser-2 can generate more coherent text.
          </p>
      </div>


    <div>
        <br>
        <h2>Quantitative Result</h2>
        <p><img src="https://jingyechen.github.io/textdiffuser2/static/images/quanti.jpg" alt="more_results_single"></p><p>
            Demonstration of the quantitative results and user studies. We also incorporate GPT-4V into the user studies. The best and
second-best results are indicated in bold and underlined formats. TextDiffuser-2 achieves the best results under the majority of metrics.
          </p>
      </div>


</div>



<div id="BibTeX">
    <h2>Contact</h2><p>
    For help or issues using TextDiffuser-2, please email Jingye Chen <a rel="license" href="mailto:qwerty.chen@connect.ust.hk">(qwerty.chen@connect.ust.hk)</a>
    , Yupan Huang <a rel="license" href="mailto:huangyp28@mail2.sysu.edu.cn">(huangyp28@mail2.sysu.edu.cn)</a> or submit a GitHub issue. For other communications related to TextDiffuser-2, please contact Lei Cui <a rel="license" href="mailto:lecu@microsoft.com">(lecu@microsoft.com)</a> or Furu Wei <a rel="license" href="mailto:fuwei@microsoft.com">(fuwei@microsoft.com)</a>.
  </p></div>

<div id="BibTeX">
    <h2>BibTeX</h2>
    <pre><code>@article{chen2023textdiffuser,
      title={TextDiffuser-2: Unleashing the Power of Language Models for Text Rendering},
      author={Chen, Jingye and Huang, Yupan and Lv, Tengchao and Cui, Lei and Chen, Qifeng and Wei, Furu},
      journal={arXiv preprint arXiv:2311.16465},
      year={2023}
    }
    
</code></pre>
  </div>








</div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mindustry: Open-source automation tower defense game (358 pts)]]></title>
            <link>https://mindustrygame.github.io/</link>
            <guid>38732542</guid>
            <pubDate>Fri, 22 Dec 2023 09:32:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mindustrygame.github.io/">https://mindustrygame.github.io/</a>, See on <a href="https://news.ycombinator.com/item?id=38732542">Hacker News</a></p>
<div id="readability-page-1" class="page"><p> <h2> <b>Mindustry:</b> A sandbox tower-defense game. </h2> </p><div> <ul> <p> Defend your base from <span>waves of powerful enemies</span>. <br> <img alt="A high-level Mindustry base in combat with a wave of many low-level enemies." src="https://mindustrygame.github.io/1.d25af17a.webp" type="image/webp"> </p> <p> Build complex designs for <span>processing materials</span>. <br> <img alt="A peaceful Mindustry game with various end-game factories." src="https://mindustrygame.github.io/2.0d4f9a35.webp" type="image/webp"> </p> <p> Build and fight with other players on <span>multiplayer servers</span>. <br> <img alt="A peaceful Mindustry game with mid-tier factories while players wander and build." src="https://mindustrygame.github.io/3.88567664.webp" type="image/webp"> </p>   </ul> </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Rough.js: Create graphics with a hand-drawn, sketchy, appearance (212 pts)]]></title>
            <link>https://roughjs.com/</link>
            <guid>38732049</guid>
            <pubDate>Fri, 22 Dec 2023 08:06:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://roughjs.com/">https://roughjs.com/</a>, See on <a href="https://news.ycombinator.com/item?id=38732049">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <h2>Rough.js</h2>
<p><strong>Rough.js</strong> is a small (&lt;9kB gzipped) graphics library that lets you draw in a <em>sketchy</em>, <em>hand-drawn-like</em>, style.
The library defines primitives to draw lines, curves, arcs, polygons, circles, and ellipses. It also supports drawing <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths">SVG paths</a>.</p>
<p>Rough.js works with both <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">Canvas</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/SVG">SVG</a>.</p>
<p><img src="https://roughjs.com/images/cap.png" alt="Rough.js sample"></p>
<h2>Install</h2>
<p>Install from npm:</p>
<pre><code><span>npm</span> <span>install</span> <span>--save</span> roughjs</code></pre>
<p>And use it in your code:</p>
<pre><code><span>import</span> rough <span>from</span> <span>'roughjs'</span><span>;</span></code></pre>
<h2>Usage</h2>
<p>View <a href="https://github.com/rough-stuff/rough/wiki">Full Rough.js API</a> is available on Github.</p>
<p><img src="https://roughjs.com/images/m1.png" alt="Rough.js rectangle"></p>
<pre><code><span>const</span> rc <span>=</span> rough<span>.</span><span>canvas</span><span>(</span>document<span>.</span><span>getElementById</span><span>(</span><span>'canvas'</span><span>)</span><span>)</span><span>;</span><br>rc<span>.</span><span>rectangle</span><span>(</span><span>10</span><span>,</span> <span>10</span><span>,</span> <span>200</span><span>,</span> <span>200</span><span>)</span><span>;</span> <span>// x, y, width, height</span></code></pre>
<p>or SVG</p>
<pre><code><span>const</span> rc <span>=</span> rough<span>.</span><span>svg</span><span>(</span>svg<span>)</span><span>;</span><br><span>let</span> node <span>=</span> rc<span>.</span><span>rectangle</span><span>(</span><span>10</span><span>,</span> <span>10</span><span>,</span> <span>200</span><span>,</span> <span>200</span><span>)</span><span>;</span> <span>// x, y, width, height</span><br>svg<span>.</span><span>appendChild</span><span>(</span>node<span>)</span><span>;</span></code></pre>
<h2>Lines and Ellipses</h2>
<p><img src="https://roughjs.com/images/m2.png" alt="Rough.js rectangle"></p>
<pre><code>rc<span>.</span><span>circle</span><span>(</span><span>80</span><span>,</span> <span>120</span><span>,</span> <span>50</span><span>)</span><span>;</span> <span>// centerX, centerY, diameter</span><br>rc<span>.</span><span>ellipse</span><span>(</span><span>300</span><span>,</span> <span>100</span><span>,</span> <span>150</span><span>,</span> <span>80</span><span>)</span><span>;</span> <span>// centerX, centerY, width, height</span><br>rc<span>.</span><span>line</span><span>(</span><span>80</span><span>,</span> <span>120</span><span>,</span> <span>300</span><span>,</span> <span>100</span><span>)</span><span>;</span> <span>// x1, y1, x2, y2</span></code></pre>
<h2>Filling</h2>
<p><img src="https://roughjs.com/images/m3.png" alt="Rough.js rectangle"></p>
<pre><code>rc<span>.</span><span>circle</span><span>(</span><span>50</span><span>,</span> <span>50</span><span>,</span> <span>80</span><span>,</span> <span>{</span> <span>fill</span><span>:</span> <span>'red'</span> <span>}</span><span>)</span><span>;</span> <span>// fill with red hachure</span><br>rc<span>.</span><span>rectangle</span><span>(</span><span>120</span><span>,</span> <span>15</span><span>,</span> <span>80</span><span>,</span> <span>80</span><span>,</span> <span>{</span> <span>fill</span><span>:</span> <span>'red'</span> <span>}</span><span>)</span><span>;</span><br>rc<span>.</span><span>circle</span><span>(</span><span>50</span><span>,</span> <span>150</span><span>,</span> <span>80</span><span>,</span> <span>{</span><br>  <span>fill</span><span>:</span> <span>"rgb(10,150,10)"</span><span>,</span><br>  <span>fillWeight</span><span>:</span> <span>3</span> <span>// thicker lines for hachure</span><br><span>}</span><span>)</span><span>;</span><br>rc<span>.</span><span>rectangle</span><span>(</span><span>220</span><span>,</span> <span>15</span><span>,</span> <span>80</span><span>,</span> <span>80</span><span>,</span> <span>{</span><br>  <span>fill</span><span>:</span> <span>'red'</span><span>,</span><br>  <span>hachureAngle</span><span>:</span> <span>60</span><span>,</span> <span>// angle of hachure,</span><br>  <span>hachureGap</span><span>:</span> <span>8</span><br><span>}</span><span>)</span><span>;</span><br>rc<span>.</span><span>rectangle</span><span>(</span><span>120</span><span>,</span> <span>105</span><span>,</span> <span>80</span><span>,</span> <span>80</span><span>,</span> <span>{</span><br>  <span>fill</span><span>:</span> <span>'rgba(255,0,200,0.2)'</span><span>,</span><br>  <span>fillStyle</span><span>:</span> <span>'solid'</span> <span>// solid fill</span><br><span>}</span><span>)</span><span>;</span></code></pre>
<p>Fill styles can be: <strong>hachure</strong>(default), <strong>solid</strong>, <strong>zigzag</strong>, <strong>cross-hatch</strong>, <strong>dots</strong>, <strong>sunburst</strong>, <strong>dashed</strong>, or <strong>zigzag-line</strong></p>
<p><img src="https://roughjs.com/images/m14.png" alt="Rough.js fill examples"></p>
<h2>Sketching style</h2>
<p><img src="https://roughjs.com/images/m4.png" alt="Rough.js rectangle"></p>
<pre><code>rc<span>.</span><span>rectangle</span><span>(</span><span>15</span><span>,</span> <span>15</span><span>,</span> <span>80</span><span>,</span> <span>80</span><span>,</span> <span>{</span> <span>roughness</span><span>:</span> <span>0.5</span><span>,</span> <span>fill</span><span>:</span> <span>'red'</span> <span>}</span><span>)</span><span>;</span><br>rc<span>.</span><span>rectangle</span><span>(</span><span>120</span><span>,</span> <span>15</span><span>,</span> <span>80</span><span>,</span> <span>80</span><span>,</span> <span>{</span> <span>roughness</span><span>:</span> <span>2.8</span><span>,</span> <span>fill</span><span>:</span> <span>'blue'</span> <span>}</span><span>)</span><span>;</span><br>rc<span>.</span><span>rectangle</span><span>(</span><span>220</span><span>,</span> <span>15</span><span>,</span> <span>80</span><span>,</span> <span>80</span><span>,</span> <span>{</span> <span>bowing</span><span>:</span> <span>6</span><span>,</span> <span>stroke</span><span>:</span> <span>'green'</span><span>,</span> <span>strokeWidth</span><span>:</span> <span>3</span> <span>}</span><span>)</span><span>;</span></code></pre>
<h2>SVG Paths</h2>
<p><img src="https://roughjs.com/images/m5.png" alt="Rough.js rectangle"></p>
<pre><code>rc<span>.</span><span>path</span><span>(</span><span>'M80 80 A 45 45, 0, 0, 0, 125 125 L 125 80 Z'</span><span>,</span> <span>{</span> <span>fill</span><span>:</span> <span>'green'</span> <span>}</span><span>)</span><span>;</span><br>rc<span>.</span><span>path</span><span>(</span><span>'M230 80 A 45 45, 0, 1, 0, 275 125 L 275 80 Z'</span><span>,</span> <span>{</span> <span>fill</span><span>:</span> <span>'purple'</span> <span>}</span><span>)</span><span>;</span><br>rc<span>.</span><span>path</span><span>(</span><span>'M80 230 A 45 45, 0, 0, 1, 125 275 L 125 230 Z'</span><span>,</span> <span>{</span> <span>fill</span><span>:</span> <span>'red'</span> <span>}</span><span>)</span><span>;</span><br>rc<span>.</span><span>path</span><span>(</span><span>'M230 230 A 45 45, 0, 1, 1, 275 275 L 275 230 Z'</span><span>,</span> <span>{</span> <span>fill</span><span>:</span> <span>'blue'</span> <span>}</span><span>)</span><span>;</span></code></pre>
<p>SVG Path with simplification:</p>
<p><img src="https://roughjs.com/images/m9.png" alt="Rough.js rectangle"> <img src="https://roughjs.com/images/m10.png" alt="Rough.js rectangle"></p>
<h2>Examples</h2>
<p><img src="https://roughjs.com/images/m6.png" alt="Rough.js map"></p>
<p><a href="https://github.com/rough-stuff/rough/wiki/Examples">View examples here</a></p>
<h2>API &amp; Documentation</h2>
<p><a href="https://github.com/rough-stuff/rough/wiki">Full Rough.js API</a></p>
<h2>Credits</h2>
<p>Core algorithms for drawing lines and ellipse outlines were adapted from <a href="https://www.gicentre.net/software/#/handy/">handy</a> processing lib.</p>
<p>Algorithm to convert SVG arcs to Canvas <a href="https://www.w3.org/TR/SVG/implnote.html">described here</a> was adapted from <a href="https://hg.mozilla.org/mozilla-central/file/17156fbebbc8/content/svg/content/src/nsSVGPathDataParser.cpp#l887">Mozilla codebase</a></p>
<h2>Support this project</h2>
<p>Support development of this project by sponsoring on <a href="https://github.com/sponsors/pshihn">Github Sponsors</a>.<br>
Alternatively, you can also sponsor or <a href="https://opencollective.com/rough">Open Collective</a>.</p>
<p>This project is supported by:</p>

<h2>License</h2>
<p><a href="https://github.com/rough-stuff/rough/blob/master/LICENSE">MIT License</a> (c) <a href="https://twitter.com/preetster">Preet Shihn</a></p>


    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[What We Need Instead of "Web Components" (113 pts)]]></title>
            <link>https://blog.carlana.net/post/2023/web-component-alternative-futures/</link>
            <guid>38731355</guid>
            <pubDate>Fri, 22 Dec 2023 05:50:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.carlana.net/post/2023/web-component-alternative-futures/">https://blog.carlana.net/post/2023/web-component-alternative-futures/</a>, See on <a href="https://news.ycombinator.com/item?id=38731355">Hacker News</a></p>
<div id="readability-page-1" class="page"><section><p>It seems like Web Components are always just on the cusp of finally catching on. They’re like <a href="https://www.howtogeek.com/676963/why-desktop-linux-still-matters/">the year of Linux on the desktop</a> for frontend nerds. I keep reading the latest articles about Web Components as they bubble up on my social media feeds, just hoping that there is something that I missed out on and now they have more substance, but I always end up feeling disappointed. I wrote up my thoughts on Web Components <a href="https://blog.carlana.net/post/2020/web-components/">back in 2020</a>, and it doesn’t feel like the conversation has progressed in all that time. It’s like an <a href="https://en.wikipedia.org/wiki/Eternal_September">Eternal September</a> with people constantly going back to the original promise of Web Components, in spite of the reality having long since shown itself to have fallen short.</p><h2 id="what-went-wrong">What went wrong</h2><p>To TL;DR my earlier piece:</p><blockquote><p>The pitch is “get <strong>semantic elements</strong> from <strong>across the web</strong><i>!</i>” But those are <strong>wrong problems</strong> to try to solve.</p></blockquote><ul><li>Custom elements <strong>aren’t “semantic”</strong> because search engines don’t know what they mean.</li><li>“From across the web” is always going to be <strong>worse for end user performance</strong> than using one coherent, progressive enhancement compatible JavaScript framework per site.</li><li><code>customElements.define</code> is an extremely <strong>clunky API</strong>.</li><li><code>&lt;template&gt;</code> and <code>&lt;slot&gt;</code> are fine, but not a sufficient substitute for a <strong>real templating language</strong>.</li><li>Shadow DOM is also very clunky and solves an <strong>extremely niche</strong> problem.</li></ul><p>Okay, those are the basics, can we all just agree on that?</p><p>Yes, there are circumstances where using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements">customElement API</a> is a convenient way to namespace things and ensure that lazy loaded elements have their constructors called, but they are mostly useful for things like rendering third party embeds in a rich text content well. That doesn’t add up to the name “Web Components” referring to a meaningful thing.</p><p>If you put the name “Web Components” on your collection of JavaScript widgets powered by a lightweight framework, more people will check it out than if you had called them something else. In the end though, it’s just a marketing name for a couple of clunky DOM APIs and a dream that we all wish really existed. The dream is that you could just mix and match widgets regardless of what framework each widget is written in, but the truth is the only way to do that is by paying the full price of including a framework for each web component you include on the page. It’s never going to be a practical choice for sites where end user performance matters.</p><h2 id="browser-makers-to-the-rescue">Browser makers to the rescue</h2><p>The good news is that even though “Web Components” aren’t really A Thing, the browser makers do eventually solve real problems the right way, but sometimes it takes them a while.</p><p>As I <a href="https://blog.carlana.net/post/2020/web-components/">wrote about Shadow DOM</a> at the time:</p><blockquote><p>The fundamental thing that Shadow DOM does is to allow an element of the page to have its own CSS reset. There’s no reason we couldn’t have that as part of CSS itself instead (perhaps by changing the rules for <code>@import</code> to allow it to be nested instead of only at the top level).</p></blockquote><p>As it turns out, that is exactly what happened, so there won’t really be much reason to use Shadow DOM anymore once browser support for <a href="https://css.oddbird.net/scope/explainer/">donut scoping</a> becomes sufficiently widespread. Use CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@scope">scope selectors</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@layer">import layers</a> to create a CSS reset scoped just to your component, and you get all the benefits of Shadow DOM with none of the goth language about “light DOM styles piercing the shadow root” and whatnot.</p><p>So, what should browser makers do instead of pouring more effort into Web Components per se?</p><p>I think everyone agrees that the best example of <a href="https://en.wikipedia.org/wiki/Desire_path">paving the desire lines</a> in the history of the DOM is the relationship between jQuery and querySelectorAll. In 2003, Simon Willison put together <a href="https://simonwillison.net/2003/Mar/25/getElementsBySelector/">a demo version of <code>document.getElementsBySelector</code></a>. <a href="https://jquery.com/">JQuery</a> took the idea and made it into the once ubiquitous <code>$("")</code> API. The browser makers took that and turned it into <code>document.querySelectorAll</code> which made it faster and universally available without linking to jQuery.</p><p>This is the ideal scenario for the evolution of the web: developers worked collectively over a series of years to <strong>find a solution to a recurring problem</strong> and then browser makers <strong>took that solution and made it native</strong> so that it would be universally available and more performant. By contrast, the <code>customElement</code> and Shadow DOM APIs come from <a href="https://en.wikipedia.org/wiki/Web_Components#History">about a decade ago</a> and predate many of the modern techniques for JavaScript frameworks. As a result, they ended up solving the wrong problems, just due to the inexperience that we as an industry had at that time with building large JavaScript application frameworks.</p><p>Instead of trying to improve Web Components as they exist now, what the browser makers should focus on is to find new areas where we can standardize the things developers are already doing. I have three suggestions for what they should look at.</p><h2 id="reactivity">Reactivity</h2><p>Recently, Nolan Lawson wrote <a href="https://nolanlawson.com/2023/12/02/lets-learn-how-modern-javascript-frameworks-work-by-building-one/">Let’s learn how modern JavaScript frameworks work by building&nbsp;one</a>. In the article, Lawson defines “modern” frameworks as having three components:</p><blockquote><ol><li>Using reactivity (e.g. <a href="https://dev.to/this-is-learning/the-evolution-of-signals-in-javascript-8ob">signals</a>) for DOM updates.</li><li>Using cloned templates for DOM rendering.</li><li>Using modern web APIs like <code>&lt;template&gt;</code> and <code>Proxy</code>, which make all of the above easier.</li></ol></blockquote><p>To be honest, I started drafting this blog post before Lawson’s came out, so I was happy to see that he highlighted some of the same aspects of modern frameworks that I was planning to write about here. The <code>&lt;template&gt;</code> and <code>Proxy</code> APIs are fine, and don’t especially need to be improved by browser makers. But there is a lot of room for improving reactivity/signals and DOM rendering. Let’s talk about reactivity first.</p><p>The basic idea of reactivity is that if you have a simple component like a todo item, you want to know when <code>todo.done</code> goes from <code>false</code> to <code>true</code> so that you can trigger changes to other data like <code>todos.count</code> which will go from N to N+1. In <a href="https://blog.carlana.net/post/2020/web-components/">my 2020 post</a>, I called this “the data lifecycle.”</p><p>In Lawson’s article, he creates a <a href="https://codepen.io/nolanlawson-the-selector/pen/qBgKywJ">quick and dirty reactivity system</a> with only about 50 lines of JavaScript, but more realistic reactivity systems like <a href="https://github.com/salesforce/observable-membrane">observable-membrane</a>, <a href="https://www.npmjs.com/package/@vue/reactivity">@vue/reactivity</a>, and <a href="https://github.com/preactjs/signals">@preact/signals</a> are significantly larger and more complex.</p><p>Shifting the core of these systems out of JavaScript libraries and into the browser will allow for significant optimization of the tree of dependencies between reactive data elements. It takes a lot of code to ship a performance optimized algorithm for marking nodes as dirty. For a simple todo app with only a handful of reactive elements, the complexity of the reactivity engine easily swamps the complexity of the application itself. But if the browser were tackling this problem directly, it would be possible to have this code written in C++ or Rust and made maximally efficient because it wouldn’t need to be packaged up, sent to clients, and interpreted from scratch on every page load. The cost could be paid once by a browser team and the benefits enjoyed by web developers and end users everywhere.</p><p>This is clearly a problem that has been solved independently by multiple frameworks. It’s time for the browser to tackle it too.</p><p><em>Update: <a href="https://daverupert.com/">Dave Rupert</a> has <a href="https://mastodon.social/@davatron5000/111620826173161008">pointed out on Mastodon</a> that there is <a href="https://github.com/webcomponents-cg/community-protocols/issues/43">a W3C proposal to add reactive signals</a> to JavaScript that is in the process of being forwarded to TC39. I wish them luck in the proposal process.</em></p><h2 id="morph-dom--virtual-dom">Morph DOM / Virtual DOM</h2><p>Another aspect of modern frameworks that is begging for optimization is DOM rendering. In Lawson’s article, he spends a significant amount of time explaining how to translate proxy calls into efficient DOM updates. For my part, I don’t think it would make sense for the browser makers to enter into the templating wars. The existing <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literal syntax</a> in JavaScript is sufficient to allow developers to create templating systems that make sense to them, or they can keep using solutions like JSX to make templating a compile time feature of their framework. What is needed is an efficient way of merging the HTML results of the template system with the existing browser DOM of a page. If you just have some simple HTML to replace, then writing <code>node.innerHTML = newHTML;</code> is reasonably performant. The problems come if your nodes have event handlers (which can be partially mitigated by delegating to handlers higher in the DOM) or state which need to be preserved across renderings. For example, if you have an input element, using <code>node.innerHTML</code> on one of its parent elements will wipe out the state of the input and lose any text entered into the box. All systems for templating an interactive page need a way to prevent these kinds of problems from happening on each render and only overwriting state that is supposed to be overwritten.</p><p>React famously works around this problem by using a <a href="https://legacy.reactjs.org/docs/faq-internals.html">Virtual DOM</a> that is then reconciled with the browser DOM, but even frameworks that are server focused like <a href="https://htmx.org/">HTMX</a> need <a href="https://github.com/bigskysoftware/htmx/blob/master/src/htmx.js#L1023">a solution for swapping out DOM nodes</a> without wiping out the current element state. Another solution in this vein is <a href="https://www.npmjs.com/package/morphdom">MorphDOM</a> which is eight years old. More recently, <a href="https://alpinejs.dev/">Caleb Porzio</a> has been working on <a href="https://alpinejs.dev/plugins/morph">@alpinejs/morph</a> as a solution to the problem, and he occasionally <a href="https://notesonwork.transistor.fm/">podcasts</a> about the issues he runs into with difficult edge cases. Svelte works around the problem of reconciling VDOMs by pushing as much of the reconciliation process into its compiler as possible, but even for Svelte, there are limitations on what’s possible to do in advance and some things need to be <a href="https://github.com/sveltejs/svelte/blob/b8f3c49e5ff7378df2196d0c9ae24a58e282bb0a/packages/svelte/src/internal/client/render.js#L1519">done on the client</a>. In any event, while compiler side solutions are good, it is also good to have solutions that can work even without a build step.</p><p>However you tackle it, creating a diff between two DOM trees can be an extremely complex process due to the difficulties inherent in figuring out if a node has been entirely replaced or just moved to another place in the tree. There are lots of corner cases to consider and tradeoffs to think about. This is another area really ripe for consolidation by browser makers. If the browser had an API that was capable of reconciling two DOM trees, it could be faster and more efficient. Having this as a browser API would let frameworks stop trying to differentiate themselves on <a href="https://krausest.github.io/js-framework-benchmark/">rendering performance</a> and instead focus on differentiating based on the convenience of their APIs and the depth of their ecosystems. It’s another well tread field that is ready to be paved.</p><h2 id="self-sizing-iframes">Self-sizing iframes</h2><p>Let’s talk about another common developer need not mentioned in Lawson’s article and a technology that I think has fallen off the radars of a lot of developers because it is seen as being a legacy technique.</p><p>The humble <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe">iframe</a> may date back to Internet Explorer 4, but it is actually more powerful than the Shadow DOM because they have stronger style isolation and some <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#allow">real security guarantees</a>. As a result, while iframes have basically no role in modern JavaScript frameworks, they are still extremely common in <a href="https://blog.carlana.net/post/2020/article-bits/">my field of online news publishing</a>. If you have a content well and you want to be able to put some kind of widget in the middle of it and have it work across <a href="https://kinsta.com/knowledgebase/content-management-system/">CMSes</a> and future redesigns, you use an iframe. The examples of this include everything from charts by <a href="https://www.datawrapper.de/">DataWrapper</a> and <a href="https://flourish.studio/">Flourish</a> to videos from <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">YouTube</a> and <a href="https://vimeo.com/">Vimeo</a>.</p><p>The big problem with iframes is that there isn’t a way in CSS to tell an iframe to take on the height of its content. There are good reasons for this. For example, if a host page could learn whether you’re logged into your banking site by just adding an iframe and seeing if it’s the height of the logged in page or the logged out page, that would be bad. As a result, the best way to make a responsively sized iframe is to use JavaScript to pass a message from the contained page to the host page that tells the host the size of the contained page so that the host can then resize the iframe appropriately. There are various libraries that people use to do this, like NPR’s <a href="https://blog.apps.npr.org/pym.js/">Pym.js</a> and <a href="https://apps.npr.org/sidechain/">SideChain</a> or <a href="https://www.npmjs.com/package/@newswire/frames">@newswire/frames</a>.</p><p>In spite of the security concerns, I think this could be worked around with a native solution in which the framing and framed pages use an <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options">X-Frame-Options header</a> or a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy">CSP</a> to tell the browser which sites want to cooperate on allowing a dynamic frame height. Moving this out of JavaScript and into the browser would fix a lot of little glitches that come from polling for window size changes or contained pages with a <code>vh</code> CSS style, and make life easier for anyone who has to create or use an embed. It would also make it possible to use responsive iframes even in contexts where JavaScript isn’t allowed or needs to be heavily restricted.</p><h2 id="wrapping-it-up">Wrapping it up</h2><p>I hope you all understand what I’m arguing for. The dream of Web Components is a good one, but we need new solutions to match the problems encountered by contemporary web developers, not just a continued retreading of a path laid out a decade ago.</p><p>I asked <a href="https://claude.ai/">Claude</a> to write a stunning conclusion to this blog post, and here’s what it came up with:</p><blockquote><p>The promise of “Web Components” capturing imaginations across the web has fallen short. Instead of trying to retrofit new APIs onto old problems, we should look to the future - following the desire lines that developers are already tracing out.</p><p>Reactivity, virtual DOM reconciliation, and self-sizing iframes are all areas where developers have put in hard work over years to find solutions. Now it’s time for browser makers to pave those roads - taking the best of what developers have created and making it faster, more efficient, and universally available.</p><p>This is how real progress happens on the web - not starting from lofty top-down ideas, but from real solutions emerging organically to meet actual needs. If browser makers can shift to enabling what developers are already doing, we’ll wind up with better tools for everyone. The solutions won’t always be sexy, but they’ll be grounded in practicality.</p><p>So let’s learn from the past, meet the present where it lives, and build the web we need - not the one we imagine. The pieces are already coming together if we have the vision to see them.</p></blockquote><p>On that note, let’s keep blazing new trails for the future of the web, before the coming AI-powered coding robots inevitably <a href="https://www.gocomics.com/nancy/2022/11/05">put us all out of work</a>.</p><p><em>P.S. This is the first blog post I’ve published under the name Carlana. <a href="https://tech.lgbt/@carlana/111523437780760674">See here for details</a>.</em></p></section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A structured note-taking app for personal use (183 pts)]]></title>
            <link>https://github.com/penxio/penx</link>
            <guid>38730979</guid>
            <pubDate>Fri, 22 Dec 2023 04:36:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/penxio/penx">https://github.com/penxio/penx</a>, See on <a href="https://news.ycombinator.com/item?id=38730979">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<h2 tabindex="-1" dir="auto">About PenX</h2>
<p dir="auto">PenX is a structured note-taking app designed for personal use. In PenX, Privacy is first important thing. our mission is building a elegant tool to manage personal digital assets, like notes, tasks, ideas, password, documents.</p>
<h2 tabindex="-1" dir="auto">Features</h2>
<ul dir="auto">
<li><strong>Local-First</strong> - You own your data, in spite of the cloud</li>
<li><strong>Privacy-First</strong> - Use End-To-End Encryption to sync data</li>
<li><strong>Open Source</strong> - Trust our code, not our words</li>
<li><strong>Version control</strong> - GitHub-Based Version control Out-of-box</li>
</ul>
<h2 tabindex="-1" dir="auto">About the maker</h2>
<p dir="auto">I'm 0xZion, a freelancer, a full-stack developer, love open-source, now focusing on this application PenX. There's no massive team, no investors, just me currently. If someone is interested in PenX development, can send me a email: <a href="mailto:0xzion.penx@gmail.com">0xzion.penx@gmail.com</a>
.</p>
<h2 tabindex="-1" dir="auto">Primary tech stack</h2>
<ul dir="auto">
<li>Next.js</li>
<li>TypeScript</li>
<li>tRPC</li>
<li>Prisma</li>
<li>NextAuth.js</li>
<li>Slate.js</li>
<li>IndexedDB</li>
</ul>
<h2 tabindex="-1" dir="auto">Development</h2>
<p dir="auto">After clone the repo, in the root dir:</p>
<div dir="auto" data-snippet-clipboard-copy-content="yarn install # Install the dependencies

yarn dev # start web service"><pre>yarn install <span><span>#</span> Install the dependencies</span>

yarn dev <span><span>#</span> start web service</span></pre></div>
<h2 tabindex="-1" dir="auto">⚖️ License</h2>
<p dir="auto">AGPL 3.0</p>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Show HN: Emu2 – A Gemini-like open-source 37B Multimodal Model (138 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=38730143</link>
            <guid>38730143</guid>
            <pubDate>Fri, 22 Dec 2023 02:20:05 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=38730143">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Hello HN,
I'm excited to introduce Emu2, the latest generative multimodal model developed by the Beijing Academy of Artificial Intelligence (BAAI). Emu2 is an open-source initiative that reflects BAAI's commitment to fostering open, secure, and responsible AI research. It's designed to enhance AI's proficiency in handling tasks across various modalities with minimal examples and straightforward instructions.</p><p>Emu2 has demonstrated superior performance over other large-scale models like Flamingo-80B in few-shot multimodal understanding tasks. It serves as a versatile base model for developers, providing a flexible platform for crafting specialized multimodal applications.</p><p>Key features of Emu2 include:</p><p>- A more streamlined modeling framework than its predecessor, Emu.</p><p>- A decoder capable of reconstructing images from the encoder's semantic space.</p><p>- An expansion to 37 billion parameters, boosting both capabilities and generalization.</p><p>BAAI has also released fine-tuned versions, Emu2-Chat for visual understanding and Emu2-Gen for visual generation, which stand as some of the most powerful open-source models available today.</p><p>Here are the resources for those interested in exploring or contributing to Emu2:</p><p>- Project: https://baaivision.github.io/emu2/</p><p>- Model: https://huggingface.co/BAAI/Emu2</p><p>- Code: https://github.com/baaivision/Emu/tree/main/Emu2</p><p>- Demo: https://huggingface.co/spaces/BAAI/Emu2</p><p>- Paper: https://arxiv.org/abs/2312.13286</p><p>We're eager to see how the HN community engages with Emu2 and we welcome your feedback to help us improve. Let's collaborate to push the boundaries of multimodal AI!</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Labs.Google (118 pts)]]></title>
            <link>https://labs.google/</link>
            <guid>38730107</guid>
            <pubDate>Fri, 22 Dec 2023 02:13:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://labs.google/">https://labs.google/</a>, See on <a href="https://news.ycombinator.com/item?id=38730107">Hacker News</a></p>
<div id="readability-page-1" class="page"><div tabindex="0"><div><p><img src="https://storage.googleapis.com/labs-web-prod/Charlene_profile.jpeg" alt="Charlene Wang profile"></p></div><p>#NotebookLM finally made my notes useful. I have saved a lot of PDFs, Google Docs, and ebooks that I want to read but never got a chance to do so. When NotebookLM came out, I created folders of business, philosophy, and lifestyle. Then I created a NotebookLM doc for each of them. I’d go to the corresponding doc to ask questions in each area of my life. Sometimes it’d give me the answer I need or provide the source/context for me to dive deeper. Now I finally get to “use” this knowledge at the right time.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Leonardo Da Vinci’s Self-Powered Cart (2021) (125 pts)]]></title>
            <link>https://selmec.org.uk/articles/112-leonardo-da-vinci-s-self-powered-cart</link>
            <guid>38729707</guid>
            <pubDate>Fri, 22 Dec 2023 01:21:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://selmec.org.uk/articles/112-leonardo-da-vinci-s-self-powered-cart">https://selmec.org.uk/articles/112-leonardo-da-vinci-s-self-powered-cart</a>, See on <a href="https://news.ycombinator.com/item?id=38729707">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="page">
	
        
        
        
        
        <div><p><a href="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-1-large.jpg" target="_blank" title="Click to enlarge"><img alt="Figure 1: Initial Meccano model of Da Vinci’s self-powered cart" src="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-1-small.jpg"></a></p><p><span>Figure 1</span> Initial Meccano model of Da Vinci’s self-powered cart</p>
</div>

<h2>Background</h2>

<p>In June 2016 I was asked to give a presentation and demonstration of Meccano to a class of children at Charlton Church of England Primary School in Dover, who were looking for inspiration for an in-class construction project.</p>

<p>As classroom space was limited I used my <a href="https://selmec.org.uk/articles/104-m4-high-speed-tractor">M4 High-Speed Tractor</a> as the physical demonstrator and showed a 50+ PowerPoint slide presentation to cover the origins of Meccano, typical models from simple to more complex, and to indicate the range and diversity of subject matter possible in Meccano modelling. This was very well received by an attentive and interested class.</p>

<p>An outcome of this event was that I was invited to help supervise a group of the class on a visit to <a href="https://www.dovertransportmuseum.org.uk/" target="_blank">Dover Transport Museum</a>. After recovering from the fact that I had never heard of this venue, on researching it I was amazed to discover the range of vehicles and memorabilia on display there!</p>

<p>On the day of the visit, whilst the children were being mustered and told how to behave during the visit, I had time for a preview of the museum. To my further amazement, in the foyer was displayed a large replica of Da Vinci’s self-powered chariot (figure 2). The vehicle is about 2m square, and is constructed in wood of quite massive proportions. One of the museum staff proved to be conversant with its working and gave me a credible explanation of how it was powered by the leaf springs connected to capstans driving the wheels. He had seen it operate on only one occasion when it travelled about 20 feet under its own power.</p>

<div><p><a href="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-2-large.jpg" target="_blank" title="Click to enlarge"><img alt="Figure 2: An interpretation of Da Vinci’s self-powered cart in Dover Transport Museum" src="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-2-small.jpg"></a></p><p><span>Figure 2</span> An interpretation of Da Vinci’s self-powered cart in Dover Transport Museum</p>
</div>

<p>I believe the wooden version on display had been produced by a university group some years ago, who claimed it to be their interpretation of Da Vinci’s famous sketch. It had been discovered in one of many buildings previously owned by the Ministry of Defence which was now used by the museum.</p>

<p>All this was a complete revelation to me as, over the years, I had studied Da Vinci’s sketch (figure 3) on several occasions, in the hope of reproducing it in Meccano one day, only to give up in despair of deciphering its working from the drawings, an outcome that many before me had also suffered apparently.</p>

<div><p><a href="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-3-large.jpg" target="_blank" title="Click to enlarge"><img alt="Figure 3: Da Vinci’s sketch, circa 1478" src="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-3-small.jpg"></a></p><p><span>Figure 3</span> Da Vinci’s sketch, circa 1478</p>
</div>

<h2>Further Research</h2>

<p>The internet revealed some interesting results — over the centuries, many scholars have puzzled over Da Vinci’s sketch, most of whom assumed that the motive power was provided by leaf springs. This theory was questioned in 1975 by Carlo Pedretti (see reference 1) who proposed that the springs shown in Da Vinci’s sketch were not part of the drive system.</p>

<p>In 1996, Mark Rosheim wrote in a book that he thought that the ‘car’s engines’ were coil springs located in tambours (drums) on the underside of the cart. This led to Professor Paulo Galluzzi, director of the <a href="https://www.museogalileo.it/en" target="_blank">Museo Galileo</a> (formerly the Institute and Museum of the History of Science) in Florence, Italy, commissioning a 3D CAD digital modelling project in 2004 (see reference 2). Videos of the actual and digital cart provide an excellent insight to the machine. The project realised full-size and one-third scale models of the cart, the latter being demonstrated in Florence in April 2004 (figure 4).</p>

<p>The museum referred to the machine as ‘Leonardo’s automobile’, implying it was the first car.</p>

<div><p><img alt="Figure 4: Working model of Da Vinci’s self-propelled cart — note the divided axle!" src="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-4.jpg"></p><p><span>Figure 4</span> Working model of Da Vinci’s self-propelled cart — note the divided axle!</p>
</div>

<h2>The Brake</h2>

<p>As indicated in Da Vinci’s sketch, the machine is equipped with a brake that jambs between the tambour gears. This can be released by a rope allowing the machine to be set in motion by an operator hiding out of sight, thereby adding to the mystique.</p>

<h2>Escapements</h2>

<p>At the top of each vertical drive shaft driven by the tambour gears are rimless spoked wheels into which light leaf springs engage to perform a speed regulating function.</p>

<h2>Programmable Steering</h2>

<p>It transpires that the leaf springs, originally thought to provide traction, were part of the steering system. The gears above each tambour are fitted with a variable number of cams which operate arms, the opposite ends of which are attached to the aforementioned leaf springs. One of these arms is secured to the smaller wheel vertical shaft, thereby turning (steering) the wheel in response to the cam action.</p>

<p>The system means that the machine can only steer in one direction, unless the cams are rearranged.</p>

<p>The number of cams employed allows one or several steering actions per revolution of the large gears to which they are fixed, hence the term ‘programmable steering’.</p>

<p>Tension adjustment of the arm activating the steer motion is by a rack and pinion arrangement — this has led to a proposal that Da Vinci invented the rack and pinion steering mechanism.</p>

<h2>A Question</h2>

<p>After much study and repeated viewing of videos and other references on the subject, I was still unsure as to how these models actually worked. My dilemma was working out how the machine could steer, when the two gears above the tambours are meshed together. This arrangement means that both driving wheels are directly geared together, thereby not allowing any differential rotation. So there would be no point in the divided axle arrangement that Da Vinci’s sketch showed so clearly, and was adopted by Prof. Galluzzi in his model (figure 5). My mental analysis and initial Meccano model confirmed that the machine would not steer effectively without the wheel(s) skidding!</p>

<p>Did Da Vinci overlook this situation, misleading all the subsequent students and model makers? Or have I missed a point?</p>

<div><p><a href="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-5-large.jpg" target="_blank" title="Click to enlarge"><img alt="Figure 5: The 3D CAD model showing the meshing tambour gears and steering mechanism of Prof. Galluzzi’s project" src="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-5-small.jpg"></a></p><p><span>Figure 5</span> The 3D CAD model showing the meshing tambour gears and steering mechanism of Prof. Galluzzi’s project</p>
</div>

<h2>The Meccano Model</h2>

<p>Notwithstanding the question above, figures1 and 6 show my interpretation of Da Vinci’s machine in which the tambour gears do not mesh. Figure 6 is an overhead view of the deck with the Da Vinci machine features annotated and as interpreted in the model.</p>

<div><p><a href="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-6-large.jpg" target="_blank" title="Click to enlarge"><img alt="Figure 6: Features of the Da Vinci self-propelling cart as developed in model form" src="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-6-small.jpg"></a></p><p><span>Figure 6</span> Features of the Da Vinci self-propelling cart as developed in model form</p>
</div>

<p>The obvious next issue was reproducing the clockwork mechanism. It could be imitated by using two Meccano clockwork motors; however, I wanted to copy Da Vinci’s intent, initially at least.</p>

<p>So a search for suitable clock springs that might fit into a Boiler End was made, without any success, until I consulted a horologist friend who referred me to Meadows &amp; Passmore’s <a href="https://www.m-p.co.uk/" target="_blank">website</a> which lists a large range of clock springs. The first hole end spring I ordered (13mm wide x 0.4mm thick x 50mm diameter) proved to be far too powerful to contain within a Boiler End without distortion. The second (10mm x 0.28mm x 28mm) proved easier to handle and I managed to capture the inner end via its hole, onto a Key Bolt with the tip ground off, fitted into a Coupling. The outer end was similarly attached to a shortened Bolt passing through the Boiler End flange.</p>

<p>With the one wheel driven by this spring the cart travelled about two feet! This proved the feasibility of the system, but obviously much more development was required in reducing friction and optimising the spring properties.</p>

<p>The Boiled Ends were attached to 95-tooth Gears which drive 25-tooth Pinions to each Spoked Wheel via 19-tooth Pinions and 50-tooth Contrate Gears. The cams for the ‘programmable steering’ are Threaded Bosses. As it is difficult to replicate the leaf springs of the steering and escapement mechanisms, I improvised using Tension and Compression Springs. The third steered wheel is a 1½” Pulley without Boss. The steering arm rack and pinion adjustment is by plastic parts.</p>

<p>The brake is a Trunnion, the flange of which engages with the 95-tooth gear teeth. This is spring-loaded in engagement to act as a ratchet when winding the springs. It is released by pressing the collar at the rear of the cart; disengagement is maintained by a toggle arrangement.</p>

<p>I was always sceptical of Da Vinci’s ‘escapement’ (speed regulator) and the first method I adopted to replicate it was not very effective. The interrupting action of the ‘flipper’ wastes power as the spring unwinds. With the minimal speed regulation control, it was necessary to fit tyres in the form of ‘Meccano’ elastic wrist bands to the driving wheels in order to prevent instantaneous wheel spin on release of the brake. The performance was short lived in time and distance and the use of compression and tension springs seriously limited the power to the wheels. A much lower rate system is required to minimize the power loss; maybe elastic bands would be better?</p>

<div><p><a href="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-7-large.jpg" target="_blank" title="Click to enlarge"><img alt="Figure 7: Underside view showing one spring installation and other detail" src="https://selmec.org.uk/assets/articles/000112-leonardo-da-vinci-s-self-powered-cart-figure-7-small.jpg"></a></p><p><span>Figure 7</span> Underside view showing one spring installation and other detail</p>
</div>

<h2>Further Development</h2>

<p>A centrifugal governor could be more efficient, so a small governor design is in development which will fit into a 1–1/8” Flanged Wheel. The design precludes the use of friction elements due to its small size, so it relies on the centrifugal force between Collars and the internal cylindrical surface of the wheel flange.</p>

<p>As Meadows &amp; Passmore’s available spring stock was limited, I searched elsewhere and found <a href="https://www.hswalsh.com/" target="_blank">HS Walsh and Sons</a>, who listed a more useful range of sizes for my application. Some of the problems of dealing with and selecting clock springs are difficulty in attaching the ends of the spring to the barrel and hub (this depends on the hole size in the spring ends) and separating the coils in order to make the connections when the spring is coiled! It can be very dangerous if the spring constraint is lost and it is allowed to freely uncoil — an aggressive jack-in-a-box! Presumably clock makers have developed techniques for handling this situation.</p>

<p>A HS Walsh and Sons 11mm x 0.3mm x 30mm spring has been earmarked for further experimentation.</p>

<p>See more <a href="https://selmec.org.uk/models/1034-leonardo-da-vinci-s-self-powered-cart">photos of this model</a>.</p>

<h2>References</h2>

<ol>
	<li>Hooper, John. “Leonardo’s car brought to life.” <em>The Guardian</em>, 24 April 2004, <a href="https://www.theguardian.com/world/2004/apr/24/italy.arts" target="_blank">www.theguardian.com/world/2004/apr/24/italy.arts</a>. Accessed 15 October 2021.</li>
	<li>“Self-Propelling Cart.” <em>Leonardo3 Museum</em>, <a href="https://www.leonardo3.net/en/l3-works/machines/1441-self-propelling-cart.html" target="_blank">www.leonardo3.net/en/l3-works/machines/1441-self-propelling-cart.html</a>. Accessed 15 October 2021.</li>
</ol>
        
<div id="cphContent_mesComments_udpPost">
			
            
            
            
            
            <p><label for="cphContent_mesComments_chkIsPublic">Allow others to view your comment or question</label>
            </p>
            <p>Your e-mail address will not be displayed in public and will not be added to mailing lists. Please see our <span><a href="https://selmec.org.uk/legal-information#privacy-policy">privacy policy</a></span> for further information.</p>
            <hr>
            <p>
                <span id="cphContent_mesComments_spnPostWait">Please wait while we post your message…</span>
            </p>
            </div>

    
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Modern C for Fedora (and the World) (103 pts)]]></title>
            <link>https://lwn.net/Articles/954018/</link>
            <guid>38729278</guid>
            <pubDate>Fri, 22 Dec 2023 00:34:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://lwn.net/Articles/954018/">https://lwn.net/Articles/954018/</a>, See on <a href="https://news.ycombinator.com/item?id=38729278">Hacker News</a></p>
Couldn't get https://lwn.net/Articles/954018/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Polish DRMed trains stop as predicted due to date-based logic-bomb (214 pts)]]></title>
            <link>https://social.hackerspace.pl/@q3k/111618420373868285</link>
            <guid>38729035</guid>
            <pubDate>Fri, 22 Dec 2023 00:10:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://social.hackerspace.pl/@q3k/111618420373868285">https://social.hackerspace.pl/@q3k/111618420373868285</a>, See on <a href="https://news.ycombinator.com/item?id=38729035">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Deep cloning objects in JavaScript (180 pts)]]></title>
            <link>https://www.builder.io/blog/structured-clone</link>
            <guid>38728435</guid>
            <pubDate>Thu, 21 Dec 2023 23:13:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.builder.io/blog/structured-clone">https://www.builder.io/blog/structured-clone</a>, See on <a href="https://news.ycombinator.com/item?id=38728435">Hacker News</a></p>
<div id="readability-page-1" class="page"><div builder-type="blocks" data-builder-component="blog-article" data-builder-content-id="f4ddb8da3c21492ea5ff448b53b33ab5" builder-content-id="f4ddb8da3c21492ea5ff448b53b33ab5" builder-model="blog-article" data-name="blog-article" data-source="Rendered by Builder.io"><p><span><p>Did you know, there's now a native way in JavaScript to do deep copies of objects?</p><p>That's right, this <code>structuredClone</code> function is built into the JavaScript runtime:</p></span></p><div builder-id="builder-36c488f34390432b94a12e0888650a33"><pre><code>const calendarEvent = {
  title: "Builder.io Conf",
  date: new Date(123),
  attendees: ["Steve"]
}

// 😍
const copied = structuredClone(calendarEvent)</code></pre></div><p><span><p>Did you notice in the example above we not only copied the object, but also the nested array, and even the Date object?</p><p>And all works precisely as expected:</p></span></p><div builder-id="builder-33474c248e954493849183f4d0a9523f"><pre><code>copied.attendees // ["Steve"]
copied.date // Date: Wed Dec 31 1969 16:00:00
cocalendarEvent.attendees === copied.attendees // false</code></pre></div><p><span><p>That’s right, <code>structuredClone</code> can not only do the above, but additionally:</p><ul><li>Clone infinitely nested objects and arrays</li><li>Clone circular references</li><li>Clone a wide variety of JavaScript types, such as <code>Date</code>, <code>Set</code>, <code>Map</code>, <code>Error</code>, <code>RegExp</code>, <code>ArrayBuffer</code>, <code>Blob</code>, <code>File</code>, <code>ImageData</code>, and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm#supported_types" rel="noopener noreferrer" target="_blank">many more</a></li><li>Transfer any <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Transferable_objects" rel="noopener noreferrer" target="_blank">transferable objects</a></li></ul><p>So for example, this madness would even work as expected:</p></span></p><div builder-id="builder-f41b32bcf42742d2901b0ee215b78b0d"><pre><code>const kitchenSink = {
  set: new Set([1, 3, 3]),
  map: new Map([[1, 2]]),
  regex: /foo/,
  deep: { array: [ new File(someBlobData, 'file.txt') ] },
  error: new Error('Hello!')
}
kitchenSink.circular = kitchenSink

// ✅ All good, fully and deeply copied!
const clonedSink = structuredClone(kitchenSink)</code></pre></div><p builder-id="builder-c5d1bb87545c44049bdc9f0df7d7911f"><a href="#why-not-just-object-spread" id="why-not-just-object-spread"><span><h2>Why not just object spread?</h2></span></a></p><p><span><p>It is important to note we are talking about a deep copy. If you just need to do a shallow copy, aka a copy that does not copy nested objects or arrays, then we can just do an object spread:</p></span></p><div builder-id="builder-abe99c668ccd45b49b77971cd9794fc6"><pre><code>const simpleEvent = {
  title: "Builder.io Conf",
}
// ✅ no problem, there are no nested objects or arrays
const shallowCopy = {...calendarEvent}</code></pre></div><p><span><p>Or even one of these, if you prefer</p></span></p><div builder-id="builder-5967b33bd4214a1b890c0351971b19e9"><pre><code>const shallowCopy = Object.assign({}, simpleEvent)
const shallowCopy = Object.create(simpleEvent)</code></pre></div><p><span><p>But as soon as we have nested items, we run into trouble:</p></span></p><div builder-id="builder-c2218c84d0e047d7b50bd9716eeb176b"><pre><code>const calendarEvent = {
  title: "Builder.io Conf",
  date: new Date(123),
  attendees: ["Steve"]
}

const shallowCopy = {...calendarEvent}

// 🚩 oops - we just added "Bob" to both the copy *and* the original event
shallowCopy.attendees.push("Bob")

// 🚩 oops - we just updated the date for the copy *and* original event
shallowCopy.date.setTime(456)</code></pre></div><p><span><p>As you can see, we did not make a full copy of this object.</p><p>The nested date and array are still a shared reference between both, which can cause us major issues if we want to edit those thinking we are only updating the copied calendar event object.</p></span></p><p builder-id="builder-980b1f7bc0364b808c196a4df1b4c2c5"><a href="#why-not-code-json-parse-json-stringify-x-code" id="why-not-code-json-parse-json-stringify-x-code"><span><h2>Why not <code>JSON.parse(JSON.stringify(x))</code> ?</h2></span></a></p><p><span><p>Ah yes, this trick. It is actually a great one, and is surprisingly performant, but has some shortcomings that <code>structuredClone</code> addresses.</p><p>Take this as an example:</p></span></p><div builder-id="builder-2e2500c35b304aadabc88ab3ed5f93e8"><pre><code>const calendarEvent = {
  title: "Builder.io Conf",
  date: new Date(123),
  attendees: ["Steve"]
}

// 🚩 JSON.stringify converted the `date` to a string
const problematicCopy = JSON.parse(JSON.stringify(calendarEvent))</code></pre></div><p><span><p>If we log <code>problematicCopy</code>, we would get:</p></span></p><div builder-id="builder-6e83229f45ba4872aa18b7b0f43b9247"><pre><code>{
  title: "Builder.io Conf",
  date: "1970-01-01T00:00:00.123Z"
  attendees: ["Steve"]
}</code></pre></div><p><span><p>That’s not what we wanted! <code>date</code> is supposed to be a <code>Date</code> object, not a string.</p><p>This happened because <code>JSON.stringify</code> can only handle basic objects, arrays, and primitives. Any other type can be handled in hard to predict ways. For instance, Dates are converted to a string. But a <code>Set</code> is simply converted to <code>{}</code>.</p><p><code>JSON.stringify</code> even completely ignores certain things, like <code>undefined</code> or functions.</p><p>For instance, if we copied our <code>kitchenSink</code> example with this method:</p></span></p><div builder-id="builder-ac9e622fa5c4476b87a761e73520c349"><pre><code>const kitchenSink = {
  set: new Set([1, 3, 3]),
  map: new Map([[1, 2]]),
  regex: /foo/,
  deep: { array: [ new File(someBlobData, 'file.txt') ] },
  error: new Error('Hello!')
}

const veryProblematicCopy = JSON.parse(JSON.stringify(kitchenSink))</code></pre></div><p><span><p>We would get:</p></span></p><div builder-id="builder-12cab9f8152e403aaa3a1a9fa9ca6785"><pre><code>{
  "set": {},
  "map": {},
  "regex": {},
  "deep": {
    "array": [
      {}
    ]
  },
  "error": {},
}</code></pre></div><p><span><p>Ew!</p><p>Oh yeah, and we had to remove the circular reference we originally had for this, as <code>JSON.stringify</code> simply throws errors if it encounters one of those.</p><p>So while this method can be great if our requirements fit what it can do, there is a lot that we can do with <code>structuredClone</code> (aka everything above that we failed to do here) that this method cannot.</p></span></p><p builder-id="builder-6016311df60e48b4a720e9e6fd5bb96f"><a href="#why-not-code-clone-deep-code" id="why-not-code-clone-deep-code"><span><h2>Why not <code>_.cloneDeep</code>?</h2></span></a></p><p><span><p>To date, Lodash’s <code>cloneDeep</code> function has been a very common solution to this problem.</p><p>And this does, in fact, work as expected:</p></span></p><div builder-id="builder-68dd9a4555a24c7cb7900843b7c69ad3"><pre><code>import cloneDeep from 'lodash/cloneDeep'

const calendarEvent = {
  title: "Builder.io Conf",
  date: new Date(123),
  attendees: ["Steve"]
}

// ✅ All good!
const clonedEvent = structuredClone(calendarEvent)</code></pre></div><p><span><p>But, there is just one caveat here. According to the <a href="https://marketplace.visualstudio.com/items?itemName=wix.vscode-import-cost">Import Cost</a> extension in my IDE, that prints the kb cost of anything I import, this one function comes in at a whole 17.4kb minified (5.3kb gzipped):</p></span></p><div builder-id="builder-02edcbbc54254ea193c56e7495ce4ba5"><picture><source srcset="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=100 100w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=200 200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=400 400w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=800 800w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=1200 1200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=1600 1600w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=2000 2000w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=548 548w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=728 728w" type="image/webp"><img alt="Screenshot of the import cost of 'lodash/cloneDeep' at 5.3kb gzipped" loading="lazy" src="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=800" srcset="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=100 100w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=200 200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=400 400w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=800 800w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=1200 1200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=1600 1600w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=2000 2000w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=548 548w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?width=728 728w" sizes="(max-width: 638px) 86vw,  (max-width: 998px) 73vw, 58vw"></picture></div><p><span><p>And that assumes you import just that function. If you instead import the more common way, not realizing that tree shaking doesn’t always work the way you hoped, you could accidentally import up to <a href="https://bundlephobia.com/package/lodash@4.17.21">25kb</a> just for this one function 😱</p></span></p><div builder-id="builder-0c88e47c09194f36a6703a0e7708a129"><picture><source srcset="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=100 100w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=200 200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=400 400w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=800 800w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=1200 1200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=1600 1600w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=2000 2000w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=548 548w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=728 728w" type="image/webp"><img alt="Screenshot of the import cost of 'lodash' at 25.2kb gzipped" loading="lazy" src="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=800" srcset="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=100 100w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=200 200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=400 400w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=800 800w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=1200 1200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=1600 1600w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=2000 2000w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=548 548w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?width=728 728w" sizes="(max-width: 638px) 86vw,  (max-width: 998px) 73vw, 58vw"></picture></div><p><span><p>While that will not be the end of the world to anyone, it’s simply not necessary in our case, not when browsers already have <code>structuredClone</code> built in.</p></span></p><p builder-id="builder-273f873f903749e99cf0e82640fb14e4"><a href="#what-can-code-structured-clone-code-em-not-em-clone" id="what-can-code-structured-clone-code-em-not-em-clone"><span><h2>What can <code>structuredClone</code> <em>not</em> clone</h2></span></a></p><p builder-id="builder-35b8f10d3d8148b89e950c1335546219"><a href="#functions-cannot-be-cloned" id="functions-cannot-be-cloned"><span><h3>Functions cannot be cloned</h3></span></a></p><p><span><p>They will a throw a&nbsp;<code>DataCloneError</code>&nbsp;exception:</p></span></p><div builder-id="builder-16a1f929c8bf45db944fd2348a3268b6"><pre><code>// 🚩 Error!
structuredClone({ fn: () =&gt; { } })</code></pre></div><p builder-id="builder-45eb949a7f214b3d9538288483981786"><a href="#dom-nodes" id="dom-nodes"><span><h3>DOM nodes</h3></span></a></p><p><span><p>Also throws a <code>DataCloneError</code>&nbsp;exception:</p></span></p><div builder-id="builder-5646bd3bd658482f80566716fcf7282b"><pre><code>// 🚩 Error!
structuredClone({ el: document.body })</code></pre></div><p builder-id="builder-62ed3c96704d475896635daf18e8e15a"><a href="#property-descriptors-setters-and-getters" id="property-descriptors-setters-and-getters"><span><h3>Property descriptors, setters, and getters</h3></span></a></p><p><span><p>As well as similar metadata-like features are not cloned.</p><p>For instance, with a getter, the resulting value is cloned, but not the getter function itself (or any other property metadata):</p></span></p><div builder-id="builder-58148ca0ac31495fbb005565b4540dad"><pre><code>structuredClone({ get foo() { return 'bar' } })
// Becomes: { foo: 'bar' }</code></pre></div><p builder-id="builder-d244355296314a628e1d46c9c4fc90bd"><a href="#object-prototypes" id="object-prototypes"><span><h3>Object prototypes</h3></span></a></p><p><span><p>The prototype chain is not walked or duplicated. So if you clone an instance of <code>MyClass</code>, the cloned object will no longer be known to be an instance of this class (but all valid properties of this class will be cloned)</p></span></p><div builder-id="builder-8390f0d92e00423f93c5f6a1d2d0f7a9"><pre><code>class MyClass { 
  foo = 'bar' 
  myMethod() { /* ... */ }
}
const myClass = new MyClass()

const cloned = structuredClone(myClass)
// Becomes: { foo: 'bar' }

cloned instanceof myClass // false</code></pre></div><p builder-id="builder-f91c468430904bec8aa2fa661353de29"><a href="#full-list-of-supported-types" id="full-list-of-supported-types"><span><h3>Full list of supported types</h3></span></a></p><p><span><p>More simply put, anything not in the below list cannot be cloned:</p></span></p><p><span><p><code>Array</code>, <code>ArrayBuffer</code>, <code>Boolean</code>, <code>DataView</code>, <code>Date</code>, <code>Error</code>&nbsp;types (those specifically listed below), <code>Map</code> , <code>Object</code> but only plain objects (e.g. from object literals), <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#primitive_values">Primitive types</a>, except&nbsp;<code>symbol</code> (aka <code>number</code>, <code>string</code>, <code>null</code>, <code>undefined</code>, <code>boolean</code>, <code>BigInt</code>), <code>RegExp</code>, <code>Set</code>, <code>TypedArray</code></p></span></p><p builder-id="builder-bf4d36d1b5764e2c804c52b01b9fa5b4"><a href="#error-types" id="error-types"><span><h4>Error types</h4></span></a></p><p><span><p><code>Error</code>, <code>EvalError</code>, <code>RangeError</code>, <code>ReferenceError</code> , <code>SyntaxError</code>, <code>TypeError</code>, <code>URIError</code></p></span></p><p><span><p><code>AudioData</code>, <code>Blob</code>, <code>CryptoKey</code>, <code>DOMException</code>, <code>DOMMatrix</code>, <code>DOMMatrixReadOnly</code>, <code>DOMPoint</code>, <code>DomQuad</code>, <code>DomRect</code>, <code>File</code>, <code>FileList</code>, <code>FileSystemDirectoryHandle</code>, <code>FileSystemFileHandle</code>, <code>FileSystemHandle</code>, <code>ImageBitmap</code>, <code>ImageData</code>, <code>RTCCertificate</code>, <code>VideoFrame</code></p></span></p><p builder-id="builder-4b44994d751f4891a7982587725fcdcd"><a href="#browser-and-runtime-support" id="browser-and-runtime-support"><span><h2>Browser and runtime support</h2></span></a></p><p><span><p>And here is the best part - <code>structuredClone</code> is supported in all major browsers, and even Node.js and Deno.</p><p>Just note the caveat with Web Workers having more limited support:</p></span></p><div builder-id="builder-c0ca0549766546a0b613e0cff7247bbf"><picture><source srcset="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=100 100w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=200 200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=400 400w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=800 800w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=1200 1200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=1600 1600w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=2000 2000w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=548 548w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=728 728w" type="image/webp"><img alt="Browser support table - screenshot from the link directly below this image" loading="lazy" src="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=800" srcset="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=100 100w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=200 200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=400 400w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=800 800w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=1200 1200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=1600 1600w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=2000 2000w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=548 548w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?width=728 728w" sizes="(max-width: 638px) 86vw,  (max-width: 998px) 73vw, 58vw"></picture></div><p builder-id="builder-90b3b91591394d9dabbc973da1adb95c"><a href="#conclusion" id="conclusion"><span><h2>Conclusion</h2></span></a></p><p><span><p>It’s been a long time coming, but we finally now have <code>structuredClone</code> to make deep cloning objects in JavaScript a breeze.  Thank you, <a href="https://web.dev/structured-clone/">Surma</a>.</p></span></p><p builder-id="builder-432467a43d414d05baec3d953b211180"><a href="#about-me" id="about-me"><span><h2>About Me</h2></span></a></p><p><span><p>Hi! I'm&nbsp;<a href="https://twitter.com/Steve8708?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" rel="noopener noreferrer" target="_blank">Steve</a>, CEO of&nbsp;<a href="https://www.builder.io/" rel="noopener noreferrer" target="_blank">Builder.io</a>.</p><p>We make a way to drag + drop with your components to create pages and other CMS content on your site or app, visually.</p><p>You can read more about how this can improve your workflow <a href="https://www.builder.io/blog/headless-cms-workflow" rel="noopener noreferrer" target="_blank">here</a>.</p><p>You may find it interesting or useful:</p></span></p><div data-name="symbol" data-source="Rendered by Builder.io" data-model="symbol" builder-id="builder-672f1c59927048908c2546489cd63e61" builder-type="blocks" data-builder-component="symbol" data-builder-content-id="02714711c4b647959d015e34679ca6ee" builder-content-id="02714711c4b647959d015e34679ca6ee" builder-model="symbol"><template data-template-variant-id="6d0b491a00e64dce9781e3c0a9839b71"><div class="builder-content" builder-content-id="6d0b491a00e64dce9781e3c0a9839b71" builder-model="symbol"><div data-builder-component="symbol" data-builder-content-id="de784470c6884829b5e7c7603f4c51ed"><div class="builder-blocks css-h47494" builder-type="blocks"><style data-emotion-css="kf99zz">.css-kf99zz.builder-block{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;margin-left:-130px;margin-right:-260px;margin-top:10px;z-index:11px;}@media only screen and (max-width:991px){.css-kf99zz.builder-block{margin-left:0;margin-right:0;}}</style><div class="builder-block builder-7c77e4f236f848b48c79a96f49072518 css-kf99zz" builder-id="builder-7c77e4f236f848b48c79a96f49072518"><style data-emotion-css="jgc6i5">.css-jgc6i5.builder-block{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;margin-top:50px;width:100%;min-height:20px;min-width:20px;overflow:hidden;mix-blend-mode:multiply;margin-left:auto;margin-right:auto;max-width:405px;}@media only screen and (max-width:991px){.css-jgc6i5.builder-block{margin-top:10px;}}</style><div class="builder-block builder-661f4bd90a3547fa85f50126d1418c87 dark-mode-invert css-jgc6i5" builder-id="builder-661f4bd90a3547fa85f50126d1418c87"><picture><source srcset="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F83677fb912dd4a539a3f3bb5c0c82de1?format=webp&amp;width=100 100w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F83677fb912dd4a539a3f3bb5c0c82de1?format=webp&amp;width=200 200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F83677fb912dd4a539a3f3bb5c0c82de1?format=webp&amp;width=400 400w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F83677fb912dd4a539a3f3bb5c0c82de1?format=webp&amp;width=800 800w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F83677fb912dd4a539a3f3bb5c0c82de1?format=webp&amp;width=1200 1200w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F83677fb912dd4a539a3f3bb5c0c82de1?format=webp&amp;width=1600 1600w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F83677fb912dd4a539a3f3bb5c0c82de1?format=webp&amp;width=2000 2000w, https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F83677fb912dd4a539a3f3bb5c0c82de1?format=webp&amp;width=405 405w" type="image/webp"></picture><style data-emotion-css="1sn22t4">.css-1sn22t4{width:100%;padding-top:35.4%;pointer-events:none;font-size:0;}</style><div class="builder-image-sizer css-1sn22t4"> </div></div><div class="builder-block builder-296e83c56835496a896d380e22d2fbd9 builder-has-component css-logohe" builder-id="builder-296e83c56835496a896d380e22d2fbd9"><style data-emotion-css="1fuo4gk">.css-1fuo4gk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (max-width:991px){.css-1fuo4gk{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}}</style><div class="builder-columns css-1fuo4gk"><style data-emotion-css="15p9q9i">.css-15p9q9i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;line-height:normal;width:calc(58.333% - 15px);margin-left:0;}.css-15p9q9i > .builder-blocks{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}@media (max-width:991px){.css-15p9q9i{width:100%;margin-left:0;}}</style><div class="builder-column css-15p9q9i"><div class="builder-blocks builder-blocks-child css-h47494" builder-type="blocks" builder-parent-id="builder-296e83c56835496a896d380e22d2fbd9"><style data-emotion-css="8r3wet">.css-8r3wet.builder-block{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;margin-top:0px;min-height:20px;min-width:20px;width:100%;border-radius:5px;overflow:hidden;margin-right:auto;}</style><div class="builder-block builder-50cefa294545480a96166693c05e207d css-8r3wet" builder-id="builder-50cefa294545480a96166693c05e207d"><style data-emotion-css="79elbk">.css-79elbk{position:relative;}</style><div class="css-79elbk"><style data-emotion-css="cz4v3a">.css-cz4v3a{width:100%;height:100%;object-fit:cover;object-position:center;z-index:2;border-radius:1px;position:absolute;}</style><video autoplay="" muted="" loop="" class="builder-video css-cz4v3a"></video><style data-emotion-css="m5569v">.css-m5569v{width:100%;padding-top:58.41%;pointer-events:none;font-size:0;}</style><div class="css-m5569v"></div></div></div></div></div><style data-emotion-css="1xaxpyc">.css-1xaxpyc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;line-height:normal;width:calc(41.667% - 15px);margin-left:30px;}.css-1xaxpyc > .builder-blocks{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}@media (max-width:991px){.css-1xaxpyc{width:100%;margin-left:0;}}</style><div class="builder-column css-1xaxpyc"><div class="builder-blocks builder-blocks-child css-h47494" builder-type="blocks" builder-parent-id="builder-296e83c56835496a896d380e22d2fbd9"><style data-emotion-css="9f7tx5">.css-9f7tx5.builder-block{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;margin-top:auto;margin-bottom:auto;}</style><div class="builder-block builder-2487409df20c4d6ea916563459503bd5 css-9f7tx5" builder-id="builder-2487409df20c4d6ea916563459503bd5"><style data-emotion-css="1718vnj">.css-1718vnj.builder-block{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;margin-top:0px;height:auto;font-size:24px;}@media only screen and (max-width:991px){.css-1718vnj.builder-block{margin-top:28px;}}</style><div class="builder-block builder-01c085f9d331407291e18ae00c2e705f builder-has-component css-1718vnj" builder-id="builder-01c085f9d331407291e18ae00c2e705f"><span class="builder-text css-1qggkls"><p style="">Visually build with your components</p></span></div><style data-emotion-css="1mbueh1">.css-1mbueh1.builder-block{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;margin-top:12px;height:auto;}@media only screen and (max-width:991px){.css-1mbueh1.builder-block{margin-top:13px;}}</style><div class="builder-block builder-522f74098b38447289e1bbe3e525c9d6 fix-line-height builder-has-component css-1mbueh1" builder-id="builder-522f74098b38447289e1bbe3e525c9d6"><span class="builder-text css-1qggkls"><p style=""><a href="https://www.builder.io/m/developers" rel="noopener noreferrer" target="_blank">Builder.io</a>&nbsp;is a visual editor that connects to any site or app and lets you&nbsp;<a href="https://www.builder.io/m/products" rel="noopener noreferrer" target="_blank">drag and drop</a>&nbsp;with&nbsp;<a href="https://www.builder.io/m/developers" rel="noopener noreferrer" target="_blank">your components</a>.<br></p>
</span></div><style data-emotion-css="etaca8">.css-etaca8.builder-block{position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;margin-right:auto;margin-top:22px;}@media only screen and (max-width:991px){.css-etaca8.builder-block{margin-top:16px;}}@media only screen and (max-width:640px){.css-etaca8.builder-block{margin-top:17px;}}</style><div class="builder-block builder-04ce70c139f74cba9ce6b77cd2b59966 builder-has-component css-etaca8" builder-id="builder-04ce70c139f74cba9ce6b77cd2b59966"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="builder-columns css-k008qs"><style data-emotion-css="1ki2g2t">.css-1ki2g2t{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;line-height:normal;width:calc(50% - 10px);margin-left:0;}.css-1ki2g2t > .builder-blocks{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="builder-column css-1ki2g2t"><div class="builder-blocks builder-blocks-child css-h47494" builder-type="blocks" builder-parent-id="builder-04ce70c139f74cba9ce6b77cd2b59966"><style data-emotion-css="e9su4y">.css-e9su4y.builder-block{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;margin-top:0px;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding-top:10px;padding-bottom:10px;padding-left:35px;padding-right:35px;background-color:rgba(0,0,0,1);color:white;border-radius:8px;text-align:center;cursor:pointer;width:auto;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;font-family:"Poppins",sans-serif;font-size:16px;line-height:26px;-webkit-letter-spacing:.5px;-moz-letter-spacing:.5px;-ms-letter-spacing:.5px;letter-spacing:.5px;margin-right:auto;white-space:nowrap;}@media only screen and (max-width:991px){.css-e9su4y.builder-block{font-size:16px;line-height:18px;padding-left:23px;padding-right:23px;margin-top:0px;padding-top:13px;padding-bottom:13px;}}</style><a role="button" href="https://builder.io/signup" target="_blank" class="builder-block builder-bbfd1a8be4e54fa0bc8f887da6d8a83c builder-has-component css-e9su4y" builder-id="builder-bbfd1a8be4e54fa0bc8f887da6d8a83c">Try it out</a></div></div><style data-emotion-css="1q570rn">.css-1q570rn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;line-height:normal;width:calc(50% - 10px);margin-left:20px;}.css-1q570rn > .builder-blocks{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="builder-column css-1q570rn"><div class="builder-blocks builder-blocks-child css-h47494" builder-type="blocks" builder-parent-id="builder-04ce70c139f74cba9ce6b77cd2b59966"><style data-emotion-css="1t30id">.css-1t30id.builder-block{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;margin-top:0px;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding-top:10px;padding-bottom:10px;padding-left:0px;padding-right:0px;color:rgba(0,0,0,1);border-radius:8px;text-align:center;cursor:pointer;width:auto;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;font-family:"Poppins",sans-serif;font-size:16px;line-height:26px;-webkit-letter-spacing:.5px;-moz-letter-spacing:.5px;-ms-letter-spacing:.5px;letter-spacing:.5px;margin-right:auto;margin-left:15px;}@media only screen and (max-width:991px){.css-1t30id.builder-block{font-size:16px;line-height:18px;padding-left:0px;padding-right:18px;margin-top:auto;margin-left:2px;min-width:110px;margin-bottom:auto;}}</style><a role="button" href="/m/developers" target="_blank" class="builder-block builder-b73a1d9611ee46b180da86ffdd53fa77 builder-has-component css-1t30id" builder-id="builder-b73a1d9611ee46b180da86ffdd53fa77">Learn more</a></div></div></div></div><div class="builder-block builder-dde61f974a184a338de6b5e43b675061 builder-has-component css-nwuw40" builder-id="builder-dde61f974a184a338de6b5e43b675061"><div class="code-block css-1ijwl8d"><button class="MuiButtonBase-root MuiIconButton-root copy-to-clipboard css-185ibg" tabindex="0" type="button" title="Copy code to clipboard"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root css-joy3r2" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"></path></svg></span></button><div class=""><pre style="display:block;overflow-x:auto;padding:0.5em;color:#ddd;background:#282c34;font-family:Menlo, Monaco, &quot;Courier New&quot;, monospace;line-height:1em;font-size:1.2em"><code class="language-jsx">// Dynamically render your components
export function MyPage({ json }) {
  return &lt;BuilderComponent content={json} /&gt;
}

registerComponents([MyHero, MyProducts])</code></pre></div></div></div></div></div></div></div></div></div><style data-emotion-css="1mvsfya">.css-1mvsfya.builder-block{height:0;width:0;display:inline-block;opacity:0;overflow:hidden;pointer-events:none;}</style><img role="presentation" aria-hidden="true" src="https://cdn.builder.io/api/v1/pixel?apiKey=YJIGb4i01jvw0SRdL5Bt" class="builder-block builder-pixel-2ua8393fpcb css-1mvsfya" builder-id="builder-pixel-2ua8393fpcb"></div></div></div></template><div builder-id="builder-7fd4bfcb2f3540cca129a9e10d1254f5" builder-type="blocks" builder-parent-id="builder-fd60c008f44a4c46be618e21afe30be5" data-builder-component="symbol" data-builder-content-id="de784470c6884829b5e7c7603f4c51ed" builder-content-id="de784470c6884829b5e7c7603f4c51ed" builder-model="symbol"><p><span><div><p>Introducing Visual Copilot: a new AI model to convert Figma designs to high quality code in a click.</p><p>No setup needed. 100% free. Supports all popular frameworks.</p></div>
</span></p><p><a role="button" href="https://builder.io/signup" target="_blank" builder-id="builder-a85aff888e7849f98193f66bd662f27e">Try Visual Copilot</a></p></div></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How to Turn Off Google's "Privacy Sandbox" Ad Tracking–and Why You Should (235 pts)]]></title>
            <link>https://www.eff.org/deeplinks/2023/09/how-turn-googles-privacy-sandbox-ad-tracking-and-why-you-should</link>
            <guid>38728278</guid>
            <pubDate>Thu, 21 Dec 2023 22:57:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.eff.org/deeplinks/2023/09/how-turn-googles-privacy-sandbox-ad-tracking-and-why-you-should">https://www.eff.org/deeplinks/2023/09/how-turn-googles-privacy-sandbox-ad-tracking-and-why-you-should</a>, See on <a href="https://news.ycombinator.com/item?id=38728278">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <article role="article">
  
  
  <div><p><span>Google </span><a href="https://www.privacysandbox.com/news/privacy-sandbox-for-the-web-reaches-general-availability"><span>has rolled out</span></a><span> "Privacy Sandbox," a Chrome </span><a href="https://www.eff.org/deeplinks/2019/08/dont-play-googles-privacy-sandbox-1"><span>feature first announced back in 2019</span></a><span> that, among other things, exchanges third-party cookies—the most common form of tracking technology—for what the company is now calling "Topics." </span><a href="https://blog.google/products/chrome/get-know-new-topics-api-privacy-sandbox/"><span>Topics is a response</span></a><span> to pushback against Google’s proposed Federated Learning of Cohorts (FLoC), which we called "</span><a href="https://www.eff.org/deeplinks/2021/03/googles-floc-terrible-idea"><span>a terrible idea</span></a><span>" because it gave Google even more control over advertising in its browser while not truly protecting user privacy. While there have been some changes to how this works since 2019, Topics is still tracking your internet use for Google’s behavioral advertising. </span></p>
<p><span>If you use Chrome, you can disable this feature through a series of three confusing settings.</span></p>
<p><span>With the version of the Chrome browser released in September 2023, Google tracks your web browsing history and generates a list of advertising "topics" based on the web sites you visit. This works as you might expect. At launch there are </span><a href="https://github.com/patcg-individual-drafts/topics/blob/main/taxonomy_v2.md"><span>almost 500 advertising categories</span></a><span>—like "Student Loans &amp; College Financing," "Parenting," or "Undergarments"—that you get dumped into based on whatever you're reading about online. A site that supports Privacy Sandbox will ask Chrome what sorts of things you're supposedly into, and then display an ad accordingly.&nbsp;</span></p>
<p><span>The idea is that instead of the dozens of third-party cookies placed on websites by different advertisers and tracking companies, Google itself will track your interests in the browser itself, controlling even more of the advertising ecosystem than it already does. Google calls this “enhanced ad privacy,” perhaps leaning into the idea that starting in 2024 they plan to “phase out” the third-party cookies that many advertisers currently use to track people. But the company will still gobble up your browsing habits to serve you ads, preserving its bottom line in a world where competition on privacy is pushing it to phase out third-party cookies.&nbsp;</span></p>
<p><span>Google plans to test Privacy Sandbox throughout 2024. Which means that for the next year or so, third-party cookies will continue to collect and share your data in Chrome.</span></p>
<p><span>The new Topics improves somewhat over the 2019 FLoC. It does not use the FLoC ID, a number that many worried would be used to fingerprint you. The ad-targeting </span><a href="https://github.com/patcg-individual-drafts/topics/blob/main/taxonomy_v2.md"><span>topics are all public on GitHub</span></a><span>, hopefully avoiding any clearly sensitive categories such as race, religion, or sexual orientation. Chrome's ad privacy controls, which we detail below, allow you to see what sorts of interest categories Chrome puts you in, and remove any topics you don't want to see ads for. There's also a simple means to opt out, which </span><a href="https://amifloced.org/"><span>FLoC never really had during testing</span></a><span>.</span></p>
<p><span>Other browsers, like Firefox and Safari, baked in privacy protections from third-party cookies in 2019 and 2020, respectively. Neither of those browsers has anything like Privacy Sandbox, which makes them better options if you'd prefer more privacy.&nbsp;</span></p>
<p><span>Google referring to any of this as “privacy” is deceiving. Even if it's better than third-party cookies, the Privacy Sandbox is still tracking, it's just done by one company instead of dozens. Instead of waffling between different tracking methods, even with mild improvements, we should work </span><a href="https://www.eff.org/deeplinks/2022/03/ban-online-behavioral-advertising"><span>towards a world without behavioral ads</span></a><span>.</span></p>
<p><span>But if you're sticking to Chrome, you can at least turn these features off.</span></p>
<h3><span>How to Disable Privacy Sandbox</span></h3>
<p><img src="https://www.eff.org/files/2023/09/28/screenshot_2023-09-21_at_8.32.41_am.png" width="2542" height="1730" alt="Screenshot of Chrome browser with &quot;enhanced ad privacy in Chrome&quot; page "><span>Depending on when you last updated Chrome, you may have already received a pop-up asking you to agree to “Enhanced ad privacy in Chrome.” If you just clicked the big blue button that said “Got it” to make the pop-up go away, you opted yourself in. But you can still </span><a href="https://support.google.com/chrome/answer/13355898"><span>get back to the opt out page easily enough</span></a><span> by clicking the </span><b>Three-dot icon (⋮)</b><span> &gt; </span><b>Settings</b><span> &gt; </span><b>Privacy &amp; Security</b><span> &gt; </span><b>Ad Privacy</b><span> page. Here you'll find this screen with three different settings:</span></p>
<p><span><img src="https://www.eff.org/files/2023/09/28/google_ad_topics.png" width="2468" height="1380" alt=""></span></p>
<ul>
<li><b>Ad topics</b><span>: This is the fundamental component of Privacy Sandbox that generates a list of your interests based on the websites you visit. If you leave this enabled, you'll eventually get a list of all your interests, which are used for ads, as well as the ability to block individual topics. The topics roll over every four weeks (up from weekly in the FLOCs proposal) and </span><a href="https://www.privacysandbox.com/news/how-privacy-sandbox-raises-the-bar-for-ads-privacy"><span>random ones</span></a><span> will be thrown in for good measure. You can disable this entirely by setting the toggle to "Off."</span></li>
<li><b>Site-suggested ads</b><span>: This confusingly named toggle is what allows advertisers to do what’s called </span><a href="https://en.wikipedia.org/wiki/Behavioral_retargeting"><span>"remarketing" or "retargeting,"</span></a><span> also known as “after I buy a sofa, every website on the internet advertises that same sofa to me.” With this feature, site one gives information to your Chrome instance (like “this person loves sofas”) and site two, which runs ads, can interact with Chrome such that a sofa ad will be shown, even without site two learning that you love sofas. Disable this by setting the toggle to "Off."</span></li>
<li><b>Ad measurement</b><span>: This allows advertisers to track ad performance by storing data in your browser that's then shared with other sites. For example, if you see an ad for a pair of shoes, the site would get information about the time of day, whether the ad was clicked, and where it was displayed. Disable this by setting the toggle to "Off."</span></li>
</ul>
<p><span>If you're on Chrome, Firefox, Edge, or Opera, you should also take your privacy protections a step further with our own <a href="https://privacybadger.org/">Privacy Badger</a>, a browser extension that blocks third-party trackers that use cookies, fingerprinting, and other sneaky methods. On Chrome, Privacy Badger also <a href="https://github.com/EFForg/privacybadger/pull/2888">disables the Topics API</a> by default.</span></p>

</div>

          </article>
    </div><div>
          <h2>Join EFF Lists</h2>
        
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[SMTP Smuggling – Spoofing Emails Worldwide (257 pts)]]></title>
            <link>https://sec-consult.com/blog/detail/smtp-smuggling-spoofing-e-mails-worldwide/</link>
            <guid>38727987</guid>
            <pubDate>Thu, 21 Dec 2023 22:28:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://sec-consult.com/blog/detail/smtp-smuggling-spoofing-e-mails-worldwide/">https://sec-consult.com/blog/detail/smtp-smuggling-spoofing-e-mails-worldwide/</a>, See on <a href="https://news.ycombinator.com/item?id=38727987">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemscope="itemscope" itemtype="http://schema.org/Article" id="c42" role="main" itemprop="mainContentOfPage"><div><p><time itemprop="datePublished" datetime="2023-12-18">
                    18.12.2023
                </time></p><p>Introducing a novel technique for e-mail spoofing</p><figure><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/a/8/csm_SMTP_Smuggling-Overview_Header_7f33eb8f68.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/8/csm_SMTP_Smuggling-Overview_Header_195f68e383.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/8/csm_SMTP_Smuggling-Overview_Header_28f58303d8.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/8/csm_SMTP_Smuggling-Overview_Header_715ff8579a.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/8/csm_SMTP_Smuggling-Overview_Header_1ec709623c.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/8/csm_SMTP_Smuggling-Overview_Header_1d155a3b18.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/8/csm_SMTP_Smuggling-Overview_Header_6f99720678.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/8/csm_SMTP_Smuggling-Overview_Header_47977b1a86.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/_processed_/a/8/csm_SMTP_Smuggling-Overview_Header_1ec709623c.png" width="1110" height="498" alt="Overview SMTP Smuggling"></picture></figure></div><div itemprop="articleBody"><p><em>In the course of a research project in collaboration with the SEC Consult Vulnerability Lab, Timo Longin (<a href="https://twitter.com/timolongin" target="_blank" rel="noreferrer noopener">@timolongin</a>) - known for his <a href="https://sec-consult.com/blog/detail/taking-over-a-country-kaminsky-style/" target="_blank">DNS protocol attacks</a> - discovered a novel exploitation technique for yet another Internet protocol - SMTP (<a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol" target="_blank" rel="noreferrer">Simple Mail Transfer Protocol</a>). Threat actors could abuse vulnerable SMTP servers worldwide to send malicious e-mails from arbitrary e-mail addresses, allowing targeted phishing attacks. Due to the nature of the exploit itself, this type of vulnerability was dubbed <strong>SMTP smuggling</strong>. Multiple 0-days were discovered, and various vendors were notified during our responsible disclosure in 2023.&nbsp;</em></p><p>Novel attacks in SMTP? Yes, you read that right - <strong>SMTP!&nbsp;</strong></p><p>Even though SMTP, the Simple Mail Transfer Protocol, is used for sending e-mails across the globe since the beginning of the Internet, it is still possible to find new ways of exploiting it even in 2023! So, <strong>fasten your seat belts</strong>, as we embark on an expedition beyond the known limits of SMTP, and venture into the uncharted territories of <strong>SMTP smuggling</strong>!&nbsp;</p><h2>TL;DR&nbsp;</h2><p>By exploiting interpretation differences of the SMTP protocol, it is possible to smuggle/send spoofed e-mails - hence SMTP smuggling - while still passing SPF alignment checks. During this research, two types of SMTP smuggling, <strong>outbound</strong> and <strong>inbound</strong>, were discovered. These allowed sending spoofed e-mails <strong>from millions</strong> of domains (e.g., admin@outlook.com) to millions of receiving SMTP servers (e.g., Amazon, PayPal, eBay). Identified vulnerabilities in Microsoft and GMX were quickly fixed, however, <strong>SEC Consult urges</strong> companies using the also affected <a href="https://www.cisco.com/site/in/en/products/security/secure-email/index.html" target="_blank" rel="noreferrer">Cisco Secure Email</a> product to manually update their vulnerable default configuration (see Responsible Disclosure section below)!&nbsp;</p></div><div id="c4608"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_full__02_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/9/f/csm_SMTP_Smuggling-SMTP_session_example_full__02__805c61822c.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/f/csm_SMTP_Smuggling-SMTP_session_example_full__02__eaded2b254.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/f/csm_SMTP_Smuggling-SMTP_session_example_full__02__12ad94fa9b.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/f/csm_SMTP_Smuggling-SMTP_session_example_full__02__a063caee35.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_full__02_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_full__02_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_full__02_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_full__02_.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_full__02_.png" width="537" height="553" alt="Example SMTP session between sender.example and receiver.example "></picture></a><figcaption>
            Figure 1: Example SMTP session between sender.example and receiver.example 
        </figcaption></figure></div><div><h2>SMTP Basics&nbsp;</h2><p>Before getting into the juicy bits and details of SMTP smuggling, we must first have a basic understanding of the SMTP protocol, SMTP terminology and e-mailing in general. Let's learn by example!&nbsp;</p><p>Here, in figure 1, we have an SMTP session between sender.example and receiver.example.&nbsp;</p></div></div><div id="c4609"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__03_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/1/a/csm_SMTP_Smuggling-SMTP_session_example_only_sender__03__0164bca620.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/1/a/csm_SMTP_Smuggling-SMTP_session_example_only_sender__03__cd9e99910f.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/1/a/csm_SMTP_Smuggling-SMTP_session_example_only_sender__03__13e72eb70f.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/1/a/csm_SMTP_Smuggling-SMTP_session_example_only_sender__03__2297541ee0.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__03_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__03_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__03_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/1/a/csm_SMTP_Smuggling-SMTP_session_example_only_sender__03__6aab3f43ae.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__03_.png" width="614" height="227" alt="SMTP session transferring a mail object, including mail envelope and mail content/data, with SMTP commands, line breaks and data separated by color. "></picture></a><figcaption>
            Figure 2: SMTP session transferring a mail object, including mail envelope and mail content/data, with SMTP commands, line breaks and data separated by color. 
        </figcaption></figure></div><div><p>So, what's exactly going on here?&nbsp;</p><ol><li>Initially, the receiving SMTP server <strong>mx.receiver.example</strong> sends a greeting, indicating that it is ready to accept incoming SMTP commands.&nbsp;</li><li>The "client"/sender <strong>sender.example</strong> initiates the SMTP session by sending the EHLO (extended hello) <strong>SMTP command</strong> to the server, specifying its domain name. Note that all SMTP commands will be highlighted in red.&nbsp;</li><li><strong>mx.receiver.example</strong> responds with a 250 status code, indicating that the requested command (EHLO) was successful. It also provides supported <strong>SMTP capabilities</strong>.&nbsp;</li><li>Then, <strong>sender.example</strong> specifies the sender e-mail address as well as the receiver e-mail address via "mail FROM" and "rcpt TO" in the mail <strong>envelope</strong>. <strong>mx.receiver.example</strong> confirms both of these <strong>SMTP commands</strong> with a 250 status code.&nbsp;</li><li>Now, <strong>sender.example</strong> transmits the "data" command to signal its intention to start sending the message data/content.&nbsp;</li><li>After receiving a "go ahead" response, <strong>sender.example</strong> sends <strong>message</strong><strong>headers</strong> "Subject"/"From"/"To", a <strong>message body</strong> "lorem ipsum" and an <strong>end-of-data sequence</strong><strong>"&lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;"</strong> (Carriage-Return / Line-Feed, and a single dot in a line). Note that all message data will be highlighted in blue.&nbsp;</li><li><strong>mx.receiver.example</strong> reads the end-of-data sequence and responds with a 250 status code, implying that the message data was accepted.&nbsp;</li><li>Lastly, <strong>sender.example</strong> closes the connection via the "quit" command.&nbsp;</li></ol><p>As you can see, there is a lot of back and forth in this SMTP session. To keep it simple and concise, SMTP sessions in this blog post <strong>only</strong> include the data transmitted by the sender as shown in figure 2.&nbsp;</p></div></div><div id="c4610"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-Sending_e-mails_overview__3__04_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/5/d/csm_SMTP_Smuggling-Sending_e-mails_overview__3__04__6a38bcd2d7.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/d/csm_SMTP_Smuggling-Sending_e-mails_overview__3__04__bf4406ff80.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/d/csm_SMTP_Smuggling-Sending_e-mails_overview__3__04__6ccd48c07e.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/d/csm_SMTP_Smuggling-Sending_e-mails_overview__3__04__6429ff2d75.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/d/csm_SMTP_Smuggling-Sending_e-mails_overview__3__04__d48082ab2d.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/d/csm_SMTP_Smuggling-Sending_e-mails_overview__3__04__5d27cf5044.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/d/csm_SMTP_Smuggling-Sending_e-mails_overview__3__04__14d8bc127c.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/d/csm_SMTP_Smuggling-Sending_e-mails_overview__3__04__0139ab50ca.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/_processed_/5/d/csm_SMTP_Smuggling-Sending_e-mails_overview__3__04__803988674e.png" width="1100" height="277" alt="Overview of a simplified e-mailing process via SMTP from left to right "></picture></a><figcaption>
            Figure 3: Overview of a simplified e-mailing process via SMTP from left to right 
        </figcaption></figure></div><div><p>With this much knowledge about the SMTP protocol, we can put the training wheels aside and look at how SMTP is used to transfer e-mails across the Internet. For example, by sending an e-mail from <a href="#" rel="noreferrer noopener" target="_blank" data-mailto-token="nbjmup+vtfsApvumppl/dpn" data-mailto-vector="1">user(at)outlook.com</a> to <a href="#" rel="noreferrer noopener" target="_blank" data-mailto-token="nbjmup+vtfsAsfdfjwfs/fybnqmf" data-mailto-vector="1">user(at)receiver.example</a>!&nbsp;</p><p>When sending an e-mail via <a href="https://outlook.com/" target="_blank" rel="noreferrer">outlook.com</a>, we generally have two options:&nbsp;</p><ol><li>Outlook's web interface&nbsp;</li><li>Using SMTP&nbsp;</li></ol><p>Since this blog post is about SMTP smuggling and doesn't have to do anything with web applications (like <a href="https://portswigger.net/kb/issues/00200800_smtp-header-injection" target="_blank" rel="noreferrer">SMTP header injection</a>), we're opting for number two - SMTP! How this works is described in figure 3.&nbsp;</p></div></div><div id="c4611"><p>So, starting from the left side of the overview, the <strong>mail user agent</strong> (<strong>MUA</strong>: Thunderbird, Outlook, Windows Mail, etc.) connects to Outlook's <strong>mail transfer agent</strong> (<strong>MTA</strong>) on the message submission port TCP/587. MTAs that are dedicated to sending <strong>outbound e-mails</strong> are further addressed as <strong>outbound SMTP servers</strong>. The MUA then sends a series of SMTP commands and message data. Since we haven't described the STARTTLS and AUTH LOGIN commands before, here is a short description:&nbsp;</p><ul><li data-aria-level="1" data-aria-posinset="1" data-font="Symbol" data-leveltext="" data-list-defn-props="{&quot;335552541&quot;:1,&quot;335559684&quot;:-2,&quot;335559685&quot;:720,&quot;335559991&quot;:360,&quot;469769226&quot;:&quot;Symbol&quot;,&quot;469769242&quot;:[8226],&quot;469777803&quot;:&quot;left&quot;,&quot;469777804&quot;:&quot;&quot;,&quot;469777815&quot;:&quot;multilevel&quot;}" data-listid="3"><p><strong>STARTTLS</strong> is used to upgrade to an encrypted TLS session. Since SMTP is generally unencrypted, credentials would otherwise be exposed to listening attackers.&nbsp;</p></li><li data-aria-level="1" data-aria-posinset="2" data-font="Symbol" data-leveltext="" data-list-defn-props="{&quot;335552541&quot;:1,&quot;335559684&quot;:-2,&quot;335559685&quot;:720,&quot;335559991&quot;:360,&quot;469769226&quot;:&quot;Symbol&quot;,&quot;469769242&quot;:[8226],&quot;469777803&quot;:&quot;left&quot;,&quot;469777804&quot;:&quot;&quot;,&quot;469777815&quot;:&quot;multilevel&quot;}" data-listid="3"><p>The AUTH LOGIN SMTP command is used for authenticating the user. In this case, this is done via username and password.&nbsp;</p></li></ul><p>After evaluating if the authenticated user is allowed to send an e-mail for the provided e-mail address in the "mail FROM" and "From" fields, the Outlook SMTP server sends an <strong>inbound e-mail</strong> to the <strong>inbound SMTP server </strong>of <strong>receiver.example</strong> over port TCP/25. This SMTP data looks very similar to the SMTP data submitted to the <strong>outbound SMTP</strong> server, but doesn't include the AUTH LOGIN command and, in this case, doesn't use STARTTLS.&nbsp;</p><p>This concludes the e-mail transfer. But how does the receiving inbound SMTP server make sure that the outbound SMTP server is indeed allowed to send e-mails for outlook.com? Or, why can't just anyone send e-mails for the outlook.com domain?&nbsp;</p><h2>SPF, DKIM and DMARC&nbsp;</h2><p>Before an inbound SMTP server accepts an e-mail, it checks the sender's authenticity via e-mail authentication mechanisms such as <a href="https://en.wikipedia.org/wiki/Sender_Policy_Framework" target="_blank" rel="noreferrer">SPF</a>, <a href="https://en.wikipedia.org/wiki/DomainKeys_Identified_Mail" target="_blank" rel="noreferrer">DKIM</a> and <a href="https://en.wikipedia.org/wiki/DMARC" target="_blank" rel="noreferrer">DMARC</a>. This is important, since otherwise attackers could just send e-mails from arbitrary domains. For example, sending an e-mail as <a href="#" data-mailto-token="nbjmup+benjoApvumppl/dpn" data-mailto-vector="1">admin(at)outlook.com</a> from an attacker server would be entirely possible. The most prevalent e-mail authentication mechanism, <strong>SPF</strong>, works by permitting sender IP addresses in special SPF/TXT DNS records. The SPF record of <a href="http://outlook.com/" target="_blank" rel="noreferrer">outlook.com</a> permits the following IP ranges for e-mail transfer:&nbsp;</p><p><span>v=spf1 include:spf-a.outlook.com include:spf-b.outlook.com ip4:157.55.9.128/25 include:spf.protection.outlook.com include:spf-a.hotmail.com include:_spf-ssg-b.microsoft.com include:_spf-ssg-c.microsoft.com ~all&nbsp;</span></p></div><div id="c4618"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/7/c/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05__ec96aa0bd7.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/7/c/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05__96d8d1cc61.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/7/c/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05__b59e74dae6.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/7/c/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05__c5ff3c2e9f.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/7/c/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05__6aac7a94b3.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_spoofing__05_.png" width="635" height="226" alt="Passing SPF checks with attacker.example domain, while sending as user@sender.example "></picture></a><figcaption>
            Figure 4: Passing SPF checks with attacker.example domain, while sending as user@sender.example 
        </figcaption></figure></div><p>If you are not sending from one of these IP ranges, the SPF check would fail and your e-mail most likely won't be forwarded or will be marked as spam. But which domain is actually getting checked? The problem with SPF by itself is that only the MAIL FROM domain from the mail envelope is checked. The From header in the message data, which is further displayed in the received e-mail, can have an arbitrary value, as shown in figure 4 (blue text).&nbsp;</p></div><div id="c4619"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/2/b/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06__97a5b12ac0.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/2/b/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06__a63a95f529.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/2/b/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06__74f3750fd4.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/2/b/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06__775bb8540b.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/2/b/csm_SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06__39f00013aa.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender_SPF_and_DKIM_spoofing__06_.png" width="695" height="304" alt="Passing SPF and DKIM checks, by sending from an attacker server with an attacker-controlled DKIM key "></picture></a><figcaption>
            Figure 5: Passing SPF and DKIM checks, by sending from an attacker server with an attacker-controlled DKIM key 
        </figcaption></figure></div><p>The same goes for <strong>DKIM</strong> (DomainKeys Identified Mail) as well. DKIM allows signing the message data, including the From header. This signature can then be verified by the receiver with a public key that resides in the DNS. However, it is not enforced, which domain holds the public key (see figure 5).&nbsp;</p></div><div id="c4620"><p>In this case, the message from "user@sender.example" may be signed, but the verification key is located at "dkim._domainkey.attacker.example". This location is derived from concatenating the selector (s=) "dkim", the static value "_domainkey" and the domain (d=) "attacker.example". So, even though an e-mail may have a valid SPF record and a valid DKIM signature, there is no mechanism for telling if the e-mail comes from a malicious sender or not.&nbsp;</p><p>Fortunately, there is <strong>DMARC</strong>, which stands for "Domain-based Message Authentication, Reporting and Conformance". DMARC introduces so-called "identifier alignment" for SPF and DKIM and allows senders to specify alignment policies for both methods. It verifies if the email's "From" domain aligns with SPF checks and/or DKIM signatures. Thus, the DMARC check fails if there is a mismatch between the MAIL FROM and the From domain where otherwise the SPF check would pass. An example for a DMARC policy, which is always located in a TXT record at _dmarc.[domain], can be seen here:&nbsp;</p><p><span>v=DMARC1; p=reject; sp=none; fo=0; adkim=r; aspf=r; pct=100; rf=afrf&nbsp;</span></p></div><div id="c4621"><p>The policy (p=) tells the receiving server to reject 100 percent (pct=) of the messages that fail the DMARC check. Therefore, the message will get accepted (only) if a valid SPF record and/or DKIM signature is provided.&nbsp;</p><p>However, what happens if there is no DMARC record? In general, e-mail authenticity handling heavily depends on the inbound SMTP server's configuration and software. As a rule of thumb, if there is SPF or DKIM alignment, there is a good chance of the e-mail being accepted!&nbsp;</p><p>Now, with the groundwork done, let's get into <strong>SMTP smuggling</strong>!&nbsp;</p></div><div id="c4622"><div><figure><a href="https://portswigger.net/web-security/request-smuggling" title="Figure 6: Simple example of HTTP request smuggling by PortSwigger" target="_blank" rel="noreferrer"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/7/e/csm_SMTP_Smuggling-HTTP_request_smuggling__07__45abc75acb.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-HTTP_request_smuggling__07_.png" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/7/e/csm_SMTP_Smuggling-HTTP_request_smuggling__07__3646ab2194.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/7/e/csm_SMTP_Smuggling-HTTP_request_smuggling__07__005072109a.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-HTTP_request_smuggling__07_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-HTTP_request_smuggling__07_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/7/e/csm_SMTP_Smuggling-HTTP_request_smuggling__07__ed882e4c46.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/7/e/csm_SMTP_Smuggling-HTTP_request_smuggling__07__a893caf5ae.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-HTTP_request_smuggling__07_.png" width="791" height="365" alt="Simple example of HTTP request smuggling by PortSwigger " title="Figure 6: Simple example of HTTP request smuggling by PortSwigger "></picture></a><figcaption>
            Figure 6: Simple example of HTTP request smuggling by PortSwigger 
        </figcaption></figure></div><div><h2>SMTP Smuggling?&nbsp;</h2><p>The initial goal of this research was to test the SMTP protocol against some common and exotic attacks that work on other protocols, such as HTTP. Thanks to the contribution of many brilliant minds, there is a variety of <strong>HTTP</strong> attacks to choose from. However, in the context of SMTP, one of them just fit the bill. <strong>HTTP request smuggling</strong>!</p><p>If you want an in-depth explanation of HTTP request smuggling and all its facets, James Kettle (aka <a href="https://twitter.com/albinowax" target="_blank" rel="noreferrer">@albinowax</a>) did a <a href="https://jameskettle.com/" target="_blank" rel="noreferrer">wonderful job</a> on that. However, for now, we only need to understand the essentials!&nbsp;</p><p>With HTTP request smuggling, we're basically trying to exploit different interpretations of the same thing. For example, with discrepancies in the interpretation and processing of the "Content-Length" and "Transfer-Encoding" HTTP headers, an arbitrary HTTP request can be smuggled to an otherwise unreachable back-end server like in figure 6.&nbsp;</p></div></div><div id="c4623"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__08_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/0/0/csm_SMTP_Smuggling-SMTP_session_example_only_sender__08__aa75bc41e9.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/0/0/csm_SMTP_Smuggling-SMTP_session_example_only_sender__08__90824f483b.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/0/0/csm_SMTP_Smuggling-SMTP_session_example_only_sender__08__d6e8dad7b7.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/0/0/csm_SMTP_Smuggling-SMTP_session_example_only_sender__08__a0e30bb83d.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__08_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__08_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__08_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/0/0/csm_SMTP_Smuggling-SMTP_session_example_only_sender__08__7f2d441f55.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_example_only_sender__08_.png" width="614" height="227" alt="SMTP session with SMTP commands and message data separated by colour. "></picture></a><figcaption>
            Figure 7: SMTP session with SMTP commands and message data separated by colour. 
        </figcaption></figure></div><div><p>In this example, the vulnerable front-end server only sees one HTTP POST request, while the back-end server sees a POST request <strong>and</strong> a GET request to /<strong>admin</strong>!&nbsp;</p><p>With SMTP, we also have a setup with two servers, being <strong>outbound and inbound SMTP servers</strong>. So, let's take a look at an SMTP session again in figure 7.&nbsp;</p></div></div><div id="c4624"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-Overview__09_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/c/2/csm_SMTP_Smuggling-Overview__09__7cf90ddc8f.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/c/2/csm_SMTP_Smuggling-Overview__09__a4a36eab59.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/c/2/csm_SMTP_Smuggling-Overview__09__b59fdfa487.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/c/2/csm_SMTP_Smuggling-Overview__09__3b2c54ee71.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-Overview__09_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-Overview__09_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-Overview__09_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/c/2/csm_SMTP_Smuggling-Overview__09__5da9f93d00.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-Overview__09_.png" width="692" height="406" alt="SMTP smuggling in theory "></picture></a><figcaption>
            Figure 8: SMTP smuggling in theory 
        </figcaption></figure></div><div><p>Now tell me, <strong>what happens if outbound and inbound SMTP servers interpret the end-of-data sequence (&lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;) differently?&nbsp;</strong></p><p>Exactly, S<strong>MTP smuggling!&nbsp;</strong></p><p>If SMTP servers have a different understanding of where the message data ends, an attacker can potentially break out of the message data. Even worse, this may allow to specify arbitrary SMTP commands and even to send separate e-mails (see figure 8)!&nbsp;</p></div></div><div id="c4625"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_analysis_test_setup__3__10_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/e/3/csm_SMTP_Smuggling-SMTP_analysis_test_setup__3__10__52bd789a80.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/3/csm_SMTP_Smuggling-SMTP_analysis_test_setup__3__10__d24dd857ea.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/3/csm_SMTP_Smuggling-SMTP_analysis_test_setup__3__10__36b99058e5.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/3/csm_SMTP_Smuggling-SMTP_analysis_test_setup__3__10__2a7f4cd495.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_analysis_test_setup__3__10_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/3/csm_SMTP_Smuggling-SMTP_analysis_test_setup__3__10__7596151d37.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/3/csm_SMTP_Smuggling-SMTP_analysis_test_setup__3__10__5a335726d1.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/3/csm_SMTP_Smuggling-SMTP_analysis_test_setup__3__10__7e89a7b4f7.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_analysis_test_setup__3__10_.png" width="988" height="297" alt="SMTP analysis setup for analyzing outbound SMTP servers "></picture></a><figcaption>
            Figure 9: SMTP analysis setup for analyzing outbound SMTP servers 
        </figcaption></figure></div><div><p>So, that's the basic idea of SMTP smuggling! But does it actually work?&nbsp;</p><h2>&lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; is a lie?&nbsp;</h2><p>To get a good understanding of how different kinds of SMTP software work, we can start our analysis as shown in figure 9:&nbsp;</p></div></div><div id="c4626"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling___11_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling___11__83b9404dc3.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling___11__57bddcc292.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling___11__ad8ad0761b.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling___11__b5e7bd22b8.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling___11_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling___11_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling___11_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling___11__800f41a4c0.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling___11_.png" width="568" height="189" alt="Using \n.\n as end-of-data sequence #1 "></picture></a><figcaption>
            Figure 10: Using \n.\n as end-of-data sequence #1 
        </figcaption></figure></div><div><p>First, we register e-mail accounts at various public e-mail providers that support mail submissions via SMTP (unlike Tutanota and ProtonMail). We used the following providers for this research project:&nbsp;</p><ul><li>outlook.com&nbsp;</li><li>gmail.com&nbsp;</li><li>gmx.net&nbsp;</li><li>icloud.com&nbsp;</li><li>zoho.com&nbsp;</li><li>fastmail.com&nbsp;</li><li>runbox.com&nbsp;</li><li>startmail.com&nbsp;</li><li>mailbox.org&nbsp;</li><li>aol.com&nbsp;</li><li>yahoo.com&nbsp;</li><li>web.de&nbsp;</li></ul><p>Then, by sending e-mails through the <strong>outbound</strong> SMTP servers of these providers and receiving them on an <strong>inbound SMTP analysis server</strong>, we can see first differences in the implementation of the SMTP protocol in these SMTP servers.&nbsp;</p><p>When looking at the <strong>SMTP analysis client</strong> it becomes apparent straight away that some SMTP products do things "differently" than others. For example, here are some responses received from e-mail providers after sending the <strong>DATA</strong> SMTP command:</p><p><span>- 250 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;&nbsp;<br> - 250 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;&nbsp;<br> - 250 Send data ending with &lt;CRLF&gt;.&lt;CRLF&gt;&nbsp;</span></p><p>This doesn't look good for our plans to smuggle SMTP commands, since we're looking for different interpretations of SMTP, and not the same text written differently. Right? But, we're not going to back off just because of some text, are we?&nbsp;</p><p>After further analysis, some SMTP servers returned the following responses, which looked a bit more promising:&nbsp;</p><p><span>- Enter message, ending with "." on a line by itself&nbsp;<br> - Enter mail, end with "." on a line by itself&nbsp;</span></p><p>Why would that be more promising, though? Well, different operating systems have a different understanding of "<strong>a line by itself</strong>". A "." on a line by itself on Windows would be separated via two carriage return line feeds (<strong>&lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</strong> or <strong>\r\n.\r\n</strong>), while a "." on a line by itself on Linux would be separated with two line feeds (&lt;LF&gt;.&lt;LF&gt; or \n.\n).&nbsp;</p><p>So, why don't we try to end the message data of an e-mail with <strong>&lt;LF&gt;.&lt;LF&gt;?</strong> This would therefore look like in figure 10.</p></div></div><div id="c4627"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling__12_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/d/b/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling__12__0a60d3527e.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/d/b/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling__12__8b70b15aec.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/d/b/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling__12__9393154e58.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/d/b/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling__12__9dc2b3fe87.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling__12_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling__12_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling__12_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/d/b/csm_SMTP_Smuggling-SMTP_session_CRLF_smuggling__12__b8eddcb05c.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_CRLF_smuggling__12_.png" width="637" height="275" alt="Using \n.\n as end-of-data sequence #2 "></picture></a><figcaption>
            Figure 11: Using \n.\n as end-of-data sequence #2 
        </figcaption></figure></div><p>Now, if an SMTP server doesn't consider &lt;LF&gt;.&lt;LF&gt; as the end-of-data sequence, the connection will be left hanging, since it's waiting for the actual &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;. Therefore, as shown in figure 11, we add the following.&nbsp;</p></div><div id="c4628"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_19-57-58__13_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_19-57-58__13__1d4f359dcf.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_19-57-58__13__c6c9377b0d.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_19-57-58__13__ff41766cd0.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_19-57-58__13__2a337da643.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_19-57-58__13_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_19-57-58__13_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_19-57-58__13__a699179de2.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_19-57-58__13__2022cc0ab0.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_19-57-58__13_.png" width="790" height="308" alt="Outbound e-mail provider delivering an e-mail with <LF>.<LF> sequence (not vulnerable) "></picture></a><figcaption>
            Figure 12: Outbound e-mail provider delivering an e-mail with &lt;LF&gt;.&lt;LF&gt; sequence (not vulnerable) 
        </figcaption></figure></div><div><p>With this, whenever &lt;LF&gt;.&lt;LF&gt; is supported as end-of-data sequence by the inbound SMTP server, only "lorem ipsum" will be part of the message data, otherwise the message also includes "This server is ignoring line feeds as end-of-data sequence!".&nbsp;</p><p>But, what can we actually achieve with this? Well, let's see how a message transfer could look like if &lt;LF&gt;.&lt;LF&gt; doesn't end the data section, like in figure 12.&nbsp;</p></div></div><div id="c4629"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-CRLF_Smuggling_2__3__14_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/9/d/csm_SMTP_Smuggling-CRLF_Smuggling_2__3__14__8193354391.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/d/csm_SMTP_Smuggling-CRLF_Smuggling_2__3__14__949bf732d8.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/d/csm_SMTP_Smuggling-CRLF_Smuggling_2__3__14__7a9e42c5a3.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/d/csm_SMTP_Smuggling-CRLF_Smuggling_2__3__14__ed14fce3ac.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-CRLF_Smuggling_2__3__14_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-CRLF_Smuggling_2__3__14_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/d/csm_SMTP_Smuggling-CRLF_Smuggling_2__3__14__3ed32ae59e.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/d/csm_SMTP_Smuggling-CRLF_Smuggling_2__3__14__4c61dd5151.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-CRLF_Smuggling_2__3__14_.png" width="790" height="308" alt="Outbound e-mail provider delivering an e-mail with <LF>.<LF> sequence (vulnerable) "></picture></a><figcaption>
            Figure 13: Outbound e-mail provider delivering an e-mail with &lt;LF&gt;.&lt;LF&gt; sequence (vulnerable) 
        </figcaption></figure></div><p>Depending on the receiving inbound SMTP server this may be completely harmless. However, what if the inbound SMTP server interprets &lt;LF&gt;.&lt;LF&gt; as end-of-data sequence? (see figure 13)&nbsp;</p></div><div id="c4630"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-GMX_Smuggling__3__15_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/3/8/csm_SMTP_Smuggling-GMX_Smuggling__3__15__c8af0b844d.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/8/csm_SMTP_Smuggling-GMX_Smuggling__3__15__578316ca29.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/8/csm_SMTP_Smuggling-GMX_Smuggling__3__15__a3c13b193e.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/8/csm_SMTP_Smuggling-GMX_Smuggling__3__15__aa23d0f236.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-GMX_Smuggling__3__15_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-GMX_Smuggling__3__15_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/8/csm_SMTP_Smuggling-GMX_Smuggling__3__15__04c7c0267c.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/8/csm_SMTP_Smuggling-GMX_Smuggling__3__15__ca70ecb209.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-GMX_Smuggling__3__15_.png" width="791" height="313" alt="Potential end-of-data sequence between START and END going through GMX's outbound SMTP server unchanged "></picture></a><figcaption>
            Figure 14: Potential end-of-data sequence between START and END going through GMX's outbound SMTP server unchanged 
        </figcaption></figure></div><div><p>In this case, the "harmless" &lt;LF&gt;.&lt;LF&gt; breaks out of the message data and "This server is ignoring line feeds as end-of-data sequence!" may now be interpreted as an <strong>SMTP command</strong>! Note that this requires the inbound server to accept multiple SMTP commands in a batch, or so-called SMTP pipelining. Luckily for us, most servers support this nowadays.&nbsp;</p><p>However, <strong>outbound SMTP servers</strong> commonly handle such "troublesome" &lt;LF&gt;.&lt;LF&gt; sequences via different means:&nbsp;</p><ul><li>Dot-stuffing (Escaping the single dot with another dot):  &lt;LF&gt;..&lt;LF&gt;&nbsp;</li><li>Replacing it with a &lt;CR&gt;&lt;LF&gt;&nbsp;</li><li>Encoding it (e.g., via quoted-printable): =0A.=0A&nbsp;</li><li>Removing the entire sequence&nbsp;</li><li>Not sending the message&nbsp;</li></ul><p>But sometimes, <strong>they do nothing at all</strong>!&nbsp;</p><p>So, essentially, we're looking for specific characteristics in outbound and inbound SMTP servers in terms of end-of-data sequence handling. More precisely, we're searching for what outbound SMTP servers ignore (e.g., &lt;LF&gt;.&lt;LF&gt;) and what inbound SMTP servers interpret (e.g., &lt;LF&gt;.&lt;LF&gt; as end-of-data). If we can find a correct combination, we can smuggle!&nbsp;</p><h2>First Blood&nbsp;</h2><p>As previously mentioned, we've created e-mail accounts at various e-mail providers. Shortly after sending potential end-of-data sequences (e.g., &lt;LF&gt;.&lt;LF&gt;) from outbound provider SMTP servers to the SMTP analysis server, a <strong>promising candidate emerged</strong>!&nbsp;</p><p><strong>GMX</strong>, established in 1997, is one of the old-school e-mail providers in the DACH region with roughly 20 million users. When sending an <strong>&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</strong> sequence to the outbound GMX SMTP server, it is passed unfiltered to the inbound SMTP server, as shown in figure 14!&nbsp;</p></div></div><div id="c4631"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_GMX__16_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/9/e/csm_SMTP_Smuggling-SMTP_smuggling_GMX__16__754993e69e.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/e/csm_SMTP_Smuggling-SMTP_smuggling_GMX__16__4676df4187.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/e/csm_SMTP_Smuggling-SMTP_smuggling_GMX__16__950bb2423f.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/e/csm_SMTP_Smuggling-SMTP_smuggling_GMX__16__2ba970aede.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_GMX__16_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_GMX__16_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/e/csm_SMTP_Smuggling-SMTP_smuggling_GMX__16__83e98e7fc9.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/e/csm_SMTP_Smuggling-SMTP_smuggling_GMX__16__4a9fc4084b.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_GMX__16_.png" width="955" height="412" alt="SMTP smuggling from admin@gmx.net to user@provider.example "></picture></a><figcaption>
            Figure 15: SMTP smuggling from admin@gmx.net to user@provider.example 
        </figcaption></figure></div><div><p>Therefore, we can now break out of the message data at the inbound SMTP server, if &lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; is interpreted as an end-of-data sequence. So, how do we find such servers?&nbsp;</p><p>We simply send an e-mail with the following message data (see figure 15) to all the e-mail addresses we've registered.&nbsp;</p></div></div><div id="c4632"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_GMAIL_smuggling_failed__17_.PNG" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/3/7/csm_GMX_to_GMAIL_smuggling_failed__17__11b8e36e25.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/7/csm_GMX_to_GMAIL_smuggling_failed__17__4f7f1770d1.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/7/csm_GMX_to_GMAIL_smuggling_failed__17__ef6e262ef3.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/7/csm_GMX_to_GMAIL_smuggling_failed__17__7e479b9298.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_GMAIL_smuggling_failed__17_.PNG" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_GMAIL_smuggling_failed__17_.PNG" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_GMAIL_smuggling_failed__17_.PNG" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_GMAIL_smuggling_failed__17_.PNG" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_GMAIL_smuggling_failed__17_.PNG" width="326" height="413" alt="Failed attempt of SMTP smuggling against Gmail "></picture></a><figcaption>
            Figure 16: Failed attempt of SMTP smuggling against Gmail 
        </figcaption></figure></div><p>For a lot of them, we receive a very suspicious looking e-mail like in figure 16, since &lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; did not end the message data.&nbsp;</p></div><div id="c4633"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_FASTMAIL_smuggling_success__18_.PNG" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/b/7/csm_GMX_to_FASTMAIL_smuggling_success__18__1ee24f1b21.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/b/7/csm_GMX_to_FASTMAIL_smuggling_success__18__4ad6e5f92d.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/b/7/csm_GMX_to_FASTMAIL_smuggling_success__18__324004cc62.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/b/7/csm_GMX_to_FASTMAIL_smuggling_success__18__9d5d8867d8.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_FASTMAIL_smuggling_success__18_.PNG" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_FASTMAIL_smuggling_success__18_.PNG" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_FASTMAIL_smuggling_success__18_.PNG" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_FASTMAIL_smuggling_success__18_.PNG" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/GMX_to_FASTMAIL_smuggling_success__18_.PNG" width="360" height="98" alt="Successful SMTP smuggling from GMX to Fastmail. &quot;Look at me! I am the admin now!&quot; "></picture></a><figcaption>
            Figure 17: Successful SMTP smuggling from GMX to Fastmail. "Look at me! I am the admin now!" 
        </figcaption></figure></div><p>But for some of them, we hit the jackpot!&nbsp;</p></div><div id="c4634"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_WEB.DE_19_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/8/3/csm_SMTP_Smuggling-SMTP_smuggling_WEB.DE_19__735952133a.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/8/3/csm_SMTP_Smuggling-SMTP_smuggling_WEB.DE_19__56efd7d218.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/8/3/csm_SMTP_Smuggling-SMTP_smuggling_WEB.DE_19__e60efcd5b4.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/8/3/csm_SMTP_Smuggling-SMTP_smuggling_WEB.DE_19__d40a46b354.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_WEB.DE_19_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/8/3/csm_SMTP_Smuggling-SMTP_smuggling_WEB.DE_19__64bf082a74.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/8/3/csm_SMTP_Smuggling-SMTP_smuggling_WEB.DE_19__5ea07f4d4a.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/8/3/csm_SMTP_Smuggling-SMTP_smuggling_WEB.DE_19__0ff2386396.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_WEB.DE_19_.png" width="977" height="413" alt="Cross-domain SMTP smuggling to different recipients "></picture></a><figcaption>
            Figure 18: Cross-domain SMTP smuggling to different recipients 
        </figcaption></figure></div><div><p>This proof of concept (figure 17) was the first sign that SMTP smuggling actually works!&nbsp;</p><p>By inspecting the message headers, we can see that the SPF check passes with domain alignment for gmx.net! This is because the smuggled message actually came from the legitimate GMX SMTP server.&nbsp;</p><p><span>Received-SPF: pass&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; (gmx.net: 212.227.15.15 is authorized to use 'admin@gmx.net' in 'mfrom' identity (mechanism 'ip4:212.227.15.0/25' matched))&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; receiver=mx4.messagingengine.com;&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; identity=mailfrom;&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; envelope-from="admin@gmx.net";&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; helo=mout.gmx.net;&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; client-ip=212.227.15.15&nbsp;</span></p><p>Since we've achieved domain alignment for gmx.net, this e-mail will most likely pass spam filters, even with strict DMARC policies!&nbsp;<strong>But wait</strong>, if other domains also use the outbound SMTP server of GMX to send e-mails, can't we spoof them as well?&nbsp;Let's see! By analyzing the SPF record of <strong>web.de</strong>, we can see that the outbound SMTP IP address of GMX <strong>212.227.15.15</strong> is included as well!&nbsp;</p><p><span>v=spf1 ip4:212.227.126.128/25 ip4:212.227.15.0/25 ip4:212.227.17.0/27 ip4:217.72.192.248/29 ip4:82.165.159.0/26 ip4:217.72.207.0/27 ip4:217.72.192.64/26 ip4:82.165.229.130 ip4:82.165.230.22 ~all&nbsp;</span></p><p>Now, we can change the SMTP smuggling message data accordingly, like in figure 18.&nbsp;</p></div></div><div id="c4635"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/WEB.DE_to_FASTMAIL_smuggling_success__20_.PNG" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/b/3/csm_WEB.DE_to_FASTMAIL_smuggling_success__20__1f950746e6.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/b/3/csm_WEB.DE_to_FASTMAIL_smuggling_success__20__e23952cb00.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/b/3/csm_WEB.DE_to_FASTMAIL_smuggling_success__20__2e2e45736b.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/b/3/csm_WEB.DE_to_FASTMAIL_smuggling_success__20__2458ea6713.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/WEB.DE_to_FASTMAIL_smuggling_success__20_.PNG" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/WEB.DE_to_FASTMAIL_smuggling_success__20_.PNG" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/WEB.DE_to_FASTMAIL_smuggling_success__20_.PNG" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/WEB.DE_to_FASTMAIL_smuggling_success__20_.PNG" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/WEB.DE_to_FASTMAIL_smuggling_success__20_.PNG" width="360" height="48" alt="Successful cross-domain SMTP smuggling from GMX to Fastmail using web.de as sender domain "></picture></a><figcaption>
            Figure 19: Successful cross-domain SMTP smuggling from GMX to Fastmail using web.de as sender domain 
        </figcaption></figure></div><p>To simulate a real-life scenario, we specify a different receiver e-mail address for the first message and only send the smuggled message (figure 19) to the target.&nbsp;</p></div><div id="c4636"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_21-4-41__21_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_21-4-41__21__e62c99302e.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_21-4-41__21__d5eb6497cc.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_21-4-41__21__026ca6562b.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/f/csm_image-2023-12-4_21-4-41__21__87003211dc.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_21-4-41__21_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_21-4-41__21_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_21-4-41__21_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_21-4-41__21_.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_21-4-41__21_.png" width="227" height="85" alt="Censored (real) profile picture associated with admin@web.de "></picture></a><figcaption>
            Figure 20: Censored (real) profile picture associated with admin@web.de 
        </figcaption></figure></div><p>In this case, our target would even see the associated profile picture (in this case of the real 'admin@web.de' user), like in figure 20!&nbsp;</p></div><div id="c4637"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-BDAT__22_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/0/8/csm_SMTP_Smuggling-BDAT__22__f1e36425d9.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/0/8/csm_SMTP_Smuggling-BDAT__22__5cea96872a.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/0/8/csm_SMTP_Smuggling-BDAT__22__15bf65615e.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/0/8/csm_SMTP_Smuggling-BDAT__22__aafef80b82.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-BDAT__22_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-BDAT__22_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-BDAT__22_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/0/8/csm_SMTP_Smuggling-BDAT__22__88aae0e9d3.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-BDAT__22_.png" width="620" height="208" alt="Sending message data via BDAT"></picture></a><figcaption>
            Figure 21: Sending message data via BDAT
        </figcaption></figure></div><div><p>And again, the SPF verification checks out!&nbsp;</p><p><span>Received-SPF: pass&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; (web.de: 212.227.17.22 is authorized to use 'admin@web.de' in 'mfrom' identity (mechanism 'ip4:212.227.17.0/27' matched))&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; receiver=mx4.messagingengine.com;&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; identity=mailfrom;&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; envelope-from="admin@web.de";&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; helo=mout.gmx.net;&nbsp;</span></p><p><span>&nbsp;&nbsp;&nbsp; client-ip=212.227.17.22&nbsp;</span></p><p>Now, you might think that this was already cool, <strong>but we're just getting started</strong>!&nbsp;</p><p>Even though we initially only analyzed GMX, the problem is far worse than it seemed at first. Like many big e-mail providers, GMX is using a custom SMTP server called <strong>Nemesis</strong><strong>SMTPd</strong>. Since GMX is part of <strong>Ionos</strong>, e-mailing services provided by Ionos are also using Nemesis SMTPd. By putting 1 and 1 together, we register an e-mail domain at Ionos and check if SMTP smuggling works. And it does! However, smuggling via a custom e-mail domain doesn't even seem to be necessary. The SPF record for the registered e-mail domain includes "_spf-eu.ionos.com" and the SPF record for gmx.net includes "_spf.gmx.net". Looking at the permitted IP ranges reveals "some" collisions:&nbsp;</p><p><span>$ dig _spf-eu.ionos.com TXT&nbsp;<br> "v=spf1 ip4:212.227.126.128/25 ip4:212.227.15.0/25 ip4:212.227.17.0/27 ip4:82.165.159.0/26 ip4:217.72.192.64/26 ?all"&nbsp;<p> &nbsp; $ dig _spf.gmx.net TXT&nbsp;<br> "v=spf1 ip4:212.227.126.128/25 ip4:212.227.15.0/25 ip4:212.227.17.0/27 ip4:82.165.159.0/24 ip4:74.208.4.192/26  ip4:217.72.207.0/27 ip4:82.165.229.31 ip4:82.165.230.21 ip4:213.165.64.0/23 ip4:74.208.5.64/26 ~all"&nbsp;</p></span></p><p>So, either way, this allowed <strong>spoofing</strong> not only <strong>gmx.net</strong> and <strong>web.de</strong>, but also around a <strong>million</strong> other domains hosted at <strong>Ionos</strong>! But more on the details later! &nbsp;</p><h2>Smuggling via Microsoft Exchange Online&nbsp;</h2><p>After a deeper analysis of outbound SMTP servers, a peculiarity in <strong>Microsoft Outlook's</strong> (<a href="https://outlook.com/" target="_blank" rel="noreferrer">outlook.com</a>) SMTP server was observed. When trying to send an <strong>&lt;LF&gt;.&lt;LF&gt;</strong> sequence, the message does not get transmitted, and the following error message is returned:&nbsp;</p><p>Remote server returned '550 5.6.11 SMTPSEND.BareLinefeedsAreIllegal; message contains bare linefeeds, which cannot be sent via DATA and receiving system does not support BDAT'&nbsp;</p><p>However, same as with GMX, <strong>Outlook doesn't filter &lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</strong> sequences.&nbsp;</p><p>Still, it wasn't possible to smuggle to the same receivers (e.g., Fastmail) as with GMX. Reason for this is Outlook's usage of the optional <strong>BDAT</strong> SMTP command. BDAT is an alternative to the <strong>DATA</strong> command to transfer the message data. It works by specifying the message length with the BDAT command, instead of relying on an end-of-data sequence. For example, to transfer 72 bytes of message data, we can do it like in figure 21.&nbsp;</p></div></div><div id="c4638"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_Outlook__23_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/f/2/csm_SMTP_Smuggling-SMTP_smuggling_Outlook__23__4553225740.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/2/csm_SMTP_Smuggling-SMTP_smuggling_Outlook__23__a8696421b0.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/2/csm_SMTP_Smuggling-SMTP_smuggling_Outlook__23__97e89cd3b8.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/2/csm_SMTP_Smuggling-SMTP_smuggling_Outlook__23__d251670509.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_Outlook__23_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_Outlook__23_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/2/csm_SMTP_Smuggling-SMTP_smuggling_Outlook__23__cbc7f1b022.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/2/csm_SMTP_Smuggling-SMTP_smuggling_Outlook__23__7946d5ab12.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_Outlook__23_.png" width="967" height="570" alt="Sending a phishing e-mail from admin@outlook.com via SMTP smuggling"></picture></a><figcaption>
            Figure 22: Sending a phishing e-mail from admin@outlook.com via SMTP smuggling
        </figcaption></figure></div><div><p>Even though that stops us from smuggling to some inbound SMTP servers, the BDAT command can only be used by Outlook, if the inbound SMTP server supports it. If the inbound SMTP server doesn't indicate BDAT support by returning the <strong>CHUNKING</strong> capability, DATA is used as fallback.&nbsp;</p><p>Therefore, we're looking for an inbound SMTP server that interprets &lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; as an end-of-data sequence and doesn't support BDAT.&nbsp;&nbsp;</p><p>Funnily enough, the <a href="https://sec-consult.com/" target="_blank" rel="noreferrer noopener">sec-consult.com</a> SMTP server supports just that! Note that <strong>LOTS</strong> of servers on the Internet support this, but since we've got to make sure that our own systems are secure anyways, we'll be using sec-consult.com. So, what's the first thing to do with our newly gained power? <strong>Sending spoofed e-mails to co-workers to make sure it actually works!</strong> (see figure 22)&nbsp;</p></div></div><div id="c4639"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/teams_conversation_OIDA__24_.PNG" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/2/3/csm_teams_conversation_OIDA__24__208fa81240.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/2/3/csm_teams_conversation_OIDA__24__d450b64b09.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/2/3/csm_teams_conversation_OIDA__24__622ff2619f.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/2/3/csm_teams_conversation_OIDA__24__6224b9c879.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/teams_conversation_OIDA__24_.PNG" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/teams_conversation_OIDA__24_.PNG" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/teams_conversation_OIDA__24_.PNG" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/2/3/csm_teams_conversation_OIDA__24__cf55f47787.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/teams_conversation_OIDA__24_.PNG" width="572" height="114" alt="Typical Austrian reaction after receiving a spoofed e-mail "></picture></a><figcaption>
            Figure 23: Typical Austrian reaction after receiving a spoofed e-mail 
        </figcaption></figure></div><p>Based on their reaction (figure 23), the message from <a href="#" rel="noreferrer noopener" target="_blank" data-mailto-token="nbjmup+benjoApvumppl/dpn" data-mailto-vector="1">admin(at)outlook.com</a> definitely got delivered and didn't end up in spam.&nbsp;</p></div><div id="c4640"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-26-20__24_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/b/7/csm_image-2023-7-5_15-26-20__24__69b3f18758.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/b/7/csm_image-2023-7-5_15-26-20__24__70e458da47.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/b/7/csm_image-2023-7-5_15-26-20__24__a87151eb87.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/b/7/csm_image-2023-7-5_15-26-20__24__49e343c3ec.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-26-20__24_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-26-20__24_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-26-20__24_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-26-20__24_.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-26-20__24_.png" width="334" height="253" alt="Receiving a spoofed e-mail from admin@outlook.com aka Timo Lo(n)gin "></picture></a><figcaption>
            Figure 24: Receiving a spoofed e-mail from admin@outlook.com aka Timo Lo(n)gin 
        </figcaption></figure></div><p>The actual e-mail is shown in figure 24:&nbsp;</p></div><div id="c4641"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-10_22-55-21__25_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_image-2023-7-10_22-55-21__25__9889800189.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_image-2023-7-10_22-55-21__25__61e74599fe.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_image-2023-7-10_22-55-21__25__d26e364b54.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_image-2023-7-10_22-55-21__25__5efeee647e.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-10_22-55-21__25_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-10_22-55-21__25_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-10_22-55-21__25_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/a/f/csm_image-2023-7-10_22-55-21__25__efd81990ca.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-10_22-55-21__25_.png" width="679" height="664" alt="Using HTML with SMTP smuggling to create a convincing phishing e-mail "></picture></a><figcaption>
            Figure 25: Using HTML with SMTP smuggling to create a convincing phishing e-mail 
        </figcaption></figure></div><div><p>We can once more confirm SPF alignment by looking at the message headers:&nbsp;</p><p><span>Received-SPF: Pass (<a href="http://mx3.atos.net/" target="_blank" rel="noreferrer noopener">mx3.atos.net</a>: domain of <a href="#" rel="noreferrer noopener" target="_blank" data-mailto-token="nbjmup+benjoApvumppl/dpn" data-mailto-vector="1">admin(at)outlook.com</a> designates 40.92.75.68 as permitted sender)&nbsp;<br>   identity=mailfrom; client-ip=40.92.75.68;&nbsp;<br>   receiver=<a href="http://mx3.atos.net/" target="_blank" rel="noreferrer noopener">mx3.atos.net</a>; envelope-from="admin@<a href="http://outlook.com/" target="_blank" rel="noreferrer noopener">outlook.com</a>";&nbsp;<br>   x-sender="admin@<a href="http://outlook.com/" target="_blank" rel="noreferrer noopener">outlook.com</a>"; x-conformance=spf_only;&nbsp;<br>   x-record-type="v=spf1"; x-record-text="v=spf1&nbsp;<br>   ip4:40.92.0.0/15 ip4:40.107.0.0/16 ip4:52.100.0.0/14&nbsp;<br>   ip4:104.47.0.0/17 ip6:2a01:111:f400::/48&nbsp;<br>   ip6:2a01:111:f403::/49 ip6:2a01:111:f403:8000::/50&nbsp;<br>   ip6:2a01:111:f403:c000::/51 ip6:2a01:111:f403:f000::/52 -all"&nbsp;</span></p><p>Since the previous examples were only text-based, attackers could also use HTML, for some more convincing phishing e-mails (figure 25).&nbsp;</p></div></div><div id="c4642"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-53-16__26_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/f/6/csm_image-2023-7-5_15-53-16__26__9964f1b73a.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/6/csm_image-2023-7-5_15-53-16__26__7bf2ff6acd.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/6/csm_image-2023-7-5_15-53-16__26__b856cb3491.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/f/6/csm_image-2023-7-5_15-53-16__26__ab4802cbff.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-53-16__26_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-53-16__26_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-53-16__26_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-53-16__26_.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_15-53-16__26_.png" width="341" height="251" alt="Receiving a spoofed e-mail on hr@sec-consult.com from ceo@sec-consult.com "></picture></a><figcaption>
            Figure 26: Receiving a spoofed e-mail on hr@sec-consult.com from ceo@sec-consult.com 
        </figcaption></figure></div><div><p>However, to keep it simple, we'll stick to just text.&nbsp;</p><p>So, this is cool, but again, <strong>that's not everything</strong>! Since the outbound Outlook SMTP server is not only used for e-mails by <a href="https://outlook.com/" target="_blank" rel="noreferrer">outlook.com</a>, but for <strong>the entirety of Exchange Online</strong>, we can now send e-mails from <strong>every domain which uses Exchange Online to send e-mails</strong>!&nbsp;</p><p>Since this affects <strong>LOTS</strong> of companies (as later discussed in SMTP Smuggling Impact section), we can choose our sender domain freely. We can even use <a href="https://sec-consult.com/" target="_blank">sec-consult.com</a> itself! (see figure 26)&nbsp;</p></div></div><div id="c4643"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_exotic__27_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/5/b/csm_SMTP_Smuggling-SMTP_session_exotic__27__1e601db198.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/b/csm_SMTP_Smuggling-SMTP_session_exotic__27__6399fb19fc.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/b/csm_SMTP_Smuggling-SMTP_session_exotic__27__c4c8d253e6.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/b/csm_SMTP_Smuggling-SMTP_session_exotic__27__4e8ac3d3a0.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_exotic__27_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_exotic__27_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_exotic__27_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/5/b/csm_SMTP_Smuggling-SMTP_session_exotic__27__3127c76859.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_session_exotic__27_.png" width="568" height="188" alt="Example message data with exotic end-of-data sequence using a null byte "></picture></a><figcaption>
            Figure 27: Example message data with exotic end-of-data sequence using a null byte 
        </figcaption></figure></div><div><p>As before, the SPF check succeeds with domain alignment, since sec-consult.com is using Exchange Online and the SPF record includes the respective Exchange Online SPF domain <strong>spf.protection.outlook.com</strong>.&nbsp;</p><p><span>Received-SPF: Pass (<a href="http://mx4.atos.net/" target="_blank" rel="noreferrer noopener">mx4.atos.net</a>: domain of <a href="#" rel="noreferrer noopener" target="_blank" data-mailto-token="nbjmup+dfpAtfd.dpotvmu/dpn" data-mailto-vector="1">ceo(at)sec-consult.com</a>&nbsp;<br>   designates 40.92.48.103 as permitted sender)&nbsp;<br>   identity=mailfrom; client-ip=40.92.48.103;&nbsp;<br>   receiver=<a href="http://mx4.atos.net/" target="_blank" rel="noreferrer noopener">mx4.atos.net</a>; envelope-from="ceo@<a href="http://sec-consult.com/" target="_blank" rel="noreferrer noopener">sec-consult.com</a>";&nbsp;<br>   x-sender="ceo@<a href="http://sec-consult.com/" target="_blank" rel="noreferrer noopener">sec-consult.com</a>"; x-conformance=spf_only;&nbsp;<br>   x-record-type="v=spf1"; x-record-text="v=spf1&nbsp;<br>   ip4:40.92.0.0/15 ip4:40.107.0.0/16 ip4:52.100.0.0/14&nbsp;<br>   ip4:104.47.0.0/17 ip6:2a01:111:f400::/48&nbsp;<br>   ip6:2a01:111:f403::/49 ip6:2a01:111:f403:8000::/50&nbsp;<br>   ip6:2a01:111:f403:c000::/51 ip6:2a01:111:f403:f000::/52 -all"&nbsp;</span></p><p>With GMX and Exchange Online out of the way, we're now approaching our last target!&nbsp;</p><h2>Smuggling to Amazon, PayPal, eBay, ..., on the road to Cisco&nbsp;</h2><p>GMX and Exchange Online allow SMTP smuggling due to insufficient sanitization at their outbound SMTP servers, <strong>but what about insecure inbound SMTP servers</strong>? What if there are inbound SMTP servers that allow such non-restrictive end-of-data sequences that even the most restrictive outbound SMTP servers would let such sequences through?&nbsp;</p><p>To get to the bottom of this, we can use a scanner that sends e-mails to inbound SMTP servers, but uses exotic end-of-data sequences. If the connection to the inbound SMTP server times out, the exotic end-of-data sequence was ignored. Otherwise, we most likely found something interesting!&nbsp;</p><p>So, what exactly is "exotic"? Exotic end-of-data sequences could for example be:&nbsp;</p><ul><li>Interrupted end-of-data sequences: &nbsp;&nbsp; 	<ul><li>&lt;CR&gt;&lt;LF&gt;\x00.&lt;CR&gt;&lt;LF&gt;&nbsp;</li><li>&lt;CR&gt;&lt;LF&gt;.\x00&lt;CR&gt;&lt;LF&gt;&nbsp;</li></ul></li><li>End-of-data sequences using incomplete CRLFs:&nbsp;&nbsp; 	<ul><li>&lt;LF&gt;.&lt;LF&gt;&nbsp;</li><li>&lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&nbsp;</li><li>&lt;CR&gt;.&lt;LF&gt;&nbsp;</li></ul></li><li>End-of-data sequences in the message header&nbsp;</li></ul><p>The message data of such an "exotic" e-mail could look like in figure 27.</p></div></div><div id="c4644"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_iCloud__28_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/6/0/csm_SMTP_Smuggling-SMTP_smuggling_iCloud__28__bc08a61165.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/6/0/csm_SMTP_Smuggling-SMTP_smuggling_iCloud__28__c559943149.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/6/0/csm_SMTP_Smuggling-SMTP_smuggling_iCloud__28__f84cec72dd.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/6/0/csm_SMTP_Smuggling-SMTP_smuggling_iCloud__28__c7b59a4c61.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_iCloud__28_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_iCloud__28_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/6/0/csm_SMTP_Smuggling-SMTP_smuggling_iCloud__28__4a0fb995b7.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/6/0/csm_SMTP_Smuggling-SMTP_smuggling_iCloud__28__b8d8430e06.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/SMTP_Smuggling-SMTP_smuggling_iCloud__28_.png" width="967" height="570" alt="SMTP smuggling exploiting exotic end-of-data sequence <CR>.<CR> "></picture></a><figcaption>
            Figure 28: SMTP smuggling exploiting exotic end-of-data sequence &lt;CR&gt;.&lt;CR&gt; 
        </figcaption></figure></div><div><p>Now, by scanning the former Alexa Top 1000, various inbound SMTP servers accepting such sequences were identified! However, only one of those sequences seems to be working for lots of SMTP servers: <strong>&lt;CR&gt;.&lt;CR&gt;</strong>&nbsp;</p><p>This sequence gets accepted by the inbound e-mail servers of some really high-value targets:&nbsp;</p><ul><li>Amazon&nbsp;</li><li>PayPal&nbsp;</li><li>eBay&nbsp;</li><li>Cisco&nbsp;</li><li>The IRS&nbsp;</li></ul><p>The one thing that they all have in common is that they're using <a href="https://www.cisco.com/site/in/en/products/security/secure-email/index.html" target="_blank" rel="noreferrer">Cisco Secure Email</a>, with on-prem <strong>Cisco Secure Email Gateway</strong> or cloud-based Cisco's Secure Email Cloud Gateway. And again, for some odd reason, sec-consult.com is using Cisco Secure Email Gateway as well!&nbsp;</p><p>As a proof of concept (figure 28), we can now send an e-mail from <a href="#" rel="noreferrer noopener" target="_blank" data-mailto-token="nbjmup+benjoAjdmpve/dpn" data-mailto-vector="1">admin(at)icloud.com</a> to our target at sec-consult.com, since, like with many other outbound SMTP servers (further discussed in SMTP Smuggling Impact),<strong> &lt;CR&gt;.&lt;CR&gt; doesn't get filtered:</strong>&nbsp;</p></div></div><div id="c4645"><div><figure><a href="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_18-13-25__29_.png" rel="lightbox[1]"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/9/4/csm_image-2023-7-5_18-13-25__29__735b18487b.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/4/csm_image-2023-7-5_18-13-25__29__bf5bae9a58.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/4/csm_image-2023-7-5_18-13-25__29__da3b2e851b.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/9/4/csm_image-2023-7-5_18-13-25__29__1246900d67.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_18-13-25__29_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_18-13-25__29_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_18-13-25__29_.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_18-13-25__29_.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-7-5_18-13-25__29_.png" width="337" height="250" alt="Sending spoofed e-mails as admin@icloud.com "></picture></a><figcaption>
            Figure 29: Sending spoofed e-mails as admin@icloud.com 
        </figcaption></figure></div><p>Like before, the e-mail goes through unscathed, as shown in figure 29.&nbsp;</p></div><div id="c4646"><div><figure><a href="https://securitytrails.com/domain/mx01.ionos.de/dns?__cf_chl_tk=.TKYmeShS.FZRsY6AAhEHSwz4V.4vi5xyMUN0i6TvkY-1702368252-0-gaNycGzNFWU" target="_blank" rel="noreferrer"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/1/d/csm_ionos_domains__30__83ff974d3b.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/1/d/csm_ionos_domains__30__7db6508420.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/1/d/csm_ionos_domains__30__60b10fb935.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/1/d/csm_ionos_domains__30__1a6ebedea9.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/ionos_domains__30_.PNG" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/ionos_domains__30_.PNG" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/ionos_domains__30_.PNG" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/1/d/csm_ionos_domains__30__40b60ca736.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/ionos_domains__30_.PNG" width="592" height="269" alt="Getting domains using Ionos e-mail services via SecurityTrails "></picture></a><figcaption>
            Figure 30: Getting domains using Ionos e-mail services via SecurityTrails 
        </figcaption></figure></div><div><p>SPF checks pass with domain alignment and without any issues.&nbsp;</p><p><span>Received-SPF: Pass (<a href="http://mx4.atos.net/" target="_blank" rel="noreferrer noopener">mx4.atos.net</a>: domain of <a href="#" rel="noreferrer noopener" target="_blank" data-mailto-token="nbjmup+benjoAjdmpve/dpn" data-mailto-vector="1">admin(at)icloud.com</a>&nbsp;<br>   designates 17.57.155.23 as permitted sender)&nbsp;<br>   identity=mailfrom; client-ip=17.57.155.23;&nbsp;<br>   receiver=<a href="http://mx4.atos.net/" target="_blank" rel="noreferrer noopener">mx4.atos.net</a>; envelope-from="admin@<a href="http://icloud.com/" target="_blank" rel="noreferrer noopener">icloud.com</a>";&nbsp;<br>   x-sender="admin@<a href="http://icloud.com/" target="_blank" rel="noreferrer noopener">icloud.com</a>"; x-conformance=spf_only;&nbsp;<br>   x-record-type="v=spf1"; x-record-text="v=spf1&nbsp;<br>   ip4:17.58.0.0/16 ip4:17.57.155.0/24 ip4:17.57.156.0/24&nbsp;<br>   ip4:144.178.36.0/24 ip4:144.178.38.0/24 ip4:112.19.199.64/29&nbsp;<br>   ip4:112.19.242.64/29 ip4:222.73.195.64/29 ip4:157.255.1.64/29&nbsp;<br>   ip4:106.39.212.64/29 ip4:123.126.78.64/29&nbsp;<br> &nbsp; ip4:183.240.219.64/29 ip4:39.156.163.64/29 ~all"&nbsp;</span></p><p>Hence, DMARC passes as well:&nbsp;</p><p><span>Authentication-Results-Original: <a href="http://mx4.atos.net/" target="_blank" rel="noreferrer noopener">mx4.atos.net</a>; dkim=none (message not signed)&nbsp;<br>  header.i=none; spf=Pass smtp.mailfrom=admin@<a href="http://icloud.com/" target="_blank" rel="noreferrer noopener">icloud.com</a>; spf=None&nbsp;<br>  smtp.helo=postmaster@<a href="http://qs51p00im-qukt01080502.me.com/" target="_blank" rel="noreferrer noopener">qs51p00im-qukt01080502.me.com</a>; dmarc=pass (p=quarantine&nbsp;<br>  dis=none) d=<a href="http://icloud.com/" target="_blank" rel="noreferrer noopener">icloud.com</a>&nbsp;</span></p><p>With Cisco's Secure Email covered, we can now go on and take a look at the global impact!&nbsp;</p><h2>SMTP Smuggling Impact&nbsp;</h2><p>At this point we've covered lots of <strong>outbound and inbound SMTP smuggling</strong>. But, speaking globally, how bad is it?&nbsp;</p><h3>GMX and Ionos&nbsp;</h3><p>SMTP smuggling via GMX and Ionos e-mail services allowed SMTP smuggling from roughly <strong>1.35 million different domains</strong>, as indicated by the domains pointing their MX record to Ionos (figure 30).&nbsp;</p></div></div><div id="c4647"><div><figure><a href="https://www.shodan.io/search/facet?query=port%3A25&amp;facet=product" target="_blank" rel="noreferrer"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/e/d/csm_shodan_email_software__31__418eca2305.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/d/csm_shodan_email_software__31__eeb783d612.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/d/csm_shodan_email_software__31__757450cdc8.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/d/csm_shodan_email_software__31__402b607929.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/d/csm_shodan_email_software__31__4ab34bb636.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/d/csm_shodan_email_software__31__897b0e4498.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/d/csm_shodan_email_software__31__a8bcccd0c9.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/e/d/csm_shodan_email_software__31__69ecb2258e.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/_processed_/e/d/csm_shodan_email_software__31__30e6c2e871.png" width="1100" height="185" alt="Used SMTP software on the Internet (Shodan)(results may vary) "></picture></a><figcaption>
            Figure 31: Used SMTP software on the Internet (Shodan)(results may vary) 
        </figcaption></figure></div><div><p>Checking the SPF record of these domains confirms that they are most likely all permitting <strong>_spf-eu.ionos.com</strong> for sending e-mails.&nbsp;</p><p>However, as already mentioned, SMTP smuggling doesn't work for every receiving inbound SMTP server and, in this case, requires inbound SMTP servers to accept <strong>&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</strong> as end-of-data sequence. So, who's affected?&nbsp;</p><p>Only few of the bigger e-mail providers that were tested are affected. These include:&nbsp;</p><ul><li data-aria-level="1" data-aria-posinset="1" data-font="Wingdings" data-leveltext="" data-list-defn-props="{&quot;335552541&quot;:1,&quot;335559684&quot;:-2,&quot;335559685&quot;:720,&quot;335559991&quot;:360,&quot;469769226&quot;:&quot;Wingdings&quot;,&quot;469769242&quot;:[9642],&quot;469777803&quot;:&quot;left&quot;,&quot;469777804&quot;:&quot;&quot;,&quot;469777815&quot;:&quot;multilevel&quot;}" data-listid="8"><p>Fastmail&nbsp;</p></li><li data-aria-level="1" data-aria-posinset="2" data-font="Wingdings" data-leveltext="" data-list-defn-props="{&quot;335552541&quot;:1,&quot;335559684&quot;:-2,&quot;335559685&quot;:720,&quot;335559991&quot;:360,&quot;469769226&quot;:&quot;Wingdings&quot;,&quot;469769242&quot;:[9642],&quot;469777803&quot;:&quot;left&quot;,&quot;469777804&quot;:&quot;&quot;,&quot;469777815&quot;:&quot;multilevel&quot;}" data-listid="8"><p>Runbox&nbsp;</p></li></ul><p>This might not seem bad at first, but looking at affected SMTP software on the Internet is a different story. After testing some popular e-mail software in their default configuration, it turned out that <strong>Postfix</strong> and <strong>Sendmail</strong> fulfil the requirements, are <strong>affected</strong> and can be smuggled to. Speaking globally, this is a lot (figure 31)!&nbsp;</p></div></div><div id="c4648"><p>Aside from Postfix and Sendmail, other SMTP implementations are most likely affected as well, including Cisco Secure Email (Cloud) Gateway, to which we'll get in a second.&nbsp;</p><h3>Microsoft Exchange Online&nbsp;</h3><p>Same as GMX and Ionos, Exchange Online allowed smuggling via a <strong>&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</strong> end-of-data sequence as well, which makes it possible to smuggle from every domain pointing their SPF record to Exchange Online. This amounts to <a href="https://enlyft.com/tech/products/exchange-online" target="_blank" rel="noreferrer">millions of domains</a> all across the globe, including some very high-value targets owned by Microsoft like <strong>microsoft.com, msn.com, github.com, outlook.com, office365.com, openai.com</strong> and many more, and also domains of their customers (e.g., <strong>tesla.com, mastercard.com, nike.com</strong>, etc.).&nbsp;</p><p>However, as previously mentioned, smuggling from Exchange Online is even more restricted than from GMX/Ionos, since the receiving inbound SMTP server must support BDAT. This is the case for Fastmail and - still - hundreds of thousands of <a href="https://www.shodan.io/search?query=postfix+port%3A25+-CHUNKING" target="_blank" rel="noreferrer">postfix</a> and <a href="https://www.shodan.io/search?query=sendmail+port%3A25+-CHUNKING" target="_blank" rel="noreferrer">sendmail</a> servers.&nbsp;</p></div><div id="c4649"><table><tbody><tr><td>
                            
                    
            
    


        Software
    


        
                
                        
                                </td><td>
                    
            
    


        Without BDAT/CHUNKING 
    


        
                
                        </td><td>
                    
            
    


        Total 
    


        
                
                        </td><td>
                    
            
    


        Percentage 
    


        
                
                        </td><td>
                    
            
    


        Shodan query 
    


        
                
                        </td></tr><tr><td>
                    
            
    


        Postfix 
    


        
                
                        </td><td>
            
    


        716884 
    


        
                </td><td>
            
    


        1475616 
    


        
                </td><td>
            
    


        ~50% 
    


        
                </td><td>
            
    


        postfix port:25 -CHUNKING 
    


        
                </td></tr><tr><td>
                    
            
    


        Sendmail 
    


        
                
                        </td><td>
            
    


        168823 
    


        
                </td><td>
            
    


        169030 
    


        
                </td><td>
            
    


        ~99% 
    


        
                </td><td>
            
    


        sendmail port:25 -CHUNKING 
    


        
                </td></tr></tbody></table></div><div id="c4650"><div><figure><a href="https://www.cisco.com/c/en/us/td/docs/security/esa/esa15-0/user_guide/b_ESA_Admin_Guide_15-0/b_ESA_Admin_Guide_12_1_chapter_0100.html?bookSearch=true#task_1254814__table_985308C400C84CE3BC190BC8A3A95D86" target="_blank" rel="noreferrer"><picture><source srcset="https://sec-consult.com/fileadmin/_processed_/3/1/csm_image-2023-12-4_20-56-43__32__0e2fd56e2c.webp" type="image/webp" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/1/csm_image-2023-12-4_20-56-43__32__1d8d563df8.webp" type="image/webp" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/1/csm_image-2023-12-4_20-56-43__32__48afd52422.webp" type="image/webp" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/1/csm_image-2023-12-4_20-56-43__32__00e1ec65bf.webp" type="image/webp" media="(min-width: 100px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_20-56-43__32_.png" type="image/png" media="(min-width: 992px)"><source srcset="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_20-56-43__32_.png" type="image/png" media="(min-width: 768px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/1/csm_image-2023-12-4_20-56-43__32__f1f8459130.png" type="image/png" media="(min-width: 576px)"><source srcset="https://sec-consult.com/fileadmin/_processed_/3/1/csm_image-2023-12-4_20-56-43__32__9e7e5a4b7b.png" type="image/png" media="(min-width: 100px)"><img loading="lazy" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/2023_12/image-2023-12-4_20-56-43__32_.png" width="780" height="181" alt="Relevant configuration settings of Cisco Secure Email "></picture></a><figcaption>
            Figure 32: Relevant configuration settings of Cisco Secure Email 
        </figcaption></figure></div><div><p>These numbers from Shodan might not paint the whole picture though, as many servers maybe running postfix, but are hiding their identification banner. Also, other smaller SMTP servers are affected as well, again including Cisco Secure Email (Cloud) Gateway.&nbsp;</p><p>We did not analyze all SMTP software out there, hence it might be possible that other vulnerable servers exist as well.&nbsp;</p><h3>Cisco Secure Email (Cloud) Gateway&nbsp;</h3><p>The Cisco Secure Email Gateway and its cloud counterpart, the Cisco Secure Email Cloud Gateway, are both "vulnerable" to <strong>inbound</strong> SMTP smuggling. The quotes are necessary in this case, since, according to lengthy discussions with Cisco, this is not a bug, but a feature (see Responsible Disclosure section)!&nbsp;</p><p><strong>By default</strong>, Cisco Secure Email (Cloud) Gateway accepts <strong>&lt;CR&gt;.&lt;CR&gt;</strong> as end-of-data sequence, which does not get filtered by the following SMTP servers when sending outbound:&nbsp;</p><ul><li>Outlook/Exchange Online&nbsp;</li><li>Icloud&nbsp;</li><li>On-premise exchange server&nbsp;</li><li>Postfix&nbsp;</li><li>Sendmail&nbsp;</li><li>Startmail&nbsp;</li><li>Fastmail&nbsp;</li><li>Zohomail&nbsp;</li></ul><p>This would allow inbound SMTP smuggling to around 40k domains using Cisco's Secure Email <strong>Cloud</strong> Gateway, if they're using the <strong>default configuration</strong> (like we did). These domains can be determined by checking a passive DNS database like SecurityTrails for <a href="https://securitytrails.com/list/apex_domain/iphmx.com" target="_blank" rel="noreferrer">iphmx.com subdomains</a>. Identifying on-premise Cisco Secure Email Gateways on the other hand is a difficult task, since lots of Internet-wide scanners (e.g., Shodan) seem to get blocked when conducting service scans. However, to get a better feeling for the usage of this product, we scanned the former Alexa Top 1000, and discovered at least the following 35 domains.&nbsp;</p><ul><li><a href="http://amazon.com/" target="_blank" rel="noreferrer noopener">amazon.com</a>&nbsp;</li><li><a href="http://amazon.co.jp/" target="_blank" rel="noreferrer noopener">amazon.co.jp</a>&nbsp;</li><li><a href="http://amazon.co.uk/" target="_blank" rel="noreferrer noopener">amazon.co.uk</a>&nbsp;</li><li><a href="http://amazon.it/" target="_blank" rel="noreferrer noopener">amazon.it</a>&nbsp;</li><li><a href="http://amazon.fr/" target="_blank" rel="noreferrer noopener">amazon.fr</a>&nbsp;</li><li><a href="http://marriott.com/" target="_blank" rel="noreferrer noopener">marriott.com</a>&nbsp;</li><li><a href="http://cisco.com/" target="_blank" rel="noreferrer noopener">cisco.com</a>&nbsp;</li><li><a href="http://amazon.co.jp/" target="_blank" rel="noreferrer noopener">amazon.co.jp</a>&nbsp;</li><li><a href="http://amazon.in/" target="_blank" rel="noreferrer noopener">amazon.in</a>&nbsp;</li><li><a href="http://paypal.com/" target="_blank" rel="noreferrer noopener">paypal.com</a>&nbsp;</li><li><a href="http://amazon.ca/" target="_blank" rel="noreferrer noopener">amazon.ca</a>&nbsp;</li><li><a href="http://goodreads.com/" target="_blank" rel="noreferrer noopener">goodreads.com</a>&nbsp;</li><li><a href="http://webex.com/" target="_blank" rel="noreferrer noopener">webex.com</a>&nbsp;</li><li><a href="http://custhelp.com/" target="_blank" rel="noreferrer noopener">custhelp.com</a>&nbsp;</li><li><a href="http://amazon.in/" target="_blank" rel="noreferrer noopener">amazon.in</a>&nbsp;</li><li><a href="http://imdb.com/" target="_blank" rel="noreferrer noopener">imdb.com</a>&nbsp;</li><li><a href="http://intuit.com/" target="_blank" rel="noreferrer noopener">intuit.com</a>&nbsp;</li><li><a href="http://ndtv.com/" target="_blank" rel="noreferrer noopener">ndtv.com</a>&nbsp;</li><li><a href="http://amazon.cn/" target="_blank" rel="noreferrer noopener">amazon.cn</a>&nbsp;</li><li><a href="http://makemytrip.com/" target="_blank" rel="noreferrer noopener">makemytrip.com</a>&nbsp;</li><li><a href="http://amazon.com.au/" target="_blank" rel="noreferrer noopener">amazon.com.au</a>&nbsp;</li><li><a href="http://amazon.com/" target="_blank" rel="noreferrer noopener">amazon.com</a>&nbsp;</li><li><a href="http://amazonaws.com/" target="_blank" rel="noreferrer noopener">amazonaws.com</a>&nbsp;</li><li><a href="http://primevideo.com/" target="_blank" rel="noreferrer noopener">primevideo.com</a>&nbsp;</li><li><a href="http://amazon.es/" target="_blank" rel="noreferrer noopener">amazon.es</a>&nbsp;</li><li><a href="http://irs.gov/" target="_blank" rel="noreferrer noopener">irs.gov</a>&nbsp;</li><li><a href="http://amazon.com.br/" target="_blank" rel="noreferrer noopener">amazon.com.br</a>&nbsp;</li><li><a href="http://aastocks.com/" target="_blank" rel="noreferrer noopener">aastocks.com</a>&nbsp;</li><li><a href="http://ebay.com/" target="_blank" rel="noreferrer noopener">ebay.com</a>&nbsp;</li><li><a href="http://amazon.de/" target="_blank" rel="noreferrer noopener">amazon.de</a>&nbsp;</li><li><a href="http://ebay.de/" target="_blank" rel="noreferrer noopener">ebay.de</a>&nbsp;</li><li><a href="http://ebay.co.uk/" target="_blank" rel="noreferrer noopener">ebay.co.uk</a>&nbsp;</li><li><a href="http://ebay.com.au/" target="_blank" rel="noreferrer noopener">ebay.com.au</a>&nbsp;</li><li><a href="http://mayoclinic.org/" target="_blank" rel="noreferrer noopener">mayoclinic.org</a>&nbsp;</li><li><a href="http://audible.com/" target="_blank" rel="noreferrer noopener">audible.com</a>&nbsp;</li></ul><p>Note that this doesn't take into account servers that don't have an MX record let alone an SMTP server.&nbsp;</p><h2>Further vulnerabilities&nbsp;</h2><p>During the research we've also discovered some exotic inbound SMTP servers that interpret end-of-data sequences like <strong>&lt;CR&gt;&lt;LF&gt;\x00.&lt;CR&gt;&lt;LF&gt;</strong>, with "\x00" representing a null byte. With proprietary SMTP components and lots of different e-mail services intertwined it's hard to tell what is possible until an e-mail reaches its final destination.&nbsp;</p><p>Even though SMTP smuggling might still be hiding in some places, we hopefully eliminated some big targets.&nbsp;<br> &nbsp;</p><h2>Responsible Disclosure&nbsp;</h2><p>How do we report a vulnerability that is based on protocol interpretation? Who is right, who is wrong? Let's take a look at some RFCs!&nbsp;</p><p>In general, <a href="https://www.rfc-editor.org/rfc/rfc5321" target="_blank" rel="noreferrer">RFC 5321</a> from 2008 states the following:&nbsp;</p><p><strong><em>"The custom of accepting lines ending only in &lt;LF&gt;, as a concession to non-conforming behavior on the part of some UNIX systems, has proven to cause more interoperability problems than it solves, and SMTP server systems MUST NOT do this, even in the name of improved robustness.&nbsp; In particular, the sequence "&lt;LF&gt;.&lt;LF&gt;" (bare line feeds, without carriage returns) MUST NOT be treated as equivalent to &lt;CRLF&gt;.&lt;CRLF&gt; as the end of mail data indication."&nbsp;</em></strong></p><p>So, it's the inbound SMTP server's fault! But wait, <a href="https://www.rfc-editor.org/rfc/rfc5322" target="_blank" rel="noreferrer">RFC 5322</a>, also from 2008, says the following about the body of a message:&nbsp;</p><p><em><strong>"CR and LF MUST only occur together as CRLF; they MUST NOT appear independently in the body."</strong></em></p><p>This essentially means that <strong>both sides (outbound and inbound)</strong> are at fault! Also, this shows us that inconsistent interpretation of the end-of-data sequence is not a novel issue. Now, what do the affected parties think about this? We have thus initiated our responsible disclosure process around <strong>end of July 2023</strong> (see Timeline further below).&nbsp;</p><h3>GMX&nbsp;</h3><p>The responsible disclosure process with GMX was pure bliss. After immediately receiving a response, the issue was fixed in roughly ten days. Aside from paying a bounty, they even added Timo to their <a href="https://bugbounty.gmx.net/halloffame-index.html" target="_blank" rel="noreferrer">bug bounty hall of fame</a>. All-in-all a great experience! Huge props to GMX for such a professional and quick reaction.&nbsp;</p><h3>Microsoft&nbsp;</h3><p>The outbound SMTP smuggling vulnerability was submitted via the <a href="https://www.microsoft.com/en-us/msrc" target="_blank" rel="noreferrer">Microsoft Security Response Center (MSRC)</a>. Roughly a month later, Microsoft replied:&nbsp;</p><p><strong><em>"Thank you again for submitting this issue to Microsoft. Currently, MSRC prioritizes vulnerabilities that are assessed as “Important” or “Critical'’ severities for immediate servicing. After careful investigation, this case has been assessed as moderate severity and does not meet MSRC’s bar for immediate servicing since the attack only works if the mail server of the recipient treats a non-standard EOD sequence as EOD . However, we have shared the report with the team responsible for maintaining the product or service. They will take appropriate action as needed to help keep customers protected"&nbsp;&nbsp;</em></strong></p><p>Fair enough, they got bigger fish to fry! After retesting the issue every now and then, they seem to have fixed it roughly in the middle of October 2023.&nbsp;</p><h3>Cisco&nbsp;</h3><p>As previously mentioned, the "vulnerability" in Cisco Secure Email (Cloud) Gateway is not a bug, but a feature. And, unlike in most cases, this is actually somewhat true.&nbsp;</p><p>Cisco Secure Email (Cloud) Gateway can be configured to handle carriage returns and line feeds in a special manner, as seen <a href="https://www.cisco.com/c/en/us/td/docs/security/esa/esa15-0/user_guide/b_ESA_Admin_Guide_15-0/b_ESA_Admin_Guide_12_1_chapter_0100.html?bookSearch=true#task_1254814__table_985308C400C84CE3BC190BC8A3A95D86" target="_blank" rel="noreferrer">here</a>.&nbsp;</p></div></div><div id="c4653"><p>However, <strong>by default</strong>, Cisco Secure Email (Cloud) Gateway "Allows the message, but converts bare CR and LF characters to CRLF characters" (the vulnerable "Clean" setting), which basically <strong>enables inbound SMTP smuggling</strong> via <strong>&lt;CR&gt;.&lt;CR&gt; </strong>end-of-data sequences. We have communicated this issue to Cisco and CERT/CC and went back and forth quite a bit. But at the end of the day, it's not a bug, it's a feature.&nbsp;</p><p>Since this feature allowed us to send spoofed e-mails from arbitrary Exchange Online domains straight into our inboxes, we decided to <strong>change</strong> the configuration to "<strong>Allow</strong>".&nbsp;</p><p>This passes e-mails with bare carriage returns or line feeds on to our actual e-mail server (Cisco Secure Email Gateway is just a gateway), which only interprets &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; as end-of-data sequence. If you don't want to receive spoofed e-mails with valid DMARC checks as well, we highly recommend changing your configuration!&nbsp;</p><h2>Conclusion&nbsp;</h2><p>We've shown a novel SMTP spoofing technique with this research that allowed to spoof e-mails from millions of domains.&nbsp;</p><p>Even though Microsoft and GMX have patched this issue promptly, inbound SMTP smuggling to Cisco Secure Email instances (cloud and on-premise) is still possible with <strong>default</strong> configurations. We highly encourage to change these default configurations, as described in the Responsible Disclosure chapter.&nbsp;</p><p>Also, this blog post hopefully sparked further interest in SMTP research, since there is still so much to explore. Even with SMTP smuggling alone, there are many things to look at:&nbsp;</p><ul><li>Other smuggling techniques&nbsp;</li><li>Bounce smuggling&nbsp;</li><li>Smuggling via BDAT&nbsp;</li><li>Smuggling dangerous/exotic SMTP commands&nbsp;</li><li>Internet-wide scans&nbsp;</li><li>Other SMTP software&nbsp;</li><li>etc.&nbsp;</li></ul><p>So, this is probably not the last time you've heard of SMTP smuggling!&nbsp;</p></div><section><p id="c4655"><h2>Timeline</h2></p></section><div id="c4654"><table><tbody><tr><th>
                            
                    
            
    


        2023-06-07: 
    


        
                
                        
                                </th><td>
                    
            
    


        First outbound SMTP smuggling proof of concept (GMX)
    


        
                
                        </td></tr><tr><th>
                    
            
    


        2023-06-08:
    


        
                
                        </th><td>
            
    


        Discovery of outbound SMTP smuggling in Exchange Online
    


        
                </td></tr><tr><th>
                    
            
    


        2023-06-20: 
    


        
                
                        </th><td>
            
    


        Discovery of Cisco Secure Email (Cloud) Gateway inbound SMTP smuggling
    


        
                </td></tr><tr><th>
                    
            
    


        2023-06/2023-07: 
    


        
                
                        </th><td>
            
    


        Developing tools, analyzing test cases, further research
    


        
                </td></tr><tr><th>
                    
            
    


        2023-07-26:
    


        
                
                        </th><td>
            
    


        Contacting MSRC
    


        
                </td></tr><tr><th>
                    
            
    


        2023-07-27: 
    


        
                
                        </th><td>
            
    


        Contacting Cisco
    


        
                </td></tr><tr><th>
                    
            
    


        2023-07-29:
    


        
                
                        </th><td>
            
    


        Contacting GMX.
    


        
                </td></tr><tr><th>
                    
            
    


        2023-08-10:
    


        
                
                        </th><td>
            
    


        GMX fixed the issue
    


        
                </td></tr><tr><th>
                    
            
    


        2023-08-17: 
    


        
                
                        </th><td>
            
    


        Contacting CERT Coordination Center (CERT/CC) for further discussion with Cisco
    


        
                </td></tr><tr><th>
                    
            
    


        2023-08-23: 
    


        
                
                        </th><td>
            
    


        Microsoft responds and rates the vulnerability with moderate risk
    


        
                </td></tr><tr><th>
                    
            
    


        2023-09-13:
    


        
                
                        </th><td>
            
    


        CERT/CC accepts the case
    


        
                </td></tr><tr><th>
                    
            
    


        2023-10-16: 
    


        
                
                        </th><td>
            
    


        SMTP smuggling in Exchange Online is fixed
    


        
                </td></tr><tr><th>
                    
            
    


        2023-11-29:
    


        
                
                        </th><td>
            
    


        CERT/CC allows public release of SMTP smuggling, since no software vulnerabilities were identified ("it's not a bug, it's a feature")
    


        
                </td></tr><tr><th>
                    
            
    


        2023-12-05:
    


        
                
                        </th><td>
            
    


        Informing CERT.at and CERT-Bund about planned release, providing blog post draft, warning about Cisco configuration
    


        
                </td></tr><tr><th>
                    
            
    


        2023-12-18:
    


        
                
                        </th><td>
            
    


        Release date of blog post 
    


        
                </td></tr></tbody></table></div><div id="c4657"><p><em>This research was done by Timo Longin and published on behalf of the <a href="https://sec-consult.com/vulnerability-lab/#c1699" target="_blank">SEC Consult Vulnerability Lab</a>.&nbsp;</em></p></div><div id="c4656"><header><h2>
                FAQ 
            </h2></header><div id="accordion4656"><div aria-labelledby="accordionHeading-1-4656" data-toggle-animate="" id="accordion-item-1-4656"><p>If you are a user of a big e-mail provider (Outlook, Gmail, etc.), you are most likely going to be fine (for now at least). Since SMTP smuggling is a fairly new topic and still has things to explore, we cannot be certain though. However, if you're using Cisco Secure Email (cloud or on-premise), you should definitely check your configuration (see Responsible Disclosure)!&nbsp;</p><p>But, as always, don't blindly trust anything that lands in your e-mail inbox!&nbsp;</p></div><div aria-labelledby="accordionHeading-2-4656" data-toggle-animate="" id="accordion-item-2-4656"><p>We have developed an analysis tool internally but decided to publish it at a later date (maybe already at the <a href="https://events.ccc.de/congress/2023/hub/en/fahrplan" target="_blank" rel="noreferrer">37C3 conference</a> end of December 2023 where this research will be presented), as currently many Cisco Secure Mail installations are affected by the issue. &nbsp;</p></div><div aria-labelledby="accordionHeading-3-4656" data-toggle-animate="" id="accordion-item-3-4656"><p>The short answer is no, not always! Even though the smuggled e-mail might come from a legitimate sender and passes e-mail authentication due to SPF alignment, the e-mail might still get blocked, depending on the e-mail contents and other factors. Also, if more than SPF alignment is required for the e-mail to go through, we're out of luck with SMTP smuggling.&nbsp;</p></div><div aria-labelledby="accordionHeading-4-4656" data-toggle-animate="" id="accordion-item-4-4656"><p>There are two major reasons:&nbsp;</p><ol><li>SMTP is a very old protocol that is somewhat flying under the radar of a lot of security researchers (kind of like <a href="https://sec-consult.com/blog/detail/taking-over-a-country-kaminsky-style/" target="_blank" rel="noreferrer noopener">DNS</a>). Since there wasn't any related research that indicated similar attacks, the chances were good for finding something new!&nbsp;</li><li>Phishing is one of the best ways for threat actors or our red teamers to gain initial access to an organization. Therefore, looking for vulnerabilities in the underlying e-mail protocol - SMTP - seemed natural.&nbsp;</li></ol></div><div aria-labelledby="accordionHeading-5-4656" data-toggle-animate="" id="accordion-item-5-4656"><p>Most likely! Again, for two major reasons:&nbsp;</p><ol><li>Microsoft's SMTP infrastructure including Exchange Online was vulnerable. This would have most likely been found and fixed by prior researchers.&nbsp;</li><li>We haven't found any research stating otherwise.&nbsp;</li></ol></div><div aria-labelledby="accordionHeading-7-4656" data-toggle-animate="" id="accordion-item-7-4656"><p>Yes, of course! In general, implementations of (sometimes) vague specifications can cause all kinds of security issues.&nbsp;</p></div><div aria-labelledby="accordionHeading-8-4656" data-toggle-animate="" id="accordion-item-8-4656"><p>As already mentioned, scanning e-mail services for used software and versions may yield inaccurate results and will most likely get you on some kind of blacklist. The same goes for more specific end-of-data sequence checks, where basically a whole e-mail is sent. Therefore, we could roughly only analyze the top 10k of Alexa domains during this research.&nbsp;</p></div></div></div><div id="c4658"><header><h3>
                Are you interested in working at SEC Consult?
            </h3></header><p>
    



            SEC Consult is always searching for talented security professionals to work in our team.
        </p></div><div><h4>
                    About the author
                </h4><div><div><picture><source data-srcset="/fileadmin/_processed_/7/6/csm_a-TLO_d31c6ef63b.webp" type="image/webp" media="(min-width: 567px)"><source data-srcset="/fileadmin/_processed_/7/6/csm_a-TLO_8cd69e1dd8.webp" type="image/webp" media="(min-width: 100px)"><source data-srcset="/fileadmin/_processed_/7/6/csm_a-TLO_3e1f9a3b48.jpg" type="image/jpg" media="(min-width: 567px)"><source data-srcset="/fileadmin/_processed_/7/6/csm_a-TLO_382f2d4a9d.jpg" type="image/jpg" media="(min-width: 100px)"><img data-sizes="auto" src="https://sec-consult.com/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/Authors/a-TLO.png" data-src="/fileadmin/user_upload/sec-consult/Dynamisch/Blogartikel/Authors/a-TLO.png" width="300" height="336" alt="Portrait of Timo Longin SEC Consult" title=""></picture></div><div><p><br><span>SEC Consult </span><br><span>Senior Security Consultant</span></p><p>Timo Longin (also known as Login) is a senior security consultant at SEC Consult at day and a security researcher at night. Aside from everyday security assessments, he publishes blog posts and security tools, holds talks at conferences and universities,&nbsp;and has a passion for CTFs. As a well-rounded offensive security researcher, he tries to find forgotten and new exploitation techniques that make the unthinkable possible!</p></div></div></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Tech's DEI backlash is here (122 pts)]]></title>
            <link>https://techcrunch.com/2023/12/21/techs-dei-backlash-is-here/</link>
            <guid>38726911</guid>
            <pubDate>Thu, 21 Dec 2023 21:02:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://techcrunch.com/2023/12/21/techs-dei-backlash-is-here/">https://techcrunch.com/2023/12/21/techs-dei-backlash-is-here/</a>, See on <a href="https://news.ycombinator.com/item?id=38726911">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
				<p id="speakable-summary"><span>“Should I go public</span> with the story about the time I was told I can’t be promoted for being a white man?” Shaun Maguire, a partner at Sequoia Capital, <a href="https://twitter.com/shaunmmaguire/status/1736082530573422762" target="_blank" rel="noopener">tweeted</a> recently.</p>
<p>The responses to his tweet are split between the two factions that have appeared within venture in recent years: those who support diversity, equity and inclusion (DEI) efforts, and those who do not. Wealthy power players like <a href="https://www.bloomberg.com/news/articles/2023-04-28/peter-thiel-tells-black-tie-nyc-audience-that-diversity-is-a-distraction" target="_blank" rel="noopener">Peter Thiel</a> and Elon Musk have been very outspoken against the premise of DEI, with <a href="https://twitter.com/DominicMadori/status/1706364942843064812" target="_blank" rel="noopener">their thoughts</a> shared and spread widely throughout the ecosystem.</p>
<p>“DEI must DIE. The point was to end discrimination, not replace it with different discrimination,” Musk recently tweeted before <a href="https://twitter.com/elonmusk/status/1735821713688940843?s=46" target="_blank" rel="noopener">responding to himself saying</a>, “‘Diversity, Equity and Inclusion’ are propaganda words for racism, sexism and other -isms. This is just as morally wrong as any other racism and sexism. Changing the target class doesn’t make it right!”</p>
<p>DEI is a framework to help create more conscious workplace initiatives to help marginalized communities. These initiatives include ensuring a firm or company attracts a diverse pool of talent, hires and promotes people without bias, and fosters positive working environments so all individuals can thrive. DEI received a lot of support after the murder of George Floyd back in 2020, but support has waned these past few years.</p>
<p>It is supposed to be an overarching effort aimed at helping all disenfranchised groups, but when it is targeted, it is usually for racial reasons. Since affirmative action in education was overturned this year, founders and investors knew that the industry would find an excuse to go back to how things were, would find an excuse to stall or dismiss the little progress made these past two years. In a sense, they were right, and the decreased DEI support in business and tech has created <a href="https://www.reuters.com/business/some-companies-alter-diversity-policies-after-conservatives-lawsuit-threat-2023-12-18/" target="_blank" rel="noopener">ripple effects</a>.</p>
<p>Sequoia and Maguire did not respond to requests for comment by the time of publication.</p>
<p>Veni Kunche, the founder of Diversify Tech, said back in 2020, she saw a spike in the number of people wanting to work with her company, which helps connect companies to diverse talent pipelines. But come 2022, she saw a complete reversal. “I was honestly confused, as I hadn’t changed anything in how I ran my business,” she said. “Then, I slowly started noticing some patterns.”</p>			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The right to use adblockers (302 pts)]]></title>
            <link>https://fsfe.org/news/2023/news-20231220-01.sl.html</link>
            <guid>38726389</guid>
            <pubDate>Thu, 21 Dec 2023 20:26:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://fsfe.org/news/2023/news-20231220-01.sl.html">https://fsfe.org/news/2023/news-20231220-01.sl.html</a>, See on <a href="https://news.ycombinator.com/item?id=38726389">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">


<p id="category"><a href="https://fsfe.org/news/news.sl.html">News</a></p>

<p><span>on: </span><time>2023-12-20</time>
</p>

<p>Companies increasingly aim to control how users interact with their 
content online, threatening user freedom. As more companies crack down 
on browser extensions and other third-party software used by internet 
users to customise their experiences, two recent German court cases on 
adblockers could strengthen the legal case for user control over 
technology.</p>

<figure>
  <img src="https://pics.fsfe.org/uploads/medium/c2/a1/d5fc8d5a7998f9146d7be156e0f2.png" alt="An illustration about privacy showing eyes behind some bars">
  <figcaption>
    CC-BY-NC-SA by <a href="http://rahak.net/work.html">Rahak</a>
  </figcaption>
</figure>

	
<p>Advertisements are a part of our lives, including our digital ones. 
They are in the websites we browse, the search results we receive, and 
the online news we read. Tired of receiving so many ads, some users try 
to avoid them by installing an adblocker. But is this a legal practice? 
Is using adblockers an act of restricting market autonomy, or do they 
help achieve user freedom?</p>

<p>Imagine a scenario where website owners hold copyright over their 
websites, including whatever ads they place, and could effectively sue 
for copyright infringement if users were to remove or suppress ads when 
visiting these websites. This hypothetical situation would enable any 
website copyright holder to use the legal system to stop any ordinary 
user on the internet who tries to bypass these ads. This would 
lead to an internet where unsolicited information 
and advertisements are imposed on users. Fortunately, recent court 
decisions have at least prevented this hypothetical from becoming a 
reality in Germany.</p> 

<h2 id="id-is-it-legal-to-use-adblockers-the-lawsuit-in-question">Is it legal to use adblockers? The lawsuit in question</h2>

<p>Using an adblocker is the main way in which many internet users 
bypass ads and pop-ups when accessing websites. Adblockers usually come 
in the form of browser extensions and plugins that filter out unwanted 
ads for an ad-free internet browsing experience.</p> 

<p>As the use of these adblockers increases, some companies have begun 
considering whether it is legal for  users to be able to block their 
ads. This was the case in Germany when Axel Springer SE (Axel 
Springer), one of Germany’s largest publishing companies, engaged in 
lawsuits against Eyeo GmbH (Eyeo), the creator of <a href="https://adblockplus.org/en/about#whymoney">Adblock Plus</a> (a 
Free 
Software adblocking tool licensed under the GPLv3). These lawsuits have 
resulted in a legal battle for user freedom and an open internet.</p>

<p>In the case of Adblock Plus, ads are blocked according to filter rules 
maintained in a so-called “black list”, which users use as a default 
setting. The extension offers ad providers the possibility of having 
their ads excluded from this black list (and included in a “white 
list”) by complying with <a href="https://acceptableads.com/standard/">“acceptable advertising 
standards”,</a> disclosing 
their annual turnover, and paying a sum to Eyeo. Users will only see 
ads that have been included in the white list, but they also have the 
option of blocking ads from both white and black lists altogether.</p>

<div>
<p>Axel Springer filed several suits in Germany against Eyeo on the grounds 
that the Adblock Plus extension interfered with their business, 
alleging that by blocking its advertisements, Eyeo had engaged in 
anti-competitive measures. According to Axel Springer, Eyeo’s business 
model constituted:</p>
<ol>
<li>Targeted obstruction and aggressive business practice; and </li>
<li>A violation of freedom of the press.</li>
</ol>
</div>

<h3 id="id-the-right-not-to-be-advertised-to">The right not to be advertised to</h3> 
<p>After ruling that the option to use adblockers is a decision that internet users should be able to make, 
the courts in Germany ruled that user rights not only include the 
freedom to express an opinion and to receive information, but also the 
rights to refrain from expressing an opinion and to refuse to receive 
imposed information. In doing so, the rulings considered a user’s 
interest in being spared from obtrusive advertising.</p>

<p>Accordingly, internet users are simply exercising their right to not 
have certain forms of advertising displayed when visiting internet 
websites when they choose to make use of an adblocker. Adblock Plus’s 
business model, according to the courts, was therefore a marketable 
service offer which was not primarily aimed at impairing the 
competitive development of Axel Springer. In the opinion of the courts, 
Adblock Plus also does not directly interfere with the business, as 
users retain autonomy to do as they wish with the settings of the 
add-on after installation. Users can block or wish to see only the ads 
in the whitelist. Adblock Plus is therefore merely a product whose use 
is decided solely by the internet user.</p>

<h3 id="id-the-html-argument-does-the-use-of-adblockers-constitute-a-modification-of-a-computer-program">The HTML argument: does the use of adblockers constitute a modification of a computer program?</h3>

<p>Axel Springer also submitted an argument to the German courts that their
websites would be protected under German copyright law as a copyrighted 
computer program, and that their HTML code would similarly be covered 
under this ambit because of the control components it included. Because 
of how Adblock Plus interacts with its website, Axel Springer therefore 
claimed that copies and adaptations of the code in its website were 
violations of copyright made without permission.</p>

<p>In both the initial court ruling and the decision on the subsequent appeal in favour 
of Eyeo, the court disagreed with Axel Springer and held that the use 
of Adblock Plus solely affects the program flow through external 
commands, without altering the program’s essence or generating a 
changed version. Thus, the use of the extension results in a mere 
browser configuration carried out by users according to their 
preferences.</p>

<p>The courts noted that internet users do not require permission from 
website owners when they want to make the website look better for 
themselves. Modern websites are made up of many separate parts that can 
be technically distinguished from each other, including text, images, and 
videos, as well as software that is embedded in the HTML page. For the 
courts, it wasn’t enough that these software components were used in 
the website’s HTML page to mean that the website itself was a 
protectable computer program. We can therefore infer that adblockers 
do not infringe upon a program’s protections.</p>

<h2 id="id-downsides-of-the-case">Downsides of the case</h2> 
<p>Nevertheless, some aspects in the judgments are still not ideal in 
promoting the average user’s rights. While user freedom  means that 
users are able to use the tools that they wish to when browsing the 
World Wide Web, the court nevertheless preserved Axel 
Springer’s right to exclude users with an activated adblocker from 
accessing its content. This can be understood as an approval on the use 
of adblock detection tools by companies like Axel Springer.</p> 

<p>Unfortunately, the court also mentioned that Axel Springer can convert 
its content into a paid access model, justifying this measure as an 
element inherent for competition. We fear that this tacit approval can 
result in paywalls and adblock detection tools becoming the basic 
standard on the internet.</p> 

<p>More importantly, tools to detect the use of adblockers go against <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/PDF/?uri=CELEX:32002L0058">Art. 
5(3) of the ePrivacy directive</a>, which mandates that websites must seek 
consent before accessing or storing information about a user’s device. 
The EU commission has confirmed that, Art. 5(3) of the ePrivacy directive 
<a href="https://forum.adblockplus.org/viewtopic.php?t=45001">is not 
just limited to cookies but ‘all types of information’ stored or 
accessed</a> in the user’s terminal device. This applies to the storage by 
websites of scripts in users’ terminal equipment to detect if users 
have installed or are using adblockers.</p> 

<h2 id="id-a-win-for-user-freedom">A win for user freedom?</h2> 

<p>With many service providers and websites on the internet following the 
trend of restricting users with adblockers from accessing their services, these court 
decisions in Germany help build precedents that uphold and recognize 
principles of user freedom.</p> 

<p>Indeed, these decisions support the principles of a <a href="https://fsfe.org/activities/ngi/ngi.sl.html">Next Generation 
Internet</a>, including ensuring that internet users can make individual 
choices and exercise their freedom of expression, in ways in which they 
can freely develop and use new extensions and browser features to 
enhance their online experience and user control.</p>  

<p>Despite the steps forward for user control found in these judgments, 
they do not go as far as we would hope to secure user freedom when 
using the internet, and are still subject to appeals and therefore may 
not be final. We will keep an eye on the legal proceedings in this case 
and keep you updated when new developments occur. In the meantime, the 
court cases can be read on the <a href="https://juris.bundesgerichtshof.de/cgi-bin/rechtsprechung/document.py?Gericht=bgh&amp;Art=en&amp;nr=8849">Bundesgerichtshof</a> 
and <a href="https://www.landesrecht-hamburg.de/bsha/document/JURE220021753">Landesgerichts</a> 
websites. If you are aware of any similar cases or other developments to 
support user freedom in any other member states in the EU, then please 
do share and reach out to us!</p>


<p id="discussion-link"><a href="https://community.fsfe.org/t/1114">Discuss this </a></p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Hyperloop One to shut down (180 pts)]]></title>
            <link>https://www.bloomberg.com/news/articles/2023-12-21/hyperloop-one-to-shut-down-after-raising-millions-to-reinvent-transit</link>
            <guid>38725442</guid>
            <pubDate>Thu, 21 Dec 2023 19:24:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bloomberg.com/news/articles/2023-12-21/hyperloop-one-to-shut-down-after-raising-millions-to-reinvent-transit">https://www.bloomberg.com/news/articles/2023-12-21/hyperloop-one-to-shut-down-after-raising-millions-to-reinvent-transit</a>, See on <a href="https://news.ycombinator.com/item?id=38725442">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
    <section>
        <h3>Why did this happen?</h3>
        <p>Please make sure your browser supports JavaScript and cookies and that you are not
            blocking them from loading.
            For more information you can review our <a href="https://www.bloomberg.com/notices/tos">Terms of
                Service</a> and <a href="https://www.bloomberg.com/notices/tos">Cookie Policy</a>.</p>
    </section>
    <section>
        <h3>Need Help?</h3>
        <p>For inquiries related to this message please <a href="https://www.bloomberg.com/feedback">contact
            our support team</a> and provide the reference ID below.</p>
        <p>Block reference ID:</p>
    </section>
</section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Find out who owns a nursing home with our Nursing Home Inspect tool (281 pts)]]></title>
            <link>https://www.propublica.org/article/find-nursing-home-ownership-information</link>
            <guid>38725264</guid>
            <pubDate>Thu, 21 Dec 2023 19:13:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.propublica.org/article/find-nursing-home-ownership-information">https://www.propublica.org/article/find-nursing-home-ownership-information</a>, See on <a href="https://news.ycombinator.com/item?id=38725264">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="main">

        <article>

        
            <!-- Class assignment -->


    
                                        



<div data-pp-location="article opener">

                    <p><span>
            <a href="https://www.propublica.org/topics/health-care">Health Care</a>
        </span></p>

    <h2>        It can be hard to determine who is ultimately responsible for the quality of care in a nursing home. ProPublica’s Nursing Home Inspect tool now has detailed information on who owns a facility and who is responsible for running it.
    </h2>

    </div>
                    
            

    
    <div data-pp-location="article body">

        
                    <div data-pp-location="top-note">
                

                                                
            <p>ProPublica is a nonprofit newsroom that investigates abuses of power. Sign up to receive <a href="https://www.propublica.org/newsletters/the-big-story?source=www.propublica.org&amp;placement=top-note&amp;region=national">our biggest stories</a> as soon as they’re published.</p>

                

            </div><!-- end .article-body__top-notes -->
        
        




                    
<p data-pp-blocktype="copy" data-pp-id="1.0">The quality of care that residents receive in a nursing home can be profoundly affected by who owns it, <a href="https://pubmed.ncbi.nlm.nih.gov/19654184/">studies have shown</a>. It’s not always clear who should be held accountable, though: Many nursing homes are owned by companies that are owned by other companies, obscuring who has the ultimate decision-making power. As <a href="https://www.cms.gov/newsroom/press-releases/biden-harris-administration-continues-unprecedented-efforts-increase-transparency-nursing-home-0">more nursing homes are sold</a>, information about an incoming owner’s performance in other homes becomes more relevant, as it may provide insight into how their latest acquisitions will fare.</p>
        
    
                        


   
            
            
            
            

   
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="3.0">To help navigate the confusing world of nursing home ownership, ProPublica’s Nursing Home Inspect now publishes detailed ownership information for facilities and an upgraded search to help you sift through the information.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="5.0">The data comes from the Centers for Medicare &amp; Medicaid Services, which publishes “affiliated entities” for nursing homes — lists of people or companies that have an ownership stake in or operational control over multiple nursing homes. CMS’ goal is to provide a better understanding of an owner or operator’s performance across all the nursing homes they are associated with. Some entities are affiliated with only a handful of homes, while others, like <a href="https://projects.propublica.org/nursing-homes/affiliate/a-237">Genesis HealthCare</a> or <a href="https://projects.propublica.org/nursing-homes/affiliate/a-507">The Ensign Group</a>, are affiliated with hundreds of homes across multiple states. Because CMS does not provide this data in a way that’s easy for most people to use, we’ve added it to our Nursing Home Inspect tool.</p>
        
    
                    

<figure data-pp-id="6" data-pp-blocktype="image">

    


                    
    


    <img alt="" width="2348" height="958" loading="lazy" js-autosizes="" src="https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.35.02-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=326&amp;q=80&amp;w=800&amp;s=41a357b699585450f3edd93313829961" srcset="https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.35.02-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=163&amp;q=80&amp;w=400&amp;s=1925426fba6cc70a75bea3697e2337a0 400w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.35.02-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=326&amp;q=80&amp;w=800&amp;s=41a357b699585450f3edd93313829961 800w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.35.02-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=490&amp;q=80&amp;w=1200&amp;s=d9c51445e367c1bf3a796acc3a02d212 1200w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.35.02-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=530&amp;q=80&amp;w=1300&amp;s=0de40a26492df58471f8af0116459062 1300w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.35.02-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=592&amp;q=80&amp;w=1450&amp;s=0b67e38095ea50c2c2c32c41898a8f8f 1450w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.35.02-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=653&amp;q=80&amp;w=1600&amp;s=8c233d50ffe240836b5ffb4508653e01 1600w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.35.02-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=816&amp;q=80&amp;w=2000&amp;s=761a2d65f14be1dce96900205a71b76a 2000w">

            
    
<figcaption>
    
    
    
    </figcaption>

</figure>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="7.0">Our new affiliated entity pages allow users to easily explore data on each company or person who is responsible for nursing homes, listing all homes associated with that entity and showing recent serious deficiencies —&nbsp; failure to meet care requirements —&nbsp;found at those homes. You can even view a list of <a href="https://projects.propublica.org/nursing-homes/affiliate">all affiliated entities nationwide</a>.</p>
        
    
                        
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="9.0">We also added detailed ownership information to individual nursing home pages, allowing users to see who has an ownership stake in the home, as well as who has managerial control over the facility and how long they have held that position.</p>
        
    
                    

<figure data-pp-id="10" data-pp-blocktype="image">

    


                    
    


    <img alt="" width="2362" height="1216" loading="lazy" js-autosizes="" src="https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.33.11-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=412&amp;q=80&amp;w=800&amp;s=b266cdebcc002f22f6b8f4275b73cec4" srcset="https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.33.11-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=206&amp;q=80&amp;w=400&amp;s=5ccf00b00f81495db3730826d401c413 400w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.33.11-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=412&amp;q=80&amp;w=800&amp;s=b266cdebcc002f22f6b8f4275b73cec4 800w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.33.11-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=618&amp;q=80&amp;w=1200&amp;s=2eb1e4bc7450e7adc0634f0ab842fafb 1200w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.33.11-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=669&amp;q=80&amp;w=1300&amp;s=dbc73bce5e40aed088c64feb44e82d80 1300w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.33.11-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=746&amp;q=80&amp;w=1450&amp;s=efb2c33aeea20ff798f3c1ed6a508dd8 1450w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.33.11-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=824&amp;q=80&amp;w=1600&amp;s=61e2f39ddbdd5f31863de8ab6ce65de2 1600w, https://img.assets-d.propublica.org/v5/images/Screenshot-2023-12-15-at-1.33.11-PM.png?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1030&amp;q=80&amp;w=2000&amp;s=5bd85b13563add56e7e8e6584343e8aa 2000w">

            
    
<figcaption>
    
    
    
    </figcaption>

</figure>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="11.0">To go along with these additions, we’ve also expanded the database’s <a href="https://projects.propublica.org/nursing-homes/findings/advanced_search">advanced search</a> capabilities so journalists and others can quickly identify affiliated entities that have a history of serious deficiencies or other problems. For instance, users can search for all <a href="https://projects.propublica.org/nursing-homes/findings/search?search=&amp;states=%5B%5D&amp;affiliate=%5B%22311%22%5D&amp;start=&amp;end=&amp;def_type=%5B%5D&amp;ss=%5B%22K%22%2C%22J%22%2C%22L%22%5D&amp;def_cat=%5B%5D&amp;def_tag=%5B%5D&amp;toggle=text">serious deficiencies associated with Life Care Centers of America</a>.</p>
        
    
                                  
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="13.0">Separately, users can also now filter searches by F-tags, which are a system for specifying the types of compliance issues that may be found during a CMS inspection. These tags allow users to narrow their search beyond broad categories such as “infection control deficiencies” to more targeted queries such as deficiencies associated with reporting COVID-19 data to residents and families or ensuring staff are vaccinated against COVID-19.</p>
        
    
                    
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="15.0">ProPublica plans to continue enhancing Nursing Home Inspect with new data and features in the coming months. If you write a story using this new information, come across bugs or issues, or have ideas for improvements, <a href="https://www.propublica.org/cdn-cgi/l/email-protection#334146475b1d47525f515c477343415c4346515f5a50521d5c4154">please let us know</a>!</p>
        
    
        
    </div>

    

    </article>
    
    <!-- end .post-article -->

    
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Apple wants AI to run directly on its hardware instead of in the cloud (222 pts)]]></title>
            <link>https://arstechnica.com/apple/2023/12/apple-wants-ai-to-run-directly-on-its-hardware-instead-of-in-the-cloud/</link>
            <guid>38725167</guid>
            <pubDate>Thu, 21 Dec 2023 19:06:38 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arstechnica.com/apple/2023/12/apple-wants-ai-to-run-directly-on-its-hardware-instead-of-in-the-cloud/">https://arstechnica.com/apple/2023/12/apple-wants-ai-to-run-directly-on-its-hardware-instead-of-in-the-cloud/</a>, See on <a href="https://news.ycombinator.com/item?id=38725167">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <h4>
      Making Siri smarter    —
</h4>
            
            <h2 itemprop="description">iPhone maker wants to catch up to its rivals when it comes to AI.</h2>
                    </div><div itemprop="articleBody">
                                    
<figure>
  <img src="https://cdn.arstechnica.net/wp-content/uploads/2023/09/Screenshot-2023-09-12-at-1.59.20-PM-800x452.jpeg" alt="The iPhone 15 Pro.">
      <figcaption><div><p><a href="https://cdn.arstechnica.net/wp-content/uploads/2023/09/Screenshot-2023-09-12-at-1.59.20-PM.jpeg" data-height="989" data-width="1750">Enlarge</a> <span>/</span> The iPhone 15 Pro.</p></div><p>Apple</p></figcaption>  </figure>

  




<!-- cache hit 285:single/related:6d7adff0a254eb3dda78051e51858356 --><!-- empty -->
<p>Apple’s latest research about running large language models on smartphones offers the clearest signal yet that the iPhone maker plans to catch up with its Silicon Valley rivals in generative artificial intelligence.</p>
<p>The paper, entitled “<a href="https://arxiv.org/pdf/2312.11514.pdf">LLM in a Flash</a>,” offers a “solution to a current computational bottleneck,” its researchers write.</p>
<p>Its approach “paves the way for effective inference of LLMs on devices with limited memory,” they said. Inference refers to how large language models, the large data repositories that power apps like ChatGPT, respond to users’ queries. Chatbots and LLMs normally run in vast data centers with much greater computing power than an iPhone.</p>
<p>The paper was published on December 12 but caught wider attention after Hugging Face, a popular site for AI researchers to showcase their work, <a href="https://huggingface.co/papers/2312.11514">highlighted it</a> late on Wednesday. It is the second Apple paper on generative AI this month and follows earlier moves to enable image-generating models such as Stable Diffusion to run on its custom chips.</p>
<p>Device manufacturers and chipmakers are hoping that new AI features will help revive the smartphone market, which has had its worst year in a decade, with shipments falling an estimated 5 percent, according to Counterpoint Research.</p>
<p>Despite launching one of the first virtual assistants, Siri, back in 2011, Apple has been largely left out of the wave of excitement about generative AI that has swept through Silicon Valley in the year since OpenAI launched its breakthrough chatbot ChatGPT. Apple has been viewed by many in the AI community as lagging behind its Big Tech rivals, despite hiring Google’s top AI executive, John Giannandrea, in 2018.</p>
<p>While Microsoft and Google have largely focused on delivering chatbots and other generative AI services over the Internet from their vast cloud computing platforms, Apple’s research suggests that it will instead focus on AI that can run directly on an iPhone.</p>
<p>Apple’s rivals, such as Samsung, are gearing up to launch a new kind of “AI smartphone” next year. Counterpoint estimated more than 100 million AI-focused smartphones would be shipped in 2024, with 40 percent of new devices offering such capabilities by 2027.</p>                                            
                                                        
<p>The head of the world’s largest mobile chipmaker, Qualcomm chief executive Cristiano Amon, forecast that bringing AI to smartphones would create a whole new experience for consumers and reverse declining mobile sales.</p>
<p>“You’re going to see devices launch in early 2024 with a number of generative AI use cases,” he told the Financial Times in a recent interview. “As those things get scaled up, they start to make a meaningful change in the user experience and enable new innovation which has the potential to create a new upgrade cycle in smartphones.”</p>
<p>More sophisticated virtual assistants will be able to anticipate users’ actions such as texting or scheduling a meeting, he said, while devices will also be capable of new kinds of photo editing techniques.</p>
<p>Google this month unveiled a version of its new Gemini LLM that will run “natively” on its Pixel smartphones.</p>
<p>Running the kind of large AI model that powers ChatGPT or Google’s Bard on a personal device brings formidable technical challenges, because smartphones lack the huge computing resources and energy available in a data center. Solving this problem could mean that AI assistants respond more quickly than they do from the cloud and even work offline.</p>
<p>Ensuring that queries are answered on an individual’s own device without sending data to the cloud is also likely to bring privacy benefits, a key differentiator for Apple in recent years.</p>
<p>“Our experiment is designed to optimize inference efficiency on personal devices,” its researchers said. Apple tested its approach on models including Falcon 7B, a smaller version of an open source LLM originally developed by the Technology Innovation Institute in Abu Dhabi.</p>
<p>Optimizing LLMs to run on battery-powered devices has been a growing focus for AI researchers. Academic papers are not a direct indicator of how Apple intends to add new features to its products, but they offer a rare glimpse into its secretive research labs and the company’s latest technical breakthroughs.</p>
<p>“Our work not only provides a solution to a current computational bottleneck but also sets a precedent for future research,” wrote Apple’s researchers in the conclusion to their paper. “We believe as LLMs continue to grow in size and complexity, approaches like this work will be essential for harnessing their full potential in a wide range of devices and applications.”</p>
<p>Apple did not immediately respond to a request for comment.</p>

                                                </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Tell HN: I salute everyone on call/working support through the holidays (827 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=38725015</link>
            <guid>38725015</guid>
            <pubDate>Thu, 21 Dec 2023 18:54:47 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=38725015">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><td><table>
        <tbody><tr id="38725015">
      <td><span></span></td>      <td><center><a id="up_38725015" href="https://news.ycombinator.com/vote?id=38725015&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center></td><td><span><a href="https://news.ycombinator.com/item?id=38725015">Tell HN: I salute everyone on call/working support through the holidays</a></span></td></tr><tr><td colspan="2"></td><td><span>
          <span id="score_38725015">178 points</span> by <a href="https://news.ycombinator.com/user?id=waynesoftware">waynesoftware</a> <span title="2023-12-21T18:54:47"><a href="https://news.ycombinator.com/item?id=38725015">2 hours ago</a></span> <span id="unv_38725015"></span> | <a href="https://news.ycombinator.com/hide?id=38725015&amp;goto=item%3Fid%3D38725015">hide</a> | <a href="https://hn.algolia.com/?query=Tell%20HN%3A%20I%20salute%20everyone%20on%20call%2Fworking%20support%20through%20the%20holidays&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0">past</a> | <a href="https://news.ycombinator.com/fave?id=38725015&amp;auth=172296fc809de9d06437407a6c8d09e5a09cab8b">favorite</a> | <a href="https://news.ycombinator.com/item?id=38725015">28&nbsp;comments</a>        </span>
              </td></tr>
    <tr></tr><tr><td colspan="2"></td><td><p>Thank you for keeping systems available and safe. I've been there many times in the past, including having to fly at the last minute to a non-internet-connected data center in NJ to babysit an emergency production bug fix that took the entire holiday to create, install, verify, and monitor.</p></td></tr>        <tr></tr><tr><td colspan="2"></td><td><form action="comment" method="post"></form></td></tr>  </tbody></table><table>
            <tbody><tr id="38726716"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726716" href="https://news.ycombinator.com/vote?id=38726716&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><p><span>Always be kind, and say it’s your fault.<p>If you don’t do it for the sake of the person you are asking for help, do it because it works better. That’s the most practical advice [0] ever given by Hans Rosling [1], the Fact master himself:</p><p>&gt; In fact, I have the secret to how to get the best help immediately from any customer service, like the phone company or the bank or anything. I have the best line, it always works. You want to know what it is? When I call, I say, “Hello. I am Hans Rosling and I have made a mistake.” People immediately want to help you when you put it this way. You get much more when you don’t offend people.</p><p>[0]: Unless you are in charge of a developing country’s budget and have to decide between education and healthcare.</p><p>[1]: <a href="https://blog.ted.com/qa_with_hans_ro_1/" rel="nofollow noreferrer">https://blog.ted.com/qa_with_hans_ro_1/</a>
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="38726125"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726125" href="https://news.ycombinator.com/vote?id=38726125&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><p><span>Yeah, we discourage production changes starting first or second december week, and start freezing changes third december week until it's frozen solid fourth december week until second week of january.<p>December tends to be hell for our customers, so stability should be a priority there.</p><p>And honestly, no one wants to work on holidays. So lets just wrap everything starting in december, maybe use the third week for some unnoticed issues and then just lay down the tools. Use that time for documentation, or shorter days, quite frankly.</p><p>That way we minimize the on-call situations occuring. Let's hope it goes well for the engineer this year as well. We have a streak to keep.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="38726614"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_38726614" href="https://news.ycombinator.com/vote?id=38726614&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><p><span>I think that’s a great policy as it’s clearly intended to help people when they need it, and get people to unplug when it’s valued by their loved ones.<p>_However_ (that part is probably best bookmarked until Jan 2nd), it also betrays that your system is brittle and can be broken by a bad commit. Don’t do it because you want people to grind until Dec 24th at 6 pm. Do it because it’s great the rest of the year, too. I’d recommend you look into (or ask me about) feature flags, alerting, and automated roll-backs.</p><p>The short version is: there’s a meta-system on top of your release process that can tell (if you are using roll-back not features flags):
- commits until xyzsdf are fine;
- roll-outs starting from commit abcdef have a 2% error rate, 80% on Android;
- revert to xyzsdf, send a message (low-priority, email) to the DevOps on call and the author of abcdef that it happened;
- for all commits after abcdef: if there no conflicts with xyzsdf, re-try to roll them out;
- if there is a conflict because they were on top or abcdef, send a message (low-priority email) to the authors that there is a conflict.</p><p>There are more sophisticated versions that can do things like, if you use feature flags, flagging Android users to use the previous version. Another way to do this is to scale who has access to abcdef gradually: say 1% every hour, and revert if you detect issues.</p><p>All those seem daunting to teams that haven’t worked like this before, but it my experience, they love it very fast.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="38726429"><td></td></tr>
                  <tr id="38726821"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726821" href="https://news.ycombinator.com/vote?id=38726821&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><p><span>I'm not sure if there is something in the water this year, but this week, Dec 18th to Dec 21st (only a partial week), has been our busiest week all time already.<p>Sweating over here trying to make it through the week and praying that it slows at least for the first half of next week.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="38725642"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38725642" href="https://news.ycombinator.com/vote?id=38725642&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>Yes, absolutely thanks to all who keep our world running when no one is looking. To keep the yule log on Youtube, to keep our christmas tree lights on, to keep a fresh glass of water from the tap, warm natural gas to keep the freezing cold outside etc. Thank you for keeping society ticking away :)</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="38726810"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_38726810" href="https://news.ycombinator.com/vote?id=38726810&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>Only 2 out of 4 of those keep the world running. 2 of them, if they were to go down for a holiday, would have a net effect of making the holiday more meaningful.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="38726422"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_38726422" href="https://news.ycombinator.com/vote?id=38726422&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>I’ll give a shout out too to everyone in the military monitoring warning systems and maintaining stance to protect us from being killed while we’re with our families.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="38726404"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_38726404" href="https://news.ycombinator.com/vote?id=38726404&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>Let's not confuse on-call firefighters or a water facility staff with the on-call admins that maintain money-making machines monetizing attention of billions. The latter is a net negative on society.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="38726426"><td></td></tr>
            <tr id="38726747"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_38726747" href="https://news.ycombinator.com/vote?id=38726747&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>Yeah, how dare Netflix provide entertainment on-demand and for cheaper than the other entertainment companies?</span></p></div></td></tr>
        </tbody></table></td></tr>
                        <tr id="38726736"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726736" href="https://news.ycombinator.com/vote?id=38726736&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><p><span>Meanwhile a huge number of us (non-religious? introverted kernel compiling cave dwellers?) treat this period no differently than any other week in the year. I'll be here keepin the servers runnin :horns:<p>It's actually my favorite time of the year. Everyone is gone, it is quiet, and I can get shit done.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="38726173"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726173" href="https://news.ycombinator.com/vote?id=38726173&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>Just barely started my current job too recently to be in the on-call rotation yet. Lucked out! Props to those keeping the wheels turning.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="38726439"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726439" href="https://news.ycombinator.com/vote?id=38726439&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><p><span>Agreed, there are some gigs that just really require support to exist - I know this first-hand from working at a Zoo (very large exotic animal rescue basically). Animals do not take holidays. They need to eat and do animal things in spite of our costumes that day.<p>On the flip side, having worked Cinema on Christmas Day two years I think, there is no amount of Grace and Patience I can give that is enough to those earning their living. Still have a hat and polo. Why? I had to buy them!
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="38725731"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38725731" href="https://news.ycombinator.com/vote?id=38725731&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>In a similar vein, I'm grateful for the people who maintain the foundational pieces of our digital world that often go unnoticed like date &amp; time systems.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="38726026"><td></td></tr>
                <tr id="38726232"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_38726232" href="https://news.ycombinator.com/vote?id=38726232&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><p><span>Me too, but they pay a few bucks an hour to carry the phone so at least that adds up.<p>Ultimate trick is to have a diverse team. Someone that doesn’t care about Christmas but absolutely needs some random day off in March (cool with us!). Someone that celebrates new years some other time.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="38726445"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_38726445" href="https://news.ycombinator.com/vote?id=38726445&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>Speaking of diversity, if you don’t do Christmas dinner I strongly recommend ordering takeout from a Chinese place on the 25th! There’s lots of happy photos of Chinese chefs and Jewish customers doing a Christmas fist-bump.</span></p></div></td></tr>
        </tbody></table></td></tr>
                        <tr id="38726447"><td></td></tr>
            <tr id="38726214"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726214" href="https://news.ycombinator.com/vote?id=38726214&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>As if this week had attempted to take a measure of blood from my body, I'll be on-call next week. Looking forward to all things quiet on the HEP network front.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="38725842"><td></td></tr>
            <tr id="38726118"><td></td></tr>
            <tr id="38726059"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726059" href="https://news.ycombinator.com/vote?id=38726059&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>Two live video productions, including one on the evening of 31st. I managed to push back on last minute infra/workflow changes (:</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="38726131"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726131" href="https://news.ycombinator.com/vote?id=38726131&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>I announced a downtime for a smallish GPU Cluster starting from christmas eve just a few hours ago.  It is just the perfect time to schedule a day or two of downtime for a system like that.  And if IPMI doesn't fail me, I can get a lot of things done without leaving the comfort of my home.  I scheduled this without pressure from my boss.  It was a totally voluntary decision...  While being raised as a Christian, this time of the year is for me more about solstice then about the Christian clelbration.  A time to enjoy the comfort of a heated home.  A time to celebrate that the days are going to be longer from now on again.  A time to reflect on the past year.  And all of this is easily done while having a few terminals open and waiting for remote stuff to complete...</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="38725710"><td></td></tr>
            <tr id="38726109"><td></td></tr>
            <tr id="38726795"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_38726795" href="https://news.ycombinator.com/vote?id=38726795&amp;how=up&amp;goto=item%3Fid%3D38725015"></a></center>    </td><td><br><div>
                  <p><span>FYI Israelis are not on holiday - our holidays are on whole different dates. Hire Israelis and experience no down time while working with Silicon Valley level talent</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="38726827"><td></td></tr>
                  </tbody></table>
  </td></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Wasmer JavaScript SDK (157 pts)]]></title>
            <link>https://wasmer.io/posts/introducing-the-wasmer-js-sdk</link>
            <guid>38724729</guid>
            <pubDate>Thu, 21 Dec 2023 18:38:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://wasmer.io/posts/introducing-the-wasmer-js-sdk">https://wasmer.io/posts/introducing-the-wasmer-js-sdk</a>, See on <a href="https://news.ycombinator.com/item?id=38724729">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Dive into a world where running any WASI and WASIX package in your browser is a breeze. Whether it's Python, Bash, FFmpeg, or <a href="https://docs.wasmer.io/registry/get-started">any package published</a> in the registry, Wasmer Javascript SDK makes it all seamlessly possible.</p>
<p>We think this is incredibly exciting, because the <code>@wasmer/sdk</code> allows running any UNIX programs using <strong>threads</strong>, <strong>signals</strong>, <strong>subprocesses</strong> and other features in the browser (via <a href="https://wasix.org/">WASIX</a>).</p>
<p>With the new SDK, you just need to point to the desired Wasmer package and the SDK will download all the files (.wasm and the filesystem required) for you.</p>
<p>Let's see some cool examples running the Wasmer JS SDK, shall we?</p>
<ul>
<li>FFMpeg</li>
<li>CPython (with threads and signals!)</li>
<li>Bash (<a href="https://wasmer.sh/">wasmer.sh</a> demo!)</li>
</ul>
<p><em>Note: <code>@wasmer/sdk</code> supersedes the <code>@wasmer/wasi</code> package</em></p>
<blockquote>
<p>Any WASIX package published to Wasmer will be instantly usable with the Wasmer Javascript SDK: in this article we will showcase how to use FFMpeg and Python, but you can use your <a href="https://docs.wasmer.io/registry/get-started">own package</a> just as easily.</p>
</blockquote>
<h2>A love story: FFMpeg</h2>
<p>FFMpeg is one of the most useful and popular packages in the world. It’s used by Youtube, Facebook, Netflix and many other industry leaders. It allows them to transform and edit videos very easily.</p>
<p>FFMpeg has been ported a few times to Javascript already, thanks to Emscripten and WebAssembly. However, these ports required a lot of manual changes from the maintainers to plug in all the features and make the package easily usable for developers.</p>
<p>Thanks to the new Wasmer JS SDK, the ffmpeg WASIX version published in Wasmer can now be easily in the browser.</p>
<p>Let's see an example where we retrieve a video (<a href="https://cdn.wasmer.io/media/wordpress.mp4"><code>wordpress.mp4</code></a>) and extract its audio:</p>
<pre tabindex="0"><code><span><span>import</span><span> { init, Wasmer } </span><span>from</span><span> </span><span>"@wasmer/sdk"</span><span>;</span></span>
<span></span>
<span><span>await</span><span> </span><span>init</span><span>();</span></span>
<span></span>
<span><span>let</span><span> ffmpeg </span><span>=</span><span> </span><span>await</span><span> Wasmer.</span><span>fromRegistry</span><span>(</span><span>"wasmer/ffmpeg"</span><span>);</span></span>
<span><span>let</span><span> resp </span><span>=</span><span> </span><span>await</span><span> </span><span>fetch</span><span>(</span><span>"https://cdn.wasmer.io/media/wordpress.mp4"</span><span>);</span></span>
<span><span>let</span><span> video </span><span>=</span><span> </span><span>await</span><span> resp.</span><span>arrayBuffer</span><span>();</span></span>
<span></span>
<span><span>// We take stdin ("-") as input and write the output to stdout ("-") as a</span></span>
<span><span>// WAV audio stream.</span></span>
<span><span>const</span><span> </span><span>instance</span><span> </span><span>=</span><span> </span><span>await</span><span> ffmpeg.entrypoint.</span><span>run</span><span>({</span></span>
<span><span>  args: [</span><span>"-i"</span><span>, </span><span>"-"</span><span>, </span><span>"-f"</span><span>, </span><span>"wav"</span><span>, </span><span>"-"</span><span>],</span></span>
<span><span>  stdin: </span><span>new</span><span> </span><span>Uint8Array</span><span>(video),</span></span>
<span><span>});</span></span>
<span></span>
<span><span>const</span><span> { </span><span>stdoutBytes</span><span> } </span><span>=</span><span> </span><span>await</span><span> instance.</span><span>wait</span><span>();</span></span>
<span><span>console.</span><span>log</span><span>(</span><span>`The audio stream: ${</span><span>output</span><span>.</span><span>stdoutBytes</span><span>}`</span><span>);</span></span></code></pre>
<p>Et voilá, you have the audio now created: <a href="https://cdn.wasmer.io/media/wordpress-ffmpeg-out.wav">wordpress-ffmpeg-out.wav</a></p>
<blockquote>
<p>You can get the audio  file by running ffmpeg locally with wasmer: <code>cat wordpress.mp4 | wasmer run wasmer/ffmpeg -- -i - -f wav - &gt; audio.wav</code></p>
</blockquote>
<h2>Running CPython in the browser</h2>
<p>There was another project that allowed using CPython in the browser: Pyodide. However, Pyodide is based on Emscripten and as such only runs on the browser, but not only that... Pyodide doesn't support threading.</p>
<p>Wasmer <a href="https://wasmer.io/python/python"><code>python</code> package</a> can run on both the browser and the server seamlessly, and requires no manual intervention to run in the browser (no extra packages needed other than the SDK!).</p>
<p>Here's how you can handle CPython with the Filesystem API of the Wasmer JS SDK:</p>
<pre tabindex="0"><code><span><span>import</span><span> { init, Directory, Wasmer } </span><span>from</span><span> </span><span>"@wasmer/sdk"</span><span>;</span></span>
<span><span> </span></span>
<span><span>// Initialize the Wasmer SDK</span></span>
<span><span>await</span><span> </span><span>init</span><span>();</span></span>
<span><span> </span></span>
<span><span>// Download the Python package</span></span>
<span><span>const</span><span> </span><span>python</span><span> </span><span>=</span><span> </span><span>await</span><span> Wasmer.</span><span>fromRegistry</span><span>(</span><span>"python/python"</span><span>);</span></span>
<span><span> </span></span>
<span><span>// The script to be executed</span></span>
<span><span>const</span><span> </span><span>script</span><span> </span><span>=</span><span> </span><span>`</span></span>
<span><span>import sys</span></span>
<span><span> </span></span>
<span><span>with open("/out/version.txt", "w") as f:</span></span>
<span><span>  f.write(sys.version)</span></span>
<span><span>`</span><span>;</span></span>
<span><span>// A shared directory where the output will be written</span></span>
<span><span>const</span><span> </span><span>out</span><span> </span><span>=</span><span> </span><span>new</span><span> </span><span>Directory</span><span>();</span></span>
<span><span> </span></span>
<span><span>// Running the Python script</span></span>
<span><span>const</span><span> </span><span>instance</span><span> </span><span>=</span><span> </span><span>await</span><span> python.entrypoint.</span><span>run</span><span>({</span></span>
<span><span>  args: [</span><span>"/src/main.py"</span><span>],</span></span>
<span><span>  mount: {</span></span>
<span><span>    </span><span>"/out"</span><span>: out,</span></span>
<span><span>    </span><span>"/src"</span><span>: {</span></span>
<span><span>      </span><span>"main.py"</span><span>: script,</span></span>
<span><span>    }</span></span>
<span><span>  },</span></span>
<span><span>});</span></span>
<span><span>const</span><span> </span><span>output</span><span> </span><span>=</span><span> </span><span>await</span><span> instance.</span><span>wait</span><span>();</span></span>
<span><span> </span></span>
<span><span>if</span><span> (</span><span>!</span><span>output.ok) {</span></span>
<span><span>  </span><span>throw</span><span> </span><span>new</span><span> </span><span>Error</span><span>(</span><span>`Python failed ${</span><span>output</span><span>.</span><span>code</span><span>}: ${</span><span>output</span><span>.</span><span>stderr</span><span>}`</span><span>);</span></span>
<span><span>}</span></span>
<span><span> </span></span>
<span><span>// Read the version string back</span></span>
<span><span>const</span><span> </span><span>pythonVersion</span><span> </span><span>=</span><span> </span><span>await</span><span> out.</span><span>readTextFile</span><span>(</span><span>"/version.txt"</span><span>);</span></span>
<span><span>console.</span><span>log</span><span>(pythonVersion) </span><span>// 3.11.6 (main, ...)</span></span></code></pre>
<blockquote>
<p>Check out the <a href="https://docs.wasmer.io/javascript-sdk/how-to/use-filesystem"><em>FileSystem guide</em></a> to learn more.</p>
</blockquote>

<p>As an example, our own <a href="https://wasmer.sh/">wasmer.sh</a> website has now an incredibly simple implementation that just fetches the bash package, and pipes it over <a href="https://xtermjs.org/">xterm.js</a> using the Wasmer Javascript SDK.</p>
<p><img src="https://wasmer.io/_next/image?url=https%3A%2F%2Fcdn.wasmer.io%2Fimages%2FScreenshot_2023-12-21_at_7.36.18PM.original.png&amp;w=1920&amp;q=75" alt="Wasmer.sh using new Wasmer JS SDK"></p>
<blockquote>
<p>Something that before required 1,000 lines of code in Rust + JS glue code manually written, now can be written in <a href="https://github.com/wasmerio/wasmer-js/blob/main/examples/wasmer.sh/index.ts">less than 50 lines of clear JavaScript code</a></p>
</blockquote>
<p>You can now have your own terminal emulator running in your website very easily using XTerm.js and the Wasmer JS SDK:</p>
<pre tabindex="0"><code><span><span>// This is a simplified version of:</span></span>
<span><span>// https://github.com/wasmerio/wasmer-js/blob/main/examples/wasmer.sh/index.ts</span></span>
<span><span>import</span><span> { Terminal } </span><span>from</span><span> </span><span>"xterm"</span><span>;</span></span>
<span></span>
<span><span>async</span><span> </span><span>function</span><span> </span><span>main</span><span>() {</span></span>
<span><span>  </span><span>const</span><span> { </span><span>Wasmer</span><span>, </span><span>init</span><span> } </span><span>=</span><span> </span><span>await</span><span> </span><span>import</span><span>(</span><span>"@wasmer/sdk"</span><span>);</span></span>
<span><span>  </span><span>await</span><span> </span><span>init</span><span>();</span></span>
<span></span>
<span><span>  </span><span>const</span><span> </span><span>term</span><span> </span><span>=</span><span> </span><span>new</span><span> </span><span>Terminal</span><span>();</span></span>
<span><span>  term.</span><span>open</span><span>(document.</span><span>getElementById</span><span>(</span><span>"terminal"</span><span>)</span><span>!</span><span>);</span></span>
<span></span>
<span><span>  </span><span>const</span><span> </span><span>pkg</span><span> </span><span>=</span><span> </span><span>await</span><span> Wasmer.</span><span>fromRegistry</span><span>(</span><span>"sharrattj/bash"</span><span>);</span></span>
<span><span>  </span><span>const</span><span> </span><span>instance</span><span> </span><span>=</span><span> </span><span>await</span><span> pkg.entrypoint</span><span>!</span><span>.</span><span>run</span><span>();</span></span>
<span><span>	</span></span>
<span><span>  </span><span>connectStreams</span><span>(instance, term);</span></span>
<span><span>}</span></span>
<span></span>
<span><span>function</span><span> </span><span>connectStreams</span><span>(</span><span>instance</span><span>, </span><span>term</span><span>) {</span></span>
<span><span>  </span><span>const</span><span> </span><span>stdin</span><span> </span><span>=</span><span> instance.stdin?.</span><span>getWriter</span><span>();</span></span>
<span><span>  </span><span>const</span><span> </span><span>encoder</span><span> </span><span>=</span><span> </span><span>new</span><span> </span><span>TextEncoder</span><span>();</span></span>
<span><span>  term.</span><span>onData</span><span>(</span><span>data</span><span> </span><span>=&gt;</span><span> stdin?.</span><span>write</span><span>(encoder.</span><span>encode</span><span>(data)));</span></span>
<span><span>  instance.stdout.</span><span>pipeTo</span><span>(</span><span>new</span><span> </span><span>WritableStream</span><span>({ </span><span>write</span><span>: </span><span>chunk</span><span> </span><span>=&gt;</span><span> term.</span><span>write</span><span>(chunk) }));</span></span>
<span><span>  instance.stderr.</span><span>pipeTo</span><span>(</span><span>new</span><span> </span><span>WritableStream</span><span>({ </span><span>write</span><span>: </span><span>chunk</span><span> </span><span>=&gt;</span><span> term.</span><span>write</span><span>(chunk) }));</span></span>
<span><span>}</span></span>
<span></span>
<span><span>main</span><span>();</span></span></code></pre>
<h2>Technical feat</h2>
<p>Making the Wasmer JS SDK to work was not an easy task.
We had to to achieve incredibly hard challenges, so you don't need to worry about solving them yourself:</p>
<ul>
<li>Using asyncify to be able to <code>fork</code> processes</li>
<li>Using a universal format to containerize the Wasm and filesystem together</li>
<li>A Filesystem abstraction to ease the container use</li>
</ul>
<p>Lets get into this a bit more!</p>
<h4>Supporting multithreading</h4>
<p>Javascript runs in a single thread. However, it is possible to use JS Workers to enable multithreading in the browser.
The Workers API differs from the typical threading API (that you would use in Python, Go or Rust), in the sense that there's no <code>join</code> (to wait for a thread to finish). The JS Worker communicates with the main process via a message channel/bus.</p>
<p>At the end, we were able to allow UNIX-like threading to run via JS Workers by reusing the shared memory from the main WebAssembly process and notifying the memory upon changes (using Wasm notify/wait syntax).</p>
<h4>Running <code>fork</code> in the browser</h4>
<p>Running <code>fork</code> in the browser is almost an impossible task, as it requires dumping the stack and being able to resume it from a different process.</p>
<p>We used <a href="https://kripken.github.io/blog/wasm/2019/07/16/asyncify.html"><code>asyncify</code></a> to freeze the program with the current stack, and then resume it later in a newly created Worker.</p>
<h4>An universal container format</h4>
<p>The Wasmer API now ships a special container format (that we will cover in future blogposts) that allows serving both the Wasm assets along with the filesystem ones. That way, you can download one package with all it's filesystem dependencies at once (such as Python!).</p>
<p>This container format is the format also used in both the native runtime and Wasmer Edge. More to come on this later!</p>
<h4>A Filesystem API</h4>
<p>We realized that using the Filesystem was critical to allow any developer achieving their needs.</p>
<p>Read more about the Wasmer JS SDK Filesystem API here: <a href="https://docs.wasmer.io/javascript-sdk/how-to/use-filesystem">https://docs.wasmer.io/javascript-sdk/how-to/use-filesystem</a></p>
<hr>
<h2>In summary</h2>
<p>We can’t wait to see how you use the Wasmer JS SDK to use all packages published in the Wasmer ecosystem.</p>
<p>We have many examples on how to use Wasmer-JS:</p>
<ul>
<li>Github Pages: <a href="https://github.com/wasmerio/wasmer-js/tree/main/examples/cdn-coi-serviceworker">cdn-coi-serviceworker</a></li>
<li>FFMpeg with React: <a href="https://github.com/wasmerio/wasmer-js/tree/main/examples/ffmpeg-react">ffmpeg-react</a></li>
<li>Markdown editor: <a href="https://github.com/wasmerio/wasmer-js/tree/main/examples/markdown-editor">markdown-editor</a></li>
<li>Wasmer.sh: <a href="https://github.com/wasmerio/wasmer-js/tree/main/examples/wasmer.sh">wasmer.sh</a></li>
<li>Any other? Open an issue or a PR in the Wasmer-JS repo!</li>
</ul>
<blockquote>
<p>Using Wasmer SDK in the browser requires you setting the Cross-origin isolation headers (<a href="https://web.dev/coop-coep/">COOP and COEP</a>) in the pages that use the SDK.
If you can’t do this (because you are publishing to Github Pages, for example) you can use <a href="https://docs.wasmer.io/javascript-sdk/how-to/coop-coep-headers"><code>coi-serviceworker</code></a> to automatically patch the headers client-side (<a href="https://github.com/wasmerio/wasmer-js/tree/main/examples/cdn-coi-serviceworker">see example</a>).</p>
<p>For more details, check out <a href="https://docs.wasmer.io/javascript-sdk/explainers/troubleshooting#sharedarraybuffer-and-cross-origin-isolation"><em>SharedArrayBuffer and Cross-Origin Isolation</em></a> in the JavaScript SDK docs.</p>
</blockquote>
<p>Bash, Python, FFMpeg, QuickJS, OpenSSL, and many more packages are waiting for you!</p>
<p>Get started with the Wasmer JS SDK docs : <a href="https://docs.wasmer.io/javascript-sdk">https://docs.wasmer.io/javascript-sdk</a></p>
<p>Let us know what you build next on <a href="https://discord.gg/rWkMNStrEW">Wasmer's discord</a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[ArXiv now offers papers in HTML format (987 pts)]]></title>
            <link>https://blog.arxiv.org/2023/12/21/accessibility-update-arxiv-now-offers-papers-in-html-format/</link>
            <guid>38724665</guid>
            <pubDate>Thu, 21 Dec 2023 18:34:53 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.arxiv.org/2023/12/21/accessibility-update-arxiv-now-offers-papers-in-html-format/">https://blog.arxiv.org/2023/12/21/accessibility-update-arxiv-now-offers-papers-in-html-format/</a>, See on <a href="https://news.ycombinator.com/item?id=38724665">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-1529">
	
	<div>
		
		<p>arXiv’s goal is equitable access to scientific research for all – and to achieve this, we have been working to make research papers more accessible for arXiv users with disabilities. We are happy to announce that as of Monday, December 18<sup>th</sup>, arXiv is now generating an HTML formatted version of all papers submitted in TeX/LaTeX (as long as papers were submitted on or after December 1<sup>st</sup>, 2023 and HTML conversion is successful – more on this below).</p>
<p>HTML is not replacing PDF but will be an additional format available for arXiv users. Submitters will be invited to preview the HTML version of their papers during submission time, the same way they have always done with PDF.</p>
<p>When accessing a paper’s abstract page, readers will see a link to view the HTML paper right under the PDF link:</p>
<p><img decoding="async" src="https://blog.arxiv.org/files/2023/12/Access-Paper-300x122.png" alt="" width="300" height="122" srcset="https://blog.arxiv.org/files/2023/12/Access-Paper-300x122.png 300w, https://blog.arxiv.org/files/2023/12/Access-Paper.png 404w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>The request to offer arXiv-hosted papers in HTML format comes directly from scientists with disabilities who face barriers to accessing the research they need. HTML formatted papers are more easily and accurately read by screen readers and other technologies, which can assist researchers with reading disabilities, including blindness, low vision, dyslexia, and more.</p>
<p>We know that the HTML conversion isn’t perfect yet – right now our HTML is in the “experimental” phase as we work to make conversion more accurate. Currently, not every paper will be able to be correctly converted into HTML. However, researchers with disabilities have told arXiv that HTML is needed *now* for accessibility, and so we wanted to offer that accessibility as quickly as possible, while we continue to work on improving conversions with the help of our community. arXiv will *not* prevent or hold submissions where the HTML conversion has failed, but we do hope that authors will carefully review the HTML version of their submission, as sometimes as sometimes small changes in the source TeX code can improve the HTML rendering.</p>
<p>Experimental HTML is a big step towards making science accessible to all. We want to thank everyone who collaborated on arXiv’s pilot <a href="https://info.arxiv.org/about/accessible_HTML.html">HTML Papers project</a> which includes <a href="https://www.latex-project.org/">The LaTeX Project</a>, and the <a href="https://math.nist.gov/~BMiller/LaTeXML/">LaTeXML</a> team from NIST. If you are familiar with <a href="https://info.arxiv.org/labs/showcase.html">ar5iv, an arXivLabs collaboration</a>, our HTML offering is essentially bringing this impactful project fully “in-house”. Our ultimate goal is to backfill arXiv’s entire corpus so that every paper will have an HTML version, but for now this feature is reserved for new papers.</p>
<p>And a big thank you to all the arXiv users who have taken the time to fill out bug reports for arXiv’s HTML Papers project – our team is currently reading and analyzing the bug reports and hope to make our first round of improvements in the new year.</p>

		
			</div><!-- .entry-content -->

	</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Google Makes over $92B per Year by Owning Android (118 pts)]]></title>
            <link>https://interestingcontent.substack.com/p/google-makes-over-92-billion-per</link>
            <guid>38724591</guid>
            <pubDate>Thu, 21 Dec 2023 18:31:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://interestingcontent.substack.com/p/google-makes-over-92-billion-per">https://interestingcontent.substack.com/p/google-makes-over-92-billion-per</a>, See on <a href="https://news.ycombinator.com/item?id=38724591">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p>With over 3 billion Android users worldwide, the little green robot powers more devices than any other mobile operating system.</p><p><span>But here’s something you may not know: </span><strong>Android isn’t free</strong><span>.</span></p><p>Sure, you can download and use Android without explicitly paying anything. But behind the scenes, Google employs all sorts of creative ways to profit from their open source operating system. After all, tech companies don’t provide products out of the goodness of their hearts.</p><p><em>So how does Google make money from Android? And how much money are we talking here? </em><span>Let’s break it down.</span></p><p>The first and most direct way Google profits from Android is by charging phone makers licensing fees to install Google’s apps. </p><p>Technically, Android the operating system is open source and free. But if device manufacturers like Samsung want access to popular Google apps like Gmail or Google Maps or YouTube, they need to pay up. </p><p><span> Without Google’s apps, an Android phone would be useless to most people. So phone makers don’t really have a choice but to license this bundle, which Google calls </span><strong>Google Mobile Services (GMS)</strong><span>.</span></p><p><span>According to court filings, Google charges phone makers between </span><strong>$2.50 to $40</strong><span> per device to license GMS, with the average being about </span><strong>$20 per phone</strong><span>. </span></p><p>With over a billion Android devices shipped every year, those licensing fees add up, on average generating Google about $20 billion annually.</p><p>But that’s not all…</p><p><span>The Google Play Store is a massive money maker on its own through paid apps, in-app purchases, subscriptions, and advertising. </span><strong>In 2021, the Play Store generated $38.8 billion in revenue, and by 2025, experts predict Google Play Store will make $64 billion annually</strong></p><p>Like with most app stores, Google charges app developers 15 - 30% of all revenue generated from the Play Store.</p><p>Data on how much Google actually makes from this is unavailable, however, even by conservative estimates, over $22 billion of the Play Store’s revenue becomes profit for Google. </p><p>Here’s where things get crazy. Beyond direct revenue sources like hardware and app stores fees, controlling Android also steers billions of users towards Google’s family of apps. These include:</p><ul><li><p>Google Search</p></li><li><p>Google Maps</p></li><li><p>YouTube  </p></li><li><p>Gmail  </p></li><li><p>Google Drive </p></li><li><p>Google Photos</p></li><li><p>Google Chrome</p></li><li><p>Google Assistant</p></li></ul><p>These pre-installed apps don’t directly earn Google money. But by getting them in front of users by default, Google drives eyeballs that they then monetize through advertising and data collection across their ecosystem. </p><p>Having Android lead users into their funnel makes Google’s ads more valuable and gives them an unrivaled profile of user behaviors to optimize their services.</p><p>To quantify this indirect value provided by Google owning Android, let’s consider Google’s deal with Apple:</p><p><span>Google pays Apple a whopping </span><strong>$18 billion per year</strong><span> simply to be the default search engine on iPhones. And that’s just for search, without all the other pre-installed apps Android provides Google! </span></p><p><span>Combining the value of Google Search, Google Maps, YouTube, and more - </span><strong>experts estimate Google gains over $50 billion per year indirectly from Android.</strong></p><p>So next time you see an Android phone, consider the irony. Google lets users download and use their ubiquitous operating system without paying a dime, then makes billions directly and indirectly from those same users.  </p><p>Rather than some free, open-source utopia, Android exists as a massive pipeline driving value to Google at each stage of the user journey. Phone makers pay, app developers pay, advertisers pay, and users pay with their data and eyeballs all so Google can turn around and maximize their profits.</p><p>It’s quite a strategy - Android provides massive access and control of the mobile world for Google while users happily carry around the data-gathering portal in their pockets as if it was free.</p><p><span>So while you may not pay for Android in dollars and cents, it certainly isn’t free. But for Google shareholders, they’ll surely say it’s </span><strong>priceless</strong><span>!</span></p><p><span>You may also like:</span><br></p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Intel plans spinoff of FPGA unit (133 pts)]]></title>
            <link>https://www.networkworld.com/article/957338/intel-plans-spinoff-of-fpga-unit.html</link>
            <guid>38724327</guid>
            <pubDate>Thu, 21 Dec 2023 18:17:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.networkworld.com/article/957338/intel-plans-spinoff-of-fpga-unit.html">https://www.networkworld.com/article/957338/intel-plans-spinoff-of-fpga-unit.html</a>, See on <a href="https://news.ycombinator.com/item?id=38724327">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
			<p>
				The move to split off its programmable chip unit isn't the first time Intel has spun out a specialized business. Last year, it made Mobileye a standalone company. 			</p>
			
		</div><div>
			
			<p>Intel announced plans to spin off its programmable solutions group (PSG) as a standalone business beginning January 1, with an IPO to follow in about two to three years. The group will operate as a separate unit in the company’s financials.</p>
<p>PSG is the group that handles field-programmable gate array (FPGA) processors made by Altera, which <a href="https://www.networkworld.com/article/939580/intel-to-buy-altera-for-167b-eyes-iot-market.html">Intel acquired</a> for $16.7 billion in 2015. Sandra Rivera, who currently runs Intel’s data center and AI (DCAI) group, will lead PSG as CEO. The company also plans to search for a new chief financial officer for the group.</p>
<p>Rivera, a 23-year veteran of Intel, will continue to run DCAI until a successor is named, according to Intel CEO Pat Gelsinger. On a conference call with journalists and analysts, Gelsinger said that a search for a replacement has begun with both internal and external candidates.</p>
<p>A primary goal of separating PSG is to give it the autonomy and flexibility it needs to more effectively compete in the FPGA market, according to Intel. Maintaining customers’ business continuity is a top priority for Intel and PSG, a company spokesperson told me via email, and the future company will remain strategically aligned and continue to collaborate closely with Intel in support of its customers.</p>
<p>“Beyond the financial benefits, our actions provide a renewed focus, flexibility and autonomy for both companies to pursue the significant opportunities ahead more aggressively,” Gelsinger said on the call.</p>
<p>FPGAs are growing in popularity in data centers for the fact that they can be reconfigured by a customer or a designer to suit their needs, unlike the traditional CPU. This makes the processors customizable to specific processing needs.</p></div><div> <!-- Open -->
		  
<p>Customers should benefit by unshackling Intel’s FPGA business from its Xeon business, said Steve Leibson, an analyst with Tirias Research.</p>
<p>“At Intel, Xeon drives the bus because of its revenues. Intel products that aren’t Xeon are subservient to Xeon and Xeon messaging. That’s why FPGAs got lumped into DCAI, because that’s the only place FPGAs could possibly fit into the Xeon story, and the fit’s not great,” Leibson said.</p>
<p>DCAI FPGA applications can now get the full attention they need from the as-yet unnamed new company. Embedded had no place in the Xeon-centric Intel, said Leibson. “When it becomes a separate company, it can focus on all of the applications that require FPGAs,” he said.</p>
<p>This isn’t the first time Intel has spun out a specialized business. Last year, it spun off Mobileye as a standalone company. Mobileye makes video recognition sensors used in AI applications such as smart cars. Since they began trading a year ago, Mobileye shares have risen 89%.</p>
<p>It’s not clear how big a part of Intel’s business PSG represents, because Intel does not break out PSG revenues. It lumps all DCAI revenue into one non-itemized sum when reporting earnings.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Wikimedia Russia has been dissolved (120 pts)]]></title>
            <link>https://mastodon.xyz/@johl/111618899554454932</link>
            <guid>38724093</guid>
            <pubDate>Thu, 21 Dec 2023 18:03:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mastodon.xyz/@johl/111618899554454932">https://mastodon.xyz/@johl/111618899554454932</a>, See on <a href="https://news.ycombinator.com/item?id=38724093">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
    </channel>
</rss>