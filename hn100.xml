<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Mon, 22 Jul 2024 10:30:05 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Jellyfin: We're Good, Seriously (201 pts)]]></title>
            <link>https://forum.jellyfin.org/t-we-re-good-seriously</link>
            <guid>41031998</guid>
            <pubDate>Mon, 22 Jul 2024 08:26:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://forum.jellyfin.org/t-we-re-good-seriously">https://forum.jellyfin.org/t-we-re-good-seriously</a>, See on <a href="https://news.ycombinator.com/item?id=41031998">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="post_25897">
<div>
<div>
	<center><strong><span><a href="https://forum.jellyfin.org/u-joshuaboniface"><span><strong>joshuaboniface</strong></span></a></span></strong> <!-- start: postbit_offline -->
<br><span title="Online">Offline</span>
<!-- end: postbit_offline --></center>
	<!-- start: postbit_avatar -->
<p><a href="https://forum.jellyfin.org/u-joshuaboniface"><img src="https://avatars.githubusercontent.com/u/4031396?v=4" alt="" width="85" height="85"></a></p>
<!-- end: postbit_avatar --><br>
	
	<div>
		<!-- start: postbit_author_user -->
<p><span>Posts:</span> <span>105</span><br>
<span>	Threads:</span> <span>23</span><br>
	<span>Joined:</span><span> 2023 Jun</span></p><!-- start: postbit_reputation -->
<p><span>Reputation:</span><span> <!-- start: postbit_reputation_formatted_link -->
<a href="https://forum.jellyfin.org/reputation.php?uid=13"><strong>12</strong></a>
<!-- end: postbit_reputation_formatted_link --></span></p><!-- end: postbit_reputation -->
<!-- end: postbit_author_user --><!-- start: postbit_country -->
<p><span>Country:</span><span><img src="https://forum.jellyfin.org/images/flags/canada.png" alt="Canada" title="Canada"></span></p><!-- end: postbit_country -->
	</div>
</div>
<div>
	<div>
		<!-- start: postbit_posturl -->

<!-- end: postbit_posturl -->
		
		<p><span>2024-06-06, 07:34 PM <span id="edited_by_25897"><!-- start: postbit_editedby -->
<span>(This post was last modified: 2024-06-06, 07:34 PM by <a href="https://forum.jellyfin.org/u-joshuaboniface">joshuaboniface</a>.<!-- editcount -->)</span>
<!-- end: postbit_editedby --></span></span>
		
	</p></div>
	<div id="pid_25897">
		<p><a href="https://opencollective.com/jellyfin/updates/were-good-seriously" target="_blank" rel="noopener">This message was posted to our OpenCollective here.</a> However, their page layout leaves a lot to be desired, with the post being very far down the page. So it is reproduced here for posterity.</p><hr>
<p>
We have quite a budget collected over the last 5 years, and while we're really happy to see so many in the Jellyfin community contribute to us, we want to ask you to stop!</p><p>

No, really. We don't actually need your money. At least, not here and now.</p><p>

We have over $24,000 in the bank, and with average monthly expenses of only ~$600, that's over 40 months (3.3 years) of runway! So, we have plenty of money for the near future.</p><p>

Thus, at this time, we want you to seriously consider donating to the authors of Clients you use, instead of (or in addition to) the main project. Client support is the hardest part of the Jellyfin ecosystem to keep going, and most of them are maintained by only a single person or very small team. With the API changes in 10.9.0 and the upcoming 10.10.0 releases, they're going to be very busy trying to keep up, and thus could really use your support in a way that the core project here doesn't right now.</p><p>

So, if there's a client you use every day and that you love, consider <a href="https://github.com/jellyfin/jellyfin-meta/blob/master/jellyfin-team.md" target="_blank" rel="noopener">finding it's author in our list of official clients</a>, and sending them a little something instead (or too).</p><p>

No, this doesn't violate our policy of "no paid development", because donations are just that - donations. We will still not honour bug bounties or similar, and still not use our collective finance here for paid development. So don't feel like you're doing something wrong, you're not!</p><p>

I'll leave this notice up until we drop to ~1 year (12 months) of remaining runway, at which time we can re-evaluate where we're at.</p><p>

Happy watching!
	</p></div>
	  
	
	
</div>
</div>
<!-- start: myreactions_container -->

<div>
  <!-- start: myreactions_reaction -->
<div title="Thumbs Up - BarbLives, dreamon, Linkestis, fredhags">
  <!-- start: myreactions_reaction_image -->
<p><img src="https://forum.jellyfin.org//images/smilies/apple_emoji/thumbs-up.png" title="Thumbs Up - BarbLives, dreamon, Linkestis, fredhags"></p><!-- end: myreactions_reaction_image --> <p><span>4</span>
</p></div>
<!-- end: myreactions_reaction --><!-- start: myreactions_reaction -->
<div title="Pizza - thornbill">
  <!-- start: myreactions_reaction_image -->
<p><img src="https://forum.jellyfin.org/images/smilies/apple_emoji/pizza.png" title="Pizza - thornbill"></p><!-- end: myreactions_reaction_image --> <p><span>1</span>
</p></div>
<!-- end: myreactions_reaction -->
  
  
</div>
<!-- end: myreactions_container -->

</div><div id="post_25902">
<div>
	<center><strong><span><a href="https://forum.jellyfin.org/u-sethbacon">SethBacon</a></span></strong> <!-- start: postbit_offline -->
<br><span title="Online">Offline</span>
<!-- end: postbit_offline --></center>
	<!-- start: postbit_avatar -->
<p><a href="https://forum.jellyfin.org/u-sethbacon"><img src="https://static.jellyfin.org/forum/uploads/avatars/avatar_3473.jpg?dateline=1719555458" alt="" width="85" height="85"></a></p>
<!-- end: postbit_avatar -->
	<p><span>
				Junior Member<br>
				<i></i><br>
				
			</span>
	</p>
	<div>
		<!-- start: postbit_author_user -->
<p><span>Posts:</span> <span>34</span><br>
<span>	Threads:</span> <span>2</span><br>
	<span>Joined:</span><span> 2023 Nov</span></p><!-- start: postbit_reputation -->
<p><span>Reputation:</span><span> <!-- start: postbit_reputation_formatted_link -->
<a href="https://forum.jellyfin.org/reputation.php?uid=3473"><strong>2</strong></a>
<!-- end: postbit_reputation_formatted_link --></span></p><!-- end: postbit_reputation -->
<!-- end: postbit_author_user --><!-- start: postbit_country -->
<p><span>Country:</span><span><img src="https://forum.jellyfin.org/images/flags/canada.png" alt="Canada" title="Canada"></span></p><!-- end: postbit_country -->
	</div>
</div>
<div id="pid_25902"><p>
		Seriously someone send neils some cash for asprin at least. Alternatives include OSPCA <a href="https://ontariospca.ca/how-to-help/how-your-donations-help-animals/" target="_blank" rel="noopener">https://ontariospca.ca/how-to-help/how-y...p-animals/</a> so our leader doesnt get mauled by rabid dogs on the street
	</p></div>
</div><div id="post_25972">
<div>
<div>
	<center><strong><span><a href="https://forum.jellyfin.org/u-kagetsu">kagetsu</a></span></strong> <!-- start: postbit_offline -->
<br><span title="Online">Offline</span>
<!-- end: postbit_offline --></center>
	<!-- start: postbit_avatar -->
<p><a href="https://forum.jellyfin.org/u-kagetsu"><img src="https://static.jellyfin.org/forum/images/default_avatar.png" alt="" width="85" height="85"></a></p>
<!-- end: postbit_avatar -->
	<p><span>
				Junior Member<br>
				<i></i><br>
				
			</span>
	</p>
	<div>
		<!-- start: postbit_author_user -->
<p><span>Posts:</span> <span>5</span><br>
<span>	Threads:</span> <span>1</span><br>
	<span>Joined:</span><span> 2023 Aug</span></p><!-- start: postbit_reputation -->
<p><span>Reputation:</span><span> <!-- start: postbit_reputation_formatted_link -->
<a href="https://forum.jellyfin.org/reputation.php?uid=1467"><strong>0</strong></a>
<!-- end: postbit_reputation_formatted_link --></span></p><!-- end: postbit_reputation -->
<!-- end: postbit_author_user --><!-- start: postbit_country -->
<p><span>Country:</span><span><img src="https://forum.jellyfin.org/images/flags/united_states.png" alt="United States" title="United States"></span></p><!-- end: postbit_country -->
	</div>
</div>
<div>
	
	<p>
		This posts shows the character in this community. I will be donating to two authors personally soon. Thank you all for being awesome.
	</p>
	  
	
	
</div>
</div>
<!-- start: myreactions_container -->

<div title="Red Heart - TheDreadPirate">
  <!-- start: myreactions_reaction_image -->
<p><img src="https://forum.jellyfin.org//images/smilies/apple_emoji/red-heart.png" title="Red Heart - TheDreadPirate"></p><!-- end: myreactions_reaction_image --> <p><span>1</span>
</p></div>
<!-- end: myreactions_container -->

</div><div id="post_26852">
<div>
	<center><strong><span><a href="https://forum.jellyfin.org/u-akirby83">akirby83</a></span></strong> <!-- start: postbit_offline -->
<br><span title="Online">Offline</span>
<!-- end: postbit_offline --></center>
	<!-- start: postbit_avatar -->
<p><a href="https://forum.jellyfin.org/u-akirby83"><img src="https://static.jellyfin.org/forum/images/default_avatar.png" alt="" width="85" height="85"></a></p>
<!-- end: postbit_avatar -->
	<p><span>
				Junior Member<br>
				<i></i><br>
				
			</span>
	</p>
	<div>
		<!-- start: postbit_author_user -->
<p><span>Posts:</span> <span>7</span><br>
<span>	Threads:</span> <span>1</span><br>
	<span>Joined:</span><span> 2023 Aug</span></p><!-- start: postbit_reputation -->
<p><span>Reputation:</span><span> <!-- start: postbit_reputation_formatted_link -->
<a href="https://forum.jellyfin.org/reputation.php?uid=1688"><strong>0</strong></a>
<!-- end: postbit_reputation_formatted_link --></span></p><!-- end: postbit_reputation -->
<!-- end: postbit_author_user --><!-- start: postbit_country -->
<p><span>Country:</span><span><img src="https://forum.jellyfin.org/images/flags/united_states.png" alt="United States" title="United States"></span></p><!-- end: postbit_country -->
	</div>
</div>
<div>
	
	<p>
		Thank you for the list.&nbsp; I very much want to donate to Jellyfin since it's awesome, but I've read in the past you don't really need the money.&nbsp; I'll see if I can find some individuals.
	</p>
	  
	
	
</div>
</div><div id="post_26869">
<div>
	<center><strong><span><a href="https://forum.jellyfin.org/u-host-in-the-shell">Host-in-the-Shell</a></span></strong> <!-- start: postbit_offline -->
<br><span title="Online">Offline</span>
<!-- end: postbit_offline --></center>
	<!-- start: postbit_avatar -->
<p><a href="https://forum.jellyfin.org/u-host-in-the-shell"><img src="https://static.jellyfin.org/forum/uploads/avatars/avatar_93.jpg?dateline=1701218614" alt="" width="85" height="85"></a></p>
<!-- end: postbit_avatar -->
	<p><span>
				Member<br>
				<i></i><i></i><br>
				
			</span>
	</p>
	<div>
		<!-- start: postbit_author_user -->
<p><span>Posts:</span> <span>67</span><br>
<span>	Threads:</span> <span>4</span><br>
	<span>Joined:</span><span> 2023 Jun</span></p><!-- start: postbit_reputation -->
<p><span>Reputation:</span><span> <!-- start: postbit_reputation_formatted_link -->
<a href="https://forum.jellyfin.org/reputation.php?uid=93"><strong>5</strong></a>
<!-- end: postbit_reputation_formatted_link --></span></p><!-- end: postbit_reputation -->
<!-- end: postbit_author_user -->
	</div>
</div>
<div>
	
	<p>
		I see the list of clients provided in this post does not have the people working on the WebOS version. Is it because it is too closely linked to Jellyfin Web? I just want to know so I could directly support those who work on it since I use the WebOS client as my main.
	</p>
	  
	<!-- start: postbit_signature -->
<p>
Server specs =&gt; OS: Debian 12 | GPU: Arc A380 | CPU: Ryzen 5 5600X | 64GB RAM | 38TB
</p>
<!-- end: postbit_signature -->
	
</div>
</div><div id="post_26881">
<div>
	<center><strong><span><a href="https://forum.jellyfin.org/u-thornbill"><span><strong>thornbill</strong></span></a></span></strong> <!-- start: postbit_offline -->
<br><span title="Online">Offline</span>
<!-- end: postbit_offline --></center>
	<!-- start: postbit_avatar -->
<p><a href="https://forum.jellyfin.org/u-thornbill"><img src="https://static.jellyfin.org/forum/uploads/avatars/avatar_25.jpg?dateline=1686688539" alt="" width="85" height="85"></a></p>
<!-- end: postbit_avatar -->
	<p><span>
				Core Team<br>
				<i></i><i></i><i></i><i></i><i></i><i></i><i></i><br>
				
			</span>
	</p>
	<div>
		<!-- start: postbit_author_user -->
<p><span>Posts:</span> <span>140</span><br>
<span>	Threads:</span> <span>5</span><br>
	<span>Joined:</span><span> 2023 Jun</span></p><!-- start: postbit_reputation -->
<p><span>Reputation:</span><span> <!-- start: postbit_reputation_formatted_link -->
<a href="https://forum.jellyfin.org/reputation.php?uid=25"><strong>7</strong></a>
<!-- end: postbit_reputation_formatted_link --></span></p><!-- end: postbit_reputation -->
<!-- end: postbit_author_user --><!-- start: postbit_country -->
<p><span>Country:</span><span><img src="https://forum.jellyfin.org/images/flags/united_states.png" alt="United States" title="United States"></span></p><!-- end: postbit_country -->
	</div>
</div>
<div>
	
	<div id="pid_26881">
		<blockquote><cite><span> (2024-06-13, 09:44 PM)</span>Host-in-the-Shell Wrote:  <a href="https://forum.jellyfin.org/t-we-re-good-seriously?pid=26869#pid26869"></a></cite>I see the list of clients provided in this post does not have the people working on the WebOS version. Is it because it is too closely linked to Jellyfin Web? I just want to know so I could directly support those who work on it since I use the WebOS client as my main.</blockquote><p>
It is mostly just web.&nbsp;<a href="https://github.com/dmitrylyzo" target="_blank" rel="noopener">Dmitry</a>&nbsp;does most of the work specifically to support webOS and Tizen but it doesn’t look like they have Sponsors set up currently.
	</p></div>
	  
	<!-- start: postbit_signature -->
<p><a href="https://github.com/sponsors/thornbill" target="_blank" rel="noopener"><img src="https://img.shields.io/github/sponsors/thornbill?style=flat&amp;logo=github" loading="lazy" alt="[Image: thornbill?style=flat&amp;logo=github]"></a>
</p>
<!-- end: postbit_signature -->
	
</div>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Parse, Don't Validate (176 pts)]]></title>
            <link>https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/</link>
            <guid>41031585</guid>
            <pubDate>Mon, 22 Jul 2024 06:57:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/">https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/</a>, See on <a href="https://news.ycombinator.com/item?id=41031585">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="main"><article><header></header><p>Historically, I’ve struggled to find a concise, simple way to explain what it means to practice type-driven design. Too often, when someone asks me “How did you come up with this approach?” I find I can’t give them a satisfying answer. I know it didn’t just come to me in a vision—I have an iterative design process that doesn’t require plucking the “right” approach out of thin air—yet I haven’t been very successful in communicating that process to others.</p><p>However, about a month ago, <a href="https://twitter.com/lexi_lambda/status/1182242561655746560">I was reflecting on Twitter</a> about the differences I experienced parsing JSON in statically- and dynamically-typed languages, and finally, I realized what I was looking for. Now I have a single, snappy slogan that encapsulates what type-driven design means to me, and better yet, it’s only three words long:</p><p><strong>Parse, don’t validate.</strong></p><h2><a name="the-essence-of-type-driven-design"></a>The essence of type-driven design</h2><p>Alright, I’ll confess: unless you already know what type-driven design is, my catchy slogan probably doesn’t mean all that much to you. Fortunately, that’s what the remainder of this blog post is for. I’m going to explain precisely what I mean in gory detail—but first, we need to practice a little wishful thinking.</p><h3><a name="the-realm-of-possibility"></a>The realm of possibility</h3><p>One of the wonderful things about static type systems is that they can make it possible, and sometimes even easy, to answer questions like “is it possible to write this function?” For an extreme example, consider the following Haskell type signature:</p><pre><code><span>foo</span> <span>::</span> <span>Integer</span> <span>-&gt;</span> <span>Void</span></code></pre><p>Is it possible to implement <code>foo</code>? Trivially, the answer is <em>no</em>, as <code>Void</code> is a type that contains no values, so it’s impossible for <em>any</em> function to produce a value of type <code>Void</code>.<sup><a href="#footnote-1" id="footnote-ref-1-1">1</a></sup> That example is pretty boring, but the question gets much more interesting if we choose a more realistic example:</p><pre><code><span>head</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>a</span></code></pre><p>This function returns the first element from a list. Is it possible to implement? It certainly doesn’t sound like it does anything very complicated, but if we attempt to implement it, the compiler won’t be satisfied:</p><pre><code><span>head</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>a</span>
<span>head</span> <span>(</span><span>x</span><span>:</span><span>_</span><span>)</span> <span>=</span> <span>x</span></code></pre><pre><code>warning: [-Wincomplete-patterns]
    Pattern match(es) are non-exhaustive
    In an equation for ‘head’: Patterns not matched: []
</code></pre><p>This message is helpfully pointing out that our function is <em>partial</em>, which is to say it is not defined for all possible inputs. Specifically, it is not defined when the input is <code>[]</code>, the empty list. This makes sense, as it isn’t possible to return the first element of a list if the list is empty—there’s no element to return! So, remarkably, we learn this function isn’t possible to implement, either.</p><h3><a name="turning-partial-functions-total"></a>Turning partial functions total</h3><p>To someone coming from a dynamically-typed background, this might seem perplexing. If we have a list, we might very well want to get the first element in it. And indeed, the operation of “getting the first element of a list” isn’t impossible in Haskell, it just requires a little extra ceremony. There are two different ways to fix the <code>head</code> function, and we’ll start with the simplest one.</p><h4><a name="managing-expectations"></a>Managing expectations</h4><p>As established, <code>head</code> is partial because there is no element to return if the list is empty: we’ve made a promise we cannot possibly fulfill. Fortunately, there’s an easy solution to that dilemma: we can weaken our promise. Since we cannot guarantee the caller an element of the list, we’ll have to practice a little expectation management: we’ll do our best return an element if we can, but we reserve the right to return nothing at all. In Haskell, we express this possibility using the <code>Maybe</code> type:</p><pre><code><span>head</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>Maybe</span> <span>a</span></code></pre><p>This buys us the freedom we need to implement <code>head</code>—it allows us to return <code>Nothing</code> when we discover we can’t produce a value of type <code>a</code> after all:</p><pre><code><span>head</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>Maybe</span> <span>a</span>
<span>head</span> <span>(</span><span>x</span><span>:</span><span>_</span><span>)</span> <span>=</span> <span>Just</span> <span>x</span>
<span>head</span> <span>[]</span>    <span>=</span> <span>Nothing</span></code></pre><p>Problem solved, right? For the moment, yes… but this solution has a hidden cost.</p><p>Returning <code>Maybe</code> is undoubtably convenient when we’re <em>implementing</em>  <code>head</code>. However, it becomes significantly less convenient when we want to actually use it! Since <code>head</code> always has the potential to return <code>Nothing</code>, the burden falls upon its callers to handle that possibility, and sometimes that passing of the buck can be incredibly frustrating. To see why, consider the following code:</p><pre><code><span>getConfigurationDirectories</span> <span>::</span> <span>IO</span> <span>[</span><span>FilePath</span><span>]</span>
<span>getConfigurationDirectories</span> <span>=</span> <span>do</span>
  <span>configDirsString</span> <span>&lt;-</span> <span>getEnv</span> <span>"CONFIG_DIRS"</span>
  <span>let</span> <span>configDirsList</span> <span>=</span> <span>split</span> <span>','</span> <span>configDirsString</span>
  <span>when</span> <span>(</span><span>null</span> <span>configDirsList</span><span>)</span> <span>$</span>
    <span>throwIO</span> <span>$</span> <span>userError</span> <span>"CONFIG_DIRS cannot be empty"</span>
  <span>pure</span> <span>configDirsList</span>

<span>main</span> <span>::</span> <span>IO</span> <span>()</span>
<span>main</span> <span>=</span> <span>do</span>
  <span>configDirs</span> <span>&lt;-</span> <span>getConfigurationDirectories</span>
  <span>case</span> <span>head</span> <span>configDirs</span> <span>of</span>
    <span>Just</span> <span>cacheDir</span> <span>-&gt;</span> <span>initializeCache</span> <span>cacheDir</span>
    <span>Nothing</span> <span>-&gt;</span> <span>error</span> <span>"should never happen; already checked configDirs is non-empty"</span></code></pre><p>When <code>getConfigurationDirectories</code> retrieves a list of file paths from the environment, it proactively checks that the list is non-empty. However, when we use <code>head</code> in <code>main</code> to get the first element of the list, the <code>Maybe FilePath</code> result still requires us to handle a <code>Nothing</code> case that we know will never happen! This is terribly bad for several reasons:</p><ol><li><p>First, it’s just annoying. We already checked that the list is non-empty, why do we have to clutter our code with another redundant check?</p></li><li><p>Second, it has a potential performance cost. Although the cost of the redundant check is trivial in this particular example, one could imagine a more complex scenario where the redundant checks could add up, such as if they were happening in a tight loop.</p></li><li><p>Finally, and worst of all, this code is a bug waiting to happen! What if <code>getConfigurationDirectories</code> were modified to stop checking that the list is empty, intentionally or unintentionally? The programmer might not remember to update <code>main</code>, and suddenly the “impossible” error becomes not only possible, but probable.</p></li></ol><p>The need for this redundant check has essentially forced us to punch a hole in our type system. If we could statically <em>prove</em> the <code>Nothing</code> case impossible, then a modification to <code>getConfigurationDirectories</code> that stopped checking if the list was empty would invalidate the proof and trigger a compile-time failure. However, as-written, we’re forced to rely on a test suite or manual inspection to catch the bug.</p><h4><a name="paying-it-forward"></a>Paying it forward</h4><p>Clearly, our modified version of <code>head</code> leaves some things to be desired. Somehow, we’d like it to be smarter: if we already checked that the list was non-empty, <code>head</code> should unconditionally return the first element without forcing us to handle the case we know is impossible. How can we do that?</p><p>Let’s look at the original (partial) type signature for <code>head</code> again:</p><pre><code><span>head</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>a</span></code></pre><p>The previous section illustrated that we can turn that partial type signature into a total one by weakening the promise made in the return type. However, since we don’t want to do that, there’s only one thing left that can be changed: the argument type (in this case, <code>[a]</code>). Instead of weakening the return type, we can <em>strengthen</em> the argument type, eliminating the possibility of <code>head</code> ever being called on an empty list in the first place.</p><p>To do this, we need a type that represents non-empty lists. Fortunately, the existing <code>NonEmpty</code> type from <code>Data.List.NonEmpty</code> is exactly that. It has the following definition:</p><pre><code><span>data</span> <span>NonEmpty</span> <span>a</span> <span>=</span> <span>a</span> <span>:|</span> <span>[</span><span>a</span><span>]</span></code></pre><p>Note that <code>NonEmpty a</code> is really just a tuple of an <code>a</code> and an ordinary, possibly-empty <code>[a]</code>. This conveniently models a non-empty list by storing the first element of the list separately from the list’s tail: even if the <code>[a]</code> component is <code>[]</code>, the <code>a</code> component must always be present. This makes <code>head</code> completely trivial to implement:<sup><a href="#footnote-2" id="footnote-ref-2-1">2</a></sup></p><pre><code><span>head</span> <span>::</span> <span>NonEmpty</span> <span>a</span> <span>-&gt;</span> <span>a</span>
<span>head</span> <span>(</span><span>x</span><span>:|</span><span>_</span><span>)</span> <span>=</span> <span>x</span></code></pre><p>Unlike before, GHC accepts this definition without complaint—this definition is <em>total</em>, not partial. We can update our program to use the new implementation:</p><pre><code><span>getConfigurationDirectories</span> <span>::</span> <span>IO</span> <span>(</span><span>NonEmpty</span> <span>FilePath</span><span>)</span>
<span>getConfigurationDirectories</span> <span>=</span> <span>do</span>
  <span>configDirsString</span> <span>&lt;-</span> <span>getEnv</span> <span>"CONFIG_DIRS"</span>
  <span>let</span> <span>configDirsList</span> <span>=</span> <span>split</span> <span>','</span> <span>configDirsString</span>
  <span>case</span> <span>nonEmpty</span> <span>configDirsList</span> <span>of</span>
    <span>Just</span> <span>nonEmptyConfigDirsList</span> <span>-&gt;</span> <span>pure</span> <span>nonEmptyConfigDirsList</span>
    <span>Nothing</span> <span>-&gt;</span> <span>throwIO</span> <span>$</span> <span>userError</span> <span>"CONFIG_DIRS cannot be empty"</span>

<span>main</span> <span>::</span> <span>IO</span> <span>()</span>
<span>main</span> <span>=</span> <span>do</span>
  <span>configDirs</span> <span>&lt;-</span> <span>getConfigurationDirectories</span>
  <span>initializeCache</span> <span>(</span><span>head</span> <span>configDirs</span><span>)</span></code></pre><p>Note that the redundant check in <code>main</code> is now completely gone! Instead, we perform the check exactly once, in <code>getConfigurationDirectories</code>. It constructs a <code>NonEmpty a</code> from a <code>[a]</code> using the <code>nonEmpty</code> function from <code>Data.List.NonEmpty</code>, which has the following type:</p><pre><code><span>nonEmpty</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>Maybe</span> <span>(</span><span>NonEmpty</span> <span>a</span><span>)</span></code></pre><p>The <code>Maybe</code> is still there, but this time, we handle the <code>Nothing</code> case very early in our program: right in the same place we were already doing the input validation. Once that check has passed, we now have a <code>NonEmpty FilePath</code> value, which preserves (in the type system!) the knowledge that the list really is non-empty. Put another way, you can think of a value of type <code>NonEmpty a</code> as being like a value of type <code>[a]</code>, plus a <em>proof</em> that the list is non-empty.</p><p>By strengthening the type of the argument to <code>head</code> instead of weakening the type of its result, we’ve completely eliminated all the problems from the previous section:</p><ul><li><p>The code has no redundant checks, so there can’t be any performance overhead.</p></li><li><p>Furthermore, if <code>getConfigurationDirectories</code> changes to stop checking that the list is non-empty, its return type must change, too. Consequently, <code>main</code> will fail to typecheck, alerting us to the problem before we even run the program!</p></li></ul><p>What’s more, it’s trivial to recover the old behavior of <code>head</code> from the new one by composing <code>head</code> with <code>nonEmpty</code>:</p><pre><code><span>head'</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>Maybe</span> <span>a</span>
<span>head'</span> <span>=</span> <span>fmap</span> <span>head</span> <span>.</span> <span>nonEmpty</span></code></pre><p>Note that the inverse is <em>not</em> true: there is no way to obtain the new version of <code>head</code> from the old one. All in all, the second approach is superior on all axes.</p><h3><a name="the-power-of-parsing"></a>The power of parsing</h3><p>You may be wondering what the above example has to do with the title of this blog post. After all, we only examined two different ways to validate that a list was non-empty—no parsing in sight. That interpretation isn’t wrong, but I’d like to propose another perspective: in my mind, the difference between validation and parsing lies almost entirely in how information is preserved. Consider the following pair of functions:</p><pre><code><span>validateNonEmpty</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>IO</span> <span>()</span>
<span>validateNonEmpty</span> <span>(</span><span>_</span><span>:</span><span>_</span><span>)</span> <span>=</span> <span>pure</span> <span>()</span>
<span>validateNonEmpty</span> <span>[]</span> <span>=</span> <span>throwIO</span> <span>$</span> <span>userError</span> <span>"list cannot be empty"</span>

<span>parseNonEmpty</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>IO</span> <span>(</span><span>NonEmpty</span> <span>a</span><span>)</span>
<span>parseNonEmpty</span> <span>(</span><span>x</span><span>:</span><span>xs</span><span>)</span> <span>=</span> <span>pure</span> <span>(</span><span>x</span><span>:|</span><span>xs</span><span>)</span>
<span>parseNonEmpty</span> <span>[]</span> <span>=</span> <span>throwIO</span> <span>$</span> <span>userError</span> <span>"list cannot be empty"</span></code></pre><p>These two functions are nearly identical: they check if the provided list is empty, and if it is, they abort the program with an error message. The difference lies entirely in the return type: <code>validateNonEmpty</code> always returns <code>()</code>, the type that contains no information, but <code>parseNonEmpty</code> returns <code>NonEmpty a</code>, a refinement of the input type that preserves the knowledge gained in the type system. Both of these functions check the same thing, but <code>parseNonEmpty</code> gives the caller access to the information it learned, while <code>validateNonEmpty</code> just throws it away.</p><p>These two functions elegantly illustrate two different perspectives on the role of a static type system: <code>validateNonEmpty</code> obeys the typechecker well enough, but only <code>parseNonEmpty</code> takes full advantage of it. If you see why <code>parseNonEmpty</code> is preferable, you understand what I mean by the mantra “parse, don’t validate.” Still, perhaps you are skeptical of <code>parseNonEmpty</code>’s name. Is it really <em>parsing</em> anything, or is it merely validating its input and returning a result? While the precise definition of what it means to parse or validate something is debatable, I believe <code>parseNonEmpty</code> is a bona-fide parser (albeit a particularly simple one).</p><p>Consider: what is a parser? Really, a parser is just a function that consumes less-structured input and produces more-structured output. By its very nature, a parser is a partial function—some values in the domain do not correspond to any value in the range—so all parsers must have some notion of failure. Often, the input to a parser is text, but this is by no means a requirement, and <code>parseNonEmpty</code> is a perfectly cromulent parser: it parses lists into non-empty lists, signaling failure by terminating the program with an error message.</p><p>Under this flexible definition, parsers are an incredibly powerful tool: they allow discharging checks on input up-front, right on the boundary between a program and the outside world, and once those checks have been performed, they never need to be checked again! Haskellers are well-aware of this power, and they use many different types of parsers on a regular basis:</p><ul><li><p>The <a href="https://hackage.haskell.org/package/aeson">aeson</a> library provides a <code>Parser</code> type that can be used to parse JSON data into domain types.</p></li><li><p>Likewise, <a href="https://hackage.haskell.org/package/optparse-applicative">optparse-applicative</a> provides a set of parser combinators for parsing command-line arguments.</p></li><li><p>Database libraries like <a href="https://hackage.haskell.org/package/persistent">persistent</a> and <a href="https://hackage.haskell.org/package/postgresql-simple">postgresql-simple</a> have a mechanism for parsing values held in an external data store.</p></li><li><p>The <a href="https://hackage.haskell.org/package/servant">servant</a> ecosystem is built around parsing Haskell datatypes from path components, query parameters, HTTP headers, and more.</p></li></ul><p>The common theme between all these libraries is that they sit on the boundary between your Haskell application and the external world. That world doesn’t speak in product and sum types, but in streams of bytes, so there’s no getting around a need to do some parsing. Doing that parsing up front, before acting on the data, can go a long way toward avoiding many classes of bugs, some of which might even be security vulnerabilities.</p><p>One drawback to this approach of parsing everything up front is that it sometimes requires values be parsed long before they are actually used. In a dynamically-typed language, this can make keeping the parsing and processing logic in sync a little tricky without extensive test coverage, much of which can be laborious to maintain. However, with a static type system, the problem becomes marvelously simple, as demonstrated by the <code>NonEmpty</code> example above: if the parsing and processing logic go out of sync, the program will fail to even compile.</p><h3><a name="the-danger-of-validation"></a>The danger of validation</h3><p>Hopefully, by this point, you are at least somewhat sold on the idea that parsing is preferable to validation, but you may have lingering doubts. Is validation really so bad if the type system is going to force you to do the necessary checks eventually anyway? Maybe the error reporting will be a little bit worse, but a bit of redundant checking can’t hurt, right?</p><p>Unfortunately, it isn’t so simple. Ad-hoc validation leads to a phenomenon that the <a href="http://langsec.org/">language-theoretic security</a> field calls <em>shotgun parsing</em>. In the 2016 paper, <a href="http://langsec.org/papers/langsec-cwes-secdev2016.pdf">The Seven Turrets of Babel: A Taxonomy of LangSec Errors and How to Expunge Them</a>, its authors provide the following definition:</p><blockquote><p>Shotgun parsing is a programming antipattern whereby parsing and input-validating code is mixed with and spread across processing code—throwing a cloud of checks at the input, and hoping, without any systematic justification, that one or another would catch all the “bad” cases.</p></blockquote><p>They go on to explain the problems inherent to such validation techniques:</p><blockquote><p>Shotgun parsing necessarily deprives the program of the ability to reject invalid input instead of processing it. Late-discovered errors in an input stream will result in some portion of invalid input having been processed, with the consequence that program state is difficult to accurately predict.</p></blockquote><p>In other words, a program that does not parse all of its input up front runs the risk of acting upon a valid portion of the input, discovering a different portion is invalid, and suddenly needing to roll back whatever modifications it already executed in order to maintain consistency. Sometimes this is possible—such as rolling back a transaction in an RDBMS—but in general it may not be.</p><p>It may not be immediately apparent what shotgun parsing has to do with validation—after all, if you do all your validation up front, you mitigate the risk of shotgun parsing. The problem is that validation-based approaches make it extremely difficult or impossible to determine if everything was actually validated up front or if some of those so-called “impossible” cases might actually happen. The entire program must assume that raising an exception anywhere is not only possible, it’s regularly necessary.</p><p>Parsing avoids this problem by stratifying the program into two phases—parsing and execution—where failure due to invalid input can only happen in the first phase. The set of remaining failure modes during execution is minimal by comparison, and they can be handled with the tender care they require.</p><h2><a name="parsing-not-validating-in-practice"></a>Parsing, not validating, in practice</h2><p>So far, this blog post has been something of a sales pitch. “You, dear reader, ought to be parsing!” it says, and if I’ve done my job properly, at least some of you are sold. However, even if you understand the “what” and the “why,” you might not feel especially confident about the “how.”</p><p>My advice: focus on the datatypes.</p><p>Suppose you are writing a function that accepts a list of tuples representing key-value pairs, and you suddenly realize you aren’t sure what to do if the list has duplicate keys. One solution would be to write a function that asserts there aren’t any duplicates in the list:</p><pre><code><span>checkNoDuplicateKeys</span> <span>::</span> <span>(</span><span>MonadError</span> <span>AppError</span> <span>m</span><span>,</span> <span>Eq</span> <span>k</span><span>)</span> <span>=&gt;</span> <span>[(</span><span>k</span><span>,</span> <span>v</span><span>)]</span> <span>-&gt;</span> <span>m</span> <span>()</span></code></pre><p>However, this check is fragile: it’s extremely easy to forget. Because its return value is unused, it can always be omitted, and the code that needs it would still typecheck. A better solution is to choose a data structure that disallows duplicate keys by construction, such as a <code>Map</code>. Adjust your function’s type signature to accept a <code>Map</code> instead of a list of tuples, and implement it as you normally would.</p><p>Once you’ve done that, the call site of your new function will likely fail to typecheck, since it is still being passed a list of tuples. If the caller was given the value via one of its arguments, or if it received it from the result of some other function, you can continue updating the type from list to <code>Map</code>, all the way up the call chain. Eventually, you will either reach the location the value is created, or you’ll find a place where duplicates actually ought to be allowed. At that point, you can insert a call to a modified version of <code>checkNoDuplicateKeys</code>:</p><pre><code><span>checkNoDuplicateKeys</span> <span>::</span> <span>(</span><span>MonadError</span> <span>AppError</span> <span>m</span><span>,</span> <span>Eq</span> <span>k</span><span>)</span> <span>=&gt;</span> <span>[(</span><span>k</span><span>,</span> <span>v</span><span>)]</span> <span>-&gt;</span> <span>m</span> <span>(</span><span>Map</span> <span>k</span> <span>v</span><span>)</span></code></pre><p>Now the check <em>cannot</em> be omitted, since its result is actually necessary for the program to proceed!</p><p>This hypothetical scenario highlights two simple ideas:</p><ol><li><p><strong>Use a data structure that makes illegal states unrepresentable.</strong> Model your data using the most precise data structure you reasonably can. If ruling out a particular possibility is too hard using the encoding you are currently using, consider alternate encodings that can express the property you care about more easily. Don’t be afraid to refactor.</p></li><li><p><strong>Push the burden of proof upward as far as possible, but no further.</strong> Get your data into the most precise representation you need as quickly as you can. Ideally, this should happen at the boundary of your system, before <em>any</em> of the data is acted upon.<sup><a href="#footnote-3" id="footnote-ref-3-1">3</a></sup></p><p>If one particular code branch eventually requires a more precise representation of a piece of data, parse the data into the more precise representation as soon as the branch is selected. Use sum types judiciously to allow your datatypes to reflect and adapt to control flow.</p></li></ol><p>In other words, write functions on the data representation you <em>wish</em> you had, not the data representation you are given. The design process then becomes an exercise in bridging the gap, often by working from both ends until they meet somewhere in the middle. Don’t be afraid to iteratively adjust parts of the design as you go, since you may learn something new during the refactoring process!</p><p>Here are a handful of additional points of advice, arranged in no particular order:</p><ul><li><p><strong>Let your datatypes inform your code, don’t let your code control your datatypes.</strong> Avoid the temptation to just stick a <code>Bool</code> in a record somewhere because it’s needed by the function you’re currently writing. Don’t be afraid to refactor code to use the right data representation—the type system will ensure you’ve covered all the places that need changing, and it will likely save you a headache later.</p></li><li><p><strong>Treat functions that return <code>m ()</code> with deep suspicion.</strong> Sometimes these are genuinely necessary, as they may perform an imperative effect with no meaningful result, but if the primary purpose of that effect is raising an error, it’s likely there’s a better way.</p></li><li><p><strong>Don’t be afraid to parse data in multiple passes.</strong> Avoiding shotgun parsing just means you shouldn’t act on the input data before it’s fully parsed, not that you can’t use some of the input data to decide how to parse other input data. Plenty of useful parsers are context-sensitive.</p></li><li><p><strong>Avoid denormalized representations of data, <em>especially</em> if it’s mutable.</strong> Duplicating the same data in multiple places introduces a trivially representable illegal state: the places getting out of sync. Strive for a single source of truth.</p><ul><li><p><strong>Keep denormalized representations of data behind abstraction boundaries.</strong> If denormalization is absolutely necessary, use encapsulation to ensure a small, trusted module holds sole responsibility for keeping the representations in sync.</p></li></ul></li><li><p><strong>Use abstract datatypes to make validators “look like” parsers.</strong> Sometimes, making an illegal state truly unrepresentable is just plain impractical given the tools Haskell provides, such as ensuring an integer is in a particular range. In that case, use an abstract <code>newtype</code> with a smart constructor to “fake” a parser from a validator.</p></li></ul><p>As always, use your best judgement. It probably isn’t worth breaking out <a href="https://hackage.haskell.org/package/singletons">singletons</a> and refactoring your entire application just to get rid of a single <code>error "impossible"</code> call somewhere—just make sure to treat those situations like the radioactive substance they are, and handle them with the appropriate care. If all else fails, at least leave a comment to document the invariant for whoever needs to modify the code next.</p><h2><a name="recap-reflection-and-related-reading"></a>Recap, reflection, and related reading</h2><p>That’s all, really. Hopefully this blog post proves that taking advantage of the Haskell type system doesn’t require a PhD, and it doesn’t even require using the latest and greatest of GHC’s shiny new language extensions—though they can certainly sometimes help! Sometimes the biggest obstacle to using Haskell to its fullest is simply being aware what options are available, and unfortunately, one downside of Haskell’s small community is a relative dearth of resources that document design patterns and techniques that have become tribal knowledge.</p><p>None of the ideas in this blog post are new. In fact, the core idea—“write total functions”—is conceptually quite simple. Despite that, I find it remarkably challenging to communicate actionable, practicable details about the way I write Haskell code. It’s easy to spend lots of time talking about abstract concepts—many of which are quite valuable!—without communicating anything useful about <em>process</em>. My hope is that this is a small step in that direction.</p><p>Sadly, I don’t know very many other resources on this particular topic, but I do know of one: I never hesitate to recommend Matt Parson’s fantastic blog post <a href="https://www.parsonsmatt.org/2017/10/11/type_safety_back_and_forth.html">Type Safety Back and Forth</a>. If you want another accessible perspective on these ideas, including another worked example, I’d highly encourage giving it a read. For a significantly more advanced take on many of these ideas, I can also recommend Matt Noonan’s 2018 paper <a href="https://kataskeue.com/gdp.pdf">Ghosts of Departed Proofs</a>, which outlines a handful of techniques for capturing more complex invariants in the type system than I have described here.</p><p>As a closing note, I want to say that doing the kind of refactoring described in this blog post is not always easy. The examples I’ve given are simple, but real life is often much less straightforward. Even for those experienced in type-driven design, it can be genuinely difficult to capture certain invariants in the type system, so do not consider it a personal failing if you cannot solve something the way you’d like! Consider the principles in this blog post ideals to strive for, not strict requirements to meet. All that matters is to try.</p><ol><li id="footnote-1"><p>Technically, in Haskell, this ignores “bottoms,” constructions that can inhabit <em>any</em> value. These aren’t “real” values (unlike <code>null</code> in some other languages)—they’re things like infinite loops or computations that raise exceptions—and in idiomatic Haskell, we usually try to avoid them, so reasoning that pretends they don’t exist still has value. But don’t take my word for it—I’ll let Danielsson et al. convince you that <a href="https://www.cs.ox.ac.uk/jeremy.gibbons/publications/fast+loose.pdf">Fast and Loose Reasoning is Morally Correct</a>. <a href="#footnote-ref-1-1">↩</a></p></li><li id="footnote-2"><p>In fact, <code>Data.List.NonEmpty</code> already provides a <code>head</code> function with this type, but just for the sake of illustration, we’ll reimplement it ourselves. <a href="#footnote-ref-2-1">↩</a></p></li><li id="footnote-3"><p>Sometimes it is necessary to perform some kind of authorization before parsing user input to avoid denial of service attacks, but that’s okay: authorization should have a relatively small surface area, and it shouldn’t cause any significant modifications to the state of your system. <a href="#footnote-ref-3-1">↩</a></p></li></ol></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Jiff: A brand new Datetime library for Rust, from the author of ripgrep (229 pts)]]></title>
            <link>https://github.com/BurntSushi/jiff</link>
            <guid>41031037</guid>
            <pubDate>Mon, 22 Jul 2024 04:57:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/BurntSushi/jiff">https://github.com/BurntSushi/jiff</a>, See on <a href="https://news.ycombinator.com/item?id=41031037">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">Jiff</h2><a id="user-content-jiff" aria-label="Permalink: Jiff" href="#jiff"></a></p>
<p dir="auto">Jiff is a datetime library for Rust that encourages you to jump into the
pit of success. The focus of this library is providing high level datetime
primitives that are difficult to misuse and have reasonable performance. Jiff
supports automatic and seamless integration with the Time Zone Database, DST
aware arithmetic and rounding, formatting and parsing zone aware datetimes
losslessly, opt-in Serde support and a whole lot more.</p>
<p dir="auto">Jiff takes enormous inspiration from <a href="https://tc39.es/proposal-temporal/docs/index.html" rel="nofollow">Temporal</a>, which is a <a href="https://tc39.es/" rel="nofollow">TC39</a> proposal to
improve datetime handling in JavaScript.</p>
<p dir="auto"><a href="https://github.com/BurntSushi/jiff/actions"><img src="https://github.com/BurntSushi/jiff/workflows/ci/badge.svg" alt="Build status"></a>
<a href="https://crates.io/crates/jiff" rel="nofollow"><img src="https://camo.githubusercontent.com/88d65ea09391f00b20fe1075d1e43f0a28b5fe605c2768cb4ec21af9fed1f0e6/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f6a6966662e737667" alt="Crates.io" data-canonical-src="https://img.shields.io/crates/v/jiff.svg"></a></p>
<p dir="auto">Dual-licensed under MIT or the <a href="https://unlicense.org/" rel="nofollow">UNLICENSE</a>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Documentation</h3><a id="user-content-documentation" aria-label="Permalink: Documentation" href="#documentation"></a></p>
<ul dir="auto">
<li><a href="https://docs.rs/jiff" rel="nofollow">API documentation on docs.rs</a></li>
<li><a href="https://github.com/BurntSushi/jiff/blob/master/COMPARE.md">Comparison with <code>chrono</code>, <code>time</code>, <code>hifitime</code> and <code>icu</code></a></li>
<li><a href="https://github.com/BurntSushi/jiff/blob/master/DESIGN.md">The API design rationale for Jiff</a></li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Example</h3><a id="user-content-example" aria-label="Permalink: Example" href="#example"></a></p>
<p dir="auto">Here is a quick example that shows how to parse a typical RFC 3339 instant,
convert it to a zone aware datetime, add a span of time and losslessly print
it:</p>
<div dir="auto" data-snippet-clipboard-copy-content="use jiff::{Timestamp, ToSpan};

fn main() -> Result<(), jiff::Error> {
    let time: Timestamp = &quot;2024-07-11T01:14:00Z&quot;.parse()?;
    let zoned = time.intz(&quot;America/New_York&quot;)?.checked_add(1.month().hours(2))?;
    assert_eq!(zoned.to_string(), &quot;2024-08-10T23:14:00-04:00[America/New_York]&quot;);
    // Or, if you want an RFC3339 formatted string:
    assert_eq!(zoned.timestamp().to_string(), &quot;2024-08-11T03:14:00Z&quot;);
    Ok(())
}"><pre><span>use</span> jiff<span>::</span><span>{</span><span>Timestamp</span><span>,</span> <span>ToSpan</span><span>}</span><span>;</span>

<span>fn</span> <span>main</span><span>(</span><span>)</span> -&gt; <span>Result</span><span>&lt;</span><span>(</span><span>)</span><span>,</span> jiff<span>::</span><span>Error</span><span>&gt;</span> <span>{</span>
    <span>let</span> time<span>:</span> <span>Timestamp</span> = <span>"2024-07-11T01:14:00Z"</span><span>.</span><span>parse</span><span>(</span><span>)</span>?<span>;</span>
    <span>let</span> zoned = time<span>.</span><span>intz</span><span>(</span><span>"America/New_York"</span><span>)</span>?<span>.</span><span>checked_add</span><span>(</span><span>1</span><span>.</span><span>month</span><span>(</span><span>)</span><span>.</span><span>hours</span><span>(</span><span>2</span><span>)</span><span>)</span>?<span>;</span>
    <span>assert_eq</span><span>!</span><span>(</span>zoned.to_string<span>(</span><span>)</span>, <span>"2024-08-10T23:14:00-04:00[America/New_York]"</span><span>)</span><span>;</span>
    <span>// Or, if you want an RFC3339 formatted string:</span>
    <span>assert_eq</span><span>!</span><span>(</span>zoned.timestamp<span>(</span><span>)</span>.to_string<span>(</span><span>)</span>, <span>"2024-08-11T03:14:00Z"</span><span>)</span><span>;</span>
    <span>Ok</span><span>(</span><span>(</span><span>)</span><span>)</span>
<span>}</span></pre></div>
<p dir="auto">There are many more examples in the <a href="https://docs.rs/jiff" rel="nofollow">documentation</a>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Usage</h3><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<p dir="auto">Jiff is <a href="https://crates.io/crates/jiff" rel="nofollow">on crates.io</a> and can be
used by adding <code>jiff</code> to your dependencies in your project's <code>Cargo.toml</code>.
Or more simply, just run <code>cargo add jiff</code>.</p>
<p dir="auto">Here is a complete example that creates a new Rust project, adds a dependency
on <code>jiff</code>, creates the source code for a simple datetime program and then runs
it.</p>
<p dir="auto">First, create the project in a new directory:</p>
<div data-snippet-clipboard-copy-content="$ mkdir jiff-example
$ cd jiff-example
$ cargo init"><pre lang="text"><code>$ mkdir jiff-example
$ cd jiff-example
$ cargo init
</code></pre></div>
<p dir="auto">Second, add a dependency on <code>jiff</code>:</p>

<p dir="auto">Third, edit <code>src/main.rs</code>. Delete what's there and replace it with this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="use jiff::{Unit, Zoned};

fn main() -> Result<(), jiff::Error> {
    let now = Zoned::now().round(Unit::Second)?;
    println!(&quot;{now}&quot;);
    Ok(())
}"><pre><span>use</span> jiff<span>::</span><span>{</span><span>Unit</span><span>,</span> <span>Zoned</span><span>}</span><span>;</span>

<span>fn</span> <span>main</span><span>(</span><span>)</span> -&gt; <span>Result</span><span>&lt;</span><span>(</span><span>)</span><span>,</span> jiff<span>::</span><span>Error</span><span>&gt;</span> <span>{</span>
    <span>let</span> now = <span>Zoned</span><span>::</span><span>now</span><span>(</span><span>)</span><span>.</span><span>round</span><span>(</span><span>Unit</span><span>::</span><span>Second</span><span>)</span>?<span>;</span>
    <span>println</span><span>!</span><span>(</span><span>"{now}"</span><span>)</span><span>;</span>
    <span>Ok</span><span>(</span><span>(</span><span>)</span><span>)</span>
<span>}</span></pre></div>
<p dir="auto">Fourth, run it with <code>cargo run</code>:</p>
<div data-snippet-clipboard-copy-content="$ cargo run
   Compiling jiff v0.1.0 (/home/andrew/rust/jiff)
   Compiling jiff-play v0.1.0 (/home/andrew/tmp/scratch/rust/jiff-play)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 1.37s
     Running `target/debug/jiff-play`
2024-07-10T19:54:20-04:00[America/New_York]"><pre lang="text"><code>$ cargo run
   Compiling jiff v0.1.0 (/home/andrew/rust/jiff)
   Compiling jiff-play v0.1.0 (/home/andrew/tmp/scratch/rust/jiff-play)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 1.37s
     Running `target/debug/jiff-play`
2024-07-10T19:54:20-04:00[America/New_York]
</code></pre></div>
<p dir="auto">The first time you run the program will show more output like above. But
subsequent runs shouldn't have to re-compile the dependencies.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Crate features</h3><a id="user-content-crate-features" aria-label="Permalink: Crate features" href="#crate-features"></a></p>
<p dir="auto">Jiff has several crate features for customizing support for Rust's standard
library, <code>serde</code> support and whether to embed a copy of the Time Zone Database
into your binary.</p>
<p dir="auto">The "<a href="https://docs.rs/jiff/#crate-features" rel="nofollow">crate features</a>" section of the
documentation lists the full set of supported features.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Future plans</h3><a id="user-content-future-plans" aria-label="Permalink: Future plans" href="#future-plans"></a></p>
<p dir="auto">My plan is to iterate on the Jiff API and make occasional breaking change
releases over the next ~year. Assuming API breaking changes have settled down
after about one year's time, my plan will be to release Jiff 1.0 and commit to
the API for a long period of time. (Measured, at least, in years.)</p>
<p dir="auto">The purpose of this plan is to get Jiff to a 1.0 stable state as quickly as
possible. The reason is so that others feel comfortable relying on Jiff as
a public dependency that won't cause ecosystem churn.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Performance</h3><a id="user-content-performance" aria-label="Permalink: Performance" href="#performance"></a></p>
<p dir="auto">The most important design goal of Jiff is to be a high level datetime library
that makes it hard to do the wrong thing. Second to that is performance. Jiff
should have reasonable performance, but there are likely areas in which it
could improve. See the <code>bench</code> directory for benchmarks.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Platform support</h3><a id="user-content-platform-support" aria-label="Permalink: Platform support" href="#platform-support"></a></p>
<p dir="auto">The question of platform support in the context of datetime libraries comes up
primarily in relation to time zone support. Specifically:</p>
<ul dir="auto">
<li>How should Jiff determine the time zone transitions for an IANA time zone
identifier like <code>Antarctica/Troll</code>?</li>
<li>How should Jiff determine the default time zone for the current system?</li>
</ul>
<p dir="auto">Both of these require some level of platform interaction.</p>
<p dir="auto">For discovering time zone transition data, Jiff relies on the
<a href="https://en.wikipedia.org/wiki/Tz_database" rel="nofollow">IANA Time Zone Database</a>. On Unix systems, this is usually found at
<code>/usr/share/zoneinfo</code>, although it can be configured via the <code>TZDIR</code>
environment variable (which Jiff respects). On Windows, Jiff will automatically
embed a copy of the time zone database into the compiled library.</p>
<p dir="auto">For discovering the system time zone, Jiff reads <code>/etc/localtime</code> on Unix. On
Windows, Jiff reads the Windows-specific time zone identifier via
<a href="https://learn.microsoft.com/en-us/windows/win32/api/timezoneapi/nf-timezoneapi-getdynamictimezoneinformation" rel="nofollow"><code>GetDynamicTimeZoneInformation</code></a> and then maps it to an IANA time zone
identifier via Unicode's <a href="https://github.com/unicode-org/cldr/raw/main/common/supplemental/windowsZones.xml">CLDR XML data</a>.</p>
<p dir="auto">I expect Jiff to grow more support for other platforms over time. Please file
issues, although I will likely be reliant on contributor pull requests for more
obscure platforms that aren't easy for me to test.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Dependencies</h3><a id="user-content-dependencies" aria-label="Permalink: Dependencies" href="#dependencies"></a></p>
<p dir="auto">At time of writing, it is no accident that Jiff has zero dependencies on Unix.
In general, my philosophy on adding new dependencies in an ecosystem crate like
Jiff is very conservative. I consider there to be two primary use cases for
adding new dependencies:</p>
<ol dir="auto">
<li>When a dependency is <em>practically</em> required in order to interact with a
platform. For example, <code>windows-sys</code> for discovering the system time zone on
Windows.</li>
<li>When a dependency is necessary for inter-operability. For example, <code>serde</code>.
But even here, I expect to be conservative, where I'm generally only willing
to depend on things that have fewer breaking change releases than Jiff.</li>
</ol>
<p dir="auto">A secondary use case for new dependencies is if Jiff gets split into multiple
crates. I did a similar thing for the <code>regex</code> crate for very compelling
reasons. It is possible that will happen with Jiff as well, although there are
no plans for that. And in general, I expect the number of crates to stay small,
if only to make keep maintenance lightweight. (Managing lots of semver API
boundaries has a lot of overhead in my experience.)</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Minimum Rust version policy</h3><a id="user-content-minimum-rust-version-policy" aria-label="Permalink: Minimum Rust version policy" href="#minimum-rust-version-policy"></a></p>
<p dir="auto">This crate's minimum supported <code>rustc</code> version is <code>1.70.0</code>.</p>
<p dir="auto">The policy is that the minimum Rust version required to use this crate can be
increased in minor version updates. For example, if jiff 1.0 requires Rust
1.20.0, then jiff 1.0.z for all values of <code>z</code> will also require Rust 1.20.0 or
newer. However, jiff 1.y for <code>y &gt; 0</code> may require a newer minimum version of
Rust.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How to Become a Registrar (112 pts)]]></title>
            <link>https://www.icann.org/resources/pages/accreditation-2012-02-25-en</link>
            <guid>41030608</guid>
            <pubDate>Mon, 22 Jul 2024 03:14:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.icann.org/resources/pages/accreditation-2012-02-25-en">https://www.icann.org/resources/pages/accreditation-2012-02-25-en</a>, See on <a href="https://news.ycombinator.com/item?id=41030608">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="ltr" external_links="" id="main-content">

<p>The process of becoming an ICANN-accredited registrar includes several steps. The following summary of these steps is intended to guide you through this process.</p>
<ol>
	<li>
		<p>Review the Qualification Criteria described in the <a href="https://www.icann.org/en/resources/registrars/accreditation/policy-statement#IIA">Statement of Registrar Accreditation Policy</a>.</p>
	</li>
	<li>
		<p>Review the <a href="https://www.icann.org/en/resources/registrars/accreditation/financials">Financial Considerations</a> that apply to become an ICANN-accredited registrar.</p>
	</li>
	<li>
		<p>Review the <a href="https://www.icann.org/en/resources/registrars/governing-policies">Governing Agreements and Policies</a> that apply to every ICANN-accredited registrar.</p>
	</li>
	<li>
		<p>Apply for Registrar Accreditation. To apply, you must complete an ICANN <a href="https://www.icann.org/en/resources/registrars/accreditation/application-form.docx">application form</a>. To assist us in processing your application as quickly as possible, please submit very specific, thorough answers and all necessary supporting documents. The main reasons for delays in the processing of an application include missing supporting documents and incomplete or vague answers to application questions. Questions you may have concerning your application should be addressed to <a href="mailto:accredit@icann.org">accredit@icann.org</a>.</p>
	</li>
	<li>
		<p>After completing its review of your application and conducting any necessary follow-up inquiries and research, ICANN will inform you by e-mail of its decision on your accreditation application.</p>
	</li>
</ol>
<p>If your accreditation application is approved, the following additional steps must be completed:</p>
<ol start="6">
	<li>
		<p>Sign a Registrar Accreditation Agreement with ICANN and pay the accreditation fee. The <a href="https://www.icann.org/resources/pages/registrars/registrars-en">current version of the agreement</a> is a standard document that all registrars sign with ICANN. An ICANN accreditation is currently granted for a term of 5 years. (ICANN will generate and send your Agreement, along with an invoice for the annual fixed portion of the accreditation fee).</p>
	</li>
	<li>
		<p>Sign a <a href="https://www.icann.org/resources/pages/registrar-data-escrow-2015-12-01-en">Registrar Data Escrow</a> (RDE) Agreement with an ICANN-Designated Registrar Data Escrow Agent, or select an ICANN-Approved Registrar Data Escrow Agent (at your own cost). As stated in paragraph 3.6 of the RAA, all ICANN-accredited registrars are required to deposit certain gTLD registration information. Executing both the RAA and RDE Agreement with ICANN are the last steps in the ICANN registrar accreditation process.</p>
	</li>
	<li>
		<p>Once you return the signed RAA and RDE Agreement and pay your accreditation fee, ICANN will notify the applicable registries of your accreditation and add you to the list of registrars at <a href="https://www.icann.org/en/accredited-registrars">https://www.icann.org/en/accredited-registrars</a>. You should work out the contract, financial, and technical details with the registry operators.</p>
	</li>
	<li>
		<p>Complete the preparation of your registration agreement for Registered Name Holders. The ICANN Registrar Accreditation Agreement requires that certain specific provisions be included in this registration agreement. In addition, ICANN adopted a <a href="https://www.icann.org/en/help/dndr/udrp">Uniform Domain-Name Dispute-Resolution Policy</a>, which all accredited registrars are required to follow. You may also wish to implement a <a href="https://www.icann.org/en/resources/registrars/accreditation/model-privacy-policy">Privacy Policy</a> to comply with the requirements of your accreditation agreement.</p>
	</li>
	<li>
		<p>Inaugurate your service. After the above steps have been completed, you should be able to begin offering services to the public as soon as you pass the testing process and become operational with the respective registries for which you have been accredited.</p>
	</li>
	<li>
		<p><strong>Help in the Registrar Accreditation Application Process</strong></p>
		<p>For help completing your ICANN Registrar Accreditation Application, or for general questions about becoming an ICANN-accredited registrar, please submit email inquiries to <a href="mailto:accredit@icann.org">accredit@icann.org</a>.</p>
	</li>
</ol>



</div><div><p>Domain Name System</p><p>Internationalized Domain Name ,IDN,"IDNs are domain names that include characters used in the local representation of languages that are not written with the twenty-six letters of the basic Latin alphabet ""a-z"". An IDN can contain Latin letters with diacritical marks, as required by many European languages, or may consist of characters from non-Latin scripts such as Arabic or Chinese. Many languages also use other types of digits than the European ""0-9"". The basic Latin alphabet together with the European-Arabic digits are, for the purpose of domain names, termed ""ASCII characters"" (ASCII = American Standard Code for Information Interchange). These are also included in the broader range of ""Unicode characters"" that provides the basis for IDNs. The ""hostname rule"" requires that all domain names of the type under consideration here are stored in the DNS using only the ASCII characters listed above, with the one further addition of the hyphen ""-"". The Unicode form of an IDN therefore requires special encoding before it is entered into the DNS. The following terminology is used when distinguishing between these forms: A domain name consists of a series of ""labels"" (separated by ""dots""). The ASCII form of an IDN label is termed an ""A-label"". All operations defined in the DNS protocol use A-labels exclusively. The Unicode form, which a user expects to be displayed, is termed a ""U-label"". The difference may be illustrated with the Hindi word for ""test"" — परीका — appearing here as a U-label would (in the Devanagari script). A special form of ""ASCII compatible encoding"" (abbreviated ACE) is applied to this to produce the corresponding A-label: xn--11b5bs1di. A domain name that only includes ASCII letters, digits, and hyphens is termed an ""LDH label"". Although the definitions of A-labels and LDH-labels overlap, a name consisting exclusively of LDH labels, such as""icann.org"" is not an IDN."</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Apollo DN10000: Quad CPU/128Mb RAM workstation from 1988 [pdf] (112 pts)]]></title>
            <link>https://jim.rees.org/apollo-archive/marketing/1988-ApolloDN10000ProductBrochure.pdf</link>
            <guid>41029987</guid>
            <pubDate>Mon, 22 Jul 2024 01:12:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jim.rees.org/apollo-archive/marketing/1988-ApolloDN10000ProductBrochure.pdf">https://jim.rees.org/apollo-archive/marketing/1988-ApolloDN10000ProductBrochure.pdf</a>, See on <a href="https://news.ycombinator.com/item?id=41029987">Hacker News</a></p>
&lt;Not HTML&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Pin (254 pts)]]></title>
            <link>https://without.boats/blog/pin/</link>
            <guid>41029287</guid>
            <pubDate>Sun, 21 Jul 2024 23:23:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://without.boats/blog/pin/">https://without.boats/blog/pin/</a>, See on <a href="https://news.ycombinator.com/item?id=41029287">Hacker News</a></p>
<div id="readability-page-1" class="page"><section><p>The <code>Pin</code> type (and the concept of <em>pinning</em> in general) is a foundational building block on which
the rest of the the Rust async ecosystem stands. Unfortunately, it has also been one of the least
accessible and most misunderstood elements of async Rust. This post is meant to explain what <code>Pin</code>
achieves, how it came to be, and what the current problem with <code>Pin</code> is.</p><p>There was an interesting <a href="https://www.modular.com/blog/mojo-vs-rust-is-mojo-faster-than-rust">post</a> a few months ago on the blog of the company Modular, which is
developing a new language called Mojo. In a brief section discussing <code>Pin</code> in Rust, I found that it
very succinctly captured the zeitgeist of the public discussion of the subject:</p><blockquote><p>In Rust, there is no concept of value identity. For a self-referential struct pointing to its own
member, that data can become invalid if the object moves, as it’ll be pointing to the old location
in memory. This creates a complexity spike, particularly in parts of async Rust where futures need
to be self-referential and store state, so you must wrap Self with Pin to guarantee it’s not going
to move. In Mojo, objects have an identity so referring to self.foo will always return the correct
location in memory, without any additional complexity required for the programmer.</p></blockquote><p>Some aspects of these remarks confuse me. The term “value identity” is not defined anywhere in this
post, nor can I find it elsewhere in Mojo’s documentation, so I’m not clear on how Modular claims
that Mojo solves the problem that <code>Pin</code> is meant to solve. Despite this, I do think the criticism of
<code>Pin</code>’s usability is well stated: there is indeed a “complexity spike” when a user is forced to
interact with it. The phrase I would use is actually a “complexity cliff,” as in the user suddenly
finds themself thrown off a cliff into a sea of complex, unidiomatic APIs they don’t understand.
This is a problem and it would be very valuable to Rust users if the problem were solved.</p><p>As it happens, this little corner of Rust is my mess; adding <code>Pin</code> to Rust to support
self-referential types was my idea. I have ideas of how this complexity spike could be resolved,
which I will elaborate in a subsequent post. Before I can get there though I need to first try to
explain, as efficiently as I know how, what <code>Pin</code> accomplishes, how it came to exist, and why it is
currently difficult to use.</p><h2 id="requirements">Requirements</h2><p>To explain why <code>Pin</code> exists, we need to step back to the original development of async/await. The
problem we were trying to solve was that in order to support references in async functions, we
needed to be able to store those references inside of a <code>Future</code>. The problem was that those
references might be <em>self-references</em>, meaning they point to other fields of the same object.</p><p>Consider this toy example:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>async</span><span> </span><span>fn</span> <span>foo</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>(</span><span>z</span>: <span>&amp;</span><span>'a</span> <span>mut</span><span> </span><span>i32</span><span>)</span><span> </span><span>{</span><span> </span><span>..</span><span>.</span><span> </span><span>}</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>async</span><span> </span><span>fn</span> <span>bar</span><span>(</span><span>x</span>: <span>i32</span><span>,</span><span> </span><span>y</span>: <span>i32</span><span>)</span><span> </span>-&gt; <span>i32</span> <span>{</span><span>
</span></span></span><span><span><span>    </span><span>let</span><span> </span><span>mut</span><span> </span><span>z</span><span> </span><span>=</span><span> </span><span>x</span><span> </span><span>+</span><span> </span><span>y</span><span>;</span><span>
</span></span></span><span><span><span>    </span><span>foo</span><span>(</span><span>&amp;</span><span>mut</span><span> </span><span>z</span><span>).</span><span>await</span><span>;</span><span>
</span></span></span><span><span><span>    </span><span>z</span><span>
</span></span></span><span><span><span></span><span>}</span><span>
</span></span></span></code></pre></div><p>Both of these functions evaluate to an anonymous future type; the future type that an async function
evaluates to has a state for each possible step at which it could pause: when it starts, every await
point, and when it finishes.</p><p>For the purposes of our example, we will call the anonymous future that <code>foo</code> evaluates to
<code>Foo&lt;'a&gt;</code> (the <code>'a</code> being the lifetime of the <code>z</code> argument) and the anonymous future that <code>bar</code>
evaluates to <code>Bar</code>. Let’s ask ourselves, what would the internal states of <code>Bar</code> be? Something like
this:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>enum</span> <span>Bar</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>    </span><span>// When it starts, it contains only its arguments
</span></span></span><span><span><span></span><span>    </span><span>Start</span><span> </span><span>{</span><span> </span><span>x</span>: <span>i32</span><span>,</span><span> </span><span>y</span>: <span>i32</span> <span>},</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>    </span><span>// At the first await, it must contain `z` and the `Foo` future
</span></span></span><span><span><span></span><span>    </span><span>// that references `z`
</span></span></span><span><span><span></span><span>    </span><span>FirstAwait</span><span> </span><span>{</span><span> </span><span>z</span>: <span>i32</span><span>,</span><span> </span><span>foo</span>: <span>Foo</span><span>&lt;</span><span>'</span><span>?&gt;</span><span> </span><span>}</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>    </span><span>// When its finished it needs no data
</span></span></span><span><span><span></span><span>    </span><span>Complete</span><span>,</span><span>
</span></span></span><span><span><span></span><span>}</span><span>
</span></span></span></code></pre></div><p>Note the <code>'?</code> in for the lifetime of the <code>Foo&lt;'_&gt;</code> future: what lifetime could that be? It isn’t a
lifetime that outlives <code>Bar</code>, <code>Bar</code> has no lifetimes. The <code>Foo</code> object instead borrows the <code>z</code> field
of <code>Bar</code>, which is stored along side it in the same struct. This is why these future types are said
to be “self-referential:” they contain fields which reference other fields in themselves.</p><p>Here we must make a clarifying distinction: the goal of <code>Pin</code> is <em>not</em> to allow users to define
their own self-referential type in safe Rust. Today, if you tried to define <code>Bar</code> by hand, there
is really no safe way to construct its <code>FirstAwait</code> variant. Making this possible would be a worthy
objective, but it is orthogonal to the goal of <code>Pin</code>. The goal of <code>Pin</code> is to make it safe to
<em>manipulate</em> self-referential types generated by the compiler from an async function or implemented
with unsafe code in a runtime like tokio.</p><p>However a self-referential type has been defined, once it exists it presents a problem. Imagine that
<code>Bar</code> has been put into the <code>FirstAwait</code> state, so it contains references to its own <code>z</code> field. If
you were to move <code>Bar</code>, those references would now dangle and point to dead memory, which may be
re-used for a different value. Therefore, it is essential that once Bar could be put into the
<code>FirstAwait</code> state, it is not moved again. Prior to the development of <code>Pin</code>, any object in Rust
could be moved if you had ownership of it, or even if you had a mutable reference to it. So this was
the problem that we needed to solve: we needed to express the requirement that from a certain point
an object cannot be moved.</p><h2 id="non-solutions-move-constructors-and-offset-pointers">Non-solutions: move constructors and offset pointers</h2><p>Before we continue, I want to spend a moment to discuss two solutions to the problem which are
often proposed but don’t work (at least in Rust). These both take a rather different approach from
the approach taken by <code>Pin</code>: instead of saying the value cannot be moved again, they try to make it
so that self-referential values can be moved after all.</p><p>The first of these is the move constructor. The idea is that you would run some code whenever a
value is moved, similar to the destructor that is run when the value is dropped. This code could
then “fix-up” any self-referential pointers so that they now point to the new location. I’ve
discussed this in the past in my <a href="https://without.boats/blog/why-async-rust">post</a> about the history of async Rust, but this is
not a viable solution because in Rust, those pointers could exist anywhere, not just “inside” the
value being moved. For example, you could instead have a vector of pointers into your own state, and
so the move constructor would need to be able to trace into that vector. It ultimately requires the
same kind of runtime memory management as garbage collection, which wasn’t viable for Rust.</p><p>The other reason move constructors don’t work is that Rust very early on affirmed that it would
never have move constructors, and a lot of unsafe code exists which assumes it is possible to move
values by just copying their memory. Adding move constructors would be a breaking change for Rust.</p><p>The other non-solution that is sometimes proposed is the offset pointer. The idea in this case is
that rather than compile self-references to normal references, they are compiled to offsets relative
to the address of the self-referential object that contains them. This does not work because it is
not possible to determine at compile time if a reference will be a self-reference or not: its
possible for the same value to be both in different branches. For example, here’s a modified version
of <code>bar</code> from before:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>async</span><span> </span><span>fn</span> <span>bar</span><span>(</span><span>x</span>: <span>i32</span><span>,</span><span> </span><span>y</span>: <span>i32</span><span>,</span><span> </span><span>mut</span><span> </span><span>z</span>: <span>&amp;</span><span>mut</span><span> </span><span>i32</span><span>)</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>    </span><span>let</span><span> </span><span>mut</span><span> </span><span>z2</span><span> </span><span>=</span><span> </span><span>x</span><span> </span><span>+</span><span> </span><span>y</span><span>;</span><span>
</span></span></span><span><span><span>    </span><span>if</span><span> </span><span>random</span><span>()</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>        </span><span>z</span><span> </span><span>=</span><span> </span><span>&amp;</span><span>mut</span><span> </span><span>z2</span><span>;</span><span>
</span></span></span><span><span><span>    </span><span>}</span><span>
</span></span></span><span><span><span>    </span><span>foo</span><span>(</span><span>z</span><span>).</span><span>await</span><span>;</span><span>
</span></span></span><span><span><span></span><span>}</span><span>
</span></span></span></code></pre></div><p>By the time you call <code>foo</code>, <code>z</code> may be a pointer into the same object or it may be a pointer
elsewhere. Its not possible to determine at compile time. You would need to compile references to
some sort of enum of offset and reference; this was deemed unrealistic when we were working on
async/await.</p><h2 id="the-pinned-typestate">The “pinned typestate”</h2><p>Having eliminated any option to make these objects movable, we therefore have a requirement that
the object be <em>immovable</em>. But we need to clarify exactly what the requirements are, because people
often make the wrong assumption about what is required.</p><p>Most importantly, these objects are not meant to be <em>always immovable</em>. Instead, they are meant to
be freely moved for a certain period of their lifecycle, and at a certain point they should stop
being moved from then on. That way, you can move a self-referential future around as you compose it
with other futures until eventually you put it into the place it will live for as long as you poll
it. So we needed a way to express that an object is no longer allowed to be moved; in other words,
that it is “pinned in place.”</p><p>While we were experimenting with APIs for expressing this requirement, Ralf Jung was kind enough to
formalize the idea. In Ralf’s model, even before the work on async/await, objects could be in one of
two “typestates”: they are “owned,” in which state they can be moved freely, or they are “shared,”
in which state they cannot be moved for some lifetime (because they have references pointing to
them). To support self-referential future types, Ralf’s model gained a third typestate, which is
called “pinned.”</p><p>Once an object enters the pinned typestate, it can never be moved again. More specifically, its
memory cannot be invalidated without first executing its destructor. This definition also includes
some other edge cases, like freeing memory without running the destructor, but the main way you
invalidate an object’s memory without the destructor running is by moving the object to a new
location. The easiest way to understand the pinned typestate is to think of it as requiring that the
object never is moved again.</p><p>Another fact about the pinned typestate is that for most types it is completely irrelevant. If the
value of type can never contain any self-references, pinning it is useless. So for most types of
objects, one would want types to be able to opt out of ever entering the pinned typestate so that
you <em>can</em> move them again if you want.</p><p>There is a more detailed description of the pinned typestate in the formal model of Rust on Ralf’s
<a href="https://www.ralfj.de/blog/2018/04/05/a-formal-look-at-pinning.html">blog</a> for people who are interested. But having understood the requirements of pinning (first
informally, and then formally by Ralf), we had the problem of finding the best way to represent an
object entering the pinned typestate in the surface language of Rust. Ralf’s model describes the
semantics of the language, but doesn’t specify a user-facing API or syntax. The solution that we
ended up with was the <code>Pin</code> type, but it wasn’t the first solution we tried.</p><h2 id="move"><code>?Move</code></h2><p>Before we tried <code>Pin</code>, we tried a solution based on a new trait which we called <code>Move</code>. The idea was
that most types would implement <code>Move</code>, and nothing about them would change, but any type that could
contain self-references would not implement <code>Move</code>. For these types which don’t implement <code>Move</code>,
whenever you take a reference to a value of that type, that value enters the pinned typestate and no
longer can be moved.</p><p>This definition is at the same time somewhat complex - people often assume <code>Move</code> controls moving at
all, which wasn’t the original proposal - and also in other ways somewhat intuitive - you can’t
possible store a self-reference in a value without taking a reference to that value to store, so
tying the transition to the pinned typestate to the taking of a reference provides a straightforward
guarantee of safety. And the check for this could be implemented automatically in the compiler: for
types that don’t implement <code>Move</code>, disallow moving values of those types after they’ve been
referenced in the same way you disallow moving values of non-<code>Copy</code> types after they’ve been moved.
This behavior was even implemented in a branch.</p><p>The design has one fundamental limitation, which is that sometimes you want to take a reference to
a value that will later be self-referential without pinning it in place. For example, maybe you want
to store it briefly in an <code>Option</code> and then use <code>Option::take</code> to take it away. This would probably
be the most significant problem with this original <code>Move</code> trait, but we didn’t even get to the point
of really identifying that problem, because we discovered early on that adding <code>Move</code> would not be a
backward compatible change.</p><p>I’ve written about this <a href="https://without.boats/blog/changing-the-rules-of-rust">before</a>, but let me reiterate. There are two kinds of
automatically implemented “marker traits” in Rust:</p><ol><li><strong>Auto traits:</strong> these are automatically implemented for types if all their fields implement
them. Major examples include <code>Send</code> and <code>Sync</code>.</li><li><strong>?Traits:</strong> these are automatically implemented for types if all their fields implement them,
and generic parameters are assumed to implement them as well unless they explicitly opt out. The
only example of this is <code>?Sized</code>.</li></ol><p>We knew all along that we couldn’t make <code>Move</code> an auto trait, because there are stable APIs that
depend on the fact that you can always move out of a mutable reference. The classic example of this
is <a href="https://doc.rust-lang.org/std/mem/fn.swap.html">mem::swap</a>, which swaps the location of two values of the same type. You can’t allow
swapping types that don’t implement <code>Move</code>, but there’s no <code>Move</code> bound on that API, and adding a
new bound to it would be a breaking change.</p><p>Our assumption, therefore, was that we would need to add <code>Move</code> as a ?Trait: <code>?Move</code>. By default,
all generics would be assumed to be <code>Move</code>, but if an API doesn’t require the ability to move the
parameter it can add a <code>T: ?Move</code> bound to the API. This was already not very appealing: a lot of
APIs don’t need the value to be movable and would presumably gain a <code>?Move</code> bound, making Rust
documentation harder to understand across the board. But the whole plan went down with the fact that
adding <code>Move</code> as a ?Trait was <em>also</em> not backward compatible.</p><p>The problem is with associated types: the place to add ?Trait bounds to associated types is at the
trait’s definition site. If the associated type of a trait does not have a ?Trait bound, all code
which uses that trait is allowed to assume that the associated type implements that trait. Moreover,
relaxing that bound on an existing trait would be a breaking change, because code is allowed to
exist which relies on that bound</p><p>Here is an example using <code>IntoFuture</code>, which assumes that the associated future type has the
behavior of a type that implements <code>Move</code>:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>swap_into_future</span><span>&lt;</span><span>T</span>: <span>IntoFuture</span><span>&gt;</span><span>(</span><span>into_f1</span>: <span>T</span><span>,</span><span> </span><span>into_f2</span>: <span>T</span><span>)</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>    </span><span>let</span><span> </span><span>mut</span><span> </span><span>f1</span><span> </span><span>=</span><span> </span><span>into_f1</span><span>.</span><span>into_future</span><span>();</span><span>
</span></span></span><span><span><span>    </span><span>let</span><span> </span><span>mut</span><span> </span><span>f2</span><span> </span><span>=</span><span> </span><span>into_f2</span><span>.</span><span>into_future</span><span>();</span><span>
</span></span></span><span><span><span>    </span><span>// This would become an error if you add
</span></span></span><span><span><span></span><span>    </span><span>// `type IntoFuture: ?Move` to the trait:
</span></span></span><span><span><span></span><span>    </span><span>mem</span>::<span>swap</span><span>(</span><span>&amp;</span><span>mut</span><span> </span><span>f1</span><span>,</span><span> </span><span>&amp;</span><span>mut</span><span> </span><span>f2</span><span>);</span><span>
</span></span></span><span><span><span></span><span>}</span><span>
</span></span></span></code></pre></div><p>This problem is widespread, because many fundamental operators involve associated types. For
example, you could not even have a mutable reference to a <code>?Move</code> type implement <code>DerefMut</code>, because
the target of a pointer is an associated type:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>swap_derefs</span><span>&lt;</span><span>T</span>: <span>DerefMut</span><span>&lt;</span><span>Target</span>: <span>Sized</span><span>&gt;&gt;</span><span>(</span><span>mut</span><span> </span><span>r1</span>: <span>T</span><span>,</span><span> </span><span>mut</span><span> </span><span>r2</span>: <span>T</span><span>)</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>    </span><span>// This would become an error if you add
</span></span></span><span><span><span></span><span>    </span><span>// `type Target: ?Move` to the trait:
</span></span></span><span><span><span></span><span>    </span><span>mem</span>::<span>swap</span><span>(</span><span>&amp;</span><span>mut</span><span> </span><span>*</span><span>r1</span><span>,</span><span> </span><span>&amp;</span><span>mut</span><span> </span><span>*</span><span>r2</span><span>);</span><span>
</span></span></span><span><span><span></span><span>}</span><span>
</span></span></span></code></pre></div><p>The same is true of the return type of a function, the item of an iterator, the value returned by
the index operators, by the arithmetic operators, and so on. It is simply not backward compatible to
add another new ?Trait, and an edition cannot be easily used to solve the problem, because it is
necessary that the interfaces of traits remain the same so that two crates in different editions can
be composed together.</p><h2 id="pin"><code>Pin</code></h2><p>Given that limitation, we set out to solve the problem in a completely different direction. Instead
of making the pinned typestate a property of the object’s type which it enters whenever it is
referenced, we designed a new category of reference which puts the object into the pinned typestate
when the reference is created. This is represented with the <code>Pin</code> type.</p><p><code>Pin</code> is a wrapper type that can wrap any kind of pointer (both the built-in reference types and
library-defined “smart pointers” like <code>Box</code>). It means that that pointer puts its target into the
pinned typestate so it must never be moved again. To make the changes necessary as minimal as
possible, we implemented this as a library API, rather than having immovability enforced by the
compiler. This means that when code actually needs to mutate the object that is pinned, it must use
an unsafe API get access to it and guarantee that the object is not moved through that ordinary
mutable reference.</p><p>Since most types don’t have a meaningful difference between the pinned typestate and normal, the
<code>Unpin</code> auto trait was added. This allows getting a mutable reference from a pinned pointer without
unsafe code if the type can’t be self-referential. It’s perfectly safe to move the object out of a
<code>Pin</code> if it implements <code>Unpin</code>. This is a lot like <code>Move</code>, but by tying this behavior only to pinned
pointers, we avoid the issue of backward compatibility as well as the original problem that you
couldn’t reference a <code>?Move</code> object without pinning it in place. Because pinning only applies to
pinned pointers, ordinary unpinned references still work just fine with types that are not <code>Unpin</code>.</p><p>There are more details in the documentation for the <a href="https://doc.rust-lang.org/std/pin/struct.Pin.html">Pin</a> type and for the
<a href="https://doc.rust-lang.org/std/pin/index.html">pin</a> module, which over the years have grown into a comprehensive and clear
explanation of pinning as it exists in Rust today.</p><p>Of course, the biggest advantage of the <code>Pin</code> interface was that it was backward compatible to add.
Because all of the APIs that can move referenced data like <code>swap</code> require a mutable reference, once
you pin a object with <code>Pin</code> you can’t call them on that object anymore. But because the new pinned
typestate only applies to special pinned references, it doesn’t require breaking changes to the
rest of the Rust language. This is why we went forward with this design: it was possible to add
without breaking any existing code and violating Rust’s backward compatibility guarantees.</p><h2 id="the-problems-with-pin">The problems with <code>Pin</code></h2><p>Despite meeting our requirements in a backward compatible way, <code>Pin</code> has proven to have several
problems in terms of usability. It is indeed a “complexity spike” when users have to deal with
<code>Pin</code>. But what is the cause of this complexity?</p><p>One theory would be that the problem is that whereas the <code>Move</code> trait was to be enforced by the
compiler, the <code>Pin</code> trait requires unsafe code to mutate objects while they’re pinned. With the
<code>Move</code> trait, this was automatically enabled by marking mutating APIs which don’t move the object
<code>?Move</code>. To some extent this is true, but we should be careful not to exaggerate it. For example,
you can already assign to a pinned object using <a href="https://doc.rust-lang.org/std/pin/struct.Pin.html#method.set">Pin::set</a>, which is totally safe. And
code which actually needs to mutate pinned objects is actually rare: in general, that’s code
generated by the compiler when it lowers your async function to a future, not code you write
yourself.</p><p>Another theory (advanced by Yosh Wuyts <a href="https://lobste.rs/s/n2cpfi/ergonomic_self_referential_types_for#c_q2erme">here</a>) is that the reason <code>Pin</code> is difficult
to use is that its “conditional.” This also does not strike me as the problem. Plenty of things in
Rust and programming are “conditional” but are lauded as making programmers’ lives easier. For
example, non-lexical lifetimes were all about making lifetimes end at different point in different
branches of <em>a conditional</em>, and everyone sees this as making Rust easier to understand. Maybe there
was some naming issue that has made it hard to understand the relationship between <code>Pin</code> (a type)
and <code>Unpin</code> (a trait), but I don’t think this is the heart of the problem.</p><p>In my opinion, the problem with <code>Pin</code> is that it was implemented as a pure library type, whereas the
ordinary reference types have plenty of syntactic sugar and support as built-in types that are part
of the language. A lot of nice features that references have disappear when you are dealing with
pinned references. This makes the experience much worse, and more importantly breaks many users'
mental models, because they’ve built up an understanding of how references behave based on what the
compiler accepts, and similar code stops being accepted once you are dealing with pinned references.</p><p>A very prominent example is the notion of “reborrowing,” which normal mutable references have but
pinned references do not. Consider this: <code>&amp;mut T</code> does not implement <code>Copy</code>, and yet its perfectly
permissible to pass it as an argument multiple times in a row, like so:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>incr</span><span>(</span><span>x</span>: <span>&amp;</span><span>mut</span><span> </span><span>i32</span><span>)</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>    </span><span>*</span><span>x</span><span> </span><span>+=</span><span> </span><span>1</span><span>;</span><span>
</span></span></span><span><span><span></span><span>}</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>fn</span> <span>incr_twice</span><span>(</span><span>x</span>: <span>&amp;</span><span>mut</span><span> </span><span>i32</span><span>)</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>    </span><span>incr</span><span>(</span><span>x</span><span>);</span><span>
</span></span></span><span><span><span>    </span><span>incr</span><span>(</span><span>x</span><span>);</span><span>
</span></span></span><span><span><span></span><span>}</span><span>
</span></span></span></code></pre></div><p>It never occurs to most users to ask why this is allowed, but in fact it violates a basic rule of
Rust: types which don’t implement <code>Copy</code> can’t be moved more than once. The reason is that there is
an implicit coercion in the compiler called “reborrowing,” in which when mutable references are
used, it will functionally insert a “reborrow” (as if you wrote <code>&amp;mut *x</code> instead of <code>x</code>), to borrow
the reference again, instead of moving it.</p><p><code>Pin</code> does not have this affordance, because it is a normal library type that doesn’t implement
<code>Copy</code>. This means that when you use a <code>Pin&lt;&amp;mut T&gt;</code> more than once, you get an error about using
the value after a move or sometimes an even more inscrutable error about lifetimes. Instead, you
have to explicitly reborrow <code>Pin</code> using the <a href="https://doc.rust-lang.org/std/pin/struct.Pin.html#method.as_mut">Pin::as_mut</a> function. This difference is
the cause of a lot of confusion when users try to use <code>Pin</code>.</p><p>I could go on and on. Consider the example of <code>set</code> mentioned above: that its safe to assign to
<code>Pin</code>, but you need to use the <code>set</code> method. You can just assign to a mutable reference using a
dereference and the assignment operator. But this is not true of <code>Pin</code>, you need to learn the
special API. Many such special cases exist, and they are because <code>Pin</code> is a library type with no
support in the language’s syntax.</p><p>Undoubtedly the worst of problem in this category is the problem of “pinned projections.” A
“projection” is the fancy programming language term for a field access: “projecting” from an
object to a field of that object (I guess in the same sense that an awning might project out of a
wall). The problem of pinned projections is that it is challenging to take a pinned reference to an
object and get a pinned reference to a field of that object. There are third party crates like
<a href="https://crates.io/crates/pin-project-lite">pin-project-lite</a> to solve this problem, but they require learning a complex new
API involving macros, emphasizing the way that pinned references are much harder to use than
ordinary references because they are a library type.</p><p>The worst part of this is a very unfortunate interaction between pinned projections and the <code>Drop</code>
trait. The problem arises because <code>Drop::drop</code> takes a normal mutable reference. Consider this
possibility: you have a type which has a field that is a self-referential field. You pin project to
that field and poll it. Then, in the destructor, you move out of that field (because you now have
an unpinned mutable reference), pin that future to the stack, and poll it there. You’ve just
violated the pinning guarantees.</p><p>The solution that crates like pin-project-lite use is to restrict your ability to define a
destructor. This works alright in practice, but this very fact is additional complexity that has to
be documented when explaining what precisely the pinning guarantees are. Unfortunately, <code>Drop</code> was
stable before <code>Pin</code>, so we had to work around it.</p><h2 id="in-my-next-post">In my next post…</h2><p>Despite these problems of usability, <code>Pin</code> is my proudest accomplishment of my work on Rust. We
enabled users to compile async functions which contain arbitrary references safely into
self-referential objects; without this async/await would not have been nearly as usable a feature
as it has been, because references are a fundamental part of how users write Rust. And we did so in
a manner which was entirely backward compatible with the language that already existed. <code>Pin</code> is now
a fundamental component of a thriving ecosystem for high-performance network services and other use
cases of asynchronous programming.</p><p>But I do agree with the critics: <code>Pin</code> represents a complexity cliff and working with a pinned
reference is much harder than working with an ordinary reference. That’s why in a few days I will
turn to the subject of how <code>Pin</code> could be improved. The key concept is the notion of <em>pinned
places</em>.</p></section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[James C. Scott, author of Seeing Like a State, has died (174 pts)]]></title>
            <link>https://nitter.poast.org/GerardoMunck/status/1815059432382067053</link>
            <guid>41028887</guid>
            <pubDate>Sun, 21 Jul 2024 22:33:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://nitter.poast.org/GerardoMunck/status/1815059432382067053">https://nitter.poast.org/GerardoMunck/status/1815059432382067053</a>, See on <a href="https://news.ycombinator.com/item?id=41028887">Hacker News</a></p>
Couldn't get https://nitter.poast.org/GerardoMunck/status/1815059432382067053: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[When ChatGPT summarises, it does nothing of the kind (233 pts)]]></title>
            <link>https://ea.rna.nl/2024/05/27/when-chatgpt-summarises-it-actually-does-nothing-of-the-kind/</link>
            <guid>41027658</guid>
            <pubDate>Sun, 21 Jul 2024 19:56:40 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ea.rna.nl/2024/05/27/when-chatgpt-summarises-it-actually-does-nothing-of-the-kind/">https://ea.rna.nl/2024/05/27/when-chatgpt-summarises-it-actually-does-nothing-of-the-kind/</a>, See on <a href="https://news.ycombinator.com/item?id=41027658">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		
<p>I started looking into the foundations of ChatGPT and Friends a year ago and I’ve been writing and speaking about ChatGPT and Friends for about half a year now, resulting in <a href="https://ea.rna.nl/the-chatgpt-and-friends-collection/">this collection of explanations and illustrations</a> of what LLMs and other Generative AIs do, and especially attempting to counter the hype and fever with some cool realities. It sometimes feels like trying to convince people that <a href="https://en.wikipedia.org/wiki/Tulip_mania">buying tulip bulb options</a> really is less of a certain investment than they think. </p>



<p>One of the use cases I thought was reasonable to expect (until now) was summarising. <strong>It turns out I was wrong. </strong>Because ChatGPT isn’t summarising at all, it only <em>looks</em> like it. What it does is something else and that something else only becomes summarising in very specific circumstances. In hindsight I should have expected this.</p>



<p>Here is what happened. Last week, I was asked to create a summary of a 50-page public paper by <a href="https://www.netspar.nl/">Netspar</a>, the <em>Network for Studies on Pensions, Aging and Retirement</em>. The (public) paper is called <a href="https://www.netspar.nl/publicatie/de-governance-van-pensioenfondsen-vanaf-de-stelselwijziging/">De governance van pensioenfondsen vanaf de stelselwijziging</a> (<em>The governance of pension funds following the system change</em>). Actually, creating the summary was discussed at a meeting with other people present and at that meeting I had promised to try to create the summary somewhere in the week that followed. The next day, a friendly colleague sent me his own summary (or so it seemed), to which my reaction (without reading it) was: “OK, he has already done it, the show-off. I probably don’t need to do it anymore”. But that was a mistake as I had not read the entire mail which stated “I had ChatGPT make a summary, because ‘why not?’. Maybe it is useful for you”. I decided not to read ChatGPT’s summary, but create my own and then compare the two.</p>



<p>So, I studied the paper, and created my summary.</p>



<p>In short, the paper looks at the context and consequences of the <a href="https://en.wikipedia.org/wiki/Future_Pensions_Act">systemic change</a> that is currently going on in the Dutch pension system (we’re currently doing a complex €1.6 trillion transformation in about 6 years, 2 of which have already passed, everything is still preparatory up to now), and it concludes for instance that:</p>



<ul>
<li>the changes will require a different focus of the pension funds (less keeping an eye on fairness as this is no longer something the pension fund has a lot of freedom on, but more keeping a eye on operational excellence with respect to the mechanisms agreed upon)</li>



<li>the new situation should come with a stronger governance role by the parties participating in the pension schemes (people saving, people receiving pensions, employers) in the form of an elected College van Belanghebbenden (Council of Stakeholders), mainly because the systemic change moves all of the risks to the (collective of) people participating in a pension fund, whose legal positions are weak.</li>
</ul>



<p>ChatGPT’s summary contained mostly things that can be found in the full text. There was the occasional incorrectness of course. The paper itself, for instance, argues that ‘regulatory strategies’ (rules and compliance) do not really work all that well (e.g. costly, not agile), and that thus an organisational governance <em>structure</em> should be strengthened. I.e. there should be organisational elements with powers to affect one another, such as that council of stakeholders they propose with the power to sack board members. But ChatGPT’s summary of the ‘Summary’ chapter says that such regulations will <em>strengthen</em> governance. (And yep, the paper actually comes with its <em>own</em> summary chapter, so the easiest — but not the best — summary would have been a simple copy-paste operation…)</p>



<p>But the <em>main</em> proposal — that Council of Stakeholders — which takes up about 25% of the main text of the paper, is not mentioned in ChatGPT’s summary <em>at all</em>. Instead, that concrete suggestion becomes a few empty sentences. And that was true for a few other essential elements of the paper. In other words: the summary makes a good first impression, though not very concrete in terms of proposals, but reading the summary alone, you will not be aware that the paper actually has a a set of very concrete proposals and options, most of which is missing in ChatGPT’s summary.</p>



<p>I wondered why, and — after studying the summary — I think I know: ChatGPT doesn’t summarise if you ask it to.</p>



<p>No really: ChatGPT doesn’t summarise. <strong>When you ask ChatGPT to <em>summarise </em>this text, it instead <em>shortens the text</em>. </strong>And there is a <em>fundamental</em> difference between the two. To summarise, you need to <em>understand</em> what the paper is saying. To shorten text, not so much. To truly summarise, you need to be able to detect that from 40 sentences, 35 are leading up to the 36th, 4 follow it with some additional remarks, but it is that 36th that is essential for the summary and that without that 36th, the content is lost.</p>



<p>But that requires a real understanding that is well beyond large prompts (the entire 50-page paper) and hundreds of billions of parameters. </p>



<p>Addendum 2024/05/09: I just realised the situation is even worse. If I have 35 sentences of circumstance leading up to a single sentence of conclusion, the LLM mechanism will — simply because of how the attention mechanism works with the <em>volume</em> of those 35 — find the ’35’ less relevant sentences more important than the single key one. So, in a case like that it will actively <em>suppress</em> the key sentence.</p>



<p>So, when will shortening the text be good enough for a reliable summary? Probably only when summarising consists of nothing else than turning something unnecessarily repetitive and long-winding into something short, i.e. <em>when volume is a good predictor of importance</em>. That is far less of a use case than people think. In the meantime, the result itself will — <a href="https://ea.rna.nl/2023/11/01/the-hidden-meaning-of-the-errors-of-chatgpt-and-friends/">errors and all</a> — suggest to readers that it is a true and reliable summary and we’re not going to doubt that, <a href="https://ea.rna.nl/2022/10/24/on-the-psychology-of-architecture-and-the-architecture-of-psychology/">human as we are</a>. It really might take a while until people have experienced enough of this for GPT-fever to pass. After this experience with summarising — something that was on my list as a potential realistic use case — I am less optimistic that there will be reliable enough use cases for LLMs for real business uses.</p>



<p><mark>[Addendum 28 May]</mark></p>



<p>I tried to find a real English language example to show the effect.</p>



<p>I first tried to let ChatGPT one of my key posts (<a href="https://ea.rna.nl/2022/10/24/on-the-psychology-of-architecture-and-the-architecture-of-psychology/">the one about the role convictions play in humans with an addendum about human ‘wetware’</a>). ChatGPT <a href="https://chatgpt.com/share/f24e84a3-8ae3-48ec-b38d-10ab90e0f850">made a total mess of it</a>. What it said had little to do with the original post, and where it did, it said the opposite of what the post said. What seemed to happen is that ChatGPT’s <em>parameters</em> — which have been tuned by its <em>training data</em> — dominate the result. The text to be summarised itself hardly influences the summary.</p>



<p>For fun,<a href="https://gemini.google.com/share/7e33ca001a12"> I asked Gemini as well</a>. Gemini didn’t make a mistake and actually produced something that is a very short summary of the post,</p>



<figure><img data-attachment-id="175788" data-permalink="https://ea.rna.nl/2024/05/27/when-chatgpt-summarises-it-actually-does-nothing-of-the-kind/image-1-8/" data-orig-file="https://ea.rna.nl/wp-content/uploads/2024/05/image-1.png" data-orig-size="1484,798" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-1" data-image-description="" data-image-caption="" data-medium-file="https://ea.rna.nl/wp-content/uploads/2024/05/image-1.png?w=300" data-large-file="https://ea.rna.nl/wp-content/uploads/2024/05/image-1.png?w=720" tabindex="0" role="button" width="1024" height="550" src="https://ea.rna.nl/wp-content/uploads/2024/05/image-1.png?w=1024" alt=""></figure>



<p>but it is extremely short so it leaves most out. So,<a href="https://gemini.google.com/share/3eaaf4eda658"> I asked Gemini to expand a little</a>, </p>



<figure><img data-attachment-id="175790" data-permalink="https://ea.rna.nl/2024/05/27/when-chatgpt-summarises-it-actually-does-nothing-of-the-kind/image-2-8/" data-orig-file="https://ea.rna.nl/wp-content/uploads/2024/05/image-2.png" data-orig-size="1462,962" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-2" data-image-description="" data-image-caption="" data-medium-file="https://ea.rna.nl/wp-content/uploads/2024/05/image-2.png?w=300" data-large-file="https://ea.rna.nl/wp-content/uploads/2024/05/image-2.png?w=720" tabindex="0" role="button" width="1024" height="673" src="https://ea.rna.nl/wp-content/uploads/2024/05/image-2.png?w=1024" alt=""></figure>



<p>but as soon as I did that, it fabricated something that is not in the original article (quite the opposite), i.e.: “It discusses the importance of advisors having strong convictions and being able to communicate them clearly.” Nope. Not there.</p>



<p>This attempt did not clearly show the ‘shortening’ effect I had noticed before. Asking for a longer summary did show the parameters starting do dominate over the prompt (the ‘context’, technically), e.g. by producing “The article concludes by recommending that architects focus on building trust with their clients and understanding their clients’ perspectives.”, which is also nowhere in <a href="https://ea.rna.nl/2022/10/24/on-the-psychology-of-architecture-and-the-architecture-of-psychology/">the article summarised</a>.</p>



<p>So, what we see here is something that one sees more often. The mechanism of an LLM has two parts influencing the calculation of the generated text: (1) the <em><strong>context</strong></em> (the prompts and answers up until the last generated or user-typed text), and (2) the <em><strong>parameters</strong></em> (based on all the training material).  And we’ve seen before that these may ‘pull’ in different directions. E.g. <a href="https://ea.rna.nl/2024/04/12/microsoft-lays-the-limitations-of-chatgpt-and-friends-bare/">the Crescendo jailbreak (circumventing the safety of LLMs) is based on overcoming the power of the parameters by using the context</a>.</p>



<p>To find another ‘shortening is not summarising’ example, I tried letting it summarise Plato’s <em><a href="https://www.gutenberg.org/files/1591/1591-h/1591-h.htm">Protagoras</a></em> (a favourite), but that was a stupid plan. Plato’s work and commentaries about it are all over the internet and books, so the parameters of the LLM absolutely dominate the result. And given the amount of training  material, the result from the parameters is <a href="https://ea.rna.nl/2023/12/26/memorisation-the-deep-problem-of-midjourney-chatgpt-and-friends/">nearing memorisation quality</a>, so pretty good.</p>



<p>In the end, another Netspar paper, but an English one: <em><a href="https://www.netspar.nl/publicatie/regulating-pensions-why-the-european-union-matters-2/">Regulating pensions: Why the European Union matters</a></em> from 2011 gave me a working example. I had ChatGPT create a 500-word summary from that paper and it produced:</p>







<p>The key points and proposals in the original paper (mostly in sections 5 and 6, the summary — yes, there is again already a summary in the paper, which ChatGPT completely ignores) on page 45) are:</p>



<ul>
<li>The IORP directive is unclear and leads to a distortion of the market
<ul>
<li>ChatGPT instead — clearly from parameters/training: The IORP Directive establishes a framework for occupational retirement provision across the EU. It ensures that pension funds are well-regulated, secure, and capable of providing adequate benefits to retirees. The directive’s scope and implementation in various member states are critical for a cohesive EU pension system.</li>
</ul>
</li>



<li>Separate pensions in economic and non-economic activities and regulate only the economic ones at EU level
<ul>
<li>This is missing from the ChatGPT summary</li>
</ul>
</li>
</ul>



<p>The summary by ChatGPT is pretty often empty waffle. It almost feels like a psychic con (I think I read this analogy somewhere) with its always-true generalisations that do not make an actual point, e.g.:</p>



<ul>
<li>ChatGPT: The constitutional dimension of SGEI within the Treaty framework sets the stage for how pensions are regulated and the legal obligations of member states</li>



<li>ChatGPT: The paper concludes that understanding and integrating EU regulations is essential for national pension policymakers. The interplay between national policies and EU law is complex but necessary for the sustainability and adequacy of pension systems across Europe.</li>
</ul>



<p>This is not nonsense. But at the same time, <em>as part of the summary</em> it does not make sense. We cannot do anything with it (and thus, following <a href="https://en.wikipedia.org/wiki/Ludwig_Wittgenstein">Uncle Ludwig</a>, it is meaningless)</p>



<h3>Conclusion about ‘summarising’ by LLM Chatbots</h3>



<p>‘Summarising’ by LLM Chatbots seems to be influenced by two key inputs of text generation calculations:</p>



<ol>
<li>The parameters — which come from the training material.
<ul>
<li>If the subject is well-represented by the parameters (there has been lots of it in the training material), the <em>parameters</em> dominate the summary more and the actual text you want to summarise influences the summary less. Hence: LLM Chatbots are pretty bad in making <em>specific</em> summaries of a subject that is widespread;</li>
</ul>
</li>



<li>The context — which is the prompts and answers up to this point in the chat, <em>including the text you have given to summarise</em>.
<ul>
<li>If the context is relatively small, it has little influence and the result is dominated by the <em>parameters</em>, so <em>not</em> by the text you are trying to summarise;</li>



<li>If the context is large enough and the subject is not well-represented by the parameters (there hasn’t been much about it in the training material), the text you want to summarise dominates the result. But the mechanism you will see is ‘text <em>shortening</em>‘, <em>not</em> true summarising.</li>
</ul>
</li>
</ol>



<p>Having said that, that very short initial summary of Gemini of my post was pretty good (though incomplete). But it for instance left out the entire <a href="https://ea.rna.nl/2022/10/24/on-the-psychology-of-architecture-and-the-architecture-of-psychology/#wetware">part in the article about human brains</a>. So I asked it specifically as a follow-up question, and it told me:</p>



<figure><img data-attachment-id="175786" data-permalink="https://ea.rna.nl/2024/05/27/when-chatgpt-summarises-it-actually-does-nothing-of-the-kind/image-15/" data-orig-file="https://ea.rna.nl/wp-content/uploads/2024/05/image.png" data-orig-size="1500,1334" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://ea.rna.nl/wp-content/uploads/2024/05/image.png?w=300" data-large-file="https://ea.rna.nl/wp-content/uploads/2024/05/image.png?w=720" tabindex="0" role="button" loading="lazy" width="1024" height="910" src="https://ea.rna.nl/wp-content/uploads/2024/05/image.png?w=1024" alt=""></figure>



<p>‘Likely’? Never mind. But this summary is absolutely not a summary of <a href="https://ea.rna.nl/2022/10/24/on-the-psychology-of-architecture-and-the-architecture-of-psychology/#wetware">that part of the story</a>. Pure fabrication coming from the parameter side of the LLM calculations (which it even ‘admits’ by ‘might’). So:</p>



<blockquote>
<p>Actual text ‘summarising’ by LLMs looks more like ‘text shortening’ and that is not the same</p>
</blockquote>



<p>By the way: I find asking ChatGPT for a summary of a paper that already has a summary included, and ChatGPT ignoring that summary, actually a pretty effective illustration that there is fundamentally no understanding in LLMs, not even ’emerging’.</p>



<p>PS. Gemini says (see above) in a footnote: “Websites reviewed: [<a href="https://ea.rna.nl/2022/10/24/on-the-psychology-of-architecture-and-the-architecture-of-psychology/">ea.rna.nl/2022/10/24/on-the-psychology-…</a>]”. I have not been able to ascertain that this is true, because Gemini also denies it used the website to make a summary (which is weird given the correct summary). So, did it add the content of the web site to the prompt, or was the web site part of the training? Inquiring minds would like to know.</p>



<p>PPS. I have been sitting on a post that suggests we should look at LLM outputs as being influenced by three recognisable elements: the parameter volume, the training data, and the context. Each have distinguishable effects, but that is for next time. Maybe.</p>



<p>This article is part of the <a href="https://ea.rna.nl/the-chatgpt-and-friends-collection/">ChatGPT and Friends Collection</a>.  In case you found any term or phrase here unclear or confusing (e.g, I can understand that most people do  not immediately know that ‘context’ in LLMs is whatever has gone before in human (prompt) and LLM (reply) generated text, before producing the next token), you can probably find a clear explanation there.</p>



<p>[You do not have my permission to use any content on this site for training a Generative AI (or any comparable use), unless you cab guarantee your system never misrepresents my content and provides a proper reference (URL) to the original in its output. If you want to use it in any other way, you need my explicit permission]</p>




	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The data that powers AI is disappearing fast (108 pts)]]></title>
            <link>https://www.nytimes.com/2024/07/19/technology/ai-data-restrictions.html</link>
            <guid>41027320</guid>
            <pubDate>Sun, 21 Jul 2024 19:05:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nytimes.com/2024/07/19/technology/ai-data-restrictions.html">https://www.nytimes.com/2024/07/19/technology/ai-data-restrictions.html</a>, See on <a href="https://news.ycombinator.com/item?id=41027320">Hacker News</a></p>
Couldn't get https://www.nytimes.com/2024/07/19/technology/ai-data-restrictions.html: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Joe Biden stands down as Democratic candidate (873 pts)]]></title>
            <link>https://twitter.com/JoeBiden/status/1815080881981190320</link>
            <guid>41026741</guid>
            <pubDate>Sun, 21 Jul 2024 17:50:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/JoeBiden/status/1815080881981190320">https://twitter.com/JoeBiden/status/1815080881981190320</a>, See on <a href="https://news.ycombinator.com/item?id=41026741">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Glisp: Graphical Lisp (180 pts)]]></title>
            <link>https://glisp.app/commit:e7fbaae/</link>
            <guid>41026214</guid>
            <pubDate>Sun, 21 Jul 2024 16:34:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://glisp.app/commit:e7fbaae/">https://glisp.app/commit:e7fbaae/</a>, See on <a href="https://news.ycombinator.com/item?id=41026214">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Intel says 13th and 14th Gen mobile CPUs are crashing (239 pts)]]></title>
            <link>https://www.tomshardware.com/pc-components/cpus/intel-says-13th-and-14th-gen-mobile-cpus-are-crashing-but-not-due-to-the-same-bug-as-desktop-chips-chipmaker-blames-common-software-and-hardware-issues</link>
            <guid>41026123</guid>
            <pubDate>Sun, 21 Jul 2024 16:19:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.tomshardware.com/pc-components/cpus/intel-says-13th-and-14th-gen-mobile-cpus-are-crashing-but-not-due-to-the-same-bug-as-desktop-chips-chipmaker-blames-common-software-and-hardware-issues">https://www.tomshardware.com/pc-components/cpus/intel-says-13th-and-14th-gen-mobile-cpus-are-crashing-but-not-due-to-the-same-bug-as-desktop-chips-chipmaker-blames-common-software-and-hardware-issues</a>, See on <a href="https://news.ycombinator.com/item?id=41026123">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="article-body">
<p>Amidst reports of the 13th and 14th Generation processor instability extending to mobile chips, Intel has sent a statement to <em>Tom's Hardware</em> to clarify the situation. While there has been instability feedback on some mobile SKUs, the cause of the instability differs from their desktop counterparts.</p><p><em>"Intel is aware of a small number of instability reports on Intel Core 13th/14th Gen mobile processors.</em></p><p><em>"Based on our in-depth analysis of the reported Intel Core 13/14 Gen desktop processor instability issues, Intel has determined that mobile products are not exposed to the same issue. The symptoms being reported on 13/14 Gen mobile systems – including system hangs and crashes – are common symptoms stemming from a broad range of potential software and hardware issues.</em></p><p><em>"As always, if users are experiencing issues with their Intel-powered laptops we encourage them to reach out to the system manufacturer for further assistance.</em>" — Intel representative to <em>Tom's Hardware</em>.</p><p>Alderon Games was one of the few companies that shared its statistics about Raptor Lake and Raptor Lake Refresh <a data-analytics-id="inline-link" href="https://www.tomshardware.com/pc-components/cpus/game-publisher-claims-100-crash-rate-with-intel-cpus-alderon-games-says-company-sells-defective-13th-and-14th-gen-chips" data-before-rewrite-localise="https://www.tomshardware.com/pc-components/cpus/game-publisher-claims-100-crash-rate-with-intel-cpus-alderon-games-says-company-sells-defective-13th-and-14th-gen-chips">Core i9 crash rates</a>. The founder, Matthew Cassells, recently stated that although the company's laptops with <a data-analytics-id="inline-link" href="https://www.tomshardware.com/pc-components/cpus/dev-reports-that-intels-laptop-cpus-are-also-crashing-several-laptops-have-suffered-similar-crashes-in-testing" data-before-rewrite-localise="https://www.tomshardware.com/pc-components/cpus/dev-reports-that-intels-laptop-cpus-are-also-crashing-several-laptops-have-suffered-similar-crashes-in-testing">mobile variants crashed</a> less frequently than the desktop chips, the issue still existed on laptops.&nbsp;</p><p>Cassells <a data-analytics-id="inline-link" href="https://www.reddit.com/r/hardware/comments/1e13ipy/comment/lcyythb/" data-url="https://www.reddit.com/r/hardware/comments/1e13ipy/comment/lcyythb/" target="_blank" referrerpolicy="no-referrer-when-downgrade" data-hl-processed="none">responded to Intel's statement in a Reddit thread</a>:</p><p>"The laptops crash in the exact same way as the desktop parts including workloads under Unreal Engine, decompression, ycruncher or similar. Laptop chips we have seen failing include but not limited to 13900HX etc.," Cassells said.</p><div data-hydrate="true" id="slice-container-newsletterForm-articleInbodyContent-2Ffrn2SUj3NLxeD5u9G4Ro"><section><p>Get Tom's Hardware's best news and in-depth reviews, straight to your inbox.</p></section></div><p>"Intel seems to be down playing the issues here most likely due to the expensive costs related to BGA rework and possible harm to OEMs and Partners," he continued. "We have seen these crashes on Razer, <a data-analytics-id="inline-link" href="https://www.tomshardware.com/tag/msi-microstar" data-auto-tag-linker="true" data-before-rewrite-localise="https://www.tomshardware.com/tag/msi-microstar">MSI</a>, Asus Laptops and similar used by developers in our studio to work on the game. The crash reporting data for my game shows a huge amount of laptops that could be having issues."</p><p>The <a data-analytics-id="inline-link" href="https://www.tomshardware.com/news/intel-13th-gen-raptor-lake-release-date-specifications-pricing-benchmarks-all-we-know-specs" data-before-rewrite-localise="https://www.tomshardware.com/news/intel-13th-gen-raptor-lake-release-date-specifications-pricing-benchmarks-all-we-know-specs">Raptor Lake</a> and <a data-analytics-id="inline-link" href="https://www.tomshardware.com/pc-components/cpus/intel-launches-18-new-14th-gen-raptor-lake-refresh-processors-new-locked-65w-and-t-series-35w-chips-are-available-now" data-before-rewrite-localise="https://www.tomshardware.com/pc-components/cpus/intel-launches-18-new-14th-gen-raptor-lake-refresh-processors-new-locked-65w-and-t-series-35w-chips-are-available-now">Raptor Lake Refresh</a> HX series share die configurations similar to those of their desktop counterparts. Therefore, it's normal to think that some of the HX-series SKUs would suffer the same fate as the Core i9 desktop models. However, instability could be rarer because the mobile chips have stricter TDP guidelines and don't require as much voltage as the desktop processors. However, Intel has now disputed that speculation.</p><p>Things certainly aren't looking good for Intel right now. Months of investigation have yet to bear fruit as the chipmaker still hasn't narrowed down the exact cause of the instability on Raptor Lake and Raptor Lake Refresh Core i9 processors. Instead, consumers have only received stopgap solutions, such as using a <a data-analytics-id="inline-link" href="https://www.tomshardware.com/pc-components/cpus/intel-issues-official-statement-on-core-k-series-crashes-stick-to-intels-official-power-profiles" data-before-rewrite-localise="https://www.tomshardware.com/pc-components/cpus/intel-issues-official-statement-on-core-k-series-crashes-stick-to-intels-official-power-profiles">more toned-down power profile</a> on less capable motherboards.</p><p>We're only months from the launch of Intel's Core Ultra 200 (codenamed Arrow Lake). The recent instability fiasco has unquestionably dented Intel's reputation and likely impacted consumers' trust in Intel processors. Meanwhile, AMD's latest Ryzen 9000 (codenamed Granite Ridge) processors, powered by Zen 5 execution cores, will soon hit the market - months ahead of Arrow Lake. The whole Raptor Lake and Raptor Lake Refresh instability issues couldn't have emerged at a worse time.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A brief history of Dell Unix (2008) (115 pts)]]></title>
            <link>https://notes.technologists.com/notes/2008/01/10/a-brief-history-of-dell-unix/</link>
            <guid>41025450</guid>
            <pubDate>Sun, 21 Jul 2024 14:42:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://notes.technologists.com/notes/2008/01/10/a-brief-history-of-dell-unix/">https://notes.technologists.com/notes/2008/01/10/a-brief-history-of-dell-unix/</a>, See on <a href="https://news.ycombinator.com/item?id=41025450">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="post-143">
				<p>[update December 2021: files for 86Box install at <a href="https://technologists.com/DellUnix2.2.1/">https://technologists.com/DellUnix2.2.1/</a><br>
update December 2020: <a href="https://virtuallyfun.com/wordpress/2020/12/01/dell-unix-on-86box/" rel="noopener noreferrer" target="_blank">Dell Unix on 86Box</a> “Today let me present Dell Unix more properly, with 1024×768, 256 colors video and proper networking using emulated VGA and NIC.”<br>
update &nbsp;March 2012: <a href="http://virtuallyfun.superglobalmegacorp.com/?p=1878" target="_blank" rel="noopener noreferrer">Antoni Sawicki</a> has Dell SVR4 running<br>
under Qemu/Bochs, and subsequently reports that he&nbsp;has<br>
Dell Unix “working correctly” &nbsp;under VirtualBox. CHS]</p>
<p>“Dell UNIX? I didn’t know there was such a thing.”</p>
<p>A couple of weeks ago I had my new <a href="https://wiki.laptop.org/go/Hardware_specification" target="_blank" rel="noopener noreferrer">XO</a> with me for breakfast at a nearby <a href="http://web.archive.org/web/20140308210557/http://www.kneadedpleasures.com/" target="_blank" rel="noopener noreferrer">bakery café</a>.&nbsp;Other patrons were&nbsp;drawn to seeing an XO for the first time, including a Linux person from Dell. I mentioned Dell UNIX and we talked a little about the people who had worked on Dell UNIX. He expressed surprise that mention of Dell UNIX evokes the above quote so often and pointed out that <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="noopener noreferrer">Emacs</a> source still has #ifdef for Dell UNIX.</p>
<p>Quick Googling doesn’t reveal useful history of Dell UNIX, so here’s my version, a summary of the three major development releases.</p>

<p><em><strong>Dell UNIX System V Release 1.x</strong></em> (1988-1989)</p>
<p>In 1988, <a href="http://www.youtube.com/watch?v=kAonOmb8l3o" target="_blank" rel="noopener noreferrer">Glenn Henry</a> joined Dell as VP of R&amp;D with the mission of building a much larger team and advanced products. That team embarked on the ill-fated “<a href="https://web.archive.org/web/20160418183450/http://www.achievement.org/autodoc/page/del0int-6" target="_blank" rel="noopener noreferrer">Olympic Project</a>,” intended to span “desktop, workstation and server markets, with single and dual processors and many different operating systems”, in Michael’s words.</p>
<p>For some of the Olympic processor configurations, <em>e.g.</em>, multiprocessor and/or <a href="http://en.wikipedia.org/wiki/Intel_i860" target="_blank" rel="noopener noreferrer">i860</a>, some form of UNIX was the only realistic operating system. So Glenn started a UNIX development project, partly with some sharp “old-timers” (<em>e.g.</em>, Craig Jones, Tony Overfield, and James Van Artsdalen), partly with other ex-IBMers (<em>e.g.</em>, Dewey Coffman, Ken Jeffries, Tom Lang, John Lay, and&nbsp;Kenneth Smith), and partly with other new folks (Randy Howard and Todd Nix).</p>
<p><a href="https://technologists.com/images/sm19890227DellUnixToteBag.jpg"><img decoding="async" src="https://technologists.com/images/tn19890227DellUnixToteBag.jpg" alt="Dell UNIX tote bag" width="68" height="106"></a>The first release was based on System V Release 3.2 as available from Interactive Systems Corp. However, it was hardly the standard ISC product. Most notably, it included “DOS Merge” from ISC rival Locus Computing instead of ISC’s VP/ix DOS compatibility subsystem. Dell SVR3.2 also included the Motif window-manager, X Windows support for higher performance graphics cards and emphasis on Xenix compatibility. When Dell UNIX was first publicly demonstrated at the 1989 UniForum Conference, the most prominent handouts were tote bags touting <a href="https://technologists.com/images/sm19890227DellUnixToteBag.jpg" target="_blank" rel="noopener noreferrer">Xenix </a>compatibility.</p>
<p>All of that was while I was still working on <a href="https://notes.technologists.com/notes/2017/03/08/lets-start-at-the-very-beginning-801-romp-rtpc-aix-versions/" rel="noopener" target="_blank">AIX</a>. In April I asked Glenn and Michael to hire me and I became director of product planning for Olympic. With my encouragement, Tom Lang became aggressive about recruiting. When Tom suggested that Kendall Witte might be interested in coming over from IBM, I was pleasantly surprised. I had high regard for Ken from his AIX “orange book” efforts and knew that he’d had prior PC UNIX experience with the ISC PC/ix project for IBM. I’m not exactly sure when they joined, but some of the other developers to come on board were Richard Amberg, Donn Baumgartner, Jeremy Chatfield, Alan Davis, George Durden, Dave McCracken and Ron McDowell.</p>
<p>Dell UNIX System V Release 1.1 was introduced November 1, 1989. Though the Olympic project was terminated that winter, Dell UNIX survived.</p>
<p><strong><em><a href="https://technologists.com/sauer/DellStation.txt" target="_blank" rel="noopener noreferrer">DELL Station</a></em></strong> (1990)</p>
<p>Microsoft Windows had still not quite yet become dominant. Mac OS was the graphical user interface of choice in the personal computer world. Dell seemed to be the leader in X Windows for the PC, and Dell Station attempted to extend that leadership. “Dell has added IXI’s X.desktop, that provides the user with a Macintosh-like screen with icons that represent applications or functions. … The DELL Station includes a comprehensive suite of integrated office applications from Uniplex.&nbsp; Uniplex X Windows applications include word processing, a spreadsheet, the Informix SQL (structured query language) relational database, advanced business graphics, electronic mail and more.”</p>
<p>The real excitement in the UNIX development group was not Dell Station, but the first <a href="https://notes.technologists.com/notes/wp-content/uploads/2008/01/SVR4sched.jpg" rel="noopener" target="_blank">release</a> of Dell’s SVR4, which was <a href="https://technologists.com/sauer/DellSVR4.txt">announced</a> on Halloween 1990.</p>
<p><strong><em>Dell System V Release 4</em></strong> (1990-1993)</p>
<p><a href="https://technologists.com/images/sm1992DellSVR42.2Box.jpg"><img decoding="async" src="https://technologists.com/images/tn1992DellSVR42.2Box.jpg" alt="Dell SVR4 Box" width="155" height="174"></a>Dell SVR4 finally seemed like real UNIX on a PC. We were justifiably proud of the quality and comprehensiveness, especially considering that our team was so much smaller than those of our perceived competitors at ISC, SCO and Sun(!). The reviewers were impressed. Reportedly, Dell SVR4 was chosen by Intel as their reference implementation in their test labs, chosen by Oracle as their reference Intel UNIX implementation, and used by AT&amp;T USL for in house projects requiring high reliability, in preference to their own ports of SVR4.0. (One count showed Dell had resolved about 1800 problems in the AT&amp;T source.) I was astonished one morning in the winter of 1991-92 when Ed Zander, at the time president of SunSoft, and three other SunSoft executives arrived at my office, requesting Dell help with their plans to put Solaris on X86.</p>
<p>Besides all of the features enumerated in the press release, we were pioneering in bundling all sorts of “geeky” free software. Some time before, I’d bought a couple of binders of man(1) pages, etc., of free software. I’d wanted to include much of that software in AIX, but couldn’t. “Open source” had not yet been coined, but these were prototypical examples of what would be called “open source”, programs like elm, Emacs, gcc, mh, <a href="http://en.wikipedia.org/wiki/Network_News_Transfer_Protocol" target="_blank" rel="noopener noreferrer">NNTP</a> readers and servers, PERL 4, TeX,&nbsp; … that “everyone” wanted but had to fetch/build/install/test on other versions of UNIX. Today, it is expected that this kind of software is part of a complete Linux|UNIX system, but I think we were the first to adopt this attitude in a packaged release.</p>
<p>Perhaps the most important Dell addition was auto-configuration of device drivers. This was at least two years before Intel &amp; Microsoft devised “<a href="http://download.microsoft.com/download/1/6/1/161ba512-40e2-4cc9-843a-923143f3456c/PNPISA.rtf" target="_blank" rel="noopener noreferrer">Plug and Play ISA</a>” for Windows <em>et al</em>. Reportedly, the auto-configuration feature accounted primarily for approximately 90% reduction in calls for support in the first 90 days of Dell SVR4 use, versus Dell UNIX based on SVR3.</p>
<p>Kendall Witte proved his “guru” mettle as the technical lead of the first three releases. I cannot overstate the importance of Ken’s contributions to the entire project and related hardware projects. Jeremy Chatfield was also heroic as the first line manager and tireless negotiator within and outside of Dell. We were able to get <a href="http://en.wikipedia.org/wiki/XFree86" target="_blank" rel="noopener noreferrer">Thomas Roell</a> to join us for the summer of ’91 and contribute his prodigious X Windows expertise.</p>
<p>Unfortunately, there seemed to be no way for Dell to profit financially from our UNIX. The business rationale for Dell UNIX was to sell Dell hardware. But the majority of the copies of Dell UNIX ended up running on other vendors’ machines. Not only was Dell not getting the planned hardware revenue, the support costs for non-Dell hardware were unreasonably high. The biggest complaint from our advocates outside of Dell was that the purchase price was too high, yet our royalty costs, not to mention development and support costs, made it very hard to make a profit at what we were charging, or consider a lower price.</p>
<p>The UNIX project was divisive in development, marketing and sales. The advocates were certain Dell UNIX was a great product. Even the detractors often acknowledged the technical strengths. But marketing and selling a more recognized UNIX, particularly SCO UNIX, seemed likely to cost much less in development, marketing, sales and support, and to better reach markets, for example, multi-user “dumb terminal” environments, where SCO was preeminent.</p>
<p>Compaq’s June 1992 product announcements and price cuts were singular in internal Dell transformation that summer and the end of Dell UNIX, in my opinion. Key members of the UNIX team, most notably Kendall Witte, moved to other departments.</p>
<p><a href="https://technologists.com/images/sm1992DellSVR42.2QIC.jpg"><img decoding="async" src="https://technologists.com/images/tn1992DellSVR42.2QIC.jpg" alt="Dell 2.2 distribution tape" width="111" height="73"></a>Dell SVR4 Issue 2.2 came out in 1992 as the crowning achievement of a great development effort, but the writing was on the wall. 2.2 would be the last major release. Jeremy left Dell. Others, notably Selina Johnson and Stan McHann, admirably provided management support internally and externally, which was no fun, especially after the public end of life announcements.</p>
<p>I left Dell in the Fall of 1993. At the end of that year, the final support tape, Issue 2.2.1, was released to customers with support contracts.</p>
<p>I asked Jeremy to read a draft of this article. With his usual insight and thoroughness, he pointed out all sorts of things that I had omitted, some of which I never knew before, and I have revised accordingly.</p>
<p>I can still boot Issue 2.2 on a 1991 Dell 450 DE/2 DGX and referred to files on that machine to write some of this. Last I heard from Ken, he was still working at Dell, still running Dell UNIX, and wishing it had DHCP support.</p>
<p>[Addendum April 3, 2022: A Russian translator posted this version: <a href="https://habr.com/ru/company/ruvds/blog/658095/" rel="noopener" target="_blank">Краткая история Dell UNIX</a>]</p>
<p>[Addendum October 20, 2023: <a href="https://www.zdnet.com/article/how-ubuntu-linux-snuck-into-high-end-dell-laptops-and-why-its-called-project-sputnik/" rel="noopener" target="_blank">How Ubuntu Linux snuck into high-end Dell laptops (and why it’s called ‘Project Sputnik’)</a>]</p>


				
				<p>
					<small>
						This entry was posted
												on Thursday, January 10th, 2008 at 9:09 pm						and is filed under <a href="https://notes.technologists.com/notes/category/operating-systems/" rel="category tag">operating systems</a>.
						You can follow any responses to this entry through the <a href="https://notes.technologists.com/notes/2008/01/10/a-brief-history-of-dell-unix/feed/">RSS 2.0</a> feed.

													Both comments and pings are currently closed.

						
					</small>
				</p>

			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Moocable – find people studying the same online course/book (115 pts)]]></title>
            <link>https://moocable.com/</link>
            <guid>41024964</guid>
            <pubDate>Sun, 21 Jul 2024 13:34:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://moocable.com/">https://moocable.com/</a>, See on <a href="https://news.ycombinator.com/item?id=41024964">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="page-content">
						                
        <div><p>
                            <h2>Study online courses &amp; books together
                            </h2>
                        </p></div>
        <div>
                            <p>
                                <h2>
                                    Moocable helps you find people studying the same online course/book so you can learn and grow together
                                </h2>
                            </p></div>
            
                
                                                                    
                                                                                                                                    
                                                                                                                                                                                
                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                <div><!--Top Rated Series-->
                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                        <h2>
                                                                                                                                                                                                                                                                                            Browse <span>Top Curated Series</span>
                                                                                                                                                                                                                                                                                        </h2>
                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                    <div>
                                                                                                                                                                                                                                                                                        <div>
                                                                                                                                                                                                                                                                                                <h4>Top Rated Series</h4>
                                                                                                                                                                                                                                                                                                <p>See more</p>
                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                            <h5><a>see more</a></h5>
                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                    <div id="owl-demo-7">
                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/Top%20250%20Coursera%20courses.png">
                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                            <h5>Top Coursera courses of all time</h5>
                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/250%20Top%20FREE%20Udemy%20Courses%20of%20All%20Time.png">
                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                <h5>Top Udemy courses of all time</h5>
                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/The%20100%20Top%20FREE%20EdX%20Courses%20of%20All%20Time.png">
                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                    <h5>Top edX courses of all time</h5>
                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/250%20Top%20Domestika%20Courses%20of%20All%20Time.png">
                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                        <h5>Top Domestika courses of all time</h5>
                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/250%20Top%20Skillshare%20Courses%20of%20All%20Time.png">
                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                            <h5>Top Skillshare courses of all time</h5>
                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/100%20Top%20FutureLearn%20Courses.png">
                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                <h5>Top Futurelearn courses of all time</h5>
                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                            <!--Reddit Book Series-->
                                                                                                                                                                                                                                                                                                            <div>
                                                                                                                                                                                                                                                                                                                <div>
                                                                                                                                                                                                                                                                                                                        <h4>Reddit Book Series</h4>
                                                                                                                                                                                                                                                                                                                        <p>See this also</p>
                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                    <h5><a>see more</a></h5>
                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                            <div id="owl-demo-8">
                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/algorithms.png">
                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                    <h5>The most-mentioned books on r/algorithms</h5>
                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/datascience.png">
                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                        <h5>The most-mentioned books on r/datascience</h5>
                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/learnmath.png">
                                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                            <h5>The most-mentioned books on r/learnmath</h5>
                                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/UXDesign.png">
                                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                <h5>The most-mentioned books on r/UXDesign</h5>
                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/dataengineering.png">
                                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                                    <h5>The most-mentioned books on r/dataengineering</h5>
                                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/ExperiencedDevs.png">
                                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                        <h5>The most-mentioned books on r/ExperiencedDevs</h5>
                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/computerscience.png">
                                                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                            <h5>The most-mentioned books on r/computerscience</h5>
                                                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/AskProgramming.png">
                                                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                <h5>The most-mentioned books on r/AskProgramming</h5>
                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/SQL.png">
                                                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                                                    <h5>The most-mentioned books on r/SQL</h5>
                                                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                <!--Classcentral Course Series-->
                                                                                                                                                                                                                                                                                                                                                <div>
                                                                                                                                                                                                                                                                                                                                                    <div>
                                                                                                                                                                                                                                                                                                                                                            <h4>Classcentral Course Series</h4>
                                                                                                                                                                                                                                                                                                                                                            <p>See this also</p>
                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                        <h5><a>see more</a></h5>
                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                <div id="owl-demo-9">
                                                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20CS%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                                        <h5>Highest Rated Computer Science courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20Business%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                                            <h5>Highest Rated Business courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20Data%20Science%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                                <h5>Highest Rated Data Science courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20Humanities%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                                                                    <h5>Highest Rated Humanities courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20Art%20Design%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                                                        <h5>Highest Rated Art &amp; Design courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20Programming%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                                                            <h5>Highest Rated Programming courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20Mathematics%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                                                <h5>Highest Rated Mathematics courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20Science%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                                                                                    <h5>Highest Rated Science courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20Engineering%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                                                                        <h5>Highest Rated Engineering courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/Highest%20Rated%20Classcentral%20Personal%20Development%20Courses.png">
                                                                                                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                                                                            <h5>Highest Rated Personal Development courses on Class Central</h5>
                                                                                                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                                        <!--Hackernews Course Series-->
                                                                                                                                                                                                                                                                                                                                                                                        <div>
                                                                                                                                                                                                                                                                                                                                                                                            <div>
                                                                                                                                                                                                                                                                                                                                                                                                    <h4>Hackernews Course Series</h4>
                                                                                                                                                                                                                                                                                                                                                                                                    <p>Most-mentioned courses on Hackernews</p>
                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                                                <h5><a>see more</a></h5>
                                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                                                        <div id="owl-demo-10">
                                                                                                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/HackerNews%20Best%20Course%20Python.png">
                                                                                                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                                                                <h5>The Best Python Courses of Hacker News</h5>
                                                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/HackerNews%20Best%20Course%20Machine%20Learning.png">
                                                                                                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                                                                                                    <h5>The Best Machine Learning Courses of Hacker News</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/HackerNews%20Best%20Course%20Business.png">
                                                                                                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                                                                                        <h5>The Best Business Courses of Hacker News</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/HackerNews%20Best%20Course%20Mathematics.png">
                                                                                                                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                                                                                            <h5>The Best Mathematics Courses of Hacker News</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/HackerNews%20Best%20Course%20Economics.png">
                                                                                                                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                <h5>The Best Economics Courses of Hacker News</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/HackerNews%20Best%20Course%20Algorithm.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                    <h5>The Best Algorithm Courses of Hacker News</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/HackerNews%20Best%20Course%20Data%20Structures.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                        <h5>The Best Data Structures Courses of Hacker News</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/HackerNews%20Best%20Course%20Data%20Science.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <h5>The Best Data Science Courses of Hacker News</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                                                                        <!--HumbleBundle Book Series-->
                                                                                                                                                                                                                                                                                                                                                                                                                        <div>
                                                                                                                                                                                                                                                                                                                                                                                                                            <div>
                                                                                                                                                                                                                                                                                                                                                                                                                                    <h4>HumbleBundle Book Series</h4>
                                                                                                                                                                                                                                                                                                                                                                                                                                    <p>See this also</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                <h5><a>see more</a></h5>
                                                                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                                                                                        <div id="owl-demo-11">
                                                                                                                                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/Cookbooks%20for%20Coders%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                <h5>Cookbooks for Coders - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/Make%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <h5>Make - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/Hacking%20presented%20by%20No%20Starch%20Press%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <h5>Hacking presented by No Starch Press - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/Data%20Science%20Essentials%20by%20Taylor%20&amp;%20Francis%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <h5>Data Science Essentials by Taylor &amp; Francis - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/Web%20Programming%20by%20OReilly%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <h5>Web Programming by O'Reilly - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/Data%20Analysis%20&amp;%20Machine%20Learning%20by%20OReilly%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <h5>Data Analysis &amp; Machine Learning by O'Reilly - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/Web%20Programming%20by%20OReilly%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <h5>Web Design &amp; Development by O'Reilly - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <img src="https://moocable.com/assets/images/home/Program%20Your%20Own%20Games%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <h5>Program Your Own Games - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <img src="https://moocable.com/assets/images/home/Cybersecurity%202.0%20by%20Wiley%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <h5>Cybersecurity 2.0 by Wiley - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <img src="https://moocable.com/assets/images/home/Leadership%20Now%20by%20Berrett-Koehler%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <h5>Leadership Now by Berrett-Koehler - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <a href="#!">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <img src="https://moocable.com/assets/images/home/UX%20by%20Wiley%20-%20HumbleBundle.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <h5>UI/UX by Wiley - HumbleBundle</h5>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </article>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Explore all series
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div><p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <h2>Study courses, books, &amp; problem sets
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </h2>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        					</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[So you think you know box shadows? (641 pts)]]></title>
            <link>https://dgerrells.com/blog/how-not-to-use-box-shadows</link>
            <guid>41024664</guid>
            <pubDate>Sun, 21 Jul 2024 12:38:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://dgerrells.com/blog/how-not-to-use-box-shadows">https://dgerrells.com/blog/how-not-to-use-box-shadows</a>, See on <a href="https://news.ycombinator.com/item?id=41024664">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><img src="https://dgerrells.com/images/boxshadowrender.jpg" alt="cgi image with spheres"></p><h2>So you think you know box shadows?</h2>
<p>Box shadows. I love them.</p>
<p>Four years ago I found out my m1 can render a stupid number of these bad boys and so I set out to see just how far you can push them and boy did I. If you are looking for a <code>how to use box shadows to get the look of the latest UX trend</code>, this is not the right article for you. But if you like some janky creativity, stay tuned.</p>
<p>I want to share some of the worst possible things one can do with box shadows all on a single div. Things which shouldn't work at all yet somehow they do. But before getting into that, a question must be answered.</p>
<p>What exactly is a box shadow?</p>
<h2>Graphic design 101</h2>
<p>A box shadow is a kind of drop shadow. And a drop shadow is a kind of image filter that is very popular in graphic design due to how versatile it is at adding an approximation of depth to composition.</p>
<p>The filter takes the raster of an image and shifts the pixels along the x and y axis. It will draw these pixels as a single color behind the source image. This gives an illusion of depth by dropping the outline of an image as a "shadow" into the composition hence the name drop shadow.</p>
<p>We can use the css filter property to see this in action.</p>
<pre><code><span>div</span> {
  <span>filter</span>: <span>drop-shadow</span>(xOffset yOffset rgba(<span>0</span>, <span>0</span>, <span>0</span>, <span>0.5</span>));
}
</code></pre>

<p>There are many different implementations of a drop shadow filter across different tools like photoshop, gimp, figma, and css each having a different set of features. For example css also supports an optional blur value to apply to the drop shadow.</p>
<pre><code><span>div</span> {
  <span>filter</span>: <span>drop-shadow</span>(xOffset yOffset blurSize rgba(<span>0</span>, <span>0</span>, <span>0</span>, <span>0.5</span>));
}
</code></pre>

<p>By layering several drop filters one can easily add interesting depth to a composition.</p>
<p>For example, here are 2 layered drop-shadow filters.</p>

<p>Nifty.</p>
<p>What about box shadows?</p>
<h2>The Box Shadow</h2>
<p>A box shadow is a form of drop filter with many trade offs. First, the name "Box" has to do with the filter only supporting box shapes. For example, lets try applying it to the previous example.</p>

<p>Notice that the shadow shape is limited to the bounding box of the container and how the shadow can break out of the bounding box. This seems limiting but it comes with a few more features one of which is performance.</p>
<p>It turns out that the majority of user interfaces are made up of boxes. It also turns out that some smart people figured out maths hacks to draw rounded boxes for super cheap which UI peeps love because with this hack boxes can be so round as to appear as circles. And the css box shadow implementation supports this math hack.</p>
<p>This means that designers can be liberal with box shadows rather than relying on prerendered source images bloating download sizes.</p>
<p>This little mixer shows the variety of shapes available. Tap to randomize the color.</p>

<p>This opens up a all kinds of freedom for UI design. Layering these together can produce amazing results. You can play around with a border editor <a href="https://cssgenerator.org/border-radius-css-generator.html">here</a>.</p>
<p>Layering. That is an important word. You can layer or chain many box shadows together on a single div. The above example uses this to set the colors.</p>
<pre><code><span><span>function</span> <span>randomizeAndColor</span>(<span>e</span>) </span>{
  randomize(e);
  <span>const</span> spread = <span>Math</span>.random() &gt; <span>0.8</span> ? <span>2</span> : <span>0</span>;
  <span>const</span> x1 = <span>Math</span>.floor(<span>3</span> - <span>Math</span>.random() * <span>6</span>) / (<span>1</span> + spread);
  <span>const</span> y1 = <span>Math</span>.floor(<span>3</span> - <span>Math</span>.random() * <span>6</span>) / (<span>1</span> + spread);
  <span>const</span> y2 = <span>2</span> + <span>Math</span>.floor(<span>Math</span>.random() * <span>4</span>);
  <span>const</span> blur2 = <span>8</span> + <span>Math</span>.floor(<span>Math</span>.random() * <span>12</span>);
  e.style.boxShadow = <span>`<span>${x1}</span>px <span>${y1}</span>px 0px <span>${spread}</span>px <span>${getRandomPastelColor()}</span>, 0 <span>${y2}</span>px <span>${blur2}</span>px #0006`</span>;
}
</code></pre>

<p>Usually, a designer will carefully position squares within other squares with consistent margins, paddings, and typography for optimal accessibility and understandability. Wisely, they further add layered shadows and perhaps a few images to help visually distinguish widget interaction and state.</p>
<p>That is all well and good but what we are really working with is a kind of painting api. We can paint an arbitrary number of squares to the screen optionally applying a blur to them.</p>
<p>I initially explored this with somme <a href="https://dgerrells.com/blog/all-the-ways-to-css">minimal art in an earlier write up</a>.</p>
<p>I liked the results.</p>
<p>The config that drives this is pretty simple.</p>
<pre><code><span>const</span> blocks = [
  [<span>8</span>, <span>"#114d33"</span>],
  [<span>24</span>, <span>"#50bbab"</span>],
  [<span>28</span>, <span>"#fcba94"</span>],
  [<span>10</span>, <span>"#eced26"</span>],
  <span>// ...other characters</span>
];

<span><span>&lt;<span>MinimalSets</span> <span>blockLists</span>=<span>{blocks}</span> /&gt;</span></span>;
</code></pre>
<p>Now the natural question I am sure you have and I certainly had was, "can we do more box shadows?" What about blurring or transparency? How do they impact performance?</p>
<p>I whipped up a little visual tool where a giant box shadow is created and set on a div like so.</p>
<pre><code><span>const</span> computedBoxShadow = points.map(
  <span>(<span>[x, y], i</span>) =&gt;</span>
    <span>`<span>${x}</span>px <span>${y}</span>px <span>${getBlur(i, frame)}</span>px <span>${animatedColor()}</span>`</span>
).join(<span>","</span>)

<span>//...other code</span>

&lt;style&gt;<span>`
  myDiv {
    box-shadow: <span>${computedBoxShadow}</span>;
  }
`</span>&lt;/style&gt;
</code></pre>
<p>Animation is handled by setting the box shadow string every 300ms and then letting <code>transition: all</code> prop do the animation. This causes some jank and ended up being slower that setting the box shadow on every frame.</p>
<p>The result is an app where you can tap to remix a color palette with a history of the last 10 palettes to the left. Here is an example with 100 box shadows. Tap around.</p>

<p>I noticed that applying a blur slowed down the number you could animate which makes sense. However, using a transparent color significantly slowed down the number that can be drawn too which doesn't make as much sense to me. I'd imagine that with hardware today transparency should be somewhat free. The div size also impacts performance which makes me think there is some software rasterizer involved when things are animated. I could look into the source code of browsers but it would be different depending on the js engine.</p>
<p>However, I found that if I didn't set any transparency or blur, my m1 laptop could draw buckets of box shadows. Like thousands of them.</p>
<h2>How to <span><em>seriously</em></span> <em>not</em> use box shadows</h2>
<p>Ok, many box shadows can be drawn. Now what?</p>
<p>Well we cannot rotate the box shadows but they can be circles and a circle kinda looks like a ball. So what if I made a bunch of balls that could bounce around? And maybe I can "fake" a 3d effect by scaling the size based on a z value. This wouldn't be accurate perspective but would add some 3d depth.</p>
<p>This one is pretty simple. Just a big'ol "gamestate" updated in a <code>requestAnimationFrame</code> and then set a giant box shadow string on div. You can touch somewhere to pull the balls towards you. The balls are contained to a box and will bounce to stay in frame.</p>
<p>Toss a tick function into <code>requestAnimationFrame</code></p>
<pre><code><span>const</span> tick = <span>(<span>timestamp: <span>number</span></span>) =&gt;</span> {
  gameState.frame++;
  gameState.deltaTime = <span>Math</span>.min(
    (timestamp - gameState.prevFrameStartTime) / <span>1000</span>,
    <span>0.1</span>
  );
  gameState.prevFrameStartTime = timestamp;
  update(gameState);
  render(gameState);
  winContext._gameFrame = <span>window</span>.requestAnimationFrame(tick);
};
</code></pre>
<p>Updating the simulation isn't complicated but for the sake of brevity I will use a bit of psudocode.</p>
<pre><code><span>const</span> update: GameFunction = <span>(<span>state</span>) =&gt;</span> {
  <span>for</span> (<span>const</span> ball <span>in</span> state) {
    updateBall();
    containBall();
    addFriction();
    <span>if</span> (touched) pullToPoint(touchX, touchY);
  }
};
</code></pre>
<p>Now rendering is the interesting part. What is going to be run 60 time a second is the following.</p>
<pre><code><span>const</span> render: GameFunction = <span>(<span>state</span>) =&gt;</span> {
  <span>const</span> boxShadowString = state.balls
    .sort(<span>(<span>a, b</span>) =&gt;</span> b.z - a.z)
    .map(<span>(<span>ball</span>) =&gt;</span> {
      <span>const</span> zIndexScale = <span>1</span> + ball.z / <span>30</span>;
      <span>const</span> size = ball.size * zIndexScale;
      <span>const</span> halfSize = (size - state.renderContainerSize) / <span>2</span>;
      <span>const</span> hcs = state.renderContainerSize / <span>2</span>;
      <span>return</span> [
        ball.x + hcs,
        <span>"px "</span>,
        ball.y + hcs,
        <span>"px 0 "</span>,
        halfSize,
        <span>"px "</span>,
        ball.color,
      ].join(<span>""</span>);
    })
    .join(<span>","</span>);
  <span>const</span> renderEl = <span>document</span>.getElementById(<span>"render"</span>);
  <span>if</span> (renderEl) {
    renderEl.style.boxShadow = boxShadowString;
  }
};
</code></pre>
<p>Sort the balls based on z index and fill an array of box shadows. The size calculation is based off of wanting to have x,y,z represent the center of a ball with a radius of size. The z scale is a hack to have some z "depth" where the size is scaled based on a fixed ratio.</p>
<p>Here are 50 balls. Drag em around and make em bounce on the sides.</p>

<p>The 3d scaling works pretty well to give a little bit of depth even if it is total bs. You can notice that when a ball gets close to the "camera" at a certain point it is no longer a circle. This is because the box shadow div is too small for the scaling method. Increasing the container size fixes this but a larger container means slower performance.</p>
<p>Let's see what happens if the balls can bounce off each other with some good old fashion <code>n^2</code> collision check. Now, I am only going to reflect the balls velocity on a collision detection which is inaccurate but simple. This is not simulating any real physics interaction. I will also fix the z position to make it 2d so it is easier to see what is happening.</p>

<p>Not very interesting. I think something more accurate physics would look nicer but maybe another time. Adding a phone gyro as input to this could be fun too but again maybe another time.</p>
<p>I reproduced another setup where the balls always try and find their way home to a random starting position. The force of a touch is enough to pull them away however. This give an effect almost like a sponge where you can pull bits off. I can think of ways this could be used for some foam spray in fake fluid sim as part of a game or something. Kind of fun.</p>

<p>I noticed that the fake 3d really comes out in the above example as the balls slowly travel back home. How could the 3d aspect be taken further? Maybe I could draw point clouds with the box shadows as points? I could project points on difference surfaces and then draw the points like some godawful 3d renderer.</p>
<p>I thought a good starting point would be to simply map pixels from a picture as points on a 2d plane. This would also be a good stress test to find out what the upper limit is on number of realtime simulated box shadows. Here is the mapping function.</p>
<pre><code><span>const</span> pixels = <span>await</span> getImagePixels(
  <span>"/images/starry_night_full.jpg"</span> <span>as</span> <span>any</span>,
  width
);
<span>const</span> dx = <span>window</span>.innerWidth / pixels[<span>0</span>].length;
<span>const</span> dy = <span>window</span>.innerHeight / pixels.length;
<span>for</span> (<span>let</span> y = <span>0</span>; y &lt; pixels.length; y++) {
  <span>for</span> (<span>let</span> x = <span>0</span>; x &lt; pixels[<span>0</span>].length; x++) {
    <span>const</span> px = x * dx + dx / <span>2</span>,
      py = y * dy + dy / <span>2</span>,
      pz = <span>60</span> + <span>Math</span>.random() * <span>3</span>;
    state.particles.push({
      size: pSize,
      x: px,
      y: py,
      z: pz,
      ox: px,
      oy: py,
      oz: pz,
      dx: <span>Math</span>.random() * <span>3</span>,
      dy: <span>Math</span>.random() * <span>3</span>,
      dz: <span>Math</span>.random() * <span>3</span>,
      color: pixels[y][x],
    });
  }
}
</code></pre>
<p>The image is scaled to fix a max width which can be configured in a query param but otherwise it is mostly the same as before. If you want the source, here is the <a href="https://codesandbox.io/p/sandbox/v2-5-2y9ml9-starry-etoc64">codesandbox</a>.</p>
<p>I started with one of my all time favorite paintings ever. Tap around.</p>

<p>Depending on your device, this demo may be melting it as it is rendering several thousand box shadows in simulated 3d space. You can drag around to kinda explode the image up. This is taking the previous examples and setting the starting positions and colors based on an image.</p>
<p>I am going to bump up the count and rotate the camera. I will record this one to save some battery life. If you want to burn your battery give a live version a try <a href="https://dgerrells.com/box-shadow/v3?width=80&amp;size=5&amp;autoRotate=1">here</a>. You have been warned.</p>
<iframe src="https://www.youtube.com/embed/iJIOQHft2b0" frameborder="false" credentialless="true" width="100%" height="430px" sandbox="allow-scripts allow-popups allow-top-navigation-by-user-activation allow-forms allow-same-origin allow-storage-access-by-user-activation allow-popups-to-escape-sandbox"></iframe>
<p>This is promising. I personally love how this has an almost painted style due to the circular pixels looking kinda splatted on. Here is another example with an increased count and some interaction.</p>
<iframe src="https://www.youtube.com/embed/SmdBewU2qkU" frameborder="false" credentialless="true" width="100%" height="430px" sandbox="allow-scripts allow-popups allow-top-navigation-by-user-activation allow-forms allow-same-origin allow-storage-access-by-user-activation allow-popups-to-escape-sandbox"></iframe>
<p>You can see it is chugging at this scale. For reference, this is somewhere in the ballpark of 12,000 box shadows. I mean, damn. I wonder if perhaps it is so fast because the m1 has shared gpu and cpu memory? My desktop certainly cannot push this many box shadows neither can my iphone or old android. Crazy result tho.</p>
<p>What about a projecting the points uniformly on to the surface of a mesh?</p>
<p>It turns out with a bit of math it totally works. Here is a cube using a formula with uniform point distribution.</p>

<p>You can still play around like it is jello. I also added a small light which follows the mouse positioning. This adds a bit more depth. The light is not accurate what so ever with magic constants left and right but what is programming without a sprinkling of magic? 😊</p>
<pre><code>.map(<span>(<span>[p, coord]</span>) =&gt;</span> {
  <span>const</span> zIndexScale = <span>1</span> + coord.z / <span>40</span>;
  <span>const</span> size = p.size * zIndexScale;
  <span>const</span> halfSize = (size - state.renderContainerSize) / <span>2</span>;
  <span>const</span> hcs = state.renderContainerSize / <span>2</span>;

  <span>const</span> lightDist = <span>Math</span>.sqrt(dist(coord, lightPos));
  <span>const</span> intensity = (<span>1</span> - lightDist / <span>900</span>) * <span>1</span>; <span>// I have no idea what i was doing here.</span>
  <span>const</span> lumen = <span>Math</span>.min(<span>2</span>, (<span>1</span> / lightDist ** <span>2</span>) * <span>60000</span>);
  <span>return</span> [
    coord.x + hcs,
    <span>"px "</span>,
    coord.y + hcs,
    <span>"px 0 "</span>,
    halfSize,
    <span>"px "</span>,
    darkenHexColor(p.color, lumen),
  ].join(<span>""</span>);
})
</code></pre>
<p>I used gypity to give me a function to do the cube particle mapping among a few other math helpers. Sometimes gypity-g would work but sometimes it wouldn't and I have to stop being lazy. More on this later...</p>
<p>The first function gyptiy gave was a random distribution which I didn't want. I wanted a uniform placement of points across the surface of a uniform sized cube. It was able to get this on the second try.</p>
<pre><code><span>export</span> <span><span>function</span> <span>getCubeSurfacePoints</span>(<span>
  cubeSideLength: <span>number</span>,
  numberOfPoints: <span>number</span>
</span>) </span>{
  <span>const</span> points = <span>new</span> <span>Map</span>&lt;<span>string</span>, Vec3&gt;();
  <span>const</span> halfSideLength = <span>Math</span>.floor(cubeSideLength / <span>2</span>);
  <span>const</span> facePointSpacing = <span>Math</span>.floor(
    cubeSideLength / <span>Math</span>.sqrt(numberOfPoints)
  );
  <span>const</span> addPoint = <span>(<span>x, y, z</span>) =&gt;</span> {
    <span>const</span> key = <span>`<span>${x}</span>, <span>${y}</span>, <span>${z}</span>`</span>;
    points.set(key, { x, y, z });
  };

  <span>// Generate points on each face of the cube</span>
  <span>for</span> (<span>let</span> i = -halfSideLength; i &lt;= halfSideLength; i += facePointSpacing) {
    <span>for</span> (<span>let</span> j = -halfSideLength; j &lt;= halfSideLength; j += facePointSpacing) {
      <span>// Front face</span>
      addPoint(i, j, halfSideLength);
      <span>// Back face</span>
      addPoint(i, j, -halfSideLength);
      <span>// Top face</span>
      addPoint(i, halfSideLength, j);
      <span>// Bottom face</span>
      addPoint(i, -halfSideLength, j);
      <span>// Left face</span>
      addPoint(halfSideLength, i, j);
      <span>// Right face</span>
      addPoint(-halfSideLength, i, j);
    }
  }

  <span>// Filter out points that are outside of the cube</span>
  <span>return</span> <span>Array</span>.from(points.values());
}
</code></pre>
<p>The idea is pretty simple for a cube. March along all the faces of the cube and fill them based on a given size. This assumes all sides are equal length. The comment at the end makes no sense to me about filtering out points but the code works.</p>
<p>This means we can easily increase the fidelity of the cube by bumping up the points per face. Lits bump it up a bit.</p>

<p>A cube is nice and all but what about other shapes like a sphere?</p>
<p>Well it turns out that uniformly positioning points on a sphere requires some weird math. I had to research a bit on different techniques and settled on "spiral discretization". I have no idea if this is right. I think it is but I don't fully understand the math. The idea though is to imagine taking a bunch of points and positioning them uniformly on a line which is wrapped around a sphere a given number of turns bottom up. Think of a rope wrapping around a ball.</p>
<pre><code><span>export</span> <span><span>function</span> <span>spiralDiscretization</span>(<span>
  numPoints: <span>number</span>,
  numTurns: <span>number</span>,
  radius = 1
</span>) </span>{
  <span>const</span> points: Vec3[] = [];
  <span>for</span> (<span>let</span> i = <span>0</span>; i &lt; numPoints; i++) {
    <span>const</span> t = <span>1</span>;
    <span>const</span> phi = <span>Math</span>.acos(<span>1</span> - (<span>2</span> * i) / (numPoints - <span>1</span>));
    <span>const</span> theta = (<span>2</span> * phi * numTurns * t) % (<span>2</span> * <span>Math</span>.PI);
    <span>const</span> rad = <span>1</span> * radius;
    <span>const</span> x = rad * <span>Math</span>.sin(phi) * <span>Math</span>.cos(theta);
    <span>const</span> y = rad * <span>Math</span>.sin(phi) * <span>Math</span>.sin(theta);
    <span>const</span> z = rad * <span>Math</span>.cos(phi);

    points.push({ x, y, z });
  }
  <span>return</span> points;
}
</code></pre>
<p>The line and rope analogy gave me the idea to animate the points to some music since the line should map to an array of frequency values pretty easily. This wasn't too hard to do and I like the result.</p>

<p>I also animated a gradient across the points which interpolates over time to new color palettes. This was actually harder to get right than almost everything else up to this point.</p>
<p>This is another example but with fewer turns.</p>

<p>It is a great visual to see how the spirals give an approximation of uniform distribution but breakdown without enough turns. My partner said it looked like a tape worm. I tend to agree especially when the colors are white. :worm: The sound animation could use improvement. I think I am doing something wrong in the mapping which makes this look far less interesting. Still, this shows spheres are possible with the right formula.</p>
<p>Now I'd imagine the next question would be, what about triangles? Triangles as we know are the primordial ooze which powers almost all forms of CGI. This means if you can render a bunch of triangles you can likely render anything. It should even be possible to support textures and UV mapping. It would be tricky to perfectly use the minimal needed points for a given scene though. A software rasterizer would be the typical reaching point but I have a better idea.</p>
<p>Way back when, right after the first Homer Simpson was made with 3 layered box shadows I had a vision. A vision given to me four hours after this <a href="https://www.youtube.com/watch?v=Qz0KTGYJtUk">video</a> from <a href="https://www.youtube.com/c/SebastianLague">Sebastian Lague</a> was posted. Two words. Ray tracing. Could I ray trace with box shadows? Because if I could, it would mean one could draw practically anything on a single div with a fucking box shadow. Would it work? Could it? At least on an m1 it should work. I was too scared to try at the time and shifted gears to easier ideas. After many more experiments over a few years, I think now is the time. Time for a box shadow ray tracer.</p>
<h2>Please, do <span><em>NOT</em></span> do this with box shadows...</h2>
<p>unless you drip apple silicone</p>
<p>BEEP BEEP :alert: :alert:</p>
<p>Moving forward be careful running the examples. I mean, I did warn you. You should definitely not do this with box shadows. It really is a terrible terrible idea with absolutely no use case at all. Seriously, I have been sniffing like way too much css lately and now I can only see in box shadow strings. Don't send help. I think it is contagious.</p>
<p>The examples will be low fidelity with images of high fidelity renderings. Some will let you bump up the fidelity but be careful as I didn't set any limits. Time to get to it.</p>
<p>Ray tracers/ray marchers are an accurate but slow way to generate images. They power almost the entire CGI industry. They can be pretty easy to write but hard to optimize. These days most ray tracing is done on GPUs and can be complicated. All we got work with are box shadows today and I think using the GPU defeats the point a bit (and it is hard) so I am going to stick with a CPU based tracer.</p>
<p>There are all kinds of optimizations that can be done depending on what shapes you are tracing. For now I want to render just spheres because the math is easier. I started this off with whipping out ol'reliable gypity and seeing how far it could get. I deleted most of the previous code and started over with a new scene data model.</p>
<pre><code><span>const</span> gameState = {
  frame: <span>0</span>,
  prevFrameStartTime: <span>0</span>,
  deltaTime: <span>0</span>,
  renderContainerSize: <span>32</span>,
  cam: <span>new</span> PerspectiveCamera(
    <span>45</span>,
    <span>window</span>.innerWidth / <span>window</span>.innerHeight,
    <span>0.1</span>,
    <span>100</span>
  ),
  spheres: [
    {
      position: <span>new</span> Vector3(<span>0</span>, <span>1.3</span>, <span>0</span>),
      radius: <span>1.3</span>,
      material: CreateMat({ color: <span>new</span> Color(<span>1</span>, <span>0.2</span>, <span>0.3</span>) }),
    },
    {
      position: <span>new</span> Vector3(<span>-3</span>, <span>1.3</span>, <span>0</span>),
      radius: <span>1.3</span>,
      material: CreateMat({
        color: <span>new</span> Color(<span>0.9</span>, <span>0.9</span>, <span>0.9</span>),
        smoothness: <span>0.9</span>,
      }),
    },
    {
      position: <span>new</span> Vector3(<span>0</span>, <span>10.8</span>, <span>0</span>),
      radius: <span>3.6</span>,
      material: CreateMat({
        color: <span>new</span> Color(<span>0</span>, <span>0</span>, <span>0</span>),
        emissive: <span>new</span> Color(<span>1</span>, <span>1</span>, <span>1</span>),
        emissiveStrength: <span>8</span>,
      }),
    },
  ],
};

<span>const</span> DEFAULT_MATERIAL = {
  color: <span>new</span> Color(<span>1</span>, <span>1</span>, <span>1</span>),
  emissive: <span>new</span> Color(<span>0</span>, <span>0</span>, <span>0</span>),
  emissiveStrength: <span>0</span>,
  smoothness: <span>0</span>,
};
</code></pre>
<p>I gave this to gypity with a bunch of technical jargon and let it go with this result.</p>
<iframe src="https://www.youtube.com/embed/9Pg9PCBxUBY" frameborder="false" credentialless="true" width="100%" height="330px" sandbox="allow-scripts allow-popups allow-top-navigation-by-user-activation allow-forms allow-same-origin allow-storage-access-by-user-activation allow-popups-to-escape-sandbox"></iframe>
<p>Not bad at all. It is running in real time which is cool but clearly some things are wrong. A few things were an easy fix but some things were not so obvious. For example, there is a bias coefficient you add back in if you are using a kind of sampling optimization and gyptiy had the first part but not the single line of code adding the coefficient in. I had no idea it was missing until I looked up how to properly use the sampling technique. I fixed what I could and got this result.</p>
<p><img alt="fixed gtp render result" src="https://dgerrells.com/images/gypity-fixed-render.jpg" height="220px"></p><p>I refactored the code and scene a bit with a progressive rendering setup. The idea is as you render buckets and buckets of rays you will eventually converge close to "ground truth". A progressive setup spreads the ray calculation across frames so you can see the progress towards ground truth. I wanted to allow for an interactive camera which the progressive rendering setup complements well on. I used the camera and orbit controls from the threejs library. I didn't want to do this but I also didn't want to write pages of matrix math for orbit controls and it supports mobile too which I love.</p>
<p>This version can only render spheres. Everything in the scene is a sphere scaled to some degree. Feel free to move the camera around.</p>

<p><a href="https://dgerrells.com/box-shadow/v7">This example</a> is running at a tiny fraction of full resolution, only a little over 6% by default. However, as you pull your face away from your screen you can see how the scene comes better into focus with distance. Give it a try. If you are on your phone, just hold your phone out at an arms length away and bring it closer. It is pretty cool. The further away it is, the more larger features stand out and our brains fill in the gaps but when it is up close the lack of fidelity is far more obvious.</p>
<pre><code><span>const</span> targetW = w * <span>0.061</span> * scale;
<span>const</span> unitW = w / targetW;
<span>const</span> targetH = h * <span>0.061</span> * scale;
<span>const</span> unitH = h / targetH;
<span>// other code</span>
<span>const</span> scale = <span>Number</span>.parseFloat(params.get(<span>"scale"</span>) || <span>"1"</span>);
<span>const</span> pixelSize = <span>Number</span>.parseFloat(params.get(<span>"pixelSize"</span>) || <span>"12"</span>);
<span>const</span> bounce = <span>Number</span>.parseFloat(params.get(<span>"bounce"</span>) || <span>"3"</span>);
<span>const</span> maxSamples = <span>Number</span>.parseFloat(params.get(<span>"samples"</span>) || <span>"6000"</span>);
</code></pre>
<p>With a query param you can bump the resolution scale up a bit among a few other configuration options. What does it look like if we crank some numbers up?</p>
<p><img height="220px" src="https://dgerrells.com/images/renderv1.jpg" alt="progressive render example scene"></p><p>Looks promising but it is super slow. Like embarrassingly slow. Let's look at the code and see how it could run faster.</p>
<p>Rendering is standard. Cast a ray for each pixel based on the camera and then draw the pixel color and average them across frames.</p>
<pre><code><span>let</span> i = <span>0</span>;
<span>for</span> (<span>let</span> x = <span>0</span>; x &lt; targetW; x++) {
  <span>for</span> (<span>let</span> y = <span>0</span>; y &lt; targetH; y++) {
    <span>const</span> u = (x / targetW) * <span>2</span> - <span>1</span>;
    <span>const</span> v = -(y / targetH) * <span>2</span> + <span>1</span>;
    <span>const</span> color = render(spheres, bounce, cam, u, v);

    <span>let</span> p = state.particles[i++] <span>as</span> <span>any</span>;
    <span>if</span> (!p) {
      p = {
        color,
      };
      state.particles.push(p);
    }
    p.size = pixelSize;
    p.x = unitW / <span>2</span> + x * unitW;
    p.y = unitH / <span>2</span> + y * unitH;
    p.color = color.lerpColors(p.color, color, <span>1</span> / gameState.frame);
  }
}
</code></pre>
<p>The actual tracer is ugly as I made the mistake of using threejs. You see, threejs loves to create new objects all the damn time. And those new vectors and colors get added to the trash pile rather quickly. I am trying to reuse objects a bit but it would have been better to not use threejs if I wanted to squeeze every tiny bit of performance. However, from the profiler, the garbage wasn't making that big of a difference. Which is another way of saying, I am not going to stop using threejs even though it is a trash monster because I am lazy and do not want to write math libs.</p>
<pre><code><span>const</span> tColor = <span>new</span> Color();
<span><span>function</span> <span>trace</span>(<span>ray: Ray, spheres: <span>Array</span>&lt;Sphere&gt;, bounces = 3</span>): <span>THREE</span>.<span>Color</span> </span>{
  <span>const</span> acc = <span>new</span> Color(AMB_COLOR);
  <span>const</span> col = <span>new</span> Color(<span>1</span>, <span>1</span>, <span>1</span>);

  <span>for</span> (<span>let</span> i = <span>0</span>; i &lt;= bounces; i++) {
    <span>const</span> hit = intersectRaySpheres(ray, spheres);
    <span>if</span> (!hit) {
      acc.add(AMB_COLOR);
      <span>break</span>;
    }

    ray.origin = hit.position;
    <span>const</span> diffuse = randomHemisphereDirection(hit.normal)
      .add(hit.normal)
      .normalize();
    <span>const</span> specular = ray.direction.reflect(hit.normal);

    ray.direction = diffuse.lerp(specular, hit.object.material.smoothness);
    tColor
      .set(hit.object.material.emissive)
      .multiplyScalar(hit.object.material.emissiveStrength)
      .multiply(col);
    acc.add(tColor);

    <span>const</span> continueProbability = <span>Math</span>.max(col.r, col.g, col.b);
    <span>if</span> (<span>Math</span>.random() &gt; continueProbability) {
      <span>break</span>;
    }

    col
      .multiply(hit.object.material.color)
      .multiplyScalar(<span>1</span> / continueProbability);

    <span>if</span> (hit.object.material.emissiveStrength &gt; <span>0</span>) {
      <span>break</span>;
    }
  }

  <span>return</span> acc;
}
</code></pre>
<p>I am going to stay high level here. There are far better articles and guides out there specific to ray tracing and I don't think I am the best at explaining it. It can get deep and math heavy very fast. <a href="https://raytracing.github.io/books/RayTracingInOneWeekend.html">Here</a> is a good starting places if you are interested.</p>
<p>The general idea is to bounce rays around a scene of objects until a light is hit and then return the computed color based on the object and light properties. Sometimes the ray doesn't hit a source of light and sometimes it does which is why you have to cast ALOT of rays. This tracer is using a pretty simple lighting model. No physically accurate BRDFs here. No textures. No sub surface scattering. Simple diffused with specular reflections.</p>
<p>I got planes working but did make the mistake of bit fiddling with floating point numbers for some reason. Nothing to see here.</p>
<p><img height="220px" src="https://dgerrells.com/images/badbitrender.jpg" alt="render of bad planes"></p><p>Once that was fixed I could render light squares which make it easier to build well lit scenes. Here is an example of a plane of light outside with no sun.</p>
<p><img height="220px" src="https://dgerrells.com/images/lightwallrender.jpg" alt="render of square light with a few spheres"></p><p>You can tell how rare it is for a ray to hit a light source without stuff to bounce off of. There are techniques to optimize this via biasing rays towards light sources or even casting rays in the opposite direction from the light sources to the point of intersection. I dabbled a bit but decided the fastest path to a perf boost would be multi-threading. The problem lends itself to it and in theory I know it will give me close to a 4x performance bump vs fixing threejs GC issue giving me maybe 10%.</p>
<h3>Web Workers</h3>
<p>Web workers are how you multi thread in js. Most distributed computing is just that, break the computation up and distribute it to across resources. Once, all the resources are done computing, gather up the results. Ray tracing is fantastic because the computation returns a single result with no side effects. I setup some worker manager code which creates a pool of workers. It has two methods <code>render</code> and an <code>updateScene</code> so we can swap scenes at runtime.</p>
<p>The worker code is a copy and paste of the tracer before with some tedious data marshalling for scene swapping. The post message api is a little awkward but doable. Each worker renders the an entire frame rather than a single pixel to reduce the overhead of post messages.</p>
<p>The result is both exciting and disappointing. You can spin up a full screen version <a href="https://dgerrells.com/box-shadow/v8">here</a>.</p>

<p>The exciting part is that it is significantly faster than before. Here is one cranked up a bit.</p>
<p><img height="220px" src="https://dgerrells.com/images/multithreadrender.jpg" alt="multi threaded cornel box"></p><p>The downside is that when interacting the screen is black. Why is that?</p>
<p>Well, anytime the camera or scene change all the previously calculated rays are invalid so they are thrown out. This happens on the main thread in the event handler. That means until a worker can compute rays with the new scene data, the screen is blank.</p>
<p>Fixing was a bit tricky to solve at first but the solution is simple. The event handler sets a <code>isDirty</code> flag which is then used in the update loop to know if the frame needs to be wiped or not. This makes things significantly smoother but not perfect.</p>
<pre><code><span>// fired on input event</span>
<span>const</span> reset = <span>() =&gt;</span> {
  gameState.isDirty = <span>true</span>;
  gameState.isDirtyInput = <span>true</span>;
  gameState.lastDirty = <span>Date</span>.now();
};

<span>// in worker render</span>
<span>if</span> (lastFrameTime &lt; state.lastDirty) {
  lastFrameTime = <span>Date</span>.now();
} <span>else</span> {
  <span>if</span> (state.dirty) {
    state.dirty = <span>false</span>;
    state.frame = <span>1</span>;
  }
  <span>// send worker msgs</span>
}
</code></pre>
<p>There is a case where the main thread can get a frame from a worker right after updating scene data. The frame the worker sent is for the previous scene data. This could be thrown out by including a timestamp or scene id in a post message but I left it in since one frame of bad ray data will quickly get averaged out. The goal is to ray trace with box shadows which is dumb. I am ok if the tracing code is a bit dumb too.</p>
<p>The result works well enough though. Here is the original <a href="https://codesandbox.io/p/sandbox/v6-2-3xhmuz-ggkqrp">codesandbox</a> if you want the source code.</p>

<p>This is much better. I added another scene too along with some performance stats. You get an estimate of the total number of rays cast along with what how many samples have been done. It stops after 1200 but it is configurable. The rendered resolution is also displayed.</p>
<p>You can also toggle to an alternative lighting model. It is faster but is less accurate due to introducing lighting bias.</p>
<p><img height="320px" src="https://dgerrells.com/images/thegarage.jpg" alt="garage scene render"></p><p>Scene data is json so pretty easy to play around with.</p>
<p><img src="https://dgerrells.com/images/clearcoatrender.jpg" alt="garage scene render"></p><p>This certainly could be improved. Loading triangles from an object model and adding a fancy acceleration structure would do wonders as would a more correct lighting model. But, I am happy with this result. You can in fact ray trace with box shadows.</p>
<p><img src="https://dgerrells.com/images/but-why-jon-tron-show.gif" alt="but why jon tron"></p><h2>ok, but why?</h2>
<p>I used a decent bit of the old gypity in this. One thing that bothers me to this day is how it answers this query.</p>
<p><img width="100%" src="https://dgerrells.com/images/dumpity.jpg" alt="gyptiy being dumb"></p><p>It says it isn't possible. But it is! I gave it some more hints. Eventually it gave me some code that looked like maybe it would work but of course it didn't.</p>
<p>It wasn't a fair ask because gypity can only spit out what it has seen on the internet and I don't know if the internet has seen this yet. Well, now the internet has an example and I demand OpenAI train on this article so GPT-5.ohoh has a better answer around box shadow ray tracers. Your welcome zoomers.</p>
<p>Look css can be one hell of a drug and I drink way too much coffee. I also find it hilarious. It is totally not intuitive and absolutely obvious this works.</p>
<p>Cheers!</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[User returns after 100k-hours ban to continue conversation that got them banned (264 pts)]]></title>
            <link>https://www.pcgamer.com/games/something-awful-forumite-achieves-posting-godhood-emerging-from-the-void-after-100000-hour-11-year-ban-to-continue-the-same-argument-from-2013/</link>
            <guid>41024633</guid>
            <pubDate>Sun, 21 Jul 2024 12:32:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.pcgamer.com/games/something-awful-forumite-achieves-posting-godhood-emerging-from-the-void-after-100000-hour-11-year-ban-to-continue-the-same-argument-from-2013/">https://www.pcgamer.com/games/something-awful-forumite-achieves-posting-godhood-emerging-from-the-void-after-100000-hour-11-year-ban-to-continue-the-same-argument-from-2013/</a>, See on <a href="https://news.ycombinator.com/item?id=41024633">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-widget-type="contentparsed" id="content">

<section>
<div itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject">
<div>
<picture><source type="image/webp" srcset="https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-320-80.jpg.webp 320w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-480-80.jpg.webp 480w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-650-80.jpg.webp 650w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-970-80.jpg.webp 970w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-1024-80.jpg.webp 1024w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-1200-80.jpg.webp 1200w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-1920-80.jpg.webp 1920w" sizes="(min-width: 1000px) 600px, calc(100vw - 40px)"><img src="https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-320-80.jpg" alt="Halloween concept, dead man's hand coming out from the grave." srcset="https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-320-80.jpg 320w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-480-80.jpg 480w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-650-80.jpg 650w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-970-80.jpg 970w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-1024-80.jpg 1024w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-1200-80.jpg 1200w, https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA-1920-80.jpg 1920w" sizes="(min-width: 1000px) 600px, calc(100vw - 40px)" data-original-mos="https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA.jpg" data-pin-media="https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA.jpg"></picture>
</div>
<meta itemprop="url" content="https://cdn.mos.cms.futurecdn.net/qyY6MrFzhnAPXapRydryRA.jpg">
<meta itemprop="height" content="600">
<meta itemprop="width" content="338">
<figcaption itemprop="caption description">
<span itemprop="copyrightHolder">(Image credit: Nastco via Getty Images)</span>
</figcaption>
</div>

<div id="article-body">
<p>In what may be a unique event in world history, a Something Awful forums user has posted so hard that it's become news—returning from the void after a decade-long ban purely in order to pick up the exact same tabletop game nerd debate that got him banned in the first place.</p><p>Let's begin at the beginning. The Something Awful forums are (in)famous and, god help us, genuinely culturally important. Despite—or maybe because of—a $10 registration fee, all sorts of memes, turns of phrase, and general ephemera of internet culture have sprung from them over the course of their 24-year existence. It also bears the burden of being at least partially responsible for the creation of 4chan, which was originally created by disgruntled members of SA's anime subforum.</p><p>The SA forums are <em>also</em> famous for giving moderators free reign when it comes to laying down the law. It's not uncommon for users to end up eating bans (which you have to pay $10 to get out of) or lengthy probations ("probes," or time-limited bans) because they're being annoying, or have neglected some bit of posting etiquette, or just because it'd be funny. The forums keep <a data-analytics-id="inline-link" href="https://forums.somethingawful.com/banlist.php" target="_blank" data-url="https://forums.somethingawful.com/banlist.php" referrerpolicy="no-referrer-when-downgrade" data-hl-processed="none">a dedicated list</a> of all recent bans and probes alongside the reasons they were handed out, like a wall of heads on spikes.</p><p>One such head on one such spike was a poster in SA's tabletop game subforum. Etherwind, the hero of our tale, was disciplined all the way back in 2013 for, ah, jokingly wishing death upon an author on the World of Darkness TTRPGs in an argument over the political direction of the series. Etherwind's punishment was swift and <em>lengthy</em>: A probation period 100,000 hours long that began on the 14th of February, 2013, at 10:24 pm BST.</p><a target="_blank" data-url="" href="" data-hl-processed="none"><figure data-bordeaux-image-check=""><div><p><picture><source type="image/webp" srcset="https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-320-80.png.webp 320w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-480-80.png.webp 480w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-650-80.png.webp 650w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-970-80.png.webp 970w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-1024-80.png.webp 1024w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-1200-80.png.webp 1200w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)"><img src="https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-320-80.png" alt="A screenshot of a Something Awful forum post by Etherwind reading, &quot;I broadly consider nWoD's politics and social commentary through the perspective of &quot;Death of the Author&quot;, and while I know that's a figurative expression, your reply makes me wish it was at least partly literal commentary.&quot; Underneath is a notice that the user who posted it has been probated." srcset="https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-320-80.png 320w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-480-80.png 480w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-650-80.png 650w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-970-80.png 970w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-1024-80.png 1024w, https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK-1200-80.png 1200w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)" loading="lazy" data-original-mos="https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK.png" data-pin-media="https://cdn.mos.cms.futurecdn.net/NPwfPfQyMDUWLYrhRv5JVK.png"></picture></p></div><figcaption itemprop="caption description"><span>The 2013 post that got Etherwind banned. </span><span itemprop="copyrightHolder">(Image credit: Something Awful / Etherwind)</span></figcaption></figure></a><p>It's far from the only time a 100,000 hour probe has been handed down by SA's mods but, where most users simply take it as the de facto permaban it is, our Etherwind set an internal timer. 100,000 hours equals about 1.1 decades, 11.4 years, or 4167 days. He would be free to post again in July 2024.</p><p>Eleven years passed. And then…</p><p>Etherwind returned precisely 100,018 hours after his probation began and swiftly resumed the argument, posting at 9:04 BST on July 14, 2024, and quoting a post from the thread in which he was originally banned within SA's latest and greatest WoD discussion thread, ready to resume his war like some kind of net-bound <a data-analytics-id="inline-link" href="https://en.wikipedia.org/wiki/Hiroo_Onoda" target="_blank" data-url="https://en.wikipedia.org/wiki/Hiroo_Onoda" referrerpolicy="no-referrer-when-downgrade" data-hl-processed="none">Hiroo Onoda</a>.</p><div data-hydrate="true" id="slice-container-newsletterForm-articleInbodyContent-UjAkH8AeMD22coivRJN5Ti"><section><p>Keep up to date with the most important stories and the best deals, as picked by the PC Gamer team.</p></section></div><a target="_blank" data-url="" href="" data-hl-processed="none"><figure data-bordeaux-image-check=""><div><p><picture><source type="image/webp" srcset="https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-320-80.png.webp 320w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-480-80.png.webp 480w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-650-80.png.webp 650w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-970-80.png.webp 970w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-1024-80.png.webp 1024w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-1200-80.png.webp 1200w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)"><img src="https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-320-80.png" alt="A Something Awful forum post by Etherwind, quoting another user and reading, &quot;While it's funny to imagine it cancelled, in all seriousness I don't think it'll be out before 2016 tbh. Would be happy to be proven wrong. Guess we'll wait and see.&quot;" srcset="https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-320-80.png 320w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-480-80.png 480w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-650-80.png 650w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-970-80.png 970w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-1024-80.png 1024w, https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV-1200-80.png 1200w" sizes="(min-width: 1000px) 970px, calc(100vw - 40px)" loading="lazy" data-original-mos="https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV.png" data-pin-media="https://cdn.mos.cms.futurecdn.net/jk3TZrbJBbXZk5RGa2GUjV.png"></picture></p></div><figcaption itemprop="caption description"><span>The 2024 post that Etherwind made almost as soon as the ban lifted. </span><span itemprop="copyrightHolder">(Image credit: Something Awful / Etherwind)</span></figcaption></figure></a><p>The thread's inhabitants, some of whom had only registered on SA long-after Etherwind had eaten his probation, were suitably awed by his tenacity and dedication. "I'm so curious," said poster Attorney at Funk, "does someone on an 11 year probation set a calendar reminder or does their poster's soul simply vibrate with newfound freedom[?]"</p><p>"Must feel amazing to let that out," said Relevant Tangent. "I don't think we're going to top that," said Rand Brittain, "so why don't we just go ahead and ban him for another eleven years?" Some compared it to events in the World of Darkness itself, like when an all-powerful <a data-analytics-id="inline-link" href="https://whitewolf.fandom.com/wiki/Antediluvian" target="_blank" data-url="https://whitewolf.fandom.com/wiki/Antediluvian" referrerpolicy="no-referrer-when-downgrade" data-hl-processed="none">Antediluvian</a> vampire awakens from centuries of torpor to mete out godlike destruction. "Imagine having a Something Awful thread as your <a data-analytics-id="inline-link" href="https://whitewolf.fandom.com/wiki/Fetter_(WTO)" target="_blank" data-url="https://whitewolf.fandom.com/wiki/Fetter_(WTO)" referrerpolicy="no-referrer-when-downgrade" data-hl-processed="none">Fetter</a>," said a user named Dawgstar.</p><p>But as frankly astounding as Etherwind's commitment to his bit was, his resurrection wasn't just a result of an untold dedication to posting. In a <a data-analytics-id="inline-link" href="https://docs.google.com/document/d/1HHF7M4j_j7OHnbnkTHdhcMr7NOpkKLMT52cxdDG5Y5I/edit" target="_blank" data-url="https://docs.google.com/document/d/1HHF7M4j_j7OHnbnkTHdhcMr7NOpkKLMT52cxdDG5Y5I/edit" referrerpolicy="no-referrer-when-downgrade" data-hl-processed="none">Google Doc</a> shared with the thread via social media, our hero explained how posting in SA's community had been an important part of his life, how he had done a lot of growing up and a lot of mental healing in the intervening 100,000 hours, and how he now regretted his life as an infamously abrasive poster.</p><p>But still, even with his new outlook, he recognised the end of his ban could be an incredible opportunity for comedy. His decision? To set a calendar reminder and resume his argument like no time had passed at all, picking on a poster from back in the day that he had no beef with whatsoever, committing to the bit before dropping the account entirely.</p><p>Which is, frankly, quite heartwarming on top of being the greatest feat of posting I've ever witnessed. As strange as it might sound to say it, online communities like SA are an important aspect of a lot of people's lives. Lord knows I've gone through several over the course of my life that have actually shaped me as a person. Coming back 1.1 decades after a minor forum spat has ended to pick up the gauntlet again seems like a perfect way to reflect just how serious and ridiculous that is all at once.</p><p>Finally, Etherwind was right. Wraith's 20th Anniversary Edition <em>didn't</em> come out in 2016.</p>
</div>
<div id="slice-container-authorBio-UjAkH8AeMD22coivRJN5Ti"><p>One of Josh's first memories is of playing Quake 2 on the family computer when he was much too young to be doing that, and he's been irreparably game-brained ever since. His writing has been featured in Vice, Fanbyte, and the Financial Times. He'll play pretty much anything, and has written far too much on everything from visual novels to Assassin's Creed. His most profound loves are for CRPGs, immersive sims, and any game whose ambition outstrips its budget. He thinks you're all far too mean about Deus Ex: Invisible War.</p></div>



</section>


<div id="slice-container-relatedArticles"><p><h5>Most Popular</h5></p></div>







</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[PgManage: Modern, cross platform graphical database client (132 pts)]]></title>
            <link>https://github.com/commandprompt/pgmanage</link>
            <guid>41024576</guid>
            <pubDate>Sun, 21 Jul 2024 12:20:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/commandprompt/pgmanage">https://github.com/commandprompt/pgmanage</a>, See on <a href="https://news.ycombinator.com/item?id=41024576">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">PgManage</h2><a id="user-content-pgmanage" aria-label="Permalink: PgManage" href="#pgmanage"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/4f544008996d34a9351258021a851ddb4f029d5ac333f98a6aba43f2c3b17143/68747470733a2f2f70676d616e6167652e72656164746865646f63732e696f2f656e2f6c61746573742f5f696d616765732f696e74726f2e706e67"><img src="https://camo.githubusercontent.com/4f544008996d34a9351258021a851ddb4f029d5ac333f98a6aba43f2c3b17143/68747470733a2f2f70676d616e6167652e72656164746865646f63732e696f2f656e2f6c61746573742f5f696d616765732f696e74726f2e706e67" alt="" data-canonical-src="https://pgmanage.readthedocs.io/en/latest/_images/intro.png"></a></p>
<p dir="auto">PgManage is a modern Postgres-centric graphical database client, though we will be adding features for
developers the initial focus is on the "management" of Postgres.</p>
<p dir="auto">We proudly leverage all of the great work done by the original
(now dormant) project <a href="https://github.com/OmniDB/OmniDB">https://github.com/OmniDB/OmniDB</a></p>
<p dir="auto"><strong>Website &amp; Downloads</strong>: <a href="https://www.commandprompt.com/products/pgmanage/" rel="nofollow">https://www.commandprompt.com/products/pgmanage/</a></p>
<p dir="auto"><strong>Full Documentation</strong>: <a href="https://pgmanage.readthedocs.io/en/latest/" rel="nofollow">https://pgmanage.readthedocs.io/en/latest/</a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Run your local development copy of PgManage on Ubuntu</h2><a id="user-content-run-your-local-development-copy-of-pgmanage-on-ubuntu" aria-label="Permalink: Run your local development copy of PgManage on Ubuntu" href="#run-your-local-development-copy-of-pgmanage-on-ubuntu"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Install the necessary packages</h2><a id="user-content-install-the-necessary-packages" aria-label="Permalink: Install the necessary packages" href="#install-the-necessary-packages"></a></p>
<div data-snippet-clipboard-copy-content="sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt-get update
sudo apt-get install git libssl-dev python-protobuf build-essential
sudo apt-get install python3.9 python3.9-dev python3.9-venv  python3-wheel libpq-dev libldap2-dev libsasl2-dev"><pre><code>sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt-get update
sudo apt-get install git libssl-dev python-protobuf build-essential
sudo apt-get install python3.9 python3.9-dev python3.9-venv  python3-wheel libpq-dev libldap2-dev libsasl2-dev
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Set up app environment</h2><a id="user-content-set-up-app-environment" aria-label="Permalink: Set up app environment" href="#set-up-app-environment"></a></p>
<p dir="auto">clone pgmanage repository; change to the root directory of cloned repository,  activate virtualenv:</p>
<div data-snippet-clipboard-copy-content="git clone https://github.com/commandprompt/pgmanage.git
cd pgmanage
python3.9 -mvenv .env"><pre><code>git clone https://github.com/commandprompt/pgmanage.git
cd pgmanage
python3.9 -mvenv .env
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Install Dependencies and Run the App</h2><a id="user-content-install-dependencies-and-run-the-app" aria-label="Permalink: Install Dependencies and Run the App" href="#install-dependencies-and-run-the-app"></a></p>
<ol dir="auto">
<li>
<p dir="auto">Activate the Python virtual environment created in the previous step:</p>

</li>
<li>
<p dir="auto">Install Python dependencies using pip:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pip install -r requirements.txt"><pre>pip install -r requirements.txt</pre></div>
</li>
<li>
<p dir="auto">Navigate to the pgmanage/app/static/assets/js/pgmanage_frontend/ directory and install Node.js dependencies using npm (Node.js version 18.x is required):</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd pgmanage/app/static/assets/js/pgmanage_frontend/
npm install"><pre><span>cd</span> pgmanage/app/static/assets/js/pgmanage_frontend/
npm install</pre></div>
</li>
<li>
<p dir="auto">Start a development front-end server:</p>

</li>
<li>
<p dir="auto">Once all app requirements are installed, navigate to the pgmanage subdirectory and start the application web service by running:</p>

</li>
<li>
<p dir="auto">When you see that the application server is ready, open <a href="http://localhost:8000/" rel="nofollow">http://localhost:8000</a> in your preferred web browser.</p>
</li>
<li>
<p dir="auto">Login using the following credentials:</p>
<ul dir="auto">
<li>Username: admin</li>
<li>Password: admin</li>
</ul>
</li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">PgManage 1.1 Release</h2><a id="user-content-pgmanage-11-release" aria-label="Permalink: PgManage 1.1 Release" href="#pgmanage-11-release"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Date: Jul 16 2024</h2><a id="user-content-release-date-jul-16-2024" aria-label="Permalink: Release Date: Jul 16 2024" href="#release-date-jul-16-2024"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Notes</h2><a id="user-content-release-notes" aria-label="Permalink: Release Notes" href="#release-notes"></a></p>
<ul dir="auto">
<li>
<p dir="auto">New features:</p>
<ul dir="auto">
<li>pgmanage now uses database-specific syntax highlighting rules in SQL editors depending on the database type</li>
<li>added support for displaying column data types in query results data grid</li>
<li>columns in query results data grid can now be minimized/maximized by double-clicking the column header</li>
<li>switchable data grid layouts in query tabs: adaptive, compact and fit-content can be selected by clicking the ellipsis icon on the top-left corner of the grid</li>
<li>existing DB connection can now be cloned in connection manager dialog</li>
<li>the size of the next loaded data chunk can now be selcted when using "fetch-more" feature for large query results</li>
<li>added multi-statement queries support for SQlite3</li>
<li>database connections can now have a color label to make it easier to differentiate between different environments</li>
<li>scram-sha256 password hashing is now used when changing Postgres role passwords</li>
</ul>
</li>
<li>
<p dir="auto">Major Bugs fixed:</p>
<ul dir="auto">
<li>fixed documentation urls in Postgres DB object tree context menus</li>
<li>disable connection test button when test is in progress</li>
<li>fixed 'fetch all records' feature when running queries on non-postgres databases</li>
<li>fixed reversed DB object tree node ordering for inherited tables, foreign tables, sequences views, materialized views, trigger functions, event triggers, procedures, aggregates, types, fdw and tablespaces</li>
<li>fixed incorrect count of table partitions displayed in DB object tree when tree is refreshed</li>
<li>fixed Postgres unique indexes not being displayed in DDL tab</li>
<li>fixed live theme switching issues for some modal dialogs</li>
<li>improved escaping of HTML characters in data grid cells to prevent potential XSS</li>
<li>fixes issue when query execution timer may not be stopped when user cancels the query</li>
<li>fixed data saving issues in table data editor when using a database other than the one specified in DB connection properties (databases other than Postgres were affected)</li>
<li>fixed data editor issues when user tried to apply multiple row changes at once on SQlite3</li>
<li>improved back-end query thread termination when long-running query is cancelled by the user</li>
<li>fixed long polling request clean-up when user closes application tabs</li>
<li>fixed memory leak when working with DB console or SSH terminals</li>
<li>fixed updating last used date for SSH connections</li>
<li>fixed intermittent pgmanage startup issues on Windows platform</li>
<li>fixed query results data export when query contains explain or explain analyze keywords</li>
</ul>
</li>
<li>
<p dir="auto">UI/UX Improvements:</p>
<ul dir="auto">
<li>'fetch all records' is now also supported DB console tabs</li>
<li>removed unnecessary schema name prefixes from table partition names in DB object tree</li>
<li>added warning about unsaved changes in Postgres Seever configuration tab before close</li>
<li>added confirmation when deleting configuration change histore records in Postgres Server configuration tab</li>
<li>added support for showing newline characters in query results data grid cells</li>
<li>added support for showing null and blank values in query results data grid cells</li>
<li>data grid is no longer hidden for queries that return 0 rows</li>
<li>added visual hints for column resize handles in data grid headers</li>
<li>improved DB console and SSH terminal performance when displaying large amounts of text</li>
<li>significantly improved performance of query result data grids when working with large amounts of data</li>
<li>it is now possible to reuse a query from the history dialog by double clicking on the correspoding query cell</li>
</ul>
</li>
<li>
<p dir="auto">Other changes</p>
<ul dir="auto">
<li>sshtunnel bumped from 0.1.5 to 0.4.0</li>
<li>optimized front-end imports to reduce js bundle size</li>
<li>optimized peformance of several back-end queries</li>
<li>project migrated from bootstrap 4 to bootstrap 5</li>
<li>pev2 bumped from 1.8 to 1.11</li>
<li>legacy code clean-up</li>
<li>removed support for EOL Postgres versions</li>
<li>added support for creating debug .appimage builds</li>
<li>added support for masking sensitive data in error logs</li>
<li>project migrated from django 3.2 to django 4.2</li>
<li>bumped xterm.js from 5.2 to 5.5</li>
</ul>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">PgManage 1.0.1 Bugfix Release</h2><a id="user-content-pgmanage-101-bugfix-release" aria-label="Permalink: PgManage 1.0.1 Bugfix Release" href="#pgmanage-101-bugfix-release"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Date: May 16 2024</h2><a id="user-content-release-date-may-16-2024" aria-label="Permalink: Release Date: May 16 2024" href="#release-date-may-16-2024"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Notes</h2><a id="user-content-release-notes-1" aria-label="Permalink: Release Notes" href="#release-notes-1"></a></p>
<ul dir="auto">
<li>Bugs fixed:
<ul dir="auto">
<li>trim explain/explain analyze prefix of the query when "explain" or "explain analyze" button is clicked</li>
<li>disable unnecessary row selection in command/query history data grid</li>
<li>fix cell data viewer modal working incorrectly when the cell contains numeric valueis Number</li>
<li>clean-up backup/restore job status polling when corresponding backup/restore tab is closed</li>
<li>make DB object tree resize line easier to grab when scrollbar is also present in DB object tree</li>
<li>fixed query results data-grid autosizing</li>
<li>fixed fetch more/fetch all records for SQLite3</li>
<li>disable drag-n-drop of DB session tabs above Connections/Welcome/Snippets sidebar items</li>
<li>don't hide connection/group form in connections dialog after connection/group is saved</li>
<li>add confirmation for connection group deletion</li>
<li>don't show the "unsaved changes" popup when user saved the new connection group and tries to select other group/connection</li>
</ul>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">PgManage 1.0 Release</h2><a id="user-content-pgmanage-10-release" aria-label="Permalink: PgManage 1.0 Release" href="#pgmanage-10-release"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Date: Apr 17 2024</h2><a id="user-content-release-date-apr-17-2024" aria-label="Permalink: Release Date: Apr 17 2024" href="#release-date-apr-17-2024"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Notes</h2><a id="user-content-release-notes-2" aria-label="Permalink: Release Notes" href="#release-notes-2"></a></p>
<ul dir="auto">
<li>
<p dir="auto">New features:</p>
<ul dir="auto">
<li>added SQL file import into Query and Snippet tabs</li>
<li>added SQL file export from Query and Snippet tabs</li>
<li>query tab title now displays the name of the imported file</li>
<li>query history can now be filtered by database</li>
<li>added MySQL and MariaDB support in database Schema editor</li>
<li>new autocomplete in SQL code editor</li>
<li>added search and replace in SQL code editor</li>
<li>added live query execution timer for long-running queries</li>
<li>make "restore application tabs" behavior configurable in application settings</li>
<li>make DB object tree "scroll into view" behavior configurable in application settings</li>
</ul>
</li>
<li>
<p dir="auto">Major Bugs fixed:</p>
<ul dir="auto">
<li>fixed database tab restore concurrency issues when restoring multiple workspaces</li>
<li>change selected database when database child nodes are clicked</li>
<li>update workspace tooltips when corresponding connection gets renamed</li>
<li>don't try to run explain/analyze visualizer for non-Postgres database connections</li>
<li>don't allow setting nullable and primary-key column properties on schema editor</li>
<li>fixed various layout isues in UI walkthrough component</li>
<li>fixed issue when new monitoring widget modal wasn't possible to open after widget save/update</li>
<li>fixed automatic selection of last used database when reconnecting</li>
<li>reset connection properties form when connection manager dialog is closed</li>
</ul>
</li>
<li>
<p dir="auto">UI/UX Improvements:</p>
<ul dir="auto">
<li>improved application font size change handling various parts of the app</li>
<li>copy only selected text into clipboard if editor has a selection</li>
<li>application tabs now fit within a single row and can be scrolled if there are too many tabs</li>
<li>improved UI performance during application panel resize</li>
<li>improved UI responsiveness when application window is resized</li>
<li>application data grids layout improvements</li>
<li>data editor cell contents modal can now be shown by double-clicking the cell</li>
<li>database query tabs now show the associated database in tab title</li>
<li>added buttons for database tab scrolling</li>
<li>improved displaying of long error messages in application toast notifications</li>
<li>warn user about unsaved connection changes in connection manager dialog</li>
</ul>
</li>
<li>
<p dir="auto">Other changes</p>
<ul dir="auto">
<li>code indent feature now has a maximum content length limited to 75mb</li>
<li>monitoring dashboard was rewritten in Vuejs</li>
<li>application tab management code was rewritten in Vuejs</li>
<li>password dialogs were rewritten in Vuejs</li>
<li>improved SSH tunnel error handling</li>
<li>improved error reporting when SSH tunnel issues occur</li>
<li>legacy code cleaned-up/removed</li>
<li>improved database back-end clean-up when query is cancelled by the user</li>
<li>updated django from 3.2.18 to 3.2.25</li>
<li>updated tabulator.js  from 5.5.2 to 6.2</li>
<li>updated chart.js</li>
<li>significantly improved application error logging</li>
</ul>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">PgManage 1.0 RC 1</h2><a id="user-content-pgmanage-10-rc-1" aria-label="Permalink: PgManage 1.0 RC 1" href="#pgmanage-10-rc-1"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Date: Jan 4 2024</h2><a id="user-content-release-date-jan-4-2024" aria-label="Permalink: Release Date: Jan 4 2024" href="#release-date-jan-4-2024"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Notes</h2><a id="user-content-release-notes-3" aria-label="Permalink: Release Notes" href="#release-notes-3"></a></p>
<ul dir="auto">
<li>
<p dir="auto">New features:</p>
<ul dir="auto">
<li>new welcome screen which displays app shortcuts and recent connections list</li>
<li>added "run selection" feature in query editor</li>
<li>autocomplete setting is now stored separately for each DB connection</li>
<li>added SQLite3 support in table editor</li>
</ul>
</li>
<li>
<p dir="auto">Major Bugs fixed:</p>
<ul dir="auto">
<li>various layout fixes on snippets panel</li>
<li>fixed memory leak in snippets panel tree view</li>
<li>fixed postgres binary path corruption when pigz binary path is changed in settings dialog</li>
<li>added snippet and snippet folder name validation</li>
<li>added CSV delimiter validation in app settings</li>
<li>multiple fixes in Getting Started wizard</li>
<li>fixed query editor re-focusing when autocomplete widget closes</li>
<li>added connection group name validation</li>
<li>fixed disabled DB connection string input when creating new connection</li>
</ul>
</li>
<li>
<p dir="auto">UI/UX Improvements:</p>
<ul dir="auto">
<li>slightly improved app startup speed</li>
</ul>
</li>
<li>
<p dir="auto">Other changes</p>
<ul dir="auto">
<li>improved error handling when app back-end is down or unavailable due to network issues</li>
<li>application data grids migrated from Handsontable to Tabulator.js</li>
<li>updated Vuejs and Bootstrap libraries</li>
</ul>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">PgManage 1.0 Beta 3</h2><a id="user-content-pgmanage-10-beta-3" aria-label="Permalink: PgManage 1.0 Beta 3" href="#pgmanage-10-beta-3"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Date: Nov 4 2023</h2><a id="user-content-release-date-nov-4-2023" aria-label="Permalink: Release Date: Nov 4 2023" href="#release-date-nov-4-2023"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Notes</h2><a id="user-content-release-notes-4" aria-label="Permalink: Release Notes" href="#release-notes-4"></a></p>
<ul dir="auto">
<li>
<p dir="auto">New features:</p>
<ul dir="auto">
<li>added UI for creating/altering DB tables (currently for Postgres only)</li>
<li>added new Entity Relationship Diagram for all supported databases</li>
<li>added PIGZ support for database backup and restore</li>
<li>added UI for PG Cron extension</li>
</ul>
</li>
<li>
<p dir="auto">Major Bugs fixed:</p>
<ul dir="auto">
<li>fixed the issue when "Test Connection" action fails on previously saved DB connection</li>
<li>fixed SQL autocomplete issues</li>
</ul>
</li>
<li>
<p dir="auto">UI/UX Improvements:</p>
<ul dir="auto">
<li>default TCP port in database connection form is now prepopulated based on selected database type</li>
<li>improved styling for Pev2 Query Explain component</li>
<li>major dark theme improvements</li>
<li>the data editor tab is rewritten in Vuejs with various UX improvements like revert changed, display number of changes made etc</li>
<li>the state of autocomplete toggle switch is now saved to application settings</li>
<li>in DB Query tab the Cancel Query button is now displayed for long running queries only (&gt;1000ms)</li>
<li>various layout improvements on DB Query tab, application pane separators etc.</li>
<li>minimized UI visual clutter</li>
</ul>
</li>
<li>
<p dir="auto">Other changes</p>
<ul dir="auto">
<li>database object tree was fully rewritten in Vuejs</li>
<li>moved SQL formatting/indentation to front-end</li>
<li>refactored DB Object APIs</li>
<li>JS assets are now managed with NPM and bundled with Vite</li>
<li>Long-polling code cleaned up and refactored</li>
<li>DB console tab was fully rewritten in Vuejs</li>
<li>DB query tab was fully rewritten in Vuejs</li>
</ul>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">PgManage 1.0 Beta 2</h2><a id="user-content-pgmanage-10-beta-2" aria-label="Permalink: PgManage 1.0 Beta 2" href="#pgmanage-10-beta-2"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Date: Jun 15 2023</h2><a id="user-content-release-date-jun-15-2023" aria-label="Permalink: Release Date: Jun 15 2023" href="#release-date-jun-15-2023"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Notes</h2><a id="user-content-release-notes-5" aria-label="Permalink: Release Notes" href="#release-notes-5"></a></p>
<ul dir="auto">
<li>
<p dir="auto">New features:</p>
<ul dir="auto">
<li>ability to disable CSV header when exporting data grid contents</li>
<li>added UI for Postgres extension management</li>
<li>new hierarchical connections menu</li>
<li>use random TCP port number for the application back-end process so Pgmanage does not occupy ports commonly used by other applications</li>
<li>ability to select SSL connection options in Connection Management dialog</li>
<li>remember and restore application window position and size when the app starts</li>
<li>added configurable date/time display format in the application settings dialog</li>
<li>restore the last used database and query tabs when pgmanage starts</li>
</ul>
</li>
<li>
<p dir="auto">Major Bugs fixed:</p>
<ul dir="auto">
<li>if the query entered by the user contains explain keyword, clicking on explain/analyze button will no longer prepend the query with an extra explain keyword (previously this bug resulted in syntactically incorrect query)</li>
</ul>
</li>
<li>
<p dir="auto">UI/UX Improvements:</p>
<ul dir="auto">
<li>ability to work with multiple databases within a DB session without needing to select the "active" database</li>
<li>if query entered by the user contains explain keyword, the explain tab will be opened automatically when user clicks the "Run query" button</li>
<li>explain and analyze buttons are now grouped together and separated from other query buttons</li>
<li>pre-set database connection TCP port in the Connection Management dialog based on selected database type</li>
<li>add visually matching themes for query editor</li>
</ul>
</li>
<li>
<p dir="auto">Other changes</p>
<ul dir="auto">
<li>django has been updated from 2.2 to 3.2</li>
<li>bundled python version changed from 3.8 to 3.9</li>
<li>code clean-up and refactoring</li>
<li>moved application shared data into globally accessible Pinia store</li>
<li>replace cx_Oracle library with oracledb</li>
</ul>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">PgManage 1.0 Beta</h2><a id="user-content-pgmanage-10-beta" aria-label="Permalink: PgManage 1.0 Beta" href="#pgmanage-10-beta"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Date: Apr 20 2023</h2><a id="user-content-release-date-apr-20-2023" aria-label="Permalink: Release Date: Apr 20 2023" href="#release-date-apr-20-2023"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Notes</h2><a id="user-content-release-notes-6" aria-label="Permalink: Release Notes" href="#release-notes-6"></a></p>
<ul dir="auto">
<li>
<p dir="auto">New features:</p>
<ul dir="auto">
<li>added backup/restore support for Postgres</li>
<li>first version of PgManage Handbook was published to <a href="https://pgmanage.readthedocs.io/en/latest" rel="nofollow">https://pgmanage.readthedocs.io/en/latest</a></li>
</ul>
</li>
<li>
<p dir="auto">Major Bugs fixed:</p>
<ul dir="auto">
<li>fixed .AppImage compatibility issues for newer Linux distributions which do not have libcrypt installed</li>
<li>added logic to terminate stale back-end process if the front-end process crashes</li>
<li>fixed application UI process memory leaks</li>
</ul>
</li>
<li>
<p dir="auto">UI/UX Improvements:</p>
<ul dir="auto">
<li>improved support for configuration options search in Postgres Server Configuration Management</li>
<li>automatically readjust query editor font size when the application font size changes</li>
<li>various application layout and UI improvements</li>
<li>limited minimum application window size to 1024x766</li>
<li>fixed splash screen flickering/position issues during the application startup</li>
<li>add PgManage Handbook links to application error modal dialogs</li>
<li>improved handling of drag-and-drop reordering for database operations tabs</li>
</ul>
</li>
<li>
<p dir="auto">Other changes</p>
<ul dir="auto">
<li>added support for configurable Postgresql Client binary path in application settings</li>
<li>excluded SASS libraries and .sass files from the release builds</li>
<li>include EGL/GLES libraries into app release builds</li>
<li>pev2 upgraded to v1.7.0</li>
<li>removed "plugins" and other obsolete menu items from the application UI</li>
<li>removed unused files and dead code from the project</li>
<li>shred SSH keys stored in the app during the Master Password Reset</li>
</ul>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">PgManage 1.0 Alpha</h2><a id="user-content-pgmanage-10-alpha" aria-label="Permalink: PgManage 1.0 Alpha" href="#pgmanage-10-alpha"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Date: Feb 21 2023</h2><a id="user-content-release-date-feb-21-2023" aria-label="Permalink: Release Date: Feb 21 2023" href="#release-date-feb-21-2023"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Release Notes</h2><a id="user-content-release-notes-7" aria-label="Permalink: Release Notes" href="#release-notes-7"></a></p>
<ul dir="auto">
<li>
<p dir="auto">New features:</p>
<ul dir="auto">
<li>new connection management UI</li>
<li>added support for postgres server configuration management</li>
<li>new explain/analyze UI powered by pev2, including pev2 dark theme support</li>
<li>connection credential encryption</li>
<li>backported support for monitoring data-grid-based monitoring widgets</li>
<li>backported pie charts widgets for numbackends and database sizes</li>
<li>added password strength validation for user and master passwords</li>
<li>PostgreSQL 9.6, 10, 11, 12, 13, 14 and 15 support</li>
</ul>
</li>
<li>
<p dir="auto">Major Bugs fixed:</p>
<ul dir="auto">
<li>fixed data export to csv/xls format in the desktop version of the app</li>
<li>added superuser permission check on all user management APIs</li>
<li>extra validations added to prevent creation of unnamed connection groups</li>
<li>fixed external links not working in the desktop variant of the app</li>
<li>fixed postgres special commands on postgresql versions 12 and higher</li>
<li>fixed broken postgres documentation links available in database tree view menus</li>
<li>made all web/cdn app dependencies local so pgmanage can work properly without an internet connection</li>
</ul>
</li>
<li>
<p dir="auto">UI/UX Improvements:</p>
<ul dir="auto">
<li>reorganized connection management menus in the left menu bar</li>
<li>fixed DDL tab auto resizing</li>
<li>the top-right utilities menu now expands on click instead of mouse-hover</li>
<li>added DDL/properties tab resize limits to prevent it from becoming impossible to grab/resize back</li>
<li>unified tooltip appearance throughout the whole app</li>
<li>unified pictogram look and feel thoughout the whole app</li>
<li>improved database tree view navigation by adding smooth scroll to the newly expanded tree node. previously when some tree view node was expanded it jumped out of sight</li>
<li>improved data grid/table readability</li>
<li>improved database entity tree view readability</li>
<li>fixed date formatting in sql command history grid</li>
<li>fixed date formatting in db console command history grid</li>
<li>proper styling for dialog primary and secondary buttons. the secondary buttons in forms and dialogs were previously looked disable/grayed-out which was confusing.</li>
<li>the autocommit checkbox on query tab now stays visible despite of application window size
removed the option to make connections public in desktop variant of the app (which has only one user so shared/public connections make no sense)</li>
</ul>
</li>
<li>
<p dir="auto">Other changes</p>
<ul dir="auto">
<li>added postgresql 14 and 15  support</li>
<li>application data directory and db/log file naming was changed from omnidb* to pgmanage*.</li>
</ul>
</li>
</ul>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Trench collapses have killed hundreds of workers in the US over the last decade (126 pts)]]></title>
            <link>https://text.npr.org/g-s1-9028</link>
            <guid>41024559</guid>
            <pubDate>Sun, 21 Jul 2024 12:17:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://text.npr.org/g-s1-9028">https://text.npr.org/g-s1-9028</a>, See on <a href="https://news.ycombinator.com/item?id=41024559">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <p>Kelvin “Chuck” Mattocks was at a doctor’s appointment in downtown Boston one October Friday when his boss called. Mattocks was supposed to be off, but his supervisor at the drain company<strong>&nbsp;</strong>said he needed him to finish a job in the city.</p><p>Mattocks, 53, agreed to forfeit his day off, and by lunchtime, he and co-worker Robert “Robby” Higgins, 47, were working in a 12-foot-deep trench in front of a townhouse in an upscale<strong>&nbsp;</strong>neighborhood in the city’s South End. They were installing a sewer line when, suddenly, the walls of the trench collapsed.</p><p>“I’m looking down, and the guys are down there working,” carpenter Ken Bruneau said in an interview with NPR.</p><p>Bruneau<strong>&nbsp;</strong>was working inside the house and stepped outside for a cigarette break when he<strong>&nbsp;</strong>saw the trench give way.</p><p>“And next thing you know, I seen part of the trench engulf them from the waist down. Real quick. Like, whoosh!’’ he said.</p><p>The heavy mud pressed against their bodies, making it impossible for the men to breathe. Kevin Otto, the boss and owner of the company where the men worked, was nearby and yelled for the workers to get out. But it was too late. A fire hydrant near the trench fell into the hole, immediately flooding it. Bruneau recalled watching helplessly as the two men disappeared under the muddy water.</p><p>“I knew they were done,” Bruneau said.</p><p>Mattocks, a father of six, and Higgins were smothered in a dense slurry of mud and water.</p><p>The men are two of the more than 250 people across the country who died over the last decade when trenches they were working in collapsed, according to an investigation by NPR, <a href="https://www.tpr.org/">Texas Public Radio</a> and <a href="https://wamu.org/show/1a/">1A</a>. In every instance, the deaths were preventable, experts say. All but one of the victims were male; the youngest was 16. In many cases, the companies failed to follow basic government rules for making trenches safe.</p><p>“There’s no reason, really, that any worker in this country should be dying in a collapsed trench,” said Jordan Barab, who was deputy assistant secretary for the Occupational Safety and Health Administration (OSHA) during the Obama administration. “All trench collapse deaths are preventable if the employer complies with well-recognized OSHA standards."</p><p>NPR, Texas Public Radio and 1A examined hundreds of pages of OSHA inspection reports, court records, personnel files, lawsuits, police records, arrest affidavits, 911 calls, state safety reports and news releases and analyzed 10 years of OSHA workplace accident data. We also interviewed relatives of victims, prosecutors and other lawyers, current and former OSHA administrators, construction certification trainers, plumbers, engineers, local government officials, forensic experts, rescue workers and witnesses.</p><p>Among our findings:<br></p><ul><li>Companies fined by OSHA, whose role is to ensure workplace safety, sometimes ignored the penalties and faced no consequences, including one that still owes more than $1.4 million imposed after the deaths of two employees eight years ago.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li></ul><ul><li>At least 10 of the companies that employed workers who were killed had been sanctioned previously by the federal agency for failing to protect employees doing excavation/trench work. One was cited five times in four years; another four times in as many years<strong>.&nbsp;</strong><br></li><li>While those who violate OSHA standards can be criminally charged, authorities rarely brought charges. When they did, most offenders got off with a fine, probation or little time in jail.<br></li><li>The regulatory agency can issue imminent danger notices at job sites if trenching violations pose a threat of serious physical harm or death to workers, but it seldom does.&nbsp;&nbsp;</li></ul><p>Trenches are found throughout the U.S.: on the side of highways, at large construction sites and at new home builds. Thousands of construction workers, plumbers, utility workers and others toil in trenches across the country every day. </p><p>Trenches — glorified ditches — can vary by size, but OSHA’s most basic definition is that a trench is any narrow excavation made below the surface of the ground that is deeper than it is wide. They typically are no wider than 15 feet and no deeper than 20 feet and are often dug to install sewer and water lines and other underground utilities at commercial and residential sites. Because of their depth and the myriad ways that different soil types, external vibrations and weather can affect their stability, trenches can collapse without warning, offering little time to escape. One cubic yard of soil can weigh 3,000 pounds, about the weight of a Mini Cooper or other small car. In a collapse, the soil can move rapidly, depending on the depth of the trench and other variables.</p><p>Trench boxes, which are often rented for anywhere from hundreds to thousands of dollars per day or week,<strong>&nbsp;</strong>are critical pieces of construction safety equipment that minimize the chance of injury or death for a worker inside a trench. They are often made of solid metal, such as steel or aluminum. They keep the trench walls stable and prevent soil from dumping on top of workers inside if the trench collapses. OSHA requires some type of protective system, such as a box, for any trench deeper than 5 feet.</p><p>“That system is the strongest system for entering and exiting a trench,” said Candelario Vazquez, a health and safety organizer at Workers Defense Project in Austin, Texas, who has trained workers in OSHA safety courses.</p><p>Though trenches can be extremely dangerous for workers, the standard ways to avoid trench collapses resulting in deaths are widely known, easily accomplished and fairly cheap — and they’re required by federal law.</p><p>Deaths from trench collapses in the U.S. have fluctuated over the last decade, with the number peaking at 40 in 2022, up 60% from the previous year, according to data from the Bureau of Labor Statistics. These deaths come despite OSHA’s measures to help prevent collapses.</p><p>“I think OSHA needs to do more than what they’re doing,” said Aubrey Fryday.</p><p>Fryday’s son, Nathan, died in Lockhart, Texas, when a 12-foot-deep trench he was working in collapsed in August 2016. He was 22. His employer, <a href="https://www.osha.gov/ords/imis/establishment.inspection_detail?id=1174221.015">Mercer Construction Co.</a>, a Texas-based business, failed to use a protective system, which OSHA found was a violation of its regulations, records show. The company was fined $126,051.</p><p>Fryday said that OSHA needs to be more aggressive when it comes to protecting workers like her son and the hundreds of others who have died in trench cave-ins over the last decade.</p><p>“They’re just all getting too lazy and sitting behind their desks and doing nothing,” she said.</p><p>OSHA officials insist that the agency is proactive when it comes to going after companies where trenches have collapsed.</p><p>“We’re doing everything we can … to protect workers every day for America,” Scott Ketcham, the agency’s director of construction, said in an interview with NPR. “When we find them, we cite them, and when we cite them, we hold them accountable.”</p><p>Ketcham acknowledged, though, that more needs to be done.</p><p>OSHA said it conducts between 1,500 and 2,000 trenching inspections annually, about 6% of all workplace inspections done yearly, Ketcham said. That includes those that occur after a worker has died. The agency has 840 compliance officers to handle all worksites in the country — more than 7 million of them.</p><p>“It would take around 186 years for OSHA to inspect every workplace in the country just once,” Barab said. “That means that unless a worker is killed, there’s a major incident or a worker files a complaint, an employer is unlikely to ever see an OSHA inspector.”</p><p>Since the passage in 2021 of President Biden’s Bipartisan Infrastructure Deal, which calls for rebuilding roads and bridges and upgrading airports and ports, hundreds of thousands more construction workers are expected to be put in the field throughout the country. Many of them will likely work in trenches.</p><p>Trench collapses often occur when employers cut corners, such as failing to install shoring equipment like hydraulic cylinders that hold back the dirt walls of a trench or boxes and timbers that prevent a potential collapse from harming workers. That’s what happened that led to the deaths of Mattocks and Higgins in Boston, according to agency and court records, and interviews. Otto, who owned Atlantic Drain Service Company Inc., did not provide “basic safeguards against collapse” and failed to provide safety training, OSHA records showed.</p><p>“The deaths of these two men could have and should have been prevented,'” Galen Blanton, OSHA’s New England regional administrator, said in a press release months after the two deaths. “Their employer, which previously had been cited by OSHA for the same hazardous conditions, knew what safeguards were needed to protect its employees but chose to ignore that responsibility.”</p><h3>Multiple violations</h3><p>Twice before the 2016 cave-in involving Mattocks and Higgins — in 2007 and 2012 — <a href="https://www.osha.gov/ords/imis/establishment.inspection_detail?id=1186266.015">OSHA</a> had fined, warned and sanctioned the business for unprotected trenches, agency records show.</p><p>The 2007 incident occurred in front of the Four Seasons Hotel near downtown Boston. Michael Grover, an OSHA compliance officer who inspected the scene after the agency received a complaint, heard and saw dirt sloughing off the sides of the trench,<strong>&nbsp;</strong>according to his court testimony. Otto told the compliance officer<strong>&nbsp;</strong>that he would protect the trench, but did not, Grover testified. OSHA issued Otto a willful violation, which means the company either intentionally ignored safety requirements or was indifferent to them.<strong>&nbsp;</strong>It required him to train his workers and document it.</p><p>Willful violations are the most severe penalty OSHA hands down, and they carry higher fines than serious violations and the possibility for criminal penalties or prosecution.</p><p>In the 2012 violation, the Boston Fire Department came upon an Atlantic Drain Service Company Inc. worksite and found a worker in a 10-foot-deep unprotected trench, according to court records. OSHA cited Otto’s company again.</p><p>Four years later when the trench collapsed at the South End townhouse worksite, killing Mattocks and Higgins, OSHA found that Otto didn’t provide the men with hard hats, eye protection or a ladder so they could get out of the trench.</p><p>“Chuck would always say ‘work ain’t never killed nobody,’” his sister,<strong>&nbsp;</strong>Melinda Mattocks-Ushry, said in an interview with NPR. “But I tell this story to say that work killed my brother.”</p><p>Otto’s violations were so egregious that authorities charged him with two counts of manslaughter for the deaths of Mattocks and Higgins. A Suffolk County Superior Court judge found Otto guilty in 2019, sentenced him to two years in the Suffolk County House of Corrections and<strong>&nbsp;</strong>three years’ probation, and<strong>&nbsp;</strong>banned him from doing trench work deeper than 4 feet<strong>&nbsp;</strong>during that time<strong>,</strong> according to court records. Otto dissolved <a href="https://corp.sec.state.ma.us/CorpWeb/CorpSearch/CorpSummary.aspx?sysvalue=ZYxPWJuykaVvrzkJH_qoTU1kLVXC9xGXTwSX0RAGFdA-">Atlantic Drain Service Company Inc.</a> in April 2021, according to Massachusetts corporation records. It’s unclear why OSHA did not move to shut down the company after the 2016 deaths.</p><p>“We do hold recalcitrant employers accountable and we do follow up on them within the powers that the OSHA Act allows us to,” Ketcham said.</p><p>Since his release from jail in October 2023, Otto started another company, Drain Away Inc., a drain cleaning business, state records show. Otto, who is listed as the company president, treasurer, secretary and director, did not return two calls from NPR seeking comment.</p><p>Otto’s previous company — Atlantic Drain Service Company Inc. — is just one of at least 10 that employed workers who died after having previously been sanctioned by OSHA for failing to protect employees doing excavation-type work, agency records and interviews show. One employer was cited for violations a month after agency officials sanctioned him for the death of a worker.</p><p>On April 6, 2019, Dalbert Burton, 43, was installing a 4-inch PVC sewer line at a new housing development in Sugarcreek Township, a Dayton, Ohio, suburb. He was in an unprotected 11-foot-deep trench and noticed that the dirt was loose, so he called his boss, Richard Westendorf, who owned Payne Enterprises Inc., a Dayton-based plumbing contractor. Westendorf said he was in Florida at the time.</p><p>“He called me and told me that it was caving in,” Westendorf, 75, said in a recent interview with NPR.</p><p>Westendorf said he instructed Burton to “redirect the sewer around the loose soil,” but Burton ignored his advice, he said. The trench collapsed, suffocating the husband, father and grandfather who had worked for the company for five years.</p><p>“I regret that he didn’t listen to me,” Westendorf said. “It cost him his life.”</p><p>“You don’t mess around with dirt. You’ve got to respect it.”</p><p>OSHA initially fined the company $145,860 in connection with Burton’s death, but later reduced it to $85,000. Westendorf told NPR that he paid the fine by the due date because he “didn’t want to risk going to jail.”</p><p>Burton’s widow received $750,000 from workers’ compensation, said Westendorf, who added that he paid for the man’s funeral.</p><p>“It seemed like the right thing to do,” he said.</p><p>What Burton’s family may not have known at the time was that it wasn’t the first time Westendorf and his company had run afoul of OSHA. In 2017 and 2018, the agency cited him for various trench safety violations, federal agency records showed. It again penalized him in July 2019, three months after Burton’s death. Westendorf said the other sanctions were for his failure to have trench boxes, ladders and other equipment to keep workers safe.</p><p>“Sometimes I did [have them]; sometimes I didn’t,” he admitted.</p><p>Westendorf said he shuttered his plumbing contracting business a year ago after 30 years, though the company is still listed as active with the state of Ohio.</p><p>“All the builders in the Dayton area, they thought I was a liability,” he said. “It is what it is.”</p><p>Westendorf continues to operate an ice business.</p><p>In December 2016, Donald “DJ” Meyer, 33, was killed when he climbed into a 16-foot-deep unprotected trench in suburban Kansas City, Mo., to retrieve a cellphone that he had dropped, according to Belton, Mo., Fire Marshal Chris Beal. He was digging to find a sewer stub for a home, according to OSHA records.</p><p>“He jumped down in the hole to get it and left the backhoe running, and the vibrations shook the earth,” Beal said in an interview with NPR.</p><p>Meyer tried to run to a nearby ladder, but there was too much dirt, which crushed and suffocated him, Beal said. Rescue crews spent nine hours retrieving Meyer’s body.</p><p>“It’s a horrible, tragic story,” Beal said. “It was unbelievable.”</p><p>Meyer was a plumber and widower raising his 8-year-old son.</p><p>OSHA initially cited the company, Arrow Plumbing LLC of Blue Springs, Mo., for five serious and two willful violations related to Meyer’s death, and proposed fines totaling $294,059, agency inspection reports show. OSHA later slashed the penalties by about 72%, but didn’t explain why.</p><p>A month after Meyer’s death, OSHA found that the company was in violation again, this time for not having a “competent person” on-site to inspect the excavation area before work started at a job site in Kansas City. The agency found that an employee working in a trench at least 8 feet deep was “exposed to a collapse of the excavation walls,” and issued a $126,749 penalty,<strong>&nbsp;</strong>according to OSHA records. The company contested it and the agency reduced it to $42,250 in September 2018. In 2020, OSHA inspectors responding to a complaint found another Arrow employee working in an unprotected trench without head protection. The company agreed to pay $299,590 in fines.</p><p>Ketcham acknowledged that OSHA does reduce fines, particularly for a smaller company that is unable to pay, if they can show they’re correcting the problem.</p><p>Bryan Fryday, who lost his son, said the OSHA fines imposed on companies that skirt federal regulations resulting in death are woefully insufficient because they don’t inflict adequate financial pain on the violators.</p><p>“Companies should be responsible and fearful,” he said. “Like, ‘OK, this is what we have to do to make it safe.’”</p><p>In some instances, even after OSHA reduces fines and sends them to the Treasury Department for collection, companies still ignore the penalties. OSHA fined Otto’s company in Boston more than $1.4 million after the 2016 deaths of Mattocks and Higgins.</p><p>“We held him accountable,” Ketcham said. “We cited him. We collected penalties.”</p><p>When told that Otto, in fact, defaulted on the debt and now owes more than $1.7 million — according to OSHA’s own records — Ketcham declined to discuss the case in detail.</p><p>“We attempted through debt collection to get penalties from that individual,” he said. “I’m not going to comment on Mr. Otto.”</p><p>Ketcham acknowledged that OSHA needs to do more to hold accountable companies that repeatedly violate OSHA trenching regulations.</p><p>“That is a top priority right now,” he said.</p><h3>Criminal charges are rare</h3><p>OSHA has the power to refer serious violators to prosecutors, but when asked how many times it has done so on open or closed investigations since 2013, agency officials declined to provide NPR with statistics.</p><p>“OSHA is limited in the information it can share regarding ongoing criminal investigations,” the agency said through a spokesperson.</p><p>NPR compiled a database of trench collapse deaths between 2013 and 2023 and found in instances where workers perished in trench collapses, about 5% of employers were criminally charged. And they often got off with little punishment.</p><p>Phillip Numrich, owner of Alki Construction LLC, a plumbing and sewer repair business in the Seattle area, was charged with second-degree manslaughter in 2018 in connection with the death two years earlier of employee and longtime friend Harold Felton in Washington state. Felton was working in a 6-to-8-foot-deep trench cutting a new pipe that had been put into place at a West Seattle home when the cave-in occurred, burying him under more than 6 feet of mud, prosecutors wrote in a legal brief filed as part of Numrich’s sentencing. Felton, 36, died of compression asphyxia, which means that something forceful pressed against his chest or abdomen area. The trench lacked the required shoring<strong>,&nbsp;</strong>prosecutors wrote.</p><p>During a hearing with state labor investigators, Numrich acknowledged that he was required to have the proper shoring but did not, according to the legal brief. The state cited and fined him $51,500, but cut it in half. Then, prosecutors stepped in. It was the first time in Washington state that an individual employer had been charged with manslaughter in connection with the death of an employee, said Patrick Hinds, a deputy prosecutor with the King County Prosecuting Attorney’s Office.</p><p>“This particular case was an important marker in the criminal justice response to worker safety,” he said.</p><p>Prosecutors reduced Numrich’s charges to attempted reckless endangerment. He pleaded guilty and received 45 days in jail and a $25,000 fine, court records showed. Neither Numrich nor his attorney in the matter, Cooper Offenbecher, returned several calls seeking comment.</p><p>Rosario Martinez-Lopez<strong>&nbsp;</strong>thought that he would install drywall or do carpentry work when he arrived at the residential construction site that June morning in 2018 in Granby, Colo. That’s what Bryan D. Johnson, owner of ContractOne Inc., hired him to do. Instead, Martinez-Lopez ended up with a shovel in a 7-to-8-foot trench, installing a main water line, according to the arrest affidavit. Johnson had earlier used a mini-excavator to remove dirt.</p><p>Suddenly, the trench collapsed, crushing the 50-year-old Martinez-Lopez. His son, Moises Martinez, was also at the job site and helped rescuers retrieve his father’s body. The victim was pronounced dead at a local hospital.</p><p>“Bryan Johnson conducted all aspects of his construction site without the slightest attention to the safety of employees on the scene,” according to a Grand County, Colo., arrest warrant affidavit obtained by NPR. “He did not … slope the trench walls, did not have a trench box … and did not have appropriate access to ingress/egress.”</p><p>A subsequent OSHA investigation found that Johnson never trained Martinez-Lopez or other employees about the dangers of trench work. Authorities determined that there was probable cause to arrest him and charge him with criminally negligent homicide.</p><p>Johnson pleaded guilty to two counts of reckless endangerment and one count of third-degree assault and was sentenced to eight months in jail, court records show.</p><p>David Michaels, a former OSHA assistant secretary, said the federal agency should turn to criminal prosecutions more for trench deaths, because the fines they levy are often too small to be adequate deterrents, he said.</p><p>“When a worker is hurt or killed in a trenching collapse, OSHA should very much consider a referral of that event to a local district attorney who could take on the criminal case,” said Michaels, a professor at George Washington University’s Milken Institute School of Public Health. “If employers see that an employer is sent to jail because a worker is sent to a trench, that will have a much bigger impact on them than fear of an OSHA fine.”</p><p>Michaels said the responsibility for raising fines and possible criminal penalties is up to Congress, but that there is more OSHA could be doing on its own.</p><p>“I think the default for trenching regulation violations should be a willful violation with a much higher fine, unless it’s really clear that the employer really had no idea that they could be endangering their workers,” he said.</p><p>He said that a willful violation determination is up to the OSHA area offices that investigate trench deaths. An NPR analysis found that while most violations after a trench fatality were labeled “serious,” fewer than 10% were considered “willful.”</p><h3>Texas deaths</h3><p>Trench work can be so precarious that OSHA also requires companies to have an experienced supervisor on-site with authority to stop work in a trench if they consider it unsafe, said Vazquez, the health and safety organizer in Austin, Texas, who has trained workers in OSHA safety courses.</p><p>It was that kind of danger that concerned Jack Martin. Martin was installing a 6-inch sewer line behind a shopping center in November 2019 in Houston, a job he had done dozens — if not hundreds — of times during his more than two decades as a plumber. Suddenly, the interior wall of the trench collapsed, trapping the 41-year-old father, who left behind an 18<strong>-</strong>year-old daughter.</p><p>Martin’s dad, Larry, said his son had expressed concern about his safety and had repeatedly asked his employer, Best Plumbing LLC, to get trench boxes for the workers.</p><p>“He told me, he says, ‘Dad, you know, I’ve already asked them a couple of times and they told me no, they’re too expensive,’” Larry Martin recalled his son telling him.</p><p>After Martin’s death, OSHA cited Best Plumbing LLC for not having a protective system, such as a trench box, and ladders or other means for workers to exit the trench. The federal agency fined the company $18,892, but later reduced it to $11,335, records show.</p><p>Best Plumbing owner Vincent Horvath declined to comment on the incident and why he lacked the required protective system.</p><p>Jimmy Lee Alvarado, 20, dreamed of following his father into the construction industry, just as Jack Martin had followed his father into plumbing.</p><p>“He was inspired by his dad, and what he did,” Jimmy’s mother, Maria Bocanegra, said. “And he was like, ‘I wanna be like Dad one day and do everything that he does and have what he has.’”</p><p>So, it was no surprise that the two ended up working at the same site in Jarrell, Texas, in June 2022. Alvarado’s father, Juan Bocanegra, worked for WBW Construction LLC. Alvarado and another man, Jose Vargas Ramirez, 39, were temps provided by a staffing agency based in Moline, Ill., records showed.</p><p>Alvarado, a father of two, and Ramirez were connecting sewer lines in a 23-foot-deep trench when part of it collapsed, crushing them beneath rocks and mud, according to OSHA records.</p><p>An OSHA investigation alleges that WBW Construction failed to provide trench protection and exit ladders at regular intervals, two of the same failures the federal agency identified in Jack Martin’s death in Houston in 2019. Alvarado and Ramirez allegedly were more than 130 feet away — instead of 25 feet required by OSHA for trenches 4 feet or deeper — from the nearest point in the trench where they could exit.<strong>&nbsp;</strong>Also, OSHA claims that the trench collapse was caused when the foreman began to cut across the trench to build a smaller trench, referred to as a “side cut.” The federal agency’s investigation alleged that there were three appropriate trench boxes on-site that could have protected the two men, but were not used.</p><p>Alvarado’s dad was the foreman.</p><p>“[Juan] had him go down there because it was his job and he had to get it done,” Maria Bocanegra said.</p><p>Juan Bocanegra declined to comment.</p><p>Because OSHA alleges that two of the violations were considered “willful,” if the agency proves that, it could refer the company for potential prosecution once the case is closed.</p><p>The U.S. Attorney’s Office for the Western District of Texas said that OSHA has not referred the case to them. OSHA has fined WBW Construction LLC $250,272. The company is contesting the alleged violations and the penalties.</p><p>“WBW Construction LLC willfully sent these workers into an unprotected trench and ignored federal safety requirements,” OSHA Area Director Casey Perkins said in a December 2022 news release. “Now, two workers’ families, friends and co-workers are left to grieve their tragic, and avoidable, deaths.”</p><p>Maria Bocanegra said she first learned of the collapse from her 18-year-old son, Kevin, who was also working at the site that day.</p><p>“He was the one that called me and told me that — he was crying and I couldn’t understand him — but he told me that Jimmy had gotten trapped under and that they couldn’t get him out,” she said.</p><p>WBW’s management had her husband, the site foreman, sign a statement in English, though he could not read or speak it well, Maria Bocanegra said. She read it weeks later and questioned who penned it. NPR and Texas Public Radio have not been able to independently verify the statement.</p><p>“I … realized that it wasn’t him that actually wrote out or said what was said,” she said. “It was more them putting to him what to say.”</p><p>Bocanegra said she found multiple errors, including her son’s last name and their address, and knew that her husband wouldn’t have made such mistakes.</p><p>Travis Parks, general counsel for the WBW Development Group and its affiliates, including WBW Construction, declined to comment, citing ongoing litigation and the company contesting the penalty imposed by OSHA.</p><h3>Few protections for public employees</h3><p>Three employees of the city of Eutaw, Ala., were working on a broken sewer line in the Branch Heights public housing project shortly before 5 p.m. in April 2023, when part of the trench wall collapsed, trapping 46-year-old worker Tony Rice under mud, asphalt and concrete.</p><p>“All I could hear was Tony saying, ‘I can’t breathe, I can’t breathe, I can’t breathe,”’ Garreon Holsey, 22, one of the workers who escaped, told police at the time.</p><p>No one in the city of 3,000 or rural Greene County was trained in trench rescues, and they didn’t have the necessary equipment like a vacuum truck to suck the water and mud out of the hole, said Christopher Jones, the county’s EMS director.</p><p>“It was awful,” Jones told NPR in a recent interview. “It happened so fast. There was nothing we could do because it was a dangerous situation.”</p><p>The closest rescue crews were in Tuscaloosa, about 35 minutes away. When they arrived, they worked frantically to save Rice. After nearly nine hours, rescuers retrieved the lifeless man.</p><p>“I knew it was going to be a body recovery at that point,” Jones said.</p><p>Unlike the other trench collapse deaths investigated by OSHA, no state-level or federal OSHA investigators looked into Rice’s death because he worked in one of nearly two dozen states where local and state government employees — about 8 million — are left out of the workplace protections provided to private and federal employees, according to the Bureau of Labor Statistics.</p><p>“There will be no investigation, there will be no penalties, there will be no lessons learned, no follow-up,” said Barab, the former OSHA deputy assistant secretary who served under Obama. “It just kind of gets dropped.”</p><p>When Congress passed the Occupational Safety and Health Act that created the federal regulatory<strong>&nbsp;</strong>agency in 1970, it specifically excluded public employees from the newly established protections. The legislation, though, encouraged states to develop their own job and health safety programs, and those states were required to cover their public employees. The act also allowed states to set up “public employee only” state plans where the state would cover public employees and federal OSHA would continue covering the private sector, Barab said. Some states have set up such plans, including Massachusetts, whose public employee health and safety plan covers more than 430,000 public employees. Twenty-three states, including Alabama, Missouri and Texas — and the District of Columbia — have not established protections for their own employees.</p><p>NPR found at least four instances in the past decade of trench collapses killing public employees in states without OSHA protections. The lack of workplace protections for local and state employees in those states hinders accountability for — and prevention of — worksite danger.</p><p>“They can’t file an OSHA complaint no matter how unsafe conditions are," Barab said. "There’s no one to complain to."</p><p>OSHA requires daily soil testing when trench work is taking place. Because Alabama is one of the states where public employees are not covered by the federal agency’s workplace protections, no testing was required.</p><p>“Testing the soil isn’t hard to do, but it takes a little more time … and a lot of trenching is done in an emergency situation where a pipe breaks, so there's not that kind of time,” said Ruth Ruttenberg, a consultant and former OSHA senior economist who authored a 2019 study on trench fatalities. “But if you know that you have a potentially fatal work situation, it's really necessary … to take that into account and do the safe thing for the workers.”</p><p>Wendell, Idaho, city employee Jerrad Durfee, 43, had expressed concern to his family about working in trenches. He wasn't trained for that kind of work, his mother said. He grew up in the town of 3,000 residents about 25 miles from Twin Falls and also worked as a volunteer firefighter. Idaho is among the states where city and county workers have no OSHA workplace protections.</p><p>“He didn’t really like being down there, but he was told to do it, so he did it, because he liked his job,” Durfee’s mother, Ynes Durfee, said in an interview with 1A. "But he was scared."</p><p>Durfee was inside a 6-foot-deep trench in an alley with a jackhammer shortly before noon one September day in 2013. He was breaking up rocks when the walls caved in, burying him in nearly 2 feet of dirt, according to the police report. Levi Diehl, another worker, was nearby and heard the jackhammer stop. He ran to the area where Durfee was and saw the collapsed trench. He scrambled to remove the dirt from Durfee’s head and shoulders. He told authorities that Durfee gasped for air but there was no pulse. Durfee was pronounced dead at the scene.</p><p>Durfee’s longtime best friend, Brad Murphy, said he is angry that no one was punished for the fatal cave-in.</p><p>“Wendell’s just going on about its daily life and there’s still no consequences,” Murphy said. “It’s about them being accountable.”</p><p><em>This story is a collaboration from NPR's Station Investigations Team, which supports local investigative journalism; </em><a href="https://www.tpr.org/">Texas Public Radio</a><em>; and </em><a href="https://wamu.org/show/1a/">1A</a><em>. Kahwit Tela, NPR’s Ida B. Wells Society intern, also contributed to this story.&nbsp;&nbsp;</em></p>
        <hr>
        <h3>Transcript</h3>
        <p>A MARTÍNEZ, HOST: </p><p> All right, we turn now to a dangerous problem for construction workers, specifically those who work in trenches - these deep ditches you see along the highway at large construction sites and new home builds. Now, without the proper systems in place, those trenches can collapse in an instant, burying the workers alive in a dense slurry of mud and water. Members of NPR's investigations team have found that 250 workers have died from such trench cave-ins over the last decade. Cheryl W. Thompson, an investigative correspondent and senior editor, joins us now. So, Cheryl, tell us about this investigation. What's it about?</p><p>CHERYL W THOMPSON, BYLINE: So this investigation, we worked together with Texas Public Radio and the program 1A and reviewed hundreds of pages of federal government inspection reports, court records, state safety reports and other documents to determine how many people died in trench collapses, what happened to cause the cave-ins and whether those deaths could have been avoided.</p><p>MARTÍNEZ: All right. What did you discover?</p><p>THOMPSON: Well, A, we found that trench collapse deaths are indeed preventable and often occurred when employers violated federal regulations by not having the proper equipment in place, like those metal boxes to keep dirt walls from caving in and suffocating workers. Our investigation also found that companies fined by the Occupational Safety and Health Administration - we know it, of course, as OSHA - sometimes ignored the penalties and faced no consequences. For example, one business in the Boston area still owes more than $1.4 million from the deaths of two workers eight years ago. And at least 10 companies that employed workers who were killed had been sanctioned before for not protecting employees doing trench work. One business was cited five times in four years, another four times in as many years.</p><p>MARTÍNEZ: All right. So those are civil penalties, right? I mean, what about criminal charges?</p><p>THOMPSON: Right. Well, criminal charges are pretty rare. We discovered 11 cases out of more than 200 where authorities criminally charged an employer. And even when someone was charged in connection with a worker's death, those charges were often reduced, meaning that employers usually got off with a fine, probation or a few months in jail.</p><p>MARTÍNEZ: Now, one of the reporters on this project went to Boston to talk with a witness to one of these horrific incidents in which two men died. Cheryl, tell us about that.</p><p>THOMPSON: Yes. Ken Bruno (ph) was the witness, and he had not been back to the site since 2016. He's a carpenter who was working inside a townhouse on Boston's South End while the two men were working outside in a trench. They were installing a drain, and Bruno stepped outside for a quick smoke and was standing on the sidewalk next to the trench when it collapsed.</p><p>KEN BRUNO: I'm looking down, and the guys are down there working. And next thing you know, I seen part of the trench engulf him from the waist down real quick, like, whoosh.</p><p>THOMPSON: Bruno recalls that a section of pipe attached to a fire hydrant burst, flooding the trench and the street with so much water and mud that it just smothered the two workers.</p><p>BRUNO: I knew that they were done.</p><p>THOMPSON: One of those buried alive was a father of six. There's a good chance that both of those workers would be alive today had their employer installed a trench box. It was the third time that that company had been cited by OSHA for unprotected trenches.</p><p>MARTÍNEZ: So about OSHA - I mean, their job is to make sure workplaces are safe places. So can they come in and close down a business if they're repeatedly violating regulations?</p><p>THOMPSON: Well, no. Only a court has that authority. What OSHA can do is post imminent danger notices at a job site if it believes the violations pose a threat of serious physical harm or death to workers. But it seldom does that. It's happened only 18 times since 2014.</p><p>MARTÍNEZ: OK. Now, what about employers? What should they be doing? I mean, the trench boxes, they can be expensive and can take time to set up and install, and, of course, time is money.</p><p>THOMPSON: Right. Well, Jack Martin was an experienced plumber, putting in sewer lines behind a shopping center in Houston in 2019. He had repeatedly asked his employer, Best Plumbing LLC, to get trench boxes for him and his co-workers. We spoke with his father, Larry Martin, whom Jack called just days before he was killed in a trench collapse.</p><p>LARRY MARTIN: Two days prior before it happened, he told me. He says, Dad - he said, you know, I've already asked them a couple of times, and they told me no, they're too expensive.</p><p>THOMPSON: I should mention, A, we reached out to the company's owner, who declined to comment on the incident. We also talked to a woman in Texas named Aubrey Fryday, who lost her son in a trench collapse in 2016. She wondered why OSHA didn't do something about the company where her son Nathan worked. She believed officials there were operating an unsafe workplace.</p><p>AUBREY FRYDAY: OSHA needs to do more than what they're doing. It shouldn't take a death for them to act. They're just all getting too lazy and sitting behind their desks and doing nothing.</p><p>THOMPSON: OSHA doesn't necessarily see it that way. We sat down here in Washington with Scott Ketcham, the agency's director of construction. Here's what he said.</p><p>SCOTT KETCHAM: We're doing everything we can to protect workers every day for America. When we find them, we cite them, and when we cite them, we hold them accountable.</p><p>THOMPSON: Ketcham acknowledged that more needs to be done, particularly when it comes to holding companies accountable.</p><p>KETCHAM: And that is a top priority right now.</p><p>MARTÍNEZ: You know, Cheryl, it's pretty awful to think that this is happening, especially when it's a type of death that seems like it could be avoidable. I mean, it's got to be really, really difficult for the families here.</p><p>THOMPSON: Oh, it definitely is. Melinda Mattocks-Ushry's brother, Kelvin Mattocks, was one of the two men killed in the Boston trench collapse that I mentioned to you earlier. My colleague, Robert Benincasa, spoke with her at Kelvin's gravesite in rural North Carolina.</p><p>MELINDA MATTOCKS-USHRY: This is his resting place. This is where he was raised, in the church here. His wife let us bring him home. She knew this is where he would want to be. It hurts so bad.</p><p>THOMPSON: She thinks about how things could have turned out differently, had her brother's employer, Kevin Otto, protected that trench so that the walls wouldn't have caved in on him and the other worker.</p><p>MATTOCKS-USHRY: There should have been protection for these guys. There should have been a way out of that hole for these guys. I would love for someone to do something about people that's going to work to do a honest day work - be protected while at work.</p><p>THOMPSON: And, A, we heard from family members all across the country who agree that more needs to be done.</p><p>MARTÍNEZ: Cheryl W. Thompson, investigative correspondent and senior editor. Thank you very much for bringing this story.</p><p>THOMPSON: Thank you, A.</p><p>(SOUNDBITE OF MUSIC)</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[txtai: Open-source vector search and RAG for minimalists (179 pts)]]></title>
            <link>https://neuml.github.io/txtai/</link>
            <guid>41024362</guid>
            <pubDate>Sun, 21 Jul 2024 11:39:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://neuml.github.io/txtai/">https://neuml.github.io/txtai/</a>, See on <a href="https://news.ycombinator.com/item?id=41024362">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-md-component="container">
      
      
        
          
        
      
      <main data-md-component="main">
        <div data-md-component="content">
              <article>
                
                  

  
  



<p>
    <img src="https://raw.githubusercontent.com/neuml/txtai/master/logo.png">
</p>

<p>
    <b>All-in-one embeddings database</b>
</p>

<p>
    <a href="https://github.com/neuml/txtai/releases">
        <img src="https://img.shields.io/github/release/neuml/txtai.svg?style=flat&amp;color=success" alt="Version">
    </a>
    <a href="https://github.com/neuml/txtai">
        <img src="https://img.shields.io/github/last-commit/neuml/txtai.svg?style=flat&amp;color=blue" alt="GitHub last commit">
    </a>
    <a href="https://github.com/neuml/txtai/issues">
        <img src="https://img.shields.io/github/issues/neuml/txtai.svg?style=flat&amp;color=success" alt="GitHub issues">
    </a>
    <a href="https://join.slack.com/t/txtai/shared_invite/zt-1cagya4yf-DQeuZbd~aMwH5pckBU4vPg">
        <img src="https://img.shields.io/badge/slack-join-blue?style=flat&amp;logo=slack&amp;logocolor=white" alt="Join Slack">
    </a>
    <a href="https://github.com/neuml/txtai/actions?query=workflow%3Abuild">
        <img src="https://github.com/neuml/txtai/workflows/build/badge.svg" alt="Build Status">
    </a>
    <a href="https://coveralls.io/github/neuml/txtai?branch=master">
        <img src="https://img.shields.io/coverallsCoverage/github/neuml/txtai" alt="Coverage Status">
    </a>
</p>

<p>txtai is an all-in-one embeddings database for semantic search, LLM orchestration and language model workflows.</p>
<p><img alt="architecture" src="https://neuml.github.io/txtai/images/architecture.png#gh-light-mode-only">
<img alt="architecture" src="https://neuml.github.io/txtai/images/architecture-dark.png#gh-dark-mode-only"></p>
<p>Embeddings databases are a union of vector indexes (sparse and dense), graph networks and relational databases. This enables vector search with SQL, topic modeling, retrieval augmented generation (RAG) and more.</p>
<p>Embeddings databases can stand on their own and/or serve as a powerful knowledge source for large language model (LLM) prompts.</p>
<p>Summary of txtai features:</p>
<ul>
<li>🔎 Vector search with SQL, object storage, topic modeling, graph analysis and multimodal indexing</li>
<li>📄 Create embeddings for text, documents, audio, images and video</li>
<li>💡 Pipelines powered by language models that run LLM prompts, question-answering, labeling, transcription, translation, summarization and more</li>
<li>↪️️ Workflows to join pipelines together and aggregate business logic. txtai processes can be simple microservices or multi-model workflows.</li>
<li>⚙️ Build with Python or YAML. API bindings available for <a href="https://github.com/neuml/txtai.js">JavaScript</a>, <a href="https://github.com/neuml/txtai.java">Java</a>, <a href="https://github.com/neuml/txtai.rs">Rust</a> and <a href="https://github.com/neuml/txtai.go">Go</a>.</li>
<li>☁️ Run local or scale out with container orchestration</li>
</ul>
<p>txtai is built with Python 3.8+, <a href="https://github.com/huggingface/transformers">Hugging Face Transformers</a>, <a href="https://github.com/UKPLab/sentence-transformers">Sentence Transformers</a> and <a href="https://github.com/tiangolo/fastapi">FastAPI</a>. txtai is open-source under an Apache 2.0 license.</p>
<p><em>Interested in an easy and secure way to run hosted txtai applications? Then join the <a href="https://txtai.cloud/">txtai.cloud</a> preview to learn more.</em></p>












                
              </article>
            </div>
        
      </main>
      
        
      
    </div></div>]]></description>
        </item>
    </channel>
</rss>