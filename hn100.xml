<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sat, 01 Mar 2025 13:30:03 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[A DOGE staffer appears to be posting DOGE work on his public GitHub (142 pts)]]></title>
            <link>https://twitter.com/SollenbergerRC/status/1895609294810464390</link>
            <guid>43217947</guid>
            <pubDate>Sat, 01 Mar 2025 10:30:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/SollenbergerRC/status/1895609294810464390">https://twitter.com/SollenbergerRC/status/1895609294810464390</a>, See on <a href="https://news.ycombinator.com/item?id=43217947">Hacker News</a></p>
Couldn't get https://twitter.com/SollenbergerRC/status/1895609294810464390: Error: Request failed with status code 400]]></description>
        </item>
        <item>
            <title><![CDATA[Zen 5's AVX-512 Frequency Behavior (107 pts)]]></title>
            <link>https://chipsandcheese.com/p/zen-5s-avx-512-frequency-behavior</link>
            <guid>43215781</guid>
            <pubDate>Sat, 01 Mar 2025 04:10:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://chipsandcheese.com/p/zen-5s-avx-512-frequency-behavior">https://chipsandcheese.com/p/zen-5s-avx-512-frequency-behavior</a>, See on <a href="https://news.ycombinator.com/item?id=43215781">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="auto"><p>Zen 5 is AMD's first core to use full-width AVX-512 datapaths. Its vector execution units are 512 bits wide, and its L1 data cache can service two 512-bit loads per cycle. Intel went straight to 512-bit datapaths with Skylake-X back in 2017, and used fixed frequency offsets and transition periods to handle AVX-512 power demands. Later Intel CPUs did away with fixed fixed frequency offsets, but Skylake-X's AVX-512 teething troubles demonstrate the difficulties that come with running wide datapaths at high clock speeds. Zen 5 benefits from a much better process node and also has no fixed clock speed offsets when running AVX-512 code.</p><blockquote><p>Through the use of improved on-die sensors, AC capacitance (Cac) monitors, and di/dt-based adaptive clocking, "Zen 5" can achieve full AVX512 performance at peak core frequency.</p><p>"Zen 5": The AMD High-Performance 4nm x86-64 Microprocessor Core</p></blockquote><p><span>But if a Zen 5 core is running at 5.7 GHz and suddenly gets faced with an AVX-512 workload, what exactly happens? Here, I'm probing AVX-512 behavior using a modified version of my boost clock testing code. I wrote that code </span><a href="https://chipsandcheese.com/p/how-quickly-do-cpus-change-clock-speeds" rel="">a couple years ago</a><span> and used dependent integer adds to infer clock speed. Integer addition typically has single cycle latency, making it a good platform-independent proxy for clock speed. Instead of checking clock ramp time, I'm switching to a different test function with AVX-512 instructions mixed in after each dependent add. I also make sure the instructions I place between the dependent adds are well within what Zen 5's FPU can handle every cycle, which prevents the FPU from becoming a bottleneck.</span></p><p>I started by placing two fused multiply-add (FMA) instructions in each iteration, each of which operates on a 512-bit vector of packed FP32 values. After the Ryzen 9 reaches 5.7 GHz running the scalar integer function, I switch over to AVX-512 instructions.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png" width="1456" height="716" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/b5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:716,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:63918,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a></figure></div><p>Impressively, nothing changes. The dependent integer adds continue to execute at ~5.7 GHz. Zooming in doesn’t show a transition period either. I see a single data point covering 1.3 microseconds where the core executed those dependent integer adds at “only” a 5.3 GHz average. The very next data point shows the core running at full speed again.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png" width="1456" height="710" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:710,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:63995,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 1456w" sizes="100vw"></picture></div></a></figure></div><p><span>Evidently, Zen 5’s FPU is not troubled by getting hit with 512-bit vector operations, even when running at 5.7 GHz. If there is a transition period for the increased power draw, it’s so tiny that it can be ignored. That </span><a href="http://numberworld.org/blogs/2024_8_7_zen5_avx512_teardown/" rel="">matches Alex Yee’s observations</a><span>, and shows just how strong Zen 5’s FPU is. For comparison, the same experiment on Skylake-X shows both a transition period and lower clock speeds after the transition completes. Intel’s Core i9-10900X reaches 4.65 GHz after a rather long clock ramp using scalar integer code. Switching to the AVX-512 test function drops clock speeds to 4 GHz, a significant decrease from 4.65 GHz.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png" width="1450" height="637" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:637,&quot;width&quot;:1450,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:85689,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>Zooming in on Skylake-X data reveals a transition period, which </span><a href="https://travisdowns.github.io/blog/2020/01/17/avxfreq1.html#512-bit-integer-simd-avx-512" rel="">Travis Downs</a><span> and </span><a href="http://numberworld.org/blogs/2024_8_7_zen5_avx512_teardown/" rel="">Alex Yee</a><span> noted from a while ago. My test eats a longer 55 microsecond transition period though. Travis Downs saw a 20 microsecond transition, while Alex Yee mentions a 50k cycle delay (~12 microseconds at 4 GHz).</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png" width="1441" height="636" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:636,&quot;width&quot;:1441,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:83715,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Note the dip after switching to the AVX-512 test function</figcaption></figure></div><p>I’m not sure why I see a longer transition, but I don’t want to dwell on it because of methodology differences. Travis Downs used vector integer instructions, and I used floating point ones. And I want to focus on Zen 5.</p><p>After the transition finishes, the i9-10900X levels out at 3.7 GHz, then briefly settles at 3.8 GHz for less than 0.1 ms before reaching its steady state 4 GHz speed.</p><p>Zen 5 also doubles L1D load bandwidth, and I’m exercising that by having each FMA instruction source an input from the data cache. I used the following pattern above:</p><pre><code><code>  add rbx, r8
  vfmadd132ps zmm16, zmm1, zmm0
  vfmadd132ps zmm17, zmm2, zmm0
  
  add rbx, r8
  vfmadd132ps zmm18, zmm3, zmm0
  vfmadd132ps zmm19, zmm4, zmm0

  etc</code></code></pre><p>I’m changing those FMA instructions to use a memory operand. Because Zen 5 can handle two 512-bit loads per cycle, the core should have no problems maintaining 3 IPC. That’s two 512-bit FMAs, or 64 FP32 FLOPS, alongside a scalar integer add.</p><pre><code><code>  add rbx, r8
  vfmadd132ps zmm16, zmm1, [r15]
  vfmadd132ps zmm17, zmm2, [r15 + 64]

  add rbx, r8
  vfmadd132ps zmm18, zmm3, [r15 + 128]
  vfmadd132ps zmm19, zmm4, [r15 + 192]

  etc</code></code></pre><p>With the load/store unit’s 512-bit paths in play, the Ryzen 9 9900X has to undergo a transition period of some sort before recovering to 5.5 GHz. From the instruction throughput perspective, Zen 5 apparently dips to 4.7 GHz and stays there for a dozen milliseconds. Then it slowly ramps back up until it reaches steady state speeds.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png" width="1456" height="658" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:658,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:79917,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The Ryzen 9 9900X splits its cores across two Core Complex Dies, or CCDs. The first CCD can reach 5.7 GHz, while the second tops out at 5.4 GHz. Cores on the second CCD show no transition period on this test.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png" width="1456" height="667" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/e453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:667,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:117219,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Cores within the fast CCD all need a transition period, but the exact nature of that transition varies. Not all cores reach steady state AVX-512 frequencies at the same time, and some cores take a sharper hit when this heavy AVX-512 sequence shows up.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png" width="1280" height="749" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:749,&quot;width&quot;:1280,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:111926,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Not showing the switch point because it’s pretty obvious where it is, and happens at about the same time for all cores within CCD0</figcaption></figure></div><p>Per-core variation suggests each Zen 5 core has its own sensors and adjusts its performance depending on something. Perhaps it’s measuring voltage. From this observation, I wouldn’t be surprised if another 9900X example shows slightly different behavior.</p><p>Zen 5’s frequency appears to dip during the transition period, based on how fast it’s executing instructions compared to its expected capability. But while my approach of using dependent scalar integer adds is portable, it can’t differentiate between a core running at lower frequency and a core refusing to execute instructions at full rate. The second case may sound weird. But Travis Downs concluded Skylake-X did exactly that based on performance counter data.</p><blockquote><p>[Skylake-X] continues executing instructions during a voltage transition, but at a greatly reduced speed: 1/4th of the usual instruction dispatch rate</p><p><a href="https://travisdowns.github.io/blog/2020/01/17/avxfreq1.html#512-bit-integer-simd-avx-512" rel="">Gathering Intel on Intel AVX-512 Transitions</a><span>, Travis Downs</span></p></blockquote><p>Executing instructions at 1/4 rate would make me infer a 4 GHz core is running at 1 GHz, which is exactly what I see with the Skylake-X transition graph above. Something similar actually happens on Zen 5. It’s not executing instructions at the usual rate during the transition period, making it look like it’s clocking slower from the software perspective.</p><p>But performance counter data shows Zen 5 does not sharply reduce its clock speed when hit with AVX-512 code. Instead, it gradually backs off from maximum frequency until it reaches a sustainable clock speed for the workload it’s hit with. During that period, instructions per cycle (IPC) decreases. IPC gradually recovers as clock speeds get closer to the final steady-state frequency. Once that happens, instruction execution rate recovers to the expected 3 IPC (1x integer add + 2x FMA).</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png" width="1456" height="642" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:642,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:92699,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>I do have some extra margin of error when reading performance counter data, because I’m calling Linux’s </span><code>perf</code><span> API before and after each function call, but measuring time within those function calls. That error would become negligible if the test function runs for longer, with a higher iteration count. But I’m keeping iteration counts low to look for short transitions, resulting in a 1-3% margin of error. That’s fine for seeing whether the dip in execution speed is truly caused by lower clock speed.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png" width="967" height="202" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:202,&quot;width&quot;:967,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:49981,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>As you might expect, different cores within CCD0 vary in how much they do “IPC throttling”, for lack of a better term. Some cores cut IPC more than others when hit with sudden AVX-512 load. Curiously, a core that cuts IPC harder (core 0) reaches steady state a tiny bit faster than a core that cut IPC less to start with (core 3).</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png" width="1282" height="563" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:563,&quot;width&quot;:1282,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:59800,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>Now I wonder if Zen 5’s IPC throttling is triggered by the load/store unit, or overall load. Creating heavier FPU load should make that clear. Zen 5’s FPU has four pipes for math operations. FMA operations can go down two of those pipes. Dropping a </span><code>vaddps</code><span> into the mix will load a third pipe. On the fast CCD, that increases the transition period from ~22 to ~32 ms. Steady state clock speed decreases by about 150 MHz compared to the prior test.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png" width="1279" height="609" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:609,&quot;width&quot;:1279,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:84835,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Therefore, overall stress on the core (for lack of a better term) determines whether Zen 5 needs a transition period. It just so happens that 512-bit accesses to the memory subsystem are heavy. 512-bit register-to-register operations are no big deal, but adding more of them on top of data cache accesses increases stress on the core and causes more IPC throttling.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png" width="1278" height="551" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/af1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:551,&quot;width&quot;:1278,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:65127,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>To be clear, IPC during the transition period with the 512-bit FP add thrown in is higher than before. But 2.75 IPC is 68.75% of the expected 4 GHz, while 2.5 IPC in the prior test is 83.3% of the expected 3 IPC.</p><p>Performance counter data suggests the core decreases actual clock speed at a similar rate on both tests. The heavier load causes a longer transition period because the core has to keep reducing clocks for longer before things stabilize.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png" width="1281" height="547" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a0eb95df-20c0-490d-9033-5524562ac973_1281x547.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:547,&quot;width&quot;:1281,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:250356,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Really zoomed in, especially on the y-axis</figcaption></figure></div><p>Even with this heavier load, a core on the 9900X’s fast CCD still clocks higher than one on the slower CCD. Testing the add + 2x FMA + FADD combination on the slower CCD did not show any transition period. That’s a hint Zen 5 only needs IPC throttling if clock speed is too high when a heavy AVX-512 sequence comes up.</p><p>Transitions and the associated IPC throttling could be problematic if software rapidly alternates between heavy AVX-512 sequences and light scalar integer code. But AMD does not let Zen 5 get stuck repeatedly taking transition penalties. If I switch between the AVX-512 and scalar integer test functions, the transition doesn’t repeat.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png" width="1354" height="752" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/baf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:752,&quot;width&quot;:1354,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:110549,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>AMD does not immediately let Zen 5 return to maximum frequency after AVX-512 load lets up. From the start of the graph we can see Zen 5 can ramp clocks from idle to 5.7 GHz in just a few milliseconds, so this isn’t a limitation of how fast the core can pull off frequency changes. Remember how the slower CCD never suffered transitions? I suspect that’s because it never found itself clocked too high to begin with. Apparently the same also applies to the fast CCD. If it happens to be running at a lower clock when a heavy AVX-512 sequence shows up, it doesn’t need to transition.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png" width="1354" height="751" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:751,&quot;width&quot;:1354,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:112416,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Longer function switching intervals bring the transitions back, but now they’re softer. The first transition interval starts at 5.61 GHz and ends at 5.39 GHz. It takes nearly 21 ms.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png" width="1353" height="755" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/cea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:755,&quot;width&quot;:1353,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:111918,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The next transition starts when Zen 5 has only recovered to 5.55 GHz, and only lasts ~10 ms. IPC throttling is less severe too. IPC only drops to ~3.2 IPC, not 2.7 GHz like before.</p><p>With an even longer switching interval, I can finally trigger full-out transitions in repeated fashion. Thus transition periods and IPC throttling behavior vary depending on how much excessive clock speed the core has to shed.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png" width="1343" height="724" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:724,&quot;width&quot;:1343,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:93185,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The longer switch interval also shows that Zen 5 takes over 100 ms to fully regain maximum clocks after the heavy AVX-512 load disappears. Therefore, the simple scalar integer code with just dependent adds is running slower for some time. It’s worth noting that “slower” here is still 5.3 GHz, and very fast in an absolute sense. AMD’s Ryzen 9 9900X is not shedding 600 MHz like Intel’s old Core i9-10900X did with a lighter AVX-512 test sequence.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png" width="1343" height="725" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:725,&quot;width&quot;:1343,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:128407,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Zen 5’s clock ramp during the recovery period isn’t linear. It gains 200 MHz over the first 50 ms, but takes longer than 50 ms to recover the last 100 MHz. I think this behavior is deliberate and aimed at avoiding frequent transitions. If heavy AVX-512 code might show up again, keeping the core clock just a few percent lower is bettert than throttling IPC by over 30%. As clock speed goes higher and potential transitions become more expensive, the core becomes less brave and increases clocks slower.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png" width="1342" height="721" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:721,&quot;width&quot;:1342,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:115224,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>The way IPC drops more while clock speed (from perf counters) remains constant makes it feel like voltage droop. No way to tell though</figcaption></figure></div><p>Quickly switching between scalar integer and heavy AVX-512 code basically spreads out the transition, so that the core eventually converges at a sustainable clock speed for the AVX-512 sequence in question. Scalar integer code between AVX-512 sequences continues to run at full speed. And the degree of IPC throttling is very fine grained. There is no fixed 1:4 rate as on Skylake-X.</p><p><span>Zen 5 also has performance counters that describe why the renamer could not send micro-ops downstream. One reason is that the floating point non-scheduling queue (FP NSQ) is full. The FP NSQ on Zen 5 basically acts as the entry point for the FPU. See the prior </span><a href="https://chipsandcheese.com/p/amds-ryzen-9950x-zen-5-on-desktop" rel="">Zen 5 article</a><span> for more details.</span></p><p>If the NSQ fills often, the frontend is supplying the FPU with micro-ops faster than the FPU can handle them. As mentioned earlier, Zen 5’s FPU should have no problems doing two 512-bit FMA operations together with a 512-bit FP add every cycle.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png" width="1423" height="724" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:724,&quot;width&quot;:1423,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:157309,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>FP NSQ dispatch stall counts are still nonzero after the transition ends, so the test might have some margin of error from sub-optimal pipe assignment within the FPU. Life can’t be perfect right</figcaption></figure></div><p>But during the transition period, the FP NSQ fills up quite often. At its worst, it’s full over nearly 10% of (actual) cycles. Therefore Zen 5’s frontend and renamer are running at full speed. The IPC throttling is happening somewhere further down the pipeline. Likely, Zen 5’s FP scheduler is holding back and not issuing micro-ops every cycle even when they’re ready. AMD doesn’t have performance counters at the schedule/execute stage, so that theory is impossible to verify.</p><p>Running 512-bit execution units at 5.7 GHz is no small feat, and it’s amazing Zen 5 can do that. The core’s FPU by itself is very efficient. But hit more 512-bit datapaths around the core, and you’ll eventually run into cases where the core can’t do what you’re asking of it at 5.7 GHz. Zen 5 handles such sudden, heavy AVX-512 load with a very fine grained IPC throttling mechanism. It likely uses feedback from per-core sensors, and has varying behavior even between cores on the same CCD. Load-related clock frequency changes are slow in both directions, likely to avoid repeated IPC throttling and preserve high performance for scalar integer code in close proximity to heavy AVX-512 sequences.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png" width="1124" height="1080" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/f47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1080,&quot;width&quot;:1124,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:1633165,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>The tested chip</figcaption></figure></div><p>Transient IPC throttling raises deep philosophical questions about the meaning of clock frequency. If you maintain a 5.7 GHz clock signal and increment performance counters every cycle, but execute instructions as if you were running at 3.6 GHz, how fast are you really running? Certainly it’s 5.7 GHz from a hardware monitoring perspective. But from a software performance perspective, the core behaves more like it’s running at 3.6 GHz. Which perspective is correct? If a tree falls and no one’s around to hear it, did it make a sound? What if some parts of the core are running at full speed, but others aren’t? If a tree is split by lightning and only half of it falls, is it still standing?</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp" width="827" height="539" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/b540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:539,&quot;width&quot;:827,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:98466,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/webp&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Pads on the back of the 9900X. Pretty eh?</figcaption></figure></div><p>Stepping back though, Zen 5’s AVX-512 clock behavior is much better than Skylake-X’s. Zen 5 has no fixed frequency offsets for AVX-512, and can handle heavier AVX-512 sequences while losing less clock speed than Skylake-X. Transitions triggered by heavier AVX-512 sequences are interesting, but Zen 5’s clocking strategy seems built to minimize those transitions. Maybe corner cases exist where Zen 5’s IPC throttling can significantly impact performance. I suspect such corner cases are rare, because Zen 5 has been out for a while and I haven’t seen anyone complain. And even if it does show up, you can likely avoid the worst of it by running on a slower clocked CCD (or part). Still, it was interesting to trigger it with a synthetic test and see just how AMD deals with 512-bit datapaths at high speed.</p><p><span>If you like the content then consider heading over to the </span><a href="https://www.patreon.com/ChipsandCheese" rel="">Patreon</a><span> or </span><a href="https://www.paypal.com/donate/?hosted_button_id=4EMPH66SBGVSQ" rel="">PayPal</a><span> if you want to toss a few bucks to Chips and Cheese. Also consider joining the </span><a href="https://discord.gg/TwVnRhxgY2" rel="">Discord</a><span>.</span></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Self-Hosting a Firefox Sync Server (263 pts)]]></title>
            <link>https://blog.diego.dev/posts/firefox-sync-server/</link>
            <guid>43214294</guid>
            <pubDate>Sat, 01 Mar 2025 01:03:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.diego.dev/posts/firefox-sync-server/">https://blog.diego.dev/posts/firefox-sync-server/</a>, See on <a href="https://news.ycombinator.com/item?id=43214294">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>After switching from Firefox to LibreWolf, I became interested in the idea of self-hosting my own Firefox Sync server.
Although I had seen this was possible before, I had never really looked into it—until now. I embarked on a journey to
set this up, and while it wasn’t completely smooth sailing, I eventually got it working. Here’s how it went.</p><h2 id="finding-the-right-sync-server">Finding the Right Sync Server</h2><h3 id="initial-search-mozillas-sync-server-repo">Initial Search: Mozilla’s Sync Server Repo</h3><p>I started by searching for “firefox sync server github” and quickly
found <a href="https://github.com/mozilla-services/syncserver">Mozilla’s syncserver repo</a>. This is an all-in-one package
designed for self-hosting a Firefox Sync server. It bundles both the tokenserver for authentication and syncstorage for
storage, which sounded like exactly what I needed.</p><p>However, there were two red flags:</p><ol><li>The repository had “failed” tags in the build history.</li><li>A warning was prominently displayed stating that the repository was no longer being maintained and pointing to a new
project in Rust.</li></ol><h3 id="switching-to-rust-syncstorage-rs">Switching to Rust: syncstorage-rs</h3><p>With that in mind, I followed the link to <a href="https://github.com/mozilla-services/syncstorage-rs">syncstorage-rs</a>, which is
a modern, Rust-based version of the original project. It seemed like the more viable option, so I decided to move
forward with this one. But first, I wanted to check if there was a ready-to-go Docker image to make deployment easier.
Unfortunately, there wasn’t one, but the documentation did mention running it with Docker.</p><p>This is where things started to get complicated.</p><h2 id="diving-into-docker-confusion-and-complexity">Diving Into Docker: Confusion and Complexity</h2><h3 id="documentation-woes">Documentation Woes</h3><p>The Docker documentation had some strange parts. For example, it mentioned:</p><ul><li>Ensuring that <code>grpcio</code> and <code>protobuf</code> versions matched the versions used by <code>google-cloud-rust-raw</code>. This sounded
odd—shouldn’t Docker handle version dependencies automatically?</li><li>Another confusing part was the instruction to manually copy the contents of <code>mozilla-rust-sdk</code> into the top-level root
directory. Again, why wasn’t this step automated in the Dockerfile?</li></ul><p>At this point, I was feeling a bit uneasy but decided to push forward. I reviewed the repo, the Dockerfile, the
Makefile, and the circleci workflows. Despite all that, I was still unsure how to proceed.</p><h3 id="a-simpler-solution-syncstorage-rs-docker">A Simpler Solution: syncstorage-rs-docker</h3><p>I then stumbled upon <a href="https://github.com/dan-r/syncstorage-rs-docker">dan-r’s syncstorage-rs-docker repo</a>, which had a
much simpler Docker setup. The description explained that the author had also encountered issues with the
original documentation and decided to create a Docker container for their own infrastructure.</p><p>At this point, I felt reassured that I wasn’t alone in my confusion, and decided to give this setup a try.</p><h2 id="setting-up-the-server-docker-compose-and-mariadb">Setting Up the Server: Docker Compose and MariaDB</h2><h3 id="docker-compose-setup">Docker Compose Setup</h3><p>I copied the following services into my <code>docker-compose.yaml</code>:</p><div><pre tabindex="0"><code data-lang="yaml"><span><span><span>  </span><span>firefox_mariadb</span><span>:</span><span>
</span></span></span><span><span><span>    </span><span>container_name</span><span>:</span><span> </span><span>firefox_mariadb</span><span>
</span></span></span><span><span><span>    </span><span>image</span><span>:</span><span> </span><span>linuxserver/mariadb:10.6.13</span><span>
</span></span></span><span><span><span>    </span><span>volumes</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>/data/ffsync/dbdata:/config</span><span>
</span></span></span><span><span><span>    </span><span>restart</span><span>:</span><span> </span><span>unless-stopped</span><span>
</span></span></span><span><span><span>    </span><span>environment</span><span>:</span><span>
</span></span></span><span><span><span>      </span><span>MYSQL_DATABASE</span><span>:</span><span> </span><span>syncstorage</span><span>
</span></span></span><span><span><span>      </span><span>MYSQL_USER</span><span>:</span><span> </span><span>sync</span><span>
</span></span></span><span><span><span>      </span><span>MYSQL_PASSWORD</span><span>:</span><span> </span><span>syncpass</span><span>
</span></span></span><span><span><span>      </span><span>MYSQL_ROOT_PASSWORD</span><span>:</span><span> </span><span>rootpass</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span><span>firefox_syncserver</span><span>:</span><span>
</span></span></span><span><span><span>    </span><span>container_name</span><span>:</span><span> </span><span>firefox_syncserver</span><span>
</span></span></span><span><span><span>    </span><span>build</span><span>:</span><span>
</span></span></span><span><span><span>      </span><span>context</span><span>:</span><span> </span><span>/root/ffsync</span><span>
</span></span></span><span><span><span>      </span><span>dockerfile</span><span>:</span><span> </span><span>Dockerfile</span><span>
</span></span></span><span><span><span>      </span><span>args</span><span>:</span><span>
</span></span></span><span><span><span>        </span><span>BUILDKIT_INLINE_CACHE</span><span>:</span><span> </span><span>1</span><span>
</span></span></span><span><span><span>    </span><span>restart</span><span>:</span><span> </span><span>unless-stopped</span><span>
</span></span></span><span><span><span>    </span><span>ports</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>"8000:8000"</span><span>
</span></span></span><span><span><span>    </span><span>depends_on</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>firefox_mariadb</span><span>
</span></span></span><span><span><span>    </span><span>environment</span><span>:</span><span>
</span></span></span><span><span><span>      </span><span>LOGLEVEL</span><span>:</span><span> </span><span>info</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_URL</span><span>:</span><span> </span><span>https://mydomain/sync</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_CAPACITY</span><span>:</span><span> </span><span>5</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_MASTER_SECRET</span><span>:</span><span> </span><span>mastersecret</span><span>
</span></span></span><span><span><span>      </span><span>METRICS_HASH_SECRET</span><span>:</span><span> </span><span>metricssecret</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_SYNCSTORAGE_DATABASE_URL</span><span>:</span><span> </span><span>mysql://sync:usersync@firefox_mariadb:3306/syncstorage_rs</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_TOKENSERVER_DATABASE_URL</span><span>:</span><span> </span><span>mysql://sync:usersync@firefox_mariadb:3306/tokenserver_rs</span><span>
</span></span></span></code></pre></div><p>A few tips:</p><ul><li>Be cautious with the database passwords. Avoid using special characters like <code>"/|%"</code> as they can cause issues during
setup.</li><li>I added the BUILDKIT_INLINE_CACHE argument to the Docker Compose file to make better use of caching, which reduced
build time while testing.</li></ul><h3 id="initializing-the-database">Initializing the Database</h3><p>I cloned the repository and copied the Dockerfile and <code>initdb.sh</code> script to my server. After making some tweaks, I ran
the following steps to get the database up and running:</p><ol><li>Bring up the MariaDB container:<div><pre tabindex="0"><code data-lang="bash"><span><span>docker-compose up -d firefox_mariadb
</span></span></code></pre></div></li><li>Make the initialization script executable and run it:<div><pre tabindex="0"><code data-lang="bash"><span><span>chmod +x initdb.sh
</span></span><span><span>./initdb.sh
</span></span></code></pre></div></li></ol><h3 id="bringing-the-stack-online">Bringing the Stack Online</h3><p>Finally, I brought up the entire stack with:</p><h2 id="configuring-reverse-proxy-with-caddy">Configuring Reverse Proxy with Caddy</h2><p>Next, I needed to update my Caddy reverse proxy to point to the new Sync server. I added the following configuration:</p><div><pre tabindex="0"><code data-lang="bash"><span><span>mydomain:443 <span>{</span>
</span></span><span><span>     reverse_proxy firefox_syncserver:8000 <span>{</span>
</span></span><span><span>    <span>}</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><p>After updating Caddy with the DNS entry, I restarted the proxy and the sync server was up and running.</p><h2 id="challenges-faced">Challenges Faced</h2><p>While I eventually got everything working, there were a few notable challenges along the way:</p><ol><li><strong>Database persistence</strong>: I had issues with persistent data when restarting the MariaDB container. Make sure to clear
out old data if needed.</li><li><strong>Server storage</strong>: My server ran out of space during the build process due to the size of the Docker images and
intermediate files.</li><li><strong>Following the right steps</strong>: It took me a while to figure out the right steps, and much of the time was spent
experimenting with the Docker setup.</li></ol><h2 id="final-thoughts">Final Thoughts</h2><p>Setting up a self-hosted Firefox Sync server is not the easiest task, especially if you’re not very familiar with Docker
or database management. The official documentation is confusing, but thanks to community efforts like
the <code>syncstorage-rs-docker</code> repo, it’s doable.</p><p>In the end, it took me about two hours to get everything running, but it was worth it. If you’re looking to control your
own Firefox Sync server, this guide should help you avoid some of the pitfalls I encountered.</p><p>Happy syncing!</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Housing Theory of Everything (147 pts)]]></title>
            <link>https://worksinprogress.co/issue/the-housing-theory-of-everything/</link>
            <guid>43214263</guid>
            <pubDate>Sat, 01 Mar 2025 00:59:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://worksinprogress.co/issue/the-housing-theory-of-everything/">https://worksinprogress.co/issue/the-housing-theory-of-everything/</a>, See on <a href="https://news.ycombinator.com/item?id=43214263">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>Western housing shortages do not just prevent many from ever affording their own home. They also drive inequality, climate change, low productivity growth, obesity, and even falling fertility rates.</p><article><div role="presentation"><p>Try listing every problem the Western world has at the moment. Along with Covid, you might include slow growth, climate change, poor health, financial instability, economic inequality, and falling fertility. These longer-term trends contribute to a sense of malaise that many of us feel about our societies. They may seem loosely related, but there is one big thing that makes them all worse. That thing is a shortage of housing: too few homes being built where people want to live. And if we fix those shortages, we will help to solve many of the other, seemingly unrelated problems that we face as well.</p>



<h2 id="the-obvious-effects-of-expensive-housing">The obvious effects of expensive housing</h2>



<p>Where you live affects nearly everything about your life – where you work, how you spend time off, who your friends and neighbours are, how many kids you can have and when, and even how often you get sick. Most people’s most valuable asset is, by far, their own home. And housing is so important for the overall economy because it determines the location and supply of the most important ‘resource’ of all: people.</p>



<p>There’s a growing consensus that housing is too expensive in most Western countries. In many places, the prices of new homes <a href="https://www.aeaweb.org/articles?id=10.1257/jep.32.1.3">far exceed</a> the cost of building more of them. Higher incomes in cities draw people to those places, who use some of their increased wages to bid up rents and house prices there. Easier credit and falling interest rates, which reflect a lower cost of borrowing and lower returns from other investments, <a href="https://www.adamsmith.org/blog/where-house-prices-come-from">have helped people bid up the price of housing as well</a>. For most goods, including very expensive and durable goods like ships and airplanes, higher incomes and falling interest rates would cause supply to increase, instead of keeping the price permanently high. But for housing in and around many in-demand cities, supply has not been able to keep up with demand.</p>



<p>This is true across the developed world: Dublin, Singapore, Auckland, Paris, Vancouver, Rome, Hong Kong, Barcelona, Moscow, Cape Town, Zurich and many other cities have wildly expensive housing compared to the cost of building more of it. Costs are especially high in places whose economies are built on <a href="https://press.princeton.edu/books/hardcover/9780691175034/capitalism-without-capital">intangible capital</a>, like software or financial services. In these kinds of industries, there are especially large benefits to people being near one another, because it makes them both more productive and more innovative. This is why the San Francisco Bay Area – probably the most productive place in the Western world – is also one of the most in-demand places to live. And that demand, plus restrictions on building more houses, is why it is one of the most expensive places to live as well.</p>



<p>This housing affordability problem has become much worse over the past four decades – coinciding with, and partly driven by, the growth of the intangible economy — the move towards production based on software and intellectual property, instead of machinery and other physical capital. In the 1960s, it was commonplace that a middle class single-earner American or British family would be able to afford a comfortable home.</p>



<p>When more people want to live in an area, we either build more homes to accommodate them or squeeze them in to the existing housing stock, with those people bidding up the price of living there. We can see all of these mechanisms in play in the Western world’s most in-demand cities. In London, for example, empty homes now make up only a few percent of the total, as it becomes more and more costly to leave something empty.</p>



<p>The most dramatic evidence of housing scarcity can be seen in price rises over the past forty years. Average New York City metropolitan area house prices <a href="https://www.economist.com/graphic-detail/usa-house-prices">are up 706% since 1980</a> (or 376% more <a href="https://www.minneapolisfed.org/about-us/monetary-policy/inflation-calculator/consumer-price-index-1913-">than US consumer prices</a>, and 326% <a href="https://fred.stlouisfed.org/series/LES1252881500Q">more than US wages</a>). For San Francisco the rise is 932%. London house prices are up <a href="https://landregistry.data.gov.uk/app/ukhpi/browse?from=1980-01-01&amp;location=http%3A%2F%2Flandregistry.data.gov.uk%2Fid%2Fregion%2Flondon&amp;to=2021-07-01&amp;lang=en">over 2,100%</a> in that period (or <a href="https://ourworldindata.org/grapher/nominal-wages-consumer-prices-and-real-wages-in-the-uk-since-1750?time=1980..latest&amp;country=~GBR">around 1,500% more than wages</a>). Prices in Sydney, Australia, have <a href="https://www.abs.gov.au/statistics/economy/price-indexes-and-inflation/residential-property-price-indexes-eight-capital-cities/latest-release">risen</a> by <a href="http://www.econ.mq.edu.au/__data/assets/pdf_file/0018/220581/Abelson_9_04.pdf">1,450%</a> (compared to hourly wage increases <a href="https://fred.stlouisfed.org/series/LCWRTT01AUQ661N">of 480%</a>). In Ireland, prices have <a href="https://fred.stlouisfed.org/series/QIEN628BIS">risen by about 800% in that period</a>, driven by rises in Dublin in particular. Rents show similar, but less extreme, trends, because they are not directly affected by interest rates.</p>



<p>These prices range from about twice to four times the cost of building new homes of equivalent specification. This wedge, between build costs and house prices, is a rough proxy for how much extra cost is being driven by restrictions on new building.</p>



<p>By contrast, almost every other household product has become better and less expensive since then. <a href="https://cafehayek.com/2013/01/cataloging-our-progress-using-sears-com-selection-on-new-years-day-2013.html">Compared to 1975, the number of hours a median American worker would have to work</a> to buy a television fell from 60 hours in 1975 to 7 hours in 2013; to buy a fridge-freezer, it fell from 65 hours in 1975 to 20 hours in 2013; to buy a manual exercise treadmill, from 18 hours in 1975 to 6 hours in 2013; and to buy a washer-dryer, from 67 to 30 hours. <a href="https://fred.stlouisfed.org/graph/?g=Gmsm">Even cars are three times ‘cheaper’ in terms of hours worked</a> on an average hourly wage now than they were in 1964. And none of these estimates accounts for how much better most of these products are now than they were in 1975.</p>



<figure><img src="https://wip.gatspress.com/wp-content/uploads/2022/08/fig_1-2.png" alt=""></figure>



<p>So while other durable goods have become cheaper over time, housing has become more expensive. Even though incomes have risen, both parents in a family now typically have to work to afford a decent family house in a major city, and people have had to move farther and farther outside city centres to find somewhere they can afford to live, spending more time and money on commuting to and from work.</p>



<p>So the <i><em>obvious</em></i> effect of expensive housing is that people often spend a lot of their money on renting or buying their home, leaving them with less money to spend on other things, especially if they live in and around the Western world’s most wealthy cities. And the problem is getting worse.</p>



<figure><img src="https://wip.gatspress.com/wp-content/uploads/2022/08/Works_In_Progress_Skyline_2_Final_V2-scaled.jpg" alt="">
          <figcaption>
            <div>
              <p>
                Illustration for Works in Progress
              </p>
              <div>
                <p>Image</p>
                <p>
                  Kade Byrand 
                </p>
              </div>
            </div>
          </figcaption>
        </figure>







<h4><i>Productivity</i></h4>



<p>The obvious effect of expensive housing – people having less money to spend on other things – is the one most people focus on. But it is only part of the story, because expensive housing makes people change their behaviour too – it affects where you live, what your job is, how big your family is and what your day-to-day life looks like too. And it’s these <i><em>hidden</em></i> effects that are the most important.</p>



<p>As we’ve described above, better jobs drive up the price of housing when it’s difficult to build more. But that works both ways: when housing is scarce in high-productivity areas, some people are priced out of the area altogether, so they can’t move within range of better jobs.</p>



<p>This means that many people are working in less productive jobs than they could if it was easier for them to move to more productive places. Their wages and productivity are lower and it’s harder for highly productive businesses to hire them. That means people who <i><em>do</em></i> get to live in these high-productivity places are less productive than they could be, because they are less able to combine their skills with the complementary skills of the people who have been priced out.</p>



<p>As a result, many businesses end up leaving highly skilled staff without assistance, spending their time on work that could be done by others, lowering the time they can spend on the tasks they’re best at. This happens in people’s private lives too: people often spend hours <a href="https://www.amazon.co.uk/Markets-against-Modernity-Ecological-Irrationality/dp/1498591183">trying to fix their leaky pipes</a> instead of just calling in a plumber, because the prices of plumbers near them have risen to cover the costs for plumbers to live there.</p>



<p>On average, workers in larger cities tend to be more productive than workers with similar skills and education in smaller cities. Sheer size is not all that matters, because complementarity between workers matters even more – a skilled software engineer will likely increase her income more by moving to Berlin (population: 4.4 million) than to Mexico City (population: 21 million). But there is strong empirical evidence that, other things being equal, bigger is better. This helps workers directly: people who moved from small to large cities in a study in Spain <a href="http://diegopuga.org/papers/DeLaRoca_Puga_REStud_2017.pdf">gained a wage premium</a> when they did so, and accumulated better experience as time went by – and their experience persisted even if they moved away later, in the form of higher wages.</p>



<p>In the United States, productivity per worker tends to rise by <a href="https://www.elsevier.com/books/handbook-of-regional-and-urban-economics/duranton/978-0-444-59533-1">2%</a> or <a href="https://sfi-edu.s3.amazonaws.com/sfi-edu/production/uploads/sfi-com/dev/uploads/filer/f3/df/f3df3de1-e4b6-4b68-8bd2-82538b8dcf16/11-09-046.pdf">more</a> with each doubling of city size. The link between size and productivity is only apparent when the city includes skilled, educated workers, which suggests the effect is mostly driven by the transfer of knowledge and division of labour among high-skilled workers. Metropolitan areas that are largely made up of unskilled workers <a href="https://www.nber.org/papers/w15103">do not become more productive as they get bigger</a>.</p>



<p>By historical and global standards, today’s most successful cities in America and other Western countries are astonishingly sparsely populated and sprawling. Haussmann’s Paris, Gaudi’s Barcelona, and the Georgian and Victorian areas of London are much more densely populated than nearly every square mile of the Bay Area and even most of the NYC metro area, other than Manhattan.</p>



<p>The main cause of this is regulations that ban buildings that make better use of the land. Economists Gilles Duranton and Diego Puga <a href="https://www.nber.org/papers/w26591">judge that</a> if New York allowed more of the sorts of densities that were more common historically, rents and house prices would fall towards construction costs, and the city would at least double in population, to over 40 million people. Similar things would happen to the Bay Area, Boston, Los Angeles, and other US ‘superstar’ cities if higher densities were allowed. This could mean those places looking more like central Paris or Barcelona, both of which are incredibly dense (and also happen to be very nice places to live).</p>



<p>The total cost of this regulation-induced sprawl in the United States may be enormous. <a href="https://www.aeaweb.org/articles?id=10.1257/mac.20170388">According to one study</a>, if just three cities – New York City, San Jose and San Francisco – loosened their rules against building denser housing to the national average level of restrictiveness, millions would move to jobs that made the best use of their skills and total US GDP would be 8.9% higher. This would translate into average American wages being $8,775 higher per year. Others go even further. Duranton and Puga estimate that the average income gain from a housing regime that allowed easy building could be around 25%, or around $16,000 more per person per year.</p>



<p>To put that in perspective, 9% is approximately how much the US economy contracted by in the second quarter of 2020, after Covid and lockdowns brought much of the US economy to a standstill. Sixteen thousand dollars per capita is the <i><em>entire</em></i> yearly income of people in Greece or Hungary. That’s a lot of money to leave lying on the sidewalk.</p>



<h4><i>Innovation</i></h4>



<p>Nearly all innovation happens, and has always happened, in cities. Just as cities have vast labour pools that make it easier for workers to find jobs that match their skills, they also allow innovators to collaborate <a href="https://www.worksinprogress.co/issue/clusters-rule-everything-around-me/">to come up with new ways of doing things</a>. Sometimes cities have experienced bursts of innovative output that changed the world – like Amsterdam in the 17th century, Edinburgh and London in the late 18th to early 19th centuries, Cleveland in the late 19th century, Vienna and Detroit in the early 20th century, and San Francisco today.</p>



<p>The Bay Area, including Silicon Valley and San Francisco (population 7.5 million), for example, has played host to more tech start-ups growing to valuations of more than $1 billion than the entirety of Europe (population 750 million) put together. Ten US cities in 2007 <a href="https://eml.berkeley.edu/~moretti/clusters.pdf">produced 70% of the total patents related to computer science and 79% of the total patents around semiconductors</a> – with less than 10% of America’s population.</p>



<p>Part of the reason is that geographical closeness is especially important for the transfer and combination of ideas. And for unconventional ideas, the most valuable combinations are often not obvious in advance and may depend on chance interactions or mixing of individual elements.</p>



<p>Bell Labs, the legendary R&amp;D lab that <a href="https://www.worksinprogress.co/issue/the-rise-and-fall-of-the-american-rd-lab/">invented revolutionary new technologies like the transistor and the photovoltaic cell,</a> was designed so that everyone would at some point <a href="https://www.amazon.com/Idea-Factory-Great-American-Innovation/dp/0143122797">bump into everyone else</a> for this reason. Similarly, Steve Jobs designed Pixar animation studios to have <a href="https://www.inc.com/jeff-miller/3-ways-to-design-an-office-for-collaboration-not-c.html">communal areas situated centrally</a>, and many tech companies today use a similar model. Both the London Stock Exchange and Lloyd’s of London began in the 17th Century as coffee houses – the places where people habitually met both deliberately and accidentally.</p>



<p>US evidence from over 600,000 patents filed from 2000–2010 suggests that low-density places can sustain specialised clusters, but that <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3423143">unconventional breakthroughs benefit from high-density urban environments</a>. For idea-focused industries like software, localisation benefits <a href="https://econpapers.repec.org/bookchap/eeeregchp/4-49.htm">dissipate within 10 miles</a>; for extremely idea-focused industries like advertising, they dissipate <a href="https://econpapers.repec.org/article/ouprestud/v_3a75_3ay_3a2008_3ai_3a4_3ap_3a1011-1038.htm">within half a mile</a>. Inventors who move from a smaller cluster to a bigger cluster tend to <a href="https://www.nber.org/papers/w26270">see large increases in their patenting productivity</a>.</p>



<p>So by limiting the number of people who can go to live in places like the Bay Area, by limiting the number of homes there, we may not just be hurting productivity directly by restricting who people can work with. We may also be missing out on the new ideas that drive society forward and that can lead to dramatic improvements in how we live.</p>



<h4><i>Inequality</i></h4>



<p>Constraints on supply have made houses into scarce assets, more like <a href="https://blogs.lse.ac.uk/politicsandpolicy/turning-houses-into-gold-the-failure-of-british-planning/">bonds, fine art or precious metals</a> than durable goods like refrigerators or cars. This only feels normal because we’re used to it, and does not happen in places where developers can easily add more homes to an area, such as Tokyo, Seoul, or New York City before the 1920s. In places like these, rising demand leads to more supply, not just higher prices.</p>



<p>A fixed supply of housing means improvements in people’s aggregate incomes often partially go to landowners, since people bid up the price of housing with some of their increased income. This is one of the bases for the economist Henry George’s <a href="https://www.google.co.uk/books/edition/Progress_and_poverty/3ZcBAAAAQAAJ?hl=en&amp;gbpv=1&amp;dq=progress+and+poverty&amp;pg=PA1&amp;printsec=frontcover">proposal for taxes on land value</a>. George realised that even improvements in a local area – a new park, or better sanitation – would also be captured by local landowners. The new park would make people more willing to pay to live nearby, bidding up the price of housing in that area, so that existing landowners captured much of the value the park created.</p>



<p>These effects play out visibly in fights over <a href="https://www.theatlantic.com/ideas/archive/2021/01/anti-growth-alliance-fueled-urban-gentrification/617525/">gentrification</a>. Rising wages let bankers and tech workers bid up the rents on poorer parts of cities that have become fashionable, driving up rents. Many low-income communities have been broken up as people have been forced to move away by these rising rents, and by shops and other services changing to cater to wealthier new customers. Few people object to making a place more pleasant, greener and safer:&nbsp;the biggest concern for current residents is not improvement in the place, but the risk of being priced out of their homes and communities.</p>



<p>There is another way. Increasing the supply of housing and commercial space, while ensuring that it benefits existing residents, could turn this zero-sum situation into one where everyone can be better off. This might be done, for example, <a href="https://policyexchange.org.uk/publication/strong-suburbs/">by allowing them to vote on increased density, and benefit from it directly</a>. The new demand could be accommodated and the financial rewards to development could be shared with existing residents without displacing them.</p>



<p>The aggregate, countrywide effect of housing being so limited in supply has been that economic growth in most Western countries has accrued more and more to landowners and less to everyone else. Economist Thomas Piketty <a href="https://www.amazon.co.uk/Capital-Twenty-First-Century-Thomas-Piketty/dp/067443000X">famously demonstrated</a> an increase in the share of national income that flows to owners of <i>capital</i>, rather than to labour. But what was less widely acknowledged was that, at least in the US, it was really an increase in the share of income going to <i><em>landowners</em></i>, driven by <a href="https://www.brookings.edu/wp-content/uploads/2016/07/2015a_rognlie.pdf">increases in the cost of housing</a>, and that this effect was particularly strong in states that have highly <a href="https://voxeu.org/article/piketty-s-housing-capital-results-new-us-facts">restrictive rules against building more homes</a>.</p>



<p>The rising inequality Piketty demonstrated appears to have been largely driven by housing shortages turning, in one economist’s words, <a href="https://blogs.lse.ac.uk/politicsandpolicy/turning-houses-into-gold-the-failure-of-british-planning/">‘houses into gold’</a>. And this is the case across the Western world: <a href="https://journals.sagepub.com/doi/abs/10.1177/00031224211027800?journalCode=asra&amp;">housing inequality, not income inequality, primarily determines how much wealth inequality there is</a> in most Western countries.</p>



<h4><i>Left-behind areas and regional inequality</i></h4>



<p>Housing shortages have driven regional inequality as well. Earlier, we told the story of workplaces deprived of lower-skilled staff having to get their star employees to do work that would be better done by someone with less-expensive skills. And the other side of this is that people who cannot earn top salaries are unable to move to high-income cities at all.</p>



<p>Consider a cleaner living in Alabama. In 1960 they could move to NYC and <a href="https://www.nber.org/papers/w23609">earn wages 84% higher, and still end up with 70% higher income after rent</a>. In 2010, they could move to New York City and become 28% more productive, and earn a wage 28% higher –&nbsp;and reduce the surplus of workers back home, letting them demand higher pay. But since housing costs are so much higher, the net earnings and living standards of someone like this would <i><em>fall</em></i> if they moved today, and wouldn’t be worth it. The same would be true for plumbers, receptionists and other professions that allow other people to specialise at what they’re best at and minimise the time they spend on things like DIY and answering the phone. By contrast, top lawyers get wage boosts that are still sufficiently higher to justify a move in both 1960 and 2010, even after the higher rents they’ll have to pay.</p>



<p>Economists Peter Ganong and Daniel Shoag conclude that this effect, on aggregate, has <a href="https://www.nber.org/papers/w23609">directly led to a slowdown</a> in the rate at which poorer US states have been catching up with richer ones. Between 1880 and 1980, poorer US states caught up with the richest ones at a rate of around 2% per year; since then, this rate of convergence has halved, to around 1% per year. Where previously people of all income and skill levels would move to more prosperous places, now only well-paid ones at the top do, leaving behind many who are not so lucky in places with a surplus of labour.</p>



<p>Many Western countries have regions where the most economically productive people have moved away like this, leaving behind their lower-skilled peers competing for a limited supply of lower-wage jobs and driving wages down further. Scarce and expensive housing in ‘superstar cities’ means that when a city suffers a downturn, only the most skilled leave. Since these people have positive spillovers, this further depresses activity. By contrast, in history it was typically the worse off locals who left an area when times got tougher.</p>



<p>A great deal of attention has been spent on attempts to stop the outmigration of these talented people, to minimise the losses for those left behind. Few of these attempts have succeeded, and the solution may instead be to make it easier for people of all income and skill levels to move for work, as was the norm historically. Without that mobility, many communities have an unhealthy mix of people all competing for the same low-paid jobs, shut out entirely from the places that could be offering them a better life.</p>



<h4><i>Families</i></h4>



<p>The price of housing does not just affect the places where people live; it determines the kinds of homes they live in as well. And that has a huge influence on people’s family lives, affecting both when people have kids and how many kids they have.</p>



<p>The more expensive an extra bedroom is, the more expensive it is to have more (or any) children. Expensive housing can force people to wait before having kids and move out of city cores and into cheaper suburbs when they do. This means losing many of the amenities and social life benefits of city life, adding a long commute to their day, and probably reducing their number of job options.</p>



<p>Across the developed world, the number of children that women actually have is <a href="https://www.oecd.org/els/family/SF_2_2-Ideal-actual-number-children.pdf">well below the number they say they would like to have</a>. According to <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2846173">one recent study</a>, after controlling for other factors, a 10% rise in house prices was associated with a 1.3% fall in overall births. Put together with the huge rises in housing costs we’ve seen over the past four decades, this implies a massive reduction in births across the Western world. One <a href="https://www.adamsmith.org/news/children-of-when">report estimated</a> that rises in the cost of UK housing between 1996 and 2014 may have led to 157,000 fewer children being born in that period alone.</p>



<p>Combine these effects with the fact that higher incomes allow people to have more kids because they can more easily afford things like childcare, and housing costs may be causing dramatically fewer children to be born than people would like to have. There is also a fiscal cost to this, of course, but it is fundamentally a personal, human one: fewer brothers and sisters, less time spent with grandparents, and less of the meaning that children bring to their parents’ lives.</p>



<h4><i>Obesity</i></h4>



<p>No one is sure why America’s obesity rate rose from just 10% in the early 1960s to 35% today. Some blame increases in income, but over the same period, Japanese income rose even faster and obesity rates barely budged: they remain under 5%. Higher incomes may enable obesity, but they do not guarantee it.</p>



<p>Undoubtedly, no single factor is solely responsible either for the rise over time, or for the difference between Japan and America. Technological innovations allowing more processed and palatable foods are likely one cause. It may be that rising consumption of some nutrient, such as a type of fat or sugar, is another cause. In Western countries, the decline in smoking – which can act as an appetite suppressant – <a href="https://www.nber.org/papers/w21937#:~:text=Using%20randomized%20treatment%20assignment%20to,the%20concurrent%20rise%20in%20obesity.">is also likely responsible for a fair portion of the rise in obesity</a>.</p>



<p>The Japanese eat <a href="https://onlinelibrary.wiley.com/doi/10.1111/obr.12860">about half as much</a> processed food as Americans do. They also consume dramatically more omega-3 fatty acids in their diet. Cigarette smoking is still slightly higher in Japan than the USA as well. But there is another dramatic and visible difference between Japanese and American lives: the way their cities are built.</p>



<p>Japanese land use regulation is light touch. At its most restrictive, it allows buildings three floors high that use up the entirety of their parcel of land. This means both that Japan’s superstar cities grow far more densely than American cities, and also that they absorb far more of the country’s population. The urban environment this produces is akin to the traditional urbanism of pre-bicycle, -train and -car cities around the world: with narrow streets, finely grained, that are highly walkable. Of course, modern Japanese cities are not quite so tightly knit, and there is space for cars, bicycles and transit. But streets are extremely narrow, parking is expensive, major roads are tolled, and pedestrians mostly have priority over other road users.</p>



<p>Because of that urban style, people living in large Japanese cities drive much less than people in America. <a href="https://en.wikipedia.org/wiki/Modal_share">In Tokyo and Osaka just 12% and 13% of trips are by private motor vehicle</a>, compared to 85% in Los Angeles, 77% in Chicago, 91% in Houston and 87% in Phoenix. Most American cities are far too spread out to get around by walking, cycling or even public transport, which needs dense pockets of population to be efficient.</p>



<figure><img src="https://wip.gatspress.com/wp-content/uploads/2022/08/fig_2.png" alt=""></figure>



<p>Far more Japanese than Americans experience this sort of city life. There are 23.7 million residents in North America’s biggest metropolitan area, New York City, and these people are spread over 34,500 square kilometres. Only a small part of this is dense enough to sustain walking, cycling, and transit. By contrast, Tokyo metro area has a far larger population, with 38.1 million people, but they are four times more densely populated, across only 8,500 square kilometres. This means practically all of them can live car-optional lifestyles most of the time. Japan’s second city, Osaka, has 19.3 million: more than 45% of the country’s inhabitants live in the biggest two cities alone. By contrast, even at the most expansive definition, only around 12% of the US population live in its biggest cities.</p>



<p>It is obvious how this would affect obesity. The average Japanese walks thousands more steps than the average American every day. What’s more, nearly all Japanese walk a lot, whereas in most cities American activity is much more unequal, split between enthusiastic exercisers and those who drive everywhere. Evidence from hundreds of thousands of smartphone step counters <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5774986/">suggests</a> this difference drives obesity both within and between countries. New York City, America’s densest and most walkable, has the lowest rate of obesity in America – about half the national rate. <a href="http://www.health.state.ny.us/statistics/prevention/obesity/about.htm">In the latest study of this</a>, Manhattan had a rate half as low again, one quarter of the national average.</p>



<p>So it’s possible that preferring sprawl over density, and the housing shortages that kind of policy creates, may be damaging health, equality, average wealth and the number of children we have. Yet the health effects of more, denser housing are often ignored.</p>



<h4><i>Climate change</i></h4>



<p>Walkable cities are not just important to combat obesity. In 2018, the average Japanese person’s <a href="https://ourworldindata.org/co2-and-other-greenhouse-gas-emissions">consumption caused</a> 10.3 tonnes of CO2 emissions, while the average American caused 17.6 tonnes of emissions, or 74% more. Focusing on transport, we can see how much of that is explained by Japan’s denser, transit-rich, more walkable cities. In 2016 transport accounted for 1.63 tonnes in Japan, versus 5.22 tonnes in the US – over three times worse.</p>



<p>Maps of the <a href="https://iopscience.iop.org/article/10.1088/1748-9326/8/3/035039">UK</a> and <a href="https://pubs.acs.org/doi/10.1021/es4034364">US East Coast</a> show clearly how the densely populated parts of cities like New York, Philadelphia and London emit far less carbon per head than the rest of the surrounding sprawl. The UK’s Centre for Cities <a href="https://www.centreforcities.org/publication/net-zero-decarbonising-the-city/">estimated</a> that people living outside cities accounted for 50% more carbon emissions than those living inside them.</p>



<figure><img src="https://wip.gatspress.com/wp-content/uploads/2022/08/fig_3.png" alt=""></figure>



<figure><img loading="lazy" width="1024" height="774" src="https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1024x774.png" alt="" srcset="https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1024x774.png 1024w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-300x227.png 300w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-768x580.png 768w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1536x1161.png 1536w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-2048x1548.png 2048w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-402x304.png 402w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-462x349.png 462w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-662x500.png 662w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-722x546.png 722w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-982x742.png 982w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1032x780.png 1032w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1402x1060.png 1402w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1702x1286.png 1702w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-2002x1513.png 2002w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>In 2020, California’s population shrank for the first time since records began. The pandemic was just the latest factor that encouraged people to flee expensive, temperate Californian cities – some, like San Francisco, with decent public transit and relatively dense housing – to more affordable sunbelt cities like Atlanta, Phoenix and Dallas, reliant on cars and power-hungry air conditioning. In the last two decades, Atlanta’s population has increased by nearly 50%. Houston is now America’s third or fourth largest city. Phoenix has gone from 99th most populous in 1950 to 5th today. That reliance on cars and air conditioning contributes towards environmental disaster.</p>



<p>New homes are also much better insulated than old homes. Heating or cooling bills in a German <a href="https://www.passivhaustrust.org.uk/what_is_passivhaus.php">PassivHaus</a>, housing which is designed to stay at the right temperature without the use of additional energy, can be just a few dollars a month: one <a href="https://twitter.com/holz_bau/status/1409777248790482950">PassivHaus in Oregon</a> kept 30 degrees Fahrenheit below external temperatures during the recent heatwave, with no air conditioning. Apartment blocks are greener than single-family houses, because each home has less external surface area to gain or lose heat. And new homes can be built with zero net embedded carbon, with payments for reforestation or other means to improve the environment. New homes can hugely help the environment.</p>



<p>Rising incomes mean people want bigger homes. Few would happily return to eight family members crammed into a 1900 two-room tenement. If walkable cities ban new homes, their residents will move to more affordable places like Atlanta which build larger, more carbon-hungry homes, drive more and emit far more carbon than they would if they had the freedom to live where many of them really wanted to.</p>



<h3><i>Scratching the surface</i></h3>



<p>Once you see the effects housing shortages have on things as wildly different as obesity, fertility, inequality, climate change and wage growth, you start to see them everywhere. Scott Sumner and Kevin Erdmann have <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3667309">argued</a>, for example, that the housing ‘bubble’ that preceded the 2008 financial crisis wasn’t really a bubble after all. In fact, they suggest, house prices were rising rationally because too few houses were being built in places people most wanted to move to, not because of irrational speculation. The ensuing crisis was caused by a misdiagnosis of this problem, as the Fed hiked interest rates in a misguided attempt to ‘burst the bubble’. In support of this view, prices are now back above their ‘bubble’ peak, with no imminent sign of falling.</p>



<p>Housing shortages might have made Covid worse too. Overcrowding drives disease, including Covid, <a href="https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2783544">as people squeezed into the same houses can spread illness to one another</a>. Counterintuitively, more density can mean <i>less</i> overcrowding, because there are more homes to go round. It is too early to say for sure, but in time we may learn that housing supply played an important role during the Covid pandemic, with more overcrowded cities suffering worse outbreaks.</p>



<p>It is possible that even the political and culture wars being waged in many Western countries have their roots in housing shortages, <a href="https://www.economist.com/special-report/2020/01/16/housing-is-at-the-root-of-many-of-the-rich-worlds-problems">as a recent report for <i><em>The Economist</em></i> argued</a>. Elections in the English-speaking world are increasingly becoming divided between relatively prosperous and well-educated citizens of cities and their suburbs on one side and people in the rest of the country – rural areas and economically depressed towns – who resent the perception that the system is rigged in favour of the already well-off. Britons and French people living in areas where house prices were stagnant were more likely to vote for Brexit or the National Front respectively.</p>



<p>Many young people have had to delay forming families and often take poorly paid, insecure jobs that can barely cover rent and living costs as the price for living in culturally attractive cities. They see opportunity as limited and growth as barely perceptible. Meanwhile, older generations sit on housing property worth many times what they paid and, stuck in a zero-sum mindset, often prioritise the protection of their own neighbourhoods over the need to build more homes. Can you blame young people who resent older people, and the West’s economic system itself, when this is what it offers them?</p>



<p>If all this has a solution, then we suggest it is unlikely to be won through a zero-sum political ‘tug of war’. Western countries could become trillions of dollars better off by addressing their housing shortages. A well-designed solution can spread those gains widely enough that <i><em>everyone</em></i> is made better off, including people who currently oppose existing efforts to build more that would make them worse off.</p>



<p>We have suggested one possibility elsewhere: <a href="https://policyexchange.org.uk/publication/strong-suburbs/">radically localized democracy that allows individual streets to opt in to greater density</a> by voting for it. No construction would happen anywhere that a majority did not opt for it, but streets that <a href="https://www.strongtowns.org/journal/2021/2/4/strong-towns-by-street-and-block">voted for more density</a> would become extremely valuable, so there would be a big incentive for homeowners in high-demand areas to vote for greater density.</p>



<p>But whether this or <a href="https://cayimby.org/california-yimby-celebrates-the-passage-of-senate-bill-9/">another approach</a> is the best solution is not the key question. What matters is that housing shortages may be <i><em>the</em></i> biggest problem facing our era, and solving it needs to become everyone’s highest priority. And as important as it is, we should be wary of letting it become politically tribalised: the disastrous politicisation of Covid vaccines in the United States highlights the danger of that. Some kind of creative, below-the-radar solution that turns this zero-sum game into a positive-sum one is likely to have a better chance. In a tug of war, it’s often surprising how far you can go if you <a href="https://www.slowboring.com/p/the-rise-and-importance-of-secret">tug the rope sideways</a>.</p>



<p>If we’re right about this, it means that fixing this one problem could make everyone’s lives much better than almost anyone realises – not just by making houses cheaper, but giving people better jobs, a better quality of life, more cohesive communities, bigger families and healthier lives. It could even give renewed reasons to be optimistic about the future of the West.</p>
</div></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[An Update on Mozilla's Terms of Use for Firefox (414 pts)]]></title>
            <link>https://blog.mozilla.org/en/products/firefox/update-on-terms-of-use/</link>
            <guid>43213612</guid>
            <pubDate>Fri, 28 Feb 2025 23:59:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.mozilla.org/en/products/firefox/update-on-terms-of-use/">https://blog.mozilla.org/en/products/firefox/update-on-terms-of-use/</a>, See on <a href="https://news.ycombinator.com/item?id=43213612">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
  <main id="main">

    
<article id="post-78461">
  

  <div>
    
<p>On Wednesday <a href="https://blog.mozilla.org/en/products/firefox/firefox-news/firefox-terms-of-use/">we shared</a> that we’re introducing a new Terms of Use (TOU) and Privacy Notice for Firefox. Since then, we’ve been listening to some of our community’s concerns with parts of the TOU, specifically about licensing. Our intent was just to be as clear as possible about how we make Firefox work, but in doing so we also created some confusion and concern. With that in mind, we’re updating the language to more clearly reflect the <em>limited </em>scope of how Mozilla interacts with user data.</p>



<p>Here’s what the new language will say:</p>



<p><em>You give Mozilla the rights necessary to operate Firefox. This includes processing your data as we describe in the Firefox Privacy Notice. It also includes a nonexclusive, royalty-free, worldwide license for the purpose of doing as you request with the content you input in Firefox. This does not give Mozilla any ownership in that content.&nbsp;</em></p>



<p>In addition, we’ve removed the reference to the Acceptable Use Policy because it seems to be causing more confusion than clarity.</p>



<p><strong>Privacy FAQ</strong></p>



<p>We also updated our <a href="https://www.mozilla.org/firefox/faq/">Privacy FAQ</a> to better address legal minutia around terms like “sells.” While we’re not reverting the FAQ, we want to provide more detail about why we made the change in the first place.</p>



<p><strong>TL;DR</strong> Mozilla doesn’t sell data about you (in the way that most people think about “selling data”), and we don’t buy data about you. We changed our language because some jurisdictions define “sell” more broadly than most people would usually understand that word. Firefox has built-in privacy and security features, plus <a href="https://support.mozilla.org/en-US/kb/firefox-options-preferences-and-settings#w_privacy-security">options</a> that let you fine-tune your data settings.</p>







<hr>







<p>The reason we’ve stepped away from making blanket claims that “We never sell your data” is because, in some places, the LEGAL definition of “sale of data” is broad and evolving. As an example, the California Consumer Privacy Act (CCPA) defines “sale” as the “selling, renting, releasing, disclosing, disseminating, making available, transferring, or otherwise communicating orally, in writing, or by electronic or other means, a consumer’s personal information by [a] business to another business or a third party” in exchange for “monetary” or “other valuable consideration.”&nbsp;&nbsp;</p>



<p>Similar privacy laws exist in other US states, including in Virginia and Colorado. And that’s a good thing — Mozilla has long been a supporter of data privacy laws that empower people — but the competing interpretations of do-not-sell requirements does leave many businesses uncertain about their exact obligations and whether or not they’re considered to be “selling data.”&nbsp;</p>



<p>In order to make Firefox commercially viable, there are a number of places where we collect and share some data with our partners, including our optional ads on New Tab and providing sponsored suggestions in the search bar. We set all of this out in our <a href="https://www.mozilla.org/privacy/firefox/">Privacy Notice</a>. Whenever we share data with our partners, we put a lot of work into making sure that the data that we share is stripped of potentially identifying information, or shared only in the aggregate, or is put through our privacy preserving technologies (like <a href="https://support.mozilla.org/kb/ohttp-explained">OHTTP</a>).&nbsp;</p>



<p><br>We’re continuing to make sure that Firefox provides you with sensible default settings that you can review during onboarding or <a href="https://support.mozilla.org/en-US/kb/firefox-options-preferences-and-settings#w_privacy-security">adjust</a> at any time.</p>



<a href="https://www.mozilla.org/en-US/firefox/new?utm_medium=mozilla-websites&amp;utm_source=blog.mozilla.org&amp;utm_content=inline-cta">
  <p><img fetchpriority="high" width="512" height="512" src="https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/12/Fx-Browser-icon-fullColor-512-512x512.png" alt="" decoding="async" srcset="https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/12/Fx-Browser-icon-fullColor-512.png 512w, https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/12/Fx-Browser-icon-fullColor-512-300x300.png 300w, https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/12/Fx-Browser-icon-fullColor-512-150x150.png 150w" sizes="(max-width: 512px) 100vw, 512px">  </p>
  <div>
     <h3>Get Firefox</h3>      <p><span>Get the browser that protects what’s important</span>   </p></div>
</a>
  </div>

</article><!-- #post-78461 -->

  </main><!-- #main -->
  

<div id="related-articles">
    <h2>Related Articles</h2>
    
  </div>



</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Inheriting is becoming nearly as important as working (267 pts)]]></title>
            <link>https://www.economist.com/leaders/2025/02/27/inheriting-is-becoming-nearly-as-important-as-working</link>
            <guid>43213143</guid>
            <pubDate>Fri, 28 Feb 2025 23:20:38 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.economist.com/leaders/2025/02/27/inheriting-is-becoming-nearly-as-important-as-working">https://www.economist.com/leaders/2025/02/27/inheriting-is-becoming-nearly-as-important-as-working</a>, See on <a href="https://news.ycombinator.com/item?id=43213143">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div><p><time datetime="2025-02-27T10:34:39.417Z"> <!-- -->Feb 27th 2025</time></p></div><section data-body-id="cp2"><p data-component="paragraph"><span data-caps="initial">W</span><small>ork hard,</small> children are told, and you will succeed. In recent decades this advice served the talented and the diligent well. Many have made their own fortunes and live comfortably, regardless of how much money they inherited. Now, however, the importance of hereditary wealth is rising around the rich world, and that is a problem.</p></section><p><h3 id="article-tags">Explore more</h3><nav aria-labelledby="article-tags"><a href="https://www.economist.com/topics/leaders" data-analytics="tags:leaders"><span>Leaders</span></a></nav></p><p>This article appeared in the Leaders section of the print edition under the headline “The new inheritocracy”</p><div data-test-id="chapterlist" data-tracking-id="content-well-chapter-list"><div><hr data-testid="rule-accent"><div><h3><a href="https://www.economist.com/leaders" text="Leaders" data-analytics="chapter_list_header:Leaders">Leaders</a></h3><p><span>March 1st 2025</span></p></div></div><ul><li><a href="https://www.economist.com/leaders/2025/02/27/inheriting-is-becoming-nearly-as-important-as-working" id="6e7d8532-e5d5-4657-8cb7-1043d193c0a7" data-analytics="article:reports_headline:1" data-test-id="chapterlist-link-0"><span data-testid="right-economist-red-false"><span>→</span></span><span>Inheriting is becoming nearly as important as working</span></a></li><li><a href="https://www.economist.com/leaders/2025/02/27/donald-trump-has-begun-a-mafia-like-struggle-for-global-power" id="e70dc39e-4a9e-4ff7-a22f-8cb251cd4dc1" data-analytics="article:reports_headline:2" data-test-id="chapterlist-link-1"><span data-testid="right-london-5-false"><span>→</span></span><span>Donald Trump has begun a mafia-like struggle for global power</span></a></li><li><a href="https://www.economist.com/leaders/2025/02/24/germanys-election-victor-must-ditch-its-debt-rules-immediately" id="147b03a5-51e9-43d8-95e4-cd1b885f7ec7" data-analytics="article:reports_headline:3" data-test-id="chapterlist-link-2"><span data-testid="right-london-5-false"><span>→</span></span><span>Germany’s election victor must ditch its debt rules—immediately</span></a></li><li><a href="https://www.economist.com/leaders/2025/02/27/prabowo-subianto-takes-a-chainsaw-to-indonesias-budget" id="57d7b8b3-6a45-4bcf-a012-878eee216f72" data-analytics="article:reports_headline:4" data-test-id="chapterlist-link-3"><span data-testid="right-london-5-false"><span>→</span></span><span>Prabowo Subianto takes a chainsaw to Indonesia’s budget </span></a></li><li><a href="https://www.economist.com/leaders/2025/02/26/crispr-technologies-hold-enormous-promise-for-farming-and-medicine" id="c08c1817-78d1-40e9-9be8-3e9406b47720" data-analytics="article:reports_headline:5" data-test-id="chapterlist-link-4"><span data-testid="right-london-5-false"><span>→</span></span><span>CRISPR technologies hold enormous promise for farming and medicine</span></a></li></ul></div><div orientation="vertical" data-test-id="vertical"><div orientation="vertical"><figure><img loading="lazy" width="1280" height="1709" decoding="async" data-nimg="1" sizes="300px" srcset="https://www.economist.com/cdn-cgi/image/width=16,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 16w, https://www.economist.com/cdn-cgi/image/width=32,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 32w, https://www.economist.com/cdn-cgi/image/width=48,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 48w, https://www.economist.com/cdn-cgi/image/width=64,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 64w, https://www.economist.com/cdn-cgi/image/width=96,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 96w, https://www.economist.com/cdn-cgi/image/width=128,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 128w, https://www.economist.com/cdn-cgi/image/width=256,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 256w, https://www.economist.com/cdn-cgi/image/width=360,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 360w, https://www.economist.com/cdn-cgi/image/width=384,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 384w, https://www.economist.com/cdn-cgi/image/width=480,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 480w, https://www.economist.com/cdn-cgi/image/width=600,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 600w, https://www.economist.com/cdn-cgi/image/width=834,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 834w, https://www.economist.com/cdn-cgi/image/width=960,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 960w, https://www.economist.com/cdn-cgi/image/width=1096,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 1096w, https://www.economist.com/cdn-cgi/image/width=1280,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 1280w, https://www.economist.com/cdn-cgi/image/width=1424,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 1424w" src="https://www.economist.com/cdn-cgi/image/width=1424,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg"></figure></div><div orientation="vertical"><h3 orientation="vertical">From the March 1st 2025 edition</h3><p orientation="vertical">Discover stories from this section and more in the list of contents</p><p><a href="https://www.economist.com/weeklyedition/2025-03-01" data-analytics="sidebar:weekly_edition"><span data-testid="right-economist-red-true"><span>⇒</span></span><span>Explore the edition</span></a></p></div></div><div><a href="https://s100.copyright.com/AppDispatchServlet?publisherName=economist&amp;publication=economist&amp;title=Inheriting%20is%20becoming%20nearly%20as%20important%20as%20working&amp;publicationDate=2025-02-27&amp;contentID=%2Fcontent%2Ffkgreaevsi2bnnmt75l60gs57pn0taoi&amp;type=A&amp;orderBeanReset=TRUE" target="_blank" rel="noreferrer" data-analytics="end_of_article:reuse_this_content"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" data-testid="renew-outline"><path fill="var(--mb-colour-base-chicago-45)" d="M5.1 16.05a8.25 8.25 0 0 1-.825-1.95A7.696 7.696 0 0 1 4 12.05c0-2.233.775-4.133 2.325-5.7C7.875 4.783 9.767 4 12 4h.175l-1.6-1.6 1.4-1.4 4 4-4 4-1.4-1.4 1.6-1.6H12c-1.667 0-3.083.588-4.25 1.763C6.583 8.938 6 10.367 6 12.05c0 .433.05.858.15 1.275.1.417.25.825.45 1.225l-1.5 1.5ZM12.025 23l-4-4 4-4 1.4 1.4-1.6 1.6H12c1.667 0 3.083-.587 4.25-1.762C17.417 15.063 18 13.633 18 11.95c0-.433-.05-.858-.15-1.275-.1-.417-.25-.825-.45-1.225l1.5-1.5c.367.633.642 1.283.825 1.95.183.667.275 1.35.275 2.05 0 2.233-.775 4.133-2.325 5.7C16.125 19.217 14.233 20 12 20h-.175l1.6 1.6-1.4 1.4Z"></path></svg><span>Reuse this content</span></a></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why it's so hard to build a jet engine (213 pts)]]></title>
            <link>https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine</link>
            <guid>43212952</guid>
            <pubDate>Fri, 28 Feb 2025 23:05:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine">https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine</a>, See on <a href="https://news.ycombinator.com/item?id=43212952">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="auto"><p>Civilization's toughest technical challenges are those that require extraordinary (and constantly improving) performance to be delivered at a low cost. High levels of performance often require complex, difficult-to-produce technology operating close to the limits of what’s possible. Any contractor could put up a five-story building using off-the-shelf building technology, but a 500-story building would be far more difficult to achieve and would require pushing the boundaries of building technology forward to even be possible.</p><p>Trying to make something cheap while you’re pushing the boundaries of performance makes things even more difficult. You need to worry about things like minimizing maintenance costs, eliminating expensive materials or components, and having a design that can be manufactured inexpensively and minimizes costly expert labor. (And if you do require expensive components or labor, you need to spread it as thinly as possible.)</p><p><span>Building and operating a leading-edge </span><a href="https://www.construction-physics.com/p/how-to-build-a-20-billion-semiconductor" rel="">semiconductor fab</a><span> is an example of this sort of intersection. The most advanced semiconductors have features that are 1/2000th the width of a human hair and are made from materials where even a few atoms in the wrong place can cause catastrophic defects, thus requiring incredible levels of control and precision during the production process. This control and precision needs to be achieved consistently and continuously, so that transistors can be made in enormous quantities at very low unit costs.</span></p><p><span>Developing a </span><a href="https://www.construction-physics.com/p/a-cycle-of-misery-the-business-of" rel="">new commercial aircraft</a><span> is another example in this category, as is building a cheap, reusable rocket. And so is building a commercial jet engine. With jet engines, performance and economy are closely bound together. To be attractive to airlines an engine needs to be as efficient as possible, minimizing fuel consumption and the amount of maintenance it requires. High fuel efficiency requires high compression ratios and engine temperatures, which in turn require extremely efficient compressors, components that are both incredibly strong and incredibly lightweight, and materials that can withstand extreme temperatures. And a commercial jet engine must successfully operate hour after hour, day after day, for tens of thousands of hours before being overhauled.</span></p><p>Only a small number of organizations are capable of executing such technically difficult projects. Only three companies in the world operate leading edge semiconductor fabs (Samsung, Intel, and TSMC). Depending on how you count, there are just two to four builders of large commercial aircraft (Airbus, Boeing, Embraer, and now COMAC). With reusable rockets, SpaceX is in a category of its own. The number of participants is small partly because of the inherent technical difficulty and partly it’s because success typically requires spending billions of dollars. It takes on the order of $20 billion to build a leading edge semiconductor fab and anywhere from $10 to $30 billion or more to develop a new commercial aircraft.</p><p><span>We see something similar with large commercial jet engines. Only a handful of companies produce them: GE (both independently and via CFM, </span><a href="https://en.wikipedia.org/wiki/CFM_International" rel="">its partnership</a><span> with France’s </span><a href="https://en.wikipedia.org/wiki/Safran_Aircraft_Engines" rel="">Safran</a><span>), Pratt and Whitney, and Rolls-Royce.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-1-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-1-158080744" target="_self" rel="">1</a></span><span> Developing a new engine is a multi-billion dollar undertaking. Pratt and Whitney spent an estimated $10 billion (in ~2016 dollars) to develop its </span><a href="https://en.wikipedia.org/wiki/Pratt_%26_Whitney_PW1000G" rel="">geared turbofan</a><span> and CFM almost certainly spent billions developing its </span><a href="https://en.wikipedia.org/wiki/CFM_International_LEAP" rel="">LEAP series of engines</a><span>. (As with leading edge fabs and commercial aircraft, the technical and economic difficulty of building a commercial jet makes it one area of technology where China still lags. China is </span><a href="https://www.scmp.com/economy/china-economy/article/3251482/how-monumental-chinas-challenge-build-its-own-jet-engine-c919-it-seeks-aviation-self-reliance" rel="">working on an engine for its C919</a><span>, but hasn’t yet succeeded.)</span></p><p>It’s not that building a working commercial jet engine itself is so difficult. It’s that a new engine project is always pushing the boundaries of technological possibility, venturing into new domains — greater power, higher temperatures, higher pressures, new materials — where behaviors are less well understood. Building the understanding required to push jet engine capabilities forward takes time, effort, and expense.</p><p><span>The jet engine was invented in the 1930s, independently by </span><a href="https://en.wikipedia.org/wiki/Frank_Whittle" rel="">Frank Whittle</a><span> in the UK and </span><a href="https://en.wikipedia.org/wiki/Hans_von_Ohain" rel="">Hans von Ohain</a><span> in Germany.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-2-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-2-158080744" target="_self" rel="">2</a></span><span> At the time, propeller-driven piston-powered aircraft were capable of traveling around 300-400 miles per hour, but performance gains were getting harder and harder to achieve. At higher speeds, the propeller tips would begin to exceed the speed of sound, creating shockwaves and increasing drag. It was also becoming harder to increase the power of piston engines — as engines got more powerful, they got heavier, offsetting gains in power. Both Whittle and Ohain hypothesized that with an alternative propulsion system, aircraft could achieve much higher speeds and altitudes, and they began to investigate alternatives, ultimately converging on a gas turbine-based propulsion system, or jet engine.</span></p><p><span>The jet engine is a type of </span><a href="https://en.wikipedia.org/wiki/Heat_engine" rel="">heat engine</a><span>: it converts heat into useful work. Like a steam turbine or an internal combustion engine, the jet engine works by taking some working fluid (in this case air), compressing it, heating it, and then expanding it, extracting work from the heated fluid in the process.</span></p><p><span>More specifically, a jet engine operates on the </span><a href="https://en.wikipedia.org/wiki/Brayton_cycle" rel="">Brayton cycle</a><span>. Air is taken into the front of the engine, then run through a compressor, increasing the air’s pressure. This compressed air flows into a combustion chamber, where it’s mixed with fuel and ignited, producing a stream of hot exhaust gas. This exhaust gas then drives a turbine, which extracts energy from the hot exhaust as it expands, converting it into mechanical energy in the form of the rotating turbine. This mechanical energy is then used to drive the compressor at the front of the turbine.</span></p><p>In a gas turbine power plant, all the useful work is done by the mechanical energy of the rotating turbine. Some mechanical energy drives the compressor, while the remaining energy drives an electric generator. In a jet engine, the energy is used differently: some energy drives the compressor via the turbine, but instead of using the remaining energy to generate electricity, a jet engine uses it to create thrust through hot exhaust gases, pushing the aircraft forward the same way an inflated balloon propels when air rushes out of it.</p><p>Building a functional jet engine requires several key supporting technologies. One such technology is the compressor. In a Brayton cycle engine, roughly 50% of the energy extracted from the hot exhaust gas must be used to drive the compressor (this fraction is known as the back work ratio). Because the back work ratio is so large (a steam turbines has a back work ratio closer to 1%), any losses from compressor inefficiencies are proportionally very large as well. This means that a functional jet engine needs turbines and compressors that transfer as much energy as possible without losses. Whittle was successful partly because he built a compressor that ran at 80% efficiency, far better than existing compressors. Many contemporaries believed Whittle would be lucky to get 65% efficiency — jet engine designer Stanley Hooker noted that he “never built a more efficient compressor than Whittle”.</p><p><span>Another important advance was in turbine materials. The fuel in a jet engine burns at </span><a href="https://www.rolls-royce.com/~/media/Files/R/Rolls-Royce/documents/country/deutschland/Poster/Poster%20A1%20-%20How%20does%20a%20jet%20engine%20work%20-%20English.pdf" rel="">thousands of degrees</a><span>, and the turbine needs to be both strong and heat-resistant to withstand the rotational forces and temperatures. Whittle’s first engine used turbine blades of stainless steel, but these failed frequently and it was realized that stainless steel wasn’t good enough for a production engine. The first production engines used turbine blades made of </span><a href="https://en.wikipedia.org/wiki/Nimonic" rel="">Nimonic</a><span>, a nickel-based “superalloy” with much higher temperature resistance. As we’ll see, the need to drive engine temperatures higher and higher has pushed for the development of increasingly elaborate temperature resistant materials and cooling systems.</span></p><p><span>Von Ohain’s jet engine first flew in August of 1939 (powering the </span><a href="https://en.wikipedia.org/wiki/Hans_von_Ohain" rel="">Heinkel He-178</a><span>), and Whittle’s first flew in </span><a href="https://www.bbc.co.uk/history/historic_figures/whittle_frank.shtml" rel="">May 1941</a><span> (on the </span><a href="https://en.wikipedia.org/wiki/Gloster_E.28/39" rel="">E.28/39</a><span>). By the end of WWII both the UK and Germany had fielded several jet powered aircraft including the </span><a href="https://en.wikipedia.org/wiki/Gloster_Meteor" rel="">Gloster Meteor</a><span>, the </span><a href="https://en.wikipedia.org/wiki/De_Havilland_Vampire" rel="">de Havilland Vampire</a><span>, the </span><a href="https://en.wikipedia.org/wiki/Messerschmitt_Me_262" rel="">Messerschmitt Me-262</a><span>, and the </span><a href="https://en.wikipedia.org/wiki/Arado_Ar_234_Blitz" rel="">Arado Ar234</a><span>.</span></p><p><span>The US initially lagged in jet engine development, and the first US jet engine efforts relied heavily on existing British designs. The first jet engine built in the US, the </span><a href="https://en.wikipedia.org/wiki/General_Electric_I-A" rel="">GE 1-A</a><span>, was a copy of Whittle’s W.2B/23 engine; the first mass-produced US engine, the </span><a href="https://en.wikipedia.org/wiki/General_Electric_J31" rel="">J31</a><span>, was derived from it. The prototype of the first successful US jet fighter, Lockheed’s </span><a href="https://en.wikipedia.org/wiki/Lockheed_P-80_Shooting_Star" rel="">P-80 Shooting Star</a><span>, used a British </span><a href="https://en.wikipedia.org/wiki/De_Havilland_Goblin" rel="">H-1 “Goblin” engine</a><span> (though the production version used American </span><a href="https://en.wikipedia.org/wiki/Allison_J33" rel="">J33 engines</a><span>).</span></p><p><span>But the US military quickly recognized the potential jet engines had for aircraft performance and began to pour huge amounts of money into companies like GE, Westinghouse, and General Motors to both build improved versions of British engines and begin developing their own models. The first US-designed jet engine, the </span><a href="https://en.wikipedia.org/wiki/Westinghouse_J30" rel="">Westinghouse J30</a><span>, ran in 1943, and by 1950 the military had funded more than a dozen jet engine projects from a variety of manufacturers.</span></p><p><span>As money flowed into jet engine development, engine performance and technology quickly improved. Britain’s first production engine, a Rolls-Royce version of Whittle’s W.2B known as the </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Welland" rel="">Welland</a><span>, produced 1600 pounds of thrust when it first ran in 1942. By 1950, the </span><a href="https://en.wikipedia.org/wiki/Pratt_%26_Whitney_J57#Specifications_(JT3C-7)" rel="">Pratt and Whitney J57</a><span> was producing 17,000 pounds of thrust.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-3-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-3-158080744" target="_self" rel="">3</a></span><span> Thanks to better temperature-resistant materials, the turbine inlet temperature in the J57 was hundreds of degrees higher than in the Welland. And while early jet engines used centrifugal compressors that used a rotating impeller to push the air out to the sides, there were limits to how much these could pressurize air. By 1950 jet engines, including the J57, had almost universally changed to axial compressors, which compress the air along the length of the engine through a series of compression stages.</span></p><p><span>In addition to using axial compressors, engines further improved with the adoption of two-spool designs. The core of a basic axial compressor jet engine has basically a single large moving part: a rotating shaft with a turbine mounted on one end and a series of compression stages mounted to the other.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-4-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-4-158080744" target="_self" rel="">4</a></span><span> With this arrangement, every part of the turbine and compressor spins at the same speed, but it’s often beneficial to have different parts of the engine spinning at different speeds: The low pressure front and high pressure rear parts of the compressor work most efficiently at different speeds, and it’s easier to maintain smooth airflow through the engine across a range of different conditions (and avoid things like </span><a href="https://en.wikipedia.org/wiki/Compressor_stall" rel="">compressor stall</a><span>) if different parts of the compressor can rotate at different speeds.</span></p><p><span>One way of allowing different parts of the engine to rotate at different speeds is to add a second, inner shaft to the engine that rotates independently.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-5-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-5-158080744" target="_self" rel="">5</a></span><span> The J57 was the first two-spool turbojet, and today most commercial jet engines use two or even three spools. Two-spool engine designs made it possible to achieve higher compression ratios and thus higher engine efficiencies. The Welland had a pressure ratio of around 4:1, while the J57 had a ratio of around 11.5:1.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png" width="632" height="377" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:377,&quot;width&quot;:632,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Diagram of an early jet engine with a centrifugal compressor, via Rolls-Royce.</figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png" width="557" height="479" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/e48a2250-343f-4e6b-8174-482d40f1df52_557x479.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:479,&quot;width&quot;:557,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Axial, twin-spool turbofan engine, via </span><a href="https://ntrs.nasa.gov/api/citations/20130013439/downloads/20130013439.pdf" rel="">NASA.</a></figcaption></figure></div><p>But while by the 1950s jet engine performance had greatly increased, this was a hard-won achievement. Jet engines required a far greater understanding and mastery of the motion and behavior of hot gasses, and it took much more time to design them than piston engines. An executive at Pratt and Whitney noted that the J57 took on the order of 1.3 million man hours of design time, roughly twice as much as a piston engine did. And while piston engines could be made from comparatively thick and sturdy castings and forgings, much of a jet engine was made from thin sheets of exotic alloys carefully bent into shape, which required novel and complex manufacturing techniques. From “Dependable Engines: The Story of Pratt &amp; Whitney:”</p><blockquote><p><em>...the jet only became possible because of the development of alloys for that sheet metal that could handle higher temperatures and pressures. And Pratt had to figure out how to weld sheet metal. ‘With the multiplicity of joints in sheet metal parts of a jet, the distribution of stresses is one of the most important considerations. A weld becomes an actual design factor rather than a mere fastening device,’ Horner said.</em></p><p><em>He referred to many of the issues in converting to jets: things like relatively large diameter parts with very thin walls and all of the compressor and turbine components and airfoils with ‘a great variety of aerodynamic shapes of such awkward dimensions that our designers often complain that they have neither a beginning nor an ending.’</em></p><p><em>He called these ‘odd horses and peculiar cats in strange contrast to the piston engine’s comfortable old forgings and castings which were heavy and sturdy and supplied their own rigidity for machining.’ And all that sheet metal and oddly shaped stuff needed a lot of tools. To build the little J30, Pratt needed 5250 tools. By 1952 when Horner spoke, the J57 had 20,000 tools.</em></p></blockquote><p><span>This complexity made developing a new jet engine difficult and time consuming. Early, centrifugal-compressor-based jet engines came together comparatively easily. The </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Nene" rel="">Rolls-Royce Nene</a><span>, the most powerful aircraft engine in the world when it debuted, took just 5 months to go from starting design to a working engine. Axial-compressor-based engines, though capable of higher performance, were far more difficult to design and build because it was hard to ensure that the air flowed properly through the many different compression stages.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-6-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-6-158080744" target="_self" rel="">6</a></span><span> Early jet engine designer Stanley Hooker noted that Rolls-Royce’s axial compressor engine that followed the Nene, the </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Avon" rel="">Avon</a><span>, took seven years to iron out the various problems in it. GE’s first axial compressor engine, the </span><a href="https://en.wikipedia.org/wiki/Allison_J35" rel="">J35</a><span>, required a similar amount of time. And difficulty and time consuming meant expensive. Pratt and Whitney’s J57 took on the order of $150 million to develop, roughly $2 billion in 2025 dollars.</span></p><p><span>Among the successes of engines like the Avon, the J35, and the J57 were numerous failures. Westinghouse, one of the largest manufacturers of steam turbines, received a huge fraction of initial jet engine contracts and was poised to become a major jet engine manufacturer, but the company was unwilling to invest in the R&amp;D necessary to master the new technology, and it struggled to produce reliable engines that met their performance targets. Westinghouse’s J30 engine suffered repeated development delays and problems that had to be fixed by Pratt and Whitney. When the engine was finally ready, it provided “only marginally satisfactory service”. It’s J40 engine had even worse struggles: a low-thrust version was delayed for three years, and a higher-thrust version was never successfully delivered at all. The J40 program, </span><a href="https://en.wikipedia.org/wiki/Westinghouse_J40" rel="">called</a><span> “disastrous” and “a fiasco,” was ultimately cancelled.</span></p><p><span>Westinghouse wasn’t alone. Curtis-Wright, a major manufacturer of aircraft piston engines, ultimately secured 11 jet engine contracts from the US military by 1956, but the company struggled mightily to adapt to jet engine manufacturing. Its J65 and J67 jet engines were “persistently underpowered and failure-prone” even though the J65 was derived from an </span><a href="https://en.wikipedia.org/wiki/Armstrong_Siddeley_Sapphire" rel="">existing engine</a><span>, and the company developed a reputation as “an engineering bungler”. One Air Force official described the company’s issues in a letter:</span></p><blockquote><p><em>From the inception of the YJ and J65 programs there has been an apparent lack of appreciation by your management of the magnitude of the job you have undertaken. There has also been inadequate control over: tooling for the job, manufacturing processes and techniques, quality control, test programs, both at Wright Aeronautical and at subcontractors….</em></p><p><em>… Many of the theories presented by your Engineering Department in explanation for failures have proved to be unfounded. Engineering changes have been proposed and incorporated, in our opinion, to correct manufacturing [practice] deficiencies.</em></p></blockquote><p><span>This was apparently just one “among scores of Air Force challenges to Curtiss-Wright’s ability to manage, and indeed even understand, the business of designing, building, and testing jet engines.” General Electric similarly struggled with its J33 and J47 engines. On the J33, Kelly Johnson (of Lockheed’s Skunkworks fame) complained about the engine’s “poor design features and poor maintenance,” </span><a href="https://www.sciencedirect.com/science/article/abs/pii/S0263237307000357" rel="">noting that</a><span> “Basic progress on flight investigations [for the P-80] has been very slow because of the inability to keep the airplanes flying.’’</span></p><blockquote><p><em>Engine tail cones were cracking after 20 hours of use, and GE notified Johnson that replacing them would take two to three months. Turbine wheels were failing in 50 hours running or less, but GE was stalling on redesigns. Johnson railed about ‘the poor quality of the engineering design of certain engine changes,’’ ‘‘poor workmanship,’’ and the delivery of engines ‘‘unsafe to fly.’’</em></p></blockquote><p>The J47 project, on which the air force spent $300 million by 1950 (~$4 billion in 2025 dollars), was extremely delayed and dogged by technical problems. Though the engine eventually entered service, poor reliability meant that it initially averaged only 11 hours of flight between major overhauls. Engines ultimately required extensive modifications, which had to be done in the field and cost millions. GE’s poor performance on the J47 project “discourage[d] Air Force optimism toward any new GE development.”</p><p><span>More broadly, while jet engines undoubtedly had high performance (the jet-powered </span><a href="https://en.wikipedia.org/wiki/North_American_F-100_Super_Sabre" rel="">F100</a><span>, which first flew in 1953, was the first US fighter to break the sound barrier in level flight), it proved difficult to both constantly push the boundaries of performance and have engines that worked reliably and consistently. During the Korean War, an Air Force report noted that jet engine failures were the leading cause of major accidents: in 1951 alone there were 149 such failures, destroying 95 aircraft and killing 25 pilots. Engines were so unreliable that they made Air Force recruitment difficult: pilots “were no longer eager to join the Air Force if they had to learn to fly jets.”</span></p><p>The jet engine’s high performance made the military willing to fund development efforts and put up with its many shortcomings. But while those shortcomings might have been acceptable for military aircraft, using them on commercial aircraft would require further improvement. A commercial jet engine didn’t just need to meet its performance targets — it had to operate profitably.</p><p><span>Aircraft manufacturers started considering jet-powered airliners in the late 1940s, but initially few airlines were interested in them. In his </span><a href="https://www.amazon.com/Turbulent-Skies-Commercial-Aviation-Technology/dp/0471109614" rel="">history of commercial aviation</a><span>, T.A. Heppenheimer describes the airline industry’s reaction to the jet:</span></p><blockquote><p><em>...airlines, as commercial enterprises, in no way could accept the cost and performance limitations of jets. The jet engines that the airline executives knew about were still fuel-guzzlers, and aircraft that they powered would still be limited in range…And the jet engines of the day demanded much maintenance, which would drive costs even higher by taking aircraft out of service, reducing their ability to generate revenue. Ralph Damon, president of TWA, expressed a common view in the industry when he said, ‘The only thing wrong with the jet planes of today is that they won’t make money.’</em></p></blockquote><p><span>Once again, the British took the lead. The British-built de Havilland Comet airliner debuted in 1952, powered by four </span><a href="https://en.wikipedia.org/wiki/De_Havilland_Ghost" rel="">de Havilland Ghost</a><span> turbojets. And while the Comet ultimately failed (fatigue failures around its rectangular windows caused two crashes, resulting in it being withdrawn from service), it proved that jet travel, while expensive, could be profitable. From Turbulent Skies:</span></p><blockquote><p><em><span>[The Comet’s] operating costs were nearly triple those of the [propeller-powered] </span><a href="https://en.wikipedia.org/wiki/Douglas_DC-6" rel="">DC-6</a><span>. But it flew with nearly every seat filled, and though BOAC charged only standard fares, it found itself in the remarkable position of actually making money with the new jets. That brought other airline executives over for a look, including Juan Trippe [founder of Pan Am]. He met with Sir Geoffrey de Havilland, who was promising a seventy-six-seat Comet III, and in October he ordered three, with an option on seven more.</span></em></p></blockquote><p>Trippe’s boldness gave other airlines no choice but to follow:</p><blockquote><p><em>…while jets might offer dubious economics, their popular appeal was vivid and unmistakable. The Comet had shown that…This meant that once Trippe put jets into service, he could skim off the cream of everyone else’s business. Other carriers, particularly those serving the North Atlantic, would buy jets or lose their shirts.</em></p></blockquote><p><span>In October 1955, Trippe ordered 45 jets for Pan Am: 20 </span><a href="https://en.wikipedia.org/wiki/Boeing_707" rel="">Boeing 707s</a><span> and 25 </span><a href="https://en.wikipedia.org/wiki/Douglas_DC-8" rel="">Douglas DC-8s</a><span>. Both aircraft were powered by the Pratt and Whitney </span><a href="https://airandspace.si.edu/collection-objects/turbojet-model-pratt-whitney-jt3c-j57/nasm_A19660009000" rel="">JT3</a><span>, a commercial version of the J57.</span></p><p><span>The demands of commercial service would continue to push jet engine performance higher and higher: Higher compression ratios and temperatures to minimize fuel consumption, and longer times between overhauls. This meant continually pushing the technology forward. For instance, early jet engines were made mostly from steel and aluminum, but by the 1960s they were being fashioned mostly from titanium and “superalloys” like Inconel. Turbine blades, already difficult to fabricate in the 1950s, got even more complex, with elaborate internal structures to allow cooling air to </span><a href="https://www1.grc.nasa.gov/historic-facilities/special-projects-laboratory/materials-research/" rel="">flow through the turbine blade</a><span>.</span></p><p>Another key development for jet engine commercial use was the turbofan. In a conventional jet engine, all the air flows through the compressor, into the combustion chamber, through the turbine, and out the rear. This arrangement is known as a turbojet. But if you mounted a fan to the engine spool that was larger than the rest of the engine, some air would flow around the sides of the engine, rather than through it.</p><p><span>Adding this fan offers several advantages. On a turbojet, the hot exhaust exits the engine at a high speed, but jet engines are at their most efficient when the exhaust stream is as slow as possible. Air moved by the fan around the sides of the engine will be much slower than the hot exhaust from the combustion chamber, improving engine fuel efficiency. This slower air also makes much less noise — an important factor, since people were </span><a href="https://www.construction-physics.com/p/why-is-it-so-hard-to-build-an-airport" rel="">getting fed up</a><span> with the noise from jets. A large fan also makes it easier to increase engine thrust, making it possible to power larger, heavier aircraft.</span></p><p><span>There’s a variety of different ways of adding a fan to a jet engine. GE added an aft-mounted fan to its </span><a href="https://en.wikipedia.org/wiki/General_Electric_CJ805" rel="">CJ805</a><span> for use on the </span><a href="https://en.wikipedia.org/wiki/Convair_990_Coronado" rel="">Convair 990</a><span> airliner. The company’s </span><a href="https://en.wikipedia.org/wiki/General_Electric_GE36" rel="">GE36 unducted fan</a><span>, developed in the 1980s, also featured an aft-mounted fan. A </span><a href="https://en.wikipedia.org/wiki/Turboprop" rel="">turboprop</a><span>, which mounts a conventional propeller to the front of the jet engine spool, is arguably a type of fan engine as well. But the engine arrangement that would be adopted for large commercial aircraft was a large, ducted fan at the front of the engine, an arrangement that became known as the turbofan. Today, virtually all large commercial aircraft are powered by high-bypass turbofans (engines where a very large fraction of air is routed around the engine rather than through it).</span></p><p><span>Fan engines had been proposed by Whittle when he was first designing his jet engine, and turbofans began to appear in the 1950s. Rolls-Royce introduced their </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Conway" rel="">Conway turbofan</a><span> in 1955, and Pratt and Whitney introduced a turbofan version of their JT3 engine, the </span><a href="https://en.wikipedia.org/wiki/Pratt_%26_Whitney_JT3D" rel="">JT3D</a><span>, in 1959. These early turbofans had relatively low bypass ratios (the ratio of air that goes around the compressor and turbine to the air that goes through it): The Conway had a bypass ratio of 0.3, and the JT3D had a ratio of 1.4. But by the late 1960s huge, high bypass engines were being built. Pratt and Whitney’s JT9D, the engine that powered the Boeing 747, had a bypass ratio of nearly 5:1, and GE’s </span><a href="https://en.wikipedia.org/wiki/General_Electric_TF39" rel="">TF39</a><span> had a bypass ratio of 8:1. (A modern LEAP engine has a bypass ratio of </span><a href="https://en.wikipedia.org/wiki/CFM_International_LEAP" rel="">10 or 11:1</a><span>).</span></p><p>As a result of these and other improvements, engine performance continued to climb. Higher bypass ratios, pressure ratios, and turbine temperatures drove down fuel consumption, as did lower engine weight. Engine reliability improved, time between overhauls increased, and engine failures became much less common. While early jet engines needed overhaul after 10 hours of flight time, by the 1960s engines were operating for nearly 1000 hours before needing to be overhauled.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png" width="501" height="359.54937413073714" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:516,&quot;width&quot;:719,&quot;resizeWidth&quot;:501,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Jet engine specific fuel consumption over time, via Ballal and Zelina 2012.</figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png" width="501" height="339.4793152639087" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:475,&quot;width&quot;:701,&quot;resizeWidth&quot;:501,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Jet engine thrust to weight ratio over time, via Ballal and Zelina 2012</figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png" width="501" height="361.7896389324961" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:460,&quot;width&quot;:637,&quot;resizeWidth&quot;:501,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Jet engine pressure ratio over time, via Ballal and Zelina 2012.</figcaption></figure></div><p><span>But this performance once again had to be fought for. By the 1970s, more than 30 years after the first jet-powered aircraft flew, it was still incredibly difficult and expensive to bring a new jet engine into service. Development costs were approaching a billion dollars: Rolls-Royce spent $874 million (close to $7 billion in 2025 dollars) to bring its RB211 into service, and delays and cost overages on the program bankrupted the company, </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Limited#:~:text=In%20the%20new%20year%20of,left%20and%20it%20voluntarily%20entered" rel="">forcing the British government to nationalize it</a><span>. On GE’s TF39, development was plagued by early engine failures, and the engine repeatedly failed qualification tests. Pratt and Whitney had severe delays and problems during development of its JT9D, to the point where Boeing was forced to hang concrete blocks off the wings of completed 747s in lieu of engines which hadn’t yet been delivered.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-7-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-7-158080744" target="_self" rel="">7</a></span><span> Once it was in service, the JT9D initially proved inefficient and unreliable, with a tendency to fail prematurely and to develop “surge” (a potentially dangerous phenomena where airflow reverses through the compressor). These problems took several years to iron out. Another Pratt and Whitney, the military F100 engine, </span><a href="https://www.tandfonline.com/doi/abs/10.1177/1744935906064096" rel="">similarly yielded</a><span> “major controversy in the 1970s due to severe operational and reliability problems.”</span></p><p><span>We can get a better understanding of why, specifically, it’s so hard to develop a new jet engine by looking at the history of a specific one, the </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_RB211" rel="">RB211</a><span>. The RB211 is a high bypass turbofan engine designed and built by Rolls-Royce, originally for the ill-fated </span><a href="https://en.wikipedia.org/wiki/Lockheed_L-1011_TriStar" rel="">Lockheed Tristar.</a><span> While the RB211 was ultimately very successful — Rolls-Royce sold 3760 of them, and the engine formed the basis for its current </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Trent" rel="">Trent</a><span> line of engines — development took so long and went so far over budget that it drove the company into bankruptcy. Fortunately for us, the history of the RB211 is documented in a </span><a href="https://www.aviation-bookshop.com/shop/the-history-of-the-rolls-royce-rb211-turbofan-engine/" rel="">book published by the Rolls-Royce Heritage Trust</a><span>, so we can see exactly what challenges had to be overcome to get it operational.</span></p><p><span>Design for the RB211 started in early 1967, with a team of 700 engineers. As designed, the engine would be a major advance over Rolls-Royce’s previous large turbofan engine, the </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Conway" rel="">Conway</a><span>:</span></p><blockquote><p><em>Compared to the Conway engine, the thrust was nearly double, the airflow was 3.7 times higher, the fan diameter was nearly double and yet the engine was marginally shorter. The pressure ratio at take-off had increased from 17:1 to 25:1 (27:1 at top of climb) and the turbine entry as designed was about 150 degrees centigrade higher at 1488 K on a hot day take-off. Climb and cruise temperatures were substantially higher. The weight of the basic engine (less power plant) was 8861 lbs compared with the 5160 lbs for the Conway.</em></p></blockquote><p><span>To achieve the desired levels of performance, the RB211 had several novel features. Rather than using a two-spool design, it would use a three-spool, allowing further optimization of rotational speeds in different parts of the engine. To minimize weight, many parts of the engine, most notably the front fan,</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-8-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-8-158080744" target="_self" rel="">8</a></span><span> would be fabricated from composites like carbon fiber or glass-reinforced plastic. These and other improvements were estimated to reduce fuel consumption by 21% compared to the Conway, as well as reducing engine noise.</span></p><p>Initial design for the RB211 was completed by October of 1967, after which the company began to build the first engines for testing. If all went well, the engine’s first flight on a Lockheed Tristar would take place in November of 1970.</p><p>But when testing began in August of 1968, it was clear there were numerous problems with the engine. Examination of the engines following early tests showed that the combustion chamber lining was burnt and distorted, seals were breaking down, stators were cracking, and the layers of carbon fiber in the fan blade were delaminating. Guide vanes (airfoil structures which redirect the flow of air) were also cracked, and were burnt in some places and had rubbed against turbine blades in others. The engine had only produced around half of its design thrust, and engine surges had repeatedly occurred. As testing continued, problems mounted. By early 1969, 99 different major engine defects had been diagnosed. By September, the number of major defects rose to 175.</p><p>Slowly, meticulously, the design team pinned down various problems and reworked the design. Here are just a few of the problems that needed to be fixed:</p><ul><li><p><span>In the compressor, glass-reinforced plastic parts such as the stators and the bearing housing, were replaced with more rugged (but heavier) metal ones. The high-pressure compressor drum was repeatedly redesigned to address air leakage, early failures, and problems of “ovalization,” and parts of the compressor were changed from titanium to an Inconel alloy. To reduce surge problems, a complex series of </span><a href="https://www.gevernova.com/content/dam/gepower-new/global/en_US/downloads/gas-new-site/services/gas-turbines/upgrade-gea32093b-variable-inlet-guide-vane-r1.pdf" rel="">controllable guide vanes</a><span> was added to the compressor. Compressor blades were strengthened to avoid premature failure and compressor guide vanes were changed from sheet metal to more robust forgings.</span></p></li></ul><ul><li><p>In the combustion chamber, the chamber lining was made thicker and generally strengthened, and the entire combustion chamber was redesigned to improve airflow and reduce air leakage at the turbines. A different heat treatment process for the casing was adopted, and a wire winding was added to the casing to prevent thermal expansion problems.</p></li></ul><ul><li><p>The secondary air system, which uses air to cool the engine, was completely redesigned to reduce leaks.</p></li></ul><ul><li><p>The carbon fiber front fan couldn’t be made strong enough to survive a bird strike, and was replaced with a titanium one. The fan case underwent multiple redesigns to be strengthened, which included changing it from aluminum to titanium.</p></li></ul><ul><li><p><span>In the turbine, the high-pressure turbine disk was changed from Nimonic to </span><a href="https://en.wikipedia.org/wiki/Waspaloy" rel="">Waspalloy</a><span>, another nickel-based superalloy. Gaps between turbine blades and guide vanes were enlarged to reduce vibration problems, turbine seals were redesigned, and cooling holes were added to the turbine blades. Turbine guide vanes were redesigned to improve cooling.</span></p></li></ul><ul><li><p>The engine was strengthened in spots to reduce vibration problems and related failures.</p></li></ul><p>Diagnosing these problems and implementing the necessary changes took months of painstaking testing and experimentation: testing the engine, noticing the various failures, implementing fixes, and then testing the engine again. In some cases, engineers put enormous efforts into particular solutions, only to be forced to abandon them when they couldn’t be made to work. It wasn’t until 1970, for instance, more than two years after development began, that the carbon fiber fan blade was finally abandoned in favor of the titanium blade.</p><p>As time was spent addressing the various failures, the development schedule slipped:</p><blockquote><p><em>By the end of 1969, 1,270 hours of bench running had been achieved against 3000 hours planned but, apart from the special run on Engine 7, no engine had run to 40,000 lb thrust and most engines had been removed from the test bed prematurely because of failure.</em></p></blockquote><p>By the end of 1970, the program was a year behind schedule, and the launch costs of the engine had doubled. In early 1971, the company declared bankruptcy. But despite the setbacks, the team continued to work through problems: By the middle of 1971, “engines were not failing as frequently and hours were building up at a rate of 220 hours per month compared with 100 hours per month during the previous two years.” Performance improved, and thrust produced by the engine continued to creep up. By 1972, the engine was working reliably. It received its type certification in early 1972 and made its first commercial flight in April of that year.</p><p>This wasn’t the end of the troubles for the RB211 — it took 6 years after beginning commercial service for all the problems to be ironed out — but the end result was a successful engine, derivatives of which continue to be produced today.</p><p>Not all new jet engine projects will have the same struggles as RB211, but it’s been an expensive and time-consuming development task since the 1950s. The inflation-adjusted costs to develop a new jet engine have almost always run into the billions:</p><ul><li><p><span>The J57, which powered the B52 and whose commercial iteration powered the first wave of US jet-powered airliners, cost roughly $2 billion in inflation-adjusted dollars.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-9-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-9-158080744" target="_self" rel="">9</a></span></p></li><li><p>The J58, the engine that powered the SR-71 blackbird, cost closer to $7 billion.</p></li><li><p>Between the 1960s and early 2000s, the average inflation-adjusted development cost of a new military jet engine has been $1.5 billion.</p></li><li><p>In the late 1990s and early 2000s, both Pratt and Whitney and General Electric estimated that the costs of new jet engine development had reached $2 billion or more ($3-4 billion in 2025 dollars).</p></li></ul><p>These huge costs mean that it can take 15-20 years for a new jet engine to make a return on its investment.</p><p><span>It’s not that building a jet engine that </span><em>works</em><span> is so difficult or expensive. Rolls-Royce built their RB178 demonstrator engine in the early 1960s for $84 million in 2025 dollars, roughly 2% of the RB211’s overall development costs. It started construction on the first RB211 engines just a few months after design began. Similarly, the technology demonstrator for GE’s TF39 engine cost $200 million in 2025 dollars, a small fraction of the full cost of the program.</span></p><p>The difficulty is building an engine that meets its various performance targets — thrust, fuel consumption, maintenance costs, and so on. There’s no point in designing a new engine if it doesn’t significantly improve on the state of the art, and that means engine development projects are constantly pushing technological boundaries: higher compression ratios, hotter temperatures, lighter weight, larger fans, and so on. An engine that isn’t an improvement over what’s already on the market won’t be competitive, and engine performance targets will often be contractual obligations with the aircraft manufacturers buying them.</p><p><span>Making these improvements requires constantly driving engine technology forward. Turbine blades, for instance, have been forced to get ever more advanced to withstand rising exhaust temperatures: modern turbine blades have elaborate internal cooling structures, are made from high-temperature superalloys like Inconel or titanium aluminide,</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-10-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-10-158080744" target="_self" rel="">10</a></span><span> and are often made from a single crystal to eliminate defects at material grain boundaries. And while the carbon fiber fan blades on the RB211 were unsuccessful, manufacturers didn’t give up, and such blades are used on the CFM LEAP engine.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png" width="600" height="382" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/df2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:382,&quot;width&quot;:600,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Turbine entry temperature and turbine blade cooling technology over time, via </span><a href="https://www.conceptsnrec.com/blog/film-cooling-in-turbines" rel="">link</a><span>.</span></figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png" width="500" height="400.4559270516717" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:527,&quot;width&quot;:658,&quot;resizeWidth&quot;:500,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Turbine blade cooling structures over time, via Rolls-Royce.</figcaption></figure></div><p>Pushing boundaries means you’re operating in the unknown, encountering novel phenomena and unforeseen problems that take time and effort to fix: Many of the problems on the RB211 stemmed from Rolls-Royce’s lack of experience with the materials needed to withstand the higher engine temperatures.</p><p>This boundary-pushing is difficult partly because the requirements an engine must meet are very strict. A jet engine must direct and control an enormous amount of heat energy — a modern large jet engine will generate power on the order of 100 megawatts — and it must do so using as little mass as possible. A 1930s Ford V8 car engine weighed around 7 pounds for every horsepower it generated. A WWII aircraft piston engine weighed around 1 to 2 pounds per horsepower. The 50s-era J57 jet engine weighed closer to 0.1 to 0.2 pounds per horsepower it generated.</p><p>A commercial jet engine must operate for thousands of hours a year, year after year, before needing an overhaul, demanding high durability and high fatigue resistance. It must burn fuel at temperatures in the neighborhood of 3000°F or more, nearly double the melting point of the turbine materials used within them. Turbines and compressors must spin at more than 10,000 revolutions per minute, while simultaneously minimizing air leakage between stages to maximize performance and efficiency.</p><p><span>A commercial jet engine must operate across a huge range of atmospheric conditions – high temperatures, low temperatures, both sea level and high-altitude air pressures, different wind conditions, and so on.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-11-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-11-158080744" target="_self" rel="">11</a></span><span> It must withstand rain, ice, hail, and bird strikes. It must be able to successfully contain a fan or turbine blade breaking off.</span></p><p>Ensuring the engine meets all these conditions entails thousands (or tens of thousands) of hours of testing, during which time the engine is subjected to a variety of punishing conditions. Testing for the CFM LEAP involved launching a 1 inch thick slab of ice directly into the front fan, and the engine had to continue operating while ingesting 3500 pounds of simulated hail. An engine must undergo hundreds of hours of in-flight testing, to see how it behaves across the flight envelope. When flight testing the LEAP engine, GE already had one test aircraft, a Boeing 747, but the in-flight testing was so extensive that it bought a second one.</p><p><span>In a domain where failure could kill hundreds of people, boundary-pushing performance and operating near the edge of what’s possible also means manufacturing must be extremely careful and precise. Small defects or failures that could be accommodated in other sorts of technology can be catastrophic if they occur in a jet engine. A mid-flight engine failure on a Rolls-Royce Trent-powered Airbus A380, where a turbine disk fractured and ripped apart the entire engine, was traced to a single oil pipe manufactured with a wall that was </span><a href="https://admiralcloudberg.medium.com/a-matter-of-millimeters-the-story-of-qantas-flight-32-bdaa62dc98e7" rel="">half a millimeter too thin</a><span>. Pratt and Whitney has lost billions of dollars correcting manufacturing defects in its Geared Turbofan that resulted from a “</span><a href="https://www.reuters.com/business/aerospace-defense/rtx-expects-3-bln-hit-q3-pratt-whitney-gtf-engine-issues-2023-09-11/" rel="">microscopic contaminant</a><span>” in the powder used to manufacture turbine disks.</span></p><p><span>All this makes a new jet engine project incredibly risky. To mitigate this risk, manufacturers try wherever possible to leverage the technology they already have, minimizing the new and unknown (and also reducing the cost of things like </span><a href="https://aeroreport.de/en/innovation/how-engine-certification-and-validation-works" rel="">certification testing</a><span>). Commercial engines are often derived from military engines, where the government has already picked up the tab for development delays and cost overruns. GE’s TF39, designed to power the Lockheed C-5 military transport, evolved into the commercial CF6, and CFM’s successful CFM56 engine used the engine core (the compressor, combustion chamber, and turbine) developed for the B-1 bomber. Pratt and Whitney’s military J57 became the commercial JT3.</span></p><p>Engine manufacturers will also often try to improve performance of existing engines rather than developing all new ones from scratch. Rolls-Royce is still building off of the RB211, an engine first designed nearly 60 years ago. And the Rolls-Royce Olympus engines that powered the Concorde in the 1970s were scaled-up versions of an engine originally designed in the 1940s.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png" width="562" height="363.04909560723513" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/6b37237c-98d0-4288-9075-6b439b71735f_774x500.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:500,&quot;width&quot;:774,&quot;resizeWidth&quot;:562,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Technology exchange in early Pratt &amp; Whitney jet engines, via </span><a href="https://www.sae.org/publications/technical-papers/content/700268/" rel="">Sens and Meyer 1970</a><span>. Note that the J42 and the J48 were license-built versions of the Rolls-Royce Nene and Tay, and thus also a product of technology exchange.</span></figcaption></figure></div><p>Like with commercial aircraft, it’s much easier and less risky to stretch and improve an existing engine design rather than start a new one from a clean sheet, and only the potential of huge performance gains can justify the latter.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Brian Krebs: This Administration Is Completely Compromised (154 pts)]]></title>
            <link>https://infosec.exchange/@briankrebs/114083485241630234</link>
            <guid>43211506</guid>
            <pubDate>Fri, 28 Feb 2025 21:33:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://infosec.exchange/@briankrebs/114083485241630234">https://infosec.exchange/@briankrebs/114083485241630234</a>, See on <a href="https://news.ycombinator.com/item?id=43211506">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[How to gain code execution on hundreds of millions of people and popular apps (815 pts)]]></title>
            <link>https://kibty.town/blog/todesktop/</link>
            <guid>43210858</guid>
            <pubDate>Fri, 28 Feb 2025 21:05:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kibty.town/blog/todesktop/">https://kibty.town/blog/todesktop/</a>, See on <a href="https://news.ycombinator.com/item?id=43210858">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><div><p>this started when i was looking into <a href="https://cursor.com/">cursor</a>, an ai text editor. also, i use <a href="https://objective-see.org/products/lulu.html">lulu by objective-see</a> on my laptop, so when i downloaded the cursor installer, i got this pop-up:</p>
<p><img src="https://kibty.town/files/img/posts/todesktop/lulu-alert.png" alt="A LuLu alert, showing that &quot;Install Cursor&quot; was trying to connect to &quot;download.todesktop.com&quot;"></p>
<p>now, what the hell is todesktop? i thought i was downloading cursor? well, looking at their website, they seem to be an electron app bundler service alongside providing a SDK for electron apps. so it appears the installer i downloaded is actually managed by todesktop, not cursor.</p>
<p>this made me curious and i made an account on todesktop to look into it, and when i clicked the github login button, i saw my calling: <strong>firebase</strong></p>
<h2>basic firebase recon</h2>
<p>realising the app used firestore (firebase's no-sql database that is often used in frontend), i quickly opened my devtools and began doing basic recon on the firebase.</p>
<p>i realised that the site has sourcemaps, which made searching for all of the firestore paths used in the app even easier (its still easy without sourcemaps, usually)</p>
<p>then i found an insecure collection, <code>temporaryApplications</code>, which seemed to give me an name list of some applications (edit: todesktop has clarified this collection has no sensitive data and hasnt been updated since 2022), but not much other than that, everything seemed secure on the firebase other then this.</p>
<p>i then noticed that most of the deployment and general logic happens in the terminal, with the npm package <code>@todesktop/cli</code>, so i installed that and started looking into it</p>
<h2>looking into the todesktop cli</h2>
<p>the cli manages deployments, source code uploads, and much more. the website just seems to be a shell to create applications, view deployments, etc etc</p>
<p>i was once again lucky that the cli also had sourcemaps, so i used <a href="https://github.com/denandz/sourcemapper">sourcemapper</a> to extract them into a source tree.</p>
<p>looking in there, i found an arbitrary s3 upload vulnerability via a firebase cloud function called <code>getSignedURL</code>, but i didn't really have an s3 key (file path) to upload to that would do something interesting, so i kept looking.</p>
<h2>hijacking the deployment pipeline via a postinstall script</h2>
<p>i wanted to get on the machine where the application gets built and the easiest way to do this would be a postinstall script in <code>package.json</code>, so i did that with a simple reverse shell payload</p>
<p>this worked. navigating around the container, i figured out where the actual code-building application lives, and found this:</p>
<p><img src="https://kibty.town/files/img/posts/todesktop/config-encrypted.png" alt="A screenshot showing a file called &quot;config.json.encrypted&quot;"></p>
<p>oh fuck, this usually means something bad. i found the code for decrypting this file, and this is what i got after decrypting it myself:</p>
<p><img src="https://kibty.town/files/img/posts/todesktop/config-json.png" alt="A file called &quot;config.json&quot;, with 2 apple id, remote sign and a hsm's credentials"></p>
<p><strong>fuck. this container stores secrets</strong></p>
<p>looking around in the container more, i found a hardcoded firebase admin key (which was full-scoped).</p>
<h2>post-exploitation</h2>
<p>i quickly realized that with the credentials i have, i could deploy an auto update to any app of my liking, having clients receive it immediately when they restart the app.</p>
<p>i then made some code to use my credentials to deploy an update to my app, and it worked. i immediately got a update on my client and got RCE.</p>
<h2>lets talk about impact</h2>
<p>with this, i could push auto updates to all applications using todesktop, such as:</p>
<ul>
<li>clickup (https://clickup.com)</li>
<li>cursor (https://cursor.com)</li>
<li>linear (https://linear.app)</li>
<li>notion calendar (https://calendar.notion.so)</li>
</ul>
<p>(<strong>please do not harass these companies or make it seem like it's their fault, it's not. it's todesktop's fault if anything</strong>)</p>
<p>which, if i were to estimate, is probably in the range of hundreds of millions of people in <strong>tech environments</strong>, other hackers, programmers, executives, etc. making this exploit <strong>deadly</strong> if used.</p>
<h2>the fix</h2>
<p>i immediately used my contacts to get in reach with the owner of todesktop, we were chatting via signal and the fix came almost immediately. they were nice enough to compensate me for my efforts and were very nice in general.</p>
<p>the build container now has a privileged sidecar that does all of the signing, uploading and everything else instead of the main container with user code having that logic.</p>
<p>security incidents happen all the time, its natural. what matters is the company's response, and todesktop's response has been awesome, they were very nice to work with.</p>
<p>check out todesktop's incident report <a href="https://www.todesktop.com/blog/posts/security-incident-at-todesktop">here</a></p>
</div></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[400 reasons to not use Microsoft Azure (552 pts)]]></title>
            <link>https://azsh.it</link>
            <guid>43210536</guid>
            <pubDate>Fri, 28 Feb 2025 20:51:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://azsh.it">https://azsh.it</a>, See on <a href="https://news.ycombinator.com/item?id=43210536">Hacker News</a></p>
Couldn't get https://azsh.it: Error: Request failed with status code 404]]></description>
        </item>
        <item>
            <title><![CDATA[Merlion: A Machine Learning Framework for Time Series Intelligence (140 pts)]]></title>
            <link>https://github.com/salesforce/Merlion</link>
            <guid>43209064</guid>
            <pubDate>Fri, 28 Feb 2025 18:59:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/salesforce/Merlion">https://github.com/salesforce/Merlion</a>, See on <a href="https://news.ycombinator.com/item?id=43209064">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/salesforce/Merlion/raw/main/merlion_logo.svg"><img alt="Logo" src="https://github.com/salesforce/Merlion/raw/main/merlion_logo.svg" width="80%"></a>
</p>
<p><a href="https://github.com/salesforce/Merlion/actions">
  <img alt="Tests" src="https://github.com/salesforce/Merlion/actions/workflows/tests.yml/badge.svg?branch=main">
  </a>
  <a href="https://github.com/salesforce/Merlion/actions">
  <img alt="Coverage" src="https://github.com/salesforce/Merlion/raw/badges/coverage.svg">
  </a>
  <a href="https://pypi.python.org/pypi/salesforce-merlion" rel="nofollow">
  <img alt="PyPI Version" src="https://camo.githubusercontent.com/7f52dec59ec367ab3a6d475535e677f1ed07be91dd6e3ec13e2af7947119312d/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f73616c6573666f7263652d6d65726c696f6e2e737667" data-canonical-src="https://img.shields.io/pypi/v/salesforce-merlion.svg">
  </a>
  <a href="https://opensource.salesforce.com/Merlion/index.html" rel="nofollow">
  <img alt="docs" src="https://github.com/salesforce/Merlion/actions/workflows/docs.yml/badge.svg">
  </a>
</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Merlion: A Machine Learning Library for Time Series</h2><a id="user-content-merlion-a-machine-learning-library-for-time-series" aria-label="Permalink: Merlion: A Machine Learning Library for Time Series" href="#merlion-a-machine-learning-library-for-time-series"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Table of Contents</h2><a id="user-content-table-of-contents" aria-label="Permalink: Table of Contents" href="#table-of-contents"></a></p>
<ol dir="auto">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#comparison-with-related-libraries">Comparison with Related Libraries</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#getting-started">Getting Started</a>
<ol dir="auto">
<li><a href="#anomaly-detection">Anomaly Detection</a></li>
<li><a href="#forecasting">Forecasting</a></li>
</ol>
</li>
<li><a href="#evaluation-and-benchmarking">Evaluation and Benchmarking</a></li>
<li><a href="#technical-report-and-citing-merlion">Technical Report and Citing Merlion</a></li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Introduction</h2><a id="user-content-introduction" aria-label="Permalink: Introduction" href="#introduction"></a></p>
<p dir="auto">Merlion is a Python library for time series intelligence. It provides an end-to-end machine learning framework that
includes loading and transforming data, building and training models, post-processing model outputs, and evaluating
model performance. It supports various time series learning tasks, including forecasting, anomaly detection,
and change point detection for both univariate and multivariate time series. This library aims to provide engineers and
researchers a one-stop solution to rapidly develop models for their specific time series needs, and benchmark them
across multiple time series datasets.</p>
<p dir="auto">Merlion's key features are</p>
<ul dir="auto">
<li>Standardized and easily extensible data loading &amp; benchmarking for a wide range of forecasting and anomaly
detection datasets. This includes transparent support for custom datasets.</li>
<li>A library of diverse models for anomaly detection, forecasting, and change point detection, all
unified under a shared interface. Models include classic statistical methods, tree ensembles, and deep
learning approaches. Advanced users may fully configure each model as desired.</li>
<li>Abstract <code>DefaultDetector</code> and <code>DefaultForecaster</code> models that are efficient, robustly achieve good performance,
and provide a starting point for new users.</li>
<li>AutoML for automated hyperaparameter tuning and model selection.</li>
<li>Unified API for using a wide range of models to forecast with
<a href="https://opensource.salesforce.com/Merlion/tutorials/forecast/3_ForecastExogenous.html" rel="nofollow">exogenous regressors</a>.</li>
<li>Practical, industry-inspired post-processing rules for anomaly detectors that make anomaly scores more interpretable,
while also reducing the number of false positives.</li>
<li>Easy-to-use ensembles that combine the outputs of multiple models to achieve more robust performance.</li>
<li>Flexible evaluation pipelines that simulate the live deployment &amp; re-training of a model in production,
and evaluate performance on both forecasting and anomaly detection.</li>
<li>Native support for visualizing model predictions, including with a clickable visual UI.</li>
<li>Distributed computation <a href="https://opensource.salesforce.com/Merlion/merlion.spark.html" rel="nofollow">backend</a> using PySpark,
which can be used to serve time series applications at industrial scale.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Comparison with Related Libraries</h2><a id="user-content-comparison-with-related-libraries" aria-label="Permalink: Comparison with Related Libraries" href="#comparison-with-related-libraries"></a></p>
<p dir="auto">The table below provides a visual overview of how Merlion's key features compare to other libraries for time series
anomaly detection and/or forecasting.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th></th>
<th>Merlion</th>
<th>Prophet</th>
<th>Alibi Detect</th>
<th>Kats</th>
<th>darts</th>
<th>statsmodels</th>
<th>nixtla</th>
<th>GluonTS</th>
<th>RRCF</th>
<th>STUMPY</th>
<th>Greykite</th>
<th>pmdarima</th>
</tr>
</thead>
<tbody>
<tr>
<td>Univariate Forecasting</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Multivariate Forecasting</td>
<td>✅</td>
<td></td>
<td></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Univariate Anomaly Detection</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Multivariate Anomaly Detection</td>
<td>✅</td>
<td></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Pre Processing</td>
<td>✅</td>
<td></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Post Processing</td>
<td>✅</td>
<td></td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>AutoML</td>
<td>✅</td>
<td></td>
<td></td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
</tr>
<tr>
<td>Ensembles</td>
<td>✅</td>
<td></td>
<td></td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Benchmarking</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
<td></td>
</tr>
<tr>
<td>Visualization</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">The following features are new in Merlion 2.0:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th></th>
<th>Merlion</th>
<th>Prophet</th>
<th>Alibi Detect</th>
<th>Kats</th>
<th>darts</th>
<th>statsmodels</th>
<th>nixtla</th>
<th>GluonTS</th>
<th>RRCF</th>
<th>STUMPY</th>
<th>Greykite</th>
<th>pmdarima</th>
</tr>
</thead>
<tbody>
<tr>
<td>Exogenous Regressors</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Change Point Detection</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
<td></td>
</tr>
<tr>
<td>Clickable Visual UI</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Distributed Backend</td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>✅</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<p dir="auto">Merlion consists of two sub-repos: <code>merlion</code> implements the library's core time series intelligence features,
and <code>ts_datasets</code> provides standardized data loaders for multiple time series datasets. These loaders load
time series as <code>pandas.DataFrame</code>&nbsp;s with accompanying metadata.</p>
<p dir="auto">You can install <code>merlion</code> from PyPI by calling <code>pip install salesforce-merlion</code>. You may install from source by
cloning this repoand calling <code>pip install Merlion/</code>, or <code>pip install -e Merlion/</code> to install in editable mode.
You may install additional dependencies via <code>pip install salesforce-merlion[all]</code>,  or by calling
<code>pip install "Merlion/[all]"</code> if installing from source.
Individually, the optional dependencies include <code>dashboard</code> for a GUI dashboard,
<code>spark</code> for a distributed computation backend with PySpark, and <code>deep-learning</code> for all deep learning models.</p>
<p dir="auto">To install the data loading package <code>ts_datasets</code>, clone this repo and call <code>pip install -e Merlion/ts_datasets/</code>.
This package must be installed in editable mode (i.e. with the <code>-e</code> flag) if you don't want to manually specify the
root directory of every dataset when initializing its data loader.</p>
<p dir="auto">Note the following external dependencies:</p>
<ol dir="auto">
<li>
<p dir="auto">Some of our forecasting models depend on OpenMP. If using <code>conda</code>, please <code>conda install -c conda-forge lightgbm</code>
before installing our package. This will ensure that OpenMP is configured to work with the <code>lightgbm</code> package
(one of our dependencies) in your <code>conda</code> environment. If using Mac, please install <a href="https://brew.sh/" rel="nofollow">Homebrew</a>
and call <code>brew install libomp</code> so that the OpenMP libary is available for the model.</p>
</li>
<li>
<p dir="auto">Some of our anomaly detection models depend on the Java Development Kit (JDK). For Ubuntu, call
<code>sudo apt-get install openjdk-11-jdk</code>. For Mac OS, install <a href="https://brew.sh/" rel="nofollow">Homebrew</a> and call
<code>brew tap adoptopenjdk/openjdk &amp;&amp; brew install --cask adoptopenjdk11</code>. Also ensure that <code>java</code> can be found
on your <code>PATH</code>, and that the <code>JAVA_HOME</code> environment variable is set.</p>
</li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Documentation</h2><a id="user-content-documentation" aria-label="Permalink: Documentation" href="#documentation"></a></p>
<p dir="auto">For example code and an introduction to Merlion, see the Jupyter notebooks in
<a href="https://github.com/salesforce/Merlion/tree/main/examples"><code>examples</code></a>, and the guided walkthrough
<a href="https://opensource.salesforce.com/Merlion/tutorials.html" rel="nofollow">here</a>. You may find detailed API documentation (including the
example code) <a href="https://opensource.salesforce.com/Merlion/index.html" rel="nofollow">here</a>. The
<a href="https://arxiv.org/abs/2109.09265" rel="nofollow">technical report</a> outlines Merlion's overall architecture
and presents experimental results on time series anomaly detection &amp; forecasting for both univariate and multivariate
time series.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Getting Started</h2><a id="user-content-getting-started" aria-label="Permalink: Getting Started" href="#getting-started"></a></p>
<p dir="auto">The easiest way to get started is to use the GUI web-based
<a href="https://opensource.salesforce.com/Merlion/merlion.dashboard.html" rel="nofollow">dashboard</a>.
This dashboard provides a great way to quickly experiment with many models on your own custom datasets.
To use it, install Merlion with the optional <code>dashboard</code> dependency (i.e.
<code>pip install salesforce-merlion[dashboard]</code>), and call <code>python -m merlion.dashboard</code> from the command line.
You can view the dashboard at <a href="http://localhost:8050/" rel="nofollow">http://localhost:8050</a>.
Below, we show some screenshots of the dashboard for both anomaly detection and forecasting.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/salesforce/Merlion/raw/main/figures/dashboard_anomaly.png"><img src="https://github.com/salesforce/Merlion/raw/main/figures/dashboard_anomaly.png" alt="anomaly dashboard"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/salesforce/Merlion/raw/main/figures/dashboard_forecast.png"><img src="https://github.com/salesforce/Merlion/raw/main/figures/dashboard_forecast.png" alt="forecast dashboard"></a></p>
<p dir="auto">To help you get started with using Merlion in your own code, we provide below some minimal examples using Merlion
default models for both anomaly detection and forecasting.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Anomaly Detection</h3><a id="user-content-anomaly-detection" aria-label="Permalink: Anomaly Detection" href="#anomaly-detection"></a></p>
<p dir="auto">Here, we show the code to replicate the results from the anomaly detection dashboard above.
We begin by importing Merlion’s <code>TimeSeries</code> class and the data loader for the Numenta Anomaly Benchmark <code>NAB</code>.
We can then divide a specific time series from this dataset into training and testing splits.</p>
<div dir="auto" data-snippet-clipboard-copy-content="from merlion.utils import TimeSeries
from ts_datasets.anomaly import NAB

# Data loader returns pandas DataFrames, which we convert to Merlion TimeSeries
time_series, metadata = NAB(subset=&quot;realKnownCause&quot;)[3]
train_data = TimeSeries.from_pd(time_series[metadata.trainval])
test_data = TimeSeries.from_pd(time_series[~metadata.trainval])
test_labels = TimeSeries.from_pd(metadata.anomaly[~metadata.trainval])"><pre><span>from</span> <span>merlion</span>.<span>utils</span> <span>import</span> <span>TimeSeries</span>
<span>from</span> <span>ts_datasets</span>.<span>anomaly</span> <span>import</span> <span>NAB</span>

<span># Data loader returns pandas DataFrames, which we convert to Merlion TimeSeries</span>
<span>time_series</span>, <span>metadata</span> <span>=</span> <span>NAB</span>(<span>subset</span><span>=</span><span>"realKnownCause"</span>)[<span>3</span>]
<span>train_data</span> <span>=</span> <span>TimeSeries</span>.<span>from_pd</span>(<span>time_series</span>[<span>metadata</span>.<span>trainval</span>])
<span>test_data</span> <span>=</span> <span>TimeSeries</span>.<span>from_pd</span>(<span>time_series</span>[<span>~</span><span>metadata</span>.<span>trainval</span>])
<span>test_labels</span> <span>=</span> <span>TimeSeries</span>.<span>from_pd</span>(<span>metadata</span>.<span>anomaly</span>[<span>~</span><span>metadata</span>.<span>trainval</span>])</pre></div>
<p dir="auto">We can then initialize and train Merlion’s <code>DefaultDetector</code>, which is an anomaly detection model that
balances performance with efficiency. We also obtain its predictions on the test split.</p>
<div dir="auto" data-snippet-clipboard-copy-content="from merlion.models.defaults import DefaultDetectorConfig, DefaultDetector
model = DefaultDetector(DefaultDetectorConfig())
model.train(train_data=train_data)
test_pred = model.get_anomaly_label(time_series=test_data)"><pre><span>from</span> <span>merlion</span>.<span>models</span>.<span>defaults</span> <span>import</span> <span>DefaultDetectorConfig</span>, <span>DefaultDetector</span>
<span>model</span> <span>=</span> <span>DefaultDetector</span>(<span>DefaultDetectorConfig</span>())
<span>model</span>.<span>train</span>(<span>train_data</span><span>=</span><span>train_data</span>)
<span>test_pred</span> <span>=</span> <span>model</span>.<span>get_anomaly_label</span>(<span>time_series</span><span>=</span><span>test_data</span>)</pre></div>
<p dir="auto">Next, we visualize the model's predictions.</p>
<div dir="auto" data-snippet-clipboard-copy-content="from merlion.plot import plot_anoms
import matplotlib.pyplot as plt
fig, ax = model.plot_anomaly(time_series=test_data)
plot_anoms(ax=ax, anomaly_labels=test_labels)
plt.show()"><pre><span>from</span> <span>merlion</span>.<span>plot</span> <span>import</span> <span>plot_anoms</span>
<span>import</span> <span>matplotlib</span>.<span>pyplot</span> <span>as</span> <span>plt</span>
<span>fig</span>, <span>ax</span> <span>=</span> <span>model</span>.<span>plot_anomaly</span>(<span>time_series</span><span>=</span><span>test_data</span>)
<span>plot_anoms</span>(<span>ax</span><span>=</span><span>ax</span>, <span>anomaly_labels</span><span>=</span><span>test_labels</span>)
<span>plt</span>.<span>show</span>()</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/salesforce/Merlion/raw/main/figures/anom_example.png"><img src="https://github.com/salesforce/Merlion/raw/main/figures/anom_example.png" alt="anomaly figure"></a></p>
<p dir="auto">Finally, we can quantitatively evaluate the model. The precision and recall come from the fact that the model
fired 3 alarms, with 2 true positives, 1 false negative, and 1 false positive. We also evaluate the mean time
the model took to detect each anomaly that it correctly detected.</p>
<div dir="auto" data-snippet-clipboard-copy-content="from merlion.evaluate.anomaly import TSADMetric
p = TSADMetric.Precision.value(ground_truth=test_labels, predict=test_pred)
r = TSADMetric.Recall.value(ground_truth=test_labels, predict=test_pred)
f1 = TSADMetric.F1.value(ground_truth=test_labels, predict=test_pred)
mttd = TSADMetric.MeanTimeToDetect.value(ground_truth=test_labels, predict=test_pred)
print(f&quot;Precision: {p:.4f}, Recall: {r:.4f}, F1: {f1:.4f}\n&quot;
      f&quot;Mean Time To Detect: {mttd}&quot;)"><pre><span>from</span> <span>merlion</span>.<span>evaluate</span>.<span>anomaly</span> <span>import</span> <span>TSADMetric</span>
<span>p</span> <span>=</span> <span>TSADMetric</span>.<span>Precision</span>.<span>value</span>(<span>ground_truth</span><span>=</span><span>test_labels</span>, <span>predict</span><span>=</span><span>test_pred</span>)
<span>r</span> <span>=</span> <span>TSADMetric</span>.<span>Recall</span>.<span>value</span>(<span>ground_truth</span><span>=</span><span>test_labels</span>, <span>predict</span><span>=</span><span>test_pred</span>)
<span>f1</span> <span>=</span> <span>TSADMetric</span>.<span>F1</span>.<span>value</span>(<span>ground_truth</span><span>=</span><span>test_labels</span>, <span>predict</span><span>=</span><span>test_pred</span>)
<span>mttd</span> <span>=</span> <span>TSADMetric</span>.<span>MeanTimeToDetect</span>.<span>value</span>(<span>ground_truth</span><span>=</span><span>test_labels</span>, <span>predict</span><span>=</span><span>test_pred</span>)
<span>print</span>(<span>f"Precision: <span><span>{</span><span>p</span>:.4f<span>}</span></span>, Recall: <span><span>{</span><span>r</span>:.4f<span>}</span></span>, F1: <span><span>{</span><span>f1</span>:.4f<span>}</span></span><span>\n</span>"</span>
      <span>f"Mean Time To Detect: <span><span>{</span><span>mttd</span><span>}</span></span>"</span>)</pre></div>
<div data-snippet-clipboard-copy-content="Precision: 0.6667, Recall: 0.6667, F1: 0.6667
Mean Time To Detect: 1 days 10:22:30"><pre><code>Precision: 0.6667, Recall: 0.6667, F1: 0.6667
Mean Time To Detect: 1 days 10:22:30
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Forecasting</h3><a id="user-content-forecasting" aria-label="Permalink: Forecasting" href="#forecasting"></a></p>
<p dir="auto">Here, we show the code to replicate the results from the forecasting dashboard above.
We begin by importing Merlion’s <code>TimeSeries</code> class and the data loader for the <code>M4</code> dataset. We can then divide a
specific time series from this dataset into training and testing splits.</p>
<div dir="auto" data-snippet-clipboard-copy-content="from merlion.utils import TimeSeries
from ts_datasets.forecast import M4

# Data loader returns pandas DataFrames, which we convert to Merlion TimeSeries
time_series, metadata = M4(subset=&quot;Hourly&quot;)[0]
train_data = TimeSeries.from_pd(time_series[metadata.trainval])
test_data = TimeSeries.from_pd(time_series[~metadata.trainval])"><pre><span>from</span> <span>merlion</span>.<span>utils</span> <span>import</span> <span>TimeSeries</span>
<span>from</span> <span>ts_datasets</span>.<span>forecast</span> <span>import</span> <span>M4</span>

<span># Data loader returns pandas DataFrames, which we convert to Merlion TimeSeries</span>
<span>time_series</span>, <span>metadata</span> <span>=</span> <span>M4</span>(<span>subset</span><span>=</span><span>"Hourly"</span>)[<span>0</span>]
<span>train_data</span> <span>=</span> <span>TimeSeries</span>.<span>from_pd</span>(<span>time_series</span>[<span>metadata</span>.<span>trainval</span>])
<span>test_data</span> <span>=</span> <span>TimeSeries</span>.<span>from_pd</span>(<span>time_series</span>[<span>~</span><span>metadata</span>.<span>trainval</span>])</pre></div>
<p dir="auto">We can then initialize and train Merlion’s <code>DefaultForecaster</code>, which is an forecasting model that balances
performance with efficiency. We also obtain its predictions on the test split.</p>
<div dir="auto" data-snippet-clipboard-copy-content="from merlion.models.defaults import DefaultForecasterConfig, DefaultForecaster
model = DefaultForecaster(DefaultForecasterConfig())
model.train(train_data=train_data)
test_pred, test_err = model.forecast(time_stamps=test_data.time_stamps)"><pre><span>from</span> <span>merlion</span>.<span>models</span>.<span>defaults</span> <span>import</span> <span>DefaultForecasterConfig</span>, <span>DefaultForecaster</span>
<span>model</span> <span>=</span> <span>DefaultForecaster</span>(<span>DefaultForecasterConfig</span>())
<span>model</span>.<span>train</span>(<span>train_data</span><span>=</span><span>train_data</span>)
<span>test_pred</span>, <span>test_err</span> <span>=</span> <span>model</span>.<span>forecast</span>(<span>time_stamps</span><span>=</span><span>test_data</span>.<span>time_stamps</span>)</pre></div>
<p dir="auto">Next, we visualize the model’s predictions.</p>
<div dir="auto" data-snippet-clipboard-copy-content="import matplotlib.pyplot as plt
fig, ax = model.plot_forecast(time_series=test_data, plot_forecast_uncertainty=True)
plt.show()"><pre><span>import</span> <span>matplotlib</span>.<span>pyplot</span> <span>as</span> <span>plt</span>
<span>fig</span>, <span>ax</span> <span>=</span> <span>model</span>.<span>plot_forecast</span>(<span>time_series</span><span>=</span><span>test_data</span>, <span>plot_forecast_uncertainty</span><span>=</span><span>True</span>)
<span>plt</span>.<span>show</span>()</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/salesforce/Merlion/raw/main/figures/forecast_example.png"><img src="https://github.com/salesforce/Merlion/raw/main/figures/forecast_example.png" alt="forecast figure"></a></p>
<p dir="auto">Finally, we quantitatively evaluate the model. sMAPE measures the error of the prediction on a scale of 0 to 100
(lower is better), while MSIS evaluates the quality of the 95% confidence band on a scale of 0 to 100 (lower is better).</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Evaluate the model's predictions quantitatively
from scipy.stats import norm
from merlion.evaluate.forecast import ForecastMetric

# Compute the sMAPE of the predictions (0 to 100, smaller is better)
smape = ForecastMetric.sMAPE.value(ground_truth=test_data, predict=test_pred)

# Compute the MSIS of the model's 95% confidence interval (0 to 100, smaller is better)
lb = TimeSeries.from_pd(test_pred.to_pd() + norm.ppf(0.025) * test_err.to_pd().values)
ub = TimeSeries.from_pd(test_pred.to_pd() + norm.ppf(0.975) * test_err.to_pd().values)
msis = ForecastMetric.MSIS.value(ground_truth=test_data, predict=test_pred,
                                 insample=train_data, lb=lb, ub=ub)
print(f&quot;sMAPE: {smape:.4f}, MSIS: {msis:.4f}&quot;)"><pre><span># Evaluate the model's predictions quantitatively</span>
<span>from</span> <span>scipy</span>.<span>stats</span> <span>import</span> <span>norm</span>
<span>from</span> <span>merlion</span>.<span>evaluate</span>.<span>forecast</span> <span>import</span> <span>ForecastMetric</span>

<span># Compute the sMAPE of the predictions (0 to 100, smaller is better)</span>
<span>smape</span> <span>=</span> <span>ForecastMetric</span>.<span>sMAPE</span>.<span>value</span>(<span>ground_truth</span><span>=</span><span>test_data</span>, <span>predict</span><span>=</span><span>test_pred</span>)

<span># Compute the MSIS of the model's 95% confidence interval (0 to 100, smaller is better)</span>
<span>lb</span> <span>=</span> <span>TimeSeries</span>.<span>from_pd</span>(<span>test_pred</span>.<span>to_pd</span>() <span>+</span> <span>norm</span>.<span>ppf</span>(<span>0.025</span>) <span>*</span> <span>test_err</span>.<span>to_pd</span>().<span>values</span>)
<span>ub</span> <span>=</span> <span>TimeSeries</span>.<span>from_pd</span>(<span>test_pred</span>.<span>to_pd</span>() <span>+</span> <span>norm</span>.<span>ppf</span>(<span>0.975</span>) <span>*</span> <span>test_err</span>.<span>to_pd</span>().<span>values</span>)
<span>msis</span> <span>=</span> <span>ForecastMetric</span>.<span>MSIS</span>.<span>value</span>(<span>ground_truth</span><span>=</span><span>test_data</span>, <span>predict</span><span>=</span><span>test_pred</span>,
                                 <span>insample</span><span>=</span><span>train_data</span>, <span>lb</span><span>=</span><span>lb</span>, <span>ub</span><span>=</span><span>ub</span>)
<span>print</span>(<span>f"sMAPE: <span><span>{</span><span>smape</span>:.4f<span>}</span></span>, MSIS: <span><span>{</span><span>msis</span>:.4f<span>}</span></span>"</span>)</pre></div>
<div data-snippet-clipboard-copy-content="sMAPE: 4.1944, MSIS: 18.9331"><pre><code>sMAPE: 4.1944, MSIS: 18.9331
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Evaluation and Benchmarking</h2><a id="user-content-evaluation-and-benchmarking" aria-label="Permalink: Evaluation and Benchmarking" href="#evaluation-and-benchmarking"></a></p>
<p dir="auto">One of Merlion's key features is an evaluation pipeline that simulates the live deployment
of a model on historical data. This enables you to compare models on the datasets relevant
to them, under the conditions that they may encounter in a production environment. Our
evaluation pipeline proceeds as follows:</p>
<ol dir="auto">
<li>Train an initial model on recent historical training data (designated as the training split of the time series)</li>
<li>At a regular interval (e.g. once per day), retrain the entire model on the most recent data. This can be either the
entire history of the time series, or a more limited window (e.g. 4 weeks).</li>
<li>Obtain the model's predictions (anomaly scores or forecasts) for the time series values that occur between
re-trainings. You may customize whether this should be done in batch (predicting all values at once),
streaming (updating the model's internal state after each data point without fully re-training it),
or some intermediate cadence.</li>
<li>Compare the model's predictions against the ground truth (labeled anomalies for anomaly detection, or the actual
time series values for forecasting), and report quantitative evaluation metrics.</li>
</ol>
<p dir="auto">We provide scripts that allow you to use this pipeline to evaluate arbitrary models on arbitrary datasets.
For example, invoking</p>
<div dir="auto" data-snippet-clipboard-copy-content="python benchmark_anomaly.py --dataset NAB_realAWSCloudwatch --model IsolationForest --retrain_freq 1d"><pre>python benchmark_anomaly.py --dataset NAB_realAWSCloudwatch --model IsolationForest --retrain_freq 1d</pre></div>
<p dir="auto">will evaluate the anomaly detection performance of the <code>IsolationForest</code> (retrained once a day) on the
"realAWSCloudwatch" subset of the NAB dataset.  Similarly, invoking</p>
<div dir="auto" data-snippet-clipboard-copy-content="python benchmark_forecast.py --dataset M4_Hourly --model ETS"><pre>python benchmark_forecast.py --dataset M4_Hourly --model ETS</pre></div>
<p dir="auto">will evaluate the batch forecasting performance (i.e. no retraining) of <code>ETS</code> on the "Hourly" subset of the M4 dataset.
You can find the results produced by running these scripts in the Experiments section of the
<a href="https://arxiv.org/abs/2109.09265" rel="nofollow">technical report</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Technical Report and Citing Merlion</h2><a id="user-content-technical-report-and-citing-merlion" aria-label="Permalink: Technical Report and Citing Merlion" href="#technical-report-and-citing-merlion"></a></p>
<p dir="auto">You can find more details in our technical report: <a href="https://arxiv.org/abs/2109.09265" rel="nofollow">https://arxiv.org/abs/2109.09265</a></p>
<p dir="auto">If you're using Merlion in your research or applications, please cite using this BibTeX:</p>
<div data-snippet-clipboard-copy-content="@article{bhatnagar2021merlion,
      title={Merlion: A Machine Learning Library for Time Series},
      author={Aadyot Bhatnagar and Paul Kassianik and Chenghao Liu and Tian Lan and Wenzhuo Yang
              and Rowan Cassius and Doyen Sahoo and Devansh Arpit and Sri Subramanian and Gerald Woo
              and Amrita Saha and Arun Kumar Jagota and Gokulakrishnan Gopalakrishnan and Manpreet Singh
              and K C Krithika and Sukumar Maddineni and Daeki Cho and Bo Zong and Yingbo Zhou
              and Caiming Xiong and Silvio Savarese and Steven Hoi and Huan Wang},
      year={2021},
      eprint={2109.09265},
      archivePrefix={arXiv},
      primaryClass={cs.LG}
}"><pre><code>@article{bhatnagar2021merlion,
      title={Merlion: A Machine Learning Library for Time Series},
      author={Aadyot Bhatnagar and Paul Kassianik and Chenghao Liu and Tian Lan and Wenzhuo Yang
              and Rowan Cassius and Doyen Sahoo and Devansh Arpit and Sri Subramanian and Gerald Woo
              and Amrita Saha and Arun Kumar Jagota and Gokulakrishnan Gopalakrishnan and Manpreet Singh
              and K C Krithika and Sukumar Maddineni and Daeki Cho and Bo Zong and Yingbo Zhou
              and Caiming Xiong and Silvio Savarese and Steven Hoi and Huan Wang},
      year={2021},
      eprint={2109.09265},
      archivePrefix={arXiv},
      primaryClass={cs.LG}
}
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">To Dos</h2><a id="user-content-to-dos" aria-label="Permalink: To Dos" href="#to-dos"></a></p>
<p dir="auto">We are striving to leverage the time-series modeling with GPUs to further improve the speed and throughput of Merlion.
Stay tuned ...</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Zelensky leaves White House after angry meeting (2619 pts)]]></title>
            <link>https://www.bbc.com/news/live/c625ex282zzt</link>
            <guid>43208973</guid>
            <pubDate>Fri, 28 Feb 2025 18:49:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bbc.com/news/live/c625ex282zzt">https://www.bbc.com/news/live/c625ex282zzt</a>, See on <a href="https://news.ycombinator.com/item?id=43208973">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="list" spacing="6" tabindex="0" data-testid="postList"><li><div><article data-testid="content-post" id="asset:3dc0ebd0-70bd-4486-843d-874d0fa139ab"><header><span><img src="https://static.files.bbci.co.uk/core/website/assets/static/news/incident-types/analysis.77b314ef10.svg" alt="Analysis" draggable="false"><h3 type="normal"><span role="text"><span>Exchange a reminder of what is at stake for Ukraine</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 20:26 Greenwich Mean Time</span></span></span></span></h3></span></header><p><span><span><img alt="" loading="lazy" src="https://ichef.bbci.co.uk/ace/standard/128/cpsprodpb//vivo/live/images/2024/2/16/84ee9eb1-6e6d-4447-9c1f-4b2b6e88e96e.jpg.webp" width="64" height="64"></span></span><span><strong>James Waterhouse</strong><br>Ukraine correspondent in Kyiv</span></p><figure><p><span><img alt="Ukrainian President Volodymyr Zelenskiy departs after a press conference with U.S. President Donald Trump was cancelled" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/a4517926-6ce2-4a51-a1de-13b3af71b58f.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/a4517926-6ce2-4a51-a1de-13b3af71b58f.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/a4517926-6ce2-4a51-a1de-13b3af71b58f.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/a4517926-6ce2-4a51-a1de-13b3af71b58f.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/a4517926-6ce2-4a51-a1de-13b3af71b58f.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/a4517926-6ce2-4a51-a1de-13b3af71b58f.jpg.webp 800w" width="1000" height="562"></span><span role="text"><span>Image source, </span>Reuters</span></p></figure><p>The spilling over we saw in the
Oval Office today reflected what's at stake for Zelensky and his
country.</p><p>This is not
just about minerals or money; it's about making sure three years of bloody
fighting hasn't been for nothing. It’s about the future existence of Ukraine in
the face of an existential war.</p><p>Should
he have stayed calmer? Perhaps, but Ukraine’s leader wears this war, it is part
of his political being. Clearly this mineral proposal was not as enticing for
Kyiv as Washington made out.</p><p>Ukrainians
feel any ceasefire - without a guarantee from the US that it would step in if
war reignited - would not be worth the paper it was written on.</p><p>The
worrying signs were there when Zelensky folded his arms in a defensive way as
he came under an almost coordinated shouting assault from US president and
vice-president.</p><p>That is a
worrying symptom of a White House not really fixating on the realities of the
war and the cost Ukraine has paid, especially when Zelensky had to remind Trump
of the year it started.</p><p>Such a visible deterioration
between two allies has been a difficult and shocking sight here. Donald Trump
could yet come to Ukraine’s aid, or today could have been the moment he cut
ties with it, to Russia’s delight.</p></article></div></li><li><div><article data-testid="content-post" id="asset:234c9292-ac67-43d3-8f1e-d47a978ea10b"><header><span><h3 type="normal"><span role="text"><span>Zelensky told to leave White House after heated exchange</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 20:14 Greenwich Mean Time</span></span></span></span></h3></span></header><p>We can now bring you more detail about the moments just after Zelensky and Trump's tense meeting in the Oval Office.</p><p>According to our US partner CBS, the Ukrainian delegation left the Oval Office to a "separated room". </p><p>There, National Security Adviser Mike Waltz and Secretary of State Marco Rubio told them to leave the White House.</p><p>As we reported earlier, a scheduled press conference with Zelensky and Trump was <a href="https://www.bbc.co.uk/news/live/c625ex282zzt?post=asset%3Aba1b7edc-d79b-4ce0-8f9f-c8722ebd8ddb#post">cancelled shortly</a> after the Oval Office meeting. We also watched live as the Ukrainian president exited the White House into a waiting vehicle.</p><figure><p><span><img alt="Zelensky and trump are flanked by news cameras during oval office exchange.." src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/d8636872-a887-4947-91e3-8417bfcf5186.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/d8636872-a887-4947-91e3-8417bfcf5186.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/d8636872-a887-4947-91e3-8417bfcf5186.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/d8636872-a887-4947-91e3-8417bfcf5186.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/d8636872-a887-4947-91e3-8417bfcf5186.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/d8636872-a887-4947-91e3-8417bfcf5186.jpg.webp 800w" width="1000" height="563"></span></p></figure></article></div></li><li><div><article data-testid="content-post" id="asset:d1452c2d-0e17-4b70-8eac-1d9279772305"><header><span><h3 type="normal"><span role="text"><span>Trump and Vance won't allow US 'to be taken advantage of' - White House</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:58 Greenwich Mean Time</span></span></span></span></h3></span></header><p>The White House says Trump and Vice-President JD Vance "will never allow the American people to be taken advantage of".</p><p>In a statement released shortly after their meeting with Zelensky, the White House says the pair "will always stand up for the interests of the American people and those who respect the United States’ position in the world".</p></article></div></li><li><div><article data-testid="content-post" id="asset:2c6adebb-6c42-49db-9a66-68bc781537b9"><header><span><h3 type="normal"><span role="text"><span>Ukraine's foreign minister praises Zelensky's 'bravery and strength'</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:54 Greenwich Mean Time</span></span></span></span></h3></span></header><p>Ukrainian Foreign Minister Andrii Sybiha says Volodymyr Zelensky "has the bravery and strength to stand up for what is right," in a post on X, following the president's early departure from the White House. </p><p>"He stands up for Ukraine and the goal of a just and lasting peace," Sybiha continues, adding that Ukraine has "always been and will continue to be grateful to America for its support".</p></article></div></li><li><div><article data-testid="content-post" id="asset:b53ddf43-a82b-4995-9a9f-28795eea5c0d"><header><span><h3 type="normal"><span role="text"><span>Empty chairs, vacant podiums</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:45 Greenwich Mean Time</span></span></span></span></h3></span></header><p>We're now seeing photos of the podiums and tables that were set up for the anticipated news conference and deal-signing ceremony between US President Donald Trump and Ukrainian President Volodymyr Zelensky. </p><p>The event in the East Room of the White House was abruptly cancelled after the explosive exchange between the two leaders. </p><figure><p><span><img alt="Two podiums and a table at the East Room of the White House, with several US and Ukraine flags in the background." src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/91463ad6-08c5-4b71-9eac-63515143a1c1.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/91463ad6-08c5-4b71-9eac-63515143a1c1.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/91463ad6-08c5-4b71-9eac-63515143a1c1.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/91463ad6-08c5-4b71-9eac-63515143a1c1.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/91463ad6-08c5-4b71-9eac-63515143a1c1.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/91463ad6-08c5-4b71-9eac-63515143a1c1.jpg.webp 800w" width="1000" height="562"></span><span role="text"><span>Image source, </span>EPA</span></p></figure><figure><p><span><img alt="Two podiums and a table at the East Room of the White House, with several US and Ukraine flags in the background." src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/e9ed187e-768e-4c02-b5a5-2345cefc2d77.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/e9ed187e-768e-4c02-b5a5-2345cefc2d77.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/e9ed187e-768e-4c02-b5a5-2345cefc2d77.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/e9ed187e-768e-4c02-b5a5-2345cefc2d77.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/e9ed187e-768e-4c02-b5a5-2345cefc2d77.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/e9ed187e-768e-4c02-b5a5-2345cefc2d77.jpg.webp 800w" width="1000" height="562"></span><span role="text"><span>Image source, </span>EPA</span></p></figure></article></div></li><li><div><article data-testid="content-post" id="asset:6d44b627-f8bd-44da-bf01-a9acc08f5c4b"><header><span><h3 type="normal"><span role="text"><span>Zelensky thanks Trump and US four times</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:33 Greenwich Mean Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><figure><p><span><img alt="Volodymyr Zelensky sitting in Oval Office chair" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/26852784-afa7-407a-a01d-67371b5aa522.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/26852784-afa7-407a-a01d-67371b5aa522.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/26852784-afa7-407a-a01d-67371b5aa522.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/26852784-afa7-407a-a01d-67371b5aa522.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/26852784-afa7-407a-a01d-67371b5aa522.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/26852784-afa7-407a-a01d-67371b5aa522.jpg.webp 800w" width="1903" height="1070"></span><span role="text"><span>Image source, </span>EPA</span></p></figure><p>In his first comments after meeting with Donald Trump, Ukrainian President Volodymyr Zelensky thanks his US counterpart - and Americans - several times over.</p><p><i>(</i><b><i>For context:</i></b><i> Trump earlier told Zelensky he should be "thankful" for US support, while Vice-President JD Vance accused him of not saying thank you during the meeting.)</i></p><p>Here's Zelensky's post on X in full:</p><p><i>"Thank you America, thank you for your support, thank you for this visit."</i></p><p><i>"Thank you @POTUS, Congress, and the American people. 
Ukraine needs just and lasting peace, and we are working exactly for that."</i></p></article></div></li><li><div><article data-testid="content-post" id="asset:34f07e1b-589f-409f-9d78-b690cbb07000"><header><span><h3 type="normal"><span role="text"><span>Trump allies defend president over confrontation</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:29 Greenwich Mean Time</span></span></span></span></h3></span></header><p>Though some Republican lawmakers have criticised Trump and Vance for their confrontation with Zelensky, other allies are rushing to their defence. </p><p>Representative <b>Rick Scott</b> of Florida writes on X: "Thank you President Trump for standing up for America".</p><p>Senate foreign relations member<b> Mike Lee </b>repeats Scott's remarks and also thanks the two for "putting America first". </p><p>Far-right representative <b>Marjorie Taylor-Greene </b>says: "Putting Zelensky in his place while he disrespects the U.S. in the Oval Office is exactly what American leadership should look like."</p></article></div></li><li><div><article data-testid="content-post" id="asset:f592d4a9-039d-44bc-a163-56435a4e7be0"><header><span><img src="https://static.files.bbci.co.uk/core/website/assets/static/news/incident-types/analysis.77b314ef10.svg" alt="Analysis" draggable="false"><h3 type="normal"><span role="text"><span>The atmosphere couldn't have been more different</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:21 Greenwich Mean Time</span></span></span></span></h3></span></header><p><span><span><img alt="" loading="lazy" src="https://ichef.bbci.co.uk/ace/standard/128/cpsprodpb//vivo/live/images/2023/11/15/b9eb2a7b-b156-46ad-b4fa-fb47dc1b0972.jpg.webp" width="64" height="64"></span></span><span><strong>Chris Mason</strong><br>Political editor</span></p><figure><p><span><img alt="Zelensky puts his hand to his chest as he speaks, Donald Trump points at him, in the Oval Office" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/b88ce084-4694-48b7-b761-52aa6289a86b.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/b88ce084-4694-48b7-b761-52aa6289a86b.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/b88ce084-4694-48b7-b761-52aa6289a86b.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/b88ce084-4694-48b7-b761-52aa6289a86b.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/b88ce084-4694-48b7-b761-52aa6289a86b.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/b88ce084-4694-48b7-b761-52aa6289a86b.jpg.webp 800w" width="1022" height="575"></span><span role="text"><span>Image source, </span>Getty Images</span></p></figure><p>Just as the rest of us digest the astonishing exchanges
in the White House, so do people in government. </p><p>Jaws are dropping there just as they are elsewhere. </p><p>Just 24 hours ago, I stood in the Oval Office as the prime
minister exchanged warm words with President Trump.</p><p>The atmosphere tonight couldn’t have been more different.
</p><p>So what happens next?</p><p>The summit on Sunday, hosted by the prime minister, takes
on an even greater significance, as Europe collectively tries to work out how
it responds to the very public breakdown in the relationship between Washington
and Kyiv.</p><figure><p><span><img alt="Starmer and Trump smile and laugh in the Oval Office" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/cce65b86-dd38-49e1-806f-7ae43706e738.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/cce65b86-dd38-49e1-806f-7ae43706e738.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/cce65b86-dd38-49e1-806f-7ae43706e738.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/cce65b86-dd38-49e1-806f-7ae43706e738.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/cce65b86-dd38-49e1-806f-7ae43706e738.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/cce65b86-dd38-49e1-806f-7ae43706e738.jpg.webp 800w" width="1022" height="575"></span><span role="text"><span>Image source, </span>Getty Images</span></p></figure></article></div></li><li><div><article data-testid="content-post" id="asset:3c9b87a6-f722-4325-8da9-005b042f55da"><header><span><h3 type="normal"><span role="text"><span>European leaders react to Trump-Zelensky confrontation</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:16 Greenwich Mean Time</span></span></span></span></h3></span></header><p>European leaders are just now beginning to respond to the tense exchange between Trump, Vance and Zelensky. </p><p>In a post on X, Polish Prime Minister and former president of the European Council <b>Donald Tusk</b> addressed Zelensky and said "dear Ukrainian friends, you are not alone".</p><p>Asked about the confrontation while in Portugal, French President <b>Emmanuel Macron</b> tells French media that Russia is the aggressor and the Ukrainian people are those one being attacked.</p><p>He adds that European countries and other allies were right to help Ukraine three years ago and to sanction Russia and to continue to do so.  </p><p>He adds that it's important to "respect" those who have been fighting since the start for their dignity, rights and the security of Europe. </p></article></div></li><li><div><article data-testid="content-post" id="asset:0db9e6c5-ffd1-4dbb-991e-5c2d86a599a1"><header><span><h3 type="normal"><span role="text"><span>Video shows Zelensky leaving White House</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:12 Greenwich Mean Time</span></span></span></span></h3></span></header><p>We can now bring you footage of the moment that Ukrainian President Volodymyr Zelensky left the White House.</p><p>It followed an angry exchange with Donald trump and JD Vance in the Oval Office, the cancellation of the leaders' joint news conference and Trump saying "come back when you're ready for peace".</p><figure><figcaption><span>Media caption, </span><p>Moment Zelensky walks out of White House as press conference is cancelled</p></figcaption></figure></article></div></li><li><div><article data-testid="content-post" id="asset:81b85562-4498-4e4c-bd11-cd697538cdc6"><header><span><h3 type="normal"><span role="text"><span>Minerals deal not signed, White House says</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:05 Greenwich Mean Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><p>The US-proposed rare minerals agreement between the US and Ukraine has not been signed, according to a White House spokesperson.</p><p>Earlier today, Trump said the pair would sign it during their joint news conference, <a href="https://www.bbc.co.uk/news/live/c625ex282zzt?post=asset%3Aba1b7edc-d79b-4ce0-8f9f-c8722ebd8ddb#post">which has since been cancelled</a>.</p></article></div></li><li><div><article data-testid="content-post" id="asset:9bfef307-27f5-4d88-8f5b-a57c2b86a552"><header><span><h3 type="normal"><span role="text"><span>Fox News interview with Zelensky going ahead</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 19:01 Greenwich Mean Time</span></span></span></span></h3></span></header><p>Fox News' chief political anchor Bert Baier has <a href="https://x.com/BretBaier/status/1895543595870142615">posted on X saying<span>, <!-- -->external</span></a> he's been told that his interview with Volodomyr Zelensky is still going ahead at 18:00 EST (23:00 GMT).</p><p>This is despite the Ukrainian president leaving the White House early.</p></article></div></li><li><div><article data-testid="content-post" id="asset:38ea7088-c689-4183-b438-37eb8b260b2e"><header><span><img src="https://static.files.bbci.co.uk/core/website/assets/static/news/incident-types/analysis.77b314ef10.svg" alt="Analysis" draggable="false"><h3 type="normal"><span role="text"><span>The worst case scenario for Ukraine</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 18:54 Greenwich Mean Time</span></span></span></span></h3></span></header><p><span><span><img alt="" loading="lazy" src="https://ichef.bbci.co.uk/ace/standard/128/cpsprodpb//vivo/live/images/2023/1/6/a1462f87-b5c0-43b2-8a08-2f7c7a8f1bff.jpg.webp" width="64" height="64"></span></span><span><strong>Bernd Debusmann Jr</strong><br>Reporting from the White House</span></p><figure><p><span><img alt="People sit on couches in Oval Office" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/dfaa477f-7c87-4d1f-9ffb-efb6e6fc35e0.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/dfaa477f-7c87-4d1f-9ffb-efb6e6fc35e0.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/dfaa477f-7c87-4d1f-9ffb-efb6e6fc35e0.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/dfaa477f-7c87-4d1f-9ffb-efb6e6fc35e0.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/dfaa477f-7c87-4d1f-9ffb-efb6e6fc35e0.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/dfaa477f-7c87-4d1f-9ffb-efb6e6fc35e0.jpg.webp 800w" width="1022" height="575"></span><span role="text"><span>Image source, </span>Getty Images</span></p></figure><p>The Oval Office meeting, from a Ukrainian perspective, was a worst case scenario.</p><p>Rarely, if ever, are such tensions so starkly evident in front of the world's cameras.</p><p>At one point, Ukraine's ambassador to the US appeared to have her head in her hands, clearly displeased with the way the meeting was going.</p><p>These tensions have been brewing for some time.</p><p>Just last week, for example, Trump repeatedly called Zelensky a "dictator", while refusing to use the same term for Putin.</p><p>Zelensky, for his part, said that Trump was living in a "disinformation space" created by Russia - a jab that elicited a strongly-worded and angry response from the US president.</p></article></div></li><li><div><article data-testid="content-post" id="asset:aa14f0c3-841e-457e-8f1b-1a9992b16de4"><header><span><h3 type="normal"><span role="text"><span>Ukrainian ambassador trails behind Zelensky, shaking her head</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 18:47 Greenwich Mean Time</span></span></span></span></h3></span></header><p><span><span><img alt="" loading="lazy" src="https://ichef.bbci.co.uk/ace/standard/128/cpsprodpb//vivo/live/images/2023/1/6/a1462f87-b5c0-43b2-8a08-2f7c7a8f1bff.jpg.webp" width="64" height="64"></span></span><span><strong>Bernd Debusmann Jr</strong><br>Reporting from the White House</span></p><p>As we just reported, President Zelensky has left the White House - appearing to ignore shouted questions in English, Russian and Ukrainian as he did so.</p><p>Ukraine's ambassador to the US trailed behind him, at one point appearing to shake her head as she quietly shuffled past.</p></article></div></li><li><div><article data-testid="content-post" id="asset:e60c433d-daaf-4b05-81dd-634af8bba7aa"><header><span><h3 type="normal"><span role="text"><span>President Zelensky leaves White House</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 18:41 Greenwich Mean Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><figure><p><span><img alt="Man shakes woman's hand and walks into car" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/271795db-ac47-4547-9f7d-67cf3946f53e.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/271795db-ac47-4547-9f7d-67cf3946f53e.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/271795db-ac47-4547-9f7d-67cf3946f53e.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/271795db-ac47-4547-9f7d-67cf3946f53e.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/271795db-ac47-4547-9f7d-67cf3946f53e.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/271795db-ac47-4547-9f7d-67cf3946f53e.jpg.webp 800w" width="1000" height="665"></span><span role="text"><span>Image source, </span>Reuters</span></p></figure><p>Volodymyr Zelensky has just left the White House following his angry exchange with US President Donald Trump and Vice-President JD Vance.</p><p>A live feed of the entrance of the West Wing of the White House shows the Ukrainian president rush out through the door and into a black SUV, which drives him away.</p><p><a href="https://www.bbc.co.uk/news/live/c625ex282zzt?post=asset%3A472ae35d-0f16-47b1-872d-1b2ac6806cbc#post">A few moments ago</a>, Trump posted on his Truth Social platform that Zelensky "disrespected the United States of America in its cherished Oval Office. He can come back when he is ready for peace."</p></article></div></li><li><div><article data-testid="content-post" id="asset:ba1b7edc-d79b-4ce0-8f9f-c8722ebd8ddb"><header><span><h3 type="normal"><span role="text"><span>Trump-Zelensky news conference cancelled</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 18:34 Greenwich Mean Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><p>The scheduled news conference between Volodymyr Zelensky and Donald Trump has been cancelled, according to the White House, after the two presidents' tense Oval Office meeting. </p></article></div></li><li><div><article data-testid="content-post" id="asset:0baa1917-269c-4fbd-94f0-14a82b923109"><header><span><img src="https://static.files.bbci.co.uk/core/website/assets/static/news/incident-types/analysis.77b314ef10.svg" alt="Analysis" draggable="false"><h3 type="normal"><span role="text"><span>An extraordinary and unprecedented moment of tension</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 18:27 Greenwich Mean Time</span></span></span></span></h3></span></header><p><span><span><img alt="" loading="lazy" src="https://ichef.bbci.co.uk/ace/standard/128/cpsprodpb//vivo/live/images/2022/4/4/bec38220-8223-42a8-8d91-a1f0062d50c8.jpg.webp" width="64" height="64"></span></span><span><strong>Tom Bateman</strong><br>State department correspondent, at the White House</span></p><p>It is no understatement to say that this was, for Zelensky coming here today, the most critical diplomatic and political moment for him and his country since Russia's full-scale invasion of Ukraine three years ago.</p><p>This has descended into an extraordinary and unprecedented moment of tension, exploding in the Oval Office.</p><p>Basically, a public dressing down of the Ukrainian leader by Donald Trump and Vice-President JD Vance </p><p>It began by Vance saying to Zelensky that the war had to be ended through diplomacy.</p><p>What kind of diplomacy, Zelensky replied.</p><p>He was then accused by the vice-president of being disrespectful.</p><p>This then escalated very quickly in those remarkable pictures you have just seen and heard.</p><p>Trump and Vance accused Zelensky of being ungrateful for three years of American support, telling him he was in no position to tell the US how it should feel about it.</p></article></div></li><li><div><article data-testid="content-post" id="asset:4fc21675-f551-4ab4-8e44-515213fd4422"><header><span><h3 type="normal"><span role="text"><span>Reporters mass outside West Wing</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 18:26 Greenwich Mean Time</span></span></span></span></h3></span></header><p><span><span><img alt="" loading="lazy" src="https://ichef.bbci.co.uk/ace/standard/128/cpsprodpb//vivo/live/images/2023/1/6/a1462f87-b5c0-43b2-8a08-2f7c7a8f1bff.jpg.webp" width="64" height="64"></span></span><span><strong>Bernd Debusmann Jr</strong><br>Reporting from the White House</span></p><p>There is a huge pile of journalists outside the West Wing of the White House - most sprinted out of the White House immediately after seeing <a href="https://www.bbc.co.uk/news/live/c625ex282zzt?post=asset%3A472ae35d-0f16-47b1-872d-1b2ac6806cbc#post">Trump's post on Truth Social</a>.</p><figure><p><span><img alt="Reporters gather" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/2/28/62a5be6e-bc47-42ad-a331-88264fc812aa.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/2/28/62a5be6e-bc47-42ad-a331-88264fc812aa.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/2/28/62a5be6e-bc47-42ad-a331-88264fc812aa.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/2/28/62a5be6e-bc47-42ad-a331-88264fc812aa.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/2/28/62a5be6e-bc47-42ad-a331-88264fc812aa.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/2/28/62a5be6e-bc47-42ad-a331-88264fc812aa.jpg.webp 800w" width="800" height="450"></span></p></figure></article></div></li><li><div><article data-testid="content-post" id="asset:472ae35d-0f16-47b1-872d-1b2ac6806cbc"><header><span><h3 type="normal"><span role="text"><span>Trump: 'Zelensky disrespected the US in its cherished Oval Office'</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 18:23 Greenwich Mean Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><p>US President Donald Trump has shared a statement after his meeting with Ukrainian President Voldymyr Zelensky in the White House.</p><p>Here's his Truth Social post in full:<i>“We had a very meaningful meeting in the White House today. </i></p><p><i>"Much was learned that could never be understood without conversation under such fire and pressure. </i></p><p><i>"It’s amazing what comes out through emotion, and I have determined that President Zelensky is not ready for Peace if America is involved, because he feels our involvement gives him a big advantage in negotiations. </i></p><p><i>"I don’t want advantage, I want PEACE. </i></p><p><i>"He disrespected the United States of America in its cherished Oval Office. </i></p><p><i>"He can come back when he is ready for Peace.”</i></p></article></div></li><li><div><article data-testid="content-post" id="asset:14c1fa2d-9cb3-4c04-bbf0-d024cc8780fa"><header><span><h3 type="normal"><span role="text"><span>Of course I want a ceasefire, but with guarantees - Zelensky</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 18:16 Greenwich Mean Time</span></span></span></span></h3></span></header><p><i>We're continuing to bring you fuller coverage of the angry exchange in the Oval Office between Trump and Zelensky. Scroll back through our last few posts for more.</i></p><p>"If you could get a ceasefire right now, I'd tell you to take it so the bullets stop flying," <b>Trump </b>says.</p><p><b>Zelensky </b>says: "Of course I want to stop the war - "</p><p><b>Trump </b>interrupts: "You say you don't want a ceasefire". </p><p><b>Zelensky</b> says he wants a ceasefire deal with "guarantees". </p><p>He tells Trump to ask the Ukrainian people what they feel about a ceasefire deal.</p></article></div></li></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[3,200% CPU Utilization (404 pts)]]></title>
            <link>https://josephmate.github.io/2025-02-26-3200p-cpu-util/</link>
            <guid>43207831</guid>
            <pubDate>Fri, 28 Feb 2025 17:01:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://josephmate.github.io/2025-02-26-3200p-cpu-util/">https://josephmate.github.io/2025-02-26-3200p-cpu-util/</a>, See on <a href="https://news.ycombinator.com/item?id=43207831">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

      

      

      <article role="main">
        <p>A while back my machine was so messed up that I could barely ssh onto it.
3,200% CPU utilization - all 32 cores on the host were fully utilized!
<a href="https://josephmate.github.io/2021-10-03-my-bug-used-up-100cpu-or-did-it/">Compare that to my last bug where it only used 1 core, 100%</a></p>

<p>Fortunately, it was using Java 17 runtime which had thread dumps with CPU time!
Sorting by CPU time brought a bunch of threads that looked similar to this:</p>

<div><pre><code>"Thread-0" #22 [14700] prio=5 os_prio=0 cpu=10359.38ms elapsed=11.49s tid=0x000001cdc35aaf60 nid=14700 runnable  [0x00000047cfffe000]
   java.lang.Thread.State: RUNNABLE
	at java.util.TreeMap.put(java.base@17.0.1/TreeMap.java:826)
	at java.util.TreeMap.put(java.base@17.0.1/TreeMap.java:534)
	at BusinessLogic.someFunction(BusinessLogic.java:29)
    ...
</code></pre></div>

<p>I make a quick conclusion about this and thought to look at BusinessLogic:29 based
on the stack trace and it looked like this:</p>

<div><pre><code><span>public</span> <span>void</span> <span>someFunction</span><span>(</span><span>SomeType</span> <span>relatedObject</span><span>,</span> <span>List</span><span>&lt;</span><span>SomeOtherType</span><span>&gt;</span> <span>unrelatedObjects</span><span>)</span> <span>{</span>
  <span>...</span>
  <span>for</span> <span>(</span><span>SomeOtherType</span> <span>unrelatedObject</span> <span>:</span> <span>unrelatedObjects</span><span>)</span> <span>{</span>
    <span>treeMap</span><span>.</span><span>put</span><span>(</span><span>relatedObject</span><span>.</span><span>a</span><span>(),</span> <span>relatedObject</span><span>.</span><span>b</span><span>());</span> <span>// line 29</span>
  <span>}</span>
  <span>...</span>
<span>}</span>
</code></pre></div>

<p>That code is odd.
Notice we’re iterating over <code>unrelatedObject</code>, but the body of the loop only used <code>relatedObject</code>.
The code can be reduced to simply:</p>
<div><pre><code><span>public</span> <span>void</span> <span>someFunction</span><span>(</span><span>SomeType</span> <span>relatedObject</span><span>,</span> <span>List</span><span>&lt;</span><span>SomeOtherType</span><span>&gt;</span> <span>unrelatedObjects</span><span>)</span> <span>{</span>
  <span>...</span>
  <span>treeMap</span><span>.</span><span>put</span><span>(</span><span>relatedObject</span><span>.</span><span>a</span><span>(),</span> <span>relatedObject</span><span>.</span><span>b</span><span>());</span>
  <span>...</span>
  <span>// unrelatedObjects is used later on in the function so the parameter cannot be removed</span>
<span>}</span>
</code></pre></div>

<p>There must have been some refactoring in the area and unrelatedObject wasn’t used anymore. 
I prepared my unit test and ran the test before and after the fix.
I tried <code>treeMap</code> and <code>unrelatedObjects</code> with 1,000,000 entries, well exceeding what the application ever saw and was not able to reproduce the problem.
Assuming unrelatedObjects is size N and treeMap is size M, the complexity is O(N lg(M)).
So it makes sense that I was unable to reproduce the problem.
<a href="https://josephmate.github.io/PowersOf2/">You wouldn’t really see one minute of execution time until 100 million to 1 billion entries.</a>.</p>

<p>It must be something else.
I was certain treeMap and unrelatedObjects never exceed 1,000 entries.
It’s not even close enough to cause an issue with an O(N lg(M)) algorithm.</p>

<p>I wasn’t very familiar with the class so I started to look around,
focusing on <code>treeMap</code> and <code>unrelatedObjects</code> to see if my assumption that they
never exceed 1,000 holds. Could they be in the millions or even billions?</p>

<p>Then I noticed the definition of the TreeMap as :</p>
<div><pre><code><span>// The field wasn't actually named treeMap.</span>
<span>private</span> <span>final</span> <span>Map</span><span>&lt;</span><span>K</span><span>,</span><span>V</span><span>&gt;</span> <span>treeMap</span> <span>=</span> <span>new</span> <span>TreeMap</span><span>&lt;&gt;();</span>
</code></pre></div>

<p>That’s scary.
There were multiple threads accessing the TreeMap, and it was unguarded.
At this point, I had an aha moment.
Could an unguarded TreeMap cause 3,200% utilization?</p>

<h2 id="experiment">Experiment</h2>

<p>I put together a simple experiment to try to reproduce the problem.
I created a bunch of threads randomly updating a shared TreeMap.</p>
<div><pre><code><span>for</span> <span>(</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>numThreads</span><span>;</span> <span>i</span><span>++)</span> <span>{</span>
    <span>threads</span><span>.</span><span>add</span><span>(</span><span>new</span> <span>Thread</span><span>(()</span> <span>-&gt;</span> <span>{</span>
        <span>Random</span> <span>random</span> <span>=</span> <span>new</span> <span>Random</span><span>();</span>
        <span>for</span><span>(</span><span>int</span> <span>j</span> <span>=</span> <span>0</span><span>;</span> <span>j</span> <span>&lt;</span> <span>numUpdates</span><span>;</span> <span>j</span><span>++)</span> <span>{</span>
            <span>try</span> <span>{</span>
                <span>treeMap</span><span>.</span><span>put</span><span>(</span><span>random</span><span>.</span><span>nextInt</span><span>(</span><span>1000</span><span>),</span> <span>random</span><span>.</span><span>nextInt</span><span>(</span><span>1000</span><span>));</span>
            <span>}</span> <span>catch</span> <span>(</span><span>NullPointerException</span> <span>e</span><span>)</span> <span>{</span>
                <span>// let it keep going so we can reproduce the issue.</span>
            <span>}</span>
        <span>}</span>
    <span>}));</span>
<span>}</span>
</code></pre></div>

<p>That try catch was key.
If no try catch, I wasn’t able to reproduce the problem.
Some threads would crash with the above output:</p>
<div><pre><code>Exception in thread "Thread-0" java.lang.NullPointerException: Cannot read field "right" because "l" is null
        at java.base/java.util.TreeMap.rotateRight(TreeMap.java:2562)
        at java.base/java.util.TreeMap.fixAfterInsertion(TreeMap.java:2594)
        at java.base/java.util.TreeMap.addEntry(TreeMap.java:770)
        at java.base/java.util.TreeMap.put(TreeMap.java:828)
        at java.base/java.util.TreeMap.put(TreeMap.java:534)
        at SimpleRepro.lambda$main$0(SimpleRepro.java:28)
        at java.base/java.lang.Thread.run(Thread.java:833)
</code></pre></div>
<p>but the program would still halt.</p>

<p>Probably only languages that allow you to catch NPEs will encounter this issue.
Other languages will just crash.
After a few runs, I saw 500% cpu utilization.
That’s crazy!
I always thought of race conditions as corrupting the data or deadlocking.
I never though it could cause performance issues.
But it makes sense, you could corrupt the data in a way that creates an infinite loop.</p>

<p>You can check out the java experiment from my GitHub java-by-experiments repo
<a href="https://github.com/josephmate/java-by-experiments/blob/main/tree_map_corruption/java/src/main/java/SimpleRepro.java">SimpleRepro.java</a></p>

<p>To make extra sure, I created another experiment that uses reflection
against the TreeMap to dump the nodes and their colours.
(In Java, a TreeMap is implemented using a Red-Black tree.)
The cycle in the TreeMap is highlighted in blue.
<img src="https://josephmate.github.io/assets/2023-08-20_cpu_util_3200/red_black_tree_cycle.gv.svg" alt="example cycle generated from TreeMap experiment"></p>

<p>So if you’re searching or putting something not already in the map,
it could get stuck in that infinite loop.</p>

<p>To reproduce the above graph you need to use reflection to access the root, 
and the left and right fields of the <code>TreeMap.Entry</code>.
You recursively traverse the <code>TreeMap.Entry</code>s starting from root, keeping
track of the Entries you visited.
If you visit an entry you already visited, you know you’ve hit a loop.
Print all the nodes from visited to show the cycle.</p>
<div><pre><code><span>private</span> <span>final</span> <span>TreeMap</span><span>&lt;</span><span>Integer</span><span>,</span><span>Integer</span><span>&gt;</span> <span>treeMap</span><span>;</span>
<span>private</span> <span>static</span> <span>final</span> <span>Field</span> <span>treeMapRootField</span><span>;</span>
<span>private</span> <span>static</span> <span>final</span> <span>Field</span> <span>treeMapEntryLeft</span><span>;</span>
<span>private</span> <span>static</span> <span>final</span> <span>Field</span> <span>treeMapEntryRight</span><span>;</span>
<span>private</span> <span>static</span> <span>final</span> <span>Field</span> <span>treeMapEntryKey</span><span>;</span>
<span>private</span> <span>static</span> <span>final</span> <span>Field</span> <span>treeMapEntryColor</span><span>;</span>

<span>...</span>

<span>public</span> <span>void</span> <span>print</span><span>()</span> <span>throws</span> <span>Exception</span> <span>{</span>
    <span>print</span><span>(</span><span>treeMapRootField</span><span>.</span><span>get</span><span>(</span><span>treeMap</span><span>),</span> <span>""</span><span>,</span> <span>new</span> <span>IdentityHashMap</span><span>&lt;&gt;());</span>
<span>}</span>

<span>private</span> <span>void</span> <span>print</span><span>(</span>
    <span>Object</span> <span>treeMapEntry</span><span>,</span> <span>String</span> <span>tabs</span><span>,</span> <span>IdentityHashMap</span><span>&lt;</span><span>Object</span><span>,</span> <span>Object</span><span>&gt;</span> <span>visited</span>
<span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>
    <span>if</span> <span>(</span><span>treeMapEntry</span> <span>!=</span> <span>null</span> <span>&amp;&amp;</span> <span>!</span><span>visited</span><span>.</span><span>containsKey</span><span>(</span><span>treeMapEntry</span><span>))</span> <span>{</span>
        <span>// in order traversal</span>
        <span>visited</span><span>.</span><span>put</span><span>(</span><span>treeMapEntry</span><span>,</span> <span>treeMapEntry</span><span>);</span>
        <span>print</span><span>(</span><span>treeMapEntryLeft</span><span>.</span><span>get</span><span>(</span><span>treeMapEntry</span><span>),</span> <span>tabs</span> <span>+</span> <span>"  "</span><span>,</span> <span>visited</span><span>);</span>
        <span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>tabs</span> <span>+</span> <span>treeMapEntryKey</span><span>.</span><span>get</span><span>(</span><span>treeMapEntry</span><span>)</span> <span>+</span> <span>":"</span>
            <span>+</span> <span>(</span><span>treeMapEntryColor</span><span>.</span><span>getBoolean</span><span>(</span><span>treeMapEntry</span><span>)</span> <span>?</span> <span>"BLACK"</span> <span>:</span> <span>"RED"</span><span>));</span>
        <span>print</span><span>(</span><span>treeMapEntryRight</span><span>.</span><span>get</span><span>(</span><span>treeMapEntry</span><span>),</span> <span>tabs</span> <span>+</span> <span>"  "</span><span>,</span> <span>visited</span><span>);</span>
    <span>}</span> <span>else</span> <span>if</span> <span>(</span><span>treeMapEntry</span> <span>!=</span> <span>null</span> <span>&amp;&amp;</span> <span>visited</span><span>.</span><span>containsKey</span><span>(</span><span>treeMapEntry</span><span>))</span> <span>{</span>
        <span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>tabs</span> <span>+</span> <span>treeMapEntryKey</span><span>.</span><span>get</span><span>(</span><span>treeMapEntry</span><span>)</span>  <span>+</span> <span>":"</span>
            <span>+</span> <span>(</span><span>treeMapEntryColor</span><span>.</span><span>getBoolean</span><span>(</span><span>treeMapEntry</span><span>)</span> <span>?</span> <span>"BLACK"</span> <span>:</span> <span>"RED"</span><span>)</span>
            <span>+</span> <span>" CYCLE"</span>
        <span>);</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>Working code is available in my java-by-experiments GitHub project
<a href="https://github.com/josephmate/java-by-experiments/blob/main/tree_map_corruption/java/src/main/java/ExploringTreeMap.java">ExploringTreeMap.java</a>
and
<a href="https://github.com/josephmate/java-by-experiments/blob/main/tree_map_corruption/java/src/main/java/TreeMapExplorer.java">TreeMapExplorer.java</a></p>



<p>I’m not the first person to write about this issue.
While preparing this article I found:</p>

<ul>
  <li>Ivo Anjo wrote: <a href="https://ivoanjo.me/blog/2018/07/21/writing-to-a-java-treemap-concurrently-can-lead-to-an-infinite-loop-during-reads/">writing to a java treemap concurrently can lead to an infinite loop during reads</a></li>
  <li>Red Hat has a troubleshooting article: <a href="https://access.redhat.com/solutions/58008">High CPU due to multiple Java threads accessing TreeMap simultaneously</a>
    <ul>
      <li>Originally reported as far back as June 20 2011 based on <a href="https://web.archive.org/web/20190715204100/https://access.redhat.com/solutions/58008">web archive</a></li>
    </ul>
  </li>
  <li>There is even a Stack Overflow question about it: <a href="https://stackoverflow.com/questions/56234865/java-process-consumes-more-than-100-cpu">Java Process consumes more than 100% CPU</a></li>
</ul>

<p>However, this article provides a few new perspectives not previously discussed:</p>

<ol>
  <li>Practical code that that reproduces the issue.</li>
  <li>Proposing that only a particular class of languages can encounter this issue
and exploring that hypothesis</li>
  <li>A survey of languages to see if all can reproduce the issue</li>
  <li>A new approach to fixing TreeMap and red black tree to prevent this issue</li>
</ol>

<p>If any of these interest you, please keep reading.</p>

<h2 id="that-code-is-not-realistic">That code is not realistic</h2>

<p>Some might claim that my experimental code is unrealistic.
Who ignores NPEs?
There are two practical ways: uncaught exceptions in executors and services backed by a thread pool.</p>

<h2 id="uncaught-exceptions-in-executor">Uncaught Exceptions in Executor</h2>

<p>We could reproduce this problem in conjunction with another common mistake that suppresses uncaught exceptions.</p>

<p>The below code also reproduces the issue, but with a thread pool.</p>
<div><pre><code><span>final</span> <span>ExecutorService</span> <span>pool</span> <span>=</span> <span>Executors</span><span>.</span><span>newFixedThreadPool</span><span>(</span><span>numThreads</span><span>);</span>
<span>final</span> <span>TreeMap</span><span>&lt;</span><span>Integer</span><span>,</span><span>Integer</span><span>&gt;</span> <span>treeMap</span> <span>=</span> <span>new</span> <span>TreeMap</span><span>&lt;&gt;();</span>

<span>Random</span> <span>random</span> <span>=</span> <span>new</span> <span>Random</span><span>();</span>
<span>for</span> <span>(</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>numThreads</span><span>*</span><span>numUpdatesPerThread</span><span>;</span> <span>i</span><span>++)</span> <span>{</span>
    <span>pool</span><span>.</span><span>submit</span><span>(</span> <span>()</span> <span>-&gt;</span> <span>{</span>
        <span>treeMap</span><span>.</span><span>put</span><span>(</span><span>random</span><span>.</span><span>nextInt</span><span>(</span><span>10000</span><span>),</span> <span>random</span><span>.</span><span>nextInt</span><span>(</span><span>10000</span><span>));</span>
    <span>});</span>
<span>}</span>

<span>pool</span><span>.</span><span>shutdown</span><span>();</span>
<span>pool</span><span>.</span><span>awaitTermination</span><span>(</span><span>1</span><span>,</span> <span>TimeUnit</span><span>.</span><span>DAYS</span><span>);</span>
</code></pre></div>
<p>snippet from <a href="https://github.com/josephmate/java-by-experiments/tree/main/tree_map_corruption/java/src/main/java/ExecutorUncaughtRepro.java">ExecutorUncaughtRepro.java</a></p>

<p>When you run it, you’ll see it hang.
Take a thread dump and see the same symptoms:</p>
<div><pre><code>"pool-1-thread-1" #22 [15356] prio=5 os_prio=0 cpu=17734.38ms elapsed=21.39s tid=0x0000023c45dd3e90 nid=15356 runnable  [0x000000780b4fe000]
   java.lang.Thread.State: RUNNABLE
	at java.util.TreeMap.put(java.base@19.0.1/TreeMap.java:826)
	at java.util.TreeMap.put(java.base@19.0.1/TreeMap.java:534)
	at ExecutorUncaughtRepro.lambda$main$0(ExecutorUncaughtRepro.java:33)
	at ExecutorUncaughtRepro$$Lambda$14/0x00000008010031f0.run(Unknown Source)
	at java.util.concurrent.Executors$RunnableAdapter.call(java.base@19.0.1/Executors.java:577)
	at java.util.concurrent.FutureTask.run(java.base@19.0.1/FutureTask.java:317)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@19.0.1/ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@19.0.1/ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(java.base@19.0.1/Thread.java:1589)

</code></pre></div>
<p>It’s stuck on the TreeMap and really high CPU utilization.</p>

<p>However, when looking at standard out there is nothing!
The thread pool swallowed all the NPEs not giving any indication of problem. 
Unfortunately, this was the case in my situation.</p>

<p>When managing your own thread pools, you need to make sure you:</p>
<ol>
  <li>Register an uncaught exception handler on the thread through a thread factory</li>
  <li>Operate on the futures it return. If you do <code>future.get()</code> you will get an <code>ExectionException</code> wrapping the NPE!</li>
</ol>

<h2 id="again-with-grpc">Again with gRPC</h2>

<p>Another way is to have some sort of service back by a thread pool like a gRPC service.
Here I recreate a realistic scenario in gRPC that reproduces the problem.
The service is powered by an unguarded TreeMap.</p>

<div><pre><code><span>@Override</span>
<span>public</span> <span>void</span> <span>addReceipt</span><span>(</span>
    <span>ReceiptProcessorServiceOuterClass</span><span>.</span><span>AddReceiptRequest</span> <span>req</span><span>,</span>
    <span>StreamObserver</span><span>&lt;</span><span>ReceiptProcessorServiceOuterClass</span><span>.</span><span>AddReceiptResponse</span><span>&gt;</span> <span>responseObserver</span>
<span>)</span> <span>{</span>
    <span>int</span> <span>timestamp</span> <span>=</span> <span>req</span><span>.</span><span>getTimestamp</span><span>();</span>
    <span>int</span> <span>totalPrice</span> <span>=</span> <span>req</span><span>.</span><span>getTotalPrice</span><span>();</span>
    <span>receipts</span><span>.</span><span>put</span><span>(</span><span>timestamp</span><span>,</span> <span>totalPrice</span><span>);</span>
    <span>ReceiptProcessorServiceOuterClass</span><span>.</span><span>AddReceiptResponse</span> <span>response</span> <span>=</span> <span>ReceiptProcessorServiceOuterClass</span><span>.</span><span>AddReceiptResponse</span><span>.</span><span>newBuilder</span><span>().</span><span>build</span><span>();</span>
    <span>responseObserver</span><span>.</span><span>onNext</span><span>(</span><span>response</span><span>);</span>
    <span>responseObserver</span><span>.</span><span>onCompleted</span><span>();</span>
<span>}</span>
</code></pre></div>
<p>snippet from <a href="https://github.com/josephmate/java-by-experiments/blob/main/tree_map_corruption/java/src/main/java/GrpcRepro.java">GrpcRepro.java</a></p>

<p>Dumping the threads gives us:</p>
<div><pre><code>"grpc-default-executor-23" #54 [8796] daemon prio=5 os_prio=0 cpu=18671.88ms elapsed=175.50s tid=0x00000168b6c707c0 nid=8796 runnable  [0x000000059fbfe000]
   java.lang.Thread.State: RUNNABLE
	at java.util.TreeMap.put(java.base@19.0.1/TreeMap.java:826)
	at java.util.TreeMap.put(java.base@19.0.1/TreeMap.java:534)
	at ReceiptProcessorServiceImpl.addReceipt(GrpcRepro.java:59)
	at ReceiptProcessorServiceGrpc$MethodHandlers.invoke(ReceiptProcessorServiceGrpc.java:185)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@19.0.1/ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@19.0.1/ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(java.base@19.0.1/Thread.java:1589)
</code></pre></div>
<p>showing that TreeMap.put() got stuck on an infinite loop.</p>

<h2 id="how-did-it-happen-rotations">How did it happen? Rotations</h2>

<p>My suspicion is that two threads independently rotate the tree 
in opposite directions, resulting in a cycle.
Or maybe, two overlaping rotations interleave their writes in a way that produces the
cycle.
However, I do not have proof of an interleaving between threads that shows this.</p>

<p>I also suspect that the NPE is necessary.
The problem will not reproduce without hitting an NPE as I saw with my Java experiments.</p>

<h2 id="other-languages">Other languages</h2>

<p>I explore this idea that only languages with NPEs can exhibit this problem by
trying to reproduce this problem in as many languages as I’ve programmed in
before.
If this claim is true, I expect it to only reproduce in
Java, Kotlin, C#, Ruby, Typescript, and Python.
I expect to not be able to reproduce the problem in Go, C++, Rust, and Elixir.</p>

<table>
  <thead>
    <tr>
      <th>Language</th>
      <th>Affected</th>
      <th>Explanation</th>
      <th>Code</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Java</td>
      <td>yes</td>
      <td>this whole article is based on this</td>
      <td><a href="https://github.com/josephmate/java-by-experiments/tree/main/tree_map_corruption/java/">source</a></td>
    </tr>
    <tr>
      <td>C#</td>
      <td>yes</td>
      <td><a href="https://stackoverflow.com/questions/14909853/is-sorteddictionary-a-red-black-tree">SortedDictionary</a> used red black tree</td>
      <td><a href="https://github.com/josephmate/java-by-experiments/tree/main/tree_map_corruption/csharp/">source</a></td>
    </tr>
    <tr>
      <td>Ruby</td>
      <td>no</td>
      <td>Used red black tree from <a href="http://kanwei.github.io/algorithms/classes/Containers/RubyRBTreeMap.html">kanwei/algorithms</a> but was unable to reproduce the issue. I believe it might not be able to reproduce the problem due to the Global Interpreter Lock (GIL), and how it limits when threads can context switch preventing interleavings of threads that cause an infinite loop.</td>
      <td><a href="https://github.com/josephmate/java-by-experiments/tree/main/tree_map_corruption/ruby/">source</a></td>
    </tr>
    <tr>
      <td>C++</td>
      <td>yes</td>
      <td><a href="https://stackoverflow.com/questions/18414579/what-data-structure-is-inside-stdmap-in-c">used red-black tree</a>. I was expecting it to always segfault first preventing it from hitting the issue.</td>
      <td><a href="https://github.com/josephmate/java-by-experiments/tree/main/tree_map_corruption/cpp/">source</a></td>
    </tr>
    <tr>
      <td>Go</td>
      <td>yes</td>
      <td><a href="https://github.com/emirpasic/gods#redblacktree">has popular datastructures library</a>. Similar to C++, I was expecting it only segfault and not reproduce the infinite loop. I was wrong.</td>
      <td><a href="https://github.com/josephmate/java-by-experiments/tree/main/tree_map_corruption/golang/">source</a></td>
    </tr>
    <tr>
      <td>Rust</td>
      <td>no</td>
      <td>compiler prevented me. I don’t know enough about writing unsafe code to reproduce the problem</td>
      <td><a href="https://github.com/josephmate/java-by-experiments/tree/main/tree_map_corruption/rust/">source</a></td>
    </tr>
    <tr>
      <td>Kotlin</td>
      <td>yes</td>
      <td>uses java’s TreeMap, same issue expected</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>PHP</td>
      <td>no</td>
      <td>not in standard library and did not find any popular libraries with red black tree</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>JavaScript</td>
      <td>no</td>
      <td><a href="https://stackoverflow.com/questions/40028377/is-it-possible-to-achieve-multithreading-in-nodejs">multithreading model cannot share references</a></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Typescript</td>
      <td>no</td>
      <td>same argument as JavaScript</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Python</td>
      <td>no</td>
      <td>no red-black tree in standard library and popular libraries like <a href="https://grantjenks.com/docs/sortedcontainers/implementation.html">Sorted Containers do not use red black tree</a>. despite no red black tree, if I had run the experiment, I would expect to not to be able to reproduce for the same reason as ruby: the GIL.</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Elixir</td>
      <td>no</td>
      <td>Although there are many third party implementations of the red black trees in Elixir (and Erlang), the programming model makes it impossible: data structures are immutable and interactions between threads are limited to message passing.</td>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>

<p>From the table, the most interesting one is C++ because I was not expecting to be able to reproduce the problem due to my hypothesis from the last section.
As a result, I include the details from the experiment here. Similarly, go as unexpected, but trim the article, I left it out. You can see <a href="https://github.com/josephmate/java-by-experiments/tree/main/tree_map_corruption/golang/">Go here</a>.</p>

<p>The code is essentially the same as the Java one, only using C++ standard libraries.
I also added extra printing since I was so shocked that the problem reproduced,
I just wanted to make extra sure.</p>
<div><pre><code><span>// Equivalent of TreeMap in C++ is std::map</span>
<span>// Uses same red black tree data structure</span>
<span>std</span><span>::</span><span>map</span><span>&lt;</span><span>int</span><span>,</span> <span>int</span><span>&gt;</span> <span>sortedMap</span><span>;</span>

<span>for</span> <span>(</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>numThreads</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
    <span>threads</span><span>.</span><span>emplace_back</span><span>([</span><span>&amp;</span><span>]()</span> <span>{</span>
        <span>// copy so that we don't use the latest value of i (5)</span>
        <span>int</span> <span>threadId</span> <span>=</span> <span>threadIdGenerator</span><span>.</span><span>fetch_add</span><span>(</span><span>1</span><span>);</span>
        <span>std</span><span>::</span><span>random_device</span> <span>rd</span><span>;</span>
        <span>std</span><span>::</span><span>mt19937</span> <span>gen</span><span>(</span><span>rd</span><span>());</span>
        <span>std</span><span>::</span><span>uniform_int_distribution</span><span>&lt;&gt;</span> <span>dis</span><span>(</span><span>0</span><span>,</span> <span>999</span><span>);</span>
                    
        <span>int</span> <span>progressThreshold</span> <span>=</span> <span>numUpdates</span> <span>/</span> <span>progressRatio</span><span>;</span>
        <span>std</span><span>::</span><span>cout</span> <span>&lt;&lt;</span> <span>"Thread "</span> <span>&lt;&lt;</span> <span>threadId</span> <span>&lt;&lt;</span> <span>" started."</span><span>;</span>
        <span>for</span> <span>(</span><span>int</span> <span>j</span> <span>=</span> <span>0</span><span>;</span> <span>j</span> <span>&lt;</span> <span>numUpdates</span><span>;</span> <span>j</span><span>++</span><span>)</span> <span>{</span>
            <span>try</span> <span>{</span>
                <span>int</span> <span>key</span> <span>=</span> <span>dis</span><span>(</span><span>gen</span><span>);</span>
                <span>int</span> <span>value</span> <span>=</span> <span>dis</span><span>(</span><span>gen</span><span>);</span>

                <span>sortedMap</span><span>[</span><span>key</span><span>]</span> <span>=</span> <span>value</span><span>;</span>
            <span>}</span> <span>catch</span> <span>(</span><span>const</span> <span>std</span><span>::</span><span>exception</span><span>&amp;</span> <span>e</span><span>)</span> <span>{</span>
                <span>std</span><span>::</span><span>cerr</span> <span>&lt;&lt;</span> <span>"Caught exception on thread "</span> <span>&lt;&lt;</span> <span>threadId</span> <span>&lt;&lt;</span> <span>":"</span> <span>&lt;&lt;</span> <span>e</span><span>.</span><span>what</span><span>()</span> <span>&lt;&lt;</span> <span>std</span><span>::</span><span>endl</span><span>;</span>
            <span>}</span>

            <span>if</span> <span>((</span><span>j</span> <span>+</span> <span>1</span><span>)</span> <span>%</span> <span>progressThreshold</span> <span>==</span> <span>0</span><span>)</span> <span>{</span>
                    <span>std</span><span>::</span><span>cout</span> <span>&lt;&lt;</span> <span>"Thread "</span> <span>&lt;&lt;</span> <span>threadId</span> <span>&lt;&lt;</span> <span>": "</span> 
                            <span>&lt;&lt;</span> <span>((</span><span>j</span> <span>+</span> <span>1</span><span>)</span> <span>*</span> <span>100</span> <span>/</span> <span>numUpdates</span><span>)</span> <span>&lt;&lt;</span> <span>"% complete ("</span> 
                            <span>&lt;&lt;</span> <span>(</span><span>j</span> <span>+</span> <span>1</span><span>)</span> <span>&lt;&lt;</span> <span>"/"</span> <span>&lt;&lt;</span> <span>numUpdates</span> <span>&lt;&lt;</span> <span>" updates)</span><span>\n</span><span>"</span><span>;</span>
            <span>}</span>
        <span>}</span>
        <span>std</span><span>::</span><span>cout</span> <span>&lt;&lt;</span> <span>"Thread "</span> <span>&lt;&lt;</span> <span>threadId</span> <span>&lt;&lt;</span> <span>" completed."</span><span>;</span>
    <span>});</span>
<span>}</span>
</code></pre></div>

<p>Occasionally, the program segfaults and crashes like before.
This is what I was expecting the worst failure to look like.</p>
<div><pre><code>./SimpleRepro
zsh: segmentation fault  ./SimpleRepro
</code></pre></div>

<p>However, very rarely the output would look like below, indicating the threads got
stuck.
After waiting 10 minutes, the threads never completed.
I did not expect this to happen because I thought it requires a thrown and
swallowed exception. That is not happening here.</p>
<div><pre><code>./SimpleRepro
Thread 0 started.Thread Thread 0: 10% complete (Thread 10/10012Thread  started.3
started.Thread 4 started.Thread 4: 10% complete (10/100 updates)
 updates)
Thread 0: 20% complete (20/100 updates)
Thread 0: 30% complete (30/100 updates)
Thread 0: 40% complete (40/100 updates)
Thread 1: 10% complete (10/100 updates)
 started.Thread 2: 10% complete (10/100 updates)
Thread 1: 20% complete (20/100 updates)
&lt;nothing output for 5 minutes&gt;
</code></pre></div>

<p>From the tool <code>top</code> we can see that the problem reproduced because of the high cpu
utilization.</p>
<div><pre><code>top
PID    COMMAND      %CPU  TIME     ...
59815  SimpleRepro  170.8 08:49.61 ...
</code></pre></div>

<p>This shows my claim is false.
I was able to reproduce the problem in Go and C++.
Although they sometimes segfaulted, there were times when they got stuck in the
infinite loop.
In a language like C++, when you reference a null pointer it always segfaults,
so there must be an interleaving of the threads that does not hit a null!
I have no idea why.
I was expecting them to crash given how often I saw NPEs in the Java experiment.</p>

<p>With this knowledge, I went back to my SimpeRepro java experiment and stopped catching the NPE.
After re-running it 12 times, I was still able to reproduce the problem despite not catching the NPE:</p>
<div><pre><code>"Thread-4" #17 prio=5 os_prio=31 cpu=18597.02ms elapsed=23.79s tid=0x00007f81051ac200 nid=0x6a03 runnable  [0x000070000bcb5000]
   java.lang.Thread.State: RUNNABLE
        at java.util.TreeMap.put(java.base@17.0.3/TreeMap.java:826)
        at java.util.TreeMap.put(java.base@17.0.3/TreeMap.java:534)
        at SimpleRepro.lambda$main$0(SimpleRepro.java:28)
        at SimpleRepro$$Lambda$1/0x0000000800c00a08.run(Unknown Source)
        at java.lang.Thread.run(java.base@17.0.3/Thread.java:833)
</code></pre></div>

<p>The other thing that surprised me was languages like Ruby, despite letting you
catch NPEs did not let you reproduce the problem. The Global Interpreter Lock (GIL)
somehow prevented all execution interleavings that would reproduce the problem.</p>

<h2 id="easy-fix-guard-against-concurrent-modification">Easy Fix: Guard against concurrent modification</h2>

<p>The easiest way to fix this was to wrap the TreeMap with <code>Collections.synchronizedMap</code> or switch to <code>ConcurrentHashMap</code> and sort on demand.
However, those fixes are boring and did not prevent us from making that mistake and taking down our host.</p>

<h2 id="controversial-fix-track-visited-nodes">Controversial Fix: Track visited nodes</h2>

<p>What if you could safely make the mistake, but not have a cycle?</p>

<p>I modified the red-black tree to record the nodes it has already visited.
The only requires an additional O(lg(n)) memory since it’s limited by the height of the tree.
The height of a red-black tree is guaranteed to be O(lg(n)).
If we encounter a node that we already visited, we throw a <code>ConcurrentModificationException</code>.
This will not prevent the data corruption,
but will prevent 100% cpu utilization from the infinite loop if someone makes that mistake again in the future.
This would require standard libraries to adopt this technique though which I
don’t think is likely to happen given the extra memory needed.</p>

<div><pre><code><span>diff --git a/tree_map_corruption/java/src/main/java/ProtectedTreeMap.java b/tree_map_corruption/java/src/main/java/ProtectedTreeMap.java
index 53c15bb..2713d5a 100644
</span><span>--- a/tree_map_corruption/java/src/main/java/ProtectedTreeMap.java
</span><span>+++ b/tree_map_corruption/java/src/main/java/ProtectedTreeMap.java
</span><span>@@ -345,7 +345,9 @@</span> public class ProtectedTreeMap&lt;K,V&gt;
         @SuppressWarnings("unchecked")
             Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;
         Entry&lt;K,V&gt; p = root;
<span>+        IdentityHashMap&lt;Entry&lt;?,?&gt;, Boolean&gt; visited = new IdentityHashMap&lt;&gt;();
</span>         while (p != null) {
<span>+            visited.put(p, true);
</span>             int cmp = k.compareTo(p.key);
             if (cmp &lt; 0)
                 p = p.left;
<span>@@ -353,6 +355,10 @@</span> public class ProtectedTreeMap&lt;K,V&gt;
                 p = p.right;
             else
                 return p;
<span>+
+            if (visited.containsKey(p)) {
+                throw new ConcurrentModificationException("TreeMap corrupted. Loop detected");
+            }
</span>         }
         return null;
     }
<span>@@ -779,6 +785,7 @@</span> public class ProtectedTreeMap&lt;K,V&gt;
     }
 
     private V put(K key, V value, boolean replaceOld) {
<span>+        IdentityHashMap&lt;Entry&lt;?,?&gt;, Boolean&gt; visited = new IdentityHashMap&lt;&gt;();
</span>         Entry&lt;K,V&gt; t = root;
         if (t == null) {
             addEntryToEmptyMap(key, value);
<span>@@ -790,6 +797,7 @@</span> public class ProtectedTreeMap&lt;K,V&gt;
         Comparator&lt;? super K&gt; cpr = comparator;
         if (cpr != null) {
             do {
<span>+                visited.put(t, true);
</span>                 parent = t;
                 cmp = cpr.compare(key, t.key);
                 if (cmp &lt; 0)
<span>@@ -803,12 +811,17 @@</span> public class ProtectedTreeMap&lt;K,V&gt;
                     }
                     return oldValue;
                 }
<span>+
+                if (visited.containsKey(t)) {
+                    throw new ConcurrentModificationException("TreeMap corrupted. Loop detected");
+                }
</span>             } while (t != null);
         } else {
             Objects.requireNonNull(key);
             @SuppressWarnings("unchecked")
             Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;
             do {
<span>+                                                               visited.put(t, true);
</span>                 parent = t;
                 cmp = k.compareTo(t.key);
                 if (cmp &lt; 0)
<span>@@ -822,6 +835,10 @@</span> public class ProtectedTreeMap&lt;K,V&gt;
                     }
                     return oldValue;
                 }
<span>+
+                if (visited.containsKey(t)) {
+                    throw new ConcurrentModificationException("TreeMap corrupted. Loop detected");
+                }
</span>             } while (t != null);
         }
         addEntry(key, value, parent, cmp &lt; 0);
</code></pre></div>
<p>diff from my <a href="https://github.com/josephmate/java-by-experiments/blob/main/tree_map_corruption/java/src/main/java/ProtectedTreeMap.java">ProtectedTreeMap.java</a></p>

<p>In the above code, you can see that I modified both the get and put methods to
maintain the set of visited nodes and throw a <code>ConcurrentModificationException</code>
when an already visited node is in the set.</p>

<h2 id="mistakes-happen-make-swiss-cheese">Mistakes Happen: Make Swiss Cheese</h2>

<p>Mistakes happen so it’s important that multiple layers are in place to detect the issue.
Imaging a slice of Swiss cheese, each slice taken from a different block of cheese.
Stacking enough of those slices would result in nothing being able to pass through.</p>

<h2 id="alerts-on-npes">Alerts on NPEs</h2>

<p>We lacked an alarm on any instance of an NPE.
We only had error rate alarms.
This NPE only occurs once per API handler worker thread before which was not enough to trigger our error rate alarms.
On top of that, none of the NPEs were logged because we had an unhandled exception in our Executor.</p>

<h2 id="alerts-on-utilization-anomalies">Alerts on utilization anomalies</h2>

<p>We monitor the cpu utilization and use a naive threshold based approach to alarming.
When the cpu utilization exceeds that threshold, we fire an alarm because it indicates abnormal behaviour.
This is how we discovered the issue.</p>

<h2 id="uncaught-exceptions-on-executors">Uncaught exceptions on Executors</h2>

<p>If you add your work to an executor you must ensure you have an uncaught exception handler.</p>
<div><pre><code><span>AtomicInteger</span> <span>threadNumber</span> <span>=</span> <span>new</span> <span>AtomicInteger</span><span>(</span><span>1</span><span>);</span>
<span>ThreadFactory</span> <span>customThreadFactory</span> <span>=</span> <span>new</span> <span>ThreadFactory</span><span>()</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>Thread</span> <span>newThread</span><span>(</span><span>Runnable</span> <span>r</span><span>)</span> <span>{</span>
        <span>Thread</span> <span>thread</span> <span>=</span> <span>new</span> <span>Thread</span><span>(</span><span>r</span><span>);</span>
        <span>thread</span><span>.</span><span>setName</span><span>(</span><span>"my-thread-pool-"</span> <span>+</span> <span>threadNumber</span><span>.</span><span>getAndIncrement</span><span>());</span>
        <span>thread</span><span>.</span><span>setUncaughtExceptionHandler</span><span>(</span>
          <span>(</span><span>dyingThread</span><span>,</span> <span>throwable</span><span>)</span> <span>-&gt;</span> <span>{</span>
            <span>logger</span><span>.</span><span>error</span><span>(</span><span>"uncaught exception!"</span><span>,</span> <span>throwable</span><span>);</span>
          <span>}</span>
        <span>);</span>
        <span>return</span> <span>thread</span><span>;</span>
    <span>}</span>
<span>};</span>

<span>ExecutorService</span> <span>executor</span> <span>=</span> <span>Executors</span><span>.</span><span>newFixedThreadPool</span><span>(</span><span>2</span><span>,</span> <span>customThreadFactory</span><span>);</span>
</code></pre></div>

<p>This code is kind of ugly so you’re better off using</p>

<p><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/concurrent/BasicThreadFactory.html">Apache Common’s BasicThreadFactory</a>:</p>
<div><pre><code><span>new</span> <span>BasicThreadFactory</span><span>.</span><span>Builder</span><span>()</span>
  <span>.</span><span>namingPattern</span><span>(</span><span>"my-thread-pool-%d"</span><span>)</span>
  <span>.</span><span>uncaughtExceptionHandler</span><span>(</span>
    <span>(</span><span>dyingThread</span><span>,</span> <span>throwable</span><span>)</span> <span>-&gt;</span> <span>{</span>
      <span>logger</span><span>.</span><span>error</span><span>(</span><span>"uncaught exception!"</span><span>,</span> <span>throwable</span><span>);</span>
    <span>}</span>
  <span>)</span>
  <span>.</span><span>build</span><span>();</span>
</code></pre></div>
<p>or <a href="https://guava.dev/releases/19.0/api/docs/com/google/common/util/concurrent/ThreadFactoryBuilder.html">guava’s ThreadFactoryBuilder</a>:</p>
<div><pre><code><span>new</span> <span>ThreadFactoryBuilder</span><span>()</span>
  <span>.</span><span>setNameFormat</span><span>(</span><span>"my-thread-pool-%d"</span><span>)</span>
  <span>.</span><span>setUncaughtExceptionHandler</span><span>(</span>
    <span>(</span><span>dyingThread</span><span>,</span> <span>throwable</span><span>)</span> <span>-&gt;</span> <span>{</span>
      <span>logger</span><span>.</span><span>error</span><span>(</span><span>"uncaught exception!"</span><span>,</span> <span>throwable</span><span>);</span>
    <span>}</span>
  <span>)</span>
  <span>.</span><span>build</span><span>()</span>
</code></pre></div>

<p>Without a handler, the exception will be swallowed and none of your log monitoring will be able to detect the issue.</p>

<h2 id="code-reviews">Code reviews</h2>

<p>Sometimes, a detail oriented developer will notice the combination of threads
and TreeMap, or even suggest to not use a TreeMap if ordered elements are not
needed. Unfortunately, that didn’t happen in this case.</p>

<h2 id="static-code-analysis">Static code analysis</h2>

<p>Static code analysis tools like SpotBugs (used to be called FindBugs), JLint, and Chord can detect these kinds of issues at build time. See the paper <a href="https://www.sqrlab.ca/papers/SCAM2010.pdf">How Good is Static Analysis at Finding Concurrency Bugs?</a>.
Unfortunately, we didn’t start using them until after the bug.</p>

<h2 id="tests">Tests</h2>

<p>Ensure your tests handle the multithreaded case!
In my case, we did not have multithreaded tests for that part of the code.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Mistakes happen.
Watch out, unprotected concurrent modification data corruption can present itself as infinite loops!
Despite making multiple mistakes, that hid the problem at multiple layers but not all.
As long as you adopt a layered approach, you will be able to respond quickly or
prevent it entirely.</p>


      </article>

      

      

      
        <!-- Check if any share-links are active -->








      

      
      
  
  
  

  


  

  



    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Violence alters human genes for generations, researchers discover (402 pts)]]></title>
            <link>https://news.ufl.edu/2025/02/syrian-violence-epigenetics/</link>
            <guid>43206722</guid>
            <pubDate>Fri, 28 Feb 2025 15:33:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://news.ufl.edu/2025/02/syrian-violence-epigenetics/">https://news.ufl.edu/2025/02/syrian-violence-epigenetics/</a>, See on <a href="https://news.ycombinator.com/item?id=43206722">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
        
        <div><div>
		 <p>In 1982, the Syrian government besieged the city of Hama, killing tens of thousands of its own citizens in sectarian violence. Four decades later, <a href="https://apnews.com/article/syria-aleppo-hama-massacre-assad-799f37fd2608532a253cccb48df4e613" target="_blank" rel="noopener">rebels used the memory of the massacre</a> to help inspire the toppling of the Assad family that had overseen the operation.</p>
<p>But there is another lasting effect of the attack, hidden deep in the genes of Syrian families. The grandchildren of women who were pregnant during the siege — grandchildren who never experienced such violence themselves — nonetheless bear marks of it in their genomes. Passed down through their mothers, this genetic imprint offers the first human evidence of a phenomenon previously documented only in animals: The genetic transmission of stress across multiple generations.</p>
<p>“The idea that trauma and violence can have repercussions into future generations should help people be more empathetic, help policymakers pay more attention to the problem of violence,” said <a href="https://people.clas.ufl.edu/cmulligan/" target="_blank" rel="noopener">Connie Mulligan</a>, Ph.D., a professor of Anthropology and the Genetics Institute at the University of Florida and senior author of the new study. “It could even help explain some of the seemingly unbreakable intergenerational cycles of abuse and poverty and trauma that we see around the world, including in the U.S.”</p>
<p>While our genes are not changed by life experiences, they can be tuned through a system known as epigenetics. In response to stress or other events, our cells can add small chemical flags to genes that may quiet them down or alter their behavior. These changes may help us adapt to stressful environments, although the effects aren’t well understood.</p>
<p>It is these tell-tale chemical flags that Mulligan and her team were looking for in the genes of Syrian families. While lab experiments have shown that animals can pass along epigenetic signatures of stress to future generations, proving the same in people has been nearly impossible.&nbsp;</p>
      </div><div>
          <blockquote>
            <p>
              <span>“The families want their story told. They want their experiences heard."</span>
              <span> —Connie Mulligan</span>
            </p>
          </blockquote>
        </div><div>
		 <p>Mulligan worked with <a href="https://staff.hu.edu.jo/CV_e.aspx?id=0gnQeXkZsCc=" target="_blank" rel="noopener">Rana Dajani</a>, Ph.D., a molecular biologist at Hashemite University in Jordan, and anthropologist <a href="https://anthropology.yale.edu/profile/catherine-panter-brick" target="_blank" rel="noopener">Catherine Panter-Brick</a>, Ph.D., of Yale University, to conduct the unique study. The research relied on following three generations of Syrian immigrants to the country. Some families had lived through the Hama attack before fleeing to Jordan. Other families avoided Hama, but lived through the recent civil war against the Assad regime.&nbsp;</p>
<p>The team collected samples from grandmothers and mothers who were pregnant during the two conflicts, as well as from their children. This study design meant there were grandmothers, mothers and children who had each experienced violence at different stages of <img src="https://news.ufl.edu/media/newsufledu/images/2025/02/exp-design-566x437.jpg" alt="">development.</p>
<p>A third group of families had immigrated to Jordan before 1980, avoiding the decades of violence in Syria. These early immigrants served as a crucial control to compare to the families who had experienced the stress of civil war.</p>
<p>Herself the daughter of refugees, Dajani worked closely with the refugee community in Jordan to build trust and interest in participating in the story. She ultimately collected cheek swabs from 138 people across 48 families.&nbsp;</p>
<p>“The families want their story told. They want their experiences heard,” Mulligan said.</p>
<p>Back in Florida, Mulligan’s lab scanned the DNA for epigenetic modifications and looked for any relationship with the families’ experience of violence.</p>
<p>In the grandchildren of Hama survivors, the researchers discovered 14 areas in the genome that had been modified in response to the violence their grandmothers experienced. These 14 modifications demonstrate that stress-induced epigenetic changes may indeed appear in future generations, just as they can in animals.</p>
<p>The study also uncovered 21 epigenetic sites in the genomes of people who had directly experienced violence in Syria. In a third finding, the researchers reported that people exposed to violence while in their mothers’ wombs showed evidence of accelerated epigenetic aging, a type of biological aging that may be associated with susceptibility to age-related diseases.&nbsp;</p>
<p>Most of these epigenetic changes showed the same pattern after exposure to violence, suggesting a kind of common epigenetic response to stress — one that can not only affect people directly exposed to stress, but also future generations.</p>
<p>“We think our work is relevant to many forms of violence, not just refugees. Domestic violence, sexual violence, gun violence: all the different kinds of violence we have in the U.S,” said Mulligan. “We should study it. We should take it more seriously.”</p>
<p>It’s not clear what, if any, effect these epigenetic changes have in the lives of people carrying them inside their genomes. But some studies have found a link between stress-induced epigenetic changes and diseases like diabetes. <a href="https://www.nytimes.com/2018/01/31/science/dutch-famine-genes.html">One famous study</a> of Dutch survivors of famine during World War II suggested that their offspring carried epigenetic changes that increased their odds of being overweight later in life. While many of these modifications likely have no effect, it’s possible that some can affect our health, Mulligan said.</p>
<p>The researchers published their findings, which were supported by the National Science Foundation, Feb. 27 in the journal Scientific Reports.&nbsp;</p>
<p>While carefully searching for evidence of the lasting effects of war and trauma stamped into our genomes, Mulligan and her collaborators were also struck by the perseverance of the families they worked with. Their story was much bigger than merely surviving war, Mulligan said.&nbsp;</p>
<p>“In the midst of all this violence we can still celebrate their extraordinary resilience. They are living fulfilling, productive lives, having kids, carrying on traditions. They have persevered,” Mulligan said. “That resilience and perseverance is quite possibly a uniquely human trait.”</p>


      </div>						</div>
				</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[AI is killing some companies, yet others are thriving – let's look at the data (199 pts)]]></title>
            <link>https://www.elenaverna.com/p/ai-is-killing-some-companies-yet</link>
            <guid>43206491</guid>
            <pubDate>Fri, 28 Feb 2025 15:12:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.elenaverna.com/p/ai-is-killing-some-companies-yet">https://www.elenaverna.com/p/ai-is-killing-some-companies-yet</a>, See on <a href="https://news.ycombinator.com/item?id=43206491">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="auto"><p><span>AI is quietly upending the business models of major content sites. Platforms like WebMD, G2, and Chegg - once fueled by SEO and ad revenue - are losing traffic as AI-powered search and chatbots deliver instant answers. Users no longer need to click through pages when AI summarizes everything in seconds. </span><a href="https://www.linkedin.com/in/bbalfour/" rel="">Brian Balfour</a><span> calls this phenomenon </span><a href="https://www.reforge.com/blog/product-market-fit-collapse" rel="">Product-Market Fit Collapse</a><span>, a fitting term, marking it as the next big shift in tech.</span></p><p><span>Key milestones accelerating this shift:</span><br><span>📅 Nov 30, 2022 – ChatGPT launches</span><br><span>📅 Mar 14, 2023 – GPT-4 released</span><br><span>📅 May 14, 2024 – Google rolls out AI Overviews</span></p><p>❗Disclaimer: I'm simply observing traffic trends from an external perspective and don’t have insight into the exact factors driving them. The timing aligns with AI, but like any business, multiple factors are at play and each case is unique.</p><p><strong><span>→ The data comes from </span><a href="https://semrush.sjv.io/c/4014426/1748444/13053" rel="">SEMRush</a><span>. If you want access to trend reports like the one below, you can </span><a href="https://semrush.sjv.io/c/4014426/1748444/13053" rel="">try it for free</a><span>.</span></strong></p><p><strong>WebMD</strong><span>: Where every symptom leads to cancer</span><em>.</em><span> They're crashing and burning and the timing aligns with major AI releases. If they don’t launch AI agents (like </span><em>yesterday</em><span>), they’re in trouble. That said, they still pull in ~90M visits a month.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png" width="2104" height="870" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:870,&quot;width&quot;:2104,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:140727,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:&quot;https://www.elenaverna.com/i/157990019?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3636a75b-1255-41f2-9059-d2572779f974_2104x870.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F525c47ab-6e38-41c8-940c-751d3f6a72a4_2104x870.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a></figure></div><p><strong>Quora</strong><span>: Once the go-to platform where user-generated questions got a mix of expert insights and absolute nonsense - is struggling. And it’s no surprise. AI now delivers faster, (usually) more reliable answers. Yet, despite the challenges, Quora still pulls in just under</span><em> 1 billion </em><span>visits a month.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png" width="1456" height="602" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/77217e58-fb61-46df-b168-51a1d728136a_2104x870.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:602,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:135782,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://www.elenaverna.com/i/157990019?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F77217e58-fb61-46df-b168-51a1d728136a_2104x870.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><strong>Stack Overflow: </strong><span>The Q&amp;A platform for developers, is now facing seemingly direct competition from ChatGPT, which can generate and debug code instantly. As AI takes over, the community is fading - but they still attract around 200M visits a month.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png" width="1456" height="602" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:602,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:140232,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://www.elenaverna.com/i/157990019?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f5fb2e3-4696-428b-8b4e-04d9b99c29bb_2104x870.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><strong>Chegg</strong><span>: A popular platform for students - now getting schooled by AI. Weirdly, they’re fighting back by </span><a href="https://fortune.com/2025/02/26/chegg-google-ai-lawsuit/" rel="">suing</a><span> Google over AI snippets. Not sure what they expect… Google controls the traffic and that’s the risk of relying on someone else’s distribution.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png" width="1456" height="602" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:602,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:138686,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://www.elenaverna.com/i/157990019?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50576ba6-40fd-4e60-b24a-9cfaa796cc40_2104x870.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><strong>G2:</strong><span> A software review platform, is experiencing huge drop in traffic levels. This one is so rough.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png" width="1456" height="602" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:602,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:135025,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://www.elenaverna.com/i/157990019?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F28222650-dfd2-4678-a6a7-e465995abf99_2104x870.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><strong>CNET</strong><span>: A technology news and reviews website is experiencing 70% traffic drop from 4 years ago. They still pull in </span><em>50 million</em><span> visits per month - an impressive volume - but a steep drop from the 150 million they once had.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png" width="1456" height="602" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:602,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:143177,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://www.elenaverna.com/i/157990019?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F34582bed-a8a4-4b96-ac9d-2ef60406b73c_2104x870.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>Just look at </span><strong>Reddit</strong><span>. Many say they are impacted, but traffic says otherwise - they are CRUSHING it. Probably because people are gravitating toward authentic content and a sense of community. I know I cannot go a day without a Reddit scroll (/r/LinkedInLunatics alone is worth visiting on the daily). And look at the y-axis: their traffic is in the </span><strong>billions</strong><span>!</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png" width="1456" height="602" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:602,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:132005,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://www.elenaverna.com/i/157990019?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8b8557e-368f-40a1-9261-c65d190c0bd3_2104x870.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>And even </span><strong>Wikipedia</strong><span> is managing to stay afloat (although research AI tools will probably hit it pretty hard). Also, over 5B visits a month - consider me impressed. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png" width="1456" height="602" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:602,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:134769,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://www.elenaverna.com/i/157990019?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F779a7e6b-4759-4a3c-86a7-4dec92ef41d2_2104x870.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>And you know who else is growing? </span><strong>Substack</strong><span>. User-generated content FTW.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png" width="1456" height="602" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/db8ad726-8201-42c9-a885-aa345cbed946_2104x870.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:602,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:132690,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://www.elenaverna.com/i/157990019?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdb8ad726-8201-42c9-a885-aa345cbed946_2104x870.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><ul><li><p><span>Tomasz Tunguz: </span><a href="https://tomtunguz.com/chegg-aio/" rel="">What Happened to My Traffic</a></p></li><li><p><span>Brian Balfour: </span><a href="https://www.reforge.com/blog/product-market-fit-collapse" rel="">Product Market Fit Collapse - Why Your Company Could be Next</a></p></li><li><p><span>Mine: </span><a href="https://www.elenaverna.com/p/the-future-of-seo-is-user-generated" rel="">The future of SEO is User Generated Content</a></p></li></ul><p><em><span>Edited by </span><a href="https://www.linkedin.com/in/melissahalim/" rel="">Melissa Halim</a></em></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Write to Escape Your Default Setting (327 pts)]]></title>
            <link>https://kupajo.com/write-to-escape-your-default-setting/</link>
            <guid>43206174</guid>
            <pubDate>Fri, 28 Feb 2025 14:45:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kupajo.com/write-to-escape-your-default-setting/">https://kupajo.com/write-to-escape-your-default-setting/</a>, See on <a href="https://news.ycombinator.com/item?id=43206174">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-node="ch78d0t3zn46">
		<p>For those of us with woefully average gray matter, <a href="https://kupajo.com/eliminate-noise-in-your-mental-bandwidth/">our minds have limited reach</a>. For the past, they are enthusiastic but incompetent archivists. In the present, they reach for <a href="https://kupajo.com/beware-of-black-butterflies/">the most provocative fragments of ideas</a>, often preferring distraction over clarity.</p>
<p>Writing provides scaffolding. Structure for the unstructured, undisciplined mind. It’s a practical tool for thinking more effectively. And sometimes, it’s the best way to truly begin to think at all.</p>
<p>Let’s call your mind’s default setting ‘perpetual approximation mode.’ &nbsp;A business idea, a scrap of gossip, a trivial fact, a romantic interest, a shower argument to reconcile something long past. <a href="https://kupajo.com/grow-inherently-not-apparently/">We spend more time mentally rehearsing activities than actually doing them</a>. You can spend your entire life hopping among these shiny fragments without searching for underlying meaning until tragedy, chaos, or opportunity slaps you into awareness.</p>
<p>Writing forces you to tidy that mental clutter. To articulate things with a level of context and coherence the mind alone can’t achieve. Writing expands your working memory, lets you be more brilliant on paper than you can be in person.</p>
<p>While some of this brilliance comes from enabling us to connect larger and larger ideas, much of it comes from stopping, uh, non-brilliance. Writing reveals what you don’t know, what you can’t see when an idea is only held in your head. <a href="https://kupajo.com/fear-and-loneliness-cause-people-to-act-in-self-contradictory-ways/">Biases, blind spots, and assumptions</a> you can’t grasp internally.</p>
<p>At its best, writing (and reading) can reveal the ugly, uncomfortable, or unrealistic parts of your ideas. It can pluck out parasitic ideas burrowed so deeply that they imperceptibly steer your feelings and beliefs. Sometimes this uprooting will reveal that the lustrous potential of a new idea is a mirage, or that your understanding of someone’s motives was incomplete, maybe projected.</p>
<p>If you’re repeatedly drawn to a thought, feeling, or belief, write it out. Be fast, be sloppy. Just as children ask why, why, why, you can repeat the question “why do I think/feel/believe this?” a few times. What plops onto the paper may surprise you. So too will the headspace that clears from pouring out the canned spaghetti of unconnected thoughts.</p>
<blockquote><p>“Writing about yourself seems to be a lot like sticking a branch into clear river-water and roiling up the muddy bottom.”</p>
<p>~Stephen King, Different Seasons (Book)</p></blockquote>
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[May 5, Microsoft's Skype will shut down for good (108 pts)]]></title>
            <link>https://arstechnica.com/gadgets/2025/02/on-may-5-microsofts-skype-will-shut-down-for-good/</link>
            <guid>43205677</guid>
            <pubDate>Fri, 28 Feb 2025 14:03:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arstechnica.com/gadgets/2025/02/on-may-5-microsofts-skype-will-shut-down-for-good/">https://arstechnica.com/gadgets/2025/02/on-may-5-microsofts-skype-will-shut-down-for-good/</a>, See on <a href="https://news.ycombinator.com/item?id=43205677">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                      
                      
          <p>After more than 21 years, Skype will soon be no more. Last night, some users (including Ars readers) poked around in the latest Skype preview update and noticed as-yet-unsurfaced text that read "Starting in May, Skype will no longer be available. Continue your calls and chats in Teams."</p>
<p>This morning, Microsoft has confirmed to Ars that it's true. May 5, 2025, will mark the end of Skype's long run.</p>
<p>Alongside the verification that the end is nigh, Microsoft shared a bunch of details about how it plans to migrate Skype users over. Starting right away, some Skype users (those in Teams and Skype Insider) will be able to log in to Teams using their Skype credentials. More people will gain that ability over the next few days.</p>
<p>Microsoft claims that users who do this will see their existing contacts and chats from Skype in Teams from the start. Alternatively, users who don't want to do this can export their Skype data—specifically contacts, call history, and chats.</p>

          
                      
                  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Starlink to take over $2.4B contract to overhaul air traffic control comms (128 pts)]]></title>
            <link>https://www.theverge.com/news/620777/starlink-verizon-contract-faa-communication-musk</link>
            <guid>43205435</guid>
            <pubDate>Fri, 28 Feb 2025 13:39:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theverge.com/news/620777/starlink-verizon-contract-faa-communication-musk">https://www.theverge.com/news/620777/starlink-verizon-contract-faa-communication-musk</a>, See on <a href="https://news.ycombinator.com/item?id=43205435">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="zephr-anchor"><p>While Elon Musk <a href="https://www.theverge.com/elon-musk/617427/musk-trump-doge-recession-unemployment">hacks away at the federal bureaucracy</a> in the name of “efficiency,” his company Starlink appears poised to steal a multibillion-dollar government contract from Verizon.</p><p>The Federal Aviation Administration is on the cusp of canceling a $2.4 billion contract to overhaul the communication system for the nation’s air traffic control system and handing it to the SpaceX subsidiary instead, <a href="https://www.washingtonpost.com/business/2025/02/26/musk-starlink-doge-faa-verizon/"><em>The</em> <em>Washington Post</em> reports</a>, citing two unnamed sources briefed on the plans. The news was also <a href="https://www.bloomberg.com/news/articles/2025-02-27/faa-weighs-canceling-verizon-deal-amid-starlink-terminal-tests">confirmed by <em>Bloomberg</em></a> <a href="https://apnews.com/article/elon-musk-starlink-spacex-faa-bbe9495978cac61b60c2971168e2921f">and <em>The Associated Press</em></a>.</p><p>It’s unclear exactly how this would unfold — whether the FAA would hand some of the work to Starlink while allowing Verizon to continue its own effort or simply cancel the contract with Verizon and award it to Starlink. Whatever the outcome, it is sure to raise accusations of favoritism, cronyism, and conflicts of interest, as Musk continues to serve as <a href="https://www.theverge.com/news/619412/doge-acting-administrator-amy-gleason-named">the face of the Department of Government Efficiency-run effort</a> to slash spending and lay off federal workers, despite the structural damage that causes.</p><div><p>It is sure to raise serious accusations of favoritism and conflicts of interest</p></div><p>Musk has been sowing doubt about the Verizon system for several days, <a href="https://x.com/elonmusk/status/1894202642639061144">claiming without evidence</a> that it’s “not working and so is putting air travelers at serious risk.” Earlier today, <a href="https://x.com/elonmusk/status/1895129237478162621">he posted on X</a> that the Verizon communication system is “breaking down very rapidly” and that the “FAA assessment is single digit months to catastrophic failure, putting air traveler safety at serious risk.” He also claimed that Starlink terminals would be provided at “NO COST to the taxpayer on an emergency basis to restore air traffic control connectivity.”</p><p>This, of course, follows a pattern, in which Musk posts on X about something regarding the FAA and then seems to will it into existence. Previously, <a href="https://www.theverge.com/news/603113/faa-chief-musk-dc-plane-crash-crisis">the billionaire called for FAA administrator Michael Whitaker’s resignation</a>, after the agency fined SpaceX for failing to get approval for rocket launch changes. After his repeated comments, Whitaker resigned on the day of Donald Trump’s inauguration.</p><p>A team from SpaceX, Starlink’s parent company, has been <a href="https://www.theverge.com/news/614078/faa-air-traffic-control-spacex-elon-musk-layoff-staff-shortage">working within the FAA in recent weeks</a> to help modernize the agency’s aging technology system. US Department of Transportation Secretary Sean Duffy said they were tasked with developing “a new, better, modern and safer system.”</p><p>Several SpaceX employees now have FAA email addresses, the <em>Post </em>reports. One SpaceX employee posted a photo of the team on X, with the statement, “Working to improve the safety of the national air space system.”</p><p>The FAA was scheduled to make a decision to start paying out the Verizon contract next month. But the SpaceX team reportedly recommended it be awarded to Starlink instead, the <em>Post</em> reports, citing an unnamed source with knowledge of the plans. So far, the formal process of unwinding one contract and awarding it to another company has reportedly not been followed. Several senior FAA officials have refused to sign the contract, leading Musk’s team to seek help from a Trump appointee within the agency.</p><p>Much of Musk’s wealth comes from government largesse. <a href="https://www.washingtonpost.com/technology/interactive/2025/elon-musk-business-government-contracts-funding/">According to the <em>Post</em></a>, his companies have received approximately $38 billion in government contracts, loans, subsidies, and tax credits over the years.</p><p>There have been <a href="https://www.theverge.com/planes/617438/plane-crash-air-safety-faa-layoffs">four commercial aircraft crashes globally</a> in the last 11 weeks, as well as a handful of private plane crashes and several near misses. Meanwhile, the air traffic control system appears to be in chaos, with hundreds of employees cut. Despite air travel being safer than it has ever been before, many people are left with the perception of a global aviation system that’s coming apart at the seams.</p></div></div>]]></description>
        </item>
    </channel>
</rss>