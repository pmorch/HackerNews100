<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Wed, 09 Aug 2023 20:00:12 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Temptations of an open-source Chrome extension developer (201 pts)]]></title>
            <link>https://github.com/extesy/hoverzoom/discussions/670</link>
            <guid>37066680</guid>
            <pubDate>Wed, 09 Aug 2023 18:28:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/extesy/hoverzoom/discussions/670">https://github.com/extesy/hoverzoom/discussions/670</a>, See on <a href="https://news.ycombinator.com/item?id=37066680">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="presentation" data-paste-markdown-skip="">
    <tbody data-target-translation-id="2048184" data-target-translation-type="discussion">
        <tr>
    <td>
        <p dir="auto">Over the years, I have received many proposals to monetize this extension so I think I'll just start posting them here for fun (but not for profit). The main reason I continue to maintain this extension is because I can hardly trust others to not fall for one of these offers. I'm fortunate to have a job that pays well enough to allow me to keep my moral compass and ignore all of these propositions. I realize that not everyone has the same financial security so hopefully this thread would shed some light on what kind of pressure is put on extension developers.</p>
<h3 dir="auto">09/28/2015</h3>
<blockquote>
<p dir="auto">Hope this message finds you well.</p>
<p dir="auto">My name is <em>redacted</em> and I‚Äôm a Strategic Partnerships Manager at <em>redacted</em> - monetization platform for browser extensions.</p>
<p dir="auto">I am contacting you since I came across the extension 'Hover Zoom+' at Chrome Store; I consider your product can help you bring profit by means of collaborating together.</p>
<p dir="auto">I would like to suggest a potential partnership between our companies that will significantly increase your revenues.</p>
<p dir="auto">Are you interested in discussing our offer in more details?</p>
<p dir="auto">Hope for positive feedback and ongoing cooperation.</p>
</blockquote>
<h3 dir="auto">06/17/2015</h3>
<blockquote>
<p dir="auto">Please forgive my persistence, I‚Äôm following up to an email I sent to you last week in regards to your Chrome browser extension.  I am still interested in speaking with you about monetizing your anonymous user data.</p>
<p dir="auto">There are a couple things I want to insure you know.</p>
<p dir="auto">Monetizing anonymous user data is happening on almost every website we visit - you may be leaving alot of money on the table by not monetizing your anonymous user data.  Try dowloading Ghostry to see for yourself.<br>
Affiliate commissions may pay you as much as 20% but is not always scaleable.<br>
Chrome will deactive extenions that violate their ‚Äòsingle purpose‚Äô policy by working with ad injection companies - <em>redacted</em> does not, will not inject ads, but uses anonymous user data to provide more relevant advertising through NAI and IAB approved ad delivery networks.<br>
Top advertisers across all verticals are very interested in targeting high quality intent data derived from browser extensions.</p>
<p dir="auto">Again, if your data is strong, it has the potential to produce a significant new revenue stream for you and your business.  Here is a link to our self-serve Developer Dashboard: <em>redacted</em></p>
<p dir="auto">I‚Äôd be happy to provide additional information should you have any questions.</p>
</blockquote>
<h3 dir="auto">04/26/2016</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em>, I‚Äôm a co-founder and CEO of <em>redacted</em> ‚Äì a Market intelligence service for ecommerce. (like similarweb, only for ecommerce).</p>
<p dir="auto">We are revolutionizing the way ecommerce data is being generated and consumed</p>
<p dir="auto">We are building a user panel of several of millions of users worldwide and are looking for top quality partners with substantial user base to enhance our panel.</p>
<p dir="auto">We are working in a very similar manner to <em>redacted</em>, providing you with an easy to integrate SDK to collect anonymous data.</p>
<p dir="auto">If you are already working with <em>redacted</em>‚Äôs SDK the integration should take no more than a couple of minutes.<br>
There is no collision with any other monetization tool you might be working with today.<br>
Our SDK holds no monetization or any other form of user interaction and it does not interfere with the user experience.</p>
<p dir="auto">It is also important to state that we collect no personal data and only store information relevant for online shopping trends.</p>
<p dir="auto">We can help you monetize your extension in a simple and non-intrusive manner.</p>
<p dir="auto">I would like to discuss potential integration with you and see how we can work together.</p>
<p dir="auto">Will you be available today/tomorrow for a short call to explain things?</p>
</blockquote>
<h3 dir="auto">05/11/2016</h3>
<blockquote>
<p dir="auto">I‚Äôm sure you get business proposals all the time, so I‚Äôll get straight to the point. I hope what I‚Äôm proposing is a little different and might actually interest you. I like Hover Zoom+ as a great alternative to it‚Äôs bigger brother Hover Zoom that lost its glamour over the last couple of months.</p>
<p dir="auto">We're conducting a DNS error research and we‚Äôre interested in small amounts of anonymous data that you might be able to provide via your Chrome extension. Our research has been going on for years and Google has never had the slightest problem with it.</p>
<ul dir="auto">
<li>Compatible with Google‚Äôs strict policies</li>
<li>No personal user data</li>
<li>No ads, no malware</li>
</ul>
<p dir="auto">The data we‚Äôre interested in are basically just DNS errors:</p>
<ol dir="auto">
<li>NXD ‚Äì Non Existent Domain - the domain that a user entered that resulted in a DNS error.</li>
<li>A time stamp ‚Äì when it happened.</li>
<li>GEO ‚Äì where it happened (USA, UK, RU etc.).</li>
<li>A unique randomly generated user ID (can be hashed, not traceable back to the user). Please, don‚Äôt confuse this with the user IP address.</li>
</ol>
<p dir="auto">And that‚Äôs all. You can either use our script or collect the data on your own and send it to us via an FTP server, API etc. There‚Äôs a lot of different ways we can do this. We pay on a monthly basis. The payments depend on user GEOs, but it would be in thousands of dollars per year.</p>
<p dir="auto">Is this worth at least a brief discussion? Looking forward to hearing from you.</p>
</blockquote>
<blockquote>
<p dir="auto">A while back I reached out to you regarding a DNS error research our company conducts. Hover Zoom+ would be an ideal medium for our research. In return, this could become a solid new revenue stream for you.</p>
<p dir="auto">Our method has been going on for years and we‚Äôve never had the slightest problem with Google. We pay regularly on a monthly basis. For you it would be in tens of thousands of dollars per year - the amount depends on your users base and data quality.</p>
<p dir="auto">If you‚Äôre concerned about including third party scripts, there‚Äôs still a lot of ways we can make this work.</p>
<p dir="auto">Please let me know if this is worth a brief discussion to you.</p>
</blockquote>
<h3 dir="auto">05/26/2016</h3>
<blockquote>
<p dir="auto">I'm interested in your chrome extension Hover Zoom+.</p>
<p dir="auto">I want to buy it with the transfer of your google account or without it which means the transfer of the chrome extension in my account.<br>
I propose the price 14 500 $.<br>
We can bargain if your users are active.</p>
</blockquote>
<h3 dir="auto">06/07/2016</h3>
<blockquote>
<p dir="auto">–ú–µ–Ω—è –∑–æ–≤—É—Ç <em>redacted</em>, —è —Ç–µ–±–µ –ø–∏—Å–∞–ª –Ω–∞ Linkedin.com, –Ω–æ —Ä–µ—à–∏–ª –ø—Ä–æ–¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Å—å–º–æ –Ω–∞ –ø–æ—á—Ç—É.<br>
–ö–∞–∫ –≥–æ–≤–æ—Ä–∏–ª, –º—ã –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è —Å–∞–π—Ç–æ–≤ –∏  –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π.<br>
–ù–∞—à —Å–∞–π—Ç <em>redacted</em> - —Ç–∞–º –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞—à–∏—Ö –º–µ—Ç–æ–¥–∞—Ö –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–∞–±–æ—Ç—ã.</p>
<p dir="auto">–¢–≤–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å—é, –Ω–∞ Webstore —É–∂–µ –±–æ–ª—å—à–µ 290k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ —Å —Ç–∞–∫–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∫—Ä—É—Ç–æ–π –¥–æ–ø –∑–∞—Ä–∞–±–æ—Ç–æ–∫. –ï—Å–ª–∏ –Ω–∞ –≤—Å–∫–∏–¥–∫—É, —Ç–æ –º–æ–∂–Ω–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å—É–º–º—É –æ—Ç 2000-3000$ –µ–∂–µ–º–µ—Å—è—á–Ω–æ.</p>
<p dir="auto">–£ –Ω–∞—Å –º–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫ —á—Ç–æ –º—ã —Å–º–æ–∂–µ–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç, —á—Ç–æ –±—ã —Ç–≤–æ–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ –æ—â—É—â–∞–ª–∏ –Ω–∞ —Å–µ–±–µ –∏ –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞–ª–∏ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç.</p>
<p dir="auto">–í –ø–æ–¥–ø–∏—Å–∏ –º–æ–π —Å–∫–∞–π–ø, —Å—Ç—É–∫–Ω–∏ –ø–ª–∏–∑, –∫–∞–∫ –±—É–¥–µ—Ç –≤—Ä–µ–º—è, –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∏–º –±–æ–ª–µ–µ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ.</p>
</blockquote>
<blockquote>
<p dir="auto">–¢—ã –ø–æ–ª—É—á–∏–ª –º–æ–µ –ø–µ—Ä–≤–æ–µ –ø–∏—Å—å–º–æ? –ü—Ä–µ–¥–ª–∞–≥–∞—é –æ–±—Å—É–¥–∏—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –≤ —Å–∫–∞–π–ø–µ.</p>
</blockquote>
<h3 dir="auto">7/29/2016</h3>
<blockquote>
<p dir="auto">I would like to introduce myself. My name is <em>redacted</em> and I work for <em>redacted</em><br>
I'm contacting you today about your extension.</p>
<p dir="auto">We are looking for qualified traffic for our advertisers.</p>
<p dir="auto">Do you have available traffic to sell to us. If so, which are the conditions?</p>
<p dir="auto">We can maybe set a call.</p>
<p dir="auto">Looking forward to your reply.</p>
</blockquote>
<h3 dir="auto">9/6/2016</h3>
<blockquote>
<p dir="auto">I faced with your extension "Hover Zoom+". I know how much effort it took to make this extension. I would like to suggest you the best way how to earn money from your product for your efforts. I would like to offer you the best tools you could implement in your extension. We will help you find the best setup to provide high income without loading users intrusive adware. I'm the right person to help you with this  to do it correctly, harmless to your users ;)</p>
</blockquote>
<h3 dir="auto">9/19/2016</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em>.</p>
<p dir="auto">I faced with your extension in the Chrome Store "Hover Zoom+". Impressed by professionalism and the quality of your product. I want to offer you a cooperation. Our company is engaged in the monetization of applications, toolbars, extensions. No harm to your users.</p>
<p dir="auto">For example, your income for the 10k users will be ~ $ 1000 per month, users 20k ~ $ 2000 per month‚Ä¶ 100–∫ users ~10 000 $, and so on.</p>
<p dir="auto">I would be happy to cooperate.</p>
</blockquote>
<h3 dir="auto">10/5/2016</h3>
<blockquote>
<p dir="auto">We are looking for chrome extension developers that are looking to monetize their projects. I think Hover Zoom might be a good fit.</p>
<p dir="auto">We partner with Yahoo and can offer a search box implementation where you get paid for each click on an ad (after a search from your plugin). Considering the size of your user base, you could conceivably make very good revenue.</p>
<p dir="auto">Please let me know if you have any interest in discussing further. My contact information is below.</p>
</blockquote>
<h3 dir="auto">10/25/2016</h3>
<blockquote>
<p dir="auto">Hi Oleg, nice to meet you, my name is <em>redacted</em>, i'm account manager at <em>redacted</em>. We develop monetization solutions for browser extensions.</p>
<p dir="auto">Are you interested in monetization Hover Zoom+ ? I know you're worried about your users, so, i want to offer you our great solution - coupons, this is top line that helps your users save money, this solution is not aggressive, appears only in online stores. Also, we have many other methods and formats.</p>
<p dir="auto">Easy integration - just add few lines of JS code into your product and you‚Äôll start generate revenue.</p>
<p dir="auto">Please don't hesitate to contact me if you have any further questions, my Skype - <em>redacted</em></p>
</blockquote>
<h3 dir="auto">11/22/2016</h3>
<blockquote>
<p dir="auto">Hope you are doing great.</p>
<p dir="auto">I would like to find some business opportunities we may start with to build our partnership.</p>
<p dir="auto">Our company is a network, basically we work with js monetizations. Working with extensions, toolbars, add-ons and applications.</p>
<p dir="auto">We provide our publishers with great range of monetization types:<br>
smartlinks, smartwords, afflinks, intext, white space banners; pops / popunders,<br>
clickunders; intext, newtab, search injection, coupons; in-page banners; in-image monetization, etc.</p>
<p dir="auto">ARPDAU (Average Revenue Per Daily Active User) basis - In average we have $0.007-0.011/user, US is $0.018.</p>
<p dir="auto">We have plenty of advertisers through out the world, so not limited to any geo.</p>
<p dir="auto">Thank you for your time.<br>
Looking forward to your reply.</p>
</blockquote>
<h3 dir="auto">2/26/2017</h3>
<blockquote>
<p dir="auto">I hope you are doing well.</p>
<p dir="auto">I wanted to propose you an opportunity to monetise users from your extension.Our company is specialised in monetising software downloads and browsers extensions by adding search.</p>
<p dir="auto">We have direct deals with Yahoo, Bing and Google.</p>
<p dir="auto">Let me know if you are interested &amp; add me on Skype.</p>
<p dir="auto">PS:  I‚Äôm user of your product and I like it :)</p>
</blockquote>
<h3 dir="auto">3/29/2017</h3>
<blockquote>
<p dir="auto">I am a representative of the company <em>redacted</em>., Which is a leader in monetizing browser extensions.</p>
<p dir="auto">Currently <em>redacted</em>- the most advanced and profitable platform for profitable cooperation.</p>
<p dir="auto">Based on the above we want to make you a better offer for collaborating.</p>
<p dir="auto">We offer more than 10 types of monetization, each of which has confirmed unique effectiveness.</p>
<p dir="auto">Depending on your needs, we provide several methods of monetizating- from the soft to the hard methods. Be sure No negative experiences from users - Only appropriate and clear advertising. In addition, by providing an individual approach, we take into account the wishes of each partner.Please, take the most note that, our system didn't conflict with other systems, so you can easily earn extra income.</p>
<p dir="auto">Why cooperate with us is profitable:</p>
<p dir="auto">Without the slightest effort you can give yourself a high revenue.</p>
<p dir="auto">Payments are carried out on request. No delays and no minimum amount.</p>
<p dir="auto">Select a payment system that is preferable for you.</p>
<p dir="auto">Lightweight and easy to use interface will provide full comfort for webmasters.</p>
<p dir="auto">Responsive support service instantly answer all the questions that interest you.</p>
<p dir="auto">The complete absence of restrictions on the GEO.</p>
<p dir="auto">Detailed statistics in real time. Failures and disturbances in the system are excluded.</p>
<p dir="auto">Profitable Refferal Program.</p>
<p dir="auto">In conjuction with <em>redacted</em> your extension "Hover Zoom+" will become a reliable guarantee of maximum profit.</p>
<p dir="auto">High earnings, combined with comfort for users- Now it's really!</p>
<p dir="auto">If you are interested in our offer or have any questions or suggestions, please feel free contact with us. We look forward for collaboration!!!</p>
</blockquote>
<h3 dir="auto">4/11/2017</h3>
<blockquote>
<p dir="auto">Hello! My name is <em>redacted</em> and I work with users traffic monetization, as well as browser extensions.<br>
I looked up your extension, and I would like to invite you to work with our company. I analyzed that the expansion of "Hover Zoom+" can give you a guaranteed high profit without affecting the user UX. We offer more than 10 types of monetization, and our system optimizes traffic from all over the world.<br>
Please, let me know any your decision or contact me to discuss all details.</p>
</blockquote>
<h3 dir="auto">5/4/2017</h3>
<blockquote>
<p dir="auto">I'm <em>redacted</em>, regional manager of <em>redacted</em> advertisement network.</p>
<p dir="auto"><em>redacted</em> is PopUnder ad network operating since 2015.  We are currently offering your extension/plugin a private deal with advanced payments for CPM / impressions, and we are ready to discuss the prices so that our offer could be more profitable for you.</p>
<p dir="auto">PopUnder is different from PopUp and other types of online ads. PopUnder opens in a new tab/window in one click. The ad appears as a separate tab or window behind the main browser window (that is why it‚Äôs called PopUnder) and doesn‚Äôt have a negative impact on the user‚Äôs perception of the website and user experience. PopUnder doesn‚Äôt distract the user from your website. All technical settings (number of clicks, time etc) are open to discussion.</p>
<p dir="auto">Just to see how PopUnder operates you can try our demo: <em>redacted</em>.</p>
<p dir="auto">Advertisements correspond with your target audience so that you monetize your site to the fullest extent. You will decide how often PopUnder ads  will appear. The ads can be moderated and you can disable or remove any kind of advertisement you dislike.</p>
<p dir="auto">Our ads are currently running on: <em>redacted</em></p>
<p dir="auto">Our platform comprises 3000+ advertisers.</p>
<p dir="auto">The main ad categories are e-commerce (online shopping), software, gaming.</p>
<p dir="auto">Please download our presentation: <em>redacted</em></p>
<p dir="auto">I am always ready to answer any questions and receive other feedback on our cooperation via email <em>redacted</em> or Skype ‚Äì<em>redacted</em>.</p>
</blockquote>
<h3 dir="auto">5/16/2017</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em>. I'm trying to find the developer that owns the extension, Hover Zoom. If you're the owner of this Chrome extension, I would like to discuss if you would be open to selling your add on? Would you be available call or a Skype chat this week? My details are below.</p>
<p dir="auto">Looking forward to your feedback.</p>
</blockquote>
<blockquote>
<p dir="auto">This is a follow up to my previous email.</p>
<p dir="auto">Did you have time to review my proposal? I will be happy to give you a price estimation.</p>
<p dir="auto">We also have monetization solutions if you are not interested in selling your extension.</p>
<p dir="auto">Looking forward to your reply!</p>
</blockquote>
<h3 dir="auto">6/8/2017</h3>
<blockquote>
<p dir="auto">Nadia here from <em>redacted</em>, nice e-meeting you.</p>
<p dir="auto">I am getting in touch as we are interested in buying your Hover Zoom+ Chrome extension. If you would be open discussing this, could you please let me know what would be your price and share stats such as the DAU and the geo distribution of your users?</p>
<p dir="auto">If you are not interested in selling, I am keen to discuss other business opportunities. Are you available this Thursday 3pm for a call/chat?</p>
<p dir="auto">Looking forward to your feedback.</p>
</blockquote>
<h3 dir="auto">7/4/2017</h3>
<blockquote>
<p dir="auto">First of all, i really appreciate your work you have done with hoverzoom+, its a nice tool.<br>
The thing is, i work for a german company that buys promissing chrome extensions.</p>
<p dir="auto">Now i can make you an offer if you are interested in selling your extension. If you are interested just let me know and we can talk about details, if you are not interested its no problem either, just thought that you would deserve some money for your work.</p>
<p dir="auto">Looking forward to hearing from you.</p>
</blockquote>
<h3 dir="auto">8/28/2017</h3>
<blockquote>
<p dir="auto">I wanted to reach out and see who you are working with to monetize your<br>
Chrome Extension.</p>
<p dir="auto">My company <em>redacted</em> is a Yahoo syndication partner  and we were interested in learning more<br>
about your extension and search traffic to see if working together might be a good idea.</p>
<p dir="auto">Please let me know.</p>
</blockquote>
<h3 dir="auto">8/30/2017</h3>
<blockquote>
<p dir="auto">I am interested in acquiring your extension "Hover Zoom+".</p>
<p dir="auto">Please ping me on skype:  <em>redacted</em></p>
<p dir="auto">Or we can monetize it</p>
</blockquote>
<h3 dir="auto">10/12/2017</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em>, I'm from the <em>redacted</em> team <em>redacted</em> - monetization platform for browser extensions.<br>
We are one of the best platforms for monetizing browser extensions.</p>
<p dir="auto">I was highly impressed both by the  professionalism &amp; quality of your product "Hover Zoom",and I have  interesting proposal for monetizing your extension.<br>
I'm not suggesting that you insert annoying ads into your extension, I'm talking about invisible monetization methods that will not harm your users.</p>
<p dir="auto">contact me via Skype, for  more detailed conversation, my contacts are below.</p>
<p dir="auto">Looking forward to hearing back from you.</p>
</blockquote>
<h3 dir="auto">10/12/2017</h3>
<blockquote>
<p dir="auto">my name is <em>redacted</em> and I work at <em>redacted</em>.<br>
I noticed your extension Hover Zoom+ , and I would like to ask if you may wanna sell it ?</p>
<p dir="auto">Let me know if your interested, you can also add me on Skype (signature) to discuss more.</p>
</blockquote>
<h3 dir="auto">10/16/2017</h3>
<blockquote>
<p dir="auto">I use Hover Zoom+ and found your info via GitHub. My firm, <em>redacted</em>, was founded by former Microsoft engineers and is a leading venture backed competitive intelligence service that provides insights to clients such as Proctor and Gamble, TurboTax and Geico. We're not an ad network, ad exchange, malware etc. In short, we're nerds who love to surf and happen to write awesome software <g-emoji alias="sunglasses" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png">üòé</g-emoji></p>
<p dir="auto">We're interested in exploring partnership opportunities with select Chrome extension developers and were really impressed by the positive ratings (810!) you received from your users. Our partners have gained access to a new and simple revenue stream without interfering with your user experience or gathering PII. We consider partners and their users to be long term strategic relationships.  In some instances, we've also acquired extensions where it made sense for both sides.</p>
<p dir="auto">I'd love to have an informal chat and learn more about your work on Hover Zoom+. Do you have a few minutes late Wednesday or Thursday PDT?</p>
</blockquote>
<blockquote>
<p dir="auto">Just a friendly follow-up. My CEO is quite keen to speak to you -  do you have a few minutes to connect Thursday or Friday?</p>
</blockquote>
<h3 dir="auto">10/30/2017</h3>
<blockquote>
<p dir="auto">–ü—Ä–∏–≤–µ—Ç!</p>
<p dir="auto">–Ø –∞–∫–∫–∞—É–Ω—Ç –º–µ–Ω–µ–¥–∂–µ—Ä –∏–∑ –∫–æ–º–ø–∞–Ω–∏–∏ <em>redacted</em>. –ó–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª–æ –í–∞—à–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ, —è —Ö–æ—Ç–µ–ª–∞ –±—ã –µ–≥–æ –∫—É–ø–∏—Ç—å. –ù–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ, –µ—Å–ª–∏ –í—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ –ø–æ–¥–æ–±–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.</p>
<p dir="auto">–°–ø–∞—Å–∏–±–æ.</p>
</blockquote>
<h3 dir="auto">12/18/2017</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and i am working with users traffic monetization, also browser extensions.</p>
<p dir="auto">I have not  have any problems with your product, but i want to propose you to earn great extra profit from work you have been done.</p>
<p dir="auto">I would like to propose you to work together around monetization of your extension "Hover Zoom+".</p>
<p dir="auto">All of our advertising solutions are Google and MS Compliance and will work perfect!</p>
<p dir="auto">We have lots of them and i am sure that we can find right way to earn for you extra profit not affecting your users UX.</p>
<p dir="auto">Your extension is very popular - more than 297.000 installs - its a great result, really!! And in this case extra profit can be calculated in thousands dollars a month.</p>
<p dir="auto">According to preliminary estimates your profit can start from 5000-6000$ a month and much more with time.</p>
<p dir="auto">Please, let me know any your decision or contact me to discuss all details.</p>
</blockquote>
<h3 dir="auto">1/21/2018</h3>
<blockquote>
<p dir="auto">Love your Chrome Extension!</p>
<p dir="auto">Would you be interested in passing the project on? I'm looking for some fun projects this year and it would be great to build on your work - I was going to make something similar but would be better if I could pickup something with an existing audience.</p>
<p dir="auto">Would consider selling? If so let me know a price range you feel is fair.</p>
</blockquote>
<blockquote>
<p dir="auto">Just bumping this.</p>
</blockquote>
<blockquote>
<p dir="auto">Just bumping this incase you missed it? if not interested let me know</p>
</blockquote>
<blockquote>
<p dir="auto">Would you change your mind $5,000?</p>
</blockquote>
<h3 dir="auto">1/27/2018</h3>
<blockquote>
<p dir="auto">I wrote you some time ago regarding your extension. I am working for a german company that buys chrome extensions.</p>
<p dir="auto">If you are interested in selling just let me know and then we can talk about everything in detail.</p>
<p dir="auto">I am sure that my price range could be interesting for you.<br>
Looking forward to hearing from you.</p>
</blockquote>
<h3 dir="auto">2/13/2018</h3>
<blockquote>
<p dir="auto">Hello, I am interested in this extension <em>link</em><br>
Do you want to sell it? I can give you a good price 2000-3000$ (depend your statistics).<br>
Thank you!</p>
</blockquote>
<h3 dir="auto">3/11/2018</h3>
<blockquote>
<p dir="auto">Hello,<br>
please tell me how can I contact with owner of  "Hover Zoom"  extension? ‚Äå<br>
I would like to purchase this extension</p>
</blockquote>
<h3 dir="auto">3/15/2018</h3>
<blockquote>
<p dir="auto">Would you be interested in selling your extension: Hover Zoom+?</p>
<p dir="auto">I have a good offer, which you might be interested in.</p>
<p dir="auto">Interested?</p>
<p dir="auto">Kindly Respond,</p>
</blockquote>
<blockquote>
<p dir="auto">Hey , Hope you had received our mail, What the best you want to desire from us.</p>
</blockquote>
<blockquote>
<p dir="auto">Hey - Waiting for your response, Could we know what are you waiting for.</p>
</blockquote>
<h3 dir="auto">3/19/2018</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I am working for a german company that is buying chrome extensions. That‚Äôs the reason why I am contacting you because I would like to make you an offer for your chrome extensions.</p>
<p dir="auto">If you are interested in selling just let me know and then we can talk about everything in detail. Maybe my price range could be interesting for you!</p>
<p dir="auto">Looking forward to hearing from you.</p>
</blockquote>
<h3 dir="auto">3/22/2018</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I am working for a german company that buys chrome extensions. That‚Äôs the reason why I am contacting you.</p>
<p dir="auto">I would like to make you an offer for your "Hover Zoom+" extension. If you are interested in selling just let me know and then we can talk about everything in detail.</p>
<p dir="auto">Maybe my price range could be interesting for you.</p>
<p dir="auto">Looking forward to hearing from you.</p>
</blockquote>
<blockquote>
<p dir="auto">Sorry to bother you again but I was wondering if you might be interested in selling your extension?</p>
</blockquote>
<blockquote>
<p dir="auto">Would you may be interested in a cooperation?</p>
</blockquote>
<h3 dir="auto">4/30/2018</h3>
<blockquote>
<p dir="auto">I am contacting you regarding your browser extension (I love the simplicity of it :) ). I think there is an opportunity for a cooperation between us.</p>
<p dir="auto">I‚Äôve developed <em>redacted</em> ‚Äì an extension that lets users support highly effective, research-backed charities while shopping online (with no extra costs). It‚Äôs somewhat similar to Amazon Smile program. It works with 1000+ shops including eBay, Microsoft, Etsy, Barnes&amp;Noble, Aliexpress. For every $4.85 raised for Against Malaria Foundation two people are protected from malaria (via bed nets) and for every $1.19 raised for Schistosomiasis Control Initiative one child gets a year supply of medicine.</p>
<p dir="auto">Would you be interested in placing a recommendation for <em>redacted</em> after user installs your extension? I could pay $1 per new user that comes from your page.</p>
<p dir="auto">That way you can unintrusively monetize your software and help raise money for great causes at the same time.</p>
<p dir="auto">Let me know what you think.</p>
</blockquote>
<h3 dir="auto">5/9/2018</h3>
<blockquote>
<p dir="auto">Hope you are doing great.</p>
<p dir="auto">Short story.<br>
I'm tired of offline business, and exploring new ways of money making on internet.</p>
<p dir="auto">Today I stop my views at the browser extension as the most profitable and undiscovered niches, unfortunately it requires product with audience to start.</p>
<p dir="auto">I'm not a developer but have an extremely wish to check what it is. Basically I found already team who provides monetization solution for ext, and now I'm looking to buy one.</p>
<p dir="auto">I thought perhaps you got mind to sell yours. Let me know what you think.</p>
</blockquote>
<h3 dir="auto">9/17/2018</h3>
<blockquote>
<p dir="auto">We cooperate with the owners of extensions, by integrating into<br>
extensions, thus helping in monetization. For example, we are working with: <em>redacted</em></p>
<p dir="auto">and some other affiliates.</p>
<p dir="auto">Our integration collects data from the sites we need and does not<br>
interfere with the user's work, does not upload anything onto their<br>
computer or any other usability.</p>
<p dir="auto">Would you be interested in discussing this with us?</p>
</blockquote>
<h3 dir="auto">11/6/2018</h3>
<blockquote>
<p dir="auto">Good day<br>
We offer easy monetization of your extension (chrome / opera). Give feedback if you‚Äôre interested.</p>
</blockquote>
<h3 dir="auto">11/22/2018</h3>
<blockquote>
<p dir="auto">–î–æ–±—Ä—ã–π –¥–µ–Ω—å!<br>
—è —É–∂–µ –ø–∏—Å–∞–ª –ø–æ –ø–æ–≤–æ–¥—É –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–æ –Ω–µ –ø–æ–ª—É—á–∏–ª –Ω–∏–∫–∞–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ –Ω–µ–º–Ω–æ–≥–æ –æ–≥–æ—Ä—á–∞–µ—Ç. –•–æ—á—É —É —Ç–µ–±—è —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ —É —Ç–µ–±—è –¥–∞–ª—å–Ω–µ–π—à–∏–µ –ø–ª–∞–Ω—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–≤–æ–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è? –ú—ã –º–æ–≥–ª–∏ –±—ã –µ–≥–æ —É —Ç–µ–±—è –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –ø–æ —Ö–æ—Ä–æ—à–µ–π —Ü–µ–Ω–µ. –ß—Ç–æ –¥—É–º–∞–µ—à—å –ø–æ —ç—Ç–æ–º—É –ø–æ–≤–æ–¥—É?</p>
</blockquote>
<h3 dir="auto">12/11/2018</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em>. I came across your Chrome extension in the store. I would like to discuss the possibilities of buying your addon, Hover Zoom+ .</p>
<p dir="auto">Do you happen to know which geos your users are coming from?</p>
<p dir="auto">If you're open to discuss this opportunity, we can have a call or a Skype chat, my details are below.</p>
<p dir="auto">Looking forward to hearing from you.</p>
</blockquote>
<h3 dir="auto">3/21/2019</h3>
<blockquote>
<p dir="auto">I've just come across your extension (Hover Zoom+) - I'd like to add new features and take it on as a project.</p>
<p dir="auto">Would you be interested in selling it?</p>
</blockquote>
<h3 dir="auto">4/16/2019</h3>
<blockquote>
<p dir="auto">We are looking for partners with extensions who are interested in installing our SDK extension for Chrome / Opera / Yandex.</p>
<p dir="auto">Our SDK collects anonymously advertisements displayed to users.</p>
<p dir="auto">Are you interested in the discussion? This can be an additional income for you.<br>
We do not compete with any other monetization, such as search or advertising, we exclusively collect advertising data displayed to users.<br>
All this is compatible and transparent, does not affect the UX speed, surfing speed and user usability.</p>
</blockquote>
<h3 dir="auto">4/27/2019</h3>
<blockquote>
<p dir="auto">I hope you are well.</p>
<p dir="auto">My name is <em>redacted</em>, the marketing manager at <em>redacted</em>. Our company reached out to you with an interest to purchase your add-on Internet-Start couple of months back.</p>
<p dir="auto">We haven't received any reply from your side so I am following up with a hope that you will be willing to discuss our offer.</p>
<p dir="auto">Do you happen to know which geos your users are coming from?</p>
<p dir="auto">If you're open to discuss this opportunity, we can have a call or a Skype chat, my details are below.</p>
<p dir="auto">Looking forward to hearing from you.</p>
</blockquote>
<h3 dir="auto">5/19/2019</h3>
<blockquote>
<p dir="auto">Would you be open to a chat about me acquiring the Hover Zoom+ chrome extension?</p>
</blockquote>
<h3 dir="auto">7/30/2019</h3>
<blockquote>
<p dir="auto">I just came across your wonderful chrome extension and I was wondering if you wanted to sell it.</p>
<p dir="auto">My client is looking to buy extensions like yours.</p>
<p dir="auto">If you are interested please let me know and also tell me the amount you would like for it.</p>
</blockquote>
<h3 dir="auto">8/23/2019</h3>
<blockquote>
<p dir="auto">I'm <em>redacted</em> with <em>redacted</em> and we focus 100% on desktop apps and browsers extensions.<br>
We're one of the top utility extension providers and we're successfully powering monetization for many extensions in Chrome Web Store today.</p>
<p dir="auto">We're helping developers like yourself optimize their apps and grow additional revenue.<br>
I see you have a great extension product and would love to work with you on further monetizing your userbase while maintaining and enriching their overall user experience.<br>
I'm happy to provide additional information or schedule a quick call.<br>
When are you available to talk?</p>
</blockquote>
<h3 dir="auto">10/7/2019</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em>, and I'm a Senior Marketing Officer at <em>redacted</em> . I would like to discuss cooperation between our companies because I believe that it will be beneficial for both sides involved.<br>
We are interested in expanding our brand and achieving greater popularity for it. I know that your chrome extension is very popular in the chrome store and we would like to order advertising in it.<br>
Thus, it will be beneficial for both parties: you get a high profit, and we reach our goal and earn a name in the market. I am sure that you will be interested in this and I will be glad to answer any questions and discuss everything in detail.</p>
</blockquote>
<h3 dir="auto">12/3/2019</h3>
<blockquote>
<p dir="auto">I‚Äôm looking to speak with someone on your team about a strategic opportunity whereby we partner with you to distribute our <em>redacted</em> coupon/cashback browser extension on your extensions post install thank you page. We would pay you per install.</p>
<p dir="auto">Who from your team would be the best person to discuss this with?</p>
</blockquote>
<h3 dir="auto">2/26/2020</h3>
<blockquote>
<p dir="auto">I found you through the Chrome store and I'd like to know if you're interested in selling your Chrome extension or any other ones you may have.</p>
<p dir="auto">If not, perhaps we can help you earn more from your user base. We specialize in monetization while maintaining a positive user experience.</p>
<p dir="auto">Additionally, if you know of anyone else looking to sell or monetize, we do have an attractive referral program.</p>
<p dir="auto">Looking forward to hearing from you!</p>
</blockquote>
<h3 dir="auto">4/3/2020</h3>
<blockquote>
<p dir="auto">I‚Äôm reaching out to see if you'd be interested in adding Hover Zoom+ to our analytics platform in exchange for $2000/mo. We collect basic data from extensions including GEO, total daily/monthly active users, and categorizing users by interest. If you're interested, please register here: <em>redacted</em></p>
</blockquote>
<h3 dir="auto">4/27/2020</h3>
<blockquote>
<p dir="auto">I came across your extension on the Google chrome store and wanted to reach out to you to offer a way to increase revenue earnings from your extension.</p>
<p dir="auto">We currently have a search lander from Bing that pays really well on extensions for search.</p>
<p dir="auto">It can earn up to $100 per 1000 searches in the US, and it a premium product only offered by invitation only.</p>
<p dir="auto">Is this something you would be interested in as we can get you earning extra revenue straight away with this product as the potential for earnings is massive!</p>
<p dir="auto">I look forward to your reply as we can always get on a call to discuss this further if you wish</p>
</blockquote>
<h3 dir="auto">5/3/2020</h3>
<blockquote>
<p dir="auto">I‚Äôm reaching out to see if you'd be interested in adding "Hover Zoom+" to our <em>redacted</em> analytics platform in exchange for $2000/mo.</p>
<p dir="auto">We are a funded analytic company that collects basic data from extensions while maintaining user anonymity (GEO, total daily/monthly active users, and other data points).<br>
We already have on-boarded partners and would like to have you on-board.</p>
<p dir="auto">Here are our rates and terms: <em>redacted</em></p>
<p dir="auto">We pay every 1st of the month and the rates are guaranteed.</p>
<p dir="auto">If you're interested, please register here: <em>redacted</em></p>
<p dir="auto">I would be happy to discuss this over the phone if you'd like (We are based in NY).<br>
Please let me know if you have any questions.</p>
</blockquote>
<h3 dir="auto">5/11/2020</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I am a representative of a venture capital company called <em>redacted</em>. Our portfolio consists of chrome extensions, apps and other software related products.</p>
<p dir="auto">Since your extension matches with our portfolio requirements I would like to make you an offer for it. My price range will be pretty interesting for you.</p>
<p dir="auto">Happy to discuss the further procedure with you. In case you require more information please feel free to reach out to me at anytime.</p>
<p dir="auto">Looking forward to hearing from you!</p>
</blockquote>
<h3 dir="auto">5/20/2020</h3>
<blockquote>
<p dir="auto">I hope you are having a pleasant day.</p>
<p dir="auto">I‚Äôm writing to you as I‚Äôve come across your Google Chrome extension and it caught my interest.</p>
<p dir="auto">We are <em>redacted</em>, a company that is interested in purchasing data from extensions‚Äô owners/developers like yourself.</p>
<p dir="auto">If this is something you are open to, I‚Äôll be looking forward to your reply so we can discuss this further.</p>
</blockquote>
<h3 dir="auto">5/27/2020</h3>
<blockquote>
<p dir="auto">We monetize search traffic. Your extension is great for this and i would like to see you among our partners.</p>
<p dir="auto">Here is a little information about how much money you can earn working with us.</p>
<p dir="auto">Your audience is 300,000 users<br>
On average, 1 person makes 1 search query per day.<br>
For 1 thousand searches on average you will receive $ 30 per day.<br>
Your real profit per day will be $ 9000.</p>
<p dir="auto">What is necessary for this? 8 lines of code in the manifest of your extension.</p>
<p dir="auto">I will be glad to see you among our partners.</p>
</blockquote>
<h3 dir="auto">6/8/2020</h3>
<blockquote>
<p dir="auto">I‚Äôm reaching out to see if you'd be interested in adding your<br>
extension Hover Zoom+ to our <em>redacted</em> analytics<br>
platform in exchange for $2000/mo. We pay every 1st of the month and<br>
the rates are guaranteed.</p>
<p dir="auto">We are a funded analytic company collecting basic data from extensions<br>
while maintaining user anonymity (GEO, total daily/monthly active<br>
users, and other data points). We already have on-boarded 127 partners<br>
and would like to have you on-board too.</p>
<p dir="auto">Here are our rates and terms: <em>redacted</em></p>
<p dir="auto">If you're interested in joining, we'll create an account where you'll<br>
be able to download and install our script on your extension. No<br>
additional permissions required as your extension fills all the<br>
requirements.</p>
<p dir="auto">I would be happy to discuss this over the phone (We are based in NY).<br>
Please let me know if you have any questions.</p>
</blockquote>
<h3 dir="auto">6/15/2020</h3>
<blockquote>
<p dir="auto">Are you open to selling your chrome extension Hover Zoom+ for a side project that I want to start? Please let me know.</p>
</blockquote>
<h3 dir="auto">6/29/2020</h3>
<blockquote>
<p dir="auto">I‚Äôm reaching out to see if you'd be interested in adding your extension to our analytics platform in exchange for $2000/mo. We pay on the 1st of every month and the rate offered is guaranteed.</p>
<p dir="auto">We are a funded analytics company collecting basic data from extensions<br>
while maintaining user anonymity including GEO countries, daily and monthly active<br>
users. We already on-boarded 127 partners and would love to have you on-board too.</p>
<p dir="auto">To get started, please register here: <em>redacted</em></p>
<p dir="auto">No additional permissions required as your extension fills all the requirements. Once registration is completed, let me know so we can proceed with the on-boarding process.</p>
<p dir="auto">I'd also be happy to discuss this over the phone (we're based in NY). Please let me know if you have any questions.</p>
</blockquote>
<h3 dir="auto">7/7/2020</h3>
<blockquote>
<p dir="auto">I came across your extension on the Google chrome store and wanted to reach out to you to offer a way to increase revenue earnings from your extension.</p>
<p dir="auto">We can offer the Bing.com search engine for your extension, for which you will be paid for every search made.</p>
<p dir="auto">If your extension does not have search on it this is not a problem with a simple update this can be added, furthermore it is completely acceptable by google chrome store.</p>
<p dir="auto">It can earn up to $50 per 1000 users a day, this is a premium product offered by Bing on invitation only.</p>
<p dir="auto">Is this something you would be interested in as we can get you earning extra revenue straight away with this product as the potential for earnings is massive!</p>
<p dir="auto">I look forward to your reply as we can always get on a call to discuss this further if you wish</p>
</blockquote>
<h3 dir="auto">7/16/2020</h3>
<blockquote>
<p dir="auto">I came across Hover Zoom+ on the Chrome Web Store and thought it may be a good fit to add to our portfolio. If you're interested in selling your chrome extension, please complete the form on <em>redacted</em> and I'll get back to you with an offer.</p>
</blockquote>
<h3 dir="auto">7/23/2020</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I represent <em>redacted</em>, it's nice to e-meet you!</p>
<p dir="auto">I just wanted to reach out and see if there are possible partnership opportunities between our companies. We wanted to monetize your extension traffic.</p>
<p dir="auto">Can you please refer me to the right person in your company who handles those types of inquiries?</p>
</blockquote>
<blockquote>
<p dir="auto">How are you?</p>
<p dir="auto">Just wanted to follow up on my previous email.</p>
<p dir="auto">We are currently serving dozens of enterprise advertisers and I'd like to see if we can help you monetize traffic. We are mainly looking for search traffic.</p>
<p dir="auto">Please let me know if we can discuss further.</p>
</blockquote>
<h3 dir="auto">8/15/2020</h3>
<blockquote>
<p dir="auto">I came across your extension on the Google chrome store and wanted to reach out to you to offer a way to increase revenue earnings from your extension.</p>
<p dir="auto">We are providing our partners with a Bing lander that pays really well on extensions for search. It can earn up to $1000 a month per 5000 users, and it is a premium product by invitation only.</p>
<p dir="auto">If your extension does not have search this is not a problem with a simple update this can be added, furthermore it is completely acceptable by google chrome store.</p>
<p dir="auto">If this is something you would be interested in, I would be glad to schedule a call to discuss this with you!</p>
<p dir="auto">I look forward to hearing from you soon.</p>
</blockquote>
<h3 dir="auto">10/7/2020</h3>
<blockquote>
<p dir="auto">I came across your extension on the Google chrome store and wanted to reach out to you to offer a way to increase revenue earnings from your extension.</p>
<p dir="auto">We are providing our partners with Bing/Yahoo landers and feeds that pays really well on extensions for search. It can earn up to $800 a month per 5000 users, and it is a premium product by invitation only.</p>
<p dir="auto">If your extension does not have search this is not a problem with a simple update this can be added, furthermore it is completely acceptable by google chrome store.</p>
<p dir="auto">If this is something you would be interested in, I would be glad to schedule a call to discuss this with you!</p>
<p dir="auto">Also if you are looking to sell your extension we can discuss this opportunity as we buy extensions.</p>
<p dir="auto">I look forward to hearing from you soon.</p>
</blockquote>
<h3 dir="auto">10/12/2020</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I represent a data analytics company called <em>redacted</em>. To give you a better clue our company consists of browser extensions, apps, and other software products.</p>
<p dir="auto">After checking your chrome extension I have noticed that it fits with our portfolio requirements, so if you show any interest I would like to make you an offer for it. The price range I believe will be rather intriguing to you.</p>
<p dir="auto">Always happy to hear back from you. In case you require more information please do not hesitate to contact me anytime!</p>
</blockquote>
<h3 dir="auto">11/12/2020</h3>
<blockquote>
<p dir="auto">I would like to introduce myself - I'm co-founder and CSO of <em>redacted</em>. We are looking for new partners for data partnership. My colleague <em>redacted</em> sent you a request a few days ago.</p>
<p dir="auto">We have a huge experience in data monetization, working with various browser extensions and mobile apps. Our approach is secure and 100% confidential.</p>
<p dir="auto">In case you are already making data monetization and working on exclusive or non-exclusive basis with other companies - we can also solve that and bring you additional revenue.</p>
<p dir="auto">Could we schedule a call or a chat (for example in Telegram or Skype) to briefly discuss our offer?</p>
<p dir="auto">Looking forward to hearing from you!</p>
</blockquote>
<h3 dir="auto">12/4/2020</h3>
<blockquote>
<p dir="auto">I came across Hover Zoom and thought it would be a nice opportunity to introduce ourselves. We are a partner of Microsoft and we provide a monetisation option specifically for extensions on the chrome store. You can earn up to $300 per 100k users daily. Let me know if that's something you would be interested in and we can hop on a call to discuss in more detail.</p>
</blockquote>
<h3 dir="auto">1/25/2021</h3>
<blockquote>
<p dir="auto">We'd love to have <em>redacted</em> sponsor Hover Zoom+ in a similar manner to how we're partnering with Dark Reader. See attached for how that partnership has come to life, but we're honestly super flexible on implementation. We'd essentially love to pay you in exchange for helping us drive users to <em>redacted</em>.</p>
<p dir="auto">Is there someone on your team that we can speak to about this further on how we can partner together?</p>
<p dir="auto">Thank you so much for your time! :)</p>
</blockquote>
<h3 dir="auto">1/25/2021</h3>
<blockquote>
<p dir="auto">I came across your extension on the Google chrome store and wanted to reach out to you to offer a way to increase revenue earnings from your extension.</p>
<p dir="auto">We are providing our partners with Bing landers and feeds that pays really well on extensions for search. It can earn up to $800 a month per 5000 users, and it is a premium product by invitation only.</p>
<p dir="auto">If your extension does not have search this is not a problem with a simple update this can be added, furthermore it is completely acceptable by google chrome store.</p>
<p dir="auto">If this is something you would be interested in, I would be glad to schedule a call to discuss this with you!</p>
<p dir="auto">Also if you are looking to sell your extension we can discuss this opportunity as we buy extensions.</p>
<p dir="auto">I look forward to hearing from you soon.</p>
</blockquote>
<h3 dir="auto">1/28/2021</h3>
<blockquote>
<p dir="auto">We are a digital software company. Our constant and free of charge software is focused on data analysis and consists of numerous different applications. My name is <em>redacted</em> and I wanted to contact you on behalf of <em>redacted</em> in regards to the full acquisition of your browser extension.</p>
<p dir="auto">Although my team and I had the opportunity to review Hover Zoom+ in the Chrome web store, I am keen to know more about your product and especially know more numerical information in order to provide you with an adequate and fair price offer.</p>
<p dir="auto">If this matter interests you would you please respond to this email and we can carry on or if you prefer we can arrange a quick call to discuss further details.</p>
<p dir="auto">In case you have any questions, feel free to contact me anytime!</p>
<p dir="auto">Awaiting your response!</p>
</blockquote>
<blockquote>
<p dir="auto">Hello again,</p>
<p dir="auto">I wanted to follow-up in regards to the email I sent a few weeks ago about acquiring your chrome extension. As it has been a while I wanted to check whether you have given any further consideration to the initial inquiry?</p>
<p dir="auto">I will be more than happy to talk or answer any questions that might have come up.</p>
<p dir="auto">Thanks again for your time!</p>
</blockquote>
<h3 dir="auto">2/17/2021</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I am reaching to you in regards to your extension that I found on the chrome store.</p>
<p dir="auto">We are providing our partners with monetizing through Bing landers and feeds. Currently we are expanding and at this stage of development we are interested in purchasing extensions like yours.</p>
<p dir="auto">If this is something you would be interested in, I would be glad to schedule a call to discuss the details with you.</p>
<p dir="auto">Also if you are not looking to sell your extension alternatively we can discuss monetization opportunities and increase your earnings.</p>
<p dir="auto">I look forward to hearing from you soon.</p>
</blockquote>
<h3 dir="auto">3/4/2021</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I represent <em>redacted</em>, more details about our company are at the website: <em>redacted</em>.</p>
<p dir="auto">We found your extension in Chrome Web Store and see it has big number of installs. Our management would like to discuss purchasing the complete ownership of this extension. May I know if this is the possibility that you are considering? Let us know if we could continue the discussion and we will arrange a closer meeting in Zoom and go through our offer and further details of the purchase.</p>
<p dir="auto">Thanks and awaiting for your feedback.</p>
</blockquote>
<blockquote>
<p dir="auto">This is just a quick follow-up to ask if you have received our previous email and had a chance to review it? If it is of your interest, - could you please send the link to your extension and confirm it has 30+ K users currently?</p>
<p dir="auto">Then our company can consider making a purchasing offer.</p>
<p dir="auto">Look forward to your further feedback. If it is not of your interests, - please kindly click Unsubscribe as below.</p>
</blockquote>
<h3 dir="auto">3/5/2021</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I am reaching to you in regards to your extension that I found on the chrome store.</p>
<p dir="auto">We are providing our partners with monetizing through Bing landers and feeds. Currently we are expanding and at this stage of development we are interested in purchasing extensions like yours.</p>
<p dir="auto">If this is something you would be interested in, I would be glad to schedule a call to discuss the details with you.</p>
<p dir="auto">Also if you are not looking to sell your extension alternatively we can discuss monetization opportunities and increase your earnings.</p>
<p dir="auto">I look forward to hearing from you soon.</p>
</blockquote>
<h3 dir="auto">3/7/2021</h3>
<blockquote>
<p dir="auto">I‚Äôd like to keep this short: We recognized you as a talented Extension Developer and we would like to get in touch with you regarding a potential partnership.</p>
<p dir="auto">We are very interested in acquiring one of your already successful extensions and/or on top offer you a job as head of development. The terms can be discussed we are generally fans of flexible work.</p>
<p dir="auto">Are you available at the moment?</p>
<p dir="auto">I‚Äôd love to talk. Please feel free to reach out to me.</p>
<blockquote>
<p dir="auto">Let me guess: you want to add tracking to my extension to collect information about all users "in an anonymous and privacy-preserving way"?</p>
</blockquote>
<p dir="auto">actually we don‚Äôt really care about tracking data we just want to use the space where usually google would place their ads to place our own consumer-product companies. We don‚Äôt really care about tracking.</p>
</blockquote>
<h3 dir="auto">3/20/2021</h3>
<blockquote>
<p dir="auto">I was wondering if you would be open to a chat about me potentially acquiring Hover Zoom?</p>
</blockquote>
<h3 dir="auto">3/22/2021</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I am reaching to you in regards to your extension that I found on the chrome store.</p>
<p dir="auto">We are providing our partners with monetizing through Bing landers and feeds. Currently we are expanding and at this stage of development we are interested in purchasing extensions like yours.</p>
<p dir="auto">If this is something you would be interested in, I would be glad to schedule a call to discuss the details with you.</p>
<p dir="auto">Also if you are not looking to sell your extension alternatively we can discuss monetization opportunities and increase your earnings.</p>
<p dir="auto">I look forward to hearing from you soon.</p>
</blockquote>
<h3 dir="auto">4/30/2021, 5/10/2021</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I am reaching to you in regards to your extension that I found on the chrome store.</p>
<p dir="auto">Currently we are looking to purchase your extension if you were to consider selling it, we can give you a good and honest evaluation at the market price.</p>
<p dir="auto">If this is something you would be interested in, I would be glad to schedule a call to discuss the details with you.</p>
<p dir="auto">Also if you are not looking to sell your extension alternatively we can discuss monetization opportunities and increase your earnings.</p>
<p dir="auto">I look forward to hearing from you soon.</p>
</blockquote>
<h3 dir="auto">5/12/2021, 5/17/2021, 5/24/2021, 5/31/2021</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em>, I‚Äôm a business development manager  at the <em>redacted</em> company.</p>
<p dir="auto">I am writing to you regarding your extension. We have a monetization solution for such technologies. Shortly, <em>redacted</em> displays store logos in the organic search results, drawing user attention and encouraging him to click. The links labeled with logos redirect to the merchant stores via affiliate links. Every time a user makes a purchase following such links, you receive an affiliate commission.</p>
<p dir="auto">Are you interested in the additional monetization? Let me know <g-emoji alias="blush" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60a.png">üòä</g-emoji></p>
</blockquote>
<blockquote>
<p dir="auto">I am writing to you regarding my proposal. Earlier, I sent an email with information about my company's tool for monetizing an extension. Please tell me, did you receive my letter?</p>
<p dir="auto">Are you interested in additional income?</p>
<p dir="auto">I wanted to share with our tool, maybe it will benefit you</p>
<p dir="auto">Looking forward to hearing from you</p>
</blockquote>
<blockquote>
<p dir="auto">Earlier I tried to contact you. Please tell me, did you receive my letter?</p>
<p dir="auto">If not, I can re-submit important information.</p>
<p dir="auto">I look forward to your reply</p>
</blockquote>
<blockquote>
<p dir="auto">I am writing to you regarding my proposal. Earlier, I sent an email with information about my company's tool for monetizing an extension. Please tell me, did you receive my letter?</p>
<p dir="auto">We‚Äôve created a solution to help you monetize your extension. <em>redacted</em> allows to minimize the administrative burden in the field of affiliate marketing. It displays the logos of advertisers who are our partners in organic search results, which attracts users to choose this store. And when a user makes an order - you get a commission for it.</p>
<p dir="auto">Our tool is quite easy to use -  you just should connect it to your extension, and then it will work automatically.</p>
<p dir="auto">Would you like to know more about our tool?</p>
</blockquote>
<h3 dir="auto">5/27/2021, 6/16/2021, 7/9/2021</h3>
<blockquote>
<p dir="auto">I came across your extension on the Chrome Store and wanted to reach out to you about your extension.</p>
<p dir="auto">Our company buys extensions and are looking to purchase your extension, if you want to sell it we can offer you an evaluation at the market price.</p>
<p dir="auto">If this is something you would be interested in, please reply and we can make you a credible offer and hopefully we will buy your extension.</p>
<p dir="auto">I look forward to hearing from you soon.</p>
</blockquote>
<h3 dir="auto">07/29/2021</h3>
<blockquote>
<p dir="auto">Our company buys extensions and are looking to purchase your extension, if you want to sell it we can offer you an evaluation at the market price.</p>
<p dir="auto">If this is something you would be interested in, please reply and we can make you a credible offer and hopefully we will buy your extension.</p>
<p dir="auto">We have already succesfully bought many extensions, and we use Escrow to make the transaction safe for bath parties.</p>
<p dir="auto">Please contact me if you have any further questions, I will be happy to chat with you.</p>
</blockquote>
<h3 dir="auto">08/04/2021</h3>
<blockquote>
<p dir="auto">Hope this email finds you well.<br>
I am writing regarding browser extension and want to offer a cooperation.<br>
<em>redacted</em> was designed for the purpose to make additional revenue.<br>
With the help of our tool, you will be able to display store logos in the organic search results and convert website links into affiliated ones.</p>
<p dir="auto">If users make a purchase on the store‚Äôs website, you will be rewarded. The layout of the search results page is designed to attract attention to the promoted stores, as users will notice or recognize the logos and will be inclined to click on them.<br>
Does that idea work for you?<br>
Looking forward to your reply.</p>
</blockquote>
<h3 dir="auto">08/12/2021, 08/25/2021</h3>
<blockquote>
<p dir="auto">It‚Äôs <em>redacted</em> from <em>redacted</em>.</p>
<p dir="auto">We're offering top search monetization solutions for organic, human typed-in traffic.<br>
Providing you with our direct premium Bing &amp; Yahoo search feeds that cover a wide range of countries.</p>
<p dir="auto">Partners who monetize audiences from Tier 1 countries generate $40-$90 RPM.<br>
We are looking for partners who own and operate browser extensions. Payment Terms Offer - NET +45 Revshare 80%.</p>
<p dir="auto">Please note: A solid and stable traffic (without ups and downs fluctuations) will lead to improvement on payment terms.</p>
<p dir="auto">Don't hesitate and monetize your extensions today!</p>
<p dir="auto">Any further questions I'd love to schedule a call to discuss things in more detail.</p>
</blockquote>
<blockquote>
<p dir="auto">I'm getting in touch to confirm whether you received my previous letter?<br>
I emailed you on 11/08.</p>
<p dir="auto">Likewise, I have not received any feedback yet, so I wanted to ensure the email is not lost.<br>
Would you please check it?</p>
<p dir="auto">Looking forward to hearing from you.</p>
</blockquote>
<h3 dir="auto">08/18/2021</h3>
<blockquote>
<p dir="auto">Yesterday, on August 17th, the <em>redacted</em> reached an important milestone: the launch of our <em>redacted</em>, and with that the capacity for partners to contribute to an open, fair and privacy-respecting data marketplace.</p>
<p dir="auto">We invite you to check out the event page and learn more about who we are, the tech we‚Äôre using and the ecosystem we‚Äôre building. Interviews with experts from ad tech and blockchain offer a deeper look into the challenges these industries are facing.</p>
<p dir="auto">To celebrate the launch, and to reward early adopters, we are rewarding browser extension developers with $30,000/year for setting up an integration. We provide you with a simple SDK, containing consent mechanisms and the tools to provide data to a future marketplace. You can also learn more about data provisioning with the <em>redacted</em> here.</p>
<p dir="auto">I‚Äôd love to have a quick introductory chat about how we can work together. What do you think?</p>
</blockquote>
<h3 dir="auto">09/08/2021</h3>
<blockquote>
<p dir="auto">I am <em>redacted</em> from <em>redacted</em>, the reason I am reaching out is to show our interest in purchasing your chrome extension Hover Zoom+.  We are currently expanding our company and looking to purchase various extensions like yours to utilize it for our team learning and training purposes.</p>
<p dir="auto">We are offering our clients a good and honest purchase price taking into consideration current market price, extension functionality and the user base.  If you are curious in such offers and would like to find out the market price for your extension, we could discuss this further.</p>
<p dir="auto">Looking forward hearing from you so we can make you an offer.</p>
</blockquote>
<h3 dir="auto">09/15/2021</h3>
<blockquote>
<p dir="auto">I‚Äôm <em>redacted</em>, a business development manager at the <em>redacted</em> company.<br>
I‚Äôm helping owners of browser extension to have more profit<br>
I‚Äôm writing to you concerning your extension, Hover Zoom+.</p>
<p dir="auto">Do you want to get more profit from it? I wanted to share with our tool, maybe it will benefit you<br>
Now we work with about 32 000 partners in more than 70 affiliate networks, and we can connect you to all their offers.</p>
<p dir="auto">Waiting for your answer</p>
</blockquote>
<blockquote>
<p dir="auto">Polite follow up :)<br>
Please, let me know what do you think about my proposal image.gif<br>
Do you want to hear more?</p>
</blockquote>
<blockquote>
<p dir="auto">Our publishers are already preparing for all fall sales (like Black Friday). During this period, users buy the most and the profit of our publishers increases several times. So now is the perfect time to get started :)</p>
<p dir="auto">Would you like to discuss, how you can monetize your extension?<br>
Let's cut to the chase, it is a high time!</p>
</blockquote>
<blockquote>
<p dir="auto">I‚Äôm following up, in case you missed my previous emails.</p>
<p dir="auto">Our tool <em>redacted</em> is packed solution that can be easily be integrated into your extension, and you can start earning money immediately.  We cover all advertiser management, blacklist protection, visual highlighting and affiliate tracking</p>
<p dir="auto">Working with us is absolutely free as our business model is based on revenue share, we take commission from the sales, your part is up to 60%. Are you interested in hearing more about how we can help to monetize?</p>
<p dir="auto">Just hit reply if you are, and we can set up a quick discussion.</p>
</blockquote>
<h3 dir="auto">12/14/2021</h3>
<blockquote>
<p dir="auto">I‚Äôm writing to you regarding your extension Hover Zoom+.<br>
We have a solution for it. You'll be able to highlight search results with logos of 32 000 stores and convert users‚Äô purchases into your own revenue stream<br>
Would it be interesting for you to discuss ?</p>
</blockquote>
<blockquote>
<p dir="auto">Hope you're doing well.<br>
I'd like to know if there was an opportunity to consider my proposal? Perhaps you have questions and I can help you.<br>
If so, I will be happy to answer them. To do this, just contact me</p>
</blockquote>
<blockquote>
<p dir="auto">Polite follow up :)<br>
Please, let me know what do you think about my proposal</p>
</blockquote>
<blockquote>
<p dir="auto">Looks like you are ghosting me. :)<br>
If so, we can call for a ghostbuster, so I can finally get a response from you. Whether your decision is positive or negative, please let me know. I‚Äôd love to receive your feedback.</p>
</blockquote>
<h3 dir="auto">1/11/2022</h3>
<blockquote>
<p dir="auto">I am reaching out in regards to the email a colleague sent about a year ago on acquiring your Chrome extension. Are you still open to selling your Chrome extension for a good price?<br>
If yes then I would like to make you a non-binding offer, but in order to do that, I will need certain information to determine the fair value of your extension.<br>
It would be great if you would share some data from Google Analytics with me like the number of users, the GEOs, and the user activity.<br>
I will be more than happy to get in contact with you.<br>
I'm looking forward to your reply!</p>
</blockquote>
<h3 dir="auto">1/16/2022</h3>
<blockquote>
<p dir="auto">I found your ‚ÄúHover Zoom+‚Äù chrome extension and would love to chat about potentially acquiring it and expanding the feature set.</p>
</blockquote>
<h3 dir="auto">3/24/2022</h3>
<blockquote>
<p dir="auto">Hello, we're looking to partner with you, or, buy from you your web extensions and/or mobile app.<br>
Please contact me back so we can share our proposal.</p>
</blockquote>
<h3 dir="auto">4/20/2022</h3>
<blockquote>
<p dir="auto">I am contacting you again to ask whether you are interested in selling your Chrome Extension or not.<br>
It would be great if you would share some data from Google Analytics with me like the number of users, the GEOs, and the user activity.<br>
I'm looking forward to your reply.<br>
Thanks again for your time!</p>
</blockquote>
<h3 dir="auto">5/1/2022</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em>, I represent <em>redacted</em>: worldwide CPA marketing company<br>
I have tested your Hover Zoom+ Chrome extension, I really like the way it works, so I would like to invite you to cooperate with our company.<br>
Our service is about making 60 000+ shops links -- affiliate. You will get the commission after any purchase of your users.<br>
Our cooperation can elevate your monthly profit without any significant efforts.<br>
If you have any questions, feel free to ask :)</p>
</blockquote>
<h3 dir="auto">6/8/2022</h3>
<blockquote>
<p dir="auto">Hello, we're looking to work with you!<br>
We can partner with you and offer you a monthly passive revenue or we can evaluate buying your extension and/or app.<br>
Please contact me back if your interested and if not, please reply 'not interested'.</p>
</blockquote>
<h3 dir="auto">6/14/2022</h3>
<blockquote>
<p dir="auto">I am <em>redacted</em> from <em>redacted</em> store and wanted to reach out to you to offer a way to increase revenue earnings from your extension Hover Zoom+.</p>
<p dir="auto">We are providing our partners with Bing feeds that pays well on extensions for search. It can earn up to $1000 a month per 5000 users, it is a premium product from Bing by invitation only.</p>
<p dir="auto">If your extension does not have search this is not a problem with a simple update this can be added, furthermore it is completely acceptable by google chrome store.</p>
<p dir="auto">Any questions please reply I am here ready to help you monetize your extension.</p>
</blockquote>
<blockquote>
<p dir="auto">I am <em>redacted</em> from <em>redacted</em> store. I emailed you last week and just wanted to follow up about the monetization of your extension Hover Zoom+ using our Premium Bing Hosted Product.</p>
<p dir="auto">If you decide to go ahead with this opportunity, you can earn up to $1000 a month per 5000 users as it is a premium product from Bing by invitation only.</p>
<p dir="auto">If you are in the process of reviewing or signing an agreement with us, please return as soon as you can, as you don't want to miss out on this great opportunity with Bing.</p>
<p dir="auto">I'm happy to answer any questions you may have and look forward to hearing from you soon.</p>
</blockquote>
<blockquote>
<p dir="auto">I am <em>redacted</em> from <em>redacted</em> and wanted to reach out to you to offer a way to increase revenue from your Chrome extension Hover Zoom+.  It is a premium product from Bing by invitation only.</p>
<p dir="auto">We are providing an opportunity to add a search function to your extension. Bing highly monetise searches made through them. In your case, with 300K+ users, you could earn $1,200.00 per day, and we don't want you to miss out on such an opportunity.</p>
<p dir="auto">If your extension does not have search this is not a problem with a simple update this can be added, furthermore it is completely acceptable by google chrome store.</p>
<p dir="auto">Any questions I am happy to help.</p>
</blockquote>
<h3 dir="auto">7/8/2022</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em> and I am a representative of <em>redacted</em>.<br>
Previously, you communicated with <em>redacted</em>. Now I am in charge of all <em>redacted</em>'s deals.<br>
Can you tell me where you ended up?<br>
Our tool automatically monetizes 32.000 advertisers from user searches in the search engines they use while having your extension installed. It's not a feed, it's a monetization of organic search results. I am sure that our tool will help you increase your income.<br>
Would you be available for a quick call? You can select a time at the link.<br>
I  look forward to hearing from you!</p>
</blockquote>
<h3 dir="auto">7/13/2022</h3>
<blockquote>
<p dir="auto">Hi there, we're looking to partner with or buy extensions &amp; mobile apps such as yours.<br>
Please contact me back so we can share our proposal.</p>
</blockquote>
<h3 dir="auto">7/27/2022</h3>
<blockquote>
<p dir="auto">Hope you are doing well.</p>
<p dir="auto">How would you like to create a new stream of revenue, monetizing your extension Hover Zoom+?</p>
<p dir="auto">If this is something you would like to hear more about please let me know.</p>
</blockquote>
<h3 dir="auto">7/30/2022</h3>
<blockquote>
<p dir="auto">Hey,</p>
<p dir="auto">I have used your extension for a while and I really enjoyed it.</p>
<p dir="auto">I was wondering if you have ever considered the idea of selling it to someone?</p>
</blockquote>
<h3 dir="auto">8/16/2022</h3>
<blockquote>
<p dir="auto">We are a Business Intelligence company (<em>redacted</em>) looking to partner with your product.</p>
<p dir="auto">Please contact me back if interested, and if not, please let us know to remove you from our potential partners list.</p>
</blockquote>
<h3 dir="auto">8/24/2022</h3>
<blockquote>
<p dir="auto">Hello! We are a Business Intelligence company (<em>redacted</em>) looking to buy from you the analytics from your product.</p>
<p dir="auto">Please contact me back if interested, and if not, please let us know to remove you from our potential partners list.</p>
</blockquote>
<h3 dir="auto">08/29/2022</h3>
<blockquote>
<p dir="auto">I am <em>redacted</em> from <em>redacted</em> and wanted to reach out to you to offer a way to increase revenue from your Chrome extension Hover Zoom+ as this is a premium product from Bing by invitation only.</p>
<p dir="auto">We are providing an opportunity to add an online search function to your Chrome extension. Bing highly monetise searches made through them. In your case, with 300K+, you could earn $1,200.00 per day, and we don't want you to miss out on such an opportunity.<br>
If your extension does not have search this is not a problem with a simple update this can be added, furthermore it is completely acceptable by Google Chrome store.</p>
<p dir="auto">We are also offering extension owners an opportunity to sell their extension to us for a good and honest price taking into consideration the current market, the extension functionality and the user base. √Ç If you are curious about such offers and would like to find out the market price for your extension, we could discuss this further.</p>
<p dir="auto">Any questions about either opportunities I am happy to help.</p>
</blockquote>
<blockquote>
<p dir="auto">I am <em>redacted</em> from <em>redacted</em> and wanted to reach out to you to offer a way to increase revenue from your Chrome extension Hover Zoom+ as this is a premium product from Bing by invitation only.</p>
<p dir="auto">We are providing an opportunity to add search to your Chrome extension. Bing highly monetise searches made through them. In your case, with 300K+, you could earn $27,900.00 per month, and we don't want you to miss out on such an opportunity.<br>
If your extension does not have search this is not a problem with a simple update this can be added, furthermore it is completely acceptable by Google Chrome store.</p>
<p dir="auto">Any questions about either opportunities I am happy to help.</p>
</blockquote>
<h3 dir="auto">09/11/2022</h3>
<blockquote>
<p dir="auto">Hello, we are a research &amp; business intel company looking to partner with your product.<br>
A partnership with us can be worth over $10k a month in passive revenue.<br>
Please let us know if you're interested, or if to remove you from our potential partners list (please email me back remove if not interested).<br>
Looking forward to hearing back,<br>
<em>redacted</em></p>
</blockquote>
<h3 dir="auto">09/30/2022</h3>
<blockquote>
<p dir="auto">My name is <em>redacted</em>, I`m Head of Monetization at  <em>redacted</em>.</p>
<p dir="auto">Our Company is a global digital marketing agency offering full-service marketing solutions. We are looking for an additional type-in supply for our top performing search feeds. Lets talk.</p>
</blockquote>
<h3 dir="auto">10/02/2022</h3>
<blockquote>
<p dir="auto">I'm reaching out on the behalf of my company - <em>redacted</em>.</p>
<p dir="auto">I noticed you have your own proprietary extension - Hover Zoom+, and wanted to check with you if it could be in your interest to add an additional revenue source that doesn't conflict with what you currently have.</p>
<p dir="auto"><em>redacted</em> has developed a new data collection technology that can be added to extensions and seamlessly records the users web surfing habits.<br>
Implementation is as basic as it gets - just adding our JS to your extension and it works with Manifest V.3.<br>
If you're concerned about your/your users' privacy - All the data recorded is 100% anonymized and cannot be traced to either the user or the extension itself.</p>
<p dir="auto">Would love to hear from you and set up a call to discuss this further.</p>
</blockquote>
<h3 dir="auto">10/10/2022, 10/19/2022, 10/23/2022, 10/30/2022, 11/06/2022</h3>
<blockquote>
<p dir="auto">I emailed you last week and just wanted to follow up about the monetization of your extension Hover Zoom+ using our Premium Bing Hosted Product.</p>
<p dir="auto">If you decide to go ahead with this opportunity, you can earn up to $500 a month per 1000 users as it is a premium product from Bing by invitation only.</p>
<p dir="auto">If you are in the process of reviewing or signing an agreement with us, please return as soon as you can, as you don't want to miss out on this great opportunity with Bing.</p>
<p dir="auto">I'm happy to answer any questions you may have and look forward to hearing from you soon.</p>
</blockquote>
<h3 dir="auto">10/12/2022</h3>
<blockquote>
<p dir="auto">We are a BI company looking to buy anonymous analytics from your app or extension for our internal use.</p>
<p dir="auto">This is a totally passive revenue opportunity for your product.</p>
<p dir="auto">Please contact me back if interested or forward my email to the relevant person at your organization,</p>
</blockquote>
<h3 dir="auto">10/16/2022, 10/27/2022</h3>
<blockquote>
<p dir="auto">I'm an acquisition manager from <em>redacted</em>, and we are interested in your browser extension</p>
<p dir="auto">I want to discuss with you the opportunity of its purchase. If the price satisfies both of us, we can make a deal through escrow service for your and our security.</p>
<p dir="auto">If you are interested in my proposal, please simply respond to this email to discuss all the details.</p>
<p dir="auto">I am looking forward to hearing from you soon!</p>
</blockquote>
<h3 dir="auto">12/08/2022</h3>
<blockquote>
<p dir="auto">Hello ,i plan to buy your 'Hover Zoom+' extension. Do you want to sell it? . I will give a high price . looking forward to your reply</p>
</blockquote>
<h3 dir="auto">01/10/2023</h3>
<blockquote>
<p dir="auto">Hello<br>
We‚Äôre looking to connect with you in regards to the extension you've built.</p>
<p dir="auto">We buy from extension developers anonymous, non-PII, clickstream.</p>
<p dir="auto">Would you be interested selling to us on a monthly basis? Its very much a passive revenue (not time consuming).</p>
<p dir="auto">Thank you and looking forward to hearing back,<br>
<em>redacted</em>,<br>
Head of Data Partnerships</p>
</blockquote>
<h3 dir="auto">02/08/2023</h3>
<blockquote>
<p dir="auto">Hey,</p>
<p dir="auto">My name is <em>redacted</em> and I'm reaching out to you on behalf of - <em>redacted</em>.</p>
<p dir="auto"><em>redacted</em> can increase your profits without affecting your current ones.<br>
What do we do: We are intermediaries between datasets and our exclusive buying clients.<br>
We have developed a technology that enables us to collect user behavior data from your extensions.<br>
( JS code that can be added to your extension and it works with Manifest V.3)</p>
<p dir="auto">After reviewing your extension "Hover Zoom+" we were impressed by your product and user base.</p>
<p dir="auto">We are positive we can generate additional profits to your current income.</p>
<p dir="auto">We follow the GDPR guidelines and Google's data collection policies.</p>
<p dir="auto">All data recorded is 100% anonymized and does not expose any personal information of the users.</p>
<p dir="auto">The code records the internet surfing habits of the users while referring to clickstream data - browser history.</p>
<p dir="auto">I would like to set up a call and explore our opportunities.</p>
<p dir="auto">Looking forward to hearing from you.</p>
<p dir="auto">Thanks,</p>
</blockquote>
<h3 dir="auto">02/28/2023</h3>
<blockquote>
<p dir="auto">Hi, I will buy Hover Zoom+ Extension</p>
<p dir="auto">If you are interested in selling the extension please answer email.<br>
Google allows chrome extensions to be transferred to any user.</p>
<p dir="auto">My offer is $7,000 ~ $8,000<br>
Payment by PayPal or Escrow<br>
After seeing the stats, I can give you a final offer</p>
<p dir="auto">Have a nice day! ;)</p>
</blockquote>
<h3 dir="auto">03/27/2023</h3>
<blockquote>
<p dir="auto">Hello there,</p>
<p dir="auto">I'm a fan of Hover Zoom+ and I really like how convenient and useful it is.</p>
<p dir="auto">Have you considered offering promotional spots to those interested in promoting their products on your extension? I'm interested in promoting my own extension on Hover Zoom+ and would love to discuss this possibility with you.</p>
<p dir="auto">Let me know if you're open to this.</p>
</blockquote>
<h2 dir="auto">03/29/2023</h2>
<blockquote>
<p dir="auto">Hello, we're currently onboarding new partners.</p>
<p dir="auto">Please let me know if you're interested in monetising with us, we have new opportunities for any product (mobile/web/desktop).</p>
<p dir="auto">(or if now isnt a good time and you'd like us to remove you from our potential partners list).</p>
</blockquote>
<h3 dir="auto">05/10/2023</h3>
<blockquote>
<p dir="auto">I'm <em>redacted</em>, I want to buy your 'Hover Zoom+' chorme extension. Pricing depends on your features as well as your number of users. Don't worry about scams, we can trade through escrow or any broker site you know, as long as it's reputable. If you agree or need another discussion, please reply to my email.</p>
<p dir="auto">Thank you so much for your quick response.</p>
</blockquote>
<h3 dir="auto">05/28/2023</h3>
<blockquote>
<p dir="auto">I hope this email finds you well. My name is <em>redacted</em>, and I represent <em>redacted</em>, a venture capital company specializing in acquiring and managing digital assets. We are currently expanding our portfolio and are actively seeking to acquire high-quality Chrome extensions.</p>
<p dir="auto">During our research, we came across your Chrome extension. Given our expertise in this domain, we believe that integrating it into our portfolio would create significant synergies and unlock its true potential.</p>
<p dir="auto">We would like to explore the possibility of acquiring your extension and continuing its growth under our management. Our company has a proven track record of successfully acquiring and nurturing digital assets, providing them with the necessary resources and expertise to thrive in their respective markets.</p>
<p dir="auto">We understand that selling a project you have invested time and effort into can be a big decision. Therefore, we assure you that we approach acquisitions with the utmost professionalism, transparency, and respect for your work. We aim to create a mutually beneficial arrangement that allows you to benefit financially from your creation while ensuring the continued success and development of your extension app.</p>
<p dir="auto">If you are open to discussing a potential acquisition or would like to learn more about <em>redacted</em> and our acquisition process, I would be delighted to schedule a call or provide you with more detailed information. Feel free to reply to this email, and we can arrange a suitable time for further discussion.</p>
<p dir="auto">Thank you for your time, and we look forward to the possibility of working together.</p>
</blockquote>
<h3 dir="auto">06/28/2023</h3>
<blockquote>
<p dir="auto">Hello! We'd like to suggest you additional extension monetization by adding a search field in your extension:</p>
<ul dir="auto">
<li>
<p dir="auto">A function will be added to your extension that replaces the browser search bar and redirects requests to our search engine.</p>
</li>
<li>
<p dir="auto">You'll get 70% of the revenue from all search queries made by users of your app.</p>
</li>
<li>
<p dir="auto">Income depends on the number of searches made. Approximate numbers are as follows:<br>
US - 1000 requests - $60<br>
UK - $58 and so on.<br>
An extension with 10,000 active users can earn an extra $500+ per month.</p>
</li>
<li>
<p dir="auto">The WHOLE WORLD (WW) is monetized.</p>
</li>
</ul>
<p dir="auto">Benefits of our offer:</p>
<ul dir="auto">
<li>
<p dir="auto">Search queries will go to Google search results, so nothing will change for the user! The only difference is that we, as partners, will be able to profit from searches / clicks on ads and share this profit with you.</p>
</li>
<li>
<p dir="auto">Very easy integration, no need to embed any 3rd party SDK - you are in complete control of your application, all we have to do is search!</p>
</li>
<li>
<p dir="auto">Net45 payouts to any payment system</p>
</li>
<li>
<p dir="auto">100% legal and secure for the end user.</p>
</li>
</ul>
<p dir="auto">Looking forward to your reply!</p>
</blockquote>
<h3 dir="auto">07/12/2023</h3>
<blockquote>
<p dir="auto">I'm a fan of Hover Zoom+ and I really like how convenient it is.</p>
<p dir="auto">Have you considered offering promotional spots to those interested in promoting their products on your extension? I'm interested in promoting my own extension on Hover Zoom+ and would love to discuss this possibility with you.</p>
<p dir="auto">I would appreciate it if you could inform me of your availability for this opportunity.</p>
</blockquote>
<h3 dir="auto">07/13/2023</h3>
<blockquote>
<p dir="auto">I'm a fan of Hover Zoom+ and I really like it.</p>
<p dir="auto">I believe it's possible to take this extension to the next level, but it'll require a significant amount of extra work, which in turn demands a considerable amount of resources.</p>
<p dir="auto">Have you ever consider selling this extension? If Yes, I would like to put forth a proposal to acquire it, with my sincere appreciation for your tremendous work in both its development and marketing.</p>
<p dir="auto">Feel free to let me know if you're open to this.</p>
</blockquote>
<h3 dir="auto">07/25/2023</h3>
<blockquote>
<p dir="auto">Sending a follow-up message to confirm that you received my last email.</p>
</blockquote>
<h3 dir="auto">07/14/2023</h3>
<blockquote>
<p dir="auto">I'm a fan of hover-zoom+ Extension and I really like how fun and engaging it is.</p>
<p dir="auto">Have you considered offering paid promotional to those interested in promoting their products on your extension? I'm interested in promoting my own AI image generation website on your extension and would love to discuss this possibility with you. Our website is over 5M MAU and for both professional people work usage and enthusiast people looking for fun and inspiration. I believe we have lot of user overlap for people who looking for fun stuff.</p>
<p dir="auto">Let me know if you're open to this and looking forward to future cooperation.</p>
</blockquote>
<h3 dir="auto">07/19/2023</h3>
<blockquote>
<p dir="auto">I hope this email finds you well. My name is <em>redacted</em>, and I represent <em>redacted</em>, a venture capital company specializing in acquiring and managing digital assets. We are currently expanding our portfolio and are actively seeking to acquire high-quality Chrome extensions.</p>
<p dir="auto">During our research, we came across your Chrome extension. Given our expertise in this domain, we believe that integrating it into our portfolio would create significant synergies and unlock its true potential.</p>
<p dir="auto">We would like to explore the possibility of acquiring your extension and continuing its growth under our management. Our company has a proven track record of successfully acquiring and nurturing digital assets, providing them with the necessary resources and expertise to thrive in their respective markets.</p>
<p dir="auto">We understand that selling a project you have invested time and effort into can be a big decision. Therefore, we assure you that we approach acquisitions with the utmost professionalism, transparency, and respect for your work. We aim to create a mutually beneficial arrangement that allows you to benefit financially from your creation while ensuring the continued success and development of your extension app.</p>
<p dir="auto">If you are open to discussing a potential acquisition or would like to learn more about <em>redacted</em> and our acquisition process, I would be delighted to schedule a call or provide you with more detailed information. Feel free to reply to this email, and we can arrange a suitable time for further discussion.</p>
<p dir="auto">Thank you for your time, and we look forward to the possibility of working together.</p>
</blockquote>
<h3 dir="auto">08/03/2023</h3>
<blockquote>
<p dir="auto">We buy from web-browser extensions anonymous data-sets for our internal product.</p>
<p dir="auto">Please let me know if you're interested in selling to us your analytics on a monthly basis?</p>
</blockquote>
<h3 dir="auto">08/07/2023</h3>
<blockquote>
<p dir="auto">Is monetisation part of your job functionality?<br>
or perhaps we should approach someone else from the company?<br>
Please let us know who might that be..<br>
We'd love to work together, thank you for your time,</p>
</blockquote>
<h3 dir="auto">08/09/2023</h3>
<blockquote>
<p dir="auto">I hope you're well. I recently mentioned a partnership opportunity with our company.<br>
Just wanted to check if you had a chance to look into <em>redacted</em>.<br>
We offer a partnership where you can earn passive revenue without any PR risks. Our focus is on user privacy, and we only seek 100% anonymized data.<br>
If you're interested in generating additional revenue (up to $20K monthly) from PII-free data, I'd be happy to arrange a call to share the details.<br>
Are you open to discussing this further?<br>
Looking forward to your response.</p>
</blockquote>
    </td>
  </tr>

    </tbody>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The time SUSE, the German Linux company, banned mentioning Jewish holidays (117 pts)]]></title>
            <link>https://lunduke.substack.com/p/the-time-suse-the-german-linux-company</link>
            <guid>37065746</guid>
            <pubDate>Wed, 09 Aug 2023 17:14:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://lunduke.substack.com/p/the-time-suse-the-german-linux-company">https://lunduke.substack.com/p/the-time-suse-the-german-linux-company</a>, See on <a href="https://news.ycombinator.com/item?id=37065746">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><blockquote><p>What follows is a tremendously personal story.  It is 100% true and factual.  I am publishing this in the hopes of bringing about a positive change at a Linux company that I view as historically significant and important ‚Äî both to the broader open source industry and to myself.</p><p>I have kept quiet about this for far, far too long.</p><p><span>Before we start, I want to say that there are some </span><em><strong>amazing</strong></em><span> people who work for SUSE.  Both back when the events of this story take place‚Ä¶ and nowadays.  People who are brilliant, kind, and generally wonderful.  People who were supportive and helpful to me during the events I‚Äôm about to talk about.  To all of you: keep being the good people I know you are.</span></p></blockquote><p>Back in 2013, I joined SUSE ‚Äî specifically the marketing team.</p><p>During my time working for SUSE (the longest running Linux company on Earth) I was ‚Äî without question ‚Äî the most publicly visible person within the company.</p><p><span>Not only did I bring a sizable audience with me when I joined the company, I then: Was elected to the openSUSE Board, represented SUSE at conferences (and in interviews) across the country, and created some of the most </span><a href="https://www.youtube.com/watch?v=SYRlTISvjww" rel="">successful advertising campaigns</a><span> in SUSE (and Linux) history‚Ä¶ my name and personal brand became closely tied to SUSE.  I was widely considered to be the ‚ÄúGo To Guy‚Äù for all things ‚ÄúLinux‚Äù related to SUSE marketing.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg" width="700" height="420" data-attrs="{&quot;src&quot;:&quot;https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:420,&quot;width&quot;:700,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Bryan Lunduke (Author of Linux is Badass)&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="Bryan Lunduke (Author of Linux is Badass)" title="Bryan Lunduke (Author of Linux is Badass)" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F02a26583-e6d7-4bc5-9a51-90b088c06fc0_700x420.jpeg 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption>Me, ‚ÄúMr SUSE‚Äù, surrounded by the SUSE mascot.</figcaption></figure></div><p><span>One thing we regularly did at SUSE‚Ä¶ was to celebrate holidays.  For example, back in 2014 I helped write ‚Äú</span><a href="https://www.suse.com/c/linux-saved-christmas/" rel="">How Linux Saved Christmas</a><span>‚Äù.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png" width="566" height="228" data-attrs="{&quot;src&quot;:&quot;https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:228,&quot;width&quot;:566,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:152392,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fb3e44e5a-0753-4bb3-b614-442f9a67933f_566x228.png 1456w" sizes="100vw"></picture></div></a></figure></div><p><span>I love that stuff.  Celebrating holidays ‚Äî </span><em>all holidays</em><span> ‚Äî and spreading a little joy and cheer from the company (and reminding people how cool Linux is in the process).  So much fun.</span></p><p><span>The one thing we had never done, as a company, is make any mention of any Jewish holiday.  Not once, </span><em><strong>not ever</strong></em><span>.</span></p><p>Well, no big deal.</p><p>Being a Jewish man, I can come up with something easily enough!  So, in 2015, I drafted and published a very small ‚ÄúHappy Hanukkah‚Äù post that went out on SUSE Social Media (which I controlled 100% of for many years).</p><p>It was short, simple, pleasant.</p><p>Immediately after, I received instruction (handed down from the head of Marketing, a few steps above me on the totem pole, at SUSE) to delete the ‚ÄúHappy Hanukkah‚Äù posts.</p><p><span>I was also instructed ‚Äî explicitly ‚Äî to leave all content related to every other holiday (Christmas, etc.) online.  </span><strong>The only holiday that was to be removed was the Jewish one.</strong></p><p>So I did what any good little corporate boy would do‚Ä¶ I deleted the posts that sounded a bit too ‚ÄúJew-y‚Äù.  And left all the other holiday content in place.  As instructed.  Did it make me happy as Jew?  No.  It did not.</p><blockquote><p><span>Fun side note: Within mere </span><em><strong>minutes</strong></em><span> of deleting all of the content that referenced a Jewish holiday‚Ä¶ an email went out to SUSE employees.  Encouraging us all to sing Christmas carols.  At the company office.  Not joking.</span></p></blockquote><p>Right about now you might be thinking to yourself, ‚ÄúSUSE ‚Äî a German company ‚Äî is forbidding the mentioning of Jewish holidays?  That‚Äôs not a good look.‚Äù  And, well, you wouldn‚Äôt be alone in having that thought.</p><p>Obviously I raised a concern about this through the proper channels within SUSE.</p><p>My immediate manager did the right thing‚Ä¶ and raised my concerns up the chain of command.</p><p><strong>That manager was promptly fired</strong><span>.  And, needless to say, the issue was not addressed.</span></p><p>A new manager was hired for my team.  After a short period of time, I brought up the whole ‚ÄúSUSE bans mentioning of Jews‚Äù issue to this manager as well.  And, once again, my manager did the right thing and raised the issue up the chain of command.</p><p><strong>That manager was, also, promptly fired.</strong></p><p>At which point the head of SUSE Marketing ‚Äî who issued the ‚ÄúNo Jewish Holidays‚Äù rule, was given a significant promotion.</p><blockquote><p><span>This is a good moment to mention how </span><em><strong>crazy good</strong></em><span> my performance within SUSE was.  Not only was I the most recognized name and face within the company‚Ä¶ I was personally responsible for starting, writing, and driving some of the most successful campaigns in SUSE history.  SUSE‚Äôs financial results reflect my insanely good performance.  Literally off the chart.</span></p></blockquote><p>So, what happened next?  I was reprimanded and moved off my team.  Then denied a promised pay raise.  At which point multiple false statements (provably so) were made about me internally by upper management.</p><p>In short:</p><p><strong>The Jew that raised concerns about the German Linux company discriminating against Jews?  Punished.  Significantly.  And any manager that inquired about the discrimination was quickly fired.</strong></p><p>I stayed with the company.  I wanted to make it work.</p><p>So I raised the issue again.  To everyone in the chain of command ‚Äî all the way up to the CEO.</p><p><span>To my delight, investigation was started.  Huzzah!  </span><em><strong>An investigation!  </strong></em><span>With how extensively everything was documented, surely this would help resolve the issue!</span></p><p><span>After the investigation drug on for what seemed like an eternity, I was eventually informed that no discrimination, </span><em>of any kind</em><span>, had occurred.</span></p><p><em><strong>Say, what now?!</strong></em></p><p>The evidence of discrimination was overwhelming.  The documentation (including emails detailing everything) was extensive and verifiable.  In fact, SUSE never (not once) disagreed with any of the facts‚Ä¶ they simply didn‚Äôt think what they did was wrong.  (Even though it is under both US and German law.)</p><p>Obviously, I asked to see the results of the investigation ‚Äî because, clearly, something was wrong here.  Something shady was happening.  I was told, point blank, that I would not be shown any notes or information from the investigation.  Period.  No exceptions.</p><p>No apology for discriminating against Jews.  Nor for discriminating against, and punishing, me.  Nobody that committed (the well documented) discrimination was disciplined in any way (in fact, they were promoted and praised).</p><p>I was told that I simply needed to be happy about it.</p><p>The annual conference for SUSE is known as SUSECON.</p><p>And me, being the person that controlled all of SUSE social media (and being the most high profile face within the company)‚Ä¶ I kinda needed to be there.</p><p><span>SUSECON was schedule to occur‚Ä¶ during the Jewish High Holy Days (the week between Rosh Hashanah and Yom Kippur).  With the closing event occurring on Yom Kippur‚Ä¶ the holiest day of the year.  A day when Jews absolutely </span><em><strong>do not work</strong></em><span>.</span></p><p>The management of SUSE knew all of this.  I know they knew all this‚Ä¶ because we had talked about it many times.</p><p>And they certainly knew I was Jewish (see this entire article up until now).</p><p>There are two possibilities here:</p><ol><li><p>This was done on purpose, with malice, directed at me and the other Jewish employees of SUSE.</p></li><li><p>This was done with profound disregard for Jewish employees of SUSE.</p></li></ol><p>Those are the only two options.  Because I also know that many other dates were on the table that worked better.</p><p>Think about this for a moment‚Ä¶</p><blockquote><p>What if SUSECON had been scheduled on Christmas morning?</p><p>What if a devout Christian was told to delete ALL content that mentioned Christmas‚Ä¶ but leave all Jewish and Islamic content online (and then even make more of it)?</p><p>What if that Christian raised this as an issue and then was reprimanded, passed over for raises, moved out of his/her team?</p><p>What if every manager of that Christian was fired right after raising the issue internally?</p><p>What if that Christian was told "we looked into it and it's all fine, you're wrong, go back to work... and we won't tell you details of our investigation"...?&nbsp;</p><p>Replace the word "Christian" with "Muslim", "LGBT", etc.  How does that read to you?</p><p>Classic, obvious, well documented, text book discrimination.</p></blockquote><p>What is truly mind-blowing to me: is that SUSE leadership knowingly did all of this‚Ä¶ even though it hurt the company tremendously.</p><p>What does that suggest?  That discriminating against Jews ‚Äî or covering up the fact that some of their employees had done so ‚Äî was more important to SUSE than achieving corporate goals.</p><p>As time went on I began hearing more and more stories like mine.</p><p>Times when SUSE did things (sometimes large, sometimes small) that made Jews within the company feel uncomfortable.  Sometimes far more than simply ‚Äúuncomfortable‚Äù.</p><p>I can‚Äôt speak for those people.  Those stories are theirs to tell.  But I have independently corroborated some of them.  And, should those individuals ever choose to speak out, I will be available to provide supporting documentation and support.</p><p>Despite all of this‚Ä¶ I kept trying to fix things internally.</p><p>I didn‚Äôt speak about the discrimination publicly.  Despite me having a large platform ‚Äî and despite the fact that I, specifically, report on Linux companies‚Ä¶ I kept quiet.  In part out of a sense of loyalty to my friends within the company‚Ä¶ and a genuine affection for the SUSE brand (it is the oldest Linux company, after all).</p><p><span>After </span><em><strong>years</strong></em><span> of attempting to resolve the issue‚Ä¶ to help SUSE stop discriminating against Jews‚Ä¶ </span></p><p>In 2017, after months of SUSE intimidating me into silence‚Ä¶ including what I perceived as threats from their lawyers, I agreed to leave the company and not talk about these issues publicly.  They made sure I was afraid to tell my story.</p><blockquote><p><span>Just to drive home how high profile I was within the company ‚Äî and how valuable I was for them ‚Äî </span><a href="https://www.prnewswire.com/news-releases/lunduke-makes-return-to-journalism-300554544.html" rel="">SUSE had to issue a press release when I left</a><span>.  That sort of thing is usually only done for departing CEOs.</span></p><p>My coworkers asked me to supply a quote for the press release‚Ä¶ and I did so.  Begrudgingly and under more than a little duress.  A quote that was about as vague as you can get (and certainly did not address the real reason for my departure).</p></blockquote><p><span>Agreeing to not talk about these issues was a profound mistake on my part.  What I should have done is to </span><em>immediately</em><span> (once it was clear that SUSE would not fix their problems) tell the whole world what SUSE did.  And, quite honestly, SUSE should not have pressured me into agreeing to such a thing.  Their actions were deeply unethical.  And cruel.</span></p><p>It is now 2022.  The fifth year since SUSE threatened me into silence and, effectively, forced me out of the company.</p><p>In the years since, SUSE has changed hands and gotten a new CEO.</p><p>After the new CEO was appointed, I reached out to her.  In a kind way, I let her know that I had been forced to leave the company after discrimination against Jews (and a policy of forbidding public discussion of Jews).  And that I wanted her to be aware of the past issues so that she could make sure they don‚Äôt happen to others going forward.</p><p>The new CEO of SUSE responded by blocking me on Twitter.</p><p>Which was weird.</p><blockquote><p>Later, after I called the SUSE CEO on the strangeness of being blocked‚Ä¶ she unblocked me.  Still.  Quite odd.</p></blockquote><p>Why do I bring all of this up now ‚Äî nearly 5 years later?</p><p>Because this last week I spoke to someone at SUSE‚Ä¶ who let me know of similar, current, goings on within the company.  And I want people within SUSE, who may be currently being discriminated against because they are Jewish, to know that they are not alone.  And that if they need help in telling their stories‚Ä¶ I am here.</p><p>I am not a litigious man.  I operate under the simple notion that sunlight is the best disinfectant.</p><p>Would I like an apology?  You bet.  That would be nice (and certainly warranted).</p><p>Do I expect one?  No.  I do not.</p><p>If me publishing my own, personal, story of discrimination simply helps to put a stop to any possible future discrimination of Jews (or anyone else for that matter)?  That‚Äôll be a good result.</p><blockquote><p>‚ÄúAren‚Äôt you afraid that SUSE will come after you, legally, because you told your story of discrimination?‚Äù</p></blockquote><p>Yes.  I am.  Very much so.</p><p>When I was forced out of SUSE, it was made clear to me that they would not allow me to tell other people what they had done.  (Which is funny, considering they also told me that what they had done was not a bad thing‚Ä¶ if their actions are not bad‚Ä¶ why would they not want people to know about it?)</p><p>What I have written here is (part of) my personal story.  If SUSE decides to try to intimidate me further‚Ä¶ it should be noted that I have a great deal of documentation related to SUSE‚Äôs discrimination of me because I am a Jewish man.</p><p><span>My records are </span><strong>extensive</strong><span> and </span><strong>easily verifiable</strong><span>.</span></p><blockquote><p>‚ÄúWhat would you like SUSE to do about all of this?‚Äù</p></blockquote><p>Obviously, a good person (or company) would simply apologize and try to not do the same, discriminatory things going forward.</p><p>Note: I did not name any names in this recounting of my story.  I am not seeking to harm anyone‚Äôs career (even those who sought to harm mine because I am Jewish).  I am not asking for anyone to be punished or fired in any way.</p><p>I tried to work with SUSE for multiple years to fix what they did.  Then I waited for half a decade, after leaving the company, to see some sort of attempt to make up for it.  Not only have I put forth a tremendous amount of (good faith) effort to help SUSE‚Ä¶ I also gave the company many, many years more time than they needed to make amends.</p><p>What would be wonderful: If SUSE wants to reach out to me to help them to make sure they don‚Äôt discriminate against Jews going forward‚Ä¶ I would gladly offer my advice to them and applaud them for taking a positive step forward.</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Maui wildfires are 'apocalyptic' as people jump into the ocean to flee (124 pts)]]></title>
            <link>https://www.cnn.com/2023/08/09/weather/maui-county-wildfires-hurricane-dora/index.html</link>
            <guid>37064922</guid>
            <pubDate>Wed, 09 Aug 2023 16:18:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cnn.com/2023/08/09/weather/maui-county-wildfires-hurricane-dora/index.html">https://www.cnn.com/2023/08/09/weather/maui-county-wildfires-hurricane-dora/index.html</a>, See on <a href="https://news.ycombinator.com/item?id=37064922">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-uri="cms.cnn.com/_components/video-resource/instances/h_b4deaef14022999cf01f21040e2c870e-h_bf36c2cf2fe24388f3d6c39ebf1e7d5e-pageTop@published" data-component-name="video-resource" data-editable="lede" data-video-id="us/2023/08/09/exp-hawaii-wildfire-evacs-lieutenant-governor-luke-interview-080903aseg1-cnni-us.cnn" data-live="" data-analytics-aggregate-events="true" data-custom-experience="" data-asset-type="" data-medium-env="prod" data-autostart="false" data-show-ads="true" data-source="CNN" data-featured-video="true" data-headline="Evacuation orders in parts of Hawaii as wildfires grow" data-description="Evacuations have been ordered on both Maui and the Big Island as wildfires fueled by winds from Hurricane Dora grow. CNN's Rosemary Church discusses the situation with Hawaii's lieutenant governor. " data-duration="03:20" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230809070534-county-of-maui-wildfires.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230809070534-county-of-maui-wildfires.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="" data-freewheel-lede="true">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-a6564d1184216f3f6b707362f27a9f18@published" data-name="County of Maui wildfires" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230809070534-county-of-maui-wildfires.jpg?c=original" data-unselectable="true" id="player-cms.cnn.com/_components/video-resource/instances/h_b4deaef14022999cf01f21040e2c870e-h_bf36c2cf2fe24388f3d6c39ebf1e7d5e-pageTop@published">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230809070534-county-of-maui-wildfires.jpg?c=16x9&amp;q=w_850,c_fill" alt="County of Maui wildfires" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920"></picture>
    </div>
            
            <div>
                <p>Evacuation orders in parts of Hawaii as wildfires grow</p>
                <p><span>
                            03:20
                        </span>
                        <span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p>
            </div>
        </div><div data-editable="content" itemprop="articleBody" data-reorderable="content">
                    <p><cite>
      <span data-editable="location"></span>
      <span data-editable="source">CNN</span>
        &nbsp;‚Äî&nbsp;
    </cite>
</p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_D7F1FC87-642B-F086-6413-DBB35BCE463D@published" data-editable="text" data-component-name="paragraph">
      Wildfires torching the idyllic island of Maui are raging out of control, but the true scope of devastation remains unknown. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_79AC5108-EE03-B0F4-D54F-DBDF9FF5F7E9@published" data-editable="text" data-component-name="paragraph">
      That‚Äôs because the infernos have knocked out cell service, hindered emergency communications and trapped residents and tourists on the island, is home to about<a href="https://www.hvcb.org/school-report/eight-major-islands/" target="_blank"> 117,000</a>.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_1B1E8A35-4DA6-3194-31DE-DBB6A5C8BC9F@published" data-editable="text" data-component-name="paragraph">
      The fires are so catastrophic, some people have hurled themselves into the ocean to escape the flames. And Hawaii‚Äôs governor, who was on a personal trip this week, said he was rushing back to the state Wednesday. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_D9216F53-C6D2-D71C-95E8-DBB9102626D0@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúHeroic efforts by first responders have prevented many casualties from occurring, but some loss of life is expected,‚Äù Gov. Josh Green said in a statement Wednesday.
  </p>

  


  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_85969692-49ED-3F74-2EC1-DBC0BD0F63A8@published" data-editable="text" data-component-name="paragraph">
      But even emergency crews might not be able to help everyone who needs it. The wildfires ‚Äì fueled in part by Hurricane Dora churning some 800 miles away ‚Äì have cut off 911 service and other communications in many parts of Maui.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_82404193-2A2E-7F74-5462-DA42A701AC93@published" data-editable="text" data-component-name="paragraph">
      ‚Äú911 is down. Cell service is down. Phone service is down,‚Äù Hawaii Lt. Gov. Sylvia Luke told CNN on Wednesday morning. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_2E1B85A9-B9A0-5C0F-8824-DA25604418FD@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúOur hospital system on Maui, they are overburdened with burn patients, people suffering from inhalation,‚Äù she said. ‚ÄúThe reality is that we need to fly people out of Maui to give them burn support because Maui hospital cannot do extensive burn treatment.‚Äù
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_5BCE9411-D689-EBD8-0391-DB4D85F523F3@published" data-editable="text" data-component-name="paragraph">
      The disaster also has wiped out power to about 14,000 homes and businesses in Maui, according to <a href="https://poweroutage.us/area/county/5268" target="_blank">PowerOutage.us</a>. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_531E2ABC-5133-8AA2-677E-DAD6834DF052@published" data-editable="text" data-component-name="paragraph">
      Hawaii isn‚Äôt the only US state grappling with devastating wildfires ‚Äì a trend some <a href="https://www.cnn.com/2023/08/07/weather/heat-phoenix-texas-monsoon-drought/index.html" target="_blank">experts had predicted</a> for this season. Parts of Texas are under a critical fire risk Wednesday, a day after a brush fire <a href="http://www.cnn.com/2023/08/09/us/cedar-park-texas-parmer-lane-fire/index.html" target="_blank">engulfed an apartment building</a> in the Austin area. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_7A712E3C-EE2B-5C20-A9A5-DADF54444B7F@published" data-editable="text" data-component-name="paragraph">
      But the crisis unfolding in Maui is extraordinary, Hawaii‚Äôs lieutenant governor said. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_BBEE5C93-1793-7BBE-EA98-DAE0AEA82346@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúThe fact that we have wildfires in multiple areas as a result of indirectly from a hurricane is unprecedented,‚Äù Luke said. 
  </p>

  

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_12D56AD5-0A6B-5C24-3089-DBC1258201C5@published" data-editable="text" data-component-name="paragraph">
      Alan Dickar just learned one of his rental properties went up in flames when he saw an economic hub of Maui get swallowed by wildfire.
  </p>

<div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/image-491c4350ad285457b75c8499f3552acd@published" data-name="05 hawaii wildfires hurricane dora" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="900" data-original-width="1600" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230809082020-05-hawaii-wildfires-hurricane-dora.jpg?c=original" data-editable="settings">
       <picture><source height="720" width="1280" media="(min-width: 1280px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809082020-05-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill/f_webp" type="image/webp"><source height="540" width="960" media="(min-width: 960px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809082020-05-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_540,w_960,c_fill/f_webp" type="image/webp"><source height="270" width="480" media="(-webkit-min-device-pixel-ratio: 2)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809082020-05-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_270,w_480,c_fill/f_webp" type="image/webp"><img src="https://media.cnn.com/api/v1/images/stellar/prod/230809082020-05-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill" alt="Flames shoot toward the sky Tuesday night at the intersection of Hokiokio Place and Lahaina Bypass in Maui, Hawaii." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="900" width="1600" loading="lazy"></picture>
    </div>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_54C183AB-459C-804F-19D7-DBC551FB9BF2@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúFront Street exploded in flame,‚Äù Dickar told CNN Wednesday.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_07DAB850-FFAE-EF31-0668-DB44985D3409@published" data-editable="text" data-component-name="paragraph">
      Dickar, who has lived in the area for 24 years, said there was little time to flee. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_50658CCB-DDF8-597C-50C9-DB6222B10154@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúI grabbed some people I saw on the street who didn‚Äôt seem to have a good plan. And I had told them, ‚ÄòGet your stuff, get in my truck,‚Äô‚Äù he said. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_262C5967-2227-8A73-FF94-DB4F45636DCA@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúAnd there‚Äôs only one road that leads out of Lahaina, so obviously it was backed up,‚Äù Dickar said. ‚ÄúI dropped everybody else off and then I went to a place in another part of Maui that‚Äôs far away. And as soon as I got there, that whole area had to evacuate because of a totally different fire. ‚Ä¶ Just as I arrived, that whole area got evacuated.‚Äù
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_3F040D62-8F30-0A6C-5EE9-DB4C8D81EAE0@published" data-editable="text" data-component-name="paragraph">
      Dickar eventually fled to a remote part of Maui. ‚ÄúI figured that was enough, and I‚Äôm safe here at least from a fire evacuation because it‚Äôs a rainforest,‚Äù he said. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_712BD72D-4837-1DAA-F861-DA1B2B166DAA@published" data-editable="text" data-component-name="paragraph">
      Clint Hansen took drone video Tuesday night that showed wildfires spreading just north of Kihei.
  </p>

<div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/image-00406e8298434f31e9864302f0977cfc@published" data-name="01 hawaii wildfires hurricane dora" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230809080048-01-hawaii-wildfires-hurricane-dora.jpg?c=original" data-editable="settings">
       <picture><source height="720" width="1280" media="(min-width: 1280px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809080048-01-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill/f_webp" type="image/webp"><source height="540" width="960" media="(min-width: 960px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809080048-01-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_540,w_960,c_fill/f_webp" type="image/webp"><source height="270" width="480" media="(-webkit-min-device-pixel-ratio: 2)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809080048-01-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_270,w_480,c_fill/f_webp" type="image/webp"><img src="https://media.cnn.com/api/v1/images/stellar/prod/230809080048-01-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill" alt="Clint Hansen shot this footage of catastrophic blazes on the island of Maui." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_4D6A93E8-97C1-765F-AE54-DA470C5177B3@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúLahaina has been devastated,‚Äù Hansen told CNN. ‚ÄúPeople jumping in the ocean to escape the flames, being rescued by the Coast Guard. All boat owners are being asked to rescue people. It‚Äôs apocalyptic.‚Äù
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_53FB36EB-5086-6B30-883D-DA5CAEB476E1@published" data-editable="text" data-component-name="paragraph">
      <a href="https://www.cnn.com/us/live-news/maui-wildfires-08-09-23/index.html" target="_blank">Live Updates: Wildfires burn in Maui, prompting rescues in Lahaina</a>
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_F8B5CE7B-4DB1-DB89-9BD8-DA42C74C8D20@published" data-editable="text" data-component-name="paragraph">
      A dozen people were rescued near Lahaina after ‚Äúentering the ocean due to smoke and fire conditions,‚Äù the Coast Guard and county officials said. ‚ÄúIndividuals were transported by the Coast Guard to safe areas,‚Äù <a href="https://www.mauicounty.gov/CivicAlerts.aspx?AID=12639" target="_blank">Maui County officials said</a>.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_39C28268-D86C-3B06-239B-DA6718906BB9@published" data-editable="text" data-component-name="paragraph">
      And it‚Äôs not clear where the disaster will head next.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_470ED4F9-E0D8-BB0C-2EED-D9A37FBC2FE9@published" data-editable="text" data-component-name="paragraph">
      Maui fire officials warned that erratic wind, challenging terrain, steep slopes and dropping humidity, plus the direction and the location of the fire conditions make it difficult to predict path and speed of a wildfire, according to <a href="https://www.facebook.com/countyofmaui/posts/pfbid0MkFxivkpCuoa7yiXZUjsnKsou7Ye5UrnaktAP9oEcPir51MKmwD42DQLuBiZ5d2nl" target="_blank">Maui County officials</a>. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_BBE8D60E-A18A-F2AB-437E-D9A478CC45E5@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúThe fire can be a mile or more from your house, but in a minute or two, it can be at your house,‚Äù Maui County Fire Assistant Chief Jeff Giesea said. ‚ÄúBurning airborne materials can light fires a great distance away from the main body of fire.‚Äù
  </p>

  



  

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_E0B1F0A3-8A58-E42A-A678-DA997F71F965@published" data-editable="text" data-component-name="paragraph">
      State officials are working with hotels and a local airline to try to evacuate tourists to another island, Luke said. But severed communications have hindered efforts to reach everyone.
  </p>

  


  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_D5755624-8896-F68C-26BD-DB4EE2A7CDC8@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúResorts and visitors and commercial districts have lost communication due to downed cell towers and landlines that only work within very local areas. ‚ÄúAs a result, 911 service is currently down,‚Äù said Mahina Martin, chief communications officer from Maui Emergency Management Agency. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_E32B8DFA-1641-2180-C8E6-DAEAEB6902CF@published" data-editable="text" data-component-name="paragraph">
      Maui County officials have not been able to communicate with many people on the west side ‚Äì including those in the Lahaina area, Luke said.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_3D2E4E07-1F41-129E-06A2-DB4406DA3592@published" data-editable="text" data-component-name="paragraph">
      Satellite phones have been the only reliable way to get in touch with some areas, including hotels, the lieutenant governor said. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_64404754-A4D1-682F-70B0-DA8326889ABB@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúWhat we are trying to do is deploy individuals to go into areas with satellite phone service. We have only been in contact with perhaps one hotel because the one hotel, the people in charge of that hotel have satellite phones,‚Äù Luke said Wednesday morning.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_320EF231-FB56-201C-3ABF-DA992BE5E5BD@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúThat‚Äôs the only way you can make connection. It‚Äôs impeding communication ‚Ä¶ and we are very concerned about that.‚Äù
  </p>

  

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_B4AC5355-DF28-24B6-4A40-DB4EF8DAAA66@published" data-editable="text" data-component-name="paragraph">
      Mandatory evacuation orders are in place for parts of Maui, the emergency management official said.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_3F713311-47AD-E18A-EC49-DB483F154E0A@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúRight now emergency shelters are open in a number of areas across parts of West Maui and South Maui,‚Äù Martin said. ‚ÄúBut as precautionary measures, because of the ongoing fires, we‚Äôve relocated the emergency shelters outside of the district.‚Äù
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_A9A83DCE-7477-3CE8-C1C0-DB46DBFCC9A8@published" data-editable="text" data-component-name="paragraph">
      The Kahului Airport was sheltering about 1,800 travelers from ‚Äúcanceled flights and flight arrivals,‚Äù the Hawaii Department of Transportation posted on social media. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_F45A02DB-7614-1072-B1B7-DB46DBFEEC33@published" data-editable="text" data-component-name="paragraph">
      The state is discouraging any nonessential travel to the island of Maui due to the fires, Hawaiian Airlines told CNN in a statement. 
  </p>

<div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/image-79826b482520f701969d3e1495bdc7be@published" data-name="03 hawaii wildfires hurricane dora" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6443333333333333" data-original-height="1933" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230809080516-03-hawaii-wildfires-hurricane-dora.jpg?c=original" data-editable="settings">
       <picture><source height="720" width="1280" media="(min-width: 1280px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809080516-03-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill/f_webp" type="image/webp"><source height="540" width="960" media="(min-width: 960px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809080516-03-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_540,w_960,c_fill/f_webp" type="image/webp"><source height="270" width="480" media="(-webkit-min-device-pixel-ratio: 2)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809080516-03-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_270,w_480,c_fill/f_webp" type="image/webp"><img src="https://media.cnn.com/api/v1/images/stellar/prod/230809080516-03-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill" alt="Members of a Hawaii Department of Land and Natural Resources wildland firefighting crew battle a fire Tuesday in Kula, Hawaii." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1933" width="3000" loading="lazy"></picture>
    </div>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_3AE86D32-18FA-7721-97FB-DAA1B4BAF3EF@published" data-editable="text" data-component-name="paragraph">
      Members of the Hawaii National Guard are assisting with the calamity in Maui ‚Äì with more on the way.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_78D542BE-B03C-72F7-5803-DA8C476F0EEF@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúHawaii National Guardsmen have been activated and are currently on Maui assisting Maui Police Department at traffic control points,‚Äù Maj. Gen. Kenneth Hara, Hawaii‚Äôs adjutant general, <a href="https://www.facebook.com/taghawaii/posts/pfbid0C9iwx8dKEeBnfWkBTw9RTpdsg8uU1JenA6m1weobyG3VXwNzTy8ZRpkuQU9Y7Br2l" target="_blank">posted</a> on Facebook.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_ACF56AE7-0E8F-C25D-C069-DA8C47731E1E@published" data-editable="text" data-component-name="paragraph">
      The overnight deployment was hastened by the dynamic fire conditions, Hara wrote, adding more National Guard personnel would arrive in the counties of Maui and Hawaii later Wednesday.
  </p>

  

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_2747AC93-E620-D7DB-1A4E-D98CEA34959F@published" data-editable="text" data-component-name="paragraph">
      Dora, a powerful Category 4 hurricane with sustained winds of 130 mph, was about 795 miles southwest of Honolulu as of Wednesday morning, the <a href="https://www.nhc.noaa.gov/text/refresh/HFOTCPCP2+shtml/091432.shtml?" target="_blank">National Hurricane Center</a> said. No coastal watches or warnings were in effect.
  </p>

<div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/image-483c943ce25d36f64874055c1ff5d3f5@published" data-name="02 hawaii wildfires hurricane dora" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5626856803327391" data-original-height="947" data-original-width="1683" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230809080332-02-hawaii-wildfires-hurricane-dora.jpg?c=original" data-editable="settings">
       <picture><source height="720" width="1280" media="(min-width: 1280px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809080332-02-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill/f_webp" type="image/webp"><source height="540" width="960" media="(min-width: 960px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809080332-02-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_540,w_960,c_fill/f_webp" type="image/webp"><source height="270" width="480" media="(-webkit-min-device-pixel-ratio: 2)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809080332-02-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_270,w_480,c_fill/f_webp" type="image/webp"><img src="https://media.cnn.com/api/v1/images/stellar/prod/230809080332-02-hawaii-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill" alt="Smoke rises from a wildfire Tuesday in Lahaina, on the Hawaiian island of Maui." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="947" width="1683" loading="lazy"></picture>
    </div>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_3CC20325-6F46-F7EF-135C-DA47D8133C53@published" data-editable="text" data-component-name="paragraph">
      As Dora travels south of the islands, a strong high-pressure system remains in place to the north. The area of high pressure in combination with Dora is producing ‚Äúvery strong and damaging winds,‚Äù the National Weather Service said.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_39BBC039-5DA0-7121-1689-DA0F3CF77F4C@published" data-editable="text" data-component-name="paragraph">
      Winds as high as 60 mph are expected through the overnight in Hawaii, then will begin to diminish through the day on Wednesday.
  </p>

  


  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_F7524039-009E-1ADC-8068-DAF6D2966F27@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúThese strong winds coupled with low humidity levels are producing dangerous fire weather conditions that will last through Wednesday afternoon,‚Äù the weather service said.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_991B11C0-7964-E514-EBBC-DA9DD6048631@published" data-editable="text" data-component-name="paragraph">
      By Wednesday afternoon, the area of high pressure, as well as Dora, will both drift westward, allowing the winds to subside.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_894D2721-9AE5-574F-3DD0-D968EF4758B3@published" data-editable="text" data-component-name="paragraph">
      Two brushfires were burning Tuesday on the Big Island, officials said in a <a href="https://www.hawaiicounty.gov/Home/Components/News/News/3437/720" target="_blank">news release</a>, one in the North Kohala District and the other in the South Kohala District. Some residents were under mandatory evacuation orders as power outages were impacting communications, the release said.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_0795FAF5-DBAC-1F19-EDAF-D966827FB1C4@published" data-editable="text" data-component-name="paragraph">
      Luke, who is acting as the governor as Green was out of the state, issued an emergency proclamation related to the fires on Tuesday.
  </p>

<div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/image-446c371aa62e57c87747a34b45aa2407@published" data-name="04 maui county wildfires hurricane dora" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230809040833-04-maui-county-wildfires-hurricane-dora.jpg?c=original" data-editable="settings">
       <picture><source height="720" width="1280" media="(min-width: 1280px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809040833-04-maui-county-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill/f_webp" type="image/webp"><source height="540" width="960" media="(min-width: 960px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809040833-04-maui-county-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_540,w_960,c_fill/f_webp" type="image/webp"><source height="270" width="480" media="(-webkit-min-device-pixel-ratio: 2)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/230809040833-04-maui-county-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_270,w_480,c_fill/f_webp" type="image/webp"><img src="https://media.cnn.com/api/v1/images/stellar/prod/230809040833-04-maui-county-wildfires-hurricane-dora.jpg?c=16x9&amp;q=h_720,w_1280,c_fill" alt="Plumes of smoke billow Tuesday from a fire in Lahaina, Maui County." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_4C6A8AB3-1B97-3DE2-DCD2-D9B2B8DC2E00@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúWe are closely following the wildfires caused by the strong winds of Hurricane Dora,‚Äù Luke said in a <a href="https://governor.hawaii.gov/newsroom/office-of-the-governor-news-release-emergency-proclamation-for-hurricane-dora-wildfires/" target="_blank">statement</a>. ‚ÄúThe safety of our residents is paramount, and this emergency proclamation will activate the Hawai ªi National Guard to support emergency responders in the impacted communities.‚Äù
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_48B29072-5BF5-7A24-44B9-D8EA92A1AEA2@published" data-editable="text" data-component-name="paragraph">
      Green has been fully briefed on Dora and its impacts, according to the news release.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_67CE4AC1-C2FB-E523-F19F-D8EA9DD996DB@published" data-editable="text" data-component-name="paragraph">
      ‚ÄúLieutenant Governor Luke has my full support,‚Äù Green said. ‚ÄúMy thoughts are with the residents and businesses affected by Hurricane Dora.‚Äù 
  </p>

  <p data-uri="cms.cnn.com/_components/footnote/instances/d287a8dba560d9525e69efb2cb022aba@published" data-editable="text">
  CNN‚Äôs Caroll Alvarado, Derek Van Dam, Robert Shackelford, Aya Elamroussi, Kara Nelson, Cheri Mossburg, Jennifer Gray, Eli Masket, Ross Levitt and Kelly McCleary contributed to this report. 
</p>

                </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Launch HN: Refine (YC S23) ‚Äì Open-Source Retool for Enterprise (134 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=37064822</link>
            <guid>37064822</guid>
            <pubDate>Wed, 09 Aug 2023 16:11:09 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=37064822">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><td><table>
        <tbody><tr id="37064822">
      <td><span></span></td>      <td><center><a id="up_37064822" href="https://news.ycombinator.com/vote?id=37064822&amp;how=up&amp;goto=item%3Fid%3D37064822"></a></center></td><td><span><a href="https://news.ycombinator.com/item?id=37064822">Launch HN: Refine (YC S23) ‚Äì Open-Source Retool for Enterprise</a></span></td></tr><tr><td colspan="2"></td><td><span>
          <span id="score_37064822">109 points</span> by <a href="https://news.ycombinator.com/user?id=civan">civan</a> <span title="2023-08-09T16:11:09"><a href="https://news.ycombinator.com/item?id=37064822">2 hours ago</a></span> <span id="unv_37064822"></span> | <a href="https://news.ycombinator.com/hide?id=37064822&amp;goto=item%3Fid%3D37064822">hide</a> | <a href="https://hn.algolia.com/?query=Launch%20HN%3A%20Refine%20(YC%20S23)%20%E2%80%93%20Open-Source%20Retool%20for%20Enterprise&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0">past</a> | <a href="https://news.ycombinator.com/fave?id=37064822&amp;auth=5edcf4befcbd1b3e2ffecd66a3f1471a324badd6">favorite</a> | <a href="https://news.ycombinator.com/item?id=37064822">40&nbsp;comments</a>        </span>
              </td></tr>
    <tr></tr><tr><td colspan="2"></td><td><div><p>Hi HN! We‚Äôre the co-founders of Refine (<a href="https://github.com/refinedev/refine">https://github.com/refinedev/refine</a>), an open-source platform for developing enterprise web applications rapidly. In one year since launch we have 15K active developers each month, and over 5K projects in production. Among the 5,000+ projects deployed to production, we see a lot of admin panels, dashboards, B2B portals and SAAS interfaces.</p><p>Check out our online generator at (<a href="https://refine.dev/#playground">https://refine.dev/#playground</a>) to create a custom Refine application and download it.</p><p>Before starting refine, we spent five years as a consultancy company building internal-facing applications for enterprise clients. We have seen many complex use cases where the demanded flexibility was much higher than what existing low-code/no-code solutions provide. Moving away from rigid architectures and pre-made components that are difficult to customize, developers tend to start from the scratch. This results in a significant waste of time and resources.</p><p>In order to find a sweet spot between ‚Äústarting from scratch‚Äù and higher level solutions,  we started working on refine. After a couple of iterations, we came up with a ‚Äúheadless‚Äù solution, separating the UI-layer completely from the rest of the frontend logic. This allowed us to support multiple UI frameworks and custom designs out of the box.</p><p>We understand the importance of frontend developers working with the stack and tools they love and are familiar with. So, we have built our project creation wizard that allows developers to mix and match their technology stack when creating a project.</p><p>After 1.5 years of development with the great support of the open-source community, Refine has become a mature framework that allows developers to rapidly build enterprise applications and have 100% control over their projects.</p><p>While remaining unobtrusive, Refine still saves a lot of development resources by eliminating repetitive tasks such as CRUD operations, state management, routing, authentication, access control, and i18n. It‚Äôs also backend-agnostic and works with any APIs or services.</p><p>The best way to start Refine development is visiting our extensive documentation at (<a href="https://refine.dev/docs/">https://refine.dev/docs/</a>). Here, you can also find tutorials and real-life examples to use as a starting point for your use case.</p><p>We had one successful Show HN earlier this year (<a href="https://news.ycombinator.com/item?id=34515128">https://news.ycombinator.com/item?id=34515128</a>), and have since had several major releases and added many more features.</p><p>Recently, we've released our enterprise edition featuring deployments, built-in security, backend integrations and auto-generated UI's. By expanding Refine's capabilities beyond the frontend, the enterprise edition offers a complete solution for the internal tooling requirements of larger organizations. To get more information, please see our pricing page: <a href="https://refine.dev/pricing/">https://refine.dev/pricing/</a>.</p><p>If you have any questions, ideas or suggestions please share them with us. The team will be here all day to answer. We look forward to all of your comments!</p></div></td></tr>        <tr></tr><tr><td colspan="2"></td><td><form action="comment" method="post"></form></td></tr>  </tbody></table>
  </td></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[B.C. woman buried in Amazon packages she did not ask for and does not want (108 pts)]]></title>
            <link>https://www.cbc.ca/news/canada/british-columbia/amazon-shoe-packages-1.6926200</link>
            <guid>37063829</guid>
            <pubDate>Wed, 09 Aug 2023 15:05:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cbc.ca/news/canada/british-columbia/amazon-shoe-packages-1.6926200">https://www.cbc.ca/news/canada/british-columbia/amazon-shoe-packages-1.6926200</a>, See on <a href="https://news.ycombinator.com/item?id=37063829">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p dir="ltr">Almost every day, Anca Nitu comes home from work to find an Amazon package she did not order at her doorstep.&nbsp;</p><p dir="ltr">For the past two months, Nitu says she's received more than 50 parcels containing women's shoes at her home in Langley, B.C. They were sent by people across North America who intended to return them to the Amazon seller, with each box containing a return authorization slip to her address.&nbsp;</p><p dir="ltr">She says couriers have also abandoned packages on her porch, denying her the opportunity to refuse them. It has also resulted in more than $300 worth of Collect-on-Delivery&nbsp;(COD) customs charges from&nbsp;the United Parcel Service (UPS). The bills are mailed to her by the delivery company.</p><p dir="ltr">"I start shaking when I see packages at my door," said Nitu, who says the stress has cost her sleep and her appetite. "They keep coming&nbsp;and it just doesn't end."&nbsp;</p><p dir="ltr">While she has not determined an exact cause, Nitu suspects her residence is being used as a return address for sellers or third-party handlers to dump their unwanted products.</p><p dir="ltr">The Better Business Bureau (BBB) says it sounds like a vendor-return scheme, where sellers, usually from overseas countries like China or India, skirt shipping and warehouse fees by using a residence to ship their returned products.&nbsp;</p><div dir="ltr"><ul><li><a href="https://www.cbc.ca/news/canada/calgary/brushing-scam-alberta-amazon-mystery-packages-1.5656192" text="Mysterious Amazon packages linked to review-boosting scam, warns BBB" flag="" data-contentid=""><span>Mysterious Amazon packages linked to review-boosting scam, warns BBB</span></a></li></ul><ul><li><a href="https://www.cbc.ca/news/canada/manitoba/winnipeg-student-union-amazon-anonymous-package-1.4517753" text="'Strange gifts': Winnipeg groups among Canadian student unions getting anonymous parcels" flag="" data-contentid=""><span>'Strange gifts': Winnipeg groups among Canadian student unions getting anonymous parcels</span></a></li></ul></div><p dir="ltr">Third-party sellers who use Amazon fulfilment centres are required to pay for picking and packing orders, shipping, handling&nbsp;and product returns.&nbsp;</p><p dir="ltr">If an Amazon customer wishes to return a product to a third-party seller, the BBB says a company might try to save money by choosing&nbsp;a private return address rather than having to pay the cost of shipping packages overseas or having&nbsp;them&nbsp;processed in fulfilment centres.&nbsp;</p><p dir="ltr">When a seller's returned products can't be re-sold, the companies are charged with <a href="https://sellercentral.amazon.com/help/hub/reference/external/GZ5Q2VW5WF4JWRGC?amp%3Bref=efph_GZ5Q2VW5WF4JWRGC_cont_G201411300&amp;locale=en-US" target="_blank">removal and disposal order fees</a>.&nbsp;</p><p><strong><em>WATCH | Woman says her address is being used as dumping ground for unwanted purchases:</em>&nbsp;</strong><span><span><div title="B.C. woman bombarded with Amazon packages she never ordered" role="button" tabindex="0"><div><p><img srcset="
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/864/407/AMAZON_5000kbps_1280x720_2253616707764.jpg?crop=1.777xh:h;*,*&amp;downsize=1130px:* 1130w,
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/864/407/AMAZON_5000kbps_1280x720_2253616707764.jpg?crop=1.777xh:h;*,*&amp;downsize=880px:* 880w,
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/864/407/AMAZON_5000kbps_1280x720_2253616707764.jpg?crop=1.777xh:h;*,*&amp;downsize=630px:* 630w,
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/864/407/AMAZON_5000kbps_1280x720_2253616707764.jpg?crop=1.777xh:h;*,*&amp;downsize=510px:* 510w,
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/864/407/AMAZON_5000kbps_1280x720_2253616707764.jpg?crop=1.777xh:h;*,*&amp;downsize=260px:* 260w" sizes="(max-width: 260px) 4vw, (max-width: 510px) 50vw, (max-width: 630px) 66vw, (max-width: 880px) 88vw" src="https://thumbnails.cbc.ca/maven_legacy/thumbnails/864/407/AMAZON_5000kbps_1280x720_2253616707764.jpg?crop=1.777xh:h;*,*&amp;downsize=510px:*510w" alt="" loading="lazy"></p></div><div><h3>B.C. woman bombarded with Amazon packages she never ordered</h3></div></div><span>Anca Nitu says she's received more than 50 packages of returned shoes at her home in two months, with each box containing a return authorization slip to her address.</span></span></span></p><p dir="ltr">Neesha Hothi, the director of marketing and communications at B.C.'s BBB, says she has not heard of the scam happening locally&nbsp;but it's <a href="https://www.wusa9.com/article/news/investigations/amazon-boxes-packages-delivery-brushing-vendor-scam-fufilment-center/65-74b77e1f-789f-4b90-923b-bdcd0671b99a"><u>common in the U.S.</u></a></p><p dir="ltr">"It's easier and cheaper for the sellers to have [returned products]&nbsp;sent to this random address than having it sent to China," said Hothi. "It could be that the warehouse has asked the seller to remove their unsold products from fulfilment centres, or their contract is ending."</p><p dir="ltr">The BBB also referenced the <a href="https://www.cbc.ca/radio/day6/china-s-bid-for-a-covid-free-olympics-front-line-health-care-workers-brushing-scams-and-more-1.6322424/got-an-unexpected-package-it-could-be-part-of-a-brushing-scam-1.6322433">Amazon brushing scam</a>, where companies would purchase products and have them sent to random customers so they can write verified reviews.&nbsp;But Nitu says what is happening to her is materially different.&nbsp;</p><div dir="ltr"><ul><li><a href="https://www.cbc.ca/news/business/amazon-rcmp-sex-toys-packages-1.4512200" text="Amazon, RCMP on the case as unsolicited deliveries of sex toys, other items cause concern on campus" flag="" data-contentid=""><span>Amazon, RCMP on the case as unsolicited deliveries of sex toys, other items cause concern on campus</span></a></li></ul></div><p dir="ltr">Most of the shoes have a return slip that bears her name and address&nbsp;but are intended for shoe sellers in the U.S.</p><p dir="ltr">Nitu says she is disputing the duty charges from UPS.&nbsp;</p><p dir="ltr">"I refused to pay, and the dispute with UPS is still ongoing," said Nitu. "They're completely unreasonable. I tried to explain the situation&nbsp;and they were not nice, let's put it that way."</p><p dir="ltr">UPS told CBC they intend to investigate the issue but do not wish to give an official comment until they've contacted&nbsp;Nitu.</p><p dir="ltr">The BBB says it is facilitating correspondence between Nitu and&nbsp;UPS's corporate office.</p><p dir="ltr"><em><strong>WATCH | Fashion giants slap fees on returning&nbsp;online purchases:</strong></em>&nbsp;</p><p><span><div title="Some retailers begin charging for online returns" role="button" tabindex="0"><div><p><img srcset="
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/725/287/MPX_PATEL_ONLINE_RETURNS.jpg?crop=1.777xh:h;*,*&amp;downsize=1130px:* 1130w,
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/725/287/MPX_PATEL_ONLINE_RETURNS.jpg?crop=1.777xh:h;*,*&amp;downsize=880px:* 880w,
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/725/287/MPX_PATEL_ONLINE_RETURNS.jpg?crop=1.777xh:h;*,*&amp;downsize=630px:* 630w,
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/725/287/MPX_PATEL_ONLINE_RETURNS.jpg?crop=1.777xh:h;*,*&amp;downsize=510px:* 510w,
                        https://thumbnails.cbc.ca/maven_legacy/thumbnails/725/287/MPX_PATEL_ONLINE_RETURNS.jpg?crop=1.777xh:h;*,*&amp;downsize=260px:* 260w" sizes="(max-width: 260px) 4vw, (max-width: 510px) 50vw, (max-width: 630px) 66vw, (max-width: 880px) 88vw" src="https://thumbnails.cbc.ca/maven_legacy/thumbnails/725/287/MPX_PATEL_ONLINE_RETURNS.jpg?crop=1.777xh:h;*,*&amp;downsize=510px:*510w" alt="" loading="lazy"></p></div><div><h3>Some retailers begin charging for online returns</h3></div></div><span>Retailers are beginning to charge customers looking to return items bought online as a means of cutting down on the number of purchases sent back in the first place.</span></span></p><h2 dir="ltr">Amazon taking 'corrective action'</h2><p dir="ltr">After numerous emails&nbsp;and hours on the phone talking to Amazon and UPS customer service, Nitu says she has made no progress in stopping the deliveries.</p><p dir="ltr">She also filed a police report with the&nbsp;Langley RCMP, who told her to open and dispose of the packages.</p><p dir="ltr">"The constable consulted with his superiors, and they don't know where to begin to investigate this," she said.</p><p dir="ltr">"I don't have storage, and I can't keep all these shoes indefinitely," added Nitu, who started to give away the shoes at her workplace and to Goodwill, a charity that takes secondhand clothing. "They are absolutely no use to me."</p><p dir="ltr">Nitu says Amazon and UPS are not handling her inquiries with urgency and that her complaint is being&nbsp;passed around.&nbsp;</p><div dir="ltr"><figure><p><img loading="lazy" alt="A paper sign is taped to Anca Nitu's front door. It says, 'All deliveries for Anca Nitu are refused. UPS, please don't abandon packages at my door!'" srcset="https://i.cbc.ca/1.6929610.1691547340!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/cod-door-posting.jpg 300w,https://i.cbc.ca/1.6929610.1691547340!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/cod-door-posting.jpg 460w,https://i.cbc.ca/1.6929610.1691547340!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/cod-door-posting.jpg 620w,https://i.cbc.ca/1.6929610.1691547340!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/cod-door-posting.jpg 780w,https://i.cbc.ca/1.6929610.1691547340!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/cod-door-posting.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.6929610.1691547340!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/cod-door-posting.jpg"></p><figcaption>Anca Nitu says she taped this notice to her door telling delivery workers not to drop off packages as UPS advised her.<!-- --> <!-- -->(Shawn Foss/CBC)</figcaption></figure></div><p dir="ltr">In a written statement to CBC, Amazon says people in her situation can&nbsp;report packages online through their Report Unwanted Package form, but they did not specify what processes are in place to resolve Nitu's&nbsp;specific issue of unwanted volume deliveries.</p><p dir="ltr">"The case in question has been addressed, and corrective action is being taken to stop the packages," Amazon&nbsp;wrote.&nbsp;</p><p dir="ltr">However,&nbsp;Nitu says the issue has yet to be resolved.</p><p dir="ltr">"UPS has been a complete nightmare," she said, adding that&nbsp;other carriers like Canada Post and FedEx did not bill her and allowed her to refuse packages without charge by calling the post office.&nbsp;</p><p>"I have called and asked UPS to pick up their packages&nbsp;and they said, 'sure,' but nothing happened the next day."&nbsp;</p><p>In an email shared by Nitu, UPS advised her to refuse delivery&nbsp;and, if no one in the household is onsite, a note may be left at her door indicating her refusal to accept the delivery.</p><h2 dir="ltr">'Keep a record of correspondence'</h2><p dir="ltr">Nitu says the deliveries were tied to her dormant Amazon account.</p><p dir="ltr">"I don't know what Amazon is allowing them to do because they got a hold of my name, my address and my old phone number," she said.</p><div dir="ltr"><figure><p><img loading="lazy" alt="Anca Nitu holds up one return slip that came with a package delivered to her home. " srcset="https://i.cbc.ca/1.6929615.1691546276!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/anca-nitu-return-slip.jpg 300w,https://i.cbc.ca/1.6929615.1691546276!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/anca-nitu-return-slip.jpg 460w,https://i.cbc.ca/1.6929615.1691546276!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/anca-nitu-return-slip.jpg 620w,https://i.cbc.ca/1.6929615.1691546276!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/anca-nitu-return-slip.jpg 780w,https://i.cbc.ca/1.6929615.1691546276!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/anca-nitu-return-slip.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.6929615.1691546276!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/anca-nitu-return-slip.jpg"></p><figcaption>Anca Nitu says each package came with a return slip bearing her address but was meant to be sent to an American company. <!-- --> <!-- -->(Shawn Foss/CBC)</figcaption></figure></div><p dir="ltr">Hothi says customers' information could be stolen in multiple ways, such as in phishing scams.</p><p dir="ltr">"It could be as simple as someone stealing your mail, taking a picture of your mail, or they could be selling other products and could have your information from a different place," she said.&nbsp;</p><p dir="ltr">Nitu says she is worried about eventually receiving heftier bills for seller service fees.</p><p dir="ltr">"These seller accounts for Amazon are not free. Amazon is charging these sellers, and my name and address are linked to a seller account," she said.</p><div dir="ltr"><ul><li><a href="https://www.cbc.ca/news/canada/new-brunswick/cybersecurity-delivery-shipping-privacy-bni-1.6711962" text="Proof-of-delivery photos for many Amazon packages publicly accessible for months" flag="" data-contentid=""><span>Proof-of-delivery photos for many Amazon packages publicly accessible for months</span></a></li></ul><ul><li><a href="https://www.cbc.ca/news/canada/british-columbia/unifor-amazon-union-drive-bc-canada-1.6889624" text="Unifor targets B.C. for Amazon union drive after labour law amendments" flag="" data-contentid=""><span>Unifor targets B.C. for Amazon union drive after labour law amendments</span></a></li></ul></div><p dir="ltr">Hothi advises customers battling with companies to keep a record of all correspondence and obtain incident reports.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla finds CPU bug (bad store forwarding) in Samsung Galaxy S20 (183 pts)]]></title>
            <link>https://bugzilla.mozilla.org/show_bug.cgi?id=1833315</link>
            <guid>37063459</guid>
            <pubDate>Wed, 09 Aug 2023 14:43:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1833315">https://bugzilla.mozilla.org/show_bug.cgi?id=1833315</a>, See on <a href="https://news.ycombinator.com/item?id=37063459">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="wrapper">

 


<main id="bugzilla-body" tabindex="-1">



<div id="main-inner">










<div id="summary-container">


  
    <p><span id="field-value-status_summary">
      <span data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1833315">Bug 1833315</a>
      </span>
      <span>
        <span>Opened <span title="2023-05-15 23:30 PDT" data-time="1684218626">3 months ago</span></span>
          <span>Closed <span title="2023-06-08 20:59 PDT" data-time="1686283188">2 months ago</span></span>
      </span>
        </span>
    </p>

  
</div>








































<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;117.0b4&quot;,&quot;FIREFOX_ESR&quot;:&quot;102.14.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;115.1.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;118.0a1&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2023-07-31&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2023-08-01&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2023-07-27&quot;,&quot;LAST_STRINGFREEZE_DATE&quot;:&quot;2023-07-28&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;117.0b4&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;117.0b4&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;116.0.2&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2023-08-28&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2023-08-29&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2023-08-24&quot;,&quot;NEXT_STRINGFREEZE_DATE&quot;:&quot;2023-08-25&quot;}">



<div id="c0" data-comment-id="16413312" data-ismarkdown="true"><p>This crash looks like a regression in Fenix 106 or a new crash signature from function inlining?</p>
<p>Crash report: <a href="https://crash-stats.mozilla.org/report/index/f585f1a9-0ed8-4dce-bc64-be8aa0230516" rel="nofollow">https://crash-stats.mozilla.org/report/index/f585f1a9-0ed8-4dce-bc64-be8aa0230516</a></p>
<p>Reason: <code>SIGSEGV / SEGV_MAPERR</code></p>
<p>Top 10 frames of crashing thread:</p>
<pre><code>0  libxul.so  js::StackUses  js/src/vm/BytecodeUtil.h:333
0  libxul.so  js::frontend::BytecodeSection::updateDepth  js/src/frontend/BytecodeSection.cpp:176
0  libxul.so  js::frontend::BytecodeEmitter::emitN  js/src/frontend/BytecodeEmitter.cpp:369
0  libxul.so  js::frontend::BytecodeEmitter::emitEnvCoordOp  js/src/frontend/BytecodeEmitter.cpp:792
0  libxul.so  js::frontend::NameOpEmitter::emitGet  js/src/frontend/NameOpEmitter.cpp:99
0  libxul.so  js::frontend::BytecodeEmitter::emitGetNameAtLocation  js/src/frontend/BytecodeEmitter.cpp:1537
0  libxul.so  js::frontend::BytecodeEmitter::emitGetName  js/src/frontend/BytecodeEmitter.h:690
0  libxul.so  js::frontend::BytecodeEmitter::emitGetName  js/src/frontend/BytecodeEmitter.cpp:1547
0  libxul.so  js::frontend::BytecodeEmitter::emitTree  js/src/frontend/BytecodeEmitter.cpp:11692
1  libxul.so  js::frontend::BytecodeEmitter::emitPropLHS  js/src/frontend/BytecodeEmitter.cpp:1635
</code></pre>
</div><div id="c1"><p>Matthew, I think you are already looking at this issue ;)</p><div><p>Severity: -- ‚Üí S4</p><p>Flags: needinfo?(mgaudet)</p><p>Priority: -- ‚Üí P3</p></div></div><div id="c2" data-comment-id="16414158" data-ismarkdown="true"><p>This signature is covering three different crashes at least.</p>
<p>Looking at crash stats I'll note that of ~200 crashes, 95% are coming from Samsung mobiles. Almost all the samsung crashes have crash addresses ended in <code>fa9</code> -- which feels important but I'm not sure what it means; they all appear to come to the same build IDs. Looking at the registers, there's a register with the crashing address (but aligned, ending in <code>fa8</code>). Unfortunately I can't see what instruction is being used to do the load, so I'm not sure if this is like 1-past the end of a buffer or if we're doing an unaligned load where we ought to not be.</p>
<p>There's also a series of crashes at <code>0x0000087c</code>, all with the same install time (2023-05-09 17:49:58) -- these can be disregarded as bad hardware I suspect.</p>
<p><a href="https://crash-stats.mozilla.org/report/index/466b9608-946e-4b12-99c7-3e4050230514" rel="nofollow">At least one of these crashes from windows is pretty suspicious</a>. As much as the stack looks very real, it's reporting a <code>MOZ_RELEASE_ASSERT(pn_type &lt; ParseNodeKind::Limit)</code>, which is not used particularly nearby; it's unclear why this is the case.</p>
</div><div id="a48699_607045"><p>Flags: <span>needinfo?(mgaudet)</span></p></div><div id="c3"><p>This doesn't feel like an S4 to me given the crash volume. This is currently the #4 overall content process crash on Fenix release.</p><div><p>Flags: needinfo?(nicolas.b.pierron)</p></div></div><div id="c4"><p>I'd be interested in Iain's thoughts on these crash patterns.</p><div><p>Severity: S4 ‚Üí --</p><p>Flags: needinfo?(iireland)</p></div></div><div id="c5"><p>(Actually -- he's on PTO, nevermind. I'll take another look today)</p><div><p>Flags: needinfo?(iireland) ‚Üí needinfo?(mgaudet)</p></div></div><div id="c6"><div id="ct-6" data-comment-id="16424845" data-ismarkdown="true"><p>Looking into the fa9 crashes, which are still 95% of the crashes under this signature.</p>
<ul>
<li><a href="https://crash-stats.mozilla.org/search/?release_channel=release&amp;signature=%3Djs%3A%3AStackUses&amp;address=%24fa9&amp;product=Fenix&amp;version=112.2.0&amp;version=113.0&amp;version=113.1.0&amp;date=%3E%3D2023-04-24T00%3A00%3A00.000Z&amp;date=%3C2023-05-23T21%3A04%3A00.000Z&amp;_facets=install_time&amp;_facets=version&amp;_facets=address&amp;_facets=moz_crash_reason&amp;_facets=android_manufacturer&amp;_facets=proto_signature&amp;_sort=-date&amp;_columns=date&amp;_columns=signature&amp;_columns=product&amp;_columns=version&amp;_columns=build_id&amp;_columns=platform#facet-android_manufacturer" rel="nofollow">100% are coming from Samsung mobiles.</a>
<ul>
<li><a href="https://crash-stats.mozilla.org/search/?release_channel=release&amp;signature=%3Djs%3A%3AStackUses&amp;address=%24fa9&amp;proto_signature=%3Djs%3A%3AStackUses%20%7C%20js%3A%3Afrontend%3A%3ABytecodeSection%3A%3AupdateDepth%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitN%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitEnvCoordOp%20%7C%20js%3A%3Afrontend%3A%3ANameOpEmitter%3A%3AemitGet%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitGetNameAtLocation%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitGetName%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitGetName%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitPropLHS%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitAssignmentOrInit%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitExpressionStatement%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitStatementList%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitLexicalScope%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitFunctionScript%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitFunction%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitPropLHS%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitCalleeAndThis%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitCallOrNew%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitExpressionStatement%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitStatementList%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitScript%20%7C%20ScriptCompiler%3CT%3E%3A%3Acompile%20%7C%20CompileGlobalScriptToStencilAndMaybeInstantiate%3CT%3E%20%7C%20CompileGlobalScriptToStencilImpl%3CT%3E%20%7C%20js%3A%3Afrontend%3A%3ACompileGlobalScriptToStencil%20%7C%20CompileToStencilTask%3CT%3E%3A%3Aparse%20%7C%20js%3A%3AParseTask%3A%3ArunTask%20%7C%20js%3A%3AParseTask%3A%3ArunHelperThreadTask%20%7C%20js%3A%3AGlobalHelperThreadState%3A%3ArunTaskLocked%20%7C%20js%3A%3AGlobalHelperThreadState%3A%3ArunOneTask&amp;product=Fenix&amp;version=112.2.0&amp;version=113.0&amp;version=113.1.0&amp;date=%3E%3D2023-04-24T00%3A00%3A00.000Z&amp;date=%3C2023-05-23T21%3A04%3A00.000Z&amp;_facets=install_time&amp;_facets=version&amp;_facets=address&amp;_facets=moz_crash_reason&amp;_facets=android_manufacturer&amp;_facets=proto_signature&amp;_facets=android_model&amp;_facets=android_cpu_abi&amp;_facets=android_cpu_abi2&amp;_facets=android_device&amp;_sort=-date&amp;_columns=date&amp;_columns=signature&amp;_columns=product&amp;_columns=version&amp;_columns=build_id&amp;_columns=platform#facet-android_model" rel="nofollow">Every single one</a> is a variant of the Samsung Galaxy 20 (or Note 20)</li>
</ul>
</li>
</ul>
<ul>
<li><a href="https://crash-stats.mozilla.org/search/?release_channel=release&amp;signature=%3Djs%3A%3AStackUses&amp;address=%24fa9&amp;proto_signature=%3Djs%3A%3AStackUses%20%7C%20js%3A%3Afrontend%3A%3ABytecodeSection%3A%3AupdateDepth%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitN%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitEnvCoordOp%20%7C%20js%3A%3Afrontend%3A%3ANameOpEmitter%3A%3AemitGet%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitGetNameAtLocation%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitGetName%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitGetName%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitPropLHS%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitAssignmentOrInit%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitExpressionStatement%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitStatementList%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitLexicalScope%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitFunctionScript%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitFunction%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitPropLHS%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitCalleeAndThis%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitCallOrNew%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitExpressionStatement%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitStatementList%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitTree%20%7C%20js%3A%3Afrontend%3A%3ABytecodeEmitter%3A%3AemitScript%20%7C%20ScriptCompiler%3CT%3E%3A%3Acompile%20%7C%20CompileGlobalScriptToStencilAndMaybeInstantiate%3CT%3E%20%7C%20CompileGlobalScriptToStencilImpl%3CT%3E%20%7C%20js%3A%3Afrontend%3A%3ACompileGlobalScriptToStencil%20%7C%20CompileToStencilTask%3CT%3E%3A%3Aparse%20%7C%20js%3A%3AParseTask%3A%3ArunTask%20%7C%20js%3A%3AParseTask%3A%3ArunHelperThreadTask%20%7C%20js%3A%3AGlobalHelperThreadState%3A%3ArunTaskLocked%20%7C%20js%3A%3AGlobalHelperThreadState%3A%3ArunOneTask&amp;product=Fenix&amp;version=112.2.0&amp;version=113.0&amp;version=113.1.0&amp;date=%3E%3D2023-04-24T00%3A00%3A00.000Z&amp;date=%3C2023-05-23T21%3A04%3A00.000Z&amp;_facets=install_time&amp;_facets=version&amp;_facets=address&amp;_facets=moz_crash_reason&amp;_facets=android_manufacturer&amp;_facets=proto_signature&amp;_sort=-date&amp;_columns=date&amp;_columns=signature&amp;_columns=product&amp;_columns=version&amp;_columns=build_id&amp;_columns=platform#facet-proto_signature" rel="nofollow">85% coming from the same proto-signature</a>
<ul>
<li>The next highest proto-signature is 10% and identical except for one instance of js::frontend::BytecodeEmitter::emitPropLHS.</li>
</ul>
</li>
</ul>
<p>This has however persisted across 3 builds.</p>
</div><div><p>Flags: <span>needinfo?(mgaudet)</span></p></div></div><div id="c7" data-comment-id="16426145" data-ismarkdown="true"><p>I think I've finally managed to get the instructions out of the minidump. It says the faulting instruction pointer is 0x6c1b455dc0 and here's what I've gotten with some work</p>
<pre><code>0x6c1b455da0	ldr x10, [x27, #0x28]
0x6c1b455da4	strb w23, [x10, x24]
0x6c1b455da8	ldrsb w10, [x9, #1]
0x6c1b455dac	ldr x9, [x27, #0x28]
0x6c1b455db0	tbnz w10, #0x1f, #0x6c1b455de8
0x6c1b455db4	add x11, x9, x24
0x6c1b455db8	ldrb w12, [x11]
0x6c1b455dbc	add x10, x19, x12, lsl #3
0x6c1b455dc0	ldrsb w13, [x10, #1]   &lt;-------- FAULTING INSTRUCTION HERE.
0x6c1b455dc4	tbnz w13, #0x1f, #0x6c1b4591ac
0x6c1b455dc8	and w11, w13, #0xff
0x6c1b455dcc	ldp w13, w12, [x27, #0xf0]
0x6c1b455dd0	ldrsb w10, [x10, #2]
0x6c1b455dd4	sub w11, w12, w11
</code></pre>
<p>So the unaligned access of <code>x10+1</code> is coming directly from the assembly. The origin of that value is <code>x19+ x12 &lt;&lt; 3</code> (previous instruction). Sure enough, doing this calculation using the values from one of the dumps seems to confirm that what I'm seeing is real:</p>
<pre><code>js&gt; (0x000000700d6711d8 + (0x00000000ffffffba &lt;&lt; 3)).toString(16)
'700d670fa8'
</code></pre>
</div><div id="c8" data-comment-id="16426217" data-ismarkdown="true"><p>Best guess is that these instructions are implementing</p>
<pre><code>   JSOp op = JSOp(*pc);
  int nuses = CodeSpec(op).nuses;
</code></pre>
<p>from <code>js::StackUses</code></p>
<p>Reading the back trace, it seems like we're emitting either a GetAliasedVar or GetAliasedDebugVar; we then call into <a href="https://hg.mozilla.org/releases/mozilla-release/file/8141476bccc7d2e2468b740df03954d6ab212248/js/src/frontend/BytecodeEmitter.cpp#l369" rel="nofollow"><code>emitN</code></a> where we set the initial value of the <a href="https://hg.mozilla.org/releases/mozilla-release/file/8141476bccc7d2e2468b740df03954d6ab212248/js/src/frontend/BytecodeEmitter.cpp#l361" rel="nofollow">bytecode pointer</a>.</p>
<p>Next we call <a href="https://hg.mozilla.org/releases/mozilla-release/file/8141476bccc7d2e2468b740df03954d6ab212248/js/src/frontend/BytecodeSection.cpp#l176" rel="nofollow">updateDepth at that offset</a> -- this reads back the immediately prior written bytecode. I don't know why this doesn't work on samsung phones, but I'll bet that this is the root cause -- see, under this theory, <code>x12</code> should be our <code>JSOp</code> -- but the actual value in the register we have is <code>0x00000000ffffffba</code> which is way out of bounds for our bytecode count.</p>
<p>Why this is happening now, in 113 where it didn't happen previously is totally unclear. For some reason clang is now emitting a sequence that is tripping this hardware issue?</p>
<p>I've no idea how to resolve this. Patching this flow to avoid the read-after-write is awkward.</p>
</div><div id="c9" data-comment-id="16426231" data-ismarkdown="true"><p>I tried to reverse engineer the assembly, but I do not see what it might corresponds to within StackUses:</p>
<pre><code>  unknown64_t* x19 = /* ??? */;
  size_t x12 = /* ??? */;
  unknown64_t* x10 = &amp;x19[x12];
  int8_t w13 = x10.one_byte_within;
  if (w13 % 32) {  // Potentially a switch statement condition with cases which are all below 32.
    return; // jump far further.
  }
  uint8_t w11 = w13 &amp; 0xff;
  uint64_t (w12, w13) = x27.some_field_in_large_struct; // offset of field 0xf0
  int8_t w10 = x10.two_bytes_within;
  uint16_t w11 = w12 - w11;  // x27.some_field_in_large_struct.first - x10.one_byte_within &amp; 0xff;
</code></pre>
<p>At first I thought x10 could be the CodeSpec, but I would not expect any condition to be added after loading <code>nuses</code>.<br>
Then I wondered if the condition could be the switch statement, but some of the matched opcodes are larger than 32.<br>
I would not expect any of of the complex code path from GET_UINT16.</p>
<p>So I do not think this code belongs to StackUses as reported in the stack trace.</p>
<p>Right, this is potentially the <code>nuses</code> field which is being repeated before being tested elsewhere.</p>
</div><div id="c10">

  <p>Just in case it's helpful, i've uploaded the -whole- disassembly I generated; the version in the comment was a snippet.</p></div><div id="c11" data-comment-id="16427047" data-ismarkdown="true"><p>I am not sure what the assembly maps to. x19 is table of uint64_t struct indexed by a uint8_t. This would sounds like this is a table indexed by opcodes, but there are 2 occurrences where the field at offset 1 is compared against 32 (_ % 32 == 0, or _ &amp; 31 == 0) at 0x6c1b455db0 and 0x6c1b455dc4.<br>
I do not know from where these comparisons are coming from.</p>
<p>Also, given that 0x6c1b455da8 works, this is sounds quite unlikely that a failure would happen at 0x6c1b455dc0, especially since LRDB at 0x6c1b455db8 is suppose to read a single byte.</p>
<p>Could this be a sign issue? LDRB doing a sign extension in w12, which then causes problem when being used by reading the value from in incorrect memory page?</p>
<p>(In reply to Matthew Gaudet (he/him) [:mgaudet] from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1833315#c7" title="RESOLVED FIXED - Crash in [@ js::StackUses] in js::frontend::BytecodeSection::updateDepth(js::frontend::BytecodeOffset) (Samsung CPU Issue)">comment #7</a>)</p>
<blockquote>
<pre><code>js&gt; (0x000000700d6711d8 + (0x00000000ffffffba &lt;&lt; 3)).toString(16)
'700d670fa8'
</code></pre>
</blockquote>
<p>Be careful JS shift operators only work with 32 bits values, and not 64 bits. Thus this is not the correct result here.</p>
</div><div id="c12"><p>I'm at my own wits end on this one; I'm going to leave this one in your hands</p></div><div id="c13" data-comment-id="16433006" data-ismarkdown="true"><p>Poked at this a bit. It looks like everything's all been inlined together into one big pile of instructions and interleaved, but I think I've made a bit of progress.</p>
<p>Consider these instructions from the beginning of Matt's assembly sequence:</p>
<pre><code>0x6c1b455d50	cmp w8, #6    
0x6c1b455d54	movn w9, #0x45   
0x6c1b455d58	cinc w23, w9, ne 
</code></pre>
<p>We are loading the constant ~0x45, then incrementing it if w8 is not 6. Interestingly, ~0x45 is 0xffffffba, which is precisely the mystery value that Matt found in x12. Later on, we have these instructions:</p>
<pre><code>0x6c1b455d7c	adrp x19, #0x6c1d6c5000
0x6c1b455d80	add x19, x19, #0x1d8
...
0x6c1b455d94	and x9, x23, #0xff
...
0x6c1b455d9c	add x9, x19, x9, lsl #3
...
0x6c1b455da8	ldrsb w10, [x9, #1]
</code></pre>
<p>The first two instructions load a hardcoded pointer. The next two compute <code>base_address + (our_mystery_register &amp; 0xff) &lt;&lt; 3</code>. This looks like we're finding an entry from the CodeSpecTable. The last instruction loads (and sign-extends) a value from the CodeSpec: specifically, nuses is at offset 1.</p>
<p><code>0xffffffba &amp; 0xff</code> is 0xba, which is JSOp::GetAliasedVar. 0xbb is JSOp::GetAliasedDebugVar. So the first set of instructions I pulled out maps to <a href="https://searchfox.org/mozilla-central/rev/0c2945ad4769e2d4428c72e6ddd78d60eb920394/js/src/frontend/NameOpEmitter.cpp#117-119" rel="nofollow">this code</a>, which we can confirm by noticing that NameLocation::Kind::EnvironmentCoordinate is 6, matching the hardcoded constant.</p>
<p>Staring at the rest of the code, I've convinced myself that x27 is the BytecodeEmitter, and it's being used to reference the vector of bytecode we're emitting. A BytecodeEmitter contains a BytecodeSection at offset 32, which contains a BytecodeVector at offset 0. Doing the math, this means that x27+0x28 is <a href="https://searchfox.org/mozilla-central/rev/0c2945ad4769e2d4428c72e6ddd78d60eb920394/mfbt/Vector.h#402" rel="nofollow">mBegin</a>, x27+0x30 is the length, and x27+0x38 is the capacity. With that in mind, here's another interesting sequence of instructions. In this code, x23/w23 holds <code>0xffffffba</code>.</p>
<pre><code>0x6c1b455d4c	ldr x24, [x27, #0x30]     // x24 = offset (length of buffer before writing anything)
...	          
0x6c1b455da0	ldr x10, [x27, #0x28]     // x10 is address of buffer
0x6c1b455da4	strb w23, [x10, x24]      // write opcode in buffer at offset
...				          
0x6c1b455dac	ldr x9, [x27, #0x28]      // x9 is address of buffer
...				          
0x6c1b455db4	add x11, x9, x24          // x11 is offset of opcode we just wrote
0x6c1b455db8	ldrb w12, [x11]           // load the opcode
0x6c1b455dbc	add x10, x19, x12, lsl #3 // look it up in the codespec table
0x6c1b455dc0	ldrsb w13, [x10, #1]      // CRASH!
</code></pre>
<p>In short, we store the opcode in the buffer, then load it again to use as an index into the codespec table. The really interesting thing here is the ldrb. The ARM docs describe it as:</p>
<pre><code>LDRB Wt, addr
Load Byte: loads a byte from memory addressed by addr, then zero-extends it to Wt.
</code></pre>
<p>Since we just stored <code>0xba</code>, that's what x12 should contain. However, that's not what we're seeing. Looking at a dump, I see <code>x12 = 0x00000000ffffffba</code>. That's not zero-extended.</p>
<p>I have a strong suspicion that Samsung (or whoever designed this particular chip) messed up their store forwarding, and accidentally forwarded the entire register without clearing the upper bits.</p>
</div><div id="a1243656_24572"><p>Flags: <span>needinfo?(nicolas.b.pierron)</span></p></div><div id="c14" data-comment-id="16433947" data-ismarkdown="true"><p>Marking as S3 given that we've got some high-confidence this is a processor issue. The crash rate seems to have dropped a bit as well.</p>
<p>We'll need to investigate some mitigation if it keeps up</p>
</div><div id="c15"><div id="ct-15" data-comment-id="16444810" data-ismarkdown="true"><p>So this has started to spike even more.</p>
<p>At this point, it feels like we ought to do some refactoring to try to break sufficient dependencies that we no longer trigger this. I'll take a look at this shortly.</p>
</div><div><p>Severity: S3 ‚Üí S2</p><p>Flags: needinfo?(mgaudet)</p><p>Summary: Crash in [@ js::StackUses] in js::frontend::BytecodeSection::updateDepth(js::frontend::BytecodeOffset) ‚Üí Crash in [@ js::StackUses] in js::frontend::BytecodeSection::updateDepth(js::frontend::BytecodeOffset) (Samsung CPU Issue)</p></div></div><div id="c16">

  <p>The goal of this patch is to avoid the bad store forwarding on<br>
some Samsung phones</p></div><div id="a1955977_600971"><p>Assignee: nobody ‚Üí mgaudet</p><p>Status: NEW ‚Üí ASSIGNED</p></div><div id="a2014545_607045"><p>Flags: <span>needinfo?(mgaudet)</span></p></div><div id="c18" data-comment-id="16446130" data-ismarkdown="true"><p>Comment on <span><a href="https://bugzilla.mozilla.org/attachment.cgi?id=9337950" name="attach_9337950" title="Bug 1833315 - Pass JSOp along rather than recomputing r?iain">attachment 9337950</a> <a href="https://bugzilla.mozilla.org/attachment.cgi?id=9337950&amp;action=edit" title="Bug 1833315 - Pass JSOp along rather than recomputing r?iain">[details]</a></span><br>
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1833315" title="RESOLVED FIXED - Crash in [@ js::StackUses] in js::frontend::BytecodeSection::updateDepth(js::frontend::BytecodeOffset) (Samsung CPU Issue)">Bug 1833315</a> - Pass JSOp along rather than recomputing r?iain</p>
<h3>Beta/Release Uplift Approval Request</h3>
<ul>
<li><strong>User impact if declined</strong>: Users of Samsung Galaxy S20s may continue to experience more crashes.</li>
<li><strong>Is this code covered by automated tests?</strong>: Yes</li>
<li><strong>Has the fix been verified in Nightly?</strong>: No</li>
<li><strong>Needs manual test from QE?</strong>: No</li>
<li><strong>If yes, steps to reproduce</strong>:</li>
<li><strong>List of other uplifts needed</strong>: None</li>
<li><strong>Risk to taking this patch</strong>: Low</li>
<li><strong>Why is the change risky/not risky? (and alternatives if risky)</strong>: A fairly trivial refactor intended to cause a hardware bug to no longer manifest</li>
<li><strong>String changes made/needed</strong>:</li>
<li><strong>Is Android affected?</strong>: Yes</li>
</ul>
<p>Note: this patch is attempting to remove a bad access pattern that manifests exclusively on Samsung Galaxy S20 (and Note 20) hardware. It's hard to say if this will actually -fix- the issue, but it's hoped that this will remove the proximate cause.</p>
</div><div id="c19"><p>Status: ASSIGNED ‚Üí RESOLVED</p><p>Closed: <span title="2023-06-08 20:59 PDT" data-time="1686283188">2 months ago</span></p><p>Resolution: --- ‚Üí FIXED</p><p>Target Milestone: --- ‚Üí 116 Branch</p></div>



</div> 
</main> 
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[SQLedge: Replicate Postgres to SQLite on the Edge (218 pts)]]></title>
            <link>https://github.com/zknill/sqledge</link>
            <guid>37063238</guid>
            <pubDate>Wed, 09 Aug 2023 14:29:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/zknill/sqledge">https://github.com/zknill/sqledge</a>, See on <a href="https://news.ycombinator.com/item?id=37063238">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" dir="auto">SQLedge</h2>
<p dir="auto">[State: alpha]</p>
<p dir="auto">SQLedge uses Postgres logical replication to stream the changes in a source Postgres database to a SQLite database that can run on the edge.
SQLedge serves reads from its local SQLite database, and forwards writes to the upstream Postgres server that it's replicating from.</p>
<p dir="auto">This lets you run your apps on the edge, and have local, fast, and eventually consistent access to your data.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/zknill/sqledge/blob/main/etc/sqledge.png?raw=true"><img src="https://github.com/zknill/sqledge/raw/main/etc/sqledge.png?raw=true" alt="SQLedge"></a></p>
<h2 tabindex="-1" dir="auto">SQL generation</h2>
<p dir="auto">The <code>pkg/sqlgen</code> package has an SQL generator in it, which will generate the SQLite insert, update, delete statements based on the logical replication messages received.</p>
<h2 tabindex="-1" dir="auto">SQL parsing</h2>
<p dir="auto">When the database is started, we look at which tables already exist in the sqlite copy, and make sure new tables are created automatically on the fly.</p>
<h2 tabindex="-1" dir="auto">Postgres wire proxy</h2>
<p dir="auto">SQLedge contains a Postgres wire proxy, default on <code>localhost:5433</code>. This proxy uses the local SQlite database for reads, and forwards writes to the upstream Postgres server.</p>
<h3 tabindex="-1" dir="auto">Compatibility</h3>
<p dir="auto">When running, the SQL statements interact with two databases; Postgres (for writes) and SQLite (for reads).</p>
<p dir="auto">The Postgres wire proxy (which forwards reads to SQLite) doesn't currently translate any of the SQL statements from the Postgres query format/functions to the SQLite format/functions.
Read queries issued against the Postgres wire proxy need to be compatible with SQLite directly.
This is fine for simple <code>SELECT</code> queries, but you will have trouble with Postgres-specific query functions or syntax.</p>
<h2 tabindex="-1" dir="auto">Copy on startup</h2>
<p dir="auto">SQLEdge maintains a table called <code>postgres_pos</code>, this tracks the LSN (log sequence number) of the received logical replication messages so it can pick up processing where it left
off.</p>
<p dir="auto">If no LSN is found, SQLedge will start a postgres <code>COPY</code> of all tables in the <code>public</code> schema. Creating the appropriate SQLite tables, and inserting data.</p>
<p dir="auto">When the replication slot is first created, it exports a transaction snapshot. This snapshot is used for the initial copy. This means that the <code>COPY</code> command will read the data from
the transaction at the moment the replication slot was created.</p>
<h2 tabindex="-1" dir="auto">Trying it out</h2>
<ol dir="auto">
<li>
<p dir="auto">Create a database</p>
<div data-snippet-clipboard-copy-content="create database myappdatabase;"><pre><code>create database myappdatabase;
</code></pre></div>
</li>
<li>
<p dir="auto">Create a user -- must be a super user because we create a publication on all tables</p>
<div data-snippet-clipboard-copy-content="create user sqledger with login superuser password 'secret';"><pre><code>create user sqledger with login superuser password 'secret';
</code></pre></div>
</li>
<li>
<p dir="auto">Run the example</p>
<div data-snippet-clipboard-copy-content="SQLEDGE_UPSTREAM_USER=sqledger SQLEDGE_UPSTREAM_PASSWORD=secret SQLEDGE_UPSTREAM_NAME=myappdatabase go run ./cmd/sqledge/main.go"><pre><code>SQLEDGE_UPSTREAM_USER=sqledger SQLEDGE_UPSTREAM_PASSWORD=secret SQLEDGE_UPSTREAM_NAME=myappdatabase go run ./cmd/sqledge/main.go
</code></pre></div>
</li>
<li>
<p dir="auto">Connect to the postgres wire proxy</p>
<div data-snippet-clipboard-copy-content="psql -h localhost -p 5433

$ CREATE TABLE my_table (id serial not null primary key, names text);
$ INSERT INTO my_table (names) VALUES ('Jane'), ('John');

$ SELECT * FROM my_table;"><pre><code>psql -h localhost -p 5433

$ CREATE TABLE my_table (id serial not null primary key, names text);
$ INSERT INTO my_table (names) VALUES ('Jane'), ('John');

$ SELECT * FROM my_table;
</code></pre></div>
<p dir="auto">The read will be served from the local database</p>
</li>
<li>
<p dir="auto">Connect to the local sqlite db</p>
<div data-snippet-clipboard-copy-content="sqlite3 ./sqledge.db

.schema"><pre><code>sqlite3 ./sqledge.db

.schema
</code></pre></div>
</li>
</ol>
<h2 tabindex="-1" dir="auto">Config</h2>
<p dir="auto">All config is read from environment variables. The full list is available in the struct tags on the fields in <code>pkg/config/config.go</code></p>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Arpchat ‚Äì Text your friends on the same network using just ARP (168 pts)]]></title>
            <link>https://github.com/kognise/arpchat</link>
            <guid>37063151</guid>
            <pubDate>Wed, 09 Aug 2023 14:24:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/kognise/arpchat">https://github.com/kognise/arpchat</a>, See on <a href="https://news.ycombinator.com/item?id=37063151">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" dir="auto">arpchat</h2>
<p dir="auto">so... you know arp? the protocol your computer uses to find the mac addresses of other computers on your network? yeah. that.</p>
<p dir="auto">i thought it would be a great idea to hijack it to make a chat app :)</p>
<p dir="auto">built in two days because i was sick and had nothing better to do.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/98fa6186a676cb35796197e53a178dd2db5a54b978ee17046cffbeac0c8650b6/68747470733a2f2f646f67676f2e6e696e6a612f524a474859482e706e67"><img src="https://camo.githubusercontent.com/98fa6186a676cb35796197e53a178dd2db5a54b978ee17046cffbeac0c8650b6/68747470733a2f2f646f67676f2e6e696e6a612f524a474859482e706e67" alt="screenshot of the tool in action" data-canonical-src="https://doggo.ninja/RJGHYH.png"></a></p>
<h2 tabindex="-1" dir="auto">motivation</h2>
<ol dir="auto">
<li>once a year, i'm on a client isolated network that i want to chat with friends over</li>
<li>i'm completely insane</li>
<li>i'm a programmer</li>
</ol>
<p dir="auto">(i swear, i might actually briefly have a use for this! it might not be entirely useless! ... and other lies i tell myself)</p>
<h2 tabindex="-1" dir="auto">limitations</h2>
<p dir="auto">yes</p>
<h2 tabindex="-1" dir="auto">things i made arpchat do</h2>
<p dir="auto">you can send messages tens of thousands of characters long because i implemented a (naive) generalizable transport protocol on top of arp. there's also a bit of compression.</p>
<p dir="auto">if you wanted, you could probably split off the networking part of this and use it instead of udp. please don't do this.</p>
<p dir="auto">not only are join and leave notifications a thing, i built an entire presence discovery and heartbeat system to see an updated list of other online users. ironically, part of this serves a similar purpose to arp itself.</p>
<p dir="auto">for more information on how this all works technically, check out <a href="https://kognise.dev/writing/arp" rel="nofollow">the little article i wrote</a>.</p>
<h2 tabindex="-1" dir="auto">running</h2>
<p dir="auto">if you actually want to install this for some reason, you can get it from <a href="https://github.com/kognise/arpchat/releases/latest">the releases page</a>.</p>
<p dir="auto">on windows, you probably need <a href="https://npcap.com/#download" rel="nofollow">npcap</a>. make sure you check "Install Npcap in WinPcap API-compatible Mode" in the installer!</p>
<p dir="auto">on linux, you might have to give arpchat network privileges:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo setcap CAP_NET_RAW+ep /path/to/arpchat"><pre>sudo setcap CAP_NET_RAW+ep /path/to/arpchat</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/d6a67e2277f117ae95088c67d72b1486bdc26e2c23aa184453beb1f264f4a056/68747470733a2f2f646f67676f2e6e696e6a612f7476464a32412e706e67"><img src="https://camo.githubusercontent.com/d6a67e2277f117ae95088c67d72b1486bdc26e2c23aa184453beb1f264f4a056/68747470733a2f2f646f67676f2e6e696e6a612f7476464a32412e706e67" alt="interface selector" data-canonical-src="https://doggo.ninja/tvFJ2A.png"></a></p>
<p dir="auto">then just run the binary in a terminal. you know it's working properly if you can see your own messages when you send them. if you <em>can't</em> see your messages, try selecting a different interface or protocol!</p>
<p dir="auto">have any issues? that really sucks. you can make an issue if it pleases you.</p>
<h2 tabindex="-1" dir="auto">building</h2>
<p dir="auto">you don't really want to build this. anyway, it's tested on the latest unstable rust.</p>
<p dir="auto">on windows, download the <a href="https://www.winpcap.org/devel.htm" rel="nofollow">WinPcap Developer's Pack</a> and set the <code>LIB</code> environment variable to the <code>WpdPack/Lib/x64/</code> folder.</p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/3fb908fb79eee81c54a3bc988fa1b9a3997021a8a4e8e4d74fc104cd0640a7ce/68747470733a2f2f646f67676f2e6e696e6a612f664839474b742e706e67"><img src="https://camo.githubusercontent.com/3fb908fb79eee81c54a3bc988fa1b9a3997021a8a4e8e4d74fc104cd0640a7ce/68747470733a2f2f646f67676f2e6e696e6a612f664839474b742e706e67" alt="banner" data-canonical-src="https://doggo.ninja/fH9GKt.png"></a></p>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Want employees to return to the office? Then give each one an office (608 pts)]]></title>
            <link>https://www.washingtonpost.com/opinions/2023/08/09/remote-work-offices-floorplan-privacy/</link>
            <guid>37062650</guid>
            <pubDate>Wed, 09 Aug 2023 13:52:33 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.washingtonpost.com/opinions/2023/08/09/remote-work-offices-floorplan-privacy/">https://www.washingtonpost.com/opinions/2023/08/09/remote-work-offices-floorplan-privacy/</a>, See on <a href="https://news.ycombinator.com/item?id=37062650">Hacker News</a></p>
Couldn't get https://www.washingtonpost.com/opinions/2023/08/09/remote-work-offices-floorplan-privacy/: Error [ERR_FR_TOO_MANY_REDIRECTS]: Maximum number of redirects exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[I'm 17 and wrote this guide on how CPUs run programs (779 pts)]]></title>
            <link>https://github.com/hackclub/putting-the-you-in-cpu</link>
            <guid>37062422</guid>
            <pubDate>Wed, 09 Aug 2023 13:33:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/hackclub/putting-the-you-in-cpu">https://github.com/hackclub/putting-the-you-in-cpu</a>, See on <a href="https://news.ycombinator.com/item?id=37062422">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><themed-picture data-catalyst-inline="true"><picture>
  <source media="(prefers-color-scheme: dark)" srcset="https://github.com/hackclub/putting-the-you-in-cpu/raw/main/public/github-images/banner-dark.png">
  <img src="https://github.com/hackclub/putting-the-you-in-cpu/raw/main/public/github-images/banner-light.png" alt="">
</picture></themed-picture>
<h2 tabindex="-1" dir="auto">Putting the "You" in CPU</h2>
<p dir="auto">A technical explainer of how your computer runs programs, from start to finish.</p>
<p dir="auto">by <a href="https://github.com/kognise">@kognise</a> and <a href="https://github.com/hackclub">@hackclub</a></p>
<br>
<h2 tabindex="-1" dir="auto">From the beginning...</h2>
<p dir="auto">I've done <a href="https://github.com/kognise">a lot of things with computers</a>, but I've always had a gap in my knowledge: what exactly happens when you run a program on your computer? I thought about this gap ‚Äî I had most of the requisite low-level knowledge, but I was struggling to piece everything together. Are programs really executing directly on the CPU, or is something else going on? I've used syscalls, but how do they <em>work</em>? What are they, really? How do multiple programs run at the same time?</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/hackclub/putting-the-you-in-cpu/blob/main/public/images/writing-this-article.png"><img src="https://github.com/hackclub/putting-the-you-in-cpu/raw/main/public/images/writing-this-article.png" alt="A scrawled digital drawing. Someone with long hair is confused as they peer down at a computer ingesting binary. Suddenly, they have an idea! They start researching on a desktop computer with bad posture." width="700"></a></p>
<p dir="auto">I cracked and started figuring as much out as possible. There aren't many comprehensive systems resources if you aren't going to college, so I had to sift through tons of different sources of varying quality and sometimes conflicting information. A couple weeks of research and almost 40 pages of notes later, I think I have a much better idea of how computers work from startup to program execution. I would've killed for one solid article explaining what I learned, so I'm writing the article that I wished I had.</p>
<p dir="auto">And you know what they say... you only truly understand something if you can explain it to someone else.</p>
<blockquote>
<p dir="auto">In a hurry? Feel like you know this stuff already?</p>
<p dir="auto"><a href="https://cpu.land/how-to-run-a-program" rel="nofollow">Read chapter 3</a> and I guarantee you will learn something new. Unless you're like, Linus Torvalds himself.</p>
</blockquote>

<p dir="auto"><a href="https://cpu.land/the-basics" rel="nofollow"><strong>Continue to Chapter 1: The "Basics" ¬ª</strong><br>(cpu.land)</a></p>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Fear of AI Just Killed a Useful Tool (260 pts)]]></title>
            <link>https://www.techdirt.com/2023/08/08/the-fear-of-ai-just-killed-a-very-useful-tool/</link>
            <guid>37060974</guid>
            <pubDate>Wed, 09 Aug 2023 11:08:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.techdirt.com/2023/08/08/the-fear-of-ai-just-killed-a-very-useful-tool/">https://www.techdirt.com/2023/08/08/the-fear-of-ai-just-killed-a-very-useful-tool/</a>, See on <a href="https://news.ycombinator.com/item?id=37060974">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="storywrap-418142">


<h3>from the <i>can-we-not?</i> dept</h3>

<p>I do understand why so many people, especially creative folks, are worried about AI and how it‚Äôs used. The future is quite unknown, and things are changing very rapidly, at a pace that can feel out of control. However, when concern and worry about new technologies and how they may impact things morphs into mob-inspiring fear, dumb things happen. I would much rather that when we look at new things, we take a more realistic approach to them, and look at ways we can keep the good parts of what they provide, while looking for ways to mitigate the downsides.</p>
<p>Hopefully without everyone going crazy in the meantime. Unfortunately, that‚Äôs not really the world we live in.</p>
<p>Last year, when everyone was focused on generative AI for images, we had Rob Sheridan on the podcast to talk about why it was important for creative people to figure out <a rel="noreferrer noopener" href="https://www.techdirt.com/2022/09/13/techdirt-podcast-episode-329-is-ai-art-the-end-for-artists/" target="_blank">how to embrace the technology</a> rather than fear it. The opening story of the <a rel="noreferrer noopener" href="https://www.nytimes.com/2023/07/29/technology/mike-masnick-techdirt-internet-future.html" target="_blank">recent NY Times profile of me</a> was all about me in a group chat, trying to suggest to some very creative Hollywood folks how to embrace AI rather than simply raging against it. And I‚Äôve already called out how folks rushing to copyright, thinking that will somehow ‚Äúsave‚Äù them from AI, are <a rel="noreferrer noopener" href="https://www.techdirt.com/2023/07/19/stop-rushing-to-copyright-as-a-tool-to-solve-the-problems-of-ai/" target="_blank">barking up the wrong tree</a>.</p>
<p>But, in the meantime, the fear over AI is leading to some crazy and sometimes unfortunate outcomes. Benji Smith, who created what appears to be an absolutely amazing tool for writers, <a rel="noreferrer noopener" href="https://www.shaxpir.com/" target="_blank">Shaxpir</a>, also created what looked like an absolutely fascinating tool called Prosecraft, that had scanned and analyzed a whole bunch of books and would let you call up really useful data on books.</p>
<p>He created it years ago, based on an idea he had years earlier, trying to understand the length of various books (which he initially kept in a spreadsheet). As <a target="_blank" rel="noreferrer noopener" href="https://blog.shaxpir.com/taking-down-prosecraft-io-37e189797121">Smith himself describes in a blog post</a>:</p>
<blockquote>
<p><em>I heard a story on NPR about how </em><a target="_blank" rel="noreferrer noopener" href="https://www.youtube.com/watch?v=oP3c1h8v2ZQ"><em><u>Kurt Vonnegut</u></em></a><em> invented an idea about the ‚Äúshapes of stories‚Äù by counting happy and sad words. The University of Vermont ‚ÄúComputational Story Lab‚Äù published </em><a target="_blank" rel="noreferrer noopener" href="https://hedonometer.org/papers.html"><em><u>research papers</u></em></a><em> about how this technique could show the major plot points and the ‚Äúemotional story arc‚Äù of the </em><a target="_blank" rel="noreferrer noopener" href="https://hedonometer.org/books/v2/Harry%20Potter%20and%20the%20Sorcerer's%20Stone/"><em><u>Harry Potter</u></em></a><em> novels (as well as many many other books).</em></p>
<p><em>So I tried it myself and found that I could plot a graph of the emotional ups and downs of any story. I added those new ‚Äúsentiment analysis‚Äù tools to the prosecraft website too.</em></p>
<p><em>When I ran out of books on my own shelves, I looked to the internet for more text that I could analyze, and I used web crawlers to find more books. I wanted to be mindful of the diversity of different stories, so I tried to find books by authors of every race and gender, from every different cultural and political background, writing in every different genre and exploring all different kinds of themes. Fiction and nonfiction and philosophy and science and religion and culture and politics.</em></p>
<p><em>Somewhere out there on the internet, I thought to myself, there was a new author writing a horror or romance or fantasy novel, struggling for guidance about how long to write their stories, how to write more vivid prose, and how much ‚Äúpassive voice‚Äù was too much or too little.</em></p>
<p><em>I wanted to give those budding storytellers a suite of ‚Äúlexicographic‚Äù tools that they could use, to compare their own writing with the writing of authors they admire. I‚Äôve been working in the field of computational linguistics and machine learning for 20+ years, and I was always frustrated that the fancy tools were only accessible to big businesses and government spy agencies. I wanted to bring that magic to everyone.</em></p>
</blockquote>
<p>Frankly, all of that sounds amazing. And amazingly useful. Even more amazing is that he built it, and it worked. It would produce useful analysis of books, such as this example from Alice‚Äôs Adventures in Wonderland:</p>
<div>
<figure><img decoding="async" src="https://i0.wp.com/lex-img-p.s3.us-west-2.amazonaws.com/img/66fe5a2d-6b6a-4a0c-ac35-ac0be3cae2b0-RackMultipart20230808-122-dsis3v.png?ssl=1" alt="" data-recalc-dims="1"></figure>
</div>
<p>And, it could also do further analysis like the following:</p>
<div>
<figure><img decoding="async" fetchpriority="high" src="https://i0.wp.com/lex-img-p.s3.us-west-2.amazonaws.com/img/ed8ec575-1878-412b-a5f5-6d8b19fc0166-RackMultipart20230808-139-rgmlwd.png?resize=550%2C198&amp;ssl=1" alt="" width="550" height="198" data-recalc-dims="1"></figure>
</div>
<p>This is all quite interesting. It‚Äôs also the kind of thing that data scientists do on all kinds of work for useful purposes.</p>
<p>Smith built Prosecraft into Shaxpir, again, making it a more useful tool. But, on Monday, some authors on the internet found out about it and lost their shit, <a rel="noreferrer noopener" href="https://gizmodo.com/prosecraft-books-shut-down-ai-algorithms-novel-fiction-1850715319" target="_blank">leading Smith to shut the whole project down</a>.</p>
<p>There seems to be a lot of misunderstanding about all of this. Smith notes that he had researched the copyright issues and was sure he wasn‚Äôt violating anything, and he‚Äôs right. We‚Äôve gone over this many times before. <a rel="noreferrer noopener" href="https://www.techdirt.com/2013/11/14/google-gets-total-victory-over-authors-guild-book-scanning-is-fair-use/" target="_blank">Scanning books is pretty clearly fair use</a>. What you do with that later <em>could</em> violate copyright law, but I don‚Äôt see anything that Prosecraft did that comes anywhere even remotely close to violating copyright law.</p>
<p>But‚Ä¶ some authors got pretty upset about all of it.</p>
<div>
<figure><img decoding="async" src="https://i0.wp.com/lex-img-p.s3.us-west-2.amazonaws.com/img/5b81191f-7361-47b1-88d5-4260025691ea-RackMultipart20230808-162-wkk8di.png?ssl=1" alt="" data-recalc-dims="1"></figure>
</div>
<p>I‚Äôm still perplexed at what the complaint is here? You don‚Äôt need to ‚Äúconsent‚Äù for someone to analyze your book. You don‚Äôt need to ‚Äúconsent‚Äù to someone putting up statistics about their analysis of your book.</p>
<p>But, Zach‚Äôs tweet went viral with a bunch of folks ready to blow up anything that smacks of tech bro AI, and lots of authors started yelling at Smith.</p>
<div>
<figure><img decoding="async" src="https://i0.wp.com/lex-img-p.s3.us-west-2.amazonaws.com/img/c1fdb6a0-0bca-4b2c-b9c6-5103b6997b50-RackMultipart20230808-122-gei1hr.png?ssl=1" alt="" data-recalc-dims="1"></figure>
</div>
<p>The Gizmodo article has a ridiculously wrong ‚Äúfair use‚Äù analysis, saying ‚ÄúFair Use does not, by any stretch of the imagination, allow you to use an author‚Äôs entire copyrighted work without permission as a part of a data training program that feeds into your own ‚ÄòAI algorithm.‚Äô‚Äù Except‚Ä¶ it almost certainly does? Again, we‚Äôve gone through this with the Google Book scanning case, and the courts said that you can absolutely do that because it‚Äôs transformative.</p>
<p>It seems that what really tripped up people here was the ‚ÄúAI‚Äù part of it, and the fear that this was just another a VC funded ‚Äútech bro‚Äù exercise of building something to get rich by using the works of creatives. Except‚Ä¶ none of that is accurate. As Smith explained in his blog post:</p>
<blockquote>
<p><em>For what it‚Äôs worth, the prosecraft website has never generated any income. The Shaxpir desktop app is a labor of love, and during most of its lifetime, I‚Äôve worked other jobs to pay the bills while trying to get the company off the ground and solve the technical challenges of scaling a startup with limited resources. We‚Äôve never taken any VC money, and the whole company is a two-person operation just working our hardest to serve our small community of authors.</em></p>
</blockquote>
<p>He also recognizes that the concerns about it being some ‚ÄúAI‚Äù thing are probably what upset people, but plenty of authors have found the tool super useful, and even added their own books:</p>
<blockquote>
<p><em>I launched the prosecraft website in the summer of 2017, and I started showing it off to authors at writers conferences. The response was universally positive, and I incorporated the prosecraft analytic tools into the Shaxpir desktop application so that authors could privately run these analytics on their own works-in-progress (without ever sharing those analyses publicly, or even privately with us in our cloud).</em></p>
<p><em>I‚Äôve spent thousands of hours working on this project, cleaning up and annotating text, organizing and tweaking things. A small handful of authors have even reached out to me, asking to have their books added to the website. I was grateful for their enthusiasm.</em></p>
<p><em>But in the meantime, ‚ÄúAI‚Äù became a thing.</em></p>
<p><em>And the arrival of AI on the scene has been tainted by early use-cases that allow anyone to create zero-effort impersonations of artists, cutting those creators out of their own creative process.</em></p>
<p><em>That‚Äôs not something I ever wanted to participate in.</em></p>
</blockquote>
<p>Smith took the project down entirely because of that. He doesn‚Äôt want to get lumped in with other projects, and even though his project is almost certainly legal, he recognized that this was becoming an issue:</p>
<blockquote>
<p><em>Today the community of authors has spoken out, and I‚Äôm listening. I care about you, and I hear your objections.</em></p>
<p><em>Your feelings are legitimate, and I hope you‚Äôll accept my sincerest apologies. I care about stories. I care about publishing. I care about authors. I never meant to hurt anyone. I only hoped to make something that would be fun and useful and beautiful, for people like me out there struggling to tell their own stories.</em></p>
</blockquote>
<p>I find all of this really unfortunate. Smith built something really cool, really amazing, that does not, in any way, infringe on anyone‚Äôs rights. I get the kneejerk reaction from some authors, who feared that this was some obnoxious project, but couldn‚Äôt they have taken 10 minutes to look at the details of what it was they were killing?</p>
<p>I know we live in an outrage era, where the immediate reaction is to turn the outrage meter up to 11. I‚Äôm certainly guilty of that at times myself. But this whole incident is just sad. It was an overreaction from the start, destroying what had been a clear labor of love and a useful project, through misleading and misguided attacks from authors.</p>
<p>
Filed Under: <a href="https://www.techdirt.com/tag/ai/" rel="tag">ai</a>, <a href="https://www.techdirt.com/tag/analysis/" rel="tag">analysis</a>, <a href="https://www.techdirt.com/tag/benjy-smith/" rel="tag">benjy smith</a>, <a href="https://www.techdirt.com/tag/book-scanning/" rel="tag">book scanning</a>, <a href="https://www.techdirt.com/tag/copyright/" rel="tag">copyright</a>, <a href="https://www.techdirt.com/tag/data/" rel="tag">data</a>, <a href="https://www.techdirt.com/tag/fair-use/" rel="tag">fair use</a>, <a href="https://www.techdirt.com/tag/prosecraft/" rel="tag">prosecraft</a>, <a href="https://www.techdirt.com/tag/sentiment-analysis/" rel="tag">sentiment analysis</a>
<br>
Companies: <a href="https://www.techdirt.com/company/shaxpir/" rel="category tag">shaxpir</a>
</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[WeWork Warns of Possible Bankruptcy (115 pts)]]></title>
            <link>https://www.cnbc.com/2023/08/08/wework-warns-of-remaining-going-concern-and-says-bankruptcy-possible.html</link>
            <guid>37060871</guid>
            <pubDate>Wed, 09 Aug 2023 10:51:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cnbc.com/2023/08/08/wework-warns-of-remaining-going-concern-and-says-bankruptcy-possible.html">https://www.cnbc.com/2023/08/08/wework-warns-of-remaining-going-concern-and-says-bankruptcy-possible.html</a>, See on <a href="https://news.ycombinator.com/item?id=37060871">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="RegularArticle-ArticleBody-5" data-module="ArticleBody" data-test="articleBody-2" data-analytics="RegularArticle-articleBody-5-2"><div id="ArticleBody-InlineImage-107283593" data-test="InlineImage"><p>29 July 2023, Australia, Sydney: The logo of "Wework," a company that offers office space and coworking spaces for the self-employed and businesses, lights up downtown in front of skyscrapers.</p><p>Sebastian Christoph Gollnow | Picture Alliance | Getty Images</p></div><div><p>Four years ago <span data-test="QuoteInBody" id="RegularArticle-QuoteInBody-1"><a href="https://www.cnbc.com/quotes/WE/">WeWork</a><span><span id="-WatchlistDropdown" data-analytics-id="-WatchlistDropdown"></span></span></span> was preparing for a blockbuster IPO. Now the company is warning of possible bankruptcy.</p><p>"Our losses and negative cash flows from operating activities raise substantial doubt about our ability to continue as a going concern," WeWork said in a <a href="https://www.sec.gov/Archives/edgar/data/1813756/000181375623000059/we-20230630.htm" target="_blank">filing</a> with the SEC on Tuesday. </p><p>The spectacular collapse of a company once valued by SoftBank at <a href="https://www.cnbc.com/2018/10/10/softbank-in-talks-to-buy-majority-stake-in-loss-making-wework-source.html">$40 billion</a> has been years in the making, but is still surprising given the number of large commercial buildings around the world that don the company's name. The combination of the Covid pandemic, which led many businesses to exit their leases in favor of remote work, and the subsequent economic slump, has left WeWork heavy on debt and struggling to generate cash. </p><p>"If we are not successful in improving our liquidity position and the profitability of our operations, we may need to consider all strategic alternatives, including restructuring or refinancing our debt, seeking additional debt or equity capital, reducing or delaying our business activities and strategic initiatives, or selling assets, other strategic transactions and/or other measures, including obtaining relief under the U.S. Bankruptcy Code," the company said.</p><p>WeWork's stock has been trading below $1 since mid-March. It tumbled 26% to 15 cents in extended trading on Tuesday and now has a market cap below $500 million.</p><p>The company had a net loss in the first half of the year of $700 million after losing $2.3 billion in 2022. As of June 30, it had $205 million in cash and equivalents and total liquidity of $680 million. It has $2.91 billion in long-term debt. </p><p>WeWork first <a href="https://www.cnbc.com/2019/08/14/wework-releases-s-1-filing-for-ipo.html">sought</a> to go public in 2019, publishing its initial prospectus in August of that year. With its full financials available for everyone to see, the business was roundly criticized due to excessive spending and risks along with founder Adam Neumann's complex relationship at the company.</p><p>The IPO never made it out the door. <span data-test="QuoteInBody" id="RegularArticle-QuoteInBody-5"><a href="https://www.cnbc.com/quotes/SOBKY/">SoftBank</a><span><span id="-WatchlistDropdown" data-analytics-id="-WatchlistDropdown"></span></span></span> founder and CEO Masayoshi Son called his investment in WeWork <a href="https://www.cnbc.com/2020/05/18/softbank-ceo-calls-wework-investment-foolish-valuation-falls-to-2point9-billion.html">"foolish"</a> and his company took <a href="https://www.cnbc.com/2019/10/23/softbank-to-take-control-of-wework.html">majority control</a> of the business in a $5 billion financing package. Neumann was forced to step down. </p><p>In 2021, WeWork finally <a href="https://www.cnbc.com/2021/10/21/wework-goes-public-through-spac-.html">became public</a> through a merger with a special purpose acquisition company, or SPAC. But the turbulence continued. WeWork said its revenue grew just 3.6% year over year in the second quarter and declined 4% in the U.S., where it gets 41% of its sales. </p><p>Economic conditions led more members to depart, bring down revenue and cash flow, WeWork said. Even SoftBank is spending less on WeWork. In the second quarter, the company contributed $6 million of WeWork's revenue, down from $10 million in the second quarter of 2022, according to the filing.</p><p>Key factors for whether WeWork can remain a going concern include limiting capital expenditures, increasing revenue and seeking capital through debt or equity issuance.</p><p>Three board members resigned last week because of "a material disagreement regarding Board governance and the Company's strategic and tactical direction." Daniel Hurwitz, who had been chair since May, was one of them.</p><p>WeWork is still searching for a permanent leader. The company <a href="https://investors.wework.com/news-and-events/press-releases/financial-releases-details/2023/WeWork-Announces-CEO-Transition/default.aspx" target="_blank">said</a> in May that CEO Sandeep Mathrani would step down within days and that board member David Tolley, a former finance chief at Intelsat, would become interim CEO.</p><p>"WeCrashed," a miniseries about the rise and fall of the company, debuted on Apple TV+ last year.</p><p><strong>WATCH:</strong> <a href="https://www.cnbc.com/video/2023/03/29/wework-ceo-sandeep-mathrani-todays-occupiers-are-looking-for-turnkey-solutions.html">WeWork CEO Sandeep Mathrani: Today's occupiers are looking for turnkey solutions</a></p></div><div id="Placeholder-ArticleBody-Video-107216904" data-test="VideoPlaceHolder" role="region" tabindex="0" data-vilynx-id="7000292231" aria-labelledby="Placeholder-ArticleBody-Video-107216904"><p><img src="https://image.cnbcfm.com/api/v1/image/107216905-16800891191680089116-28786038316-1080pnbcnews.jpg?v=1680093166&amp;w=750&amp;h=422&amp;vtcrop=y" alt="WeWork CEO Sandeep Mathrani: Today's occupiers are looking for turnkey solutions"><span></span><span></span></p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mullvad VPN ‚Äì Infrastructure Audit Completed by Open Security (472 pts)]]></title>
            <link>https://mullvad.net/en/blog/2023/8/9/infrastructure-audit-completed-by-radically-open-security/</link>
            <guid>37060654</guid>
            <pubDate>Wed, 09 Aug 2023 10:18:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mullvad.net/en/blog/2023/8/9/infrastructure-audit-completed-by-radically-open-security/">https://mullvad.net/en/blog/2023/8/9/infrastructure-audit-completed-by-radically-open-security/</a>, See on <a href="https://news.ycombinator.com/item?id=37060654">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <p>We tasked the Netherlands based security firm Radically Open Security (RoS) with performing the third audit towards our VPN infrastructure.</p>

<p>We asked them to focus solely on VPN servers that run from RAM, one OpenVPN and one WireGuard server.</p>

<p>We invite you to <a href="https://mullvad.net/media/Mullvad_VPN_Pentest_Report_2023_1.1.pdf">read the final report</a><strong> </strong>of our third security audit, concluded in mid-June 2023, with many fixes deployed late June 2023. Further re-tests and a verification pass was performed during July.</p>

<p>RoS discovered a number of new findings, and we would like to thank them for their thorough and detailed report. They stated , amongst other things that: that whilst they found some issues, that: ‚ÄúThe Mullvad VPN relays which were the subject of this test showed a mature architecture‚Ä¶‚Äù and ‚ÄúDuring the test we found no logging of user activity data..‚Äù</p>

<p>We gave RoS full SSH access to two (2) VPN servers that were running from RAM, using our latest slimmed down Linux kernel (6.3.2) and customised Ubuntu 22.04 LTS based OS. These servers were deployed as though they were <strong>to be</strong> production customer-facing servers, however these servers <strong>have never been utilised </strong>as such.</p>

<p>We asked them to verify:</p>

<ul>
	<li>Security and set up of servers internally</li>
	<li>Security and set up of servers externally</li>
	<li>Whether or not we log customer activity</li>
</ul>

<p>RoS also asked whether they should investigate the source code of various binaries running on our systems, or whether they should take into consideration the hardware-level security. We declined both offers, stating that this is to be considered an <em>‚Äúafter the system is running and in-use by customers‚Äù</em> audit.</p>

<h2>Overview of findings</h2>

<ul>
	<li>Radically Open Security found no information leakage or logging of customer data</li>
	<li>RoS discovered 1 High, 6 Elevated, 4 Moderate, 10 Low and 4 info-severity issues during this penetration test.</li>
</ul>

<p><strong>Key takeaway:</strong> Our VPN infrastructure has been audited for the third time.</p>

<h2>Miscellaneous issues of interest</h2>

<h3>MLL-024 Production multihop traffic on test system (High)</h3>

<p><strong>To quote RoS:</strong><em> ‚ÄúImpact - Production user traffic is visible to pentest users.‚Äù</em></p>

<p><strong>Our comments:</strong></p>

<p>RoS were given production-like servers, provisioned and deployed like all other customer facing servers. The difference between these and the rest of our fleet is that they have never been made available for customers to connect, they were not advertised in our server list, and not offered up to users. However, as these servers are connected to our WireGuard multihop functionality, <strong>any customer scanning for IPs</strong> can send traffic though them whilst connected to another VPN server using a SOCKS5 proxy, as there is nothing blocking it.</p>

<p>In what RoS discovered there was only the IP from the WireGuard internal interface. This interface is only available to SOCKS5 multihop traffic, so it would be the entry WireGuard server.</p>

<p>Without providing RoS with production servers the audit would not have been valid as a production server audit, and there would have been no way to prevent customer traffic from being visible on the servers.</p>

<h3>MLL-019 - LPE to root using systemd timers and insecure directory permissions (Elevated)</h3>

<p><strong>To quote RoS:</strong><em> ‚ÄúLow-privileged system accounts can elevate their privileges to root by manipulating systemd timer script content.‚Äù</em></p>

<p><strong>Our comments:</strong></p>

<p>It became obvious after consulting with RoS that the primary issue here is the use of nested home directories, and the addition of administrator users being part of the <code>mad</code> group.</p>

<p>The usage of the nested <code>/home/mad</code> directory structure is a legacy remnant of pre-RAM VPN servers, which is going to be removed in the upcoming updates to our infrastructure. In the short-term we have removed all administrator users from being part of the <code>mad</code> group, but we have also moved all related scripts to <code>/opt/local_checks</code> which RoS acknowledged as resolving the issue.</p>

<h3>MLL-045 ‚Äî Administrator access to production machines (Moderate)</h3>

<p><strong>To quote RoS:</strong> <em>‚ÄúVPN servers accept remote logins from administrators, who technically have the ability to tap into production users' VPN traffic‚Äù</em></p>

<p><strong>Our comments:</strong></p>

<p>We have been aware of this issue for some time, and conversing with RoS only confirmed our plans to implement such measures:</p>

<ul>
	<li>Implement a method by which unauthorised logins can be auditable, and add a log of all the commands (without arguments) used on these servers. We are implementing such a system.</li>
	<li>Remove support for SSH entirely, this would mean that even administrators could not enable logging of customer traffic, since no access is enabled over SSH. We are investigating such a system, though this will take more time to perform correctly.</li>
</ul>

<h3>MLL-016 - Telegraf password shared across servers (low)</h3>

<p><strong>To quote RoS: </strong><em>‚ÄúShared Influx database credentials used by Telegraf across VPN servers allows manipulation of global server metrics, such as CPU and disk usage or network metrics.‚Äù</em></p>

<p><strong>Our comments:</strong></p>

<p>We deemed the best course of action here to implement client certificates for authentication using the PKI infrastructure available within Hashicorp Vault. This has now been implemented, and we will investigate the use of such certificates in other places across our infrastructure.</p>

<p>---</p>

<p>There are more changes to be deployed in the near future, and the listed fixes are examples of the most interesting issues that Radically Open Security found.</p>

<p>For the universal right to privacy,<br>
Mullvad</p>
        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[New part day: Finally a 100% new Commodore 64 can be built (200 pts)]]></title>
            <link>https://1nt3r.net/j-cia/</link>
            <guid>37060269</guid>
            <pubDate>Wed, 09 Aug 2023 09:07:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://1nt3r.net/j-cia/">https://1nt3r.net/j-cia/</a>, See on <a href="https://news.ycombinator.com/item?id=37060269">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<h2>J-CIA - MOS 6526 / 8521 / (8520) FPGA REPLACEMENT</h2>
<p><img src="https://1nt3r.net/j-cia/JCIA64_2.JPG" alt="J-CIA, J-CIA64, J6526, FPGA 6526 / 8521"></p><h2>Modern spare part for Commodore 64, Commodore 128, SX-64 and 1570/1571 -drives</h2>

<li>FPGA based replacement for MOS 6526 &amp; 8521 CIA chips</li>
<li>Complete logic and all features of the original IC's implemented</li>
<li>All diagnostic &amp; software tests passed 100%, including all tests in Wolfgang Lorenz's test suite and Vice-project's CIA-tests.</li>
<li>[Vice's ciaports-tests may show partly incorrect results, but then again, original cias show variable results too.]</li>
<li>Hundreds of demos and games already tested, no known compatibility issues currently</li>
<li>Physically about the same size as the original CIAs</li>
<li>Lots of hardware tested and found to be compatible including (but not limited to) WifiModem, Ultimate-II+, SD2IEC, TapeCart, 1351-mouse</li>
<li>Tested with all C64 mainboard revisions, SX-64 and with EVO64 mainboard, Commodore 128 (including CP/M and disk drive burst-mode) and 1570 &amp; 1571.</li>
<li>Works in 1 MHz and 2 MHz modes.</li>
<li>This 6526/8521 version has been tested to work on a 1581 drive too by a betatester, but full compatibility cannot be guaranteed.
</li><li>(8520 Amiga -version would be the correct one for 1581)</li>
<li>&nbsp;</li>
<li><span color="red">This "J-CIA64" -version is not compatible with Amiga / 8520-CIA and cannot be later converted or upgraded to be.</span></li>
<li>Amiga -compatible version will be a separate product that will be released later.</li>

<h3>Changing mode between 8521 "new" and 6526 "old" CIA:</h3>
<li>Mode between new (8521) and old (6526) cia type can be changed</li>
<li>with a solder jumper on the underside of J-CIA64</li>
<li>"New" 8521 mode is default and 6526-mode can be enabled by soldering</li>
<li>two pads together as in the right on the image below:</li>
<p><img src="https://1nt3r.net/j-cia/mode-jumper.jpg" alt="J-CIA64 mode jumper"></p><li>Usually, the mode doesn't need to be changed,</li>
<li>most sofware and hardware are designed to work with both versions.</li>
<h3>Installation</h3>
<li>Although J-CIA could be soldered directly to mainboard, using IC sockets is highly recommended.</li>
<li>Pins on J-CIA are gold plated round pins, which will work with all kinds of sockets, but</li>
<li>the pins are a bit thicker than original IC-pins, which may cause slight stress to some leaf-type</li>
<li>sockets. This is a the same with all reproduction IC's with turned pins. </li>
<li>Be careful when pressing the J-CIA into a socket and make sure it is aligned properly and </li>
<li>pressed down evenly to avoid bending or breaking of pins.</li>
<li>&nbsp;</li>
<li>J-CIA orientation: PIN 1 is marked with a number 1 on PCB. That should match PIN 1 position on mainboard.</li>
<li>There is also a half circle marked on the top of the J-CIA. This relates to the notch on original IC's and the notch on IC-sockets</li>
<li>On a C64 CIA PIN 1 is located on top left of the both CIA -locations.</li>
<li>On a C128 the other CIA position is "upside-down", so be careful installing a new CIA the correct way</li>
<li>&nbsp;</li>
<li>Original RF-shields may require insulating, modifications or even removing.</li>
<li>Before turning on the power, check that the RF-shield metal does not touch J-CIA(s).</li>
<h3>Disclaimer</h3>
<li>J-CIA / J-CIA64 reproduces the functionality of the original MOS CIA's</li>
<li>Because it's a reproduction, it cannot be ever fully like the original.</li>
<li>Logic aims to be exactly like the original, but there may be differences that have not been found yet.</li>
<li>Electrically J-CIA is "close enough" to the original CIA, but it is not exactly the same.</li>
<li><i>Although tested with a lot of hardware and software, compatibility with all hardware and software cannot be guaranteed.</i></li>
<li>nstalling the J-CIA64 requires delicate handling and taking the proper precautions to prevent antistatic discharges.</li>
<li>The seller or manufacturer cannot be held responsible for any possible damage this product may cause to your</li>
<li>equipment due to incorrect installation or mishandling of the product.</li>

<h3>More info</h3>
<li>J-CIAs tested on Retro Recipes youtube -channel: <a href="https://youtu.be/EL2HVRtjuIg">https://youtu.be/EL2HVRtjuIg</a></li>
<li>&nbsp;</li>
<h3>Where to buy?</h3>
<li>J-CIA is or will be available soon at the following online shops:</li>
<li>&nbsp;</li>
<li>Run Stop Re-Store on Retro8bitshop is one of the biggest Commodore 64 spare parts depot in the world,</li>
<li>with huge stocks of New Old Stock components, as well as modern alternatives, with fast shipping and top-notch service.</li>
<li>J-CIA at their web shop: <a href="https://retro8bitshop.com/product/j-cia64/">https://retro8bitshop.com/product/j-cia64/</a>
</li><li>Run Stop Re-Store ships internationally!</li>
<li>&nbsp;</li>
<li>Retrospective shop will have J-CIA's in stock soon.</li>
<li><a href="https://retrospective.shop/">https://retrospective.shop/</a> Retrospective shop ships internationally too!</li>
<li>&nbsp;</li>
<li>Finnish customers can buy J-CIA's at Am-Mek web shop at <a href="https://shop.am-mek.fi/">https://shop.am-mek.fi/</a></li>
<li>Am-Mek ships only to Finland.</li>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Intel's GPU Drivers Now Collect Telemetry, Including 'How You Use Your Computer' (251 pts)]]></title>
            <link>https://www.extremetech.com/gaming/intels-gpu-drivers-now-collect-telemetry-including-how-you-use-your-computer</link>
            <guid>37060226</guid>
            <pubDate>Wed, 09 Aug 2023 09:01:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.extremetech.com/gaming/intels-gpu-drivers-now-collect-telemetry-including-how-you-use-your-computer">https://www.extremetech.com/gaming/intels-gpu-drivers-now-collect-telemetry-including-how-you-use-your-computer</a>, See on <a href="https://news.ycombinator.com/item?id=37060226">Hacker News</a></p>
Couldn't get https://www.extremetech.com/gaming/intels-gpu-drivers-now-collect-telemetry-including-how-you-use-your-computer: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Canonical's interview process step by step (by step by step by) (291 pts)]]></title>
            <link>https://old.reddit.com/r/recruitinghell/comments/15kj845/canonical_the_recruitment_process_really_is_that/</link>
            <guid>37059857</guid>
            <pubDate>Wed, 09 Aug 2023 08:02:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://old.reddit.com/r/recruitinghell/comments/15kj845/canonical_the_recruitment_process_really_is_that/">https://old.reddit.com/r/recruitinghell/comments/15kj845/canonical_the_recruitment_process_really_is_that/</a>, See on <a href="https://news.ycombinator.com/item?id=37059857">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>In case you‚Äôre wondering how Canonical‚Äôs infamous recruitment process plays out, here‚Äôs a step-by-step account of what I went through for a non-technical role. I didn‚Äôt have any immediate need to land a new job, which is part of the reason why I decided to stick with it to see how it worked. (Had I succeeded, I would have been onboarded 4-5 months after I‚Äôd sent in my CV.)</p>

<p><strong>tl;dr It took 81 days, a CV, a cover letter, an application form, a 22-question written interview, two standardised tests, and four (4) in-person interviews. And that wasn‚Äôt even close to the entire recruitment process!</strong></p>

<p>Day 0: I read about this job and I was SO EXCITED because it ticked all my boxes. I literally got home from work and applied. I submitted my CV and answered the questions in their application form. Some of them asked about high school. Canonical ‚Äì or, should we say, Mark Shuttleworth, the self-appointed benevolent dictator for life - genuinely believes that knowing what you did in high school will give useful information about whether they should hire you. They justify this all over the place.</p>

<p>Day 25: Automated email from a person stating they were my hiring lead. &nbsp;This email included the written interview ‚Äì 22 questions about everything from ‚ÄòWhat would you most want to change about Canonical?‚Äô (sure, let me just critizicize the company I am trying to work for) to multiple questions about high school. Even if you are in a country where it isn‚Äôt called high school, or if you were homeschooled, or were in a chaotic foster care situation and moved schools multiple times, or if you dropped out and later got a GED (or didn‚Äôt). They don‚Äôt care if you have to drag up actual traumas from decades ago - you WILL tell them about high school.</p>

<p>I suspect most of the value here is that they use it as a winnowing process, given that they have tens of thousands of applicants every month. If you‚Äôre not willing to jump through this hoop, that‚Äôs one less person they have to consider.</p>

<p>I didn‚Äôt keep notes from my first interview and that person may have referred to my written interview, but no one else did, even though I had some brilliant answers (the way I won a major post-college scholarship was a masterpiece of An Example Of A Time Where I Showed Initiative, thanks very much).</p>

<p>Here it is:</p>

<p><em>Context</em></p>

<p><em>Outline your thoughts on the mission of Canonical. What is it about the company's purpose and goals which is most appealing to you? What do you see as risky or unappealing?</em></p>

<p><em>Why do you most want to work for Canonical?</em></p>

<p><em>What would you most want to change about Canonical?</em></p>

<p><em>What gets you most excited about this role?</em></p>

<p><em>What support would you need from Canonical to be successful</em></p>

<p><em>Experience</em></p>

<p><em>Please outline your most relevant experience for this role.</em></p>

<p><em>What are the key attributes of an outstanding executive assistant?</em></p>

<p><em>Please describe a situation where you had to hold firm on a difficult issue.</em></p>

<p><em>What is different about the role of Executive Assistant in a remote-first business?</em></p>

<p><em>Describe any experience you have working across many time zones.</em></p>

<p><em>Describe improvements you have made to a process in previous roles.</em></p>

<p><em>How do you remain calm in a high-stress, fast-paced environment?</em></p>

<p><em>What has been the highlight of your career so far, and why?</em></p>

<p><em>Education</em></p>

<p><em>We consider academic results in high school and university for all roles, regardless of seniority or department. To enjoy a long and varied career at Canonical, one would need to tackle problems that cannot be defined today! From engineering to marketing to operations and sales, we intensely value colleagues who are able to puzzle through difficult problems and find the optimal path forward.</em></p>

<p><em>How did you rank in your high school, in your final year in maths and hard sciences? Which was your strongest?</em></p>

<p><em>How did you rank in your high school, in your final year in languages and the arts? Which was your strongest?</em></p>

<p><em>Please state your high school graduation results or university entrance results, along with the system used, and how to understand those. For example, in the US, you might give your SAT or ACT scores. In Germany, you might give your scores 1-5.</em></p>

<p><em>What sort of high school student were you? Outside of class, what were your interests and hobbies? What would your high school peers remember you for, if we asked them?</em></p>

<p><em>Which university and degree did you choose? What other universities did you consider, and why did you select that one?</em></p>

<p><em>At university, did you do particularly well in an area of your degree?</em></p>

<p><em>Overall, what was your degree result and how did that reflect on your ability?</em></p>

<p><em>In high school and university, what did you achieve that was exceptional?</em></p>

<p><em>What leadership roles did you take on during your education?</em></p>

<p>Day 29: Submitted the written interview.</p>

<p>Day 30: Completed the Thomas GIA test. This is a standardised test which makes you rotate shapes in a box, work out basic logic problems, and do things with words and numbers. I hate standardised tests, because all they reveal is how good you are at taking standardised tests (this is what I mentioned in the ‚Äòtell us what you‚Äôd change‚Äô section of the written interview) and no, they are not unbiased.</p>

<p>I did as many practice tests as I could to make sure I aced it, and according to the Thomas International report I got afterwards, I scored well in all five areas. They didn‚Äôt give me my actual scores but I was ‚Äòabove average‚Äô, and they gave advice on how these results would affect&nbsp;my working relationships. For all five areas, the advice they gave me was basically, ‚Äòwhen you‚Äôre talking to your wooden-headed co-workers, dumb&nbsp;it down for the proles, Brainiac.‚Äô</p>

<p>Day 32: I was invited for an interview. Or rather, three interviews ‚Äì two with people on the team I was applying to, one on a different team. One hour each. They don‚Äôt compare notes, so all of their opinions are allegedly unbiased, but a) this means you get asked the same/similar questions, which is boring for me and a waste of time for them, and b) exactly how unbiased is it when every person I interviewed with was exactly my demographic? (White, female, American/western European. The fifth interview, had I reached it, would have been in that demographic too. My hiring lead was a woman of colour, but my only non-automated contact with her was one brief response to an email I sent her early in the process.)</p>

<p>Day 35: Automated email from Mark Shuttleworth which started, ‚ÄòGiven that you are now starting the final stage interview to join our team‚Äô, even though I was nowhere near the final stage interviews. Mark‚Äôs icon is a green dragon, which indicated that if I made it through this interminable quest, he would be the final boss fight. Someone might want to fix the typos in this email.</p>

<p>Day 46: Peer interview 1. Pretty chill. She said she was the newest member of the team.</p>

<p>Day 51: Cross-team interview. Since this was with someone in the travel department (there was a LOT of travel with this job), I assumed she would ask me about my extensive travel experience...but no, it was all boring rote competency stuff (‚Äòtell me about a time you solved a problem‚Äô). The final question was the ‚Äòfun‚Äô one ‚Äì what was I watching on my favourite streaming service? I don‚Äôt have one, thanks. Seriously, though, your entire career is in travel, and this job is a lot about travel (both doing it and organising it), and I have travelled to one of the most dangerous places on earth multiple times, as I mentioned in my cover letter, and you‚Äôre not going to ask me a single question about that?</p>

<p>Day 52: Peer interview 2. Geniunely one of the most fun interviews I‚Äôve ever had. She told me outright that she was putting me forward as a good prospect, calling me an Ubuntu fangirl (aw, shucks), telling me I‚Äôd fit in and it was great that I was genuinely interested in the product and open source and would fit in with their software engineers.</p>

<p>Day 65: Received an invitation to book my interview with the Talent team ‚Äì they call them Talent Scientists (?! ‚Äì even one of my interviewers thought that was a dumb name) ‚Äì and do the most ridiculous standardised test ever, the Thomas PPA, where you pick words that are most and least like you, and then they calculate your actual personality from the words you don‚Äôt choose, or something. I pretended I was the best example of my role and chose the words that described that persona. No one ever referred to either of these standardised tests, by the way.</p>

<p>The interview booking email included&nbsp;the following line about scheduling this interview:</p>

<p><em>‚ÄòWe‚Äôd appreciate it if you pick the earliest time available.‚Äô</em></p>

<p>You <strong>what</strong>?</p>

<p>You‚Äôve been stringing me along for over two months, and you‚Äôre instructing <strong>me</strong> not to dawdle?</p>

<p>At some point around this time, I realised the main problem with this ridiculously drawn-out interview process was that I didn‚Äôt care anymore. I was so excited when I applied, and I lost every bit of that along the way. All I was doing was jumping through their hoops and answering the same types of questions. No one actually wanted to talk to me about any of the great things I‚Äôd told them about in my written interview, or even the interesting stuff I‚Äôd done in my most recent jobs, even when it was highly relevant for this job.</p>

<p>Day 78: Interview with the Talent ‚ÄòScientist‚Äô. (Another white western woman.) This interview was so dry and robotic. 30 minutes of going backwards through my CV, with her asking the same rote questions about each job. No, I don‚Äôt know what the guy who hired me ad hoc for a few months to write some grant applications would have said my weaknesses were, but dammit she insisted I had to come up with something. 20 minutes of the same competency-based questions hurled at me for the three previous interviews. I clearly got dinged for not showing enough initiative in one of my examples and for only having done a particular aspect of my role for 12 people (when for this job I‚Äôd have needed to do it for hundreds of people).</p>

<p>There was all of 10 minutes to actually discuss working conditions at the company. This was my fourth interview, and only now were things like ‚Äòwe don‚Äôt provide you with a laptop‚Äô coming up. (And you have to install Ubuntu on it - which, sure, eat your own dog food, but if you‚Äôre using a Macbook, installing Ubuntu is a pain. And it wasn‚Äôt as if I was actually going to be working with the product itself.) Annual leave allowances were generous, definitely above the statutory UK requirements, but not being able to float the bank holidays implied that non-Christian staff members would need to use annual leave for their own religious holidays while being mandated to take off Good Friday and Easter Monday. Salary expectations were mentioned but I literally had no idea, so that was something that would have been discussed later on in the process, had I made it that far.</p>

<p>I didn‚Äôt.</p>

<p>Day 81: Automated rejection. A long, long email I didn‚Äôt read to the end. I wonder whether their Talent ‚ÄòScientists‚Äô factor in interview fatigue when they judge whether you are permitted to move forward.</p>

<p>Had I continued the process, I would have gone through at least four and possibly five more interviews with:</p>

<p>- a senior member of the team</p>

<p>- the leader of the team</p>

<p>- my hiring lead</p>

<p>- one of the people I would have been working with</p>

<p>- and possibly the space-faring South African billionaire himself. I even knew what witty question I would have asked him. Alas, ‚Äòtwill never be.</p>

<p>So that‚Äôs what you can expect with Canonical. Go for it if the job is something you really want, and if you have no immediate need for a job, and if you really really REALLY like having interviews.</p>

<p>PS Just before posting this, I got an automated email asking me, ‚Äúhow has [sic] your interview experience?‚Äù Well, here‚Äôs your answer.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Amazon has more than half of all Arm server CPUs in the world (189 pts)]]></title>
            <link>https://www.theregister.com/2023/08/08/amazon_arm_servers/</link>
            <guid>37059533</guid>
            <pubDate>Wed, 09 Aug 2023 07:05:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theregister.com/2023/08/08/amazon_arm_servers/">https://www.theregister.com/2023/08/08/amazon_arm_servers/</a>, See on <a href="https://news.ycombinator.com/item?id=37059533">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body">
<p>Amazon is the most successful manufacturer of Arm server chips, accounting for just over half of Arm-based server CPUs currently deployed, while some chipmakers are also now betting on Arm-based Windows PCs.</p>
<p>This information comes from a report issued by Bernstein Research which estimates that nearly 10 percent of servers across the world contain Arm processors, and 40 percent of those are located in China, as we <a target="_blank" href="https://www.theregister.com/2023/08/02/arm_server_china/">reported</a> earlier.</p>
<p>But that total is beaten by just one company ‚Äì Amazon ‚Äì which has slightly above 50 percent of all Arm server CPUs in the world deployed in its Amazon Web Services (AWS) datacenters, said the analyst.</p>

    

<p>Amazon currently uses its own Graviton family of chips, designed by the Annapurna Labs division of Amazon Web Services and introduced to the world back in 2018, which are for its own internal use only. The latest iteration is the <a target="_blank" href="https://www.theregister.com/2022/11/29/aws_graviton3e_srd/">Graviton3E</a> for high-performance computing applications, introduced towards the <a target="_blank" href="https://www.nextplatform.com/2022/01/04/inside-amazons-graviton3-arm-server-processor/">end of 2022</a>.</p>

        


        

<p>According to Bernstein, because these chips were optimized for the specific needs of AWS, the company is able to fit in more cores per socket or per rack and the chips consume less power, translating to lower spending on space and cooling.</p>
<p>It is often asserted that while Arm cores might be more energy efficient, they provide lower performance than x86 chips. However, the report said that customer testimonies compiled by Amazon claim 20 percent to 70 percent lower cost at the same performance as comparable x86 chips.</p>

        

<p>Bernstein's report estimates that Graviton represented about 20 percent of AWS CPU instances by mid-2022, most of which would have been the 7nm Graviton2, but Amazon is moving to deploy 5nm Graviton3 and 3E instances and is expected to introduce a Graviton4 with the Armv9 architecture fabricated using TSMC's 3nm production process in 2025.</p>
<p>Ampere is credited as being "arguably the second most successful Arm server CPU supplier," which the report estimates to have between 5 and 10 percent of this market. It managed to grow from essentially nothing to account for 0.6 percent of all CPU instances available from cloud providers globally by mid-2022, as per the report.</p>
<h3>Future of Huawei and Phytium CPUs 'unclear'</h3>
<p>Other companies with Arm server chips include Nvidia, which is introducing <a target="_blank" href="https://www.theregister.com/2022/06/17/nvidia_arm_servers/">products based on its Grace Arm CPU</a> to market, plus Huawei and Phytium in China. However, Bernstein notes that "US export controls put Phytium on the Entity List and Huawei on the Foreign Direct Product rule," as a consequence of which, both are facing difficulties in accessing foundries with advanced process node technologies and "the future of their CPUs is very unclear."</p>
<p>Looking beyond servers, Bernstein's report estimates that Arm chips powered about 12 percent of PCs shipped in the fourth quarter of 2022 (excluding Chromebooks), with the vast majority of these being Macs.</p>
<ul>

<li><a href="https://www.theregister.com/2023/08/03/aws_custom_xeon_m7i_instances/">AWS is running a 96-core, 192-thread, custom Xeon server</a></li>

<li><a href="https://www.theregister.com/2023/06/15/amd_aws_bergamo/">Amazon isn't sold on AMD's tiny Zen 4c cores in manycore Bergamo processors</a></li>

<li><a href="https://www.theregister.com/2023/05/19/microsoft_hiring_chip_designers/">Microsoft offers electrical engineers a lifeline as it pursues custom cloud silicon</a></li>

<li><a href="https://www.theregister.com/2023/02/27/bitnami_arm_support/">Arm has legs: VMware's Bitnami starts packaging apps for Graviton and Ampere</a></li>
</ul>
<p>The research notes that Qualcomm has invested heavily to try to replicate Apple's success with Arm-based Macs on Windows PCs, via its <a target="_blank" href="https://www.theregister.com/2021/03/16/qualcomm_closes_nuvia_announces_chipset/">acquisition of chip designer Nuvia</a>. Bernstein expects to see Qualcomm launch the first chip later this year, and that devices such as Microsoft's Surface will be available with it shortly after.</p>
<p>However, the report warns that unlikethe "closed" software systems of Apple and the cloud providers, the open software ecosystem of Windows (sorry readers, that's what the report says), with its catalogue of x86 applications, makes introducing Windows-based PCs on a new CPU architecture a much more difficult proposition.</p>
<p>Other companies dipping a toe in the Arm-based PC market include Taiwan-based <a target="_blank" href="https://www.theregister.com/2022/11/16/qualcomm_arm_windows/">MediaTek</a> and Samsung, and Microsoft notably launched an <a target="_blank" href="https://www.theregister.com/2022/10/25/windows_dev_kit_2023/">Arm-powered developer system</a>, the Windows Dev Kit 2023, late last year. ¬Æ</p>                                
                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A Critical Problem (2017) (235 pts)]]></title>
            <link>https://nucleardiner.wordpress.com/2017/06/19/a-critical-problem/</link>
            <guid>37059487</guid>
            <pubDate>Wed, 09 Aug 2023 06:55:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://nucleardiner.wordpress.com/2017/06/19/a-critical-problem/">https://nucleardiner.wordpress.com/2017/06/19/a-critical-problem/</a>, See on <a href="https://news.ycombinator.com/item?id=37059487">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
		<main id="main" role="main">

		
							
<article id="post-7745">
	
	<!-- .entry-header -->

	<div>
		
<div itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageGallery" data-original-width="1000" data-original-height="1322" data-carousel-extra="{&quot;blog_id&quot;:98885650,&quot;permalink&quot;:&quot;https:\/\/nucleardiner.wordpress.com\/2017\/06\/19\/a-critical-problem\/&quot;,&quot;likes_blog_id&quot;:98885650}"> <a href="https://nucleardiner.wordpress.com/2017/06/19/a-critical-problem/700lanl-rods-too-close-001-170619/" itemprop="url"> <meta itemprop="width" content="996"> <meta itemprop="height" content="1318"> <img data-attachment-id="7747" data-orig-file="https://nucleardiner.files.wordpress.com/2017/06/700lanl-rods-too-close-001-170619.jpg" data-orig-size="529,700" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="700lanl-rods-too-close-001 170619" data-image-description="" data-medium-file="https://nucleardiner.files.wordpress.com/2017/06/700lanl-rods-too-close-001-170619.jpg?w=227" data-large-file="https://nucleardiner.files.wordpress.com/2017/06/700lanl-rods-too-close-001-170619.jpg?w=529" src="https://nucleardiner.files.wordpress.com/2017/06/700lanl-rods-too-close-001-170619.jpg?w=996&amp;resize=996%2C1318&amp;h=1318#038;h=1318" width="996" height="1318" data-original-width="996" data-original-height="1318" itemprop="http://schema.org/image" title="700lanl-rods-too-close-001 170619" alt="700lanl-rods-too-close-001 170619" data-recalc-dims="1"> </a> </div>
<p>This photo gives me the creeps.<span id="more-7745"></span></p>
<p>When you work with dangerous stuff, you have to condition yourself to respond at the level of emotion. You have to think things out too, but having a sense of what you can and can‚Äôt do that operates immediately is important. Children learn that hot stoves and automobile traffic are dangerous. We automatically stop at the street. It‚Äôs tourist season in Santa Fe, though, and I have observed that some lack that automatic response.</p>
<p>I‚Äôve dealt with dangerous stuff since I was a child. I had a real chemistry set, not the baking-powder-and-vinegar wimp boxes that are the only things sold now. My parents walked with me a lot in the outdoors and made it clear that wild strawberries were good to eat and deadly nightshade was not.</p>
<p>I loved my lab courses in high school and college. Working at a national laboratory added more precautions I needed to learn. I worked with high-voltage lasers. I did a little bit of plutonium chemistry in a glovebox. And then I managed people who were developing cans for storing plutonium.</p>
<p>We expected the plutonium to be in the form of flat cylindrical ingots, like the enriched uranium in this photo. <img data-attachment-id="7746" data-permalink="https://nucleardiner.wordpress.com/2017/06/19/a-critical-problem/400px-heuraniumc/" data-orig-file="https://nucleardiner.files.wordpress.com/2017/06/400px-heuraniumc.jpg" data-orig-size="400,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="400px-HEUraniumC" data-image-description="" data-image-caption="" data-medium-file="https://nucleardiner.files.wordpress.com/2017/06/400px-heuraniumc.jpg?w=300" data-large-file="https://nucleardiner.files.wordpress.com/2017/06/400px-heuraniumc.jpg?w=400" src="https://nucleardiner.files.wordpress.com/2017/06/400px-heuraniumc.jpg?w=1000" alt="400px-HEUraniumC" srcset="https://nucleardiner.files.wordpress.com/2017/06/400px-heuraniumc.jpg 400w, https://nucleardiner.files.wordpress.com/2017/06/400px-heuraniumc.jpg?w=150&amp;h=120 150w, https://nucleardiner.files.wordpress.com/2017/06/400px-heuraniumc.jpg?w=300&amp;h=240 300w" sizes="(max-width: 400px) 100vw, 400px">It had to be protected from the air, from unauthorized removal, and from criticality incidents. The criticality safety group played an important part in designing those cans. The cans were about a foot high. The ingots were about an inch thick. The extra space was for criticality safety.</p>
<p>Probably before I came to Los Alamos, I read about Louis Slotin and Harry Daghlian, who were killed by criticality incidents. They were doing experiments to determine criticality properties for nuclear weapons design. They died horribly. Don‚Äôt read about them unless you have a strong stomach.</p>
<p>The metal rods in the top photo are plutonium. Rods can roll. These rods could roll closer to each other and perhaps produce the kind of runaway neutron reaction that killed Slotin and Daghlian. Putting a hand in to separate them could make the reaction worse because the water in a human body reflects the neutrons.</p>
<p>I had formal safety training, informal discussions with more experienced people, and made it a point to internalize rules of thumb. Keep pieces of plutonium separate. Abide by glovebox limitations; every glovebox has a sign with the limits of plutonium allowed in it. For solutions, keep them dilute and in flat containers. Flat/thin is safer; the closer a shape is to spherical, the less material is needed to go critical. IIRC, there were racks to put rods in if you were working with that shape of metal, so that they didn‚Äôt accidentally roll together.</p>
<p>That photo is at the center of two articles from the Center for Public Integrity (<a href="http://nmpolitics.net/index/2017/06/a-near-disaster-at-los-alamos-lab-takes-a-hidden-toll-on-americas-arsenal/">NMPolitics.net</a>, <a href="https://www.washingtonpost.com/world/national-security/safety-lapses-undermine-nuclear-warhead-work-at-los-alamos/2017/06/17/87f051ee-510d-11e7-b064-828ba60fbb98_story.html?utm_term=.8c4bc83d58f1">Washington Post</a>). They are based on an investigation reported <a href="https://apps.publicintegrity.org/nuclear-negligence/">here</a>. According to those articles, a technician ignored glovebox limits and arranged the plutonium to take that photo for management. A Los Alamos manager is also quoted in the articles as saying that the criticality safety group was an unnecessary expense. A number of the senior people in the criticality safety group were of my vintage and were expected to retire about when I did. According to the articles, management‚Äôs signal was heard loud and clear, and the rest left.</p>
<p>It took the criticality safety group two months to work out the criticality aspects of our can design. I found that frustrating, too. They had to consider the way the cans might be stacked, how they might fall together and how the ingots inside might move if a stack of cans fell. What if they were in a flooded area? If people decided to rescue them from that flooded area? Water, by itself and in human bodies, enhances the neutron reactions that lead to criticality.</p>
<p>The criticality safety group develops those criticality limits posted on gloveboxes. They take into account the kinds of operations in the glovebox, the equipment inside, and the effects of operators‚Äô hands and bodies nearby.</p>
<p>I learned from people who recalled personally what happened to Slotin and Daghlian. Today‚Äôs managers at Los Alamos are rotated through, I‚Äôve heard, every two years. There are not many other places where one learns criticality safety. If Los Alamos is to manufacture nuclear weapons pits, criticality safety evaluation is essential.</p>
<p>A criticality accident affects people who are close to it. It is not a nuclear explosion; the neutron reactions are the same but occur much more slowly. The closest people die horribly, but some tens of feet distance and walls between will shield others. Raemer Schrieber was present at the Slotin accident and lived into his eighties.</p>
<p>It is unconscionable not to educate workers to the dangers involved with handling plutonium. It is worse to encourage poor practice. Did the manager for whom that photo was made understand criticality safety? Or the manager who said to just keep working?</p>
<p>One of the reasons for adding industrial partners to the management of Los Alamos along with the University of California was to improve safety practices. That was done without considering the standard industrial management practice of rotating managers rapidly and the ever-present profit motive. Industry does things better, period. But perhaps not for a singular enterprise like designing and building nuclear weapons.</p>
<p><strong>Coda:</strong> I am usually highly critical of articles on nuclear issues coming from the Center for Public Integrity. They often get the science wrong and display an excessive fear of radioactivity. They did a much better job with this investigation. There are a number of small errors and infelicities of word use in these articles, but nothing like the bloopers they have produced before.</p>
<p><strong>Update:</strong> The National Nuclear Security Administration says that the issues of criticality safety have been cleared up.</p>
<blockquote>
<p dir="ltr" lang="en">Statement from <a href="https://twitter.com/FrankKlotzNNSA">@FrankKlotzNNSA</a> on <a href="https://twitter.com/hashtag/NNSA?src=hash">#NNSA</a> <a href="https://twitter.com/hashtag/safety?src=hash">#safety</a> <a href="https://t.co/qn0MjKlVPm">pic.twitter.com/qn0MjKlVPm</a></p>
<p>‚Äî NNSA (@NNSANews) <a href="https://twitter.com/NNSANews/status/876924097153966080">June 19, 2017</a></p></blockquote>
<p>This is plausible because the photo is said to have been made in 2011. That would allow time to reassert the importance of criticality safety and rebuild the group responsible for it. And, as I said above, the Center for Public Integrity has been sensationalistic in the past. But I‚Äôd like to hear more from NNSA. The fact that that incident occurred at all is disturbing.</p>

<p><strong>Addendum (June 21, 2017)</strong></p>
<p>How much plutonium is in that photo?</p>
<p>It‚Äôs pretty clearly a sharpie in the bottom of the photo. Sharpies are about 13.5 ‚Äì 14 cm long. Scaling from there to the rods gives 12 cm long for the top four, and 5.7, 5.1, 4.5, and 3.8 for the bottom four. All have rounded caps of about 0.3 cm radius. I‚Äôm approximating, so we‚Äôll neglect the rounded caps. The article says something about the yellow-and-black tape being raised, and the shadows agree, so the lengths of all the rods may be more than what I measured, depending on the angle of the photo. So the estimate is likely to be low, although probably less than tens of grams per rod.</p>
<table>
<tbody>
<tr>
<td>Length (cm)</td>
<td>Radius (cm)</td>
<td># of rods</td>
<td>Mass in g (alpha phase, 19.86 g/cm<sup>3</sup>)</td>
<td>Mass in g (delta phase, 15.92 g/cm<sup>3</sup>)</td>
</tr>
<tr>
<td>12</td>
<td>1.1</td>
<td>4</td>
<td>906</td>
<td>726</td>
</tr>
<tr>
<td>5.7</td>
<td>0.83</td>
<td>1</td>
<td>248</td>
<td>199</td>
</tr>
<tr>
<td>5.1</td>
<td>0.83</td>
<td>1</td>
<td>222</td>
<td>178</td>
</tr>
<tr>
<td>4.5</td>
<td>0.83</td>
<td>1</td>
<td>197</td>
<td>158</td>
</tr>
<tr>
<td>3.8</td>
<td>0.74</td>
<td>1</td>
<td>129</td>
<td>103</td>
</tr>
</tbody>
</table>
<p>We can‚Äôt tell by looking what phase the plutonium is in, and the densities of the alpha and delta phases are quite different. So a high estimate, for the denser alpha phase, is a total of 4,420 grams in all eight rods; for the less dense delta plutonium, the total is 3,542.</p>
<p>Wikipedia gives the critical mass of plutonium-239 as about 11 kg, about 3 times what is in the photo. But there could be other isotopes. A critical mass depends on its surroundings, so depending what else is in the glovebox and the presence of a human body nearby, the critical mass could be less.</p>
<p>I have additional questions that pertain to the involvement of management and the safety procedures. How did the technician come to have that much plutonium? Plutonium is kept in the vault and must be signed out. Getting a photographer into PF-4 used to require a requisition for the services, and then there are procedural issues about taking a camera in that would have to be signed off by someone above technician level. Who signed off on the photo shoot?</p>
<p>Many thanks to Christopher Willis (@BeCurious) for checking my math, and Alex Wellerstein (@Wellerstein) for doing a parallel estimate.</p>

<p><em>Cross-posted to <a href="https://www.balloon-juice.com/2017/06/19/a-critical-problem/" target="_blank" rel="noopener">Balloon Juice</a>.</em></p>
					</div><!-- .entry-content -->

	<!-- .entry-footer --></article><!-- #post-## -->
			
				<!-- .navigation -->
	
			

		
		</main><!-- #main -->
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Happy Birthday OpenStreetMap (368 pts)]]></title>
            <link>https://blog.openstreetmap.org/2023/08/09/happy-birthday-openstreetmap-2/</link>
            <guid>37059481</guid>
            <pubDate>Wed, 09 Aug 2023 06:54:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.openstreetmap.org/2023/08/09/happy-birthday-openstreetmap-2/">https://blog.openstreetmap.org/2023/08/09/happy-birthday-openstreetmap-2/</a>, See on <a href="https://news.ycombinator.com/item?id=37059481">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
			
<h2>OSM is 19 years old: we‚Äôre launching an online fundraising campaign to support its future</h2>







<p>18 years ago, OSM Founder Steve Coast posted this invitation to OpenStreetmap‚Äôs 1st birthday party.</p>


<div>
<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-bday-invite.png"><img decoding="async" fetchpriority="high" width="520" height="516" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-bday-invite.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-bday-invite.png 520w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-bday-invite-300x298.png 300w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-bday-invite-150x150.png 150w" sizes="(max-width: 520px) 100vw, 520px"></a></figure></div>






<p>In 2005, things were moving very quickly for the still new OSM project. The broader open data movement was gathering momentum through events like the <a href="https://web.archive.org/web/20051025070025/http://www.okfn.org/wsfii/">World Summit on Free Information Infrastructures (WSFII)</a> and pledge <a href="https://web.archive.org/web/20051226062420/http://www.pledgebank.com/geodata">campaigns for the creation of open geodata</a>, and OSM was starting to get coverage in major media like<a href="https://web.archive.org/web/20050915213226/http://www.guardian.co.uk/online/story/0,3605,1453293,00.html"> the <em>Guardian</em></a>. Soon after the above-mentioned first birthday party, the front end of OSM was launched at OSM.org and a new ‚Äúwhizzy‚Äù Applet was launched to ‚Äú<a href="https://web.archive.org/web/20051023003100/http://www.openstreetmap.org/news/">replace the horrid old one</a>.‚Äù</p>



<p>By 2006, OSM‚Äôers were  mapping all over the world: </p>



<figure>
<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Copenhagen-8-10-2006.png"><img decoding="async" width="400" height="456" data-id="176657304" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Copenhagen-8-10-2006.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Copenhagen-8-10-2006.png 400w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Copenhagen-8-10-2006-263x300.png 263w" sizes="(max-width: 400px) 100vw, 400px"></a></figure>



<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Hedge_End_Coloured.png"><img decoding="async" width="400" height="393" data-id="176657469" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Hedge_End_Coloured.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Hedge_End_Coloured.png 400w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Hedge_End_Coloured-300x295.png 300w" sizes="(max-width: 400px) 100vw, 400px"></a></figure>



<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-IsleOfWight20060927.png"><img decoding="async" loading="lazy" width="400" height="243" data-id="176657460" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-IsleOfWight20060927.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-IsleOfWight20060927.png 400w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-IsleOfWight20060927-300x182.png 300w" sizes="(max-width: 400px) 100vw, 400px"></a></figure>



<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-London-20061121-bounded.png"><img decoding="async" loading="lazy" width="400" height="371" data-id="176657370" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-London-20061121-bounded.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-London-20061121-bounded.png 400w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-London-20061121-bounded-300x278.png 300w" sizes="(max-width: 400px) 100vw, 400px"></a></figure>



<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Oakham_labelled.png"><img decoding="async" loading="lazy" width="400" height="444" data-id="176657356" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Oakham_labelled.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Oakham_labelled.png 400w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Oakham_labelled-270x300.png 270w" sizes="(max-width: 400px) 100vw, 400px"></a></figure>



<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/UK-Motorways-Railways_300pxSouth.png"><img decoding="async" loading="lazy" width="300" height="300" data-id="176657772" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/UK-Motorways-Railways_300pxSouth.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/UK-Motorways-Railways_300pxSouth.png 300w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/UK-Motorways-Railways_300pxSouth-150x150.png 150w" sizes="(max-width: 300px) 100vw, 300px"></a></figure>



<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Reading_uni_whiteknights_campus.png"><img decoding="async" loading="lazy" width="400" height="327" data-id="176657320" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Reading_uni_whiteknights_campus.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Reading_uni_whiteknights_campus.png 400w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-Reading_uni_whiteknights_campus-300x245.png 300w" sizes="(max-width: 400px) 100vw, 400px"></a></figure>



<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-I-55_and_I-90-2.png"><img decoding="async" loading="lazy" width="400" height="395" data-id="176657746" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-I-55_and_I-90-2.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-I-55_and_I-90-2.png 400w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/400px-I-55_and_I-90-2-300x296.png 300w" sizes="(max-width: 400px) 100vw, 400px"></a></figure>



<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/CentralChester-2.png"><img decoding="async" loading="lazy" width="915" height="1024" data-id="176657694" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/CentralChester-2-915x1024.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/CentralChester-2-915x1024.png 915w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/CentralChester-2-268x300.png 268w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/CentralChester-2-768x860.png 768w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/CentralChester-2-624x698.png 624w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/CentralChester-2.png 1023w" sizes="(max-width: 915px) 100vw, 915px"></a></figure>
<figcaption> <a href="https://wiki.openstreetmap.org/wiki/List_of_featured_images/2006">https://wiki.openstreetmap.org/wiki/List_of_featured_images/2006</a></figcaption></figure>



<h2>The OSM Birthday Tradition</h2>



<p>When OpenStreetMap turned ten in 2014, the number of celebrations had greatly increased from that first birthday event at the Strongroom Bar in London. In fact, it took a world map to visualize all of the parties. </p>



<figure>
<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/10CakeLit-2.jpeg"><img decoding="async" loading="lazy" width="982" height="1024" data-id="176657851" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/10CakeLit-2-982x1024.jpeg" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/10CakeLit-2-982x1024.jpeg 982w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/10CakeLit-2-288x300.jpeg 288w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/10CakeLit-2-768x801.jpeg 768w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/10CakeLit-2-1474x1536.jpeg 1474w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/10CakeLit-2-1965x2048.jpeg 1965w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/10CakeLit-2-624x650.jpeg 624w" sizes="(max-width: 982px) 100vw, 982px"></a></figure>



<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/Happy-Tenth-Birthday-Map.png"><img decoding="async" loading="lazy" width="1024" height="796" data-id="176657877" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/Happy-Tenth-Birthday-Map-1024x796.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/Happy-Tenth-Birthday-Map-1024x796.png 1024w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/Happy-Tenth-Birthday-Map-300x233.png 300w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/Happy-Tenth-Birthday-Map-768x597.png 768w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/Happy-Tenth-Birthday-Map-1536x1194.png 1536w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/Happy-Tenth-Birthday-Map-2048x1592.png 2048w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/Happy-Tenth-Birthday-Map-624x485.png 624w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>
</figure>



<figure>
<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/20200808-osm16-kabul-01-1.jpeg"><img decoding="async" loading="lazy" width="1024" height="768" data-id="176657929" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/20200808-osm16-kabul-01-1-1024x768.jpeg" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/20200808-osm16-kabul-01-1-1024x768.jpeg 1024w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/20200808-osm16-kabul-01-1-300x225.jpeg 300w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/20200808-osm16-kabul-01-1-768x576.jpeg 768w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/20200808-osm16-kabul-01-1-624x468.jpeg 624w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/20200808-osm16-kabul-01-1.jpeg 1280w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>16th anniversary of OSM in Kabul, Afghanistan</figcaption></figure>



<figure><img decoding="async" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-bday-1024x576.jpeg" alt="This image has an empty alt attribute; its file name is OSM-bday-1024x576.jpeg"><figcaption>Feye Andal ( <a href="https://twitter.com/dfeyeandal">@dfeyeandal</a>) shows off a cake, during a get-together in Manila that celebrated the 18th OpenStreetMap anniversary. Photo Credit: E. Olario</figcaption></figure>
</figure>



<p>If you‚Äôre celebrating the 19th anniversary of OSM this week, be sure to <a href="https://wiki.openstreetmap.org/wiki/OpenStreetMap_19th_Anniversary_Birthday_party">share some photos.</a> üéÇ</p>



<h2>What Does OSM Look Like at 19? </h2>



<p>OpenStreetMap is the largest open-source geospatial project of all time. There are 18 formally established OSM chapters and dozens more local communities, collaborating on hundreds of communication channels, in more than 50 languages, in most of the countries of the world.&nbsp;&nbsp;The map and its data is world-recognized as an essential source of geospatial ground truth. The API is used by millions of people, and the community is motivated,&nbsp; multi-talented, and culturally and geographically diverse. <a href="https://blog.openstreetmap.org/2023/05/22/powering-openstreetmaps-future-a-year-of-improvements-from-openstreetmap-foundations-site-reliability-engineer/">OSM even welcomed its first paid site stability engineer a year ago in recognition of the size and scope of the project.</a></p>


<div>
<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-graphic.png"><img decoding="async" loading="lazy" width="1024" height="768" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-graphic.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-graphic.png 1024w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-graphic-300x225.png 300w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-graphic-768x576.png 768w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/OSM-graphic-624x468.png 624w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>image credit: Kate Varfolomeyeva, 2023</figcaption></figure></div>


<p>To get an even better sense of what OSM means to its community in 2023, we asked community members to tell us why they love OSM. Here are just a few of the many answers:&nbsp;</p>


<div>
<figure><a href="https://blog.openstreetmap.org/wp-content/uploads/2023/08/what-people-said-about-OSM-3.png"><img decoding="async" loading="lazy" width="1024" height="768" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/what-people-said-about-OSM-3.png" alt=""></a><figcaption>Image Credit: Kate Varfolomeyeva, 2023</figcaption></figure></div>


<p>So, you can see why this is an important moment for OpenStreetMap.&nbsp; In a year, the project will be twenty years old: its data is helping to solve some of the world‚Äôs most pressing challenges, there is new technology that makes it easier to map, and enthusiasm for mapmaking is as strong as it ever was.&nbsp;</p>



<p>To meet these challenges and opportunities, the OSM Foundation board is working on a strategic plan that can help support our ever-growing community of volunteers, by strategically funding skills such as project management, engineering, front-end development and offering bounties and sponsorship to help foster a diverse and inclusive map for everyone.&nbsp;&nbsp;</p>



<p>Which is why now is the time to share your time and money to help secure the future of OpenStreetMap.</p>



<h2><a href="https://supporting.openstreetmap.org/" data-type="link" data-id="https://supporting.openstreetmap.org">It‚Äôs OSM‚Äôs Birthday! Please Give to Support its Future</a></h2>



<p>Starting today, the OSMF will be conducting an online fundraising campaign to support the future of OSM. Here‚Äôs what you can do to help: </p>



<ol>
<li>Share a photo of how you‚Äôre celebrating OSM‚Äôs big day with hashtag <strong>#HappyBirthdayOSM</strong> and/or <strong>#WeAreOSM</strong> and <strong>link to</strong> <a href="https://supporting.openstreetmap.org/">https://supporting.openstreetmap.org</a>.</li>



<li><a href="https://donate.openstreetmap.org./"><strong>Make a gift of any size</strong></a> to support OSM‚Äôs future.  </li>



<li><strong><a href="http://openstreetmap.org/">Edit the map!</a> </strong> üó∫</li>
</ol>



<figure><a href="https://donate.openstreetmap.org/"><img decoding="async" loading="lazy" width="1024" height="768" src="https://blog.openstreetmap.org/wp-content/uploads/2023/08/19.png" alt="" srcset="https://blog.openstreetmap.org/wp-content/uploads/2023/08/19.png 1024w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/19-300x225.png 300w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/19-768x576.png 768w, https://blog.openstreetmap.org/wp-content/uploads/2023/08/19-624x468.png 624w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<hr>



<p><em>The <a href="https://wiki.osmfoundation.org/">OpenStreetMap Foundation</a> is a not-for-profit organisation, formed to support the OpenStreetMap Project. It is dedicated to encouraging the growth, development and distribution of free geospatial data for anyone to use and share. The OpenStreetMap Foundation owns and maintains the infrastructure of the OpenStreetMap project, is financially supported by membership fees and <a href="https://donate.openstreetmap.org/">donations</a>, and organises the annual, international <a href="https://stateofthemap.org/">State of the Map</a> conference. Our volunteer <a href="https://wiki.osmfoundation.org/wiki/WorkingGroups">Working Groups</a> and small core staff work to support the OpenStreetMap project. <a href="https://join.osmfoundation.org/">Join the OpenStreetMap Foundation</a> for just ¬£15 a year or for free if you are an active OpenStreetMap contributor.</em></p>
<p>This post is also available in: 
    <span><a href="https://blog.openstreetmap.org/2023/08/09/feliz-aniversario-openstreetmap/?lang=gl"><span>Galician</span></a></span>    <span><a href="https://blog.openstreetmap.org/2023/08/09/happy-birthday-openstreetmap-2/?lang=ja"><span>Japanese</span></a></span>    <span><a href="https://blog.openstreetmap.org/2023/08/09/feliz-cumpleanos-openstreetmap/?lang=es"><span>Spanish</span></a></span></p>					</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Llama from Scratch (or how to implement a paper without crying) (411 pts)]]></title>
            <link>https://blog.briankitano.com/llama-from-scratch/</link>
            <guid>37059479</guid>
            <pubDate>Wed, 09 Aug 2023 06:54:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.briankitano.com/llama-from-scratch/">https://blog.briankitano.com/llama-from-scratch/</a>, See on <a href="https://news.ycombinator.com/item?id=37059479">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    







<p>
    <i>
        <time datetime="2023-08-09">
            09 Aug, 2023
        </time>
    </i>
</p>

<p>I want to provide some tips from my experience implementing a paper. I'm going to cover implementing a dramatically scaled-down version of <a href="https://arxiv.org/pdf/2302.13971.pdf">Llama</a> for training <a href="https://github.com/karpathy/char-rnn/blob/master/data/tinyshakespeare/input.txt">TinyShakespeare</a>. This post is heavily inspired by Karpathy's <a href="https://www.youtube.com/playlist?list=PLAqhIrjkxbuWI23v9cThsA9GvCAUhRvKZ">Makemore series</a>, which I highly recommend.</p>
<p>A preview of what we're going to end up with:</p>
<div><pre><span></span><span>print</span><span>(</span><span>generate</span><span>(</span><span>llama</span><span>,</span> <span>MASTER_CONFIG</span><span>,</span> <span>500</span><span>)[</span><span>0</span><span>])</span>
</pre></div>

<div><pre><span></span>Evend her break of thou thire xoing dieble had side, did foesors exenatedH in siffied up,
    No, none,
    And you ling as thought depond.

    MENENIUS:
    Tell officien:
    To pesiding be
    Best wanty and to spiege,
    To uncine shee patss again,
    I will hen: then they
    Moieth:
    I my cast in letch:
    For bereful, give toan I may

    LINT OF AUMERLE:
    Out, or me but thee here sir,
    Why first with canse pring;
    Now!

    Gide me couuse
    The haster:
    And suilt harming,
    Then as pereise with and go.

    FROMNIUS:
    I well? speak and wieke ac
</pre></div>

<p>I'll be skipping over some of the more obvious steps, like setting up a virtual environment and installing dependencies.</p>
<p>Github <a href="https://github.com/bkitano/llama-from-scratch">here</a>.</p>
<h2 id="tl-dr">tl;dr üëì</h2>
<h2 id="always-work-iteratively-start-small-stay-certain-and-build-up">Always work iteratively: start small, stay certain, and build up.</h2>
<p>My approach for implementing papers is:</p>
<ol>
<li>Make all of the helper functions required to test your model quantitatively (data splits, training, plotting the loss).</li>
<li>Before you even look at the paper, pick a small, simple, and fast model that you've done in the past. Then make a helper function to evaluate the model qualitatively.</li>
<li>Start by picking apart different components of the paper, and then implementing them one-by-one, training and evaluating as you go.</li>
</ol>
<h2 id="make-sure-your-layers-do-what-you-think">Make sure your layers do what you think.</h2>
<ol>
<li>Use <code>.shape</code> religiously. <code>assert</code> and <code>plt.imshow</code> are your friends.</li>
<li>Work out the results without matrix multiplication first, and then use the <code>torch</code> functions to make it efficient after.</li>
<li>Have a test to see that your layer is right. For example, the RoPE embeddings have a specific property that you can test for. For the Transformer, you can test that the attention is working by looking at the attention map.</li>
<li>Test your layers on various batch, sequence, and embedding sizes. Even if it works for one size, it might not work for others, which will cause problems at inference time.</li>
</ol>
<h2 id="let-s-go">Let's go üëâ</h2>
<h2 id="about-llama">About Llama</h2>
<p>Llama is a transformer-based model for language modeling. Meta AI <a href="https://github.com/facebookresearch/llama">open-sourced</a> Llama this summer, and it's gained a lot of attention (pun intended). When you're reading the introduction, they clearly indicate their goal: make a model that's cheaper for running inference, rather than optimizing training costs.</p>
<p>At this point, we'll just load our libraries and get started.</p>
<div><pre><span></span><span>import</span> <span>torch</span>
<span>from</span> <span>torch</span> <span>import</span> <span>nn</span>
<span>from</span> <span>torch.nn</span> <span>import</span> <span>functional</span> <span>as</span> <span>F</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>from</span> <span>matplotlib</span> <span>import</span> <span>pyplot</span> <span>as</span> <span>plt</span>
<span>import</span> <span>time</span>
<span>import</span> <span>pandas</span> <span>as</span> <span>pd</span>
</pre></div>

<h2 id="setting-up-our-dataset">Setting up our dataset</h2>
<p>While in Llama they train on 1.4T tokens, our dataset TinyShakespeare, the collection of all of Shakespeare's works, is about 1M characters.</p>
<div><pre><span></span><span>lines</span> <span>=</span> <span>open</span><span>(</span><span>'./input.txt'</span><span>,</span> <span>'r'</span><span>)</span><span>.</span><span>read</span><span>()</span>

<span>vocab</span> <span>=</span> <span>sorted</span><span>(</span><span>list</span><span>(</span><span>set</span><span>(</span><span>lines</span><span>)))</span>
<span>itos</span> <span>=</span> <span>{</span><span>i</span><span>:</span><span>ch</span> <span>for</span> <span>i</span><span>,</span> <span>ch</span> <span>in</span> <span>enumerate</span><span>(</span><span>vocab</span><span>)}</span>
<span>stoi</span> <span>=</span> <span>{</span><span>ch</span><span>:</span><span>i</span> <span>for</span> <span>i</span><span>,</span> <span>ch</span> <span>in</span> <span>enumerate</span><span>(</span><span>vocab</span><span>)}</span>

<span>print</span><span>(</span><span>lines</span><span>[:</span><span>30</span><span>])</span>
</pre></div>

<div><pre><span></span>First Citizen:
Before we proce
</pre></div>

<p>They use the <a href="https://github.com/google/sentencepiece">SentencePiece</a> byte-pair encoding tokenizer, but we're going to just use a simple character-level tokenizer.</p>
<div><pre><span></span><span># simple tokenization by characters</span>
<span>def</span> <span>encode</span><span>(</span><span>s</span><span>):</span>
    <span>return</span> <span>[</span><span>stoi</span><span>[</span><span>ch</span><span>]</span> <span>for</span> <span>ch</span> <span>in</span> <span>s</span><span>]</span>

<span>def</span> <span>decode</span><span>(</span><span>l</span><span>):</span>
    <span>return</span> <span>''</span><span>.</span><span>join</span><span>([</span><span>itos</span><span>[</span><span>i</span><span>]</span> <span>for</span> <span>i</span> <span>in</span> <span>l</span><span>])</span>

<span>print</span><span>(</span><span>'vocab size:'</span><span>,</span> <span>len</span><span>(</span><span>vocab</span><span>))</span>
<span>decode</span><span>(</span><span>encode</span><span>(</span><span>"hello"</span><span>))</span>
</pre></div>



<p>Since our dataset is small enough, we don't need to worry about how we store it in memory etc.</p>
<p>First tip: I'm creating a <code>config</code> object that stores some basic model params. It makes our code way more readable and removes constants and magic numbers from the code. I'm not going to use types, as  I want to keep things flexible for now and be able to add more parameters later on.</p>
<div><pre><span></span><span>MASTER_CONFIG</span> <span>=</span> <span>{</span>
    <span>"vocab_size"</span><span>:</span> <span>len</span><span>(</span><span>vocab</span><span>),</span>
<span>}</span>
</pre></div>

<div><pre><span></span><span>dataset</span> <span>=</span> <span>torch</span><span>.</span><span>tensor</span><span>(</span><span>encode</span><span>(</span><span>lines</span><span>),</span> <span>dtype</span><span>=</span><span>torch</span><span>.</span><span>int8</span><span>)</span>
<span>dataset</span><span>.</span><span>shape</span>
</pre></div>



<p>Let's create a method to generate our training data and labels for batches. We'll use the same method for validation and test data. Note that I like to test my functions in the same block that I define them, just to make sure they work as expected before moving on.</p>
<div><pre><span></span><span>def</span> <span>get_batches</span><span>(</span><span>data</span><span>,</span> <span>split</span><span>,</span> <span>batch_size</span><span>,</span> <span>context_window</span><span>,</span> <span>config</span><span>=</span><span>MASTER_CONFIG</span><span>):</span>
    <span>train</span> <span>=</span> <span>data</span><span>[:</span><span>int</span><span>(</span><span>.8</span> <span>*</span> <span>len</span><span>(</span><span>data</span><span>))]</span>
    <span>val</span> <span>=</span> <span>data</span><span>[</span><span>int</span><span>(</span><span>.8</span> <span>*</span> <span>len</span><span>(</span><span>data</span><span>)):</span> <span>int</span><span>(</span><span>.9</span> <span>*</span> <span>len</span><span>(</span><span>data</span><span>))]</span>
    <span>test</span> <span>=</span> <span>data</span><span>[</span><span>int</span><span>(</span><span>.9</span> <span>*</span> <span>len</span><span>(</span><span>data</span><span>)):]</span>

    <span>batch_data</span> <span>=</span> <span>train</span>
    <span>if</span> <span>split</span> <span>==</span> <span>'val'</span><span>:</span>
        <span>batch_data</span> <span>=</span> <span>val</span>

    <span>if</span> <span>split</span> <span>==</span> <span>'test'</span><span>:</span>
        <span>batch_data</span> <span>=</span> <span>test</span>

    <span># pick random starting points</span>
    <span>ix</span> <span>=</span> <span>torch</span><span>.</span><span>randint</span><span>(</span><span>0</span><span>,</span> <span>batch_data</span><span>.</span><span>size</span><span>(</span><span>0</span><span>)</span> <span>-</span> <span>context_window</span> <span>-</span> <span>1</span><span>,</span> <span>(</span><span>batch_size</span><span>,))</span>
    <span>x</span> <span>=</span> <span>torch</span><span>.</span><span>stack</span><span>([</span><span>batch_data</span><span>[</span><span>i</span><span>:</span><span>i</span><span>+</span><span>context_window</span><span>]</span> <span>for</span> <span>i</span> <span>in</span> <span>ix</span><span>])</span><span>.</span><span>long</span><span>()</span>
    <span>y</span> <span>=</span> <span>torch</span><span>.</span><span>stack</span><span>([</span><span>batch_data</span><span>[</span><span>i</span><span>+</span><span>1</span><span>:</span><span>i</span><span>+</span><span>context_window</span><span>+</span><span>1</span><span>]</span> <span>for</span> <span>i</span> <span>in</span> <span>ix</span><span>])</span><span>.</span><span>long</span><span>()</span>
    <span>return</span> <span>x</span><span>,</span> <span>y</span>

<span>MASTER_CONFIG</span><span>.</span><span>update</span><span>({</span>
    <span>'batch_size'</span><span>:</span> <span>32</span><span>,</span>
    <span>'context_window'</span><span>:</span> <span>16</span>
<span>})</span>

<span>xs</span><span>,</span> <span>ys</span> <span>=</span> <span>get_batches</span><span>(</span><span>dataset</span><span>,</span> <span>'train'</span><span>,</span> <span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>])</span>

<span>[(</span><span>decode</span><span>(</span><span>xs</span><span>[</span><span>i</span><span>]</span><span>.</span><span>tolist</span><span>()),</span> <span>decode</span><span>(</span><span>ys</span><span>[</span><span>i</span><span>]</span><span>.</span><span>tolist</span><span>()))</span> <span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>len</span><span>(</span><span>xs</span><span>))]</span>
</pre></div>

<div><pre><span></span><span>[</span><span>(</span><span>'t us sup betimes'</span><span>,</span><span> </span><span>' us sup betimes,'</span><span>),</span>
<span> </span><span>(</span><span>'IO:</span><span>\n</span><span>Right.</span><span>\n\n</span><span>ROME'</span><span>,</span><span> </span><span>'O:</span><span>\n</span><span>Right.</span><span>\n\n</span><span>ROMEO'</span><span>),</span>
<span> </span><span>(</span><span>'Nurse:</span><span>\n</span><span>O, she sa'</span><span>,</span><span> </span><span>'urse:</span><span>\n</span><span>O, she say'</span><span>),</span>
<span> </span><span>(</span><span>" seem'd to know,"</span><span>,</span><span> </span><span>"seem'd to know,</span><span>\n</span><span>"</span><span>),</span>
<span> </span><span>(</span><span>' let her brother'</span><span>,</span><span> </span><span>'let her brother '</span><span>),</span>
<span> </span><span>(</span><span>'ood,</span><span>\n</span><span>Even with s'</span><span>,</span><span> </span><span>'od,</span><span>\n</span><span>Even with su'</span><span>),</span>
<span> </span><span>(</span><span>'en</span><span>\n</span><span>Whisper the s'</span><span>,</span><span> </span><span>'n</span><span>\n</span><span>Whisper the sp'</span><span>),</span>
<span> </span><span>(</span><span>', fly! for all y'</span><span>,</span><span> </span><span>' fly! for all yo'</span><span>),</span>
<span> </span><span>(</span><span>" Saint Peter's C"</span><span>,</span><span> </span><span>"Saint Peter's Ch"</span><span>),</span>
<span> </span><span>(</span><span>', but that</span><span>\n</span><span>Which'</span><span>,</span><span> </span><span>' but that</span><span>\n</span><span>Which '</span><span>),</span>
<span> </span><span>(</span><span>'uld as willingly'</span><span>,</span><span> </span><span>'ld as willingly '</span><span>),</span>
<span> </span><span>(</span><span>'y brother,</span><span>\n</span><span>Is pr'</span><span>,</span><span> </span><span>' brother,</span><span>\n</span><span>Is pri'</span><span>),</span>
<span> </span><span>(</span><span>' you ready your '</span><span>,</span><span> </span><span>'you ready your s'</span><span>),</span>
<span> </span><span>(</span><span>'rth the audience'</span><span>,</span><span> </span><span>'th the audience '</span><span>),</span>
<span> </span><span>(</span><span>'</span><span>\n\n</span><span>QUEEN ELIZABET'</span><span>,</span><span> </span><span>'</span><span>\n</span><span>QUEEN ELIZABETH'</span><span>),</span>
<span> </span><span>(</span><span>'ection,</span><span>\n</span><span>which ca'</span><span>,</span><span> </span><span>'ction,</span><span>\n</span><span>which can'</span><span>),</span>
<span> </span><span>(</span><span>'is wisdom hastes'</span><span>,</span><span> </span><span>'s wisdom hastes '</span><span>),</span>
<span> </span><span>(</span><span>' and quinces in '</span><span>,</span><span> </span><span>'and quinces in t'</span><span>),</span>
<span> </span><span>(</span><span>'nt death.</span><span>\n\n</span><span>SICIN'</span><span>,</span><span> </span><span>'t death.</span><span>\n\n</span><span>SICINI'</span><span>),</span>
<span> </span><span>(</span><span>"y she's mad.</span><span>\n\n</span><span>BR"</span><span>,</span><span> </span><span>" she's mad.</span><span>\n\n</span><span>BRU"</span><span>),</span>
<span> </span><span>(</span><span>'eware of him;</span><span>\n</span><span>Si'</span><span>,</span><span> </span><span>'ware of him;</span><span>\n</span><span>Sin'</span><span>),</span>
<span> </span><span>(</span><span>'s</span><span>\n</span><span>And make pursu'</span><span>,</span><span> </span><span>'</span><span>\n</span><span>And make pursui'</span><span>),</span>
<span> </span><span>(</span><span>'r and be slain; '</span><span>,</span><span> </span><span>' and be slain; n'</span><span>),</span>
<span> </span><span>(</span><span>' I, with grief a'</span><span>,</span><span> </span><span>'I, with grief an'</span><span>),</span>
<span> </span><span>(</span><span>'?</span><span>\n\n</span><span>Second Keeper'</span><span>,</span><span> </span><span>'</span><span>\n\n</span><span>Second Keeper:'</span><span>),</span>
<span> </span><span>(</span><span>'</span><span>\n</span><span>Now, Thomas Mow'</span><span>,</span><span> </span><span>'Now, Thomas Mowb'</span><span>),</span>
<span> </span><span>(</span><span>'or this once, ye'</span><span>,</span><span> </span><span>'r this once, yea'</span><span>),</span>
<span> </span><span>(</span><span>"l 'tis just.</span><span>\n\n</span><span>LU"</span><span>,</span><span> </span><span>" 'tis just.</span><span>\n\n</span><span>LUC"</span><span>),</span>
<span> </span><span>(</span><span>'es like a lamb. '</span><span>,</span><span> </span><span>'s like a lamb. Y'</span><span>),</span>
<span> </span><span>(</span><span>'t night, I warra'</span><span>,</span><span> </span><span>' night, I warran'</span><span>),</span>
<span> </span><span>(</span><span>'y tears would wa'</span><span>,</span><span> </span><span>' tears would was'</span><span>),</span>
<span> </span><span>(</span><span>'</span><span>\n\n</span><span>ANGELO:</span><span>\n</span><span>Well, '</span><span>,</span><span> </span><span>'</span><span>\n</span><span>ANGELO:</span><span>\n</span><span>Well, l'</span><span>)</span><span>]</span>
</pre></div>

<p>What's interesting about implementing papers is that there are two aspects to the model <em>working</em>: compilation (do your tensors all match up from layer to layer), and training (does the loss go down). Figuring out how to ensure that each of your components is working is key to developing your model in a predictable, engineering-minded way.</p>
<p>That's why we're also going to define the method for how we're going to evaluate the model. We want to do this before we even define the model, because we want to be able to use it to evaluate the model as we're training it.</p>
<div><pre><span></span><span>@torch</span><span>.</span><span>no_grad</span><span>()</span>  <span># don't compute gradients for this function</span>
<span>def</span> <span>evaluate_loss</span><span>(</span><span>model</span><span>,</span> <span>config</span><span>=</span><span>MASTER_CONFIG</span><span>):</span>
    <span>out</span> <span>=</span> <span>{}</span>
    <span>model</span><span>.</span><span>eval</span><span>()</span>
    <span>for</span> <span>split</span> <span>in</span> <span>[</span><span>"train"</span><span>,</span> <span>"val"</span><span>]:</span>
        <span>losses</span> <span>=</span> <span>[]</span>
        <span>for</span> <span>_</span> <span>in</span> <span>range</span><span>(</span><span>10</span><span>):</span>
            <span>xb</span><span>,</span> <span>yb</span> <span>=</span> <span>get_batches</span><span>(</span><span>dataset</span><span>,</span> <span>split</span><span>,</span> <span>config</span><span>[</span><span>'batch_size'</span><span>],</span> <span>config</span><span>[</span><span>'context_window'</span><span>])</span>
            <span>_</span><span>,</span> <span>loss</span> <span>=</span> <span>model</span><span>(</span><span>xb</span><span>,</span> <span>yb</span><span>)</span>
            <span>losses</span><span>.</span><span>append</span><span>(</span><span>loss</span><span>.</span><span>item</span><span>())</span>
        <span>out</span><span>[</span><span>split</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>mean</span><span>(</span><span>losses</span><span>)</span>
    <span>model</span><span>.</span><span>train</span><span>()</span>
    <span>return</span> <span>out</span>
</pre></div>

<h2 id="setting-up-a-working-base-model">Setting up a working base model</h2>
<p>Here's a basic feed-forward neural network with embeddings. It's the base model we're going to start with, and then swap out parts of it as we go along until we eventually end up with the model as described in Llama.</p>
<div><pre><span></span><span>class</span> <span>SimpleBrokenModel</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>config</span><span>=</span><span>MASTER_CONFIG</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>

        <span>self</span><span>.</span><span>embedding</span> <span>=</span> <span>nn</span><span>.</span><span>Embedding</span><span>(</span><span>config</span><span>[</span><span>'vocab_size'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>
        <span>self</span><span>.</span><span>linear</span> <span>=</span> <span>nn</span><span>.</span><span>Sequential</span><span>(</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
            <span>nn</span><span>.</span><span>ReLU</span><span>(),</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span>
        <span>)</span>

        <span>print</span><span>(</span><span>"model params:"</span><span>,</span> <span>sum</span><span>([</span><span>m</span><span>.</span><span>numel</span><span>()</span> <span>for</span> <span>m</span> <span>in</span> <span>self</span><span>.</span><span>parameters</span><span>()]))</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>idx</span><span>,</span> <span>targets</span><span>=</span><span>None</span><span>):</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>embedding</span><span>(</span><span>idx</span><span>)</span>
        <span>a</span> <span>=</span> <span>self</span><span>.</span><span>linear</span><span>(</span><span>x</span><span>)</span>
        <span>logits</span> <span>=</span> <span>F</span><span>.</span><span>softmax</span><span>(</span><span>a</span><span>,</span> <span>dim</span><span>=-</span><span>1</span><span>)</span>

        <span>if</span> <span>targets</span> <span>is</span> <span>not</span> <span>None</span><span>:</span>
            <span>loss</span> <span>=</span> <span>F</span><span>.</span><span>cross_entropy</span><span>(</span><span>logits</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>,</span> <span>self</span><span>.</span><span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span> <span>targets</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>))</span>
            <span>return</span> <span>logits</span><span>,</span> <span>loss</span>

        <span>else</span><span>:</span>
            <span>return</span> <span>logits</span>

<span>MASTER_CONFIG</span><span>.</span><span>update</span><span>({</span>
    <span>'d_model'</span><span>:</span> <span>128</span><span>,</span>
<span>})</span>
<span>model</span> <span>=</span> <span>SimpleBrokenModel</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>xs</span><span>,</span> <span>ys</span> <span>=</span> <span>get_batches</span><span>(</span><span>dataset</span><span>,</span> <span>'train'</span><span>,</span> <span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>])</span>

<span>logits</span><span>,</span> <span>loss</span> <span>=</span> <span>model</span><span>(</span><span>xs</span><span>,</span> <span>ys</span><span>)</span>
</pre></div>



<p>It's at this point that we have to start worrying about the shape of our tensors and making indices match. Check out this line of our model definition:</p>
<div><pre><span></span><span>loss</span> <span>=</span> <span>F</span><span>.</span><span>cross_entropy</span><span>(</span><span>logits</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>,</span> <span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span> <span>targets</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>))</span>
</pre></div>

<p>We have to reshape the <code>logits</code> and <code>targets</code> tensors so that their dimensions match when we compare. We do this with the <code>view</code> method. The <code>-1</code> argument means "infer this dimension from the others". So, in this case, we're saying "reshape <code>logits</code> and <code>targets</code> to have the same number of rows, and however many columns are needed to make that happen". This is a common pattern when you're working with batches of data.</p>
<p>Alright, let's train our <code>SimpleBrokenModel</code> to make sure gradients flow. After we confirm that, we can swap out parts of it to match Llama, train again, and track our progress. It's at this point that I start keeping a <em>log</em> of my training runs, so that I can easily just go back to a previous run in the event that I mess something up.</p>
<div><pre><span></span><span>MASTER_CONFIG</span><span>.</span><span>update</span><span>({</span>
    <span>'epochs'</span><span>:</span> <span>1000</span><span>,</span>
    <span>'log_interval'</span><span>:</span> <span>10</span> 
<span>})</span>
<span>model</span> <span>=</span> <span>SimpleBrokenModel</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>

<span>optimizer</span> <span>=</span> <span>torch</span><span>.</span><span>optim</span><span>.</span><span>Adam</span><span>(</span>
    <span>model</span><span>.</span><span>parameters</span><span>(),</span> 
<span>)</span>

<span>def</span> <span>train</span><span>(</span><span>model</span><span>,</span> <span>optimizer</span><span>,</span> <span>scheduler</span><span>=</span><span>None</span><span>,</span> <span>config</span><span>=</span><span>MASTER_CONFIG</span><span>,</span> <span>print_logs</span><span>=</span><span>False</span><span>):</span>
    <span>losses</span> <span>=</span> <span>[]</span>
    <span>start_time</span> <span>=</span> <span>time</span><span>.</span><span>time</span><span>()</span>
    <span>for</span> <span>epoch</span> <span>in</span> <span>range</span><span>(</span><span>config</span><span>[</span><span>'epochs'</span><span>]):</span>
        <span>optimizer</span><span>.</span><span>zero_grad</span><span>()</span>

        <span>xs</span><span>,</span> <span>ys</span> <span>=</span> <span>get_batches</span><span>(</span><span>dataset</span><span>,</span> <span>'train'</span><span>,</span> <span>config</span><span>[</span><span>'batch_size'</span><span>],</span> <span>config</span><span>[</span><span>'context_window'</span><span>])</span>
        <span>logits</span><span>,</span> <span>loss</span> <span>=</span> <span>model</span><span>(</span><span>xs</span><span>,</span> <span>targets</span><span>=</span><span>ys</span><span>)</span>
        <span>loss</span><span>.</span><span>backward</span><span>()</span>
        <span>optimizer</span><span>.</span><span>step</span><span>()</span>

        <span>if</span> <span>scheduler</span><span>:</span>
            <span>scheduler</span><span>.</span><span>step</span><span>()</span>

        <span>if</span> <span>epoch</span> <span>%</span> <span>config</span><span>[</span><span>'log_interval'</span><span>]</span> <span>==</span> <span>0</span><span>:</span>
            <span>batch_time</span> <span>=</span> <span>time</span><span>.</span><span>time</span><span>()</span> <span>-</span> <span>start_time</span>
            <span>x</span> <span>=</span> <span>evaluate_loss</span><span>(</span><span>model</span><span>)</span>
            <span>losses</span> <span>+=</span> <span>[</span><span>x</span><span>]</span>
            <span>if</span> <span>print_logs</span><span>:</span>
                <span>print</span><span>(</span><span>f</span><span>"Epoch </span><span>{</span><span>epoch</span><span>}</span><span> | val loss </span><span>{</span><span>x</span><span>[</span><span>'val'</span><span>]</span><span>:</span><span>.3f</span><span>}</span><span> | Time </span><span>{</span><span>batch_time</span><span>:</span><span>.3f</span><span>}</span><span> | ETA in seconds </span><span>{</span><span>batch_time</span><span> </span><span>*</span><span> </span><span>(</span><span>config</span><span>[</span><span>'epochs'</span><span>]</span><span> </span><span>-</span><span> </span><span>epoch</span><span>)</span><span>/</span><span>config</span><span>[</span><span>'log_interval'</span><span>]</span><span> </span><span>:</span><span>.3f</span><span>}</span><span>"</span><span>)</span>
            <span>start_time</span> <span>=</span> <span>time</span><span>.</span><span>time</span><span>()</span>

            <span>if</span> <span>scheduler</span><span>:</span>
                <span>print</span><span>(</span><span>"lr: "</span><span>,</span> <span>scheduler</span><span>.</span><span>get_lr</span><span>())</span>

    <span>print</span><span>(</span><span>"validation loss: "</span><span>,</span> <span>losses</span><span>[</span><span>-</span><span>1</span><span>][</span><span>'val'</span><span>])</span>
    <span>return</span> <span>pd</span><span>.</span><span>DataFrame</span><span>(</span><span>losses</span><span>)</span><span>.</span><span>plot</span><span>()</span>

<span>train</span><span>(</span><span>model</span><span>,</span> <span>optimizer</span><span>)</span>
</pre></div>

<div><pre><span></span>model params: 33217
validation loss:  3.9457355260849
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_22_2.png?raw=true"></p>
<p>Notice how we get a training curve that goes down, but barely by anything. How do we know it's barely training? We have to use first principles. The cross-entropy loss before training is 4.17, and after 1000 epochs is 3.93. How can we make sense of it intuitively?</p>
<p>Cross-entropy in this context is referring to how likely we are to pick the wrong word. So here,</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>T</mi><mo>,</mo><mi>q</mi><mo stretchy="false">)</mo><mo>=</mo><mo>‚àí</mo><msubsup><mo>‚àë</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>N</mi></mrow></msubsup><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><mi>log</mi><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></math></p>
<p>where $q(x_i)$ is the probability of picking the right word, as estimated by the model. If $q(x_i)$ is close to 1, then $\log q$ is close to 0; similarly, if $q$ is small, then $\log q$ is a large negative number, so $-\log q$ will be a large positive number. Now to build the intuition: to start, $-\log q = 4.17$, so $q = 0.015$, or around $\frac{1}{64.715}$. Recall that the vocabulary size $|V| = 65$, so what we're basically saying here is that the model is as good at choosing the next letter as randomly picking from our vocabulary. After training, $-\log q = 3.93$, so we're now basically choosing between 50 letters. This is a very small improvement, so something is probably wrong.</p>
<p>To get an intuition for how the loss relates to the model's performance, think about the model choosing among $\tilde V$ tokens; when $\tilde V$ is small, the model is more likely to guess right. In addition, we know $\max \tilde V = V$, which can help us understand if our model is learning at all.</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow><mover><mi>V</mi><mo stretchy="false">~</mo></mover><mo>=</mo><mi>exp</mi><mo stretchy="false">(</mo><mi>L</mi><mo stretchy="false">)</mo></mrow></math></p>
<p>Let's try to debug what's going on. Notice that in our model we're using a softmax layer on our logits, which is a function that takes a vector of numbers and squashes them into a probability distribution. But for using the built in <code>F.cross_entropy</code> function, we need to pass in the <a href="https://pytorch.org/docs/stable/generated/torch.nn.functional.cross_entropy.html">unnormalized logits directly</a>. So let's remove that from our model and try again.</p>
<div><pre><span></span><span>class</span> <span>SimpleModel</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>config</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>

        <span>self</span><span>.</span><span>embedding</span> <span>=</span> <span>nn</span><span>.</span><span>Embedding</span><span>(</span><span>config</span><span>[</span><span>'vocab_size'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>
        <span>self</span><span>.</span><span>linear</span> <span>=</span> <span>nn</span><span>.</span><span>Sequential</span><span>(</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
            <span>nn</span><span>.</span><span>ReLU</span><span>(),</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span>
        <span>)</span>

        <span>print</span><span>(</span><span>"model params:"</span><span>,</span> <span>sum</span><span>([</span><span>m</span><span>.</span><span>numel</span><span>()</span> <span>for</span> <span>m</span> <span>in</span> <span>self</span><span>.</span><span>parameters</span><span>()]))</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>idx</span><span>,</span> <span>targets</span><span>=</span><span>None</span><span>):</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>embedding</span><span>(</span><span>idx</span><span>)</span>
        <span>logits</span> <span>=</span> <span>self</span><span>.</span><span>linear</span><span>(</span><span>x</span><span>)</span>

        <span>if</span> <span>targets</span> <span>is</span> <span>not</span> <span>None</span><span>:</span>
            <span>loss</span> <span>=</span> <span>F</span><span>.</span><span>cross_entropy</span><span>(</span><span>logits</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>,</span> <span>self</span><span>.</span><span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span> <span>targets</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>))</span>
            <span>return</span> <span>logits</span><span>,</span> <span>loss</span>

        <span>else</span><span>:</span>
            <span>return</span> <span>logits</span>

<span>model</span> <span>=</span> <span>SimpleModel</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>xs</span><span>,</span> <span>ys</span> <span>=</span> <span>get_batches</span><span>(</span><span>dataset</span><span>,</span> <span>'train'</span><span>,</span> <span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>])</span>

<span>logits</span><span>,</span> <span>loss</span> <span>=</span> <span>model</span><span>(</span><span>xs</span><span>,</span> <span>ys</span><span>)</span>
<span>optimizer</span> <span>=</span> <span>torch</span><span>.</span><span>optim</span><span>.</span><span>Adam</span><span>(</span><span>model</span><span>.</span><span>parameters</span><span>())</span>
<span>train</span><span>(</span><span>model</span><span>,</span> <span>optimizer</span><span>)</span>
</pre></div>

<div><pre><span></span>model params: 33217
validation loss:  2.5113263607025145
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_24_2.png?raw=true"></p>
<p>Great, now our loss is $2.54$, so we're choosing from $12.67$ characters. That's way better than the 65 we started with. Let's add a generate method to our model so we visually see the results of our model.</p>
<div><pre><span></span><span>def</span> <span>generate</span><span>(</span><span>model</span><span>,</span> <span>config</span><span>=</span><span>MASTER_CONFIG</span><span>,</span> <span>max_new_tokens</span><span>=</span><span>30</span><span>):</span>
    <span>idx</span> <span>=</span> <span>torch</span><span>.</span><span>zeros</span><span>(</span><span>5</span><span>,</span> <span>1</span><span>)</span><span>.</span><span>long</span><span>()</span>
    <span>for</span> <span>_</span> <span>in</span> <span>range</span><span>(</span><span>max_new_tokens</span><span>):</span>
        <span># call the model</span>
        <span>logits</span> <span>=</span> <span>model</span><span>(</span><span>idx</span><span>[:,</span> <span>-</span><span>config</span><span>[</span><span>'context_window'</span><span>]:])</span>
        <span>last_time_step_logits</span> <span>=</span> <span>logits</span><span>[</span>
            <span>:,</span> <span>-</span><span>1</span><span>,</span> <span>:</span>
        <span>]</span>  <span># all the batches (1), last time step, all the logits</span>
        <span>p</span> <span>=</span> <span>F</span><span>.</span><span>softmax</span><span>(</span><span>last_time_step_logits</span><span>,</span> <span>dim</span><span>=-</span><span>1</span><span>)</span>  <span># softmax to get probabilities</span>
        <span>idx_next</span> <span>=</span> <span>torch</span><span>.</span><span>multinomial</span><span>(</span>
            <span>p</span><span>,</span> <span>num_samples</span><span>=</span><span>1</span>
        <span>)</span>  <span># sample from the distribution to get the next token</span>
        <span>idx</span> <span>=</span> <span>torch</span><span>.</span><span>cat</span><span>([</span><span>idx</span><span>,</span> <span>idx_next</span><span>],</span> <span>dim</span><span>=-</span><span>1</span><span>)</span>  <span># append to the sequence</span>
    <span>return</span> <span>[</span><span>decode</span><span>(</span><span>x</span><span>)</span> <span>for</span> <span>x</span> <span>in</span> <span>idx</span><span>.</span><span>tolist</span><span>()]</span>

<span>generate</span><span>(</span><span>model</span><span>)</span>
</pre></div>

<div><pre><span></span>['\nWI in\nThed grtend\nA yod ys wit',
 '\nY aroticunutser\nE oy mendomed ',
 "\n\nRIf t fan f ses, k be wn'd mo",
 '\nRu hiseedst den t wat onderyou',
 "\nARaceps hond wr f\nI' fu kn be "]
</pre></div>

<p>It's not half bad, but also not half good. But now we have a working model that is training to a validation loss. So here we'll iterate on our model to make it closer to Llama.</p>
<h2 id="llama-specifics">Llama specifics</h2>
<p>Llama describes three architectural modifications to the original Transformer:</p>
<ol>
<li>RMSNorm for pre-normalization</li>
<li>Rotary embeddings</li>
<li>SwiGLU activation function</li>
</ol>
<p>We're going to add each one, one at a time to our base model, and iterate.</p>
<h3 id="rmsnorm">RMSNorm</h3>
<p>In Vaswani 2017, the original transformer uses BatchNormalization. In Llama, the authors use RMSNorm, which is where you scale the bector by the variance without centering it. In addition, while Vaswani applies normalization to the output of the attention layer (post-normalization), Llama applies it to the inputs before (pre-normalization).</p>
<div><pre><span></span><span>class</span> <span>RMSNorm</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>layer_shape</span><span>,</span> <span>eps</span><span>=</span><span>1e-8</span><span>,</span> <span>bias</span><span>=</span><span>False</span><span>):</span>
        <span>super</span><span>(</span><span>RMSNorm</span><span>,</span> <span>self</span><span>)</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>register_parameter</span><span>(</span><span>"scale"</span><span>,</span> <span>nn</span><span>.</span><span>Parameter</span><span>(</span><span>torch</span><span>.</span><span>ones</span><span>(</span><span>layer_shape</span><span>)))</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>x</span><span>):</span>
<span>        </span><span>"""</span>
<span>        assumes shape is (batch, seq_len, d_model)</span>
<span>        """</span>
        <span># frob norm is not the same as RMS. RMS = 1/sqrt(N) * frob norm</span>
        <span>ff_rms</span> <span>=</span> <span>torch</span><span>.</span><span>linalg</span><span>.</span><span>norm</span><span>(</span><span>x</span><span>,</span> <span>dim</span><span>=</span><span>(</span><span>1</span><span>,</span><span>2</span><span>))</span> <span>*</span> <span>x</span><span>[</span><span>0</span><span>]</span><span>.</span><span>numel</span><span>()</span> <span>**</span> <span>-</span><span>.5</span>
        <span>raw</span> <span>=</span> <span>x</span> <span>/</span> <span>ff_rms</span><span>.</span><span>unsqueeze</span><span>(</span><span>-</span><span>1</span><span>)</span><span>.</span><span>unsqueeze</span><span>(</span><span>-</span><span>1</span><span>)</span>
        <span>return</span> <span>self</span><span>.</span><span>scale</span><span>[:</span><span>x</span><span>.</span><span>shape</span><span>[</span><span>1</span><span>],</span> <span>:]</span><span>.</span><span>unsqueeze</span><span>(</span><span>0</span><span>)</span> <span>*</span> <span>raw</span>

<span>config</span> <span>=</span> <span>{</span>
    <span>'batch_size'</span><span>:</span> <span>5</span><span>,</span>
    <span>'context_window'</span><span>:</span> <span>11</span><span>,</span>
    <span>'d_model'</span><span>:</span> <span>13</span><span>,</span>
<span>}</span>
<span>batch</span> <span>=</span> <span>torch</span><span>.</span><span>randn</span><span>((</span><span>config</span><span>[</span><span>'batch_size'</span><span>],</span> <span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>
<span>m</span> <span>=</span> <span>RMSNorm</span><span>((</span><span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>
<span>g</span> <span>=</span> <span>m</span><span>(</span><span>batch</span><span>)</span>
<span>print</span><span>(</span><span>g</span><span>.</span><span>shape</span><span>)</span>
</pre></div>



<p>We want to test to ensure that the RMSNorm is doing what we think it should. We can do this the old-fashioned way: row-wise comparisons. The RMSNorm has the property where the norm of the layer will be the square root of the number of elements in the layer, so we can check that for every layer.</p>
<div><pre><span></span><span>rms</span> <span>=</span> <span>torch</span><span>.</span><span>linalg</span><span>.</span><span>norm</span><span>(</span><span>batch</span><span>,</span> <span>dim</span><span>=</span><span>(</span><span>1</span><span>,</span><span>2</span><span>))</span> <span>*</span> <span>(</span><span>batch</span><span>[</span><span>0</span><span>]</span><span>.</span><span>numel</span><span>()</span> <span>**</span> <span>-</span><span>.5</span><span>)</span>

<span># scaled_batch.var(dim=(1,2))</span>
<span>assert</span> <span>torch</span><span>.</span><span>linalg</span><span>.</span><span>norm</span><span>(</span> <span>torch</span><span>.</span><span>arange</span><span>(</span><span>5</span><span>)</span><span>.</span><span>float</span><span>()</span> <span>)</span> <span>==</span> <span>(</span><span>torch</span><span>.</span><span>arange</span><span>(</span><span>5</span><span>)</span><span>.</span><span>float</span><span>()</span> <span>**</span> <span>2</span> <span>)</span><span>.</span><span>sum</span><span>()</span> <span>**</span> <span>.5</span>
<span>rms</span> <span>=</span> <span>torch</span><span>.</span><span>linalg</span><span>.</span><span>norm</span><span>(</span> <span>torch</span><span>.</span><span>arange</span><span>(</span><span>5</span><span>)</span><span>.</span><span>float</span><span>()</span> <span>)</span> <span>*</span> <span>(</span><span>torch</span><span>.</span><span>arange</span><span>(</span><span>5</span><span>)</span><span>.</span><span>numel</span><span>()</span> <span>**</span> <span>-</span><span>.5</span><span>)</span>
<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>torch</span><span>.</span><span>linalg</span><span>.</span><span>norm</span><span>(</span><span>torch</span><span>.</span><span>arange</span><span>(</span><span>5</span><span>)</span><span>.</span><span>float</span><span>()</span> <span>/</span> <span>rms</span><span>),</span> <span>torch</span><span>.</span><span>tensor</span><span>(</span><span>5</span> <span>**</span> <span>.5</span><span>))</span>
<span>ff_rms</span> <span>=</span> <span>torch</span><span>.</span><span>linalg</span><span>.</span><span>norm</span><span>(</span><span>batch</span><span>,</span> <span>dim</span><span>=</span><span>(</span><span>1</span><span>,</span><span>2</span><span>))</span> <span>*</span> <span>batch</span><span>.</span><span>shape</span><span>[</span><span>1</span><span>:]</span><span>.</span><span>numel</span><span>()</span> <span>**</span> <span>-</span><span>.5</span>

<span># RMS for sure</span>
<span>ffx</span> <span>=</span> <span>torch</span><span>.</span><span>zeros_like</span><span>(</span><span>batch</span><span>)</span>
<span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>batch</span><span>.</span><span>shape</span><span>[</span><span>0</span><span>]):</span>
    <span>ffx</span><span>[</span><span>i</span><span>]</span> <span>=</span> <span>batch</span><span>[</span><span>i</span><span>]</span> <span>/</span> <span>ff_rms</span><span>[</span><span>i</span><span>]</span>
<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>torch</span><span>.</span><span>linalg</span><span>.</span><span>norm</span><span>(</span><span>ffx</span><span>,</span> <span>dim</span><span>=</span><span>(</span><span>1</span><span>,</span><span>2</span><span>))</span> <span>**</span> <span>2</span><span>,</span> <span>torch</span><span>.</span><span>tensor</span><span>(</span><span>143</span><span>)</span><span>.</span><span>float</span><span>())</span>
<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>ffx</span><span>,</span> <span>g</span><span>)</span>
</pre></div>

<p>Alright, so that's RMSNorm, and it seems like it's working. Again, let's test it out.</p>
<div><pre><span></span><span>class</span> <span>SimpleModel_RMS</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>config</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>

        <span>self</span><span>.</span><span>embedding</span> <span>=</span> <span>nn</span><span>.</span><span>Embedding</span><span>(</span><span>config</span><span>[</span><span>'vocab_size'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>
        <span>self</span><span>.</span><span>rms</span> <span>=</span> <span>RMSNorm</span><span>((</span><span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>
        <span>self</span><span>.</span><span>linear</span> <span>=</span> <span>nn</span><span>.</span><span>Sequential</span><span>(</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
            <span>nn</span><span>.</span><span>ReLU</span><span>(),</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span>
        <span>)</span>

        <span>print</span><span>(</span><span>"model params:"</span><span>,</span> <span>sum</span><span>([</span><span>m</span><span>.</span><span>numel</span><span>()</span> <span>for</span> <span>m</span> <span>in</span> <span>self</span><span>.</span><span>parameters</span><span>()]))</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>idx</span><span>,</span> <span>targets</span><span>=</span><span>None</span><span>):</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>embedding</span><span>(</span><span>idx</span><span>)</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>rms</span><span>(</span><span>x</span><span>)</span> <span># rms pre-normalization</span>
        <span>logits</span> <span>=</span> <span>self</span><span>.</span><span>linear</span><span>(</span><span>x</span><span>)</span>

        <span>if</span> <span>targets</span> <span>is</span> <span>not</span> <span>None</span><span>:</span>
            <span>loss</span> <span>=</span> <span>F</span><span>.</span><span>cross_entropy</span><span>(</span><span>logits</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>,</span> <span>self</span><span>.</span><span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span> <span>targets</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>))</span>
            <span>return</span> <span>logits</span><span>,</span> <span>loss</span>

        <span>else</span><span>:</span>
            <span>return</span> <span>logits</span>

<span>model</span> <span>=</span> <span>SimpleModel_RMS</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>xs</span><span>,</span> <span>ys</span> <span>=</span> <span>get_batches</span><span>(</span><span>dataset</span><span>,</span> <span>'train'</span><span>,</span> <span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>])</span>

<span>logits</span><span>,</span> <span>loss</span> <span>=</span> <span>model</span><span>(</span><span>xs</span><span>,</span> <span>ys</span><span>)</span>
<span>optimizer</span> <span>=</span> <span>torch</span><span>.</span><span>optim</span><span>.</span><span>Adam</span><span>(</span><span>model</span><span>.</span><span>parameters</span><span>())</span>
<span>train</span><span>(</span><span>model</span><span>,</span> <span>optimizer</span><span>)</span>
</pre></div>

<div><pre><span></span>model params: 35265
validation loss:  2.4792869329452514
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_34_2.png?raw=true"></p>
<p>So RMSNorm works, and it got our loss down by a small amount.</p>
<h3 id="rotary-embeddings">Rotary Embeddings</h3>
<p><a href="https://arxiv.org/pdf/2104.09864.pdf">RoPE</a> is a kind of positional encoding for transformers. In Attention is All You Need, the authors propose two kinds of positional encodings, learned and fixed. In RoPE, the authors propose embedding the position of a token in a sequence by rotating the embedding, with a different rotation at each position.</p>
<div><pre><span></span><span>def</span> <span>get_rotary_matrix</span><span>(</span><span>context_window</span><span>,</span> <span>embedding_dim</span><span>):</span>
        <span>R</span> <span>=</span> <span>torch</span><span>.</span><span>zeros</span><span>((</span><span>context_window</span><span>,</span> <span>embedding_dim</span><span>,</span> <span>embedding_dim</span><span>),</span> <span>requires_grad</span><span>=</span><span>False</span><span>)</span>
        <span>for</span> <span>position</span> <span>in</span> <span>range</span><span>(</span><span>context_window</span><span>):</span>
            <span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>embedding_dim</span><span>//</span><span>2</span><span>):</span>
                <span>theta</span> <span>=</span> <span>10000.</span> <span>**</span> <span>(</span><span>-</span><span>2.</span><span>*</span><span>(</span><span>i</span> <span>-</span> <span>1</span><span>)</span> <span>/</span> <span>embedding_dim</span><span>)</span>
                <span>m_theta</span> <span>=</span> <span>position</span> <span>*</span> <span>theta</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>,</span><span>2</span><span>*</span><span>i</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>cos</span><span>(</span><span>m_theta</span><span>)</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>,</span><span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>]</span> <span>=</span> <span>-</span> <span>np</span><span>.</span><span>sin</span><span>(</span><span>m_theta</span><span>)</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>,</span><span>2</span><span>*</span><span>i</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>sin</span><span>(</span><span>m_theta</span><span>)</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>,</span><span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>cos</span><span>(</span><span>m_theta</span><span>)</span>
        <span>return</span> <span>R</span>
</pre></div>

<div><pre><span></span><span>K</span> <span>=</span> <span>3</span>
<span>config</span> <span>=</span> <span>{</span>
    <span>'batch_size'</span><span>:</span> <span>10</span><span>,</span>
    <span>'d_model'</span><span>:</span> <span>32</span><span>,</span>
    <span>'n_heads'</span><span>:</span> <span>8</span><span>,</span>
    <span>'context_window'</span><span>:</span> <span>K</span><span>**</span><span>2</span><span>,</span>
<span>}</span>
<span>batch</span> <span>=</span> <span>torch</span><span>.</span><span>randn</span><span>(</span><span>1</span><span>,</span> <span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>
<span>R</span> <span>=</span> <span>get_rotary_matrix</span><span>(</span><span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>
<span>fig</span><span>,</span> <span>ax</span> <span>=</span> <span>plt</span><span>.</span><span>subplots</span><span>(</span><span>K</span><span>,</span> <span>K</span><span>,</span> <span>figsize</span><span>=</span><span>(</span><span>K</span> <span>*</span> <span>3</span><span>,</span> <span>K</span> <span>*</span> <span>4</span><span>))</span>

<span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>K</span><span>):</span>
    <span>for</span> <span>j</span> <span>in</span> <span>range</span><span>(</span><span>K</span><span>):</span>
        <span>ax</span><span>[</span><span>i</span><span>,</span> <span>j</span><span>]</span><span>.</span><span>imshow</span><span>(</span><span>R</span><span>[</span><span>i</span> <span>*</span> <span>K</span> <span>+</span> <span>j</span><span>,</span> <span>:,</span> <span>:]</span><span>.</span><span>detach</span><span>()</span><span>.</span><span>numpy</span><span>())</span>
        <span>ax</span><span>[</span><span>i</span><span>,</span> <span>j</span><span>]</span><span>.</span><span>set_title</span><span>(</span><span>f</span><span>'rotation at </span><span>{</span><span>i</span><span> </span><span>*</span><span> </span><span>K</span><span> </span><span>+</span><span> </span><span>j</span><span>}</span><span>'</span><span>)</span>
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_38_0.png?raw=true"></p>
<p>Let's make sure these work. They should exhibit the quality that
<math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow><msubsup><mi>q</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>k</mi><mi>n</mi></msub><mo>=</mo><mo stretchy="false">(</mo><msubsup><mi>R</mi><mrow><mi>Œò</mi><mo>,</mo><mi>m</mi></mrow><mi>d</mi></msubsup><msub><mi>W</mi><mi>q</mi></msub><msub><mi>x</mi><mi>m</mi></msub><msup><mo stretchy="false">)</mo><mi>T</mi></msup><mo stretchy="false">(</mo><msubsup><mi>R</mi><mrow><mi>Œò</mi><mo>,</mo><mi>n</mi></mrow><mi>d</mi></msubsup><msub><mi>W</mi><mi>k</mi></msub><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msup><mi>x</mi><mi>T</mi></msup><msub><mi>W</mi><mi>q</mi></msub><msubsup><mi>R</mi><mrow><mi>Œò</mi><mo>,</mo><mi>n</mi><mo>‚àí</mo><mi>m</mi></mrow><mi>d</mi></msubsup><msub><mi>W</mi><mi>k</mi></msub><msub><mi>x</mi><mi>n</mi></msub><mo>.</mo></mrow></math></p>
<div><pre><span></span><span>config</span> <span>=</span> <span>{</span>
    <span>'d_model'</span><span>:</span> <span>128</span><span>,</span>
    <span>'context_window'</span><span>:</span> <span>16</span><span>,</span>
<span>}</span>

<span>R</span> <span>=</span> <span>get_rotary_matrix</span><span>(</span><span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>
<span>x</span> <span>=</span> <span>torch</span><span>.</span><span>randn</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>])</span>
<span>y</span> <span>=</span> <span>torch</span><span>.</span><span>randn</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>])</span>

<span>m</span> <span>=</span> <span>3</span>
<span>n</span> <span>=</span> <span>13</span>

<span>x_m</span> <span>=</span> <span>R</span><span>[</span><span>m</span><span>,:,:]</span> <span>@</span> <span>x</span>
<span>x_n</span> <span>=</span> <span>R</span><span>[</span><span>n</span><span>,:,:]</span> <span>@</span> <span>y</span>

<span>assert</span> <span>torch</span><span>.</span><span>isclose</span><span>(</span><span>x_m</span> <span>@</span> <span>x_n</span><span>,</span> <span>x</span> <span>@</span> <span>R</span><span>[</span><span>n</span><span>-</span><span>m</span><span>,:,:]</span> <span>@</span> <span>y</span><span>)</span>
</pre></div>

<p>So the RoPE rotations work as expected.</p>
<div><pre><span></span><span>config</span> <span>=</span> <span>{</span>
    <span>'batch_size'</span><span>:</span> <span>10</span><span>,</span>
    <span>'d_model'</span><span>:</span> <span>512</span><span>,</span>
    <span>'n_heads'</span><span>:</span> <span>8</span><span>,</span>
    <span>'context_window'</span><span>:</span> <span>16</span><span>,</span>
<span>}</span>

<span>class</span> <span>RoPEAttention</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>config</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>
        <span>self</span><span>.</span><span>w_q</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>bias</span><span>=</span><span>False</span><span>)</span>
        <span>self</span><span>.</span><span>w_k</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>bias</span><span>=</span><span>False</span><span>)</span>
        <span>self</span><span>.</span><span>w_v</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>bias</span><span>=</span><span>False</span><span>)</span>

        <span>self</span><span>.</span><span>multihead</span> <span>=</span> <span>nn</span><span>.</span><span>MultiheadAttention</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'n_heads'</span><span>],</span> <span>dropout</span><span>=</span><span>0.1</span><span>,</span> <span>batch_first</span><span>=</span><span>True</span><span>)</span>
        <span>self</span><span>.</span><span>R</span> <span>=</span> <span>get_rotary_matrix</span><span>(</span><span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>

    <span>def</span> <span>get_rotary_matrix</span><span>(</span><span>context_window</span><span>,</span> <span>embedding_dim</span><span>):</span>
        <span>R</span> <span>=</span> <span>torch</span><span>.</span><span>zeros</span><span>((</span><span>context_window</span><span>,</span> <span>embedding_dim</span><span>,</span> <span>embedding_dim</span><span>),</span> <span>requires_grad</span><span>=</span><span>False</span><span>)</span>
        <span>for</span> <span>position</span> <span>in</span> <span>range</span><span>(</span><span>context_window</span><span>):</span>
            <span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>embedding_dim</span><span>//</span><span>2</span><span>):</span>
                <span>theta</span> <span>=</span> <span>10000.</span> <span>**</span> <span>(</span><span>-</span><span>2.</span><span>*</span><span>(</span><span>i</span> <span>-</span> <span>1</span><span>)</span> <span>/</span> <span>embedding_dim</span><span>)</span>
                <span>m_theta</span> <span>=</span> <span>position</span> <span>*</span> <span>theta</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>,</span><span>2</span><span>*</span><span>i</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>cos</span><span>(</span><span>m_theta</span><span>)</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>,</span><span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>]</span> <span>=</span> <span>-</span> <span>np</span><span>.</span><span>sin</span><span>(</span><span>m_theta</span><span>)</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>,</span><span>2</span><span>*</span><span>i</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>sin</span><span>(</span><span>m_theta</span><span>)</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>,</span><span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>cos</span><span>(</span><span>m_theta</span><span>)</span>
        <span>return</span> <span>R</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>x</span><span>,</span> <span>return_attn_weights</span><span>=</span><span>False</span><span>):</span>
        <span>b</span><span>,</span><span>m</span><span>,</span><span>d</span> <span>=</span> <span>x</span><span>.</span><span>shape</span>

        <span>q</span> <span>=</span> <span>self</span><span>.</span><span>w_q</span><span>(</span><span>x</span><span>)</span>
        <span>k</span> <span>=</span> <span>self</span><span>.</span><span>w_k</span><span>(</span><span>x</span><span>)</span>
        <span>v</span> <span>=</span> <span>self</span><span>.</span><span>w_v</span><span>(</span><span>x</span><span>)</span>

        <span>q_out</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>bmm</span><span>(</span><span>q</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>),</span> <span>self</span><span>.</span><span>R</span><span>))</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)</span>
        <span>k_out</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>bmm</span><span>(</span><span>k</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>),</span> <span>self</span><span>.</span><span>R</span><span>))</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)</span>
        <span>v_out</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>bmm</span><span>(</span><span>v</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>),</span> <span>self</span><span>.</span><span>R</span><span>))</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)</span>

        <span>activations</span><span>,</span> <span>attn_weights</span> <span>=</span> <span>self</span><span>.</span><span>multihead</span><span>(</span>
            <span>q_out</span><span>,</span><span>k_out</span><span>,</span><span>v_out</span><span>,</span> 
        <span>)</span>

        <span>if</span> <span>return_attn_weights</span><span>:</span>
            <span>return</span> <span>activations</span><span>,</span> <span>attn_weights</span>
        <span>return</span> <span>activations</span>

<span>layer</span> <span>=</span> <span>RoPEAttention</span><span>(</span><span>config</span><span>)</span>
<span>batch</span> <span>=</span> <span>torch</span><span>.</span><span>randn</span><span>((</span><span>config</span><span>[</span><span>'batch_size'</span><span>],</span> <span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>
<span>output</span><span>,</span> <span>attn_weights</span> <span>=</span> <span>layer</span><span>(</span><span>batch</span><span>,</span> <span>return_attn_weights</span><span>=</span><span>True</span><span>)</span>
</pre></div>

<blockquote>
<p>Tip here: know the difference between tensor dimensions at train time vs tensor dimensions at inference time.</p>
</blockquote>
<p>Although at train time, you can expect your tensor dimensions to match your model parameters closely, eg <code>batch.shape = (config['batch_size'], config['context_window'], config['d_model'])</code>, at inference time, you may have to deal with a single example, eg <code>batch.shape = (1, 1, config['d_model'])</code>. For this reason, you need to make sure that when you're indexing in the <code>forward</code> pass, you're indexing using shapes derived from the input, not necessarily the model parameters.</p>
<p>Let's make sure it does what we think it does. For this layer, we're going to want to test three things:</p>
<ol>
<li>that it rotates embeddings the way we think it does</li>
<li>that the attention mask used for causal attention is working properly.</li>
</ol>
<div><pre><span></span><span>x</span> <span>=</span> <span>torch</span><span>.</span><span>randn</span><span>((</span><span>config</span><span>[</span><span>'batch_size'</span><span>],</span> <span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>

<span>q</span> <span>=</span> <span>layer</span><span>.</span><span>w_q</span><span>(</span><span>x</span><span>)</span>
<span>k</span> <span>=</span> <span>layer</span><span>.</span><span>w_k</span><span>(</span><span>x</span><span>)</span>
<span>v</span> <span>=</span> <span>layer</span><span>.</span><span>w_v</span><span>(</span><span>x</span><span>)</span>

<span>q_rotated</span> <span>=</span> <span>torch</span><span>.</span><span>zeros_like</span><span>(</span><span>x</span><span>)</span>
<span>k_rotated</span> <span>=</span> <span>torch</span><span>.</span><span>zeros_like</span><span>(</span><span>x</span><span>)</span>
<span>v_rotated</span> <span>=</span> <span>torch</span><span>.</span><span>zeros_like</span><span>(</span><span>x</span><span>)</span>

<span>for</span> <span>position</span> <span>in</span> <span>range</span><span>(</span><span>config</span><span>[</span><span>'context_window'</span><span>]):</span>
    <span>q_rotated</span><span>[:,</span><span>position</span><span>,:]</span> <span>=</span> <span>torch</span><span>.</span><span>matmul</span><span>(</span><span>q</span><span>[:,</span><span>position</span><span>,:],</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>position</span><span>,:,:])</span>
    <span>k_rotated</span><span>[:,</span><span>position</span><span>,:]</span> <span>=</span> <span>torch</span><span>.</span><span>matmul</span><span>(</span><span>k</span><span>[:,</span><span>position</span><span>,:],</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>position</span><span>,:,:])</span>
    <span>v_rotated</span><span>[:,</span><span>position</span><span>,:]</span> <span>=</span> <span>torch</span><span>.</span><span>matmul</span><span>(</span><span>v</span><span>[:,</span><span>position</span><span>,:],</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>position</span><span>,:,:])</span>

<span>q_out</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>bmm</span><span>(</span><span>q</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>),</span> <span>layer</span><span>.</span><span>R</span><span>))</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)</span>
<span>k_out</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>bmm</span><span>(</span><span>k</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>),</span> <span>layer</span><span>.</span><span>R</span><span>))</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)</span>
<span>v_out</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>bmm</span><span>(</span><span>v</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>),</span> <span>layer</span><span>.</span><span>R</span><span>))</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)</span>

<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>q</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)[</span><span>0</span><span>],</span> <span>q</span><span>[:,</span><span>0</span><span>,:])</span>
<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>q</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)[</span><span>0</span><span>]</span> <span>@</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>0</span><span>],</span> <span>q</span><span>[:,</span><span>0</span><span>,:]</span> <span>@</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>0</span><span>])</span>
<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>q_rotated</span><span>,</span> <span>q_out</span><span>)</span>
</pre></div>

<div><pre><span></span><span>config</span> <span>=</span> <span>{</span>
    <span>'batch_size'</span><span>:</span> <span>1</span><span>,</span>
    <span>'d_model'</span><span>:</span> <span>2</span><span>,</span>
    <span>'n_heads'</span><span>:</span> <span>2</span><span>,</span>
    <span>'context_window'</span><span>:</span> <span>3</span><span>,</span>
<span>}</span>

<span>layer</span> <span>=</span> <span>RoPEAttention</span><span>(</span><span>config</span><span>)</span>
<span>batch</span> <span>=</span> <span>torch</span><span>.</span><span>ones</span><span>((</span><span>config</span><span>[</span><span>'batch_size'</span><span>],</span> <span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>
<span>output</span><span>,</span> <span>attn_weights</span> <span>=</span> <span>layer</span><span>(</span><span>batch</span><span>,</span> <span>return_attn_weights</span><span>=</span><span>True</span><span>)</span>

<span>m</span> <span>=</span> <span>0</span>
<span>x_q</span> <span>=</span> <span>batch</span><span>[</span><span>0</span><span>,</span> <span>m</span><span>]</span>
<span>q</span> <span>=</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>m</span><span>,:,:]</span> <span>@</span> <span>layer</span><span>.</span><span>w_q</span><span>(</span><span>x_q</span><span>)</span>

<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>layer</span><span>.</span><span>w_q</span><span>(</span><span>x_q</span><span>),</span> <span>layer</span><span>.</span><span>w_q</span><span>.</span><span>weight</span> <span>@</span> <span>x_q</span><span>)</span>
<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>q</span><span>,</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>m</span><span>,</span> <span>:,</span> <span>:]</span> <span>@</span> <span>layer</span><span>.</span><span>w_q</span><span>.</span><span>weight</span> <span>@</span> <span>x_q</span><span>)</span>

<span>n</span> <span>=</span> <span>2</span>
<span>x_k</span> <span>=</span> <span>batch</span><span>[</span><span>0</span><span>,</span> <span>n</span><span>]</span>
<span>k</span> <span>=</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>n</span><span>,:,:]</span> <span>@</span> <span>layer</span><span>.</span><span>w_k</span><span>(</span><span>x_k</span><span>)</span>

<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>layer</span><span>.</span><span>w_k</span><span>(</span><span>x_k</span><span>),</span> <span>layer</span><span>.</span><span>w_k</span><span>.</span><span>weight</span> <span>@</span> <span>x_k</span><span>)</span>
<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>k</span><span>,</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>n</span><span>,</span> <span>:,</span> <span>:]</span> <span>@</span> <span>layer</span><span>.</span><span>w_k</span><span>.</span><span>weight</span> <span>@</span> <span>x_k</span><span>)</span>

<span>assert</span> <span>q</span><span>.</span><span>T</span> <span>@</span> <span>k</span> <span>==</span> <span>q</span> <span>@</span> <span>k</span> <span># transpose is redundant</span>
<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>q</span> <span>@</span> <span>k</span><span>,</span> <span>x_k</span><span>.</span><span>T</span> <span>@</span> <span>layer</span><span>.</span><span>w_k</span><span>.</span><span>weight</span><span>.</span><span>T</span> <span>@</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>n</span><span>,</span> <span>:,</span> <span>:]</span><span>.</span><span>T</span> <span>@</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>m</span><span>,</span> <span>:,</span> <span>:]</span> <span>@</span> <span>layer</span><span>.</span><span>w_q</span><span>.</span><span>weight</span> <span>@</span> <span>x_q</span><span>)</span>
<span>assert</span> <span>torch</span><span>.</span><span>allclose</span><span>(</span><span>q</span> <span>@</span> <span>k</span><span>,</span> <span>x_k</span><span>.</span><span>T</span> <span>@</span> <span>layer</span><span>.</span><span>w_k</span><span>.</span><span>weight</span><span>.</span><span>T</span> <span>@</span> <span>layer</span><span>.</span><span>R</span><span>[</span><span>n</span><span>-</span><span>m</span><span>,</span> <span>:,</span> <span>:]</span><span>.</span><span>T</span> <span>@</span> <span>layer</span><span>.</span><span>w_q</span><span>.</span><span>weight</span> <span>@</span> <span>x_q</span><span>)</span>
</pre></div>

<div><pre><span></span><span>/</span><span>var</span><span>/</span><span>folders</span><span>/</span><span>w4</span><span>/</span><span>2j887</span><span>mvs097bkhhjpgfzjlyr0000gn</span><span>/</span><span>T</span><span>/</span><span>ipykernel_17478</span><span>/</span><span>2550954139.</span><span>py</span><span>:</span><span>26</span><span>:</span><span> </span><span>UserWarning</span><span>:</span><span> </span><span>The</span><span> </span><span>use</span><span> </span><span>of</span><span> </span><span>`</span><span>x</span><span>.</span><span>T</span><span>`</span><span> </span><span>on</span><span> </span><span>tensors</span><span> </span><span>of</span><span> </span><span>dimension</span><span> </span><span>other</span><span> </span><span>than</span><span> </span><span>2</span><span> </span><span>to</span><span> </span><span>reverse</span><span> </span><span>their</span><span> </span><span>shape</span><span> </span><span>is</span><span> </span><span>deprecated</span><span> </span><span>and</span><span> </span><span>it</span><span> </span><span>will</span><span> </span><span>throw</span><span> </span><span>an</span><span> </span><span>error</span><span> </span><span>in</span><span> </span><span>a</span><span> </span><span>future</span><span> </span><span>release</span><span>.</span><span> </span><span>Consider</span><span> </span><span>`</span><span>x</span><span>.</span><span>mT</span><span>`</span><span> </span><span>to</span><span> </span><span>transpose</span><span> </span><span>batches</span><span> </span><span>of</span><span> </span><span>matrices</span><span> </span><span>or</span><span> </span><span>`</span><span>x</span><span>.</span><span>permute</span><span>(</span><span>*</span><span>torch</span><span>.</span><span>arange</span><span>(</span><span>x</span><span>.</span><span>ndim</span><span> </span><span>-</span><span> </span><span>1</span><span>,</span><span> </span><span>-</span><span>1</span><span>,</span><span> </span><span>-</span><span>1</span><span>))</span><span>`</span><span> </span><span>to</span><span> </span><span>reverse</span><span> </span><span>the</span><span> </span><span>dimensions</span><span> </span><span>of</span><span> </span><span>a</span><span> </span><span>tensor</span><span>.</span><span> </span><span>(</span><span>Triggered</span><span> </span><span>internally</span><span> </span><span>at</span><span> </span><span>/</span><span>Users</span><span>/</span><span>runner</span><span>/</span><span>work</span><span>/</span><span>pytorch</span><span>/</span><span>pytorch</span><span>/</span><span>pytorch</span><span>/</span><span>aten</span><span>/</span><span>src</span><span>/</span><span>ATen</span><span>/</span><span>native</span><span>/</span><span>TensorShape</span><span>.</span><span>cpp</span><span>:</span><span>3575.</span><span>)</span>
<span>  </span><span>assert</span><span> </span><span>q</span><span>.</span><span>T</span><span> </span><span>@</span><span> </span><span>k</span><span> </span><span>==</span><span> </span><span>q</span><span> </span><span>@</span><span> </span><span>k</span><span> </span><span># transpose is redundant</span>
</pre></div>

<p>Now let's inspect the attention weights. Since this is causal, we would expect that due to masking, the upper triangular of the attention should be 0.</p>
<div><pre><span></span><span>MASTER_CONFIG</span><span>.</span><span>update</span><span>({</span>
    <span>'n_heads'</span><span>:</span> <span>8</span><span>,</span>
<span>})</span>
<span>layer</span> <span>=</span> <span>RoPEAttention</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>batch</span> <span>=</span> <span>torch</span><span>.</span><span>ones</span><span>((</span><span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'d_model'</span><span>]))</span>
<span>output</span><span>,</span> <span>attn_weights</span> <span>=</span> <span>layer</span><span>(</span><span>batch</span><span>,</span> <span>return_attn_weights</span><span>=</span><span>True</span><span>)</span>

<span>plt</span><span>.</span><span>imshow</span><span>(</span><span>attn_weights</span><span>[</span><span>0</span><span>]</span><span>.</span><span>detach</span><span>()</span><span>.</span><span>numpy</span><span>(),</span> <span>interpolation</span><span>=</span><span>'nearest'</span><span>)</span>
<span>plt</span><span>.</span><span>colorbar</span><span>()</span>
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_48_1.png?raw=true"></p>
<p>This is not good; it means that information is leaking across the attention. We need to ensure the causal mask is working.</p>
<div><pre><span></span><span>class</span> <span>RoPEAttention_wMask</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>config</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>
        <span>self</span><span>.</span><span>w_q</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>bias</span><span>=</span><span>False</span><span>)</span>
        <span>self</span><span>.</span><span>w_k</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>bias</span><span>=</span><span>False</span><span>)</span>
        <span>self</span><span>.</span><span>w_v</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>bias</span><span>=</span><span>False</span><span>)</span>

        <span>self</span><span>.</span><span>multihead</span> <span>=</span> <span>nn</span><span>.</span><span>MultiheadAttention</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'n_heads'</span><span>],</span> <span>dropout</span><span>=</span><span>0.1</span><span>,</span> <span>batch_first</span><span>=</span><span>True</span><span>)</span>
        <span>self</span><span>.</span><span>R</span> <span>=</span> <span>get_rotary_matrix</span><span>(</span><span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>

    <span>def</span> <span>get_rotary_matrix</span><span>(</span><span>context_window</span><span>,</span> <span>embedding_dim</span><span>):</span>
        <span>R</span> <span>=</span> <span>torch</span><span>.</span><span>zeros</span><span>((</span><span>context_window</span><span>,</span> <span>embedding_dim</span><span>,</span> <span>embedding_dim</span><span>),</span> <span>requires_grad</span><span>=</span><span>False</span><span>)</span>
        <span>for</span> <span>position</span> <span>in</span> <span>range</span><span>(</span><span>context_window</span><span>):</span>
            <span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>embedding_dim</span><span>//</span><span>2</span><span>):</span>
                <span>theta</span> <span>=</span> <span>10000.</span> <span>**</span> <span>(</span><span>-</span><span>2.</span><span>*</span><span>(</span><span>i</span> <span>-</span> <span>1</span><span>)</span> <span>/</span> <span>embedding_dim</span><span>)</span>
                <span>m_theta</span> <span>=</span> <span>position</span> <span>*</span> <span>theta</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>,</span><span>2</span><span>*</span><span>i</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>cos</span><span>(</span><span>m_theta</span><span>)</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>,</span><span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>]</span> <span>=</span> <span>-</span> <span>np</span><span>.</span><span>sin</span><span>(</span><span>m_theta</span><span>)</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>,</span><span>2</span><span>*</span><span>i</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>sin</span><span>(</span><span>m_theta</span><span>)</span>
                <span>R</span><span>[</span><span>position</span><span>,</span> <span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>,</span><span>2</span><span>*</span><span>i</span><span>+</span><span>1</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>cos</span><span>(</span><span>m_theta</span><span>)</span>
        <span>return</span> <span>R</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>x</span><span>,</span> <span>return_attn_weights</span><span>=</span><span>False</span><span>):</span>
        <span>b</span><span>,</span><span>m</span><span>,</span><span>d</span> <span>=</span> <span>x</span><span>.</span><span>shape</span>

        <span>q</span> <span>=</span> <span>self</span><span>.</span><span>w_q</span><span>(</span><span>x</span><span>)</span>
        <span>k</span> <span>=</span> <span>self</span><span>.</span><span>w_k</span><span>(</span><span>x</span><span>)</span>
        <span>v</span> <span>=</span> <span>self</span><span>.</span><span>w_v</span><span>(</span><span>x</span><span>)</span>

        <span>q_out</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>bmm</span><span>(</span><span>q</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>),</span> <span>self</span><span>.</span><span>R</span><span>[:</span><span>m</span><span>,</span> <span>...</span><span>]))</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)</span>
        <span>k_out</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>bmm</span><span>(</span><span>k</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>),</span> <span>self</span><span>.</span><span>R</span><span>[:</span><span>m</span><span>,</span> <span>...</span><span>]))</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)</span>
        <span>v_out</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>bmm</span><span>(</span><span>v</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>),</span> <span>self</span><span>.</span><span>R</span><span>[:</span><span>m</span><span>,</span> <span>...</span><span>]))</span><span>.</span><span>transpose</span><span>(</span><span>0</span><span>,</span><span>1</span><span>)</span>

        <span>activations</span><span>,</span> <span>attn_weights</span> <span>=</span> <span>self</span><span>.</span><span>multihead</span><span>(</span>
            <span>q_out</span><span>,</span><span>k_out</span><span>,</span><span>v_out</span><span>,</span> 
            <span>attn_mask</span><span>=</span><span>nn</span><span>.</span><span>Transformer</span><span>.</span><span>generate_square_subsequent_mask</span><span>(</span><span>m</span><span>),</span>
            <span>is_causal</span><span>=</span><span>True</span>
        <span>)</span>

        <span>if</span> <span>return_attn_weights</span><span>:</span>
            <span>return</span> <span>activations</span><span>,</span> <span>attn_weights</span>
        <span>return</span> <span>activations</span>

<span>layer</span> <span>=</span> <span>RoPEAttention</span><span>(</span><span>config</span><span>)</span>
<span>batch</span> <span>=</span> <span>torch</span><span>.</span><span>randn</span><span>((</span><span>config</span><span>[</span><span>'batch_size'</span><span>],</span> <span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>
<span>output</span><span>,</span> <span>attn_weights</span> <span>=</span> <span>layer</span><span>(</span><span>batch</span><span>,</span> <span>return_attn_weights</span><span>=</span><span>True</span><span>)</span>
</pre></div>

<div><pre><span></span><span>layer</span> <span>=</span> <span>RoPEAttention_wMask</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>batch</span> <span>=</span> <span>torch</span><span>.</span><span>ones</span><span>((</span><span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'d_model'</span><span>]))</span>
<span>output</span><span>,</span> <span>attn_weights</span> <span>=</span> <span>layer</span><span>(</span><span>batch</span><span>,</span> <span>return_attn_weights</span><span>=</span><span>True</span><span>)</span>

<span>plt</span><span>.</span><span>imshow</span><span>(</span><span>attn_weights</span><span>[</span><span>0</span><span>]</span><span>.</span><span>detach</span><span>()</span><span>.</span><span>numpy</span><span>())</span>
<span>plt</span><span>.</span><span>colorbar</span><span>()</span>
</pre></div>

<div><pre><span></span>&lt;matplotlib.colorbar.Colorbar at 0x16c2c7b50&gt;
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_51_1.png?raw=true"></p>
<p>Alright, let's run it and see what happens.</p>
<div><pre><span></span><span>class</span> <span>RopeModel</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>config</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>

        <span>self</span><span>.</span><span>embedding</span> <span>=</span> <span>nn</span><span>.</span><span>Embedding</span><span>(</span><span>config</span><span>[</span><span>'vocab_size'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>
        <span>self</span><span>.</span><span>rms</span> <span>=</span> <span>RMSNorm</span><span>((</span><span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>
        <span>self</span><span>.</span><span>rope_attention</span> <span>=</span> <span>RoPEAttention_wMask</span><span>(</span><span>config</span><span>)</span>

        <span>self</span><span>.</span><span>linear</span> <span>=</span> <span>nn</span><span>.</span><span>Sequential</span><span>(</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
            <span>nn</span><span>.</span><span>ReLU</span><span>(),</span>
        <span>)</span>

        <span>self</span><span>.</span><span>last_linear</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'vocab_size'</span><span>])</span>

        <span>print</span><span>(</span><span>"model params:"</span><span>,</span> <span>sum</span><span>([</span><span>m</span><span>.</span><span>numel</span><span>()</span> <span>for</span> <span>m</span> <span>in</span> <span>self</span><span>.</span><span>parameters</span><span>()]))</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>idx</span><span>,</span> <span>targets</span><span>=</span><span>None</span><span>):</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>embedding</span><span>(</span><span>idx</span><span>)</span>

        <span># one block of attention</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>rms</span><span>(</span><span>x</span><span>)</span> <span># rms pre-normalization</span>
        <span>x</span> <span>=</span> <span>x</span> <span>+</span> <span>self</span><span>.</span><span>rope_attention</span><span>(</span><span>x</span><span>)</span>

        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>rms</span><span>(</span><span>x</span><span>)</span> <span># rms pre-normalization</span>
        <span>x</span> <span>=</span> <span>x</span> <span>+</span> <span>self</span><span>.</span><span>linear</span><span>(</span><span>x</span><span>)</span>

        <span>logits</span> <span>=</span> <span>self</span><span>.</span><span>last_linear</span><span>(</span><span>x</span><span>)</span>

        <span>if</span> <span>targets</span> <span>is</span> <span>not</span> <span>None</span><span>:</span>
            <span>loss</span> <span>=</span> <span>F</span><span>.</span><span>cross_entropy</span><span>(</span><span>logits</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>,</span> <span>self</span><span>.</span><span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span> <span>targets</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>))</span>
            <span>return</span> <span>logits</span><span>,</span> <span>loss</span>

        <span>else</span><span>:</span>
            <span>return</span> <span>logits</span>

<span>model</span> <span>=</span> <span>RopeModel</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>xs</span><span>,</span> <span>ys</span> <span>=</span> <span>get_batches</span><span>(</span><span>dataset</span><span>,</span> <span>'train'</span><span>,</span> <span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>])</span>

<span>logits</span><span>,</span> <span>loss</span> <span>=</span> <span>model</span><span>(</span><span>xs</span><span>,</span> <span>ys</span><span>)</span>
<span>optimizer</span> <span>=</span> <span>torch</span><span>.</span><span>optim</span><span>.</span><span>Adam</span><span>(</span><span>model</span><span>.</span><span>parameters</span><span>())</span>
<span>train</span><span>(</span><span>model</span><span>,</span> <span>optimizer</span><span>)</span>
</pre></div>

<div><pre><span></span>model params: 150465
validation loss:  2.1157416343688964
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_53_2.png?raw=true"></p>
<p>It looks like we can drive our loss down even lower. Let's do that by updating master config.</p>
<div><pre><span></span><span>MASTER_CONFIG</span><span>.</span><span>update</span><span>({</span>
    <span>"epochs"</span><span>:</span> <span>5000</span><span>,</span>
    <span>"log_interval"</span><span>:</span> <span>10</span><span>,</span>
<span>})</span>
<span>train</span><span>(</span><span>model</span><span>,</span> <span>optimizer</span><span>)</span>
</pre></div>

<div><pre><span></span>validation loss:  1.9027801871299743
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_55_2.png?raw=true"></p>
<h3 id="swiglu">SwiGLU</h3>
<p>As it says in the paper, "We replace the ReLU non-linearity by the SwiGLU activation function...we use a dimension of $\frac{2}{3} 4d$ isntead of $4d$ as in PaLM." SwiGLU is defined as:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow><mtext>SwiGLU</mtext><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mtext>Swish</mtext><mi>Œ≤</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mi>W</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo><mo>‚äó</mo><mo stretchy="false">(</mo><mi>x</mi><mi>V</mi><mo>+</mo><mi>c</mi><mo stretchy="false">)</mo></mrow></math></p>
<p>where $\otimes$ is a component-wise product. The Swish function is defined as:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow><msub><mtext>Swish</mtext><mi>Œ≤</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi><mi>œÉ</mi><mo stretchy="false">(</mo><mi>Œ≤</mi><mi>x</mi><mo stretchy="false">)</mo></mrow></math></p>
<p>where $\beta$ is a learnable parameter.</p>
<div><pre><span></span><span>class</span> <span>SwiGLU</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
<span>    </span><span>"""</span>
<span>    Swish-Gated Linear Unit</span>
<span>    https://arxiv.org/pdf/2002.05202v1.pdf</span>
<span>    """</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>size</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>
        <span>self</span><span>.</span><span>linear_gate</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>size</span><span>,</span> <span>size</span><span>)</span>
        <span>self</span><span>.</span><span>linear</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>size</span><span>,</span> <span>size</span><span>)</span>
        <span>self</span><span>.</span><span>beta</span> <span>=</span> <span>torch</span><span>.</span><span>randn</span><span>(</span><span>1</span><span>,</span> <span>requires_grad</span><span>=</span><span>True</span><span>)</span>

        <span>self</span><span>.</span><span>beta</span> <span>=</span> <span>nn</span><span>.</span><span>Parameter</span><span>(</span><span>torch</span><span>.</span><span>ones</span><span>(</span><span>1</span><span>))</span>
        <span>self</span><span>.</span><span>register_parameter</span><span>(</span><span>"beta"</span><span>,</span> <span>self</span><span>.</span><span>beta</span><span>)</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>x</span><span>):</span> 
        <span>swish_gate</span> <span>=</span> <span>self</span><span>.</span><span>linear_gate</span><span>(</span><span>x</span><span>)</span> <span>*</span> <span>torch</span><span>.</span><span>sigmoid</span><span>(</span><span>self</span><span>.</span><span>beta</span> <span>*</span> <span>self</span><span>.</span><span>linear_gate</span><span>(</span><span>x</span><span>))</span>
        <span>out</span> <span>=</span> <span>swish_gate</span> <span>*</span> <span>self</span><span>.</span><span>linear</span><span>(</span><span>x</span><span>)</span>
        <span>return</span> <span>out</span>
</pre></div>

<div><pre><span></span><span>class</span> <span>RopeModel</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>config</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>

        <span>self</span><span>.</span><span>embedding</span> <span>=</span> <span>nn</span><span>.</span><span>Embedding</span><span>(</span><span>config</span><span>[</span><span>'vocab_size'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>
        <span>self</span><span>.</span><span>rms</span> <span>=</span> <span>RMSNorm</span><span>((</span><span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>
        <span>self</span><span>.</span><span>rope_attention</span> <span>=</span> <span>RoPEAttention_wMask</span><span>(</span><span>config</span><span>)</span>

        <span>self</span><span>.</span><span>linear</span> <span>=</span> <span>nn</span><span>.</span><span>Sequential</span><span>(</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
            <span>SwiGLU</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
        <span>)</span>

        <span>self</span><span>.</span><span>last_linear</span> <span>=</span> <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'vocab_size'</span><span>])</span>

        <span>print</span><span>(</span><span>"model params:"</span><span>,</span> <span>sum</span><span>([</span><span>m</span><span>.</span><span>numel</span><span>()</span> <span>for</span> <span>m</span> <span>in</span> <span>self</span><span>.</span><span>parameters</span><span>()]))</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>idx</span><span>,</span> <span>targets</span><span>=</span><span>None</span><span>):</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>embedding</span><span>(</span><span>idx</span><span>)</span>

        <span># one block of attention</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>rms</span><span>(</span><span>x</span><span>)</span> <span># rms pre-normalization</span>
        <span>x</span> <span>=</span> <span>x</span> <span>+</span> <span>self</span><span>.</span><span>rope_attention</span><span>(</span><span>x</span><span>)</span>

        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>rms</span><span>(</span><span>x</span><span>)</span> <span># rms pre-normalization</span>
        <span>x</span> <span>=</span> <span>x</span> <span>+</span> <span>self</span><span>.</span><span>linear</span><span>(</span><span>x</span><span>)</span>

        <span>logits</span> <span>=</span> <span>self</span><span>.</span><span>last_linear</span><span>(</span><span>x</span><span>)</span>

        <span>if</span> <span>targets</span> <span>is</span> <span>not</span> <span>None</span><span>:</span>
            <span>loss</span> <span>=</span> <span>F</span><span>.</span><span>cross_entropy</span><span>(</span><span>logits</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>,</span> <span>self</span><span>.</span><span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span> <span>targets</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>))</span>
            <span>return</span> <span>logits</span><span>,</span> <span>loss</span>

        <span>else</span><span>:</span>
            <span>return</span> <span>logits</span>

<span>model</span> <span>=</span> <span>RopeModel</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>xs</span><span>,</span> <span>ys</span> <span>=</span> <span>get_batches</span><span>(</span><span>dataset</span><span>,</span> <span>'train'</span><span>,</span> <span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>])</span>

<span>logits</span><span>,</span> <span>loss</span> <span>=</span> <span>model</span><span>(</span><span>xs</span><span>,</span> <span>ys</span><span>)</span>
<span>optimizer</span> <span>=</span> <span>torch</span><span>.</span><span>optim</span><span>.</span><span>Adam</span><span>(</span><span>model</span><span>.</span><span>parameters</span><span>())</span>
<span>train</span><span>(</span><span>model</span><span>,</span> <span>optimizer</span><span>)</span>
</pre></div>

<div><pre><span></span>model params: 183490
validation loss:  1.8666490197181702
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_58_2.png?raw=true"></p>
<p>Now, let's add multiple layers of RopeAttention by creating blocks.</p>
<div><pre><span></span><span># add RMSNorm and residual conncection</span>
<span>class</span> <span>LlamaBlock</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>config</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>

        <span>self</span><span>.</span><span>rms</span> <span>=</span> <span>RMSNorm</span><span>((</span><span>config</span><span>[</span><span>'context_window'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]))</span>

        <span>self</span><span>.</span><span>attention</span> <span>=</span> <span>RoPEAttention_wMask</span><span>(</span><span>config</span><span>)</span>
        <span>self</span><span>.</span><span>feedforward</span> <span>=</span> <span>nn</span><span>.</span><span>Sequential</span><span>(</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
            <span>SwiGLU</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
        <span>)</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>x</span><span>):</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>rms</span><span>(</span><span>x</span><span>)</span> <span># rms pre-normalization</span>
        <span>x</span> <span>=</span> <span>x</span> <span>+</span> <span>self</span><span>.</span><span>attention</span><span>(</span><span>x</span><span>)</span>

        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>rms</span><span>(</span><span>x</span><span>)</span> <span># rms pre-normalization</span>
        <span>x</span> <span>=</span> <span>x</span> <span>+</span> <span>self</span><span>.</span><span>feedforward</span><span>(</span><span>x</span><span>)</span>
        <span>return</span> <span>x</span>
</pre></div>

<div><pre><span></span><span>block</span> <span>=</span> <span>LlamaBlock</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>block</span><span>(</span><span>torch</span><span>.</span><span>randn</span><span>(</span><span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'d_model'</span><span>]));</span>
</pre></div>

<div><pre><span></span><span>from</span> <span>collections</span> <span>import</span> <span>OrderedDict</span>

<span>MASTER_CONFIG</span><span>.</span><span>update</span><span>({</span>
    <span>'n_layers'</span><span>:</span> <span>4</span><span>,</span>
<span>})</span>
<span>class</span> <span>Llama</span><span>(</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>config</span><span>):</span>
        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
        <span>self</span><span>.</span><span>config</span> <span>=</span> <span>config</span>
        <span>self</span><span>.</span><span>embeddings</span> <span>=</span> <span>nn</span><span>.</span><span>Embedding</span><span>(</span><span>config</span><span>[</span><span>'vocab_size'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>])</span>
        <span>self</span><span>.</span><span>llama_blocks</span> <span>=</span> <span>nn</span><span>.</span><span>Sequential</span><span>(</span>
            <span>OrderedDict</span><span>([(</span><span>f</span><span>"llama_</span><span>{</span><span>i</span><span>}</span><span>"</span><span>,</span> <span>LlamaBlock</span><span>(</span><span>config</span><span>))</span> <span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>config</span><span>[</span><span>'n_layers'</span><span>])])</span>
        <span>)</span>

        <span>self</span><span>.</span><span>ffn</span> <span>=</span> <span>nn</span><span>.</span><span>Sequential</span><span>(</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
            <span>SwiGLU</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>]),</span>
            <span>nn</span><span>.</span><span>Linear</span><span>(</span><span>config</span><span>[</span><span>'d_model'</span><span>],</span> <span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span>
        <span>)</span>

        <span>print</span><span>(</span><span>"model params:"</span><span>,</span> <span>sum</span><span>([</span><span>m</span><span>.</span><span>numel</span><span>()</span> <span>for</span> <span>m</span> <span>in</span> <span>self</span><span>.</span><span>parameters</span><span>()]))</span>

    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>idx</span><span>,</span> <span>targets</span><span>=</span><span>None</span><span>):</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>embeddings</span><span>(</span><span>idx</span><span>)</span>
        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>llama_blocks</span><span>(</span><span>x</span><span>)</span>
        <span>logits</span> <span>=</span> <span>self</span><span>.</span><span>ffn</span><span>(</span><span>x</span><span>)</span>

        <span>if</span> <span>targets</span> <span>is</span> <span>None</span><span>:</span>
            <span>return</span> <span>logits</span>

        <span>else</span><span>:</span>
            <span>loss</span> <span>=</span> <span>F</span><span>.</span><span>cross_entropy</span><span>(</span><span>logits</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>,</span> <span>self</span><span>.</span><span>config</span><span>[</span><span>'vocab_size'</span><span>]),</span> <span>targets</span><span>.</span><span>view</span><span>(</span><span>-</span><span>1</span><span>))</span>
            <span>return</span> <span>logits</span><span>,</span> <span>loss</span>

<span>llama</span> <span>=</span> <span>Llama</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>optimizer</span> <span>=</span> <span>torch</span><span>.</span><span>optim</span><span>.</span><span>Adam</span><span>(</span><span>llama</span><span>.</span><span>parameters</span><span>())</span>
<span>train</span><span>(</span><span>llama</span><span>,</span> <span>optimizer</span><span>,</span> <span>config</span><span>=</span><span>MASTER_CONFIG</span><span>)</span>
</pre></div>

<div><pre><span></span>model params: 733382
validation loss:  1.616115140914917
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_62_2.png?raw=true"></p>
<p>It looks like we can drive the loss down even more, and although we're overfitting a little, I think we can still do better. Let's train longer.</p>
<div><pre><span></span><span>MASTER_CONFIG</span><span>.</span><span>update</span><span>({</span>
    <span>'epochs'</span><span>:</span> <span>10000</span><span>,</span>
<span>})</span>
<span>train</span><span>(</span><span>llama</span><span>,</span> <span>optimizer</span><span>,</span> <span>scheduler</span><span>=</span><span>None</span><span>,</span> <span>config</span><span>=</span><span>MASTER_CONFIG</span><span>)</span>
</pre></div>

<div><pre><span></span>validation loss:  0.9024032115936279
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_64_2.png?raw=true"></p>
<p>It seems we can go even lower, still without serious overfitting. Either there is a leak, or it's actually doing well. The loss here is 1.08, which is equivalent to choosing between 2.9 tokens randomly.</p>
<div><pre><span></span><span>train</span><span>(</span><span>llama</span><span>,</span> <span>optimizer</span><span>,</span> <span>config</span><span>=</span><span>MASTER_CONFIG</span><span>)</span>
</pre></div>

<div><pre><span></span>validation loss:  0.746810007095337
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_66_2.png?raw=true"></p>
<div><pre><span></span><span>print</span><span>(</span><span>generate</span><span>(</span><span>llama</span><span>,</span> <span>MASTER_CONFIG</span><span>,</span> <span>500</span><span>)[</span><span>0</span><span>])</span>
</pre></div>

<div><pre><span></span>Evend her break of thou thire xoing dieble had side, did foesors exenatedH in siffied up,
    No, none,
    And you ling as thought depond.

    MENENIUS:
    Tell officien:
    To pesiding be
    Best wanty and to spiege,
    To uncine shee patss again,
    I will hen: then they
    Moieth:
    I my cast in letch:
    For bereful, give toan I may

    LINT OF AUMERLE:
    Out, or me but thee here sir,
    Why first with canse pring;
    Now!

    Gide me couuse
    The haster:
    And suilt harming,
    Then as pereise with and go.

    FROMNIUS:
    I well? speak and wieke ac
</pre></div>

<p>At this point, we've hit the bottom with our training. Let's test on the test set.</p>
<div><pre><span></span><span>xs</span><span>,</span> <span>ys</span> <span>=</span> <span>get_batches</span><span>(</span><span>dataset</span><span>,</span> <span>'test'</span><span>,</span> <span>MASTER_CONFIG</span><span>[</span><span>'batch_size'</span><span>],</span> <span>MASTER_CONFIG</span><span>[</span><span>'context_window'</span><span>])</span>

<span>logits</span><span>,</span> <span>loss</span> <span>=</span> <span>llama</span><span>(</span><span>xs</span><span>,</span> <span>ys</span><span>)</span>

<span>print</span><span>(</span><span>loss</span><span>)</span>
</pre></div>

<div><pre><span></span>tensor(0.8304, grad_fn=&lt;NllLossBackward0&gt;)
</pre></div>

<h2 id="miscellaneous">Miscellaneous</h2>
<h2 id="check-for-gradient-flows">Check for Gradient Flows</h2>
<p>Let's inspect the gradients, we want to see how they're flowing. If there are too many gradients where the value is close to 0, that's a problem.</p>
<div><pre><span></span><span># print the percentage that are near 0</span>
<span>def</span> <span>show_grads</span><span>(</span><span>model</span><span>,</span> <span>tol</span><span>=</span><span>1e-2</span><span>):</span>
    <span>return</span> <span>sorted</span><span>([(</span><span>name</span><span>,</span> <span>100.0</span> <span>*</span> <span>float</span><span>(</span><span>torch</span><span>.</span><span>sum</span><span>(</span><span>torch</span><span>.</span><span>abs</span><span>(</span><span>param</span><span>)</span> <span>&lt;=</span> <span>tol</span><span>))</span> <span>/</span> <span>float</span><span>(</span><span>param</span><span>.</span><span>nelement</span><span>()))</span> <span>for</span> <span>name</span><span>,</span> <span>param</span> <span>in</span> <span>model</span><span>.</span><span>named_parameters</span><span>()</span> <span>if</span> <span>param</span><span>.</span><span>requires_grad</span><span>],</span> <span>key</span><span>=</span><span>lambda</span> <span>t</span><span>:</span> <span>t</span><span>[</span><span>1</span><span>],</span> <span>reverse</span><span>=</span><span>True</span><span>)</span>

<span>show_grads</span><span>(</span><span>llama</span><span>)</span>
</pre></div>

<div><pre><span></span>[('llama_blocks.llama_0.attention.multihead.in_proj_bias', 36.71875),
 ('llama_blocks.llama_3.attention.multihead.in_proj_bias', 35.9375),
 ('llama_blocks.llama_1.attention.multihead.in_proj_bias', 33.59375),
 ('llama_blocks.llama_2.attention.multihead.in_proj_bias', 33.333333333333336),
 ('llama_blocks.llama_0.attention.multihead.in_proj_weight',
  21.840413411458332),
 ('llama_blocks.llama_0.attention.w_q.weight', 14.892578125),
 ('llama_blocks.llama_0.attention.multihead.out_proj.weight', 13.4765625),
 ('llama_blocks.llama_0.attention.w_k.weight', 12.9638671875),
 ('llama_blocks.llama_0.attention.w_v.weight', 11.8896484375),
 ('llama_blocks.llama_1.attention.w_v.weight', 11.285400390625),
 ('llama_blocks.llama_3.attention.multihead.out_proj.weight', 11.12060546875),
 ('llama_blocks.llama_2.attention.w_v.weight', 10.68115234375),
 ('llama_blocks.llama_0.feedforward.0.weight', 10.4248046875),
 ('llama_blocks.llama_2.attention.multihead.out_proj.weight', 10.36376953125),
 ('llama_blocks.llama_1.attention.multihead.out_proj.weight', 10.2783203125),
 ('llama_blocks.llama_3.attention.multihead.out_proj.bias', 10.15625),
 ('llama_blocks.llama_3.attention.w_v.weight', 9.991455078125),
 ('llama_blocks.llama_0.feedforward.1.linear.weight', 9.9609375),
 ('llama_blocks.llama_1.attention.multihead.in_proj_weight',
  9.908040364583334),
 ('llama_blocks.llama_2.attention.multihead.in_proj_weight', 9.75341796875),
 ('llama_blocks.llama_0.feedforward.1.linear_gate.weight', 9.66796875),
 ('llama_blocks.llama_1.attention.multihead.out_proj.bias', 9.375),
 ('llama_blocks.llama_3.attention.multihead.in_proj_weight', 9.16748046875),
 ('llama_blocks.llama_1.feedforward.0.weight', 8.77685546875),
 ('llama_blocks.llama_0.feedforward.1.linear_gate.bias', 8.59375),
 ('llama_blocks.llama_2.feedforward.1.linear.bias', 8.59375),
 ('llama_blocks.llama_2.feedforward.0.weight', 8.4228515625),
 ('llama_blocks.llama_1.feedforward.1.linear.weight', 7.720947265625),
 ('llama_blocks.llama_1.feedforward.1.linear_gate.weight', 7.501220703125),
 ('llama_blocks.llama_3.feedforward.0.weight', 7.440185546875),
 ('llama_blocks.llama_2.feedforward.1.linear.weight', 7.31201171875),
 ('llama_blocks.llama_2.feedforward.1.linear_gate.weight', 7.196044921875),
 ('llama_blocks.llama_1.feedforward.1.linear_gate.bias', 7.03125),
 ('llama_blocks.llama_2.attention.multihead.out_proj.bias', 7.03125),
 ('llama_blocks.llama_2.feedforward.1.linear_gate.bias', 7.03125),
 ('llama_blocks.llama_2.attention.w_k.weight', 6.94580078125),
 ('llama_blocks.llama_3.feedforward.1.linear.weight', 6.927490234375),
 ('llama_blocks.llama_1.attention.w_k.weight', 6.82373046875),
 ('llama_blocks.llama_2.attention.w_q.weight', 6.82373046875),
 ('llama_blocks.llama_3.attention.w_k.weight', 6.585693359375),
 ('llama_blocks.llama_3.feedforward.1.linear_gate.weight', 6.494140625),
 ('llama_blocks.llama_1.attention.w_q.weight', 6.396484375),
 ('llama_blocks.llama_1.feedforward.1.linear.bias', 6.25),
 ('llama_blocks.llama_3.feedforward.1.linear.bias', 6.25),
 ('llama_blocks.llama_3.attention.w_q.weight', 6.2255859375),
 ('ffn.0.weight', 5.633544921875),
 ('llama_blocks.llama_0.feedforward.1.linear.bias', 5.46875),
 ('ffn.1.linear_gate.bias', 5.46875),
 ('ffn.1.linear_gate.weight', 5.2978515625),
 ('ffn.1.linear.weight', 5.26123046875),
 ('ffn.2.weight', 4.447115384615385),
 ('ffn.1.linear.bias', 3.90625),
 ('llama_blocks.llama_0.feedforward.0.bias', 3.125),
 ('ffn.2.bias', 3.076923076923077),
 ('llama_blocks.llama_3.feedforward.0.bias', 2.34375),
 ('ffn.0.bias', 2.34375),
 ('llama_blocks.llama_0.attention.multihead.out_proj.bias', 1.5625),
 ('llama_blocks.llama_2.feedforward.0.bias', 1.5625),
 ('llama_blocks.llama_3.feedforward.1.linear_gate.bias', 1.5625),
 ('llama_blocks.llama_1.feedforward.0.bias', 0.78125),
 ('embeddings.weight', 0.7572115384615384),
 ('llama_blocks.llama_0.rms.scale', 0.146484375),
 ('llama_blocks.llama_0.feedforward.1.beta', 0.0),
 ('llama_blocks.llama_1.rms.scale', 0.0),
 ('llama_blocks.llama_1.feedforward.1.beta', 0.0),
 ('llama_blocks.llama_2.rms.scale', 0.0),
 ('llama_blocks.llama_2.feedforward.1.beta', 0.0),
 ('llama_blocks.llama_3.rms.scale', 0.0),
 ('llama_blocks.llama_3.feedforward.1.beta', 0.0),
 ('ffn.1.beta', 0.0)]
</pre></div>

<p>Here, for all of our parameter gradients, the vast majority are non-zero, which is great. If we start to see this number peak higher, then our gradients would not be flowing.</p>
<h2 id="experiment-with-hyperparams-aka-change-the-oven-settings">Experiment with hyperparams, aka "change the oven settings"</h2>
<p>In the original Llama paper, the authors use Cosine Annealing learning schedule. We didn't do that here, because I experimented and saw that it was worse.</p>
<div><pre><span></span><span>MASTER_CONFIG</span><span>.</span><span>update</span><span>({</span>
    <span>"epochs"</span><span>:</span> <span>1000</span>
<span>})</span>
<span>llama_with_cosine</span> <span>=</span> <span>Llama</span><span>(</span><span>MASTER_CONFIG</span><span>)</span>
<span>llama_optimizer</span> <span>=</span> <span>torch</span><span>.</span><span>optim</span><span>.</span><span>Adam</span><span>(</span>
    <span>llama</span><span>.</span><span>parameters</span><span>(),</span> 
    <span>betas</span><span>=</span><span>(</span><span>.9</span><span>,</span> <span>.95</span><span>),</span> 
    <span>weight_decay</span><span>=</span><span>.1</span><span>,</span> 
    <span>eps</span><span>=</span><span>1e-9</span><span>,</span> 
    <span>lr</span><span>=</span><span>1e-3</span>
<span>)</span>
<span>scheduler</span> <span>=</span> <span>torch</span><span>.</span><span>optim</span><span>.</span><span>lr_scheduler</span><span>.</span><span>CosineAnnealingLR</span><span>(</span><span>llama_optimizer</span><span>,</span> <span>300</span><span>,</span> <span>eta_min</span><span>=</span><span>1e-5</span><span>)</span>
<span>train</span><span>(</span><span>llama_with_cosine</span><span>,</span> <span>llama_optimizer</span><span>,</span> <span>scheduler</span><span>=</span><span>scheduler</span><span>)</span>
</pre></div>

<div><pre><span></span><span>model</span><span> </span><span>params</span><span>:</span><span> </span><span>733382</span>


<span>/</span><span>Users</span><span>/</span><span>bkitano</span><span>/</span><span>Desktop</span><span>/</span><span>projects</span><span>/</span><span>llama</span><span>/</span><span>.</span><span>llama</span><span>/</span><span>lib</span><span>/</span><span>python3</span><span>.1</span><span>1</span><span>/</span><span>site</span><span>-</span><span>packages</span><span>/</span><span>torch</span><span>/</span><span>optim</span><span>/</span><span>lr_scheduler</span><span>.</span><span>py</span><span>:</span><span>814</span><span>:</span><span> </span><span>UserWarning</span><span>:</span><span> </span><span>To</span><span> </span><span>get</span><span> </span><span>the</span><span> </span><span>last</span><span> </span><span>learning</span><span> </span><span>rate</span><span> </span><span>computed</span><span> </span><span>by</span><span> </span><span>the</span><span> </span><span>scheduler</span><span>,</span><span> </span><span>please</span><span> </span><span>use</span><span> </span><span>`</span><span>get_last_lr</span><span>()</span><span>`</span><span>.</span>
<span>  </span><span>warnings</span><span>.</span><span>warn</span><span>(</span><span>"To get the last learning rate computed by the scheduler, "</span>


<span>lr</span><span>:</span><span>  </span><span>[</span><span>0.0</span><span>009999457184159408</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>0.0</span><span>009961510274583004</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>0.0</span><span>009869757772816292</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>0.0</span><span>009725204933511963</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>0.0</span><span>009529435502760634</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>0.0</span><span>009284594366176498</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>0.0</span><span>008993364049014041</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>7.1</span><span>28036241775617</span><span>e</span><span>-</span><span>05</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>4.8</span><span>72936226262451</span><span>e</span><span>-</span><span>05</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>3.1</span><span>17756953567661</span><span>e</span><span>-</span><span>05</span><span>]</span>
<span>lr</span><span>:</span><span>  </span><span>[</span><span>1.8</span><span>816750064937722</span><span>e</span><span>-</span><span>05</span><span>]</span>
<span>validation</span><span> </span><span>loss</span><span>:</span><span>  </span><span>4.1</span><span>79551410675049</span>
</pre></div>

<p><img alt="png" src="https://github.com/bkitano/llama-from-scratch/blob/main/llama_files/llama_76_4.png?raw=true"></p>
<div><pre><span></span><span>show_grads</span><span>(</span><span>llama_with_cosine</span><span>,</span> <span>1e-5</span><span>)</span>
</pre></div>

<div><pre><span></span>[('llama_blocks.llama_0.attention.multihead.in_proj_bias', 100.0),
 ('llama_blocks.llama_0.attention.multihead.out_proj.bias', 100.0),
 ('llama_blocks.llama_1.attention.multihead.in_proj_bias', 100.0),
 ('llama_blocks.llama_1.attention.multihead.out_proj.bias', 100.0),
 ('llama_blocks.llama_2.attention.multihead.in_proj_bias', 100.0),
 ('llama_blocks.llama_2.attention.multihead.out_proj.bias', 100.0),
 ('llama_blocks.llama_3.attention.multihead.in_proj_bias', 100.0),
 ('llama_blocks.llama_3.attention.multihead.out_proj.bias', 100.0),
 ('llama_blocks.llama_1.feedforward.1.linear.bias', 0.78125),
 ('llama_blocks.llama_2.feedforward.1.linear_gate.weight', 0.030517578125),
 ('llama_blocks.llama_3.attention.w_q.weight', 0.030517578125),
 ('llama_blocks.llama_0.attention.multihead.out_proj.weight', 0.0244140625),
 ('llama_blocks.llama_0.feedforward.1.linear_gate.weight', 0.0244140625),
 ('llama_blocks.llama_0.feedforward.1.linear.weight', 0.0244140625),
 ('llama_blocks.llama_1.attention.w_v.weight', 0.0244140625),
 ('llama_blocks.llama_1.feedforward.1.linear.weight', 0.0244140625),
 ('llama_blocks.llama_2.attention.w_q.weight', 0.0244140625),
 ('llama_blocks.llama_3.attention.w_v.weight', 0.0244140625),
 ('llama_blocks.llama_3.attention.multihead.out_proj.weight', 0.0244140625),
 ('ffn.2.weight', 0.02403846153846154),
 ('llama_blocks.llama_0.attention.w_v.weight', 0.018310546875),
 ('llama_blocks.llama_0.feedforward.0.weight', 0.018310546875),
 ('llama_blocks.llama_1.feedforward.0.weight', 0.018310546875),
 ('llama_blocks.llama_3.attention.w_k.weight', 0.018310546875),
 ('llama_blocks.llama_3.feedforward.0.weight', 0.018310546875),
 ('llama_blocks.llama_0.attention.multihead.in_proj_weight',
  0.016276041666666668),
 ('llama_blocks.llama_1.attention.multihead.out_proj.weight', 0.01220703125),
 ('llama_blocks.llama_1.feedforward.1.linear_gate.weight', 0.01220703125),
 ('llama_blocks.llama_3.feedforward.1.linear_gate.weight', 0.01220703125),
 ('llama_blocks.llama_3.feedforward.1.linear.weight', 0.01220703125),
 ('llama_blocks.llama_0.attention.w_q.weight', 0.006103515625),
 ('llama_blocks.llama_0.attention.w_k.weight', 0.006103515625),
 ('llama_blocks.llama_1.attention.w_q.weight', 0.006103515625),
 ('llama_blocks.llama_1.attention.multihead.in_proj_weight', 0.006103515625),
 ('llama_blocks.llama_2.attention.multihead.in_proj_weight', 0.006103515625),
 ('llama_blocks.llama_2.attention.multihead.out_proj.weight', 0.006103515625),
 ('llama_blocks.llama_2.feedforward.1.linear.weight', 0.006103515625),
 ('llama_blocks.llama_3.attention.multihead.in_proj_weight',
  0.004069010416666667),
 ('embeddings.weight', 0.0),
 ('llama_blocks.llama_0.rms.scale', 0.0),
 ('llama_blocks.llama_0.feedforward.0.bias', 0.0),
 ('llama_blocks.llama_0.feedforward.1.beta', 0.0),
 ('llama_blocks.llama_0.feedforward.1.linear_gate.bias', 0.0),
 ('llama_blocks.llama_0.feedforward.1.linear.bias', 0.0),
 ('llama_blocks.llama_1.rms.scale', 0.0),
 ('llama_blocks.llama_1.attention.w_k.weight', 0.0),
 ('llama_blocks.llama_1.feedforward.0.bias', 0.0),
 ('llama_blocks.llama_1.feedforward.1.beta', 0.0),
 ('llama_blocks.llama_1.feedforward.1.linear_gate.bias', 0.0),
 ('llama_blocks.llama_2.rms.scale', 0.0),
 ('llama_blocks.llama_2.attention.w_k.weight', 0.0),
 ('llama_blocks.llama_2.attention.w_v.weight', 0.0),
 ('llama_blocks.llama_2.feedforward.0.weight', 0.0),
 ('llama_blocks.llama_2.feedforward.0.bias', 0.0),
 ('llama_blocks.llama_2.feedforward.1.beta', 0.0),
 ('llama_blocks.llama_2.feedforward.1.linear_gate.bias', 0.0),
 ('llama_blocks.llama_2.feedforward.1.linear.bias', 0.0),
 ('llama_blocks.llama_3.rms.scale', 0.0),
 ('llama_blocks.llama_3.feedforward.0.bias', 0.0),
 ('llama_blocks.llama_3.feedforward.1.beta', 0.0),
 ('llama_blocks.llama_3.feedforward.1.linear_gate.bias', 0.0),
 ('llama_blocks.llama_3.feedforward.1.linear.bias', 0.0),
 ('ffn.0.weight', 0.0),
 ('ffn.0.bias', 0.0),
 ('ffn.1.beta', 0.0),
 ('ffn.1.linear_gate.weight', 0.0),
 ('ffn.1.linear_gate.bias', 0.0),
 ('ffn.1.linear.weight', 0.0),
 ('ffn.1.linear.bias', 0.0),
 ('ffn.2.bias', 0.0)]
</pre></div>

<p>Even at an extremely low tolerance, the attention biases are not getting any signal. I'm not sure why the learning schedule from the paper doesn't work, but the lesson here is simple: start simple.</p>



    

    
    



    



  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[G9.js: Automatically Interactive Graphics (537 pts)]]></title>
            <link>http://omrelli.ug/g9/gallery/</link>
            <guid>37058674</guid>
            <pubDate>Wed, 09 Aug 2023 04:24:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="http://omrelli.ug/g9/gallery/">http://omrelli.ug/g9/gallery/</a>, See on <a href="https://news.ycombinator.com/item?id=37058674">Hacker News</a></p>
<div id="readability-page-1" class="page">

<a href="https://github.com/bijection/g9" id="github"><img src="http://omrelli.ug/g9/github.png" alt="Spoon me on GitHub"></a>


<div class="page">
    

    <p>Welcome to the g9 gallery! <b>Drag all the graphics!</b></p>
    <p>I've tried to organize stuff from basic to advanced, so you can scroll from the top to get an intuitive feel for g9. It's worth mentioning, of course, that intuitive feeling is no match for <a href="https://github.com/bijection/g9#docs">reading the docs</a>.</p>

    <p>Before you dive in, here's a brief explanation of how g9 works (scroll down to skip):</p>


    <h2>How It Works</h2>
    <p>
    g9.js exposes a single function, <a href="https://github.com/bijection/g9#g9initialdata-render-onrender-g9canvas"><span>g9(initialData, render[, onChange])</span></a>. This represents the following flow: 
    </p><ol>
    
    <li>
        You create some initial data as key-value pairs with numeric values. For example:
<pre><code>var initialData = {
    foo: 10
}</code></pre>
    <a href="https://github.com/bijection/g9#initialdata">initialData in the docs</a>
    </li>

    <li>
        This data and a drawing context are fed into a function that uses the data to decide what to draw.
<pre><code>function render(data, ctx){
    ctx.point(data.foo, 17)
}</code></pre>
    <a href="https://github.com/bijection/g9#renderdata-ctx-g9context">render in the docs</a>
    </li>
    
    <li>When someone interacts with the graphics, for example by trying to drag an element to a new position, g9 optimizes over the space of possible values for your data to find a set of values that comes closest to creating the change. If you tried to drag the circle to the left, g9 might come up with the new data <span>{foo: 8 }</span>.</li>
    
    <li>g9 rerenders the entire scene with the new data, so that everything is consistent. If you've provided one, g9 calls your <span>onChange</span> callback with the new data, so you can update other parts of your page.</li>
    
    </ol>
    
    <p>For a complete treatment of the g9 API, <a href="https://github.com/bijection/g9#docs">head to the Docs</a>.</p>



    <!-- <p>In order to avoid repetion, every example gets a special function <span class='literal'>_special_log</span> that shows its arguments in a floating box.</p> -->



</div>











<div class="page">
<h2>Basic</h2>
<p>A minimal example with only two points. Our render function always draws one point at (x, y), and the other point at (y, x), so when you drag one of the points, the other kind of mirrors it. Try adding a minus sign before the first argument of the first point. What happens?</p>
</div>

















<div class="page">
<h2>Rings</h2>
<p>Lets add a few more points and use a bit or trigonometry to arrange them into two circles. Just for fun, we make the inner points red. Try dragging the points!</p>
</div>















<div class="page">
<h2>The affects option</h2>
<p>All of the default shapes in g9 accept an <span>affects</span> option, which tells them what parts of the data they can change. Here are three lines with different values of <span>affects</span>.</p>
</div>











 





<div class="page">
<h2>B√©zier Curve</h2>
<p>Here's an interactive version of the quadratic b√©zier curve animation on <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Quadratic_curves">the b√©zier curve wikipedia page</a>.</p>
</div>

 



<p class="page">
<h2>Three points define a circle</h2>
</p>

 




<p class="page">
<h2>cube</h2>
</p>

 





<p class="page">
<h2>dragon</h2>
</p>

 



<p class="page">
<h2>image</h2>
</p>

 






<p class="page">
<h2>tongs</h2>
</p>

 



<p class="page">
<h2>tree</h2>
</p>

 



<p class="page">
<h2>Using Max and Min to limit a point's range of motion.</h2>
</p>

 







<div class="page">
<h2>Kevin Clock</h2>
<p>Try dragging the hands!</p>
</div>

 











<p class="page">
<h2>LOGO Turtle simulator</h2>
</p>

 










<p class="page">
<h2>Grid Warp</h2>
</p>

 








<div class="page">
<h2>Crank and Piston</h2>
<p>Try uncommenting the animation block for extra fun!</p>
</div>

 



















</div>]]></description>
        </item>
        <item>
            <title><![CDATA[Swap_8_and_9: A simple import can modify the Python interpreter (139 pts)]]></title>
            <link>https://kenschutte.com/python-swap-ints/</link>
            <guid>37058278</guid>
            <pubDate>Wed, 09 Aug 2023 03:07:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kenschutte.com/python-swap-ints/">https://kenschutte.com/python-swap-ints/</a>, See on <a href="https://news.ycombinator.com/item?id=37058278">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><h3 id="writing-a-c-module">1. Writing a C Module</h3><div><p>The <code>swap_8_and_9</code> module is an example of a very simple Python module written using only <code>C</code>. You only need two files: <code>setup.py</code> and the <code>C</code> source, which I‚Äôve put in a subdirectory, <code>src/swap_8_and_9.c</code>.</p></div><div><div><h3 id="setup.py">1.1. setup.py</h3><div><pre><span></span><span>from</span> <span>distutils.core</span> <span>import</span> <span>setup</span><span>,</span> <span>Extension</span>

<span>name</span> <span>=</span> <span>'swap_8_and_9'</span>
<span>setup</span><span>(</span><span>name</span> <span>=</span> <span>name</span><span>,</span>
      <span>version</span> <span>=</span> <span>'0.1.0'</span><span>,</span>
      <span>description</span> <span>=</span> <span>'Proof of concept that swaps ints 8 and 9 on import'</span><span>,</span>
      <span>ext_modules</span> <span>=</span> <span>[</span>
          <span>Extension</span><span>(</span><span>name</span><span>,</span> <span>sources</span> <span>=</span> <span>[</span><span>'src/'</span> <span>+</span> <span>name</span> <span>+</span> <span>'.c'</span><span>]),</span>
      <span>])</span>
</pre></div></div><div><h3 id="c-source-file">1.2. C source file</h3><div><div><p>Our main code file, <code>swap_8_and_9.c</code>, is pretty simple because this module has no functions, no classes, no constants, etc. We only need to write the definition of the module and write the function that will be called when it is imported.</p><p>The file needs three things (<code>{name}</code> is our module name),</p><ol><li><p>List of methods (used in module defintion): <code>static PyMethodDef {name}_methods[] = {...};</code> (this is an empty list in our case).</p></li><li><p>Module definition : <code>static struct PyModuleDef {name}_definition = {...};</code></p></li><li><p>Init function: <code>PyMODINIT_FUNC PyInit_{name}(void) {...}</code></p></li></ol></div><div><pre><span></span><span>#include</span><span> </span><span>&lt;Python.h&gt;</span>

<span>/*</span>
<span>  methods in Module</span>
<span> */</span>
<span>static</span><span> </span><span>PyMethodDef</span><span> </span><span>swap_8_and_9_methods</span><span>[]</span><span> </span><span>=</span><span> </span><span>{</span>
<span>  </span><span>//marks end:</span>
<span>  </span><span>{</span><span>NULL</span><span>,</span><span> </span><span>NULL</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>NULL</span><span>}</span>
<span>};</span>


<span>/*</span>
<span>  define Module</span>
<span>*/</span><span> </span>
<span>static</span><span> </span><span>struct</span><span> </span><span>PyModuleDef</span><span> </span><span>swap_8_and_9_definition</span><span> </span><span>=</span><span> </span><span>{</span><span> </span>
<span>    </span><span>PyModuleDef_HEAD_INIT</span><span>,</span>
<span>    </span><span>"swap_8_and_9"</span><span>,</span><span> </span><span>/* module name */</span>

<span>    </span><span>/* __doc__ string: */</span>
<span>    </span><span>"C Module that..."</span><span>,</span>

<span>    </span><span>/* size of per-interpreter state of the module,</span>
<span>       or -1 if the module keeps state in global variables. */</span>
<span>    </span><span>-1</span><span>,</span>

<span>    </span><span>swap_8_and_9_methods</span>
<span>};</span>


<span>/*</span>
<span>  initialize Module</span>
<span>  - called on import</span>
<span>  - PyInit_{name} (same name from setup.py name)</span>
<span>*/</span><span> </span>
<span>PyMODINIT_FUNC</span><span> </span><span>PyInit_swap_8_and_9</span><span>(</span><span>void</span><span>)</span><span> </span><span>{</span>
<span>    </span><span>Py_Initialize</span><span>();</span>

<span>    </span><span>//CODE HERE</span>
<span>        </span>
<span>    </span><span>return</span><span> </span><span>PyModule_Create</span><span>(</span><span>&amp;</span><span>swap_8_and_9_definition</span><span>);</span>
<span>}</span>
<span>        </span>
</pre></div><p>We will write somethig in the <code>//CODE HERE</code> part after we learn a little bit about some <code>CPython</code> internals.</p></div></div><div><h3 id="install-/-build">1.3. Install / Build</h3><div><div><p>With these two files you should be able to <code>pip install .</code> to install from the current directory.</p><p>Another useful command you can run is <code>python setup.py build</code>. This will show the compilation commands being run. (Note that if it is already built and the files haven‚Äôt changed, it won‚Äôt do anything).</p><p>On my macbook, the re-formatted output looks like this: (replaced lots of args with <code>...</code>, mainly <code>-I PATH</code>, <code>-L PATH</code>, and some other flags),</p></div><div><pre><span></span><span># 1. compile</span>
clang<span> </span>...<span> </span><span>\</span>
<span>    </span>-c<span> </span>src/swap_8_and_9.c<span> </span><span>\</span>
<span>    </span>-o<span> </span>build/temp.macosx-12.6-arm64-cpython-311/src/swap_8_and_9.o
<span>    </span>
<span># 2. link</span>
clang<span> </span>...<span> </span><span>\</span>
<span>    </span>build/temp.macosx-12.6-arm64-cpython-311/src/swap_8_and_9.o<span> </span><span>\</span>
<span>    </span>-o<span> </span>build/lib.macosx-12.6-arm64-cpython-311/swap_8_and_9.cpython-311-darwin.so
<span>             </span>
</pre></div></div></div></div></div><div><h3 id="some-cpython-internals">2. Some CPython internals</h3><div><p><code>CPython</code> refers to the standard Python implementation. It is written in <code>C</code> and can be <a href="https://github.com/python/cpython">browsed on github</a>.</p><p>On this page, I am using <code>CPython</code> version <a href="https://github.com/python/cpython/releases/tag/v3.11.4"><code>3.11.4</code></a> and the code descriptions below will link to the github source code for this version.</p><p>For the <code>CPython</code> code that I‚Äôll describe, I have noticed significant reorganization of the code between versions <code>3.8.6</code> to <code>3.11.4</code>. However, the concepts remain the same.</p></div><div><div><h3 id="cached-integers">2.1. Cached integers</h3><div><div><p>In <code>CPython</code>, everything (integers, strings, dictionaries, functions, etc) is an <span>"object"</span>, and represented by a <code>C struct</code> named <a href="https://docs.python.org/3/c-api/structures.html#c.PyObject"><code>PyObject</code></a>.
Common to all objects is the storage its type (and the data needed for that type) and a <a href="https://devguide.python.org/internals/garbage-collector/">reference count used for garbage collection</a>.</p><p>We are interested in integers ‚Äî type <code>int</code> within <code>Python</code> and <a href="https://docs.python.org/3/c-api/long.html#c.PyLongObject"><code>PyLongObject</code></a> within <code>CPython</code>.</p><p>Because there is some overhead in creating and destroying objects, <code>CPython</code> maintains a cache for the set of small integers (values -5, ‚Ä¶, 256), since these are commonly used.</p><p><i>(At this point, you can probably guess that our module will modify these cached objects</i>).</p><p><a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Include/internal/pycore_global_objects.h#L16"><code>pycore_global_objects.h</code></a> defines the range of integers that will be cached,</p></div><div><pre><span></span><span>#define _PY_NSMALLPOSINTS           257</span>
<span>#define _PY_NSMALLNEGINTS           5</span>
</pre></div><p>In the same file, <a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Include/internal/pycore_global_objects.h#L35">a few lines later</a>, we see the array that will hold the cached integers. It is an array of type <code>PyLongObject</code> and named <code>small_ints</code> and is within a struct called <code>_Py_global_objects</code>:</p><div><pre><span></span><span>struct</span><span> </span><span>_Py_global_objects</span><span> </span><span>{</span>
<span>    </span><span>struct</span><span> </span><span>{</span>
<span>        </span><span>/* Small integers are preallocated in this array so that they</span>
<span>         * can be shared.</span>
<span>         * The integers that are preallocated are those in the range</span>
<span>         * -_PY_NSMALLNEGINTS (inclusive) to _PY_NSMALLPOSINTS (exclusive).</span>
<span>         */</span><span>    </span>
<span>        </span><span>PyLongObject</span><span> </span><span>small_ints</span><span>[</span><span>_PY_NSMALLNEGINTS</span><span> </span><span>+</span><span> </span><span>_PY_NSMALLPOSINTS</span><span>];</span>
<span>        </span><span>...</span>
<span>    </span><span>}</span><span> </span><span>singletons</span><span>;</span>
<span>};</span>
</pre></div><p>When and where is this array initialized? In <a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Include/internal/pycore_runtime_init.h#L126"><code>pycore_runtime_init.h</code></a>, we see a macro (itself generated by a <a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Tools/scripts/generate_global_objects.py#L224">Python script</a>) that initializes the elements in the <code>small_ints[]</code> array,</p><div><pre><span></span><span>        </span><span>.</span><span>small_ints</span><span> </span><span>=</span><span> </span><span>{</span><span> </span>\
<span>            </span><span>_PyLong_DIGIT_INIT</span><span>(</span><span>-5</span><span>),</span><span> </span>\
<span>            </span><span>_PyLong_DIGIT_INIT</span><span>(</span><span>-4</span><span>),</span><span> </span>\
<span>            </span><span>_PyLong_DIGIT_INIT</span><span>(</span><span>-3</span><span>),</span><span> </span>\
<span>            </span><span>...</span>
<span>            </span><span>_PyLong_DIGIT_INIT</span><span>(</span><span>255</span><span>),</span><span> </span>\
<span>            </span><span>_PyLong_DIGIT_INIT</span><span>(</span><span>256</span><span>),</span><span> </span>\
<span>        </span><span>},</span><span> </span>\
</pre></div><p>It is slightly convoluted to see how this
macro (<code>_Py_global_objects_INIT</code>) gets used,
but <a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Python/pystate.c#L55">pystate.c</a>
stores it as <code>static const _PyRuntimeState initial = _PyRuntimeState_INIT;</code>
and this <code>initial</code> variable is used when when the interpreter is initialized.</p></div></div><div><h3 id="module-code">2.2. Module code</h3><div><div><p>Back to the code for our module ‚Äî we want to modify a couple of the elements of <code>small_ints[]</code>, but we do not have direct access to it.
We can use the API declared in <a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Include/longobject.h#L16">longobject.h</a> ‚Äî namely, the following function that gives the <code>PyObject</code> for a given <code>long</code> (plain <code>C</code>) value: <code>PyAPI_FUNC(PyObject *) PyLong_FromLong(long)</code>.</p><p>Its definition is in <a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Objects/longobject.c#L287"><code>longobject.c</code></a>. We can see that it checks for small integers (<code>IS_SMALL_INT(ival)</code>) and then calls <code>get_small_int((sdigit)ival)</code>, which returns <code>_PyLong_SMALL_INTS[_PY_NSMALLNEGINTS + ival]</code>.</p><p>Finally, in <a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Include/internal/pycore_long.h#L58"><code>pycore_long.h</code></a>, you can see that this refers to the <code>small_ints[]</code> array: <code>#define _PyLong_SMALL_INTS _Py_SINGLETON(small_ints)</code>.</p><p>Now, we have the first part of our code. It will get the references to the two integers we care about:</p></div><div><pre><span></span><span>PyLongObject</span><span>*</span><span> </span><span>obj8</span><span> </span><span>=</span><span> </span><span>(</span><span>PyLongObject</span><span>*</span><span>)</span><span>PyLong_FromLong</span><span>(</span><span>8</span><span>);</span>
<span>PyLongObject</span><span>*</span><span> </span><span>obj9</span><span> </span><span>=</span><span> </span><span>(</span><span>PyLongObject</span><span>*</span><span>)</span><span>PyLong_FromLong</span><span>(</span><span>9</span><span>);</span>
</pre></div><div><p>How do we change the value?</p><p><code>Python</code> <code>int</code> (and <code>CPython</code> <code>PyLongObject</code>) represent arbitrarily large integers (positive or negative). <a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Include/cpython/longintrepr.h#L64">longintrepr.h</a> defines how integers are stored. I‚Äôll include the whole comment below because it is so informative, followed by the <code>struct</code> definition,</p></div><div><pre><span></span><span>/* Long integer representation.</span>
<span>   The absolute value of a number is equal to</span>
<span>        SUM(for i=0 through abs(ob_size)-1) ob_digit[i] * 2**(SHIFT*i)</span>
<span>   Negative numbers are represented with ob_size &lt; 0;</span>
<span>   zero is represented by ob_size == 0.</span>
<span>   In a normalized number, ob_digit[abs(ob_size)-1] (the most significant</span>
<span>   digit) is never zero.  Also, in all cases, for all valid i,</span>
<span>        0 &lt;= ob_digit[i] &lt;= MASK.</span>
<span>   The allocation function takes care of allocating extra memory</span>
<span>   so that ob_digit[0] ... ob_digit[abs(ob_size)-1] are actually available.</span>
<span>   We always allocate memory for at least one digit, so accessing ob_digit[0]</span>
<span>   is always safe. However, in the case ob_size == 0, the contents of</span>
<span>   ob_digit[0] may be undefined.</span>

<span>   CAUTION:  Generic code manipulating subtypes of PyVarObject has to</span>
<span>   aware that ints abuse  ob_size's sign bit.</span>
<span>*/</span>

<span>struct</span><span> </span><span>_longobject</span><span> </span><span>{</span>
<span>    </span><span>PyObject_VAR_HEAD</span>
<span>    </span><span>digit</span><span> </span><span>ob_digit</span><span>[</span><span>1</span><span>];</span>
<span>};</span><span>             </span>
<span>             </span>
</pre></div><div><p>A couple other <code>typedef</code>s relate a few of the types shown above,</p><ul><li><p><a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Include/pytypedefs.h#L19">pytypedefs.h</a>: <code>typedef struct _longobject PyLongObject;</code>.</p></li><li><p><a href="https://github.com/python/cpython/blob/d2340ef25721b6a72d45d4508c672c4be38c67d3/Include/cpython/longintrepr.h#L43">longintrepr.h</a>: <code>typedef uint32_t digit;</code></p></li></ul><p>So, for the smallest integers, the <span>"raw value"</span> is simply <code>.ob_digit[0]</code>.</p><p>Now, we have all the code we need: get a reference to cached integer object and change its value. These four lines can go in the <code>//CODE HERE</code> part above:</p></div><div><pre><span></span><span>PyLongObject</span><span>*</span><span> </span><span>obj8</span><span> </span><span>=</span><span> </span><span>(</span><span>PyLongObject</span><span>*</span><span>)</span><span>PyLong_FromLong</span><span>(</span><span>8</span><span>);</span>
<span>PyLongObject</span><span>*</span><span> </span><span>obj9</span><span> </span><span>=</span><span> </span><span>(</span><span>PyLongObject</span><span>*</span><span>)</span><span>PyLong_FromLong</span><span>(</span><span>9</span><span>);</span>

<span>obj8</span><span>-&gt;</span><span>ob_digit</span><span>[</span><span>0</span><span>]</span><span> </span><span>=</span><span> </span><span>9</span><span>;</span>
<span>obj9</span><span>-&gt;</span><span>ob_digit</span><span>[</span><span>0</span><span>]</span><span> </span><span>=</span><span> </span><span>8</span><span>;</span>
</pre></div></div></div></div></div><div><h3 id="notes">3. Notes</h3><div><div><p>If you import this module and continue working, it will likely eventually lead to a complete crash of the interpreter (i.e.&nbsp;suddenly exit and print something like <code>Segmentation fault (core dumped)</code> ‚Äî as opposed to simply raising a <code>Python</code> <code>Exception</code>).</p><p>I found this out in a few ways,</p><ul><li><p>My original test was to redefine all small integers by shifting each of them, <code>n =&gt; n+1</code>. I found this crashed almost immediately.</p></li><li><p>I tried swapping lower integers (3 and 4) and this seemed to lead to crashes (in subsequent <code>print</code> calls) in <code>Python</code> <code>3.8</code> but not in <code>Python</code> <code>3.11</code>.</p></li></ul><p>In conclusion, there is no real reason for this module, but it serves as a
good learning exercise and a reminder to always only install and import trusted
modules.</p></div><hr><p><a href="https://github.com/kts/swap_8_and_9">https://github.com/kts/swap_8_and_9</a></p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Pure Bash Bible (2018) (169 pts)]]></title>
            <link>https://github.com/dylanaraps/pure-bash-bible</link>
            <guid>37057866</guid>
            <pubDate>Wed, 09 Aug 2023 01:55:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/dylanaraps/pure-bash-bible">https://github.com/dylanaraps/pure-bash-bible</a>, See on <a href="https://news.ycombinator.com/item?id=37057866">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><b>NEW: <a href="https://github.com/dylanaraps/pure-sh-bible">pure sh bible (<g-emoji alias="book" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4d6.png">üìñ</g-emoji> A collection of pure POSIX sh alternatives to external processes).</a></b></p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/odb/official-bash-logo/master/assets/Logos/Icons/PNG/512x512.png"><img src="https://raw.githubusercontent.com/odb/official-bash-logo/master/assets/Logos/Icons/PNG/512x512.png" width="200px"></a></p>
<h2 tabindex="-1" dir="auto">pure bash bible</h2> <p dir="auto">A collection of pure bash alternatives to external
processes.</p>
<p dir="auto"> <a href="https://travis-ci.com/dylanaraps/pure-bash-bible" rel="nofollow"><img src="https://camo.githubusercontent.com/1507e01a4895b1a95e9211c796d28aba53a3fc2f9740ed8941f7114d71652191/68747470733a2f2f7472617669732d63692e636f6d2f64796c616e61726170732f707572652d626173682d6269626c652e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.com/dylanaraps/pure-bash-bible.svg?branch=master"></a>
<a href="https://github.com/dylanaraps/pure-bash-bible/blob/master/LICENSE.md"><img src="https://camo.githubusercontent.com/83d3746e5881c1867665223424263d8e604df233d0a11aae0813e0414d433943/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e737667" data-canonical-src="https://img.shields.io/badge/license-MIT-blue.svg"></a>
</p>
<br>
<a href="https://leanpub.com/bash/" rel="nofollow">
<img src="https://camo.githubusercontent.com/06d01fc32b3e236bbb802617b350976c3d6c1651117af82956af308a573d72e1/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f7469746c6570616765732e6c65616e7075622e636f6d2f626173682f6865726f" width="40%" data-canonical-src="https://s3.amazonaws.com/titlepages.leanpub.com/bash/hero">
</a>
<p dir="auto">The goal of this book is to document commonly-known and lesser-known methods of doing various tasks using only built-in <code>bash</code> features. Using the snippets from this bible can help remove unneeded dependencies from scripts and in most cases make them faster. I came across these tips and discovered a few while developing <a href="https://github.com/dylanaraps/neofetch">neofetch</a>, <a href="https://github.com/dylanaraps/pxltrm">pxltrm</a> and other smaller projects.</p>
<p dir="auto">The snippets below are linted using <code>shellcheck</code> and tests have been written where applicable. Want to contribute? Read the <a href="https://github.com/dylanaraps/pure-bash-bible/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>. It outlines how the unit tests work and what is required when adding snippets to the bible.</p>
<p dir="auto">See something incorrectly described, buggy or outright wrong? Open an issue or send a pull request. If the bible is missing something, open an issue and a solution will be found.</p>

<p dir="auto"><b>This book is also available to purchase on leanpub. <a href="https://leanpub.com/bash" rel="nofollow">https://leanpub.com/bash</a></b></p>
<p dir="auto"><b>Or you can buy me a coffee.</b>
<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=V7QNJNKS3WYVS" rel="nofollow"><img src="https://camo.githubusercontent.com/e03c0f5e6aa5ae0179139a085dd234c3cedbacca6b392362220cdbf22b893b3e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f6e2d70617970616c2d79656c6c6f772e737667" data-canonical-src="https://img.shields.io/badge/don-paypal-yellow.svg"></a> <a href="https://www.patreon.com/dyla" rel="nofollow"><img src="https://camo.githubusercontent.com/700e6e95769fec133239dd03c17beddba17762c7e96bd9a0cd3429fd1df36794/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f6e2d70617472656f6e2d79656c6c6f772e737667" data-canonical-src="https://img.shields.io/badge/don-patreon-yellow.svg"> </a><a href="https://liberapay.com/2211/" rel="nofollow"><img src="https://camo.githubusercontent.com/db8fde62d30e38858d713ca1aac97a6d70d8df06d36cd19a0f7802100e6f0b8e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f6e2d6c69626572617061792d79656c6c6f772e737667" data-canonical-src="https://img.shields.io/badge/don-liberapay-yellow.svg"></a>
</p>
<br>
<h2 tabindex="-1" dir="auto">Table of Contents</h2>

<ul dir="auto">
<li><a href="#foreword">FOREWORD</a></li>
<li><a href="#strings">STRINGS</a>
<ul dir="auto">
<li><a href="#trim-leading-and-trailing-white-space-from-string">Trim leading and trailing white-space from string</a></li>
<li><a href="#trim-all-white-space-from-string-and-truncate-spaces">Trim all white-space from string and truncate spaces</a></li>
<li><a href="#use-regex-on-a-string">Use regex on a string</a></li>
<li><a href="#split-a-string-on-a-delimiter">Split a string on a delimiter</a></li>
<li><a href="#change-a-string-to-lowercase">Change a string to lowercase</a></li>
<li><a href="#change-a-string-to-uppercase">Change a string to uppercase</a></li>
<li><a href="#reverse-a-string-case">Reverse a string case</a></li>
<li><a href="#trim-quotes-from-a-string">Trim quotes from a string</a></li>
<li><a href="#strip-all-instances-of-pattern-from-string">Strip all instances of pattern from string</a></li>
<li><a href="#strip-first-occurrence-of-pattern-from-string">Strip first occurrence of pattern from string</a></li>
<li><a href="#strip-pattern-from-start-of-string">Strip pattern from start of string</a></li>
<li><a href="#strip-pattern-from-end-of-string">Strip pattern from end of string</a></li>
<li><a href="#percent-encode-a-string">Percent-encode a string</a></li>
<li><a href="#decode-a-percent-encoded-string">Decode a percent-encoded string</a></li>
<li><a href="#check-if-string-contains-a-sub-string">Check if string contains a sub-string</a></li>
<li><a href="#check-if-string-starts-with-sub-string">Check if string starts with sub-string</a></li>
<li><a href="#check-if-string-ends-with-sub-string">Check if string ends with sub-string</a></li>
</ul>
</li>
<li><a href="#arrays">ARRAYS</a>
<ul dir="auto">
<li><a href="#reverse-an-array">Reverse an array</a></li>
<li><a href="#remove-duplicate-array-elements">Remove duplicate array elements</a></li>
<li><a href="#random-array-element">Random array element</a></li>
<li><a href="#cycle-through-an-array">Cycle through an array</a></li>
<li><a href="#toggle-between-two-values">Toggle between two values</a></li>
</ul>
</li>
<li><a href="#loops">LOOPS</a>
<ul dir="auto">
<li><a href="#loop-over-a-range-of-numbers">Loop over a range of numbers</a></li>
<li><a href="#loop-over-a-variable-range-of-numbers">Loop over a variable range of numbers</a></li>
<li><a href="#loop-over-an-array">Loop over an array</a></li>
<li><a href="#loop-over-an-array-with-an-index">Loop over an array with an index</a></li>
<li><a href="#loop-over-the-contents-of-a-file">Loop over the contents of a file</a></li>
<li><a href="#loop-over-files-and-directories">Loop over files and directories</a></li>
</ul>
</li>
<li><a href="#file-handling">FILE HANDLING</a>
<ul dir="auto">
<li><a href="#read-a-file-to-a-string">Read a file to a string</a></li>
<li><a href="#read-a-file-to-an-array-by-line">Read a file to an array (<em>by line</em>)</a></li>
<li><a href="#get-the-first-n-lines-of-a-file">Get the first N lines of a file</a></li>
<li><a href="#get-the-last-n-lines-of-a-file">Get the last N lines of a file</a></li>
<li><a href="#get-the-number-of-lines-in-a-file">Get the number of lines in a file</a></li>
<li><a href="#count-files-or-directories-in-directory">Count files or directories in directory</a></li>
<li><a href="#create-an-empty-file">Create an empty file</a></li>
<li><a href="#extract-lines-between-two-markers">Extract lines between two markers</a></li>
</ul>
</li>
<li><a href="#file-paths">FILE PATHS</a>
<ul dir="auto">
<li><a href="#get-the-directory-name-of-a-file-path">Get the directory name of a file path</a></li>
<li><a href="#get-the-base-name-of-a-file-path">Get the base-name of a file path</a></li>
</ul>
</li>
<li><a href="#variables">VARIABLES</a>
<ul dir="auto">
<li><a href="#assign-and-access-a-variable-using-a-variable">Assign and access a variable using a variable</a></li>
<li><a href="#name-a-variable-based-on-another-variable">Name a variable based on another variable</a></li>
</ul>
</li>
<li><a href="#escape-sequences">ESCAPE SEQUENCES</a>
<ul dir="auto">
<li><a href="#text-colors">Text Colors</a></li>
<li><a href="#text-attributes">Text Attributes</a></li>
<li><a href="#cursor-movement">Cursor Movement</a></li>
<li><a href="#erasing-text">Erasing Text</a></li>
</ul>
</li>
<li><a href="#parameter-expansion">PARAMETER EXPANSION</a>
<ul dir="auto">
<li><a href="#indirection">Indirection</a></li>
<li><a href="#replacement">Replacement</a></li>
<li><a href="#length">Length</a></li>
<li><a href="#expansion">Expansion</a></li>
<li><a href="#case-modification">Case Modification</a></li>
<li><a href="#default-value">Default Value</a></li>
</ul>
</li>
<li><a href="#brace-expansion">BRACE EXPANSION</a>
<ul dir="auto">
<li><a href="#ranges">Ranges</a></li>
<li><a href="#string-lists">String Lists</a></li>
</ul>
</li>
<li><a href="#conditional-expressions">CONDITIONAL EXPRESSIONS</a>
<ul dir="auto">
<li><a href="#file-conditionals">File Conditionals</a></li>
<li><a href="#file-comparisons">File Comparisons</a></li>
<li><a href="#variable-conditionals">Variable Conditionals</a></li>
<li><a href="#variable-comparisons">Variable Comparisons</a></li>
</ul>
</li>
<li><a href="#arithmetic-operators">ARITHMETIC OPERATORS</a>
<ul dir="auto">
<li><a href="#assignment">Assignment</a></li>
<li><a href="#arithmetic">Arithmetic</a></li>
<li><a href="#bitwise">Bitwise</a></li>
<li><a href="#logical">Logical</a></li>
<li><a href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li><a href="#arithmetic-1">ARITHMETIC</a>
<ul dir="auto">
<li><a href="#simpler-syntax-to-set-variables">Simpler syntax to set variables</a></li>
<li><a href="#ternary-tests">Ternary Tests</a></li>
</ul>
</li>
<li><a href="#traps">TRAPS</a>
<ul dir="auto">
<li><a href="#do-something-on-script-exit">Do something on script exit</a></li>
<li><a href="#ignore-terminal-interrupt-ctrlc-sigint">Ignore terminal interrupt (CTRL+C, SIGINT)</a></li>
<li><a href="#react-to-window-resize">React to window resize</a></li>
<li><a href="#do-something-before-every-command">Do something before every command</a></li>
<li><a href="#do-something-when-a-shell-function-or-a-sourced-file-finishes-executing">Do something when a shell function or a sourced file finishes executing</a></li>
</ul>
</li>
<li><a href="#performance">PERFORMANCE</a>
<ul dir="auto">
<li><a href="#disable-unicode">Disable Unicode</a></li>
</ul>
</li>
<li><a href="#obsolete-syntax">OBSOLETE SYNTAX</a>
<ul dir="auto">
<li><a href="#shebang">Shebang</a></li>
<li><a href="#command-substitution">Command Substitution</a></li>
<li><a href="#function-declaration">Function Declaration</a></li>
</ul>
</li>
<li><a href="#internal-variables">INTERNAL VARIABLES</a>
<ul dir="auto">
<li><a href="#get-the-location-to-the-bash-binary">Get the location to the <code>bash</code> binary</a></li>
<li><a href="#get-the-version-of-the-current-running-bash-process">Get the version of the current running <code>bash</code> process</a></li>
<li><a href="#open-the-users-preferred-text-editor">Open the user's preferred text editor</a></li>
<li><a href="#get-the-name-of-the-current-function">Get the name of the current function</a></li>
<li><a href="#get-the-host-name-of-the-system">Get the host-name of the system</a></li>
<li><a href="#get-the-architecture-of-the-operating-system">Get the architecture of the Operating System</a></li>
<li><a href="#get-the-name-of-the-operating-system--kernel">Get the name of the Operating System / Kernel</a></li>
<li><a href="#get-the-current-working-directory">Get the current working directory</a></li>
<li><a href="#get-the-number-of-seconds-the-script-has-been-running">Get the number of seconds the script has been running</a></li>
<li><a href="#get-a-pseudorandom-integer">Get a pseudorandom integer</a></li>
</ul>
</li>
<li><a href="#information-about-the-terminal">INFORMATION ABOUT THE TERMINAL</a>
<ul dir="auto">
<li><a href="#get-the-terminal-size-in-lines-and-columns-from-a-script">Get the terminal size in lines and columns (<em>from a script</em>)</a></li>
<li><a href="#get-the-terminal-size-in-pixels">Get the terminal size in pixels</a></li>
<li><a href="#get-the-current-cursor-position">Get the current cursor position</a></li>
</ul>
</li>
<li><a href="#conversion">CONVERSION</a>
<ul dir="auto">
<li><a href="#convert-a-hex-color-to-rgb">Convert a hex color to RGB</a></li>
<li><a href="#convert-an-rgb-color-to-hex">Convert an RGB color to hex</a></li>
</ul>
</li>
<li><a href="#code-golf">CODE GOLF</a>
<ul dir="auto">
<li><a href="#shorter-for-loop-syntax">Shorter <code>for</code> loop syntax</a></li>
<li><a href="#shorter-infinite-loops">Shorter infinite loops</a></li>
<li><a href="#shorter-function-declaration">Shorter function declaration</a></li>
<li><a href="#shorter-if-syntax">Shorter <code>if</code> syntax</a></li>
<li><a href="#simpler-case-statement-to-set-variable">Simpler <code>case</code> statement to set variable</a></li>
</ul>
</li>
<li><a href="#other">OTHER</a>
<ul dir="auto">
<li><a href="#use-read-as-an-alternative-to-the-sleep-command">Use <code>read</code> as an alternative to the <code>sleep</code> command</a></li>
<li><a href="#check-if-a-program-is-in-the-users-path">Check if a program is in the user's PATH</a></li>
<li><a href="#get-the-current-date-using-strftime">Get the current date using <code>strftime</code></a></li>
<li><a href="#get-the-username-of-the-current-user">Get the username of the current user</a></li>
<li><a href="#generate-a-uuid-v4">Generate a UUID V4</a></li>
<li><a href="#progress-bars">Progress bars</a></li>
<li><a href="#get-the-list-of-functions-in-a-script">Get the list of functions in a script</a></li>
<li><a href="#bypass-shell-aliases">Bypass shell aliases</a></li>
<li><a href="#bypass-shell-functions">Bypass shell functions</a></li>
<li><a href="#run-a-command-in-the-background">Run a command in the background</a></li>
<li><a href="#capture-the-return-value-of-a-function-without-command-substitution">Capture function return without command substitution</a></li>
</ul>
</li>
<li><a href="#afterword">AFTERWORD</a></li>
</ul>

<br>

<h2 tabindex="-1" dir="auto">FOREWORD</h2>
<p dir="auto">A collection of pure <code>bash</code> alternatives to external processes and programs. The <code>bash</code> scripting language is more powerful than people realise and most tasks can be accomplished without depending on external programs.</p>
<p dir="auto">Calling an external process in <code>bash</code> is expensive and excessive use will cause a noticeable slowdown. Scripts and programs written using built-in methods (<em>where applicable</em>) will be faster, require fewer dependencies and afford a better understanding of the language itself.</p>
<p dir="auto">The contents of this book provide a reference for solving problems encountered when writing programs and scripts in <code>bash</code>. Examples are in function formats showcasing how to incorporate these solutions into code.</p>


<h2 tabindex="-1" dir="auto">STRINGS</h2>
<h2 tabindex="-1" dir="auto">Trim leading and trailing white-space from string</h2>
<p dir="auto">This is an alternative to <code>sed</code>, <code>awk</code>, <code>perl</code> and other tools. The
function below works by finding all leading and trailing white-space and
removing it from the start and end of the string. The <code>:</code> built-in is used in place of a temporary variable.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="trim_string() {
    # Usage: trim_string &quot;   example   string    &quot;
    : &quot;${1#&quot;${1%%[![:space:]]*}&quot;}&quot;
    : &quot;${_%&quot;${_##*[![:space:]]}&quot;}&quot;
    printf '%s\n' &quot;$_&quot;
}"><pre><span>trim_string</span>() {
    <span><span>#</span> Usage: trim_string "   example   string    "</span>
    <span>:</span> <span><span>"</span><span>${1<span>#</span><span><span>"</span><span>${1<span>%%</span>[![:space:]]<span>*</span>}</span><span>"</span></span>}</span><span>"</span></span>
    <span>:</span> <span><span>"</span><span>${_<span>%</span><span><span>"</span><span>${_<span>##*</span>[![:space:]]}</span><span>"</span></span>}</span><span>"</span></span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$_</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ trim_string &quot;    Hello,  World    &quot;
Hello,  World

$ name=&quot;   John Black  &quot;
$ trim_string &quot;$name&quot;
John Black"><pre>$ trim_string <span><span>"</span>    Hello,  World    <span>"</span></span>
Hello,  World

$ name=<span><span>"</span>   John Black  <span>"</span></span>
$ trim_string <span><span>"</span><span>$name</span><span>"</span></span>
John Black</pre></div>
<h2 tabindex="-1" dir="auto">Trim all white-space from string and truncate spaces</h2>
<p dir="auto">This is an alternative to <code>sed</code>, <code>awk</code>, <code>perl</code> and other tools. The
function below works by abusing word splitting to create a new string
without leading/trailing white-space and with truncated spaces.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# shellcheck disable=SC2086,SC2048
trim_all() {
    # Usage: trim_all &quot;   example   string    &quot;
    set -f
    set -- $*
    printf '%s\n' &quot;$*&quot;
    set +f
}"><pre><span><span>#</span> shellcheck disable=SC2086,SC2048</span>
<span>trim_all</span>() {
    <span><span>#</span> Usage: trim_all "   example   string    "</span>
    <span>set</span> -f
    <span>set</span> -- <span>$*</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$*</span><span>"</span></span>
    <span>set</span> +f
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ trim_all &quot;    Hello,    World    &quot;
Hello, World

$ name=&quot;   John   Black  is     my    name.    &quot;
$ trim_all &quot;$name&quot;
John Black is my name."><pre>$ trim_all <span><span>"</span>    Hello,    World    <span>"</span></span>
Hello, World

$ name=<span><span>"</span>   John   Black  is     my    name.    <span>"</span></span>
$ trim_all <span><span>"</span><span>$name</span><span>"</span></span>
John Black is my name.</pre></div>
<h2 tabindex="-1" dir="auto">Use regex on a string</h2>
<p dir="auto">The result of <code>bash</code>'s regex matching can be used to replace <code>sed</code> for a
large number of use-cases.</p>
<p dir="auto"><strong>CAVEAT</strong>: This is one of the few platform dependent <code>bash</code> features.
<code>bash</code> will use whatever regex engine is installed on the user's system.
Stick to POSIX regex features if aiming for compatibility.</p>
<p dir="auto"><strong>CAVEAT</strong>: This example only prints the first matching group. When using
multiple capture groups some modification is needed.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="regex() {
    # Usage: regex &quot;string&quot; &quot;regex&quot;
    [[ $1 =~ $2 ]] &amp;&amp; printf '%s\n' &quot;${BASH_REMATCH[1]}&quot;
}"><pre><span>regex</span>() {
    <span><span>#</span> Usage: regex "string" "regex"</span>
    [[ <span>$1</span> <span>=~</span> <span>$2</span> ]] <span>&amp;&amp;</span> <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${BASH_REMATCH[1]}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ # Trim leading white-space.
$ regex '    hello' '^\s*(.*)'
hello

$ # Validate a hex color.
$ regex &quot;#FFFFFF&quot; '^(#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}))$'
#FFFFFF

$ # Validate a hex color (invalid).
$ regex &quot;red&quot; '^(#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}))$'
# no output (invalid)"><pre>$ <span><span>#</span> Trim leading white-space.</span>
$ regex <span><span>'</span>    hello<span>'</span></span> <span><span>'</span>^\s*(.*)<span>'</span></span>
hello

$ <span><span>#</span> Validate a hex color.</span>
$ regex <span><span>"</span>#FFFFFF<span>"</span></span> <span><span>'</span>^(#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}))$<span>'</span></span>
<span><span>#</span>FFFFFF</span>

$ <span><span>#</span> Validate a hex color (invalid).</span>
$ regex <span><span>"</span>red<span>"</span></span> <span><span>'</span>^(#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}))$<span>'</span></span>
<span><span>#</span> no output (invalid)</span></pre></div>
<p dir="auto"><strong>Example Usage in script:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="is_hex_color() {
    if [[ $1 =~ ^(#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}))$ ]]; then
        printf '%s\n' &quot;${BASH_REMATCH[1]}&quot;
    else
        printf '%s\n' &quot;error: $1 is an invalid color.&quot;
        return 1
    fi
}

read -r color
is_hex_color &quot;$color&quot; || color=&quot;#FFFFFF&quot;

# Do stuff."><pre><span>is_hex_color</span>() {
    <span>if</span> [[ <span>$1</span> <span>=~</span> ^(<span><span>#</span>?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}))$ ]]; then</span>
        <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${BASH_REMATCH[1]}</span><span>"</span></span>
    <span>else</span>
        <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>error: <span>$1</span> is an invalid color.<span>"</span></span>
        <span>return</span> 1
    <span>fi</span>
}

<span>read</span> -r color
is_hex_color <span><span>"</span><span>$color</span><span>"</span></span> <span>||</span> color=<span><span>"</span>#FFFFFF<span>"</span></span>

<span><span>#</span> Do stuff.</span></pre></div>
<h2 tabindex="-1" dir="auto">Split a string on a delimiter</h2>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto">This is an alternative to <code>cut</code>, <code>awk</code> and other tools.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="split() {
   # Usage: split &quot;string&quot; &quot;delimiter&quot;
   IFS=$'\n' read -d &quot;&quot; -ra arr <<< &quot;${1//$2/$'\n'}&quot;
   printf '%s\n' &quot;${arr[@]}&quot;
}"><pre><span>split</span>() {
   <span><span>#</span> Usage: split "string" "delimiter"</span>
   IFS=<span><span>$'</span><span>\n</span><span>'</span></span> <span>read</span> -d <span><span>"</span><span>"</span></span> -ra arr <span>&lt;&lt;&lt;</span> <span><span>"</span>${1//$2/$'\n'}<span>"</span></span>
   <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${arr[@]}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ split &quot;apples,oranges,pears,grapes&quot; &quot;,&quot;
apples
oranges
pears
grapes

$ split &quot;1, 2, 3, 4, 5&quot; &quot;, &quot;
1
2
3
4
5

# Multi char delimiters work too!
$ split &quot;hello---world---my---name---is---john&quot; &quot;---&quot;
hello
world
my
name
is
john"><pre>$ split <span><span>"</span>apples,oranges,pears,grapes<span>"</span></span> <span><span>"</span>,<span>"</span></span>
apples
oranges
pears
grapes

$ split <span><span>"</span>1, 2, 3, 4, 5<span>"</span></span> <span><span>"</span>, <span>"</span></span>
1
2
3
4
5

<span><span>#</span> Multi char delimiters work too!</span>
$ split <span><span>"</span>hello---world---my---name---is---john<span>"</span></span> <span><span>"</span>---<span>"</span></span>
hello
world
my
name
is
john</pre></div>
<h2 tabindex="-1" dir="auto">Change a string to lowercase</h2>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="lower() {
    # Usage: lower &quot;string&quot;
    printf '%s\n' &quot;${1,,}&quot;
}"><pre><span>lower</span>() {
    <span><span>#</span> Usage: lower "string"</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${1,,}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lower &quot;HELLO&quot;
hello

$ lower &quot;HeLlO&quot;
hello

$ lower &quot;hello&quot;
hello"><pre>$ lower <span><span>"</span>HELLO<span>"</span></span>
hello

$ lower <span><span>"</span>HeLlO<span>"</span></span>
hello

$ lower <span><span>"</span>hello<span>"</span></span>
hello</pre></div>
<h2 tabindex="-1" dir="auto">Change a string to uppercase</h2>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="upper() {
    # Usage: upper &quot;string&quot;
    printf '%s\n' &quot;${1^^}&quot;
}"><pre><span>upper</span>() {
    <span><span>#</span> Usage: upper "string"</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${1^^}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ upper &quot;hello&quot;
HELLO

$ upper &quot;HeLlO&quot;
HELLO

$ upper &quot;HELLO&quot;
HELLO"><pre>$ upper <span><span>"</span>hello<span>"</span></span>
HELLO

$ upper <span><span>"</span>HeLlO<span>"</span></span>
HELLO

$ upper <span><span>"</span>HELLO<span>"</span></span>
HELLO</pre></div>
<h2 tabindex="-1" dir="auto">Reverse a string case</h2>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="reverse_case() {
    # Usage: reverse_case &quot;string&quot;
    printf '%s\n' &quot;${1~~}&quot;
}"><pre><span>reverse_case</span>() {
    <span><span>#</span> Usage: reverse_case "string"</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${1~~}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ reverse_case &quot;hello&quot;
HELLO

$ reverse_case &quot;HeLlO&quot;
hElLo

$ reverse_case &quot;HELLO&quot;
hello"><pre>$ reverse_case <span><span>"</span>hello<span>"</span></span>
HELLO

$ reverse_case <span><span>"</span>HeLlO<span>"</span></span>
hElLo

$ reverse_case <span><span>"</span>HELLO<span>"</span></span>
hello</pre></div>
<h2 tabindex="-1" dir="auto">Trim quotes from a string</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="trim_quotes() {
    # Usage: trim_quotes &quot;string&quot;
    : &quot;${1//\'}&quot;
    printf '%s\n' &quot;${_//\&quot;}&quot;
}"><pre><span>trim_quotes</span>() {
    <span><span>#</span> Usage: trim_quotes "string"</span>
    <span>:</span> <span><span>"</span><span>${1<span>//</span><span>\'</span>}</span><span>"</span></span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${_<span>//</span><span>\"</span>}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ var=&quot;'Hello', \&quot;World\&quot;&quot;
$ trim_quotes &quot;$var&quot;
Hello, World"><pre>$ var=<span><span>"</span>'Hello', <span>\"</span>World<span>\"</span><span>"</span></span>
$ trim_quotes <span><span>"</span><span>$var</span><span>"</span></span>
Hello, World</pre></div>
<h2 tabindex="-1" dir="auto">Strip all instances of pattern from string</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="strip_all() {
    # Usage: strip_all &quot;string&quot; &quot;pattern&quot;
    printf '%s\n' &quot;${1//$2}&quot;
}"><pre><span>strip_all</span>() {
    <span><span>#</span> Usage: strip_all "string" "pattern"</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${1<span>//</span><span>$2</span>}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ strip_all &quot;The Quick Brown Fox&quot; &quot;[aeiou]&quot;
Th Qck Brwn Fx

$ strip_all &quot;The Quick Brown Fox&quot; &quot;[[:space:]]&quot;
TheQuickBrownFox

$ strip_all &quot;The Quick Brown Fox&quot; &quot;Quick &quot;
The Brown Fox"><pre>$ strip_all <span><span>"</span>The Quick Brown Fox<span>"</span></span> <span><span>"</span>[aeiou]<span>"</span></span>
Th Qck Brwn Fx

$ strip_all <span><span>"</span>The Quick Brown Fox<span>"</span></span> <span><span>"</span>[[:space:]]<span>"</span></span>
TheQuickBrownFox

$ strip_all <span><span>"</span>The Quick Brown Fox<span>"</span></span> <span><span>"</span>Quick <span>"</span></span>
The Brown Fox</pre></div>
<h2 tabindex="-1" dir="auto">Strip first occurrence of pattern from string</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="strip() {
    # Usage: strip &quot;string&quot; &quot;pattern&quot;
    printf '%s\n' &quot;${1/$2}&quot;
}"><pre><span>strip</span>() {
    <span><span>#</span> Usage: strip "string" "pattern"</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${1<span>/</span><span>$2</span>}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ strip &quot;The Quick Brown Fox&quot; &quot;[aeiou]&quot;
Th Quick Brown Fox

$ strip &quot;The Quick Brown Fox&quot; &quot;[[:space:]]&quot;
TheQuick Brown Fox"><pre>$ strip <span><span>"</span>The Quick Brown Fox<span>"</span></span> <span><span>"</span>[aeiou]<span>"</span></span>
Th Quick Brown Fox

$ strip <span><span>"</span>The Quick Brown Fox<span>"</span></span> <span><span>"</span>[[:space:]]<span>"</span></span>
TheQuick Brown Fox</pre></div>
<h2 tabindex="-1" dir="auto">Strip pattern from start of string</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="lstrip() {
    # Usage: lstrip &quot;string&quot; &quot;pattern&quot;
    printf '%s\n' &quot;${1##$2}&quot;
}"><pre><span>lstrip</span>() {
    <span><span>#</span> Usage: lstrip "string" "pattern"</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${1<span>##</span><span>$2</span>}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lstrip &quot;The Quick Brown Fox&quot; &quot;The &quot;
Quick Brown Fox"><pre>$ lstrip <span><span>"</span>The Quick Brown Fox<span>"</span></span> <span><span>"</span>The <span>"</span></span>
Quick Brown Fox</pre></div>
<h2 tabindex="-1" dir="auto">Strip pattern from end of string</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="rstrip() {
    # Usage: rstrip &quot;string&quot; &quot;pattern&quot;
    printf '%s\n' &quot;${1%%$2}&quot;
}"><pre><span>rstrip</span>() {
    <span><span>#</span> Usage: rstrip "string" "pattern"</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${1<span>%%</span><span>$2</span>}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ rstrip &quot;The Quick Brown Fox&quot; &quot; Fox&quot;
The Quick Brown"><pre>$ rstrip <span><span>"</span>The Quick Brown Fox<span>"</span></span> <span><span>"</span> Fox<span>"</span></span>
The Quick Brown</pre></div>
<h2 tabindex="-1" dir="auto">Percent-encode a string</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="urlencode() {
    # Usage: urlencode &quot;string&quot;
    local LC_ALL=C
    for (( i = 0; i < ${#1}; i++ )); do
        : &quot;${1:i:1}&quot;
        case &quot;$_&quot; in
            [a-zA-Z0-9.~_-])
                printf '%s' &quot;$_&quot;
            ;;

            *)
                printf '%%%02X' &quot;'$_&quot;
            ;;
        esac
    done
    printf '\n'
}"><pre><span>urlencode</span>() {
    <span><span>#</span> Usage: urlencode "string"</span>
    <span>local</span> LC_ALL=C
    <span>for</span> <span><span>((</span> i <span>=</span> <span>0</span>; i <span>&lt;</span> <span>${<span>#</span>1}</span>; i<span>++</span> <span>))</span></span><span>;</span> <span>do</span>
        <span>:</span> <span><span>"</span><span>${1<span>:</span>i<span>:</span>1}</span><span>"</span></span>
        <span>case</span> <span><span>"</span><span>$_</span><span>"</span></span> <span>in</span>
            [a-zA-Z0-9.~_-])
                <span>printf</span> <span><span>'</span>%s<span>'</span></span> <span><span>"</span><span>$_</span><span>"</span></span>
            ;;

            <span>*</span>)
                <span>printf</span> <span><span>'</span>%%%02X<span>'</span></span> <span><span>"</span>'<span>$_</span><span>"</span></span>
            ;;
        <span>esac</span>
    <span>done</span>
    <span>printf</span> <span><span>'</span>\n<span>'</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ urlencode &quot;https://github.com/dylanaraps/pure-bash-bible&quot;
https%3A%2F%2Fgithub.com%2Fdylanaraps%2Fpure-bash-bible"><pre>$ urlencode <span><span>"</span>https://github.com/dylanaraps/pure-bash-bible<span>"</span></span>
https%3A%2F%2Fgithub.com%2Fdylanaraps%2Fpure-bash-bible</pre></div>
<h2 tabindex="-1" dir="auto">Decode a percent-encoded string</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="urldecode() {
    # Usage: urldecode &quot;string&quot;
    : &quot;${1//+/ }&quot;
    printf '%b\n' &quot;${_//%/\\x}&quot;
}"><pre><span>urldecode</span>() {
    <span><span>#</span> Usage: urldecode "string"</span>
    <span>:</span> <span><span>"</span><span>${1<span>//</span>+<span>/</span> }</span><span>"</span></span>
    <span>printf</span> <span><span>'</span>%b\n<span>'</span></span> <span><span>"</span><span>${_<span>//%/</span><span>\\</span>x}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ urldecode &quot;https%3A%2F%2Fgithub.com%2Fdylanaraps%2Fpure-bash-bible&quot;
https://github.com/dylanaraps/pure-bash-bible"><pre>$ urldecode <span><span>"</span>https%3A%2F%2Fgithub.com%2Fdylanaraps%2Fpure-bash-bible<span>"</span></span>
https://github.com/dylanaraps/pure-bash-bible</pre></div>
<h2 tabindex="-1" dir="auto">Check if string contains a sub-string</h2>
<p dir="auto"><strong>Using a test:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="if [[ $var == *sub_string* ]]; then
    printf '%s\n' &quot;sub_string is in var.&quot;
fi

# Inverse (substring not in string).
if [[ $var != *sub_string* ]]; then
    printf '%s\n' &quot;sub_string is not in var.&quot;
fi

# This works for arrays too!
if [[ ${arr[*]} == *sub_string* ]]; then
    printf '%s\n' &quot;sub_string is in array.&quot;
fi"><pre><span>if</span> [[ <span>$var</span> <span>==</span> <span>*</span>sub_string<span>*</span> ]]<span>;</span> <span>then</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>sub_string is in var.<span>"</span></span>
<span>fi</span>

<span><span>#</span> Inverse (substring not in string).</span>
<span>if</span> [[ <span>$var</span> <span>!=</span> <span>*</span>sub_string<span>*</span> ]]<span>;</span> <span>then</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>sub_string is not in var.<span>"</span></span>
<span>fi</span>

<span><span>#</span> This works for arrays too!</span>
<span>if</span> [[ <span>${arr[*]}</span> <span>==</span> <span>*</span>sub_string<span>*</span> ]]<span>;</span> <span>then</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>sub_string is in array.<span>"</span></span>
<span>fi</span></pre></div>
<p dir="auto"><strong>Using a case statement:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="case &quot;$var&quot; in
    *sub_string*)
        # Do stuff
    ;;

    *sub_string2*)
        # Do more stuff
    ;;

    *)
        # Else
    ;;
esac"><pre><span>case</span> <span><span>"</span><span>$var</span><span>"</span></span> <span>in</span>
    <span>*</span>sub_string<span>*</span>)
        <span><span>#</span> Do stuff</span>
    ;;

    <span>*</span>sub_string2<span>*</span>)
        <span><span>#</span> Do more stuff</span>
    ;;

    <span>*</span>)
        <span><span>#</span> Else</span>
    ;;
<span>esac</span></pre></div>
<h2 tabindex="-1" dir="auto">Check if string starts with sub-string</h2>
<div dir="auto" data-snippet-clipboard-copy-content="if [[ $var == sub_string* ]]; then
    printf '%s\n' &quot;var starts with sub_string.&quot;
fi

# Inverse (var does not start with sub_string).
if [[ $var != sub_string* ]]; then
    printf '%s\n' &quot;var does not start with sub_string.&quot;
fi"><pre><span>if</span> [[ <span>$var</span> <span>==</span> sub_string<span>*</span> ]]<span>;</span> <span>then</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>var starts with sub_string.<span>"</span></span>
<span>fi</span>

<span><span>#</span> Inverse (var does not start with sub_string).</span>
<span>if</span> [[ <span>$var</span> <span>!=</span> sub_string<span>*</span> ]]<span>;</span> <span>then</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>var does not start with sub_string.<span>"</span></span>
<span>fi</span></pre></div>
<h2 tabindex="-1" dir="auto">Check if string ends with sub-string</h2>
<div dir="auto" data-snippet-clipboard-copy-content="if [[ $var == *sub_string ]]; then
    printf '%s\n' &quot;var ends with sub_string.&quot;
fi

# Inverse (var does not end with sub_string).
if [[ $var != *sub_string ]]; then
    printf '%s\n' &quot;var does not end with sub_string.&quot;
fi"><pre><span>if</span> [[ <span>$var</span> <span>==</span> <span>*</span>sub_string ]]<span>;</span> <span>then</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>var ends with sub_string.<span>"</span></span>
<span>fi</span>

<span><span>#</span> Inverse (var does not end with sub_string).</span>
<span>if</span> [[ <span>$var</span> <span>!=</span> <span>*</span>sub_string ]]<span>;</span> <span>then</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>var does not end with sub_string.<span>"</span></span>
<span>fi</span></pre></div>


<h2 tabindex="-1" dir="auto">ARRAYS</h2>
<h2 tabindex="-1" dir="auto">Reverse an array</h2>
<p dir="auto">Enabling <code>extdebug</code> allows access to the <code>BASH_ARGV</code> array which stores
the current function‚Äôs arguments in reverse.</p>
<p dir="auto"><strong>CAVEAT</strong>: Requires <code>shopt -s compat44</code> in <code>bash</code> 5.0+.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="reverse_array() {
    # Usage: reverse_array &quot;array&quot;
    shopt -s extdebug
    f()(printf '%s\n' &quot;${BASH_ARGV[@]}&quot;); f &quot;$@&quot;
    shopt -u extdebug
}"><pre><span>reverse_array</span>() {
    <span><span>#</span> Usage: reverse_array "array"</span>
    <span>shopt</span> -s extdebug
    <span>f</span>()(printf <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${BASH_ARGV[@]}</span><span>"</span></span>); f <span><span>"</span><span>$@</span><span>"</span></span>
    <span>shopt</span> -u extdebug
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ reverse_array 1 2 3 4 5
5
4
3
2
1

$ arr=(red blue green)
$ reverse_array &quot;${arr[@]}&quot;
green
blue
red"><pre>$ reverse_array 1 2 3 4 5
5
4
3
2
1

$ arr=(red blue green)
$ reverse_array <span><span>"</span><span>${arr[@]}</span><span>"</span></span>
green
blue
red</pre></div>
<h2 tabindex="-1" dir="auto">Remove duplicate array elements</h2>
<p dir="auto">Create a temporary associative array. When setting associative array
values and a duplicate assignment occurs, bash overwrites the key. This
allows us to effectively remove array duplicates.</p>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto"><strong>CAVEAT:</strong> List order may not stay the same.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="remove_array_dups() {
    # Usage: remove_array_dups &quot;array&quot;
    declare -A tmp_array

    for i in &quot;$@&quot;; do
        [[ $i ]] &amp;&amp; IFS=&quot; &quot; tmp_array[&quot;${i:- }&quot;]=1
    done

    printf '%s\n' &quot;${!tmp_array[@]}&quot;
}"><pre><span>remove_array_dups</span>() {
    <span><span>#</span> Usage: remove_array_dups "array"</span>
    <span>declare</span> -A tmp_array

    <span>for</span> <span>i</span> <span>in</span> <span><span>"</span><span>$@</span><span>"</span></span><span>;</span> <span>do</span>
        [[ <span>$i</span> ]] <span>&amp;&amp;</span> IFS=<span><span>"</span> <span>"</span></span> tmp_array[<span><span>"</span><span>${i<span>:-</span> }</span><span>"</span></span>]=1
    <span>done</span>

    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${<span>!</span>tmp_array[@]}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ remove_array_dups 1 1 2 2 3 3 3 3 3 4 4 4 4 4 5 5 5 5 5 5
1
2
3
4
5

$ arr=(red red green blue blue)
$ remove_array_dups &quot;${arr[@]}&quot;
red
green
blue"><pre>$ remove_array_dups 1 1 2 2 3 3 3 3 3 4 4 4 4 4 5 5 5 5 5 5
1
2
3
4
5

$ arr=(red red green blue blue)
$ remove_array_dups <span><span>"</span><span>${arr[@]}</span><span>"</span></span>
red
green
blue</pre></div>
<h2 tabindex="-1" dir="auto">Random array element</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="random_array_element() {
    # Usage: random_array_element &quot;array&quot;
    local arr=(&quot;$@&quot;)
    printf '%s\n' &quot;${arr[RANDOM % $#]}&quot;
}"><pre><span>random_array_element</span>() {
    <span><span>#</span> Usage: random_array_element "array"</span>
    <span>local</span> arr=(<span><span>"</span><span>$@</span><span>"</span></span>)
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${arr[RANDOM % $#]}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ array=(red green blue yellow brown)
$ random_array_element &quot;${array[@]}&quot;
yellow

# Multiple arguments can also be passed.
$ random_array_element 1 2 3 4 5 6 7
3"><pre>$ array=(red green blue yellow brown)
$ random_array_element <span><span>"</span><span>${array[@]}</span><span>"</span></span>
yellow

<span><span>#</span> Multiple arguments can also be passed.</span>
$ random_array_element 1 2 3 4 5 6 7
3</pre></div>
<h2 tabindex="-1" dir="auto">Cycle through an array</h2>
<p dir="auto">Each time the <code>printf</code> is called, the next array element is printed. When
the print hits the last array element it starts from the first element
again.</p>
<div dir="auto" data-snippet-clipboard-copy-content="arr=(a b c d)

cycle() {
    printf '%s ' &quot;${arr[${i:=0}]}&quot;
    ((i=i>=${#arr[@]}-1?0:++i))
}"><pre>arr=(a b c d)

<span>cycle</span>() {
    <span>printf</span> <span><span>'</span>%s <span>'</span></span> <span><span>"</span><span>${arr[${i:=0}]}</span><span>"</span></span>
    <span><span>((</span>i<span>=</span>i<span>&gt;=</span><span>${<span>#</span>arr[@]}</span><span>-</span><span>1</span><span>?</span><span>0</span><span>:++</span>i<span>))</span></span>
}</pre></div>
<h2 tabindex="-1" dir="auto">Toggle between two values</h2>
<p dir="auto">This works the same as above, this is just a different use case.</p>
<div dir="auto" data-snippet-clipboard-copy-content="arr=(true false)

cycle() {
    printf '%s ' &quot;${arr[${i:=0}]}&quot;
    ((i=i>=${#arr[@]}-1?0:++i))
}"><pre>arr=(true false)

<span>cycle</span>() {
    <span>printf</span> <span><span>'</span>%s <span>'</span></span> <span><span>"</span><span>${arr[${i:=0}]}</span><span>"</span></span>
    <span><span>((</span>i<span>=</span>i<span>&gt;=</span><span>${<span>#</span>arr[@]}</span><span>-</span><span>1</span><span>?</span><span>0</span><span>:++</span>i<span>))</span></span>
}</pre></div>


<h2 tabindex="-1" dir="auto">LOOPS</h2>
<h2 tabindex="-1" dir="auto">Loop over a range of numbers</h2>
<p dir="auto">Alternative to <code>seq</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Loop from 0-100 (no variable support).
for i in {0..100}; do
    printf '%s\n' &quot;$i&quot;
done"><pre><span><span>#</span> Loop from 0-100 (no variable support).</span>
<span>for</span> <span>i</span> <span>in</span> {0..100}<span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$i</span><span>"</span></span>
<span>done</span></pre></div>
<h2 tabindex="-1" dir="auto">Loop over a variable range of numbers</h2>
<p dir="auto">Alternative to <code>seq</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Loop from 0-VAR.
VAR=50
for ((i=0;i<=VAR;i++)); do
    printf '%s\n' &quot;$i&quot;
done"><pre><span><span>#</span> Loop from 0-VAR.</span>
VAR=50
<span>for</span> <span><span>((</span>i<span>=</span><span>0</span>;i<span>&lt;=</span>VAR;i<span>++</span><span>))</span></span><span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$i</span><span>"</span></span>
<span>done</span></pre></div>
<h2 tabindex="-1" dir="auto">Loop over an array</h2>
<div dir="auto" data-snippet-clipboard-copy-content="arr=(apples oranges tomatoes)

# Just elements.
for element in &quot;${arr[@]}&quot;; do
    printf '%s\n' &quot;$element&quot;
done"><pre>arr=(apples oranges tomatoes)

<span><span>#</span> Just elements.</span>
<span>for</span> <span>element</span> <span>in</span> <span><span>"</span><span>${arr[@]}</span><span>"</span></span><span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$element</span><span>"</span></span>
<span>done</span></pre></div>
<h2 tabindex="-1" dir="auto">Loop over an array with an index</h2>
<div dir="auto" data-snippet-clipboard-copy-content="arr=(apples oranges tomatoes)

# Elements and index.
for i in &quot;${!arr[@]}&quot;; do
    printf '%s\n' &quot;${arr[i]}&quot;
done

# Alternative method.
for ((i=0;i<${#arr[@]};i++)); do
    printf '%s\n' &quot;${arr[i]}&quot;
done"><pre>arr=(apples oranges tomatoes)

<span><span>#</span> Elements and index.</span>
<span>for</span> <span>i</span> <span>in</span> <span><span>"</span><span>${<span>!</span>arr[@]}</span><span>"</span></span><span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${arr[i]}</span><span>"</span></span>
<span>done</span>

<span><span>#</span> Alternative method.</span>
<span>for</span> <span><span>((</span>i<span>=</span><span>0</span>;i<span>&lt;</span><span>${<span>#</span>arr[@]}</span>;i<span>++</span><span>))</span></span><span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${arr[i]}</span><span>"</span></span>
<span>done</span></pre></div>
<h2 tabindex="-1" dir="auto">Loop over the contents of a file</h2>
<div dir="auto" data-snippet-clipboard-copy-content="while read -r line; do
    printf '%s\n' &quot;$line&quot;
done < &quot;file&quot;"><pre><span>while</span> <span>read</span> -r line<span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$line</span><span>"</span></span>
<span>done</span> <span>&lt;</span> <span><span>"</span>file<span>"</span></span></pre></div>
<h2 tabindex="-1" dir="auto">Loop over files and directories</h2>
<p dir="auto">Don‚Äôt use <code>ls</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Greedy example.
for file in *; do
    printf '%s\n' &quot;$file&quot;
done

# PNG files in dir.
for file in ~/Pictures/*.png; do
    printf '%s\n' &quot;$file&quot;
done

# Iterate over directories.
for dir in ~/Downloads/*/; do
    printf '%s\n' &quot;$dir&quot;
done

# Brace Expansion.
for file in /path/to/parentdir/{file1,file2,subdir/file3}; do
    printf '%s\n' &quot;$file&quot;
done

# Iterate recursively.
shopt -s globstar
for file in ~/Pictures/**/*; do
    printf '%s\n' &quot;$file&quot;
done
shopt -u globstar"><pre><span><span>#</span> Greedy example.</span>
<span>for</span> <span>file</span> <span>in</span> <span>*</span><span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$file</span><span>"</span></span>
<span>done</span>

<span><span>#</span> PNG files in dir.</span>
<span>for</span> <span>file</span> <span>in</span> <span>~</span>/Pictures/<span>*</span>.png<span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$file</span><span>"</span></span>
<span>done</span>

<span><span>#</span> Iterate over directories.</span>
<span>for</span> <span>dir</span> <span>in</span> <span>~</span>/Downloads/<span>*</span>/<span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$dir</span><span>"</span></span>
<span>done</span>

<span><span>#</span> Brace Expansion.</span>
<span>for</span> <span>file</span> <span>in</span> /path/to/parentdir/{file1,file2,subdir/file3}<span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$file</span><span>"</span></span>
<span>done</span>

<span><span>#</span> Iterate recursively.</span>
<span>shopt</span> -s globstar
<span>for</span> <span>file</span> <span>in</span> <span>~</span>/Pictures/<span>**</span>/<span>*</span><span>;</span> <span>do</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$file</span><span>"</span></span>
<span>done</span>
<span>shopt</span> -u globstar</pre></div>


<h2 tabindex="-1" dir="auto">FILE HANDLING</h2>
<p dir="auto"><strong>CAVEAT:</strong> <code>bash</code> does not handle binary data properly in versions <code>&lt; 4.4</code>.</p>
<h2 tabindex="-1" dir="auto">Read a file to a string</h2>
<p dir="auto">Alternative to the <code>cat</code> command.</p>

<h2 tabindex="-1" dir="auto">Read a file to an array (<em>by line</em>)</h2>
<p dir="auto">Alternative to the <code>cat</code> command.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Bash <4 (discarding empty lines).
IFS=$'\n' read -d &quot;&quot; -ra file_data < &quot;file&quot;

# Bash <4 (preserving empty lines).
while read -r line; do
    file_data+=(&quot;$line&quot;)
done < &quot;file&quot;

# Bash 4+
mapfile -t file_data < &quot;file&quot;"><pre><span><span>#</span> Bash &lt;4 (discarding empty lines).</span>
IFS=<span><span>$'</span><span>\n</span><span>'</span></span> <span>read</span> -d <span><span>"</span><span>"</span></span> -ra file_data <span>&lt;</span> <span><span>"</span>file<span>"</span></span>

<span><span>#</span> Bash &lt;4 (preserving empty lines).</span>
<span>while</span> <span>read</span> -r line<span>;</span> <span>do</span>
    file_data+=(<span><span>"</span><span>$line</span><span>"</span></span>)
<span>done</span> <span>&lt;</span> <span><span>"</span>file<span>"</span></span>

<span><span>#</span> Bash 4+</span>
mapfile -t file_data <span>&lt;</span> <span><span>"</span>file<span>"</span></span></pre></div>
<h2 tabindex="-1" dir="auto">Get the first N lines of a file</h2>
<p dir="auto">Alternative to the <code>head</code> command.</p>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="head() {
    # Usage: head &quot;n&quot; &quot;file&quot;
    mapfile -tn &quot;$1&quot; line < &quot;$2&quot;
    printf '%s\n' &quot;${line[@]}&quot;
}"><pre><span>head</span>() {
    <span><span>#</span> Usage: head "n" "file"</span>
    mapfile -tn <span><span>"</span><span>$1</span><span>"</span></span> line <span>&lt;</span> <span><span>"</span><span>$2</span><span>"</span></span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${line[@]}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ head 2 ~/.bashrc
# Prompt
PS1='‚ûú '

$ head 1 ~/.bashrc
# Prompt"><pre>$ head 2 <span>~</span>/.bashrc
<span><span>#</span> Prompt</span>
PS1=<span><span>'</span>‚ûú <span>'</span></span>

$ head 1 <span>~</span>/.bashrc
<span><span>#</span> Prompt</span></pre></div>
<h2 tabindex="-1" dir="auto">Get the last N lines of a file</h2>
<p dir="auto">Alternative to the <code>tail</code> command.</p>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="tail() {
    # Usage: tail &quot;n&quot; &quot;file&quot;
    mapfile -tn 0 line < &quot;$2&quot;
    printf '%s\n' &quot;${line[@]: -$1}&quot;
}"><pre><span>tail</span>() {
    <span><span>#</span> Usage: tail "n" "file"</span>
    mapfile -tn 0 line <span>&lt;</span> <span><span>"</span><span>$2</span><span>"</span></span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${line[@]<span>:</span> -<span>$1</span>}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ tail 2 ~/.bashrc
# Enable tmux.
# [[ -z &quot;$TMUX&quot;  ]] &amp;&amp; exec tmux

$ tail 1 ~/.bashrc
# [[ -z &quot;$TMUX&quot;  ]] &amp;&amp; exec tmux"><pre>$ tail 2 <span>~</span>/.bashrc
<span><span>#</span> Enable tmux.</span>
<span><span>#</span> [[ -z "$TMUX"  ]] &amp;&amp; exec tmux</span>

$ tail 1 <span>~</span>/.bashrc
<span><span>#</span> [[ -z "$TMUX"  ]] &amp;&amp; exec tmux</span></pre></div>
<h2 tabindex="-1" dir="auto">Get the number of lines in a file</h2>
<p dir="auto">Alternative to <code>wc -l</code>.</p>
<p dir="auto"><strong>Example Function (bash 4):</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="lines() {
    # Usage: lines &quot;file&quot;
    mapfile -tn 0 lines < &quot;$1&quot;
    printf '%s\n' &quot;${#lines[@]}&quot;
}"><pre><span>lines</span>() {
    <span><span>#</span> Usage: lines "file"</span>
    mapfile -tn 0 lines <span>&lt;</span> <span><span>"</span><span>$1</span><span>"</span></span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${<span>#</span>lines[@]}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Function (bash 3):</strong></p>
<p dir="auto">This method uses less memory than the <code>mapfile</code> method and works in <code>bash</code> 3 but it is slower for bigger files.</p>
<div dir="auto" data-snippet-clipboard-copy-content="lines_loop() {
    # Usage: lines_loop &quot;file&quot;
    count=0
    while IFS= read -r _; do
        ((count++))
    done < &quot;$1&quot;
    printf '%s\n' &quot;$count&quot;
}"><pre><span>lines_loop</span>() {
    <span><span>#</span> Usage: lines_loop "file"</span>
    count=0
    <span>while</span> IFS= <span>read</span> -r _<span>;</span> <span>do</span>
        <span><span>((</span>count<span>++</span><span>))</span></span>
    <span>done</span> <span>&lt;</span> <span><span>"</span><span>$1</span><span>"</span></span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$count</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lines ~/.bashrc
48

$ lines_loop ~/.bashrc
48"><pre>$ lines <span>~</span>/.bashrc
48

$ lines_loop <span>~</span>/.bashrc
48</pre></div>
<h2 tabindex="-1" dir="auto">Count files or directories in directory</h2>
<p dir="auto">This works by passing the output of the glob to the function and then counting the number of arguments.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="count() {
    # Usage: count /path/to/dir/*
    #        count /path/to/dir/*/
    printf '%s\n' &quot;$#&quot;
}"><pre><span>count</span>() {
    <span><span>#</span> Usage: count /path/to/dir/*</span>
    <span><span>#</span>        count /path/to/dir/*/</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$#</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Count all files in dir.
$ count ~/Downloads/*
232

# Count all dirs in dir.
$ count ~/Downloads/*/
45

# Count all jpg files in dir.
$ count ~/Pictures/*.jpg
64"><pre><span><span>#</span> Count all files in dir.</span>
$ count <span>~</span>/Downloads/<span>*</span>
232

<span><span>#</span> Count all dirs in dir.</span>
$ count <span>~</span>/Downloads/<span>*</span>/
45

<span><span>#</span> Count all jpg files in dir.</span>
$ count <span>~</span>/Pictures/<span>*</span>.jpg
64</pre></div>
<h2 tabindex="-1" dir="auto">Create an empty file</h2>
<p dir="auto">Alternative to <code>touch</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Shortest.
>file

# Longer alternatives:
:>file
echo -n >file
printf '' >file"><pre><span><span>#</span> Shortest.</span>
<span>&gt;</span>file

<span><span>#</span> Longer alternatives:</span>
:<span>&gt;</span>file
<span>echo</span> -n <span>&gt;</span>file
<span>printf</span> <span><span>'</span><span>'</span></span> <span>&gt;</span>file</pre></div>
<h2 tabindex="-1" dir="auto">Extract lines between two markers</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="extract() {
    # Usage: extract file &quot;opening marker&quot; &quot;closing marker&quot;
    while IFS=$'\n' read -r line; do
        [[ $extract &amp;&amp; $line != &quot;$3&quot; ]] &amp;&amp;
            printf '%s\n' &quot;$line&quot;

        [[ $line == &quot;$2&quot; ]] &amp;&amp; extract=1
        [[ $line == &quot;$3&quot; ]] &amp;&amp; extract=
    done < &quot;$1&quot;
}"><pre><span>extract</span>() {
    <span><span>#</span> Usage: extract file "opening marker" "closing marker"</span>
    <span>while</span> IFS=<span><span>$'</span><span>\n</span><span>'</span></span> <span>read</span> -r line<span>;</span> <span>do</span>
        [[ <span>$extract</span> <span>&amp;&amp;</span> <span>$line</span> <span>!=</span> <span><span>"</span><span>$3</span><span>"</span></span> ]] <span>&amp;&amp;</span>
            <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$line</span><span>"</span></span>

        [[ <span>$line</span> <span>==</span> <span><span>"</span><span>$2</span><span>"</span></span> ]] <span>&amp;&amp;</span> extract=1
        [[ <span>$line</span> <span>==</span> <span><span>"</span><span>$3</span><span>"</span></span> ]] <span>&amp;&amp;</span> extract=
    <span>done</span> <span>&lt;</span> <span><span>"</span><span>$1</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Extract code blocks from MarkDown file.
$ extract ~/projects/pure-bash/README.md '```sh' '```'
# Output here..."><pre><span><span>#</span> Extract code blocks from MarkDown file.</span>
$ extract <span>~</span>/projects/pure-bash/README.md <span><span>'</span>```sh<span>'</span></span> <span><span>'</span>```<span>'</span></span>
<span><span>#</span> Output here...</span></pre></div>


<h2 tabindex="-1" dir="auto">FILE PATHS</h2>
<h2 tabindex="-1" dir="auto">Get the directory name of a file path</h2>
<p dir="auto">Alternative to the <code>dirname</code> command.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="dirname() {
    # Usage: dirname &quot;path&quot;
    local tmp=${1:-.}

    [[ $tmp != *[!/]* ]] &amp;&amp; {
        printf '/\n'
        return
    }

    tmp=${tmp%%&quot;${tmp##*[!/]}&quot;}

    [[ $tmp != */* ]] &amp;&amp; {
        printf '.\n'
        return
    }

    tmp=${tmp%/*}
    tmp=${tmp%%&quot;${tmp##*[!/]}&quot;}

    printf '%s\n' &quot;${tmp:-/}&quot;
}"><pre><span>dirname</span>() {
    <span><span>#</span> Usage: dirname "path"</span>
    <span>local</span> tmp=<span>${1<span>:-</span>.}</span>

    [[ <span>$tmp</span> <span>!=</span> <span>*</span>[<span>!</span>/]<span>*</span> ]] <span>&amp;&amp;</span> {
        <span>printf</span> <span><span>'</span>/\n<span>'</span></span>
        <span>return</span>
    }

    tmp=<span>${tmp<span>%%</span><span><span>"</span><span>${tmp<span>##*</span>[!/]}</span><span>"</span></span>}</span>

    [[ <span>$tmp</span> <span>!=</span> <span>*</span>/<span>*</span> ]] <span>&amp;&amp;</span> {
        <span>printf</span> <span><span>'</span>.\n<span>'</span></span>
        <span>return</span>
    }

    tmp=<span>${tmp<span>%/*</span>}</span>
    tmp=<span>${tmp<span>%%</span><span><span>"</span><span>${tmp<span>##*</span>[!/]}</span><span>"</span></span>}</span>

    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${tmp<span>:-/</span>}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ dirname ~/Pictures/Wallpapers/1.jpg
/home/black/Pictures/Wallpapers

$ dirname ~/Pictures/Downloads/
/home/black/Pictures"><pre>$ dirname <span>~</span>/Pictures/Wallpapers/1.jpg
/home/black/Pictures/Wallpapers

$ dirname <span>~</span>/Pictures/Downloads/
/home/black/Pictures</pre></div>
<h2 tabindex="-1" dir="auto">Get the base-name of a file path</h2>
<p dir="auto">Alternative to the <code>basename</code> command.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="basename() {
    # Usage: basename &quot;path&quot; [&quot;suffix&quot;]
    local tmp

    tmp=${1%&quot;${1##*[!/]}&quot;}
    tmp=${tmp##*/}
    tmp=${tmp%&quot;${2/&quot;$tmp&quot;}&quot;}

    printf '%s\n' &quot;${tmp:-/}&quot;
}"><pre><span>basename</span>() {
    <span><span>#</span> Usage: basename "path" ["suffix"]</span>
    <span>local</span> tmp

    tmp=<span>${1<span>%</span><span><span>"</span><span>${1<span>##*</span>[!/]}</span><span>"</span></span>}</span>
    tmp=<span>${tmp<span>##*/</span>}</span>
    tmp=<span>${tmp<span>%</span><span><span>"</span><span>${2<span>/</span><span><span>"</span><span>$tmp</span><span>"</span></span>}</span><span>"</span></span>}</span>

    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${tmp<span>:-/</span>}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ basename ~/Pictures/Wallpapers/1.jpg
1.jpg

$ basename ~/Pictures/Wallpapers/1.jpg .jpg
1

$ basename ~/Pictures/Downloads/
Downloads"><pre>$ basename <span>~</span>/Pictures/Wallpapers/1.jpg
1.jpg

$ basename <span>~</span>/Pictures/Wallpapers/1.jpg .jpg
1

$ basename <span>~</span>/Pictures/Downloads/
Downloads</pre></div>


<h2 tabindex="-1" dir="auto">VARIABLES</h2>
<h2 tabindex="-1" dir="auto">Assign and access a variable using a variable</h2>
<div dir="auto" data-snippet-clipboard-copy-content="$ hello_world=&quot;value&quot;

# Create the variable name.
$ var=&quot;world&quot;
$ ref=&quot;hello_$var&quot;

# Print the value of the variable name stored in 'hello_$var'.
$ printf '%s\n' &quot;${!ref}&quot;
value"><pre>$ hello_world=<span><span>"</span>value<span>"</span></span>

<span><span>#</span> Create the variable name.</span>
$ var=<span><span>"</span>world<span>"</span></span>
$ ref=<span><span>"</span>hello_<span>$var</span><span>"</span></span>

<span><span>#</span> Print the value of the variable name stored in 'hello_$var'.</span>
$ <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${<span>!</span>ref}</span><span>"</span></span>
value</pre></div>
<p dir="auto">Alternatively, on <code>bash</code> 4.3+:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ hello_world=&quot;value&quot;
$ var=&quot;world&quot;

# Declare a nameref.
$ declare -n ref=hello_$var

$ printf '%s\n' &quot;$ref&quot;
value"><pre>$ hello_world=<span><span>"</span>value<span>"</span></span>
$ var=<span><span>"</span>world<span>"</span></span>

<span><span>#</span> Declare a nameref.</span>
$ <span>declare</span> -n ref=hello_<span>$var</span>

$ <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$ref</span><span>"</span></span>
value</pre></div>
<h2 tabindex="-1" dir="auto">Name a variable based on another variable</h2>
<div dir="auto" data-snippet-clipboard-copy-content="$ var=&quot;world&quot;
$ declare &quot;hello_$var=value&quot;
$ printf '%s\n' &quot;$hello_world&quot;
value"><pre>$ var=<span><span>"</span>world<span>"</span></span>
$ <span>declare</span> <span><span>"</span>hello_<span>$var</span>=value<span>"</span></span>
$ <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$hello_world</span><span>"</span></span>
value</pre></div>


<h2 tabindex="-1" dir="auto">ESCAPE SEQUENCES</h2>
<p dir="auto">Contrary to popular belief, there is no issue in utilizing raw escape sequences. Using <code>tput</code> abstracts the same ANSI sequences as if printed manually. Worse still, <code>tput</code> is not actually portable. There are a number of <code>tput</code> variants each with different commands and syntaxes (<em>try <code>tput setaf 3</code> on a FreeBSD system</em>). Raw sequences are fine.</p>
<h2 tabindex="-1" dir="auto">Text Colors</h2>
<p dir="auto"><strong>NOTE:</strong> Sequences requiring RGB values only work in True-Color Terminal Emulators.</p>
<table>
<thead>
<tr>
<th>Sequence</th>
<th>What does it do?</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\e[38;5;&lt;NUM&gt;m</code></td>
<td>Set text foreground color.</td>
<td><code>0-255</code></td>
</tr>
<tr>
<td><code>\e[48;5;&lt;NUM&gt;m</code></td>
<td>Set text background color.</td>
<td><code>0-255</code></td>
</tr>
<tr>
<td><code>\e[38;2;&lt;R&gt;;&lt;G&gt;;&lt;B&gt;m</code></td>
<td>Set text foreground color to RGB color.</td>
<td><code>R</code>, <code>G</code>, <code>B</code></td>
</tr>
<tr>
<td><code>\e[48;2;&lt;R&gt;;&lt;G&gt;;&lt;B&gt;m</code></td>
<td>Set text background color to RGB color.</td>
<td><code>R</code>, <code>G</code>, <code>B</code></td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Text Attributes</h2>
<p dir="auto"><strong>NOTE:</strong> Prepend 2 to any code below to turn it's effect off
(examples: 21=bold text off, 22=faint text off, 23=italic text off).</p>
<table>
<thead>
<tr>
<th>Sequence</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\e[m</code></td>
<td>Reset text formatting and colors.</td>
</tr>
<tr>
<td><code>\e[1m</code></td>
<td>Bold text.</td>
</tr>
<tr>
<td><code>\e[2m</code></td>
<td>Faint text.</td>
</tr>
<tr>
<td><code>\e[3m</code></td>
<td>Italic text.</td>
</tr>
<tr>
<td><code>\e[4m</code></td>
<td>Underline text.</td>
</tr>
<tr>
<td><code>\e[5m</code></td>
<td>Blinking text.</td>
</tr>
<tr>
<td><code>\e[7m</code></td>
<td>Highlighted text.</td>
</tr>
<tr>
<td><code>\e[8m</code></td>
<td>Hidden text.</td>
</tr>
<tr>
<td><code>\e[9m</code></td>
<td>Strike-through text.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Cursor Movement</h2>
<table>
<thead>
<tr>
<th>Sequence</th>
<th>What does it do?</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\e[&lt;LINE&gt;;&lt;COLUMN&gt;H</code></td>
<td>Move cursor to absolute position.</td>
<td><code>line</code>, <code>column</code></td>
</tr>
<tr>
<td><code>\e[H</code></td>
<td>Move cursor to home position (<code>0,0</code>).</td>
<td></td>
</tr>
<tr>
<td><code>\e[&lt;NUM&gt;A</code></td>
<td>Move cursor up N lines.</td>
<td><code>num</code></td>
</tr>
<tr>
<td><code>\e[&lt;NUM&gt;B</code></td>
<td>Move cursor down N lines.</td>
<td><code>num</code></td>
</tr>
<tr>
<td><code>\e[&lt;NUM&gt;C</code></td>
<td>Move cursor right N columns.</td>
<td><code>num</code></td>
</tr>
<tr>
<td><code>\e[&lt;NUM&gt;D</code></td>
<td>Move cursor left N columns.</td>
<td><code>num</code></td>
</tr>
<tr>
<td><code>\e[s</code></td>
<td>Save cursor position.</td>
<td></td>
</tr>
<tr>
<td><code>\e[u</code></td>
<td>Restore cursor position.</td>
<td></td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Erasing Text</h2>
<table>
<thead>
<tr>
<th>Sequence</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\e[K</code></td>
<td>Erase from cursor position to end of line.</td>
</tr>
<tr>
<td><code>\e[1K</code></td>
<td>Erase from cursor position to start of line.</td>
</tr>
<tr>
<td><code>\e[2K</code></td>
<td>Erase the entire current line.</td>
</tr>
<tr>
<td><code>\e[J</code></td>
<td>Erase from the current line to the bottom of the screen.</td>
</tr>
<tr>
<td><code>\e[1J</code></td>
<td>Erase from the current line to the top of the screen.</td>
</tr>
<tr>
<td><code>\e[2J</code></td>
<td>Clear the screen.</td>
</tr>
<tr>
<td><code>\e[2J\e[H</code></td>
<td>Clear the screen and move cursor to <code>0,0</code>.</td>
</tr>
</tbody>
</table>


<h2 tabindex="-1" dir="auto">PARAMETER EXPANSION</h2>
<h2 tabindex="-1" dir="auto">Indirection</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${!VAR}</code></td>
<td>Access a variable based on the value of <code>VAR</code>.</td>
</tr>
<tr>
<td><code>${!VAR*}</code></td>
<td>Expand to <code>IFS</code> separated list of variable names starting with <code>VAR</code>.</td>
</tr>
<tr>
<td><code>${!VAR@}</code></td>
<td>Expand to <code>IFS</code> separated list of variable names starting with <code>VAR</code>. If double-quoted, each variable name expands to a separate word.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Replacement</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${VAR#PATTERN}</code></td>
<td>Remove shortest match of pattern from start of string.</td>
</tr>
<tr>
<td><code>${VAR##PATTERN}</code></td>
<td>Remove longest match of pattern from start of string.</td>
</tr>
<tr>
<td><code>${VAR%PATTERN}</code></td>
<td>Remove shortest match of pattern from end of string.</td>
</tr>
<tr>
<td><code>${VAR%%PATTERN}</code></td>
<td>Remove longest match of pattern from end of string.</td>
</tr>
<tr>
<td><code>${VAR/PATTERN/REPLACE}</code></td>
<td>Replace first match with string.</td>
</tr>
<tr>
<td><code>${VAR//PATTERN/REPLACE}</code></td>
<td>Replace all matches with string.</td>
</tr>
<tr>
<td><code>${VAR/PATTERN}</code></td>
<td>Remove first match.</td>
</tr>
<tr>
<td><code>${VAR//PATTERN}</code></td>
<td>Remove all matches.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Length</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${#VAR}</code></td>
<td>Length of var in characters.</td>
</tr>
<tr>
<td><code>${#ARR[@]}</code></td>
<td>Length of array in elements.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Expansion</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${VAR:OFFSET}</code></td>
<td>Remove first <code>N</code> chars from variable.</td>
</tr>
<tr>
<td><code>${VAR:OFFSET:LENGTH}</code></td>
<td>Get substring from <code>N</code> character to <code>N</code> character. <br> (<code>${VAR:10:10}</code>: Get sub-string from char <code>10</code> to char <code>20</code>)</td>
</tr>
<tr>
<td><code>${VAR:: OFFSET}</code></td>
<td>Get first <code>N</code> chars from variable.</td>
</tr>
<tr>
<td><code>${VAR:: -OFFSET}</code></td>
<td>Remove last <code>N</code> chars from variable.</td>
</tr>
<tr>
<td><code>${VAR: -OFFSET}</code></td>
<td>Get last <code>N</code> chars from variable.</td>
</tr>
<tr>
<td><code>${VAR:OFFSET:-OFFSET}</code></td>
<td>Cut first <code>N</code> chars and last <code>N</code> chars.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Case Modification</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>What does it do?</th>
<th>CAVEAT</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${VAR^}</code></td>
<td>Uppercase first character.</td>
<td><code>bash 4+</code></td>
</tr>
<tr>
<td><code>${VAR^^}</code></td>
<td>Uppercase all characters.</td>
<td><code>bash 4+</code></td>
</tr>
<tr>
<td><code>${VAR,}</code></td>
<td>Lowercase first character.</td>
<td><code>bash 4+</code></td>
</tr>
<tr>
<td><code>${VAR,,}</code></td>
<td>Lowercase all characters.</td>
<td><code>bash 4+</code></td>
</tr>
<tr>
<td><code>${VAR~}</code></td>
<td>Reverse case of first character.</td>
<td><code>bash 4+</code></td>
</tr>
<tr>
<td><code>${VAR~~}</code></td>
<td>Reverse case of all characters.</td>
<td><code>bash 4+</code></td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Default Value</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${VAR:-STRING}</code></td>
<td>If <code>VAR</code> is empty or unset, use <code>STRING</code> as its value.</td>
</tr>
<tr>
<td><code>${VAR-STRING}</code></td>
<td>If <code>VAR</code> is unset, use <code>STRING</code> as its value.</td>
</tr>
<tr>
<td><code>${VAR:=STRING}</code></td>
<td>If <code>VAR</code> is empty or unset, set the value of <code>VAR</code> to <code>STRING</code>.</td>
</tr>
<tr>
<td><code>${VAR=STRING}</code></td>
<td>If <code>VAR</code> is unset, set the value of <code>VAR</code> to <code>STRING</code>.</td>
</tr>
<tr>
<td><code>${VAR:+STRING}</code></td>
<td>If <code>VAR</code> is not empty, use <code>STRING</code> as its value.</td>
</tr>
<tr>
<td><code>${VAR+STRING}</code></td>
<td>If <code>VAR</code> is set, use <code>STRING</code> as its value.</td>
</tr>
<tr>
<td><code>${VAR:?STRING}</code></td>
<td>Display an error if empty or unset.</td>
</tr>
<tr>
<td><code>${VAR?STRING}</code></td>
<td>Display an error if unset.</td>
</tr>
</tbody>
</table>


<h2 tabindex="-1" dir="auto">BRACE EXPANSION</h2>
<h2 tabindex="-1" dir="auto">Ranges</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# Syntax: {<START>..<END>}

# Print numbers 1-100.
echo {1..100}

# Print range of floats.
echo 1.{1..9}

# Print chars a-z.
echo {a..z}
echo {A..Z}

# Nesting.
echo {A..Z}{0..9}

# Print zero-padded numbers.
# CAVEAT: bash 4+
echo {01..100}

# Change increment amount.
# Syntax: {<START>..<END>..<INCREMENT>}
# CAVEAT: bash 4+
echo {1..10..2} # Increment by 2."><pre><span><span>#</span> Syntax: {&lt;START&gt;..&lt;END&gt;}</span>

<span><span>#</span> Print numbers 1-100.</span>
<span>echo</span> {1..100}

<span><span>#</span> Print range of floats.</span>
<span>echo</span> 1.{1..9}

<span><span>#</span> Print chars a-z.</span>
<span>echo</span> {a..z}
<span>echo</span> {A..Z}

<span><span>#</span> Nesting.</span>
<span>echo</span> {A..Z}{0..9}

<span><span>#</span> Print zero-padded numbers.</span>
<span><span>#</span> CAVEAT: bash 4+</span>
<span>echo</span> {01..100}

<span><span>#</span> Change increment amount.</span>
<span><span>#</span> Syntax: {&lt;START&gt;..&lt;END&gt;..&lt;INCREMENT&gt;}</span>
<span><span>#</span> CAVEAT: bash 4+</span>
<span>echo</span> {1..10..2} <span><span>#</span> Increment by 2.</span></pre></div>
<h2 tabindex="-1" dir="auto">String Lists</h2>
<div dir="auto" data-snippet-clipboard-copy-content="echo {apples,oranges,pears,grapes}

# Example Usage:
# Remove dirs Movies, Music and ISOS from ~/Downloads/.
rm -rf ~/Downloads/{Movies,Music,ISOS}"><pre><span>echo</span> {apples,oranges,pears,grapes}

<span><span>#</span> Example Usage:</span>
<span><span>#</span> Remove dirs Movies, Music and ISOS from ~/Downloads/.</span>
rm -rf <span>~</span>/Downloads/{Movies,Music,ISOS}</pre></div>


<h2 tabindex="-1" dir="auto">CONDITIONAL EXPRESSIONS</h2>
<h2 tabindex="-1" dir="auto">File Conditionals</h2>
<table>
<thead>
<tr>
<th>Expression</th>
<th>Value</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a</code></td>
<td><code>file</code></td>
<td>If file exists.</td>
</tr>
<tr>
<td><code>-b</code></td>
<td><code>file</code></td>
<td>If file exists and is a block special file.</td>
</tr>
<tr>
<td><code>-c</code></td>
<td><code>file</code></td>
<td>If file exists and is a character special file.</td>
</tr>
<tr>
<td><code>-d</code></td>
<td><code>file</code></td>
<td>If file exists and is a directory.</td>
</tr>
<tr>
<td><code>-e</code></td>
<td><code>file</code></td>
<td>If file exists.</td>
</tr>
<tr>
<td><code>-f</code></td>
<td><code>file</code></td>
<td>If file exists and is a regular file.</td>
</tr>
<tr>
<td><code>-g</code></td>
<td><code>file</code></td>
<td>If file exists and its set-group-id bit is set.</td>
</tr>
<tr>
<td><code>-h</code></td>
<td><code>file</code></td>
<td>If file exists and is a symbolic link.</td>
</tr>
<tr>
<td><code>-k</code></td>
<td><code>file</code></td>
<td>If file exists and its sticky-bit is set</td>
</tr>
<tr>
<td><code>-p</code></td>
<td><code>file</code></td>
<td>If file exists and is a named pipe (<em>FIFO</em>).</td>
</tr>
<tr>
<td><code>-r</code></td>
<td><code>file</code></td>
<td>If file exists and is readable.</td>
</tr>
<tr>
<td><code>-s</code></td>
<td><code>file</code></td>
<td>If file exists and its size is greater than zero.</td>
</tr>
<tr>
<td><code>-t</code></td>
<td><code>fd</code></td>
<td>If file descriptor is open and refers to a terminal.</td>
</tr>
<tr>
<td><code>-u</code></td>
<td><code>file</code></td>
<td>If file exists and its set-user-id bit is set.</td>
</tr>
<tr>
<td><code>-w</code></td>
<td><code>file</code></td>
<td>If file exists and is writable.</td>
</tr>
<tr>
<td><code>-x</code></td>
<td><code>file</code></td>
<td>If file exists and is executable.</td>
</tr>
<tr>
<td><code>-G</code></td>
<td><code>file</code></td>
<td>If file exists and is owned by the effective group ID.</td>
</tr>
<tr>
<td><code>-L</code></td>
<td><code>file</code></td>
<td>If file exists and is a symbolic link.</td>
</tr>
<tr>
<td><code>-N</code></td>
<td><code>file</code></td>
<td>If file exists and has been modified since last read.</td>
</tr>
<tr>
<td><code>-O</code></td>
<td><code>file</code></td>
<td>If file exists and is owned by the effective user ID.</td>
</tr>
<tr>
<td><code>-S</code></td>
<td><code>file</code></td>
<td>If file exists and is a socket.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">File Comparisons</h2>
<table>
<thead>
<tr>
<th>Expression</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>file -ef file2</code></td>
<td>If both files refer to the same inode and device numbers.</td>
</tr>
<tr>
<td><code>file -nt file2</code></td>
<td>If <code>file</code> is newer than <code>file2</code> (<em>uses modification time</em>) or <code>file</code> exists and <code>file2</code> does not.</td>
</tr>
<tr>
<td><code>file -ot file2</code></td>
<td>If <code>file</code> is older than <code>file2</code> (<em>uses modification time</em>) or <code>file2</code> exists and <code>file</code> does not.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Variable Conditionals</h2>
<table>
<thead>
<tr>
<th>Expression</th>
<th>Value</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-o</code></td>
<td><code>opt</code></td>
<td>If shell option is enabled.</td>
</tr>
<tr>
<td><code>-v</code></td>
<td><code>var</code></td>
<td>If variable has a value assigned.</td>
</tr>
<tr>
<td><code>-R</code></td>
<td><code>var</code></td>
<td>If variable is a name reference.</td>
</tr>
<tr>
<td><code>-z</code></td>
<td><code>var</code></td>
<td>If the length of string is zero.</td>
</tr>
<tr>
<td><code>-n</code></td>
<td><code>var</code></td>
<td>If the length of string is non-zero.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Variable Comparisons</h2>
<table>
<thead>
<tr>
<th>Expression</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>var = var2</code></td>
<td>Equal to.</td>
</tr>
<tr>
<td><code>var == var2</code></td>
<td>Equal to (<em>synonym for <code>=</code></em>).</td>
</tr>
<tr>
<td><code>var != var2</code></td>
<td>Not equal to.</td>
</tr>
<tr>
<td><code>var &lt; var2</code></td>
<td>Less than (<em>in ASCII alphabetical order.</em>)</td>
</tr>
<tr>
<td><code>var &gt; var2</code></td>
<td>Greater than (<em>in ASCII alphabetical order.</em>)</td>
</tr>
</tbody>
</table>


<h2 tabindex="-1" dir="auto">ARITHMETIC OPERATORS</h2>
<h2 tabindex="-1" dir="auto">Assignment</h2>
<table>
<thead>
<tr>
<th>Operators</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>=</code></td>
<td>Initialize or change the value of a variable.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Arithmetic</h2>
<table>
<thead>
<tr>
<th>Operators</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>Addition</td>
</tr>
<tr>
<td><code>-</code></td>
<td>Subtraction</td>
</tr>
<tr>
<td><code>*</code></td>
<td>Multiplication</td>
</tr>
<tr>
<td><code>/</code></td>
<td>Division</td>
</tr>
<tr>
<td><code>**</code></td>
<td>Exponentiation</td>
</tr>
<tr>
<td><code>%</code></td>
<td>Modulo</td>
</tr>
<tr>
<td><code>+=</code></td>
<td>Plus-Equal (<em>Increment a variable.</em>)</td>
</tr>
<tr>
<td><code>-=</code></td>
<td>Minus-Equal (<em>Decrement a variable.</em>)</td>
</tr>
<tr>
<td><code>*=</code></td>
<td>Times-Equal (<em>Multiply a variable.</em>)</td>
</tr>
<tr>
<td><code>/=</code></td>
<td>Slash-Equal (<em>Divide a variable.</em>)</td>
</tr>
<tr>
<td><code>%=</code></td>
<td>Mod-Equal (<em>Remainder of dividing a variable.</em>)</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Bitwise</h2>
<table>
<thead>
<tr>
<th>Operators</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;&lt;</code></td>
<td>Bitwise Left Shift</td>
</tr>
<tr>
<td><code>&lt;&lt;=</code></td>
<td>Left-Shift-Equal</td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>Bitwise Right Shift</td>
</tr>
<tr>
<td><code>&gt;&gt;=</code></td>
<td>Right-Shift-Equal</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>Bitwise AND</td>
</tr>
<tr>
<td><code>&amp;=</code></td>
<td>Bitwise AND-Equal</td>
</tr>
<tr>
<td><code>|</code></td>
<td>Bitwise OR</td>
</tr>
<tr>
<td><code>|=</code></td>
<td>Bitwise OR-Equal</td>
</tr>
<tr>
<td><code>~</code></td>
<td>Bitwise NOT</td>
</tr>
<tr>
<td><code>^</code></td>
<td>Bitwise XOR</td>
</tr>
<tr>
<td><code>^=</code></td>
<td>Bitwise XOR-Equal</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Logical</h2>
<table>
<thead>
<tr>
<th>Operators</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>!</code></td>
<td>NOT</td>
</tr>
<tr>
<td><code>&amp;&amp;</code></td>
<td>AND</td>
</tr>
<tr>
<td><code>||</code></td>
<td>OR</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Miscellaneous</h2>
<table>
<thead>
<tr>
<th>Operators</th>
<th>What does it do?</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>,</code></td>
<td>Comma Separator</td>
<td><code>((a=1,b=2,c=3))</code></td>
</tr>
</tbody>
</table>


<h2 tabindex="-1" dir="auto">ARITHMETIC</h2>
<h2 tabindex="-1" dir="auto">Simpler syntax to set variables</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# Simple math
((var=1+2))

# Decrement/Increment variable
((var++))
((var--))
((var+=1))
((var-=1))

# Using variables
((var=var2*arr[2]))"><pre><span><span>#</span> Simple math</span>
<span><span>((</span>var<span>=</span><span>1</span><span>+</span><span>2</span><span>))</span></span>

<span><span>#</span> Decrement/Increment variable</span>
<span><span>((</span>var<span>++</span><span>))</span></span>
<span><span>((</span>var<span>--</span><span>))</span></span>
<span><span>((</span>var<span>+=</span><span>1</span><span>))</span></span>
<span><span>((</span>var<span>-=</span><span>1</span><span>))</span></span>

<span><span>#</span> Using variables</span>
<span><span>((</span>var<span>=</span>var<span>2</span><span>*</span>arr[<span>2</span>]<span>))</span></span></pre></div>
<h2 tabindex="-1" dir="auto">Ternary Tests</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# Set the value of var to var2 if var2 is greater than var.
# var: variable to set.
# var2>var: Condition to test.
# ?var2: If the test succeeds.
# :var: If the test fails.
((var=var2>var?var2:var))"><pre><span><span>#</span> Set the value of var to var2 if var2 is greater than var.</span>
<span><span>#</span> var: variable to set.</span>
<span><span>#</span> var2&gt;var: Condition to test.</span>
<span><span>#</span> ?var2: If the test succeeds.</span>
<span><span>#</span> :var: If the test fails.</span>
<span><span>((</span>var<span>=</span>var<span>2</span><span>&gt;</span>var<span>?</span>var<span>2</span><span>:</span>var<span>))</span></span></pre></div>


<h2 tabindex="-1" dir="auto">TRAPS</h2>
<p dir="auto">Traps allow a script to execute code on various signals. In <a href="https://github.com/dylanaraps/pxltrm">pxltrm</a> (<em>a pixel art editor written in bash</em>)  traps are used to redraw the user interface on window resize. Another use case is cleaning up temporary files on script exit.</p>
<p dir="auto">Traps should be added near the start of scripts so any early errors are also caught.</p>
<p dir="auto"><strong>NOTE:</strong> For a full list of signals, see <code>trap -l</code>.</p>
<h2 tabindex="-1" dir="auto">Do something on script exit</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# Clear screen on script exit.
trap 'printf \\e[2J\\e[H\\e[m' EXIT"><pre><span><span>#</span> Clear screen on script exit.</span>
<span>trap</span> <span><span>'</span>printf \\e[2J\\e[H\\e[m<span>'</span></span> EXIT</pre></div>
<h2 tabindex="-1" dir="auto">Ignore terminal interrupt (CTRL+C, SIGINT)</h2>

<h2 tabindex="-1" dir="auto">React to window resize</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# Call a function on window resize.
trap 'code_here' SIGWINCH"><pre><span><span>#</span> Call a function on window resize.</span>
<span>trap</span> <span><span>'</span>code_here<span>'</span></span> SIGWINCH</pre></div>
<h2 tabindex="-1" dir="auto">Do something before every command</h2>

<h2 tabindex="-1" dir="auto">Do something when a shell function or a sourced file finishes executing</h2>



<h2 tabindex="-1" dir="auto">PERFORMANCE</h2>
<h2 tabindex="-1" dir="auto">Disable Unicode</h2>
<p dir="auto">If unicode is not required, it can be disabled for a performance increase. Results may vary however there have been noticeable improvements in <a href="https://github.com/dylanaraps/neofetch">neofetch</a> and other programs.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Disable unicode.
LC_ALL=C
LANG=C"><pre><span><span>#</span> Disable unicode.</span>
LC_ALL=C
LANG=C</pre></div>


<h2 tabindex="-1" dir="auto">OBSOLETE SYNTAX</h2>
<h2 tabindex="-1" dir="auto">Shebang</h2>
<p dir="auto">Use <code>#!/usr/bin/env bash</code> instead of <code>#!/bin/bash</code>.</p>
<ul dir="auto">
<li>The former searches the user's <code>PATH</code> to find the <code>bash</code> binary.</li>
<li>The latter assumes it is always installed to <code>/bin/</code> which can cause issues.</li>
</ul>
<p dir="auto"><strong>NOTE</strong>: There are times when one may have a good reason for using <code>#!/bin/bash</code> or another direct path to the binary.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Right:

    #!/usr/bin/env bash

# Less right:

    #!/bin/bash"><pre><span><span>#</span> Right:</span>

    <span><span>#!</span>/usr/bin/env bash</span>

<span><span>#</span> Less right:</span>

    <span><span>#!</span>/bin/bash</span></pre></div>
<h2 tabindex="-1" dir="auto">Command Substitution</h2>
<p dir="auto">Use <code>$()</code> instead of <code>` `</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Right.
var=&quot;$(command)&quot;

# Wrong.
var=`command`

# $() can easily be nested whereas `` cannot.
var=&quot;$(command &quot;$(command)&quot;)&quot;"><pre><span><span>#</span> Right.</span>
var=<span><span>"</span><span><span>$(</span>command<span>)</span></span><span>"</span></span>

<span><span>#</span> Wrong.</span>
var=<span><span>`</span>command<span>`</span></span>

<span><span>#</span> $() can easily be nested whereas `` cannot.</span>
var=<span><span>"</span><span><span>$(</span>command <span><span>"</span><span><span>$(</span>command<span>)</span></span><span>"</span></span><span>)</span></span><span>"</span></span></pre></div>
<h2 tabindex="-1" dir="auto">Function Declaration</h2>
<p dir="auto">Do not use the <code>function</code> keyword, it reduces compatibility with older versions of <code>bash</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Right.
do_something() {
    # ...
}

# Wrong.
function do_something() {
    # ...
}"><pre><span><span>#</span> Right.</span>
<span>do_something</span>() {
    <span><span>#</span> ...</span>
}

<span><span>#</span> Wrong.</span>
<span>function</span> <span>do_something()</span> {
    <span><span>#</span> ...</span>
}</pre></div>


<h2 tabindex="-1" dir="auto">INTERNAL VARIABLES</h2>
<h2 tabindex="-1" dir="auto">Get the location to the <code>bash</code> binary</h2>

<h2 tabindex="-1" dir="auto">Get the version of the current running <code>bash</code> process</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# As a string.
&quot;$BASH_VERSION&quot;

# As an array.
&quot;${BASH_VERSINFO[@]}&quot;"><pre><span><span>#</span> As a string.</span>
<span><span>"</span><span>$BASH_VERSION</span><span>"</span></span>

<span><span>#</span> As an array.</span>
<span><span>"</span><span>${BASH_VERSINFO[@]}</span><span>"</span></span></pre></div>
<h2 tabindex="-1" dir="auto">Open the user's preferred text editor</h2>
<div dir="auto" data-snippet-clipboard-copy-content="&quot;$EDITOR&quot; &quot;$file&quot;

# NOTE: This variable may be empty, set a fallback value.
&quot;${EDITOR:-vi}&quot; &quot;$file&quot;"><pre><span><span>"</span><span>$EDITOR</span><span>"</span></span> <span><span>"</span><span>$file</span><span>"</span></span>

<span><span>#</span> NOTE: This variable may be empty, set a fallback value.</span>
<span><span>"</span><span>${EDITOR<span>:-</span>vi}</span><span>"</span></span> <span><span>"</span><span>$file</span><span>"</span></span></pre></div>
<h2 tabindex="-1" dir="auto">Get the name of the current function</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# Current function.
&quot;${FUNCNAME[0]}&quot;

# Parent function.
&quot;${FUNCNAME[1]}&quot;

# So on and so forth.
&quot;${FUNCNAME[2]}&quot;
&quot;${FUNCNAME[3]}&quot;

# All functions including parents.
&quot;${FUNCNAME[@]}&quot;"><pre><span><span>#</span> Current function.</span>
<span><span>"</span><span>${FUNCNAME[0]}</span><span>"</span></span>

<span><span>#</span> Parent function.</span>
<span><span>"</span><span>${FUNCNAME[1]}</span><span>"</span></span>

<span><span>#</span> So on and so forth.</span>
<span><span>"</span><span>${FUNCNAME[2]}</span><span>"</span></span>
<span><span>"</span><span>${FUNCNAME[3]}</span><span>"</span></span>

<span><span>#</span> All functions including parents.</span>
<span><span>"</span><span>${FUNCNAME[@]}</span><span>"</span></span></pre></div>
<h2 tabindex="-1" dir="auto">Get the host-name of the system</h2>
<div dir="auto" data-snippet-clipboard-copy-content="&quot;$HOSTNAME&quot;

# NOTE: This variable may be empty.
# Optionally set a fallback to the hostname command.
&quot;${HOSTNAME:-$(hostname)}&quot;"><pre><span><span>"</span><span>$HOSTNAME</span><span>"</span></span>

<span><span>#</span> NOTE: This variable may be empty.</span>
<span><span>#</span> Optionally set a fallback to the hostname command.</span>
<span><span>"</span><span>${HOSTNAME<span>:-</span>$(hostname)}</span><span>"</span></span></pre></div>
<h2 tabindex="-1" dir="auto">Get the architecture of the Operating System</h2>

<h2 tabindex="-1" dir="auto">Get the name of the Operating System / Kernel</h2>
<p dir="auto">This can be used to add conditional support for different Operating
Systems without needing to call <code>uname</code>.</p>

<h2 tabindex="-1" dir="auto">Get the current working directory</h2>
<p dir="auto">This is an alternative to the <code>pwd</code> built-in.</p>

<h2 tabindex="-1" dir="auto">Get the number of seconds the script has been running</h2>

<h2 tabindex="-1" dir="auto">Get a pseudorandom integer</h2>
<p dir="auto">Each time <code>$RANDOM</code> is used, a different integer between <code>0</code> and <code>32767</code> is returned. This variable should not be used for anything related to security (<em>this includes encryption keys etc</em>).</p>



<h2 tabindex="-1" dir="auto">INFORMATION ABOUT THE TERMINAL</h2>
<h2 tabindex="-1" dir="auto">Get the terminal size in lines and columns (<em>from a script</em>)</h2>
<p dir="auto">This is handy when writing scripts in pure bash and <code>stty</code>/<code>tput</code> can‚Äôt be
called.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="get_term_size() {
    # Usage: get_term_size

    # (:;:) is a micro sleep to ensure the variables are
    # exported immediately.
    shopt -s checkwinsize; (:;:)
    printf '%s\n' &quot;$LINES $COLUMNS&quot;
}"><pre><span>get_term_size</span>() {
    <span><span>#</span> Usage: get_term_size</span>

    <span><span>#</span> (:;:) is a micro sleep to ensure the variables are</span>
    <span><span>#</span> exported immediately.</span>
    <span>shopt</span> -s checkwinsize<span>;</span> (:<span>;</span>:)
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$LINES</span> <span>$COLUMNS</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Output: LINES COLUMNS
$ get_term_size
15 55"><pre><span><span>#</span> Output: LINES COLUMNS</span>
$ get_term_size
15 55</pre></div>
<h2 tabindex="-1" dir="auto">Get the terminal size in pixels</h2>
<p dir="auto"><strong>CAVEAT</strong>: This does not work in some terminal emulators.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="get_window_size() {
    # Usage: get_window_size
    printf '%b' &quot;${TMUX:+\\ePtmux;\\e}\\e[14t${TMUX:+\\e\\\\}&quot;
    IFS=';t' read -d t -t 0.05 -sra term_size
    printf '%s\n' &quot;${term_size[1]}x${term_size[2]}&quot;
}"><pre><span>get_window_size</span>() {
    <span><span>#</span> Usage: get_window_size</span>
    <span>printf</span> <span><span>'</span>%b<span>'</span></span> <span><span>"</span><span>${TMUX<span>:</span>+<span>\\</span>ePtmux;<span>\\</span>e}</span><span>\\</span>e[14t<span>${TMUX<span>:</span>+<span>\\</span>e<span>\\\\</span>}</span><span>"</span></span>
    IFS=<span><span>'</span>;t<span>'</span></span> <span>read</span> -d t -t 0.05 -sra term_size
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${term_size[1]}</span>x<span>${term_size[2]}</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Output: WIDTHxHEIGHT
$ get_window_size
1200x800

# Output (fail):
$ get_window_size
x"><pre><span><span>#</span> Output: WIDTHxHEIGHT</span>
$ get_window_size
1200x800

<span><span>#</span> Output (fail):</span>
$ get_window_size
x</pre></div>
<h2 tabindex="-1" dir="auto">Get the current cursor position</h2>
<p dir="auto">This is useful when creating a TUI in pure bash.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="get_cursor_pos() {
    # Usage: get_cursor_pos
    IFS='[;' read -p $'\e[6n' -d R -rs _ y x _
    printf '%s\n' &quot;$x $y&quot;
}"><pre><span>get_cursor_pos</span>() {
    <span><span>#</span> Usage: get_cursor_pos</span>
    IFS=<span><span>'</span>[;<span>'</span></span> <span>read</span> -p <span><span>$'</span><span>\e</span>[6n<span>'</span></span> -d R -rs _ y x _
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$x</span> <span>$y</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Output: X Y
$ get_cursor_pos
1 8"><pre><span><span>#</span> Output: X Y</span>
$ get_cursor_pos
1 8</pre></div>


<h2 tabindex="-1" dir="auto">CONVERSION</h2>
<h2 tabindex="-1" dir="auto">Convert a hex color to RGB</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="hex_to_rgb() {
    # Usage: hex_to_rgb &quot;#FFFFFF&quot;
    #        hex_to_rgb &quot;000000&quot;
    : &quot;${1/\#}&quot;
    ((r=16#${_:0:2},g=16#${_:2:2},b=16#${_:4:2}))
    printf '%s\n' &quot;$r $g $b&quot;
}"><pre><span>hex_to_rgb</span>() {
    <span><span>#</span> Usage: hex_to_rgb "#FFFFFF"</span>
    <span><span>#</span>        hex_to_rgb "000000"</span>
    <span>:</span> <span><span>"</span><span>${1<span>/</span><span>\#</span>}</span><span>"</span></span>
    <span><span>((</span>r<span>=</span><span>16</span>#<span>${_<span>:</span>0<span>:</span>2}</span><span>,</span>g<span>=</span><span>16</span>#<span>${_<span>:</span>2<span>:</span>2}</span><span>,</span>b<span>=</span><span>16</span>#<span>${_<span>:</span>4<span>:</span>2}</span><span>))</span></span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$r</span> <span>$g</span> <span>$b</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ hex_to_rgb &quot;#FFFFFF&quot;
255 255 255"><pre>$ hex_to_rgb <span><span>"</span>#FFFFFF<span>"</span></span>
255 255 255</pre></div>
<h2 tabindex="-1" dir="auto">Convert an RGB color to hex</h2>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="rgb_to_hex() {
    # Usage: rgb_to_hex &quot;r&quot; &quot;g&quot; &quot;b&quot;
    printf '#%02x%02x%02x\n' &quot;$1&quot; &quot;$2&quot; &quot;$3&quot;
}"><pre><span>rgb_to_hex</span>() {
    <span><span>#</span> Usage: rgb_to_hex "r" "g" "b"</span>
    <span>printf</span> <span><span>'</span>#%02x%02x%02x\n<span>'</span></span> <span><span>"</span><span>$1</span><span>"</span></span> <span><span>"</span><span>$2</span><span>"</span></span> <span><span>"</span><span>$3</span><span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ rgb_to_hex &quot;255&quot; &quot;255&quot; &quot;255&quot;
#FFFFFF"><pre>$ rgb_to_hex <span><span>"</span>255<span>"</span></span> <span><span>"</span>255<span>"</span></span> <span><span>"</span>255<span>"</span></span>
<span><span>#</span>FFFFFF</span></pre></div>
<h2 tabindex="-1" dir="auto">CODE GOLF</h2>
<h2 tabindex="-1" dir="auto">Shorter <code>for</code> loop syntax</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# Tiny C Style.
for((;i++<10;)){ echo &quot;$i&quot;;}

# Undocumented method.
for i in {1..10};{ echo &quot;$i&quot;;}

# Expansion.
for i in {1..10}; do echo &quot;$i&quot;; done

# C Style.
for((i=0;i<=10;i++)); do echo &quot;$i&quot;; done"><pre><span><span>#</span> Tiny C Style.</span>
for<span><span>((</span>;i<span>++&lt;</span><span>10</span>;<span>))</span></span>{ <span>echo</span> <span><span>"</span><span>$i</span><span>"</span></span><span>;</span>}

<span><span>#</span> Undocumented method.</span>
<span>for</span> <span>i</span> <span>in</span> {1..10}<span>;</span>{ <span>echo</span> <span><span>"</span><span>$i</span><span>"</span></span><span>;</span>}

<span><span>#</span> Expansion.</span>
<span>for</span> <span>i</span> <span>in</span> {1..10}<span>;</span> <span>do</span> <span>echo</span> <span><span>"</span><span>$i</span><span>"</span></span><span>;</span> <span>done</span>

<span><span>#</span> C Style.</span>
for<span><span>((</span>i<span>=</span><span>0</span>;i<span>&lt;=</span><span>10</span>;i<span>++</span><span>))</span></span><span>;</span> <span>do</span> <span>echo</span> <span><span>"</span><span>$i</span><span>"</span></span><span>;</span> <span>done</span></pre></div>
<h2 tabindex="-1" dir="auto">Shorter infinite loops</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# Normal method
while :; do echo hi; done

# Shorter
for((;;)){ echo hi;}"><pre><span><span>#</span> Normal method</span>
<span>while</span> <span>:</span><span>;</span> <span>do</span> <span>echo</span> hi<span>;</span> <span>done</span>

<span><span>#</span> Shorter</span>
for<span><span>((</span>;;<span>))</span></span>{ <span>echo</span> hi<span>;</span>}</pre></div>
<h2 tabindex="-1" dir="auto">Shorter function declaration</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# Normal method
f(){ echo hi;}

# Using a subshell
f()(echo hi)

# Using arithmetic
# This can be used to assign integer values.
# Example: f a=1
#          f a++
f()(($1))

# Using tests, loops etc.
# NOTE: ‚Äòwhile‚Äô, ‚Äòuntil‚Äô, ‚Äòcase‚Äô, ‚Äò(())‚Äô, ‚Äò[[]]‚Äô can also be used.
f()if true; then echo &quot;$1&quot;; fi
f()for i in &quot;$@&quot;; do echo &quot;$i&quot;; done"><pre><span><span>#</span> Normal method</span>
<span>f</span>(){ <span>echo</span> hi;}

<span><span>#</span> Using a subshell</span>
<span>f</span>()(echo hi)

<span><span>#</span> Using arithmetic</span>
<span><span>#</span> This can be used to assign integer values.</span>
<span><span>#</span> Example: f a=1</span>
<span><span>#</span>          f a++</span>
<span>f</span>()<span><span>((</span><span>$1</span><span>))</span></span>

<span><span>#</span> Using tests, loops etc.</span>
<span><span>#</span> NOTE: ‚Äòwhile‚Äô, ‚Äòuntil‚Äô, ‚Äòcase‚Äô, ‚Äò(())‚Äô, ‚Äò[[]]‚Äô can also be used.</span>
<span>f</span>()if <span>true</span>; <span>then</span> <span>echo</span> <span><span>"</span><span>$1</span><span>"</span></span><span>;</span> <span>fi</span>
<span>f</span>()for i <span>in</span> <span><span>"</span><span>$@</span><span>"</span></span>; <span>do</span> <span>echo</span> <span><span>"</span><span>$i</span><span>"</span></span><span>;</span> <span>done</span></pre></div>
<h2 tabindex="-1" dir="auto">Shorter <code>if</code> syntax</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# One line
# Note: The 3rd statement may run when the 1st is true
[[ $var == hello ]] &amp;&amp; echo hi || echo bye
[[ $var == hello ]] &amp;&amp; { echo hi; echo there; } || echo bye

# Multi line (no else, single statement)
# Note: The exit status may not be the same as with an if statement
[[ $var == hello ]] &amp;&amp;
    echo hi

# Multi line (no else)
[[ $var == hello ]] &amp;&amp; {
    echo hi
    # ...
}"><pre><span><span>#</span> One line</span>
<span><span>#</span> Note: The 3rd statement may run when the 1st is true</span>
[[ <span>$var</span> <span>==</span> hello ]] <span>&amp;&amp;</span> <span>echo</span> hi <span>||</span> <span>echo</span> bye
[[ <span>$var</span> <span>==</span> hello ]] <span>&amp;&amp;</span> { <span>echo</span> hi<span>;</span> <span>echo</span> there<span>;</span> } <span>||</span> <span>echo</span> bye

<span><span>#</span> Multi line (no else, single statement)</span>
<span><span>#</span> Note: The exit status may not be the same as with an if statement</span>
[[ <span>$var</span> <span>==</span> hello ]] <span>&amp;&amp;</span>
    <span>echo</span> hi

<span><span>#</span> Multi line (no else)</span>
[[ <span>$var</span> <span>==</span> hello ]] <span>&amp;&amp;</span> {
    <span>echo</span> hi
    <span><span>#</span> ...</span>
}</pre></div>
<h2 tabindex="-1" dir="auto">Simpler <code>case</code> statement to set variable</h2>
<p dir="auto">The <code>:</code> built-in can be used to avoid repeating <code>variable=</code> in a case statement. The <code>$_</code> variable stores the last argument of the last command. <code>:</code> always succeeds so it can be used to store the variable value.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Modified snippet from Neofetch.
case &quot;$OSTYPE&quot; in
    &quot;darwin&quot;*)
        : &quot;MacOS&quot;
    ;;

    &quot;linux&quot;*)
        : &quot;Linux&quot;
    ;;

    *&quot;bsd&quot;* | &quot;dragonfly&quot; | &quot;bitrig&quot;)
        : &quot;BSD&quot;
    ;;

    &quot;cygwin&quot; | &quot;msys&quot; | &quot;win32&quot;)
        : &quot;Windows&quot;
    ;;

    *)
        printf '%s\n' &quot;Unknown OS detected, aborting...&quot; >&amp;2
        exit 1
    ;;
esac

# Finally, set the variable.
os=&quot;$_&quot;"><pre><span><span>#</span> Modified snippet from Neofetch.</span>
<span>case</span> <span><span>"</span><span>$OSTYPE</span><span>"</span></span> <span>in</span>
    <span><span>"</span>darwin<span>"</span></span><span>*</span>)
        <span>:</span> <span><span>"</span>MacOS<span>"</span></span>
    ;;

    <span><span>"</span>linux<span>"</span></span><span>*</span>)
        <span>:</span> <span><span>"</span>Linux<span>"</span></span>
    ;;

    <span>*</span><span><span>"</span>bsd<span>"</span></span><span>*</span> | <span><span>"</span>dragonfly<span>"</span></span> | <span><span>"</span>bitrig<span>"</span></span>)
        <span>:</span> <span><span>"</span>BSD<span>"</span></span>
    ;;

    <span><span>"</span>cygwin<span>"</span></span> | <span><span>"</span>msys<span>"</span></span> | <span><span>"</span>win32<span>"</span></span>)
        <span>:</span> <span><span>"</span>Windows<span>"</span></span>
    ;;

    <span>*</span>)
        <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>Unknown OS detected, aborting...<span>"</span></span> <span>&gt;&amp;2</span>
        <span>exit</span> 1
    ;;
<span>esac</span>

<span><span>#</span> Finally, set the variable.</span>
os=<span><span>"</span><span>$_</span><span>"</span></span></pre></div>


<h2 tabindex="-1" dir="auto">OTHER</h2>
<h2 tabindex="-1" dir="auto">Use <code>read</code> as an alternative to the <code>sleep</code> command</h2>
<p dir="auto">Surprisingly, <code>sleep</code> is an external command and not a <code>bash</code> built-in.</p>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="read_sleep() {
    # Usage: read_sleep 1
    #        read_sleep 0.2
    read -rt &quot;$1&quot; <> <(:) || :
}"><pre><span>read_sleep</span>() {
    <span><span>#</span> Usage: read_sleep 1</span>
    <span><span>#</span>        read_sleep 0.2</span>
    <span>read</span> -rt <span><span>"</span><span>$1</span><span>"</span></span> <span>&lt;&gt;</span> <span><span>&lt;(</span>:<span>)</span></span> <span>||</span> <span>:</span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="read_sleep 1
read_sleep 0.1
read_sleep 30"><pre>read_sleep 1
read_sleep 0.1
read_sleep 30</pre></div>
<p dir="auto">For performance-critical situations, where it is not economic to open and close an excessive number of file descriptors, the allocation of a file descriptor may be done only once for all invocations of <code>read</code>:</p>
<p dir="auto">(See the generic original implementation at <a href="https://blog.dhampir.no/content/sleeping-without-a-subprocess-in-bash-and-how-to-sleep-forever" rel="nofollow">https://blog.dhampir.no/content/sleeping-without-a-subprocess-in-bash-and-how-to-sleep-forever</a>)</p>
<div dir="auto" data-snippet-clipboard-copy-content="exec {sleep_fd}<> <(:)
while some_quick_test; do
    # equivalent of sleep 0.001
    read -t 0.001 -u $sleep_fd
done"><pre><span>exec</span> {sleep_fd}<span>&lt;&gt;</span> <span><span>&lt;(</span>:<span>)</span></span>
<span>while</span> some_quick_test<span>;</span> <span>do</span>
    <span><span>#</span> equivalent of sleep 0.001</span>
    <span>read</span> -t 0.001 -u <span>$sleep_fd</span>
<span>done</span></pre></div>
<h2 tabindex="-1" dir="auto">Check if a program is in the user's PATH</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# There are 3 ways to do this and either one can be used.
type -p executable_name &amp;>/dev/null
hash executable_name &amp;>/dev/null
command -v executable_name &amp;>/dev/null

# As a test.
if type -p executable_name &amp;>/dev/null; then
    # Program is in PATH.
fi

# Inverse.
if ! type -p executable_name &amp;>/dev/null; then
    # Program is not in PATH.
fi

# Example (Exit early if program is not installed).
if ! type -p convert &amp;>/dev/null; then
    printf '%s\n' &quot;error: convert is not installed, exiting...&quot;
    exit 1
fi"><pre><span><span>#</span> There are 3 ways to do this and either one can be used.</span>
<span>type</span> -p executable_name <span>&amp;</span><span>&gt;</span>/dev/null
<span>hash</span> executable_name <span>&amp;</span><span>&gt;</span>/dev/null
<span>command</span> -v executable_name <span>&amp;</span><span>&gt;</span>/dev/null

<span><span>#</span> As a test.</span>
<span>if</span> <span>type</span> -p executable_name <span>&amp;</span><span>&gt;</span>/dev/null<span>;</span> <span>then</span>
    <span><span>#</span> Program is in PATH.</span>
<span>fi</span>

<span><span>#</span> Inverse.</span>
<span>if</span> <span>!</span> <span>type</span> -p executable_name <span>&amp;</span><span>&gt;</span>/dev/null<span>;</span> <span>then</span>
    <span><span>#</span> Program is not in PATH.</span>
<span>fi</span>

<span><span>#</span> Example (Exit early if program is not installed).</span>
<span>if</span> <span>!</span> <span>type</span> -p convert <span>&amp;</span><span>&gt;</span>/dev/null<span>;</span> <span>then</span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span>error: convert is not installed, exiting...<span>"</span></span>
    <span>exit</span> 1
<span>fi</span></pre></div>
<h2 tabindex="-1" dir="auto">Get the current date using <code>strftime</code></h2>
<p dir="auto">Bash‚Äôs <code>printf</code> has a built-in method of getting the date which can be used in place of the <code>date</code> command.</p>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="date() {
    # Usage: date &quot;format&quot;
    # See: 'man strftime' for format.
    printf &quot;%($1)T\\n&quot; &quot;-1&quot;
}"><pre><span>date</span>() {
    <span><span>#</span> Usage: date "format"</span>
    <span><span>#</span> See: 'man strftime' for format.</span>
    <span>printf</span> <span><span>"</span>%(<span>$1</span>)T<span>\\</span>n<span>"</span></span> <span><span>"</span>-1<span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Using above function.
$ date &quot;%a %d %b  - %l:%M %p&quot;
Fri 15 Jun  - 10:00 AM

# Using printf directly.
$ printf '%(%a %d %b  - %l:%M %p)T\n' &quot;-1&quot;
Fri 15 Jun  - 10:00 AM

# Assigning a variable using printf.
$ printf -v date '%(%a %d %b  - %l:%M %p)T\n' '-1'
$ printf '%s\n' &quot;$date&quot;
Fri 15 Jun  - 10:00 AM"><pre><span><span>#</span> Using above function.</span>
$ date <span><span>"</span>%a %d %b  - %l:%M %p<span>"</span></span>
Fri 15 Jun  - 10:00 AM

<span><span>#</span> Using printf directly.</span>
$ <span>printf</span> <span><span>'</span>%(%a %d %b  - %l:%M %p)T\n<span>'</span></span> <span><span>"</span>-1<span>"</span></span>
Fri 15 Jun  - 10:00 AM

<span><span>#</span> Assigning a variable using printf.</span>
$ <span>printf</span> -v date <span><span>'</span>%(%a %d %b  - %l:%M %p)T\n<span>'</span></span> <span><span>'</span>-1<span>'</span></span>
$ <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>$date</span><span>"</span></span>
Fri 15 Jun  - 10:00 AM</pre></div>
<h2 tabindex="-1" dir="auto">Get the username of the current user</h2>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4.4+</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ : \\u
# Expand the parameter as if it were a prompt string.
$ printf '%s\n' &quot;${_@P}&quot;
black"><pre>$ <span>:</span> <span>\\</span>u
<span><span>#</span> Expand the parameter as if it were a prompt string.</span>
$ <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${_<span>@</span>P}</span><span>"</span></span>
black</pre></div>
<h2 tabindex="-1" dir="auto">Generate a UUID V4</h2>
<p dir="auto"><strong>CAVEAT</strong>: The generated value is not cryptographically secure.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="uuid() {
    # Usage: uuid
    C=&quot;89ab&quot;

    for ((N=0;N<16;++N)); do
        B=&quot;$((RANDOM%256))&quot;

        case &quot;$N&quot; in
            6)  printf '4%x' &quot;$((B%16))&quot; ;;
            8)  printf '%c%x' &quot;${C:$RANDOM%${#C}:1}&quot; &quot;$((B%16))&quot; ;;

            3|5|7|9)
                printf '%02x-' &quot;$B&quot;
            ;;

            *)
                printf '%02x' &quot;$B&quot;
            ;;
        esac
    done

    printf '\n'
}"><pre><span>uuid</span>() {
    <span><span>#</span> Usage: uuid</span>
    C=<span><span>"</span>89ab<span>"</span></span>

    <span>for</span> <span><span>((</span>N<span>=</span><span>0</span>;N<span>&lt;</span><span>16</span>;<span>++</span>N<span>))</span></span><span>;</span> <span>do</span>
        B=<span><span>"</span><span><span>$((</span>RANDOM<span>%</span><span>256</span><span>))</span></span><span>"</span></span>

        <span>case</span> <span><span>"</span><span>$N</span><span>"</span></span> <span>in</span>
            6)  <span>printf</span> <span><span>'</span>4%x<span>'</span></span> <span><span>"</span><span><span>$((</span>B<span>%</span><span>16</span><span>))</span></span><span>"</span></span> ;;
            8)  <span>printf</span> <span><span>'</span>%c%x<span>'</span></span> <span><span>"</span><span>${C<span>:</span><span>$RANDOM</span><span>%</span><span>${<span>#</span>C}</span><span>:</span>1}</span><span>"</span></span> <span><span>"</span><span><span>$((</span>B<span>%</span><span>16</span><span>))</span></span><span>"</span></span> ;;

            3|5|7|9)
                <span>printf</span> <span><span>'</span>%02x-<span>'</span></span> <span><span>"</span><span>$B</span><span>"</span></span>
            ;;

            <span>*</span>)
                <span>printf</span> <span><span>'</span>%02x<span>'</span></span> <span><span>"</span><span>$B</span><span>"</span></span>
            ;;
        <span>esac</span>
    <span>done</span>

    <span>printf</span> <span><span>'</span>\n<span>'</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ uuid
d5b6c731-1310-4c24-9fe3-55d556d44374"><pre>$ uuid
d5b6c731-1310-4c24-9fe3-55d556d44374</pre></div>
<h2 tabindex="-1" dir="auto">Progress bars</h2>
<p dir="auto">This is a simple way of drawing progress bars without needing a for loop
in the function itself.</p>
<p dir="auto"><strong>Example Function:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="bar() {
    # Usage: bar 1 10
    #            ^----- Elapsed Percentage (0-100).
    #               ^-- Total length in chars.
    ((elapsed=$1*$2/100))

    # Create the bar with spaces.
    printf -v prog  &quot;%${elapsed}s&quot;
    printf -v total &quot;%$(($2-elapsed))s&quot;

    printf '%s\r' &quot;[${prog// /-}${total}]&quot;
}"><pre><span>bar</span>() {
    <span><span>#</span> Usage: bar 1 10</span>
    <span><span>#</span>            ^----- Elapsed Percentage (0-100).</span>
    <span><span>#</span>               ^-- Total length in chars.</span>
    <span><span>((</span>elapsed<span>=</span><span>$1</span><span>*</span><span>$2</span><span>/</span><span>100</span><span>))</span></span>

    <span><span>#</span> Create the bar with spaces.</span>
    <span>printf</span> -v prog  <span><span>"</span>%<span>${elapsed}</span>s<span>"</span></span>
    <span>printf</span> -v total <span><span>"</span>%<span><span>$((</span><span>$2</span><span>-</span>elapsed<span>))</span></span>s<span>"</span></span>

    <span>printf</span> <span><span>'</span>%s\r<span>'</span></span> <span><span>"</span>[<span>${prog<span>//</span> <span>/</span>-}${total}</span>]<span>"</span></span>
}</pre></div>
<p dir="auto"><strong>Example Usage:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="for ((i=0;i<=100;i++)); do
    # Pure bash micro sleeps (for the example).
    (:;:) &amp;&amp; (:;:) &amp;&amp; (:;:) &amp;&amp; (:;:) &amp;&amp; (:;:)

    # Print the bar.
    bar &quot;$i&quot; &quot;10&quot;
done

printf '\n'"><pre><span>for</span> <span><span>((</span>i<span>=</span><span>0</span>;i<span>&lt;=</span><span>100</span>;i<span>++</span><span>))</span></span><span>;</span> <span>do</span>
    <span><span>#</span> Pure bash micro sleeps (for the example).</span>
    (:<span>;</span>:) <span>&amp;&amp;</span> (:<span>;</span>:) <span>&amp;&amp;</span> (:<span>;</span>:) <span>&amp;&amp;</span> (:<span>;</span>:) <span>&amp;&amp;</span> (:<span>;</span>:)

    <span><span>#</span> Print the bar.</span>
    bar <span><span>"</span><span>$i</span><span>"</span></span> <span><span>"</span>10<span>"</span></span>
<span>done</span>

<span>printf</span> <span><span>'</span>\n<span>'</span></span></pre></div>
<h2 tabindex="-1" dir="auto">Get the list of functions in a script</h2>
<div dir="auto" data-snippet-clipboard-copy-content="get_functions() {
    # Usage: get_functions
    IFS=$'\n' read -d &quot;&quot; -ra functions < <(declare -F)
    printf '%s\n' &quot;${functions[@]//declare -f }&quot;
}"><pre><span>get_functions</span>() {
    <span><span>#</span> Usage: get_functions</span>
    IFS=<span><span>$'</span><span>\n</span><span>'</span></span> <span>read</span> -d <span><span>"</span><span>"</span></span> -ra functions <span>&lt;</span> <span><span>&lt;(</span>declare -F<span>)</span></span>
    <span>printf</span> <span><span>'</span>%s\n<span>'</span></span> <span><span>"</span><span>${functions[@]<span>//</span>declare -f }</span><span>"</span></span>
}</pre></div>
<h2 tabindex="-1" dir="auto">Bypass shell aliases</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# alias
ls

# command
# shellcheck disable=SC1001
\ls"><pre><span><span>#</span> alias</span>
ls

<span><span>#</span> command</span>
<span><span>#</span> shellcheck disable=SC1001</span>
<span>\l</span>s</pre></div>
<h2 tabindex="-1" dir="auto">Bypass shell functions</h2>
<div dir="auto" data-snippet-clipboard-copy-content="# function
ls

# command
command ls"><pre><span><span>#</span> function</span>
ls

<span><span>#</span> command</span>
<span>command</span> ls</pre></div>
<h2 tabindex="-1" dir="auto">Run a command in the background</h2>
<p dir="auto">This will run the given command and keep it running, even after the terminal or SSH connection is terminated. All output is ignored.</p>
<div dir="auto" data-snippet-clipboard-copy-content="bkr() {
    (nohup &quot;$@&quot; &amp;>/dev/null &amp;)
}

bkr ./some_script.sh # some_script.sh is now running in the background"><pre><span>bkr</span>() {
    (nohup <span><span>"</span><span>$@</span><span>"</span></span> <span>&amp;</span><span>&gt;</span>/dev/null <span>&amp;</span>)
}

bkr ./some_script.sh <span><span>#</span> some_script.sh is now running in the background</span></pre></div>
<h2 tabindex="-1" dir="auto">Capture the return value of a function without command substitution</h2>
<p dir="auto"><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p dir="auto">This uses local namerefs to avoid using <code>var=$(some_func)</code> style command substitution for function output capture.</p>
<div dir="auto" data-snippet-clipboard-copy-content="to_upper() {
  local -n ptr=${1}

  ptr=${ptr^^}
}

foo=&quot;bar&quot;
to_upper foo
printf &quot;%s\n&quot; &quot;${foo}&quot; # BAR"><pre><span>to_upper</span>() {
  <span>local</span> -n ptr=<span>${1}</span>

  ptr=<span>${ptr^^}</span>
}

foo=<span><span>"</span>bar<span>"</span></span>
to_upper foo
<span>printf</span> <span><span>"</span>%s\n<span>"</span></span> <span><span>"</span><span>${foo}</span><span>"</span></span> <span><span>#</span> BAR</span></pre></div>

<h2 tabindex="-1" dir="auto">AFTERWORD</h2>
<p dir="auto">Thanks for reading! If this bible helped you in any way and you'd like to give back, consider donating. Donations give me the time to make this the best resource possible. Can't donate? That's OK, star the repo and share it with your friends!</p>
<p dir="auto"><a href="https://www.patreon.com/dyla" rel="nofollow"><img src="https://camo.githubusercontent.com/a1058908722b7ab43ef7088cb4af336c109dba99427310c1360a81a1a104e828/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f6e6174652d70617472656f6e2d79656c6c6f772e737667" data-canonical-src="https://img.shields.io/badge/donate-patreon-yellow.svg"></a></p>
<p dir="auto">Rock on. ü§ò</p>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Testing Intel‚Äôs Arc A770 GPU for Deep Learning (189 pts)]]></title>
            <link>https://christianjmills.com/posts/arc-a770-testing/part-2/</link>
            <guid>37057332</guid>
            <pubDate>Wed, 09 Aug 2023 00:35:40 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://christianjmills.com/posts/arc-a770-testing/part-2/">https://christianjmills.com/posts/arc-a770-testing/part-2/</a>, See on <a href="https://news.ycombinator.com/item?id=37057332">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="quarto-content">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main id="quarto-document-content">



<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#initial-headaches">Initial Headaches</a></li>
<li><a href="#training-performance-on-native-ubuntu">Training Performance on Native Ubuntu</a></li>
<li><a href="#training-performance-on-wsl">Training Performance on WSL</a></li>
<li><a href="#closing-thoughts">Closing Thoughts</a></li>
</ul>
<section id="series-links">
<h2 data-anchor-id="series-links">Series Links</h2>
<ul>
<li><a href="https://christianjmills.com/posts/arc-a770-testing/part-1/">Part 1</a>: I tested inference performance with OpenVINO and DirectML on the A770 and attempted to train models using PyTorch-DirectML.</li>
<li><a href="https://christianjmills.com/posts/arc-a770-testing/part-2/">Part 2</a>: I trained image classification models with Intel‚Äôs PyTorch extension on the Arc A770 GPU.</li>
<li><a href="https://christianjmills.com/posts/arc-a770-testing/part-3/">Part 3</a>: I trained style transfer models and ran Stable Diffusion 2.1 using ü§ó Diffusers with Intel‚Äôs PyTorch extension on the Arc A770.</li>
<li><a href="https://christianjmills.com/posts/intel-pytorch-extension-tutorial/native-ubuntu/">Getting Started with Intel‚Äôs PyTorch Extension for Arc GPUs on Ubuntu</a>: This tutorial provides a step-by-step guide to setting up Intel‚Äôs PyTorch extension on Ubuntu to train models with Arc GPUs</li>
</ul>
</section>
<section id="introduction">
<h2 data-anchor-id="introduction">Introduction</h2>
<p><a href="https://christianjmills.com/posts/arc-a770-testing/part-1/">Last October</a>, I wrote about my findings from testing the inference performance of Intel‚Äôs <a href="https://www.intel.com/content/www/us/en/products/sku/229151/intel-arc-a770-graphics-16gb/specifications.html">Arc A770</a> GPU using <a href="https://docs.openvino.ai/2022.3/home.html">OpenVINO</a> and <a href="https://learn.microsoft.com/en-us/windows/ai/directml/dml">DirectML</a>. I also attempted to train various models with the <a href="https://pypi.org/project/pytorch-directml/">PyTorch-DirectML</a> package. The card did well on inference, especially with Intel‚Äôs OpenVINO library. However, the PyTorch-DirectML package was incomplete, and I could not adequately test the card‚Äôs training performance.</p>
<p>Shortly after that post, Intel released an <a href="https://github.com/intel/intel-extension-for-pytorch/releases/tag/v1.10.200%2Bgpu">extension for PyTorch</a>, which added support for Intel GPUs. Based on my initial testing, I decided the extension was not in a state that warranted a follow-up post. In hindsight, I don‚Äôt believe the initial release officially supported Arc GPUs. The <a href="https://intel.github.io/intel-extension-for-pytorch/xpu/1.10.200+gpu/tutorials/installation.html#hardware-requirement">installation guide</a> for that version only mentions data center GPUs.</p>
<p>Since then, Intel has released a couple of updates for the extension, the most <a href="https://github.com/intel/intel-extension-for-pytorch/releases/tag/v1.13.120%2Bxpu">recent</a> being about a month ago at the time of writing. Unlike the initial release, this version lists Arc GPUs as having <a href="https://intel.github.io/intel-extension-for-pytorch/xpu/1.13.120+xpu/tutorials/installation.html#hardware-requirement">experimental support</a>. Given that and the driver improvements for Windows and Linux, I decided to pop the A770 back into my desktop and give it another shot. In short, it works now.</p>
<p>In this post, I discuss my experience getting Intel‚Äôs PyTorch extension running on Ubuntu and Windows Subsystem for Linux (WSL). I also cover my initial findings from training models. I‚Äôll provide a tutorial for setting up and using the extension in a dedicated post.</p>
<ul>
<li><a href="https://christianjmills.com/posts/intel-pytorch-extension-tutorial/native-ubuntu/">Getting Started with Intel‚Äôs PyTorch Extension for Arc GPUs on Ubuntu</a></li>
</ul>
</section>
<section id="initial-headaches">
<h2 data-anchor-id="initial-headaches">Initial Headaches</h2>
<p>To be blunt, my initial attempts to get this working were a bit of a nightmare. The instructions required to enable support for Arc GPUs on Ubuntu and set up Intel‚Äôs PyTorch extension span across multiple sites and are sometimes contradictory. The instructions on some sites are outdated to the point of being impossible to follow.</p>
<p>For example, Intel‚Äôs Arc Graphics Driver for Ubuntu <a href="https://www.intel.com/content/www/us/en/download/747008/intel-arc-graphics-driver-ubuntu.html">page</a> provided a link to a separate documentation site with driver installation instructions.</p>
<div>
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/intel-arc-graphics-driver-ubuntu-page.png"></p>
</figure>
</div>
<p>The instructions on the documentation site say to <a href="https://dgpu-docs.intel.com/installation-guides/ubuntu/ubuntu-jammy-arc.html#step-2-install-linux-kernel">install a specific Linux kernel</a>, <code>5.19.0-35</code>, which is <a href="https://www.ubuntuupdates.org/package/core/jammy/main/updates/linux-image-5.19.0-35-generic">no longer available</a>.</p>
<div>
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/intel-dgpu-docs-ubuntu-driver-installation-instructions-install-kernel.png"></p>
</figure>
</div>
<p>Still, I attempted to follow the instructions on a new Ubuntu 22.04 install and a more recent <code>5.19</code> kernel. Trying to boot into Ubuntu on the Arc card with the <code>5.19</code> kernel results in the following error:</p>
<div id="cb1"><pre><code><span id="cb1-1"><span>snd_hda_intel</span> 0000:04:00.0 hsw/bdw hd-audio hdmi/dp requires binding with gfx driver</span></code></pre></div>
<p>The error is a known issue, and Intel even has a <a href="https://www.intel.com/content/www/us/en/support/articles/000092607/graphics.html">troubleshooting page</a> with a proposed workaround. Unfortunately, disabling the ‚ÄúIntegrated graphics Multi-Monitor‚Äù BIOS option, as the page recommends, did not resolve the issue.</p>
<p>I decided to continue following the instructions on integrated graphics and see if I could use the Arc card once I installed all the driver packages. That attempt went so poorly that I had to pop out the motherboard‚Äôs CMOS battery to reset the BIOS.</p>
<p>I made several more attempts, which failed at various stages. Fortunately, I eventually got everything working, and my current setup process is pretty straightforward.</p>
<p>I ended up needing Linux kernel <code>6.2</code> or newer. That kernel version <a href="https://www.phoronix.com/news/Linux-6.2-Released">supports the Arc card</a> out of the box. You can install that kernel on Ubuntu 22.04, but I recommend just going with Ubuntu 23.04 (or newer) if starting from a fresh install. Ubuntu 23.04 already has a kernel version <code>‚â•6.2</code>, and I verified it works with Intel‚Äôs PyTorch extension.</p>
<p>As mentioned earlier, I‚Äôll provide detailed instructions for the setup process in a dedicated post.</p>
</section>
<section id="training-performance-on-native-ubuntu">
<h2 data-anchor-id="training-performance-on-native-ubuntu">Training Performance on Native Ubuntu</h2>
<p>I used the training notebook from my recent <a href="https://christianjmills.com/posts/pytorch-train-image-classifier-timm-hf-tutorial/">beginner PyTorch tutorial</a> for testing. That tutorial covers fine-tuning image classification models with PyTorch and the timm library by creating a hand gesture recognizer. Using the training notebook simplifies directly comparing the Arc A770 and my Titan RTX, which I used to create the tutorial. Nearly everything is identical for the testing environment down to the dataset location.</p>
<p>The one additional variable is that the tutorial uses PyTorch 2.0, while Intel‚Äôs PyTorch extension currently requires a <a href="https://intel.github.io/intel-extension-for-pytorch/xpu/latest/tutorials/installation.html#pytorch-intel-extension-for-pytorch-version-mapping">patched version</a> of PyTorch 1.13. However, I don‚Äôt use model compilation in the tutorial, so this should not be a significant factor.</p>
<p>The training notebook only required a few tweaks to use Intel‚Äôs PyTorch extension, with most of the code remaining unchanged. The extension even supports PyTorch‚Äôs <code>autocast()</code> context manager for mixed-precision training.</p>
<p>The first training session was alarmingly slow, with the first pass through the training set taking around 42 minutes and 30 seconds. However, the loss and accuracy values were comparable to those with the Titan RTX, so I let it run for a while. After the first epoch, passes through the training set fell to approximately 16 minutes and 50 seconds. The total training time was only a few minutes less than the free GPU tier on Google Colab. Strangely, the inference speed on the validation set was nearly identical to the Titan RTX.</p>
<div>
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/arc-a770-pytorch-training-session-ubuntu-bad-memory-layout.png"></p>
</figure>
</div>
<p>We can get more insight into using the <code>intel-gpu-top</code> command-line tool. Below are the readouts from the first and third passes through the training set:</p>
<div>
<ul role="tablist"><li role="presentation"><a id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">First Pass</a></li><li role="presentation"><a id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Third Pass</a></li></ul>
<div>
<div id="tabset-1-1" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/intel-gpu-top-arc-a770-usage-training-bad-memory-layout.png"></p>
</figure>
</div>
<div id="tabset-1-2" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/intel-gpu-top-arc-a770-usage-training-bad-memory-layout-third-epoch.png"></p>
</figure>
</div>
</div>
</div>
<p>Note that the memory throughput for the first training pass is particularly low. Although, the third pass is not great, either.</p>
<p>After some investigation on the <a href="https://github.com/intel/intel-extension-for-pytorch/issues/296#issuecomment-1426537682">extension‚Äôs GitHub repository</a>, it appears the slow training time is due to the backward pass for some operations. Fortunately, the fix involved setting a <a href="https://github.com/intel/intel-extension-for-pytorch/issues/296#issuecomment-1461118993">single environment variable</a>.</p>
<p>After setting <code>IPEX_XPU_ONEDNN_LAYOUT=1</code>, the total training time is within 10% of my Titan RTX on the same system. The gap would be slightly wider if I compiled the model on the Titan with PyTorch 2.0.</p>
<p>We can see the difference with <code>intel-gpu-top</code>, which shows much higher memory throughput.</p>
<div>
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/intel-gpu-top-arc-a770-usage-training.png"></p>
</figure>
</div>
<p>The final loss and accuracy values fluctuate slightly, even when using fixed seed values for PyTorch, NumPy, and Python. However, they stay pretty close to the results on my Nvidia GPU.</p>
<p>Here is a screenshot of the training session with the Arc A770:</p>
<div>
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/arc-a770-pytorch-training-session-ubuntu.png"></p>
</figure>
</div>
<p>Here is a link to the training session with the Titan RTX:</p>
<ul>
<li><a href="https://christianjmills.com/posts/pytorch-train-image-classifier-timm-hf-tutorial/#train-the-model">Titan RTX training session</a></li>
</ul>
<pre><code>Epochs: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 3/3 [11:15&lt;00:00, 224.96s/it]
Train: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 4324/4324 [03:29&lt;00:00, 21.75it/s, accuracy=0.894, avg_loss=0.374, loss=0.0984, lr=0.000994]
Eval: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 481/481 [00:17&lt;00:00, 50.42it/s, accuracy=0.975, avg_loss=0.081, loss=0.214, lr=]
Train: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 4324/4324 [03:28&lt;00:00, 22.39it/s, accuracy=0.968, avg_loss=0.105, loss=0.0717, lr=0.000462]
Eval: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 481/481 [00:16&lt;00:00, 55.14it/s, accuracy=0.988, avg_loss=0.0354, loss=0.02, lr=]
Train: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 4324/4324 [03:28&lt;00:00, 21.94it/s, accuracy=0.99, avg_loss=0.0315, loss=0.00148, lr=4.03e-9]
Eval: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 481/481 [00:16&lt;00:00, 53.87it/s, accuracy=0.995, avg_loss=0.0173, loss=0.000331, lr=]</code></pre>
<p>The training sessions for the A770 and the Titan both used mixed precision.</p>
<p>I also tested training on the Arc card with the newer 6.3 Linux kernel but did not see a notable performance difference versus the 6.2 Linux kernel.</p>
<p>Since Intel‚Äôs extension only recently added support for Arc cards, more performance may get unlocked in future updates. However, getting so close to the Titan RTX was already more than I had hoped.</p>
<p>I decided to move on and see how the extension performed in WSL.</p>
</section>
<section id="training-performance-on-wsl">
<h2 data-anchor-id="training-performance-on-wsl">Training Performance on WSL</h2>
<p>Now that I had a streamlined process for setting everything up on Ubuntu, getting WSL up and running was easy. It only required a subset of the steps compared to a bare-metal Ubuntu installation. I used the default <a href="https://apps.microsoft.com/store/detail/ubuntu/9PDXGNCFSCZV">Ubuntu terminal environment</a> and stuck with the included kernel.</p>
<p>Total training time in WSL is <code>‚âà34%</code> slower than in native Ubuntu with the dataset in the same virtual hard disk (VHD) that stores the WSL-Ubuntu install.</p>
<div>
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/arc-a770-pytorch-training-session-wsl.png"></p>
</figure>
</div>
<p>I remember getting a similar performance hit the last time I used WSL with the Titan RTX. It‚Äôs one of the reasons I prefer to dual-boot Windows and Ubuntu.</p>
<p>Here is a screenshot of the GPU usage when running the training notebook on the A770 in WSL:</p>
<div>
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/task-manager-pytorch-arc-a770-wsl-gpu-usage.png"></p>
</figure>
</div>
<p>There is an additional <code>‚âà20%</code> increase in training time when storing the dataset outside the VHD with the WSL-Ubuntu install.</p>
<div>
<figure>
<p><img src="https://christianjmills.com/posts/arc-a770-testing/part-2/images/arc-a770-pytorch-training-session-wsl-external-dataset.png"></p>
</figure>
</div>
<p>One workaround is to <a href="https://woshub.com/move-wsl-another-drive-windows/">move the WSL installation</a> to a larger drive if your <code>C</code> drive has limited space.</p>
<p>The performance hit makes it hard to recommend WSL for deep learning tasks. On top of that, the <a href="https://christianjmills.com/posts/pytorch-cuda-wsl2/#the-headaches">issues</a> I encountered when I first tested using PyTorch on WSL2 in 2020 are still present, at least on Windows 10.</p>
<p>Therefore, I recommend using a bare-metal installation to get the most out of your hardware. The Ubuntu website provides <a href="https://ubuntu.com/tutorials/install-ubuntu-desktop#1-overview">a step-by-step guide</a> to installing Ubuntu on your PC, and you can install it alongside an existing operating system.</p>
</section>
<section id="closing-thoughts">
<h2 data-anchor-id="closing-thoughts">Closing Thoughts</h2>
<p>My experience with the PyTorch-DirectML package and the first version of Intel‚Äôs extension left me thinking it would be a while before the Arc GPUs became viable options for deep learning.</p>
<p>Several months later, my initial attempts to get everything working last week had me thinking it would be even longer still. Fortunately, once you know the proper steps, setting everything up is relatively straightforward.</p>
<p>While there is much more testing to do, I believe the Arc GPUs are now credible options for deep learning.</p>
<p>There are likely still edge cases or certain operations that cause problems, and I‚Äôll make updates to this post if I encounter any. I‚Äôll also try to keep the <a href="https://christianjmills.com/posts/intel-pytorch-extension-tutorial/native-ubuntu/">setup tutorial</a> updated as new versions of Intel‚Äôs PyTorch extension come out.</p>


</section>

</main> <!-- /main -->
<!-- Cloudflare Web Analytics --><!-- End Cloudflare Web Analytics -->


</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Unity Weta Tools (101 pts)]]></title>
            <link>https://unity.com/solutions/unity-weta-tools</link>
            <guid>37055989</guid>
            <pubDate>Tue, 08 Aug 2023 21:57:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://unity.com/solutions/unity-weta-tools">https://unity.com/solutions/unity-weta-tools</a>, See on <a href="https://news.ycombinator.com/item?id=37055989">Hacker News</a></p>
<div id="readability-page-1" class="page"><section id="master-wrapper" data-off-canvas-main-canvas="">
    
<main>
  
<article role="article" id="unity-weta-tools">

  
    

  
  <div>
              <div id="unity-weta-tools--3">
                      <p><span>
                
            <p>Artistry Tools</p>
      
              </span>
            </p>
                              
                      <p>The complete toolchain for 3D creation, simulation, and rendering, for any size of production across game and film.&nbsp;</p>
                                          
                                      </div>
              
              
              <div id="layout-section-84082--2">
          
<p><img src="https://unity.com/sites/default/files/2023-03/Enemies-BG_1.jpg" width="1920" height="1039" alt="Background from Enemies" loading="lazy" data-src="/sites/default/files/2023-03/Enemies-BG_1.jpg">


  </p>

      <div>
      <div>
        <h2 id="creativity-without-compromise--2">
          
            <p>Creativity without compromise</p>
      
      </h2>

  <div id="text-84088--2"><p>Unity WƒìtƒÅ Tools offer powerful solutions for every artist, working on anything from character to compositing, environments to virtual production.&nbsp;</p>
<p>Spend more time in the creative flow, and manage the demand for content without compromising on quality or production cost. Iterate faster in optimized workflows, and create visually stunning and highly sophisticated content with industry-leading tools.</p>
</div>

    </div>
  
      <section id="video-314018--2">

      <p><a href="https://www.youtube.com/embed/ygAsQxDtXic?autoplay=1&amp;amp;disablekb=1&amp;amp;iv_load_policy=3&amp;amp;modestbranding=1&amp;amp;showinfo=0&amp;amp;html5=1&amp;amp;enablejsapi=1&amp;amp;rel=0" title="">
    <i></i>
    <img src="https://unity.com/sites/default/files/styles/16_9_l/public/2023-03/Weta%20x%20Unity%20thumbnail.jpg?itok=SZ2mmmp8" alt="Unity X Weta Digital acquisition video thumbnail" title="">
  </a>

  </p>

  
  </section>
  </div>
      </div>
              
              <div id="layout-section-314021--2">
    <h2 id="key-features--3">
          
            <p>Key features</p>
      
      </h2>

  <div id="text-314027--2">
          
            <p>With Unity‚Äôs suite of artistry tools, you can make immersive and interactive stories that blur the lines between traditional storytelling and interactive media.</p>
      
      </div>

</div>
              <div id="layout-section-84100--2">
      <section id="video-84103--2">

      <p><a href="https://www.youtube.com/embed/KpPx_lvthBQ?autoplay=1&amp;amp;disablekb=1&amp;amp;iv_load_policy=3&amp;amp;modestbranding=1&amp;amp;showinfo=0&amp;amp;html5=1&amp;amp;enablejsapi=1&amp;amp;rel=0" title="Lion, created with Unity WƒìtƒÅ Tools">
    <i></i>
    <img src="https://unity.com/sites/default/files/styles/16_9_l/public/2023-03/Weta%20Digital%20Tools%20Lion.jpg?itok=rwDxh1E3" alt="Weta Digital Tools lion" title="">
  </a>

  </p>
<p>Lion, created with Unity WƒìtƒÅ Tools</p>
  
  </section>
  
      <div>
        <h2 id="creature-and-character-creation--2">
          
            <p>Creature and character creation</p>
      
      </h2>

  <div id="text-84109--2">
          
            <p>Create and simulate any type of character, in any design language, for any target platform. With powerful machine learning and simulation tools, processes are faster, require less resources, and deliver results for higher quality and consistency for the most performant and accurate characters in the market.</p>
      
      </div>

  

    </div>
  </div>
              <div id="layout-section-203423--2">
      <div>
        <h2 id="build-immersive-environments--2">
          
            <p>Build immersive environments</p>
      
      </h2>

  <div id="text-203429--2">
          
            <p>Transport your audiences to new worlds with environment tools for creating lightweight, high-performance, and dynamic assets that match artistic concepts. Procedural and freehand art tools offer the flexibility to produce stylized or realistic vegetation that fits seamlessly into existing workflows and pipelines.</p>
      
      </div>

  

    </div>
  
      <section id="video-314030--2">

      <p><a href="https://www.youtube.com/embed/H5sfwkjD7Wc?autoplay=1&amp;amp;disablekb=1&amp;amp;iv_load_policy=3&amp;amp;modestbranding=1&amp;amp;showinfo=0&amp;amp;html5=1&amp;amp;enablejsapi=1&amp;amp;rel=0" title="SpeedTree in Japanese Garden URP Template on PSVR 2">
    <i></i>
    <img src="https://unity.com/sites/default/files/styles/16_9_l/public/2023-04/Thumbnail%20resized.jpg?itok=Hje8v4tb" alt="weta artistry thumbnail" title="">
  </a>

  </p>
<p>SpeedTree in Japanese Garden URP Template on PSVR 2</p>
  
  </section>
  </div>
              <div id="layout-section-203438--2">
      <section id="video-314033--2">

      <p><a href="https://www.youtube.com/embed/l2w1EaIrRpQ?autoplay=1&amp;amp;disablekb=1&amp;amp;iv_load_policy=3&amp;amp;modestbranding=1&amp;amp;showinfo=0&amp;amp;html5=1&amp;amp;enablejsapi=1&amp;amp;rel=0" title="">
    <i></i>
    <img src="https://unity.com/sites/default/files/styles/16_9_l/public/2023-03/maxresdefault%20%2811%29.jpg?itok=mmirrFCs" alt="Avengers: Infinity War VFX | Breakdown - Compositing | Weta Digital" title="">
  </a>

  </p>

  
  </section>
  
      <div>
        <h2 id="remove-compositing-constraints--2">
          
            <p>Remove compositing constraints</p>
      
      </h2>

  <div id="text-203447--2">
          
            <p>Whether you require advanced gaseous simulations or the power to amend realistic sims during compositing, our tools remove common constraints and reduce costs for VFX compositors. Solve simulation challenges in-context, achieve greater realism, and reduce compositing time without compromising on output quality.</p>
      
      </div>

  

    </div>
  </div>
              
              <div id="unity-weta-tools-action--2">
              
<div>

      <p>
      <h2>Unity WƒìtƒÅ Tools in Action</h2>
    </p>
  
</div>

<div>
        <p>Discover how creators are bringing their projects to life</p>
      </div>

<div>

            
      <div>
      
  
<p><a href="https://unity.com/solutions/AFo7KLk1eNE">
        <img src="https://unity.com/sites/default/files/styles/cards_16_9/public/2023-03/Making%20of%20enemies.jpg?itok=HPxEOIFH" alt="Making of Enemies Digital humans with Ziva">
        <i></i>
      </a>
      </p>

<div>
      <h5>Digital humans with Ziva</h5>
  
  
  
      <div>
            <p>In an exclusive behind-the-scenes look at <em>Enemies, </em>discover how Ziva‚Äôs powerful facial animation software powered this cinematic short from Unity‚Äôs demo team.</p>
      </div>
  
</div>

  
</div>
      <div id="water-technology-avatar-2">
  <p><a href="https://blog.unity.com/industry/technology-behind-avatar-the-way-of-water" target="">
          <img src="https://unity.com/sites/default/files/styles/cards_16_9/public/2023-03/03-2023_Blog_Thumbnail-image_Avatar%20%28600x338%29.png.jpg?itok=-Ie-Gz3D" alt="Avatar">
        </a>
            </p>
  
  <div>
          <h5>The water technology of Avatar 2</h5>
    
        
    
          <div>
            <p><em>Avatar: The Way of Water </em>required water effects for 2,225 shots, some taking up to eight days of simulation. Uncover the CGI technology behind those effects.</p>
      </div>
      </div>

            
            
</div>
  </div>

          </div>
              <div id="other-solutions--2">
              
<div>

      <p>
      <h2>Other solutions</h2>
    </p>
  
</div>

<div>

            
      
      <div id="accelerate-solutions">
  <p><a href="https://unity.com/solutions/accelerate-solutions-industry" target="">
          <img src="https://unity.com/sites/default/files/styles/cards_16_9/public/2022-07/accelerate_design.jpg?itok=wWKMj4Sa" alt="Team doing whiteboard exercise">
        </a>
            </p>
  
  <div>
          <h5>Accelerate Solutions</h5>
    
        
    
          <div>
            <p>Work together with the Accelerate Solutions team to design and develop custom solutions for your production.</p>
      </div>
      </div>

            
            
</div>
      <div id="syncsketch">
  <p><a href="https://syncsketch.com/" target="">
          <img src="https://unity.com/sites/default/files/styles/cards_16_9/public/2023-03/syncsketch.jpg?itok=77oZDx89" alt="Syncsketch">
        </a>
            </p>
  
  <div>
          <h5>SyncSketch</h5>
    
        
    
          <div>
            <p>Build, share, and understand ideas with synchronized, real-time collaboration tools for working together, from anywhere.</p>
      </div>
      </div>

            
            
</div>
  </div>

          </div>
              <div id="bring-your-creative-vision-life--2">
          <h2>
            
            <p>Bring your creative vision to life</p>
      
          </h2>

                      <div>
              
            <p>Unity WƒìtƒÅ Tools can help you define new possibilities in visual content. Talk to our experts to learn now.</p>
      
            </div>
          
                      
                  </div>
          </div>

</article>

</main>


</section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[LK-99: Phonon bands, Localized Flat Band Magnetism, Models and Chemical Analysis (157 pts)]]></title>
            <link>https://drive.google.com/file/d/1ekD2KVV_SUid2wH__o1ODS3hTl1GUFb5/view</link>
            <guid>37055514</guid>
            <pubDate>Tue, 08 Aug 2023 21:11:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://drive.google.com/file/d/1ekD2KVV_SUid2wH__o1ODS3hTl1GUFb5/view">https://drive.google.com/file/d/1ekD2KVV_SUid2wH__o1ODS3hTl1GUFb5/view</a>, See on <a href="https://news.ycombinator.com/item?id=37055514">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Android 14 introduces first-of-its-kind cellular connectivity security features (381 pts)]]></title>
            <link>https://security.googleblog.com/2023/08/android-14-introduces-first-of-its-kind.html</link>
            <guid>37055479</guid>
            <pubDate>Tue, 08 Aug 2023 21:07:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://security.googleblog.com/2023/08/android-14-introduces-first-of-its-kind.html">https://security.googleblog.com/2023/08/android-14-introduces-first-of-its-kind.html</a>, See on <a href="https://news.ycombinator.com/item?id=37055479">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-version="1" id="header">
<div>
<p><a href="https://security.googleblog.com/">
<img height="50" src="https://www.gstatic.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png">
</a></p><a href="https://security.googleblog.com/">
<h2>
            Security Blog
          </h2>
</a>
</div>
<p>
The latest news and insights from Google on security and safety on the Internet
</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[PackagingCon ‚Äì a conference only for software package management (175 pts)]]></title>
            <link>https://packaging-con.org</link>
            <guid>37055368</guid>
            <pubDate>Tue, 08 Aug 2023 20:59:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://packaging-con.org">https://packaging-con.org</a>, See on <a href="https://news.ycombinator.com/item?id=37055368">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-block-type="2" id="block-yui_3_17_2_1_1685539580157_15383">
  <p>Today, practically every operating system, language ecosystem, and framework has one or more package managers. Package managers are a, if not the, major way of taming software complexity, integrating various ecosystems, components, and versions and ensuring they are managed (installed/updated/uninstalled) safely, reliably, and in a compatible manner on user systems.</p><p>Because package managers bridge the gap between developers and the end user, developing them requires a broad range of expertise in multiple areas, including language runtimes, OS policies, distribution management, dependency solving, and developer workflows.</p><p>Packaging Con seeks to bring various package management communities together, as a venue to discuss challenges and exchange ideas. What makes communities work together on a particular software ecosystem? Are the differences among package managers mainly in the implementation language, or are there other key distinctions to software management methodology? How can we get better interoperability and/or cooperation among package manager teams, and what's missing/required to enable that? Is dependency resolution fundamentally the same problem across systems, or does each package manager do it differently?</p><p>If any of these questions interest you, we want to hear from you! Packaging Con is a conference for developers of software package management tools, as well as software packagers and communities! Anyone is welcome to participate. Our mission is to bring different software ecosystems together: from Python‚Äôs pip to Rust‚Äôs cargo, from apt, rpm, and Nix to conda and mamba, and from vcpkg to spack, and from fpm to npm.</p><p><strong>Topics</strong></p><p>We encourage submissions in a wide range of areas related to package management, including but not limited to:</p><ul data-rte-list="default"><li><p>Deep dives on specific packaging systems</p></li><li><p>Software supply chains, pipelines, and security</p></li><li><p>Package build and release methodologies</p></li><li><p>Modeling software ecosystems in package managers</p></li><li><p>Modeling compatibility (semver, API/ABI analysis, etc.)</p></li><li><p>Interactions between package managers</p></li><li><p>Reproducibility in package managers</p></li><li><p>Reliability/robustness of software ecosystems</p></li><li><p>Dependency solving and management: modeling, methods, and scalability</p></li></ul><p>This list is by no means exhaustive ‚Äî any topic related to package management is welcome to attend.<br></p><p><strong>Code of Conduct</strong></p><p>In the interest of fostering an open and welcoming environment, pledge to make participation in Packaging Con a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, gender identity and expression, level of experience, nationality, personal appearance, race, religion, or sexual identity and orientation.</p><p>By participating in the conference you agree to abide to the <a href="https://numfocus.org/code-of-conduct" target="_blank">NumFOCUS Code of Conduct</a>.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Last 1% (200 pts)]]></title>
            <link>https://jaredramsey.com/blog/20230808.html</link>
            <guid>37055280</guid>
            <pubDate>Tue, 08 Aug 2023 20:51:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jaredramsey.com/blog/20230808.html">https://jaredramsey.com/blog/20230808.html</a>, See on <a href="https://news.ycombinator.com/item?id=37055280">Hacker News</a></p>
<div id="readability-page-1" class="page"><div aria-label="Content">
    <header>
      
      <h4>2023-08-08</h4>
    </header>

    <p>
      You've done it. You've launched the next great feature. You've spent months working with your team to design, build, and test. It's
      in users' hands. You're done.
    </p>

    <p>But are you really? Probably not.</p>

    <p>I've seen (and been on) so many projects that claim success and move on to the next thing when they are 99% done and fail to 
      complete the last 1%. This last 1% isn't just what separates a great product from a good product, it's what separates a product that
      <i>might not</i> eventually fail from one that <i>will</i> eventually fail.
    </p>

    <p>
      So what's in this last 1%? Here are some of the most frequently skipped things I've seen:
    </p>

    <ul>
      <li>
        <p>Internal (maintenance) documentation</p>
      </li>
      <li>
        <p>External (how-to/FAQ) documentation</p>
      </li>
      <li>
        <p>Performance metric instrumentation</p>
      </li>
      <li>
        <p>Easy-to-decipher performance metric dashboard</p>
      </li>
      <li>
        <p>Usage metric instrumentation</p>
      </li>
      <li>
        <p>Easy-to-decipher usage metric dashboard</p>
      </li>
      <li>
        <p>Error metric instrumentation</p>
      </li>
      <li>
        <p>Easy-to-decipher error metric dashboard</p>
      </li>
      <li>
        <p>Alerting</p>
      </li>
      <li>
        <p>Automated testing</p>
      </li>
    </ul>

    <p>
      I know the temptation. I've been there many times myself. After months of hard work and sleepless nights, you want to put it behind
      you and move on to the next thing. But don't. Take the time to finish the last 1%. It's worth it.
    </p>

  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[FDA Approves First Oral Treatment for Postpartum Depression (123 pts)]]></title>
            <link>https://www.fda.gov/news-events/press-announcements/fda-approves-first-oral-treatment-postpartum-depression</link>
            <guid>37055210</guid>
            <pubDate>Tue, 08 Aug 2023 20:45:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.fda.gov/news-events/press-announcements/fda-approves-first-oral-treatment-postpartum-depression">https://www.fda.gov/news-events/press-announcements/fda-approves-first-oral-treatment-postpartum-depression</a>, See on <a href="https://news.ycombinator.com/item?id=37055210">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

                                 <article id="main-content" role="article">
          
                                                                <header role="heading" aria-level="1">
                         






                      </header>
                              
                                                                           <div role="main">

                            
                            
                            
                            
                                              
    <div>
    <dl>
        <dt>For Immediate Release:</dt>
                  <dd><time datetime="2023-08-04T22:48:00Z">August 04, 2023</time>
</dd>
                 
                
      </dl>
    </div>
 

  
      
       

  <p><a href="https://www.fda.gov/news-events/press-announcements/la-fda-aprueba-el-primer-tratamiento-oral-para-la-depresion-posparto"><span>Spanish</span></a></p>

<p>Today, the U.S. Food and Drug Administration approved <a href="https://www.accessdata.fda.gov/drugsatfda_docs/label/2023/217369s000lbl.pdf">Zurzuvae</a> (zuranolone), the first oral medication indicated to treat postpartum depression (PPD) in adults. PPD is a major depressive episode that typically occurs after childbirth but can also begin during the later stages of pregnancy. Until now, treatment for PPD was only available as an IV injection given by a health care provider in certain health care facilities.</p>

<p><strong>‚ÄúPostpartum depression is a serious and potentially life-threatening condition in which women experience sadness, guilt, worthlessness‚Äîeven, in severe cases, thoughts of harming themselves or their child. And, because postpartum depression can disrupt the maternal-infant bond, it can also have consequences for the child‚Äôs physical and emotional development,‚Äù said Tiffany R. Farchione, M.D., director of the Division of Psychiatry in the FDA‚Äôs Center for Drug Evaluation and Research. ‚ÄúHaving access to an oral medication will be a beneficial option for many of these women coping with extreme, and sometimes life-threatening, feelings.‚Äù</strong></p>

<p>As with other forms of depression, PPD is characterized by sadness and/or loss of interest in activities that one used to enjoy and a decreased ability to feel pleasure. It can present with symptoms such as cognitive impairment, feelings of sadness or inadequacy, loss of energy or suicidal ideation.&nbsp;</p>

<p>The efficacy of Zurzuvae for the treatment of PPD in adults was demonstrated in two randomized, double-blind, placebo-controlled, multicenter studies. The trial participants were women with PPD who met the Diagnostic and Statistical Manual of Mental Disorders criteria for a major depressive episode and whose symptoms began in the third trimester or within four weeks of delivery. In Study 1, patients received 50 mg of Zurzuvae or placebo once daily in the evening for 14 days. In Study 2, patients received another zuranolone product that was approximately equal to 40 mg of Zurzuvae or placebo, also for 14 days. Patients in both studies were monitored for at least four weeks after the 14-day treatment. The primary endpoint of both studies was the change in depressive symptoms using the total score from the 17-item Hamilton depression rating scale (HAMD-17), measured at day 15. Patients in the Zurzuvae groups showed significantly more improvement in their symptoms compared to those in the placebo groups. The treatment effect was maintained at Day 42‚Äîfour weeks after the last dose of Zurzuvae.</p>

<p>The labeling contains a boxed warning noting that Zurzuvae can impact a person‚Äôs ability to drive and perform other potentially hazardous activities. Patients also may not be able to assess their degree of impairment. To reduce the risk of harm, patients should not drive or operate heavy machinery for at least 12 hours after taking Zurzuvae.&nbsp;</p>

<p>The most common side effects include drowsiness, dizziness, diarrhea, fatigue, nasopharyngitis (the common cold), and urinary tract infection. Use of Zurzuvae may cause suicidal thoughts and behavior. Zurzuvae may cause fetal harm. Women should use effective contraception while taking, and for one week after taking, Zurzuvae.</p>

<p>The daily recommended dose for Zurzuvae is 50mg. It should be taken once every day, for 14 days, in the evening with a fatty meal.&nbsp;</p>

<p>The FDA granted this application <a href="https://www.fda.gov/patients/fast-track-breakthrough-therapy-accelerated-approval-priority-review/priority-review">Priority Review</a> and <a href="https://www.fda.gov/patients/fast-track-breakthrough-therapy-accelerated-approval-priority-review/fast-track">Fast Track</a> designation.</p>

<p>Approval of Zurzuvae was granted to Sage Therapeutics, Inc.</p>



  <h2>Related Information</h2>
  
  

<p>###</p>
  <div data-quickedit-field-id="node/418768/field_generic_long_text/en/full">
      <p>Boilerplate</p>
      <p>The FDA, an agency within the U.S. Department of Health and Human Services, protects the public health by assuring the safety, effectiveness, and security of human and veterinary drugs, vaccines and other biological products for human use, and medical devices. The agency also is responsible for the safety and security of our nation‚Äôs food supply, cosmetics, dietary supplements, products that give off electronic radiation, and for regulating tobacco products.</p>
    </div>
<hr>

<div>
  <h2>Inquiries</h2>
  
    
        
         
  </div>
 
<br>


              
                                            
              
            </div>

                                                                                  
            

                                                                                
            
                 </article>        
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Milk Sad: Weak Entropy in libbitcoin (bc) seed generation (118 pts)]]></title>
            <link>https://milksad.info/</link>
            <guid>37054862</guid>
            <pubDate>Tue, 08 Aug 2023 20:14:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://milksad.info/">https://milksad.info/</a>, See on <a href="https://news.ycombinator.com/item?id=37054862">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      <p><img src="https://milksad.info/assets/base/milksad_transparent.svg" width="30%"></p>

<h2 id="milk-sad-disclosure">Milk Sad Disclosure</h2>

<p>A practical explanation of how weak entropy can ruin your day - and your savings.</p>

<h2 id="vulnerability-cve-2023-39910">Vulnerability <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-39910">CVE-2023-39910</a></h2>

<ul>
  <li>We discovered a cryptographic weakness in the widely utilized <code>Libbitcoin Explorer</code> (<code>bx</code>) cryptocurrency wallet tool while following up on mysterious wallet thefts.</li>
  <li>The <code>bx seed</code> subcommand for generation of new wallet private key entropy is flawed and produces insecure output.</li>
  <li>On <code>Libbitcoin Explorer</code> <code>3.x</code> versions, <code>bx seed</code> uses the <a href="https://en.wikipedia.org/wiki/Mersenne_Twister#Disadvantages">Mersenne Twister</a> pseudorandom number generator (PRNG) <a href="https://github.com/libbitcoin/libbitcoin-system/blob/a1b777fc51d9c04e0c7a1dec5cc746b82a6afe64/src/crypto/pseudo_random.cpp#L77">initialized</a> with 32 bits of system time.</li>
  <li>Bad actors have discovered this flaw and are actively exploiting it to steal funds from affected wallets on multiple blockchains.</li>
  <li>We have reasons to believe some <code>Libbitcoin Explorer</code> versions before <code>3.0.0</code> also produce weak <code>bx seed</code> output in some system environments.</li>
  <li>Think of this as securing your online bank account with a password manager that creates a long random password, but it often creates the same passwords for every user. Malicious people have figured this out and drained funds on any account they can find.</li>
</ul>

<h2 id="how">How?</h2>
<div>
    <p><img width="100%" src="https://milksad.info/assets/base/bx-mastering-bitcoin.png"></p><p>
        Mastering Bitcoin - Second Edition by Andreas M. Antonopoulos LLC is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.
    </p>
</div>
<ul>
  <li>Popular documentation like ‚Äú<a href="https://bitcoinbook.info/">Mastering Bitcoin</a>‚Äù suggests the usage of <code>bx seed</code> for wallet generation.</li>
  <li>Secure cryptography requires a source of large, non-guessable numbers. If the random number generator is weak, the resulting cryptographic usage is almost always compromised.</li>
  <li>For technical people: in this case, practical wallet security is reduced from 128 bit, 192 bit or 256 bit to a mere 32 bit of unknown key information.</li>
  <li>A 32 bit key space is 2^32, or 4,294,967,296 different unique combinations of derived <a href="https://milksad.info/(https://en.bitcoin.it/wiki/BIP_0039)">BIP39</a> mnemonic phrases or other key formats (<a href="https://en.bitcoin.it/wiki/BIP_0032">BIP32</a>). Spoiler: That‚Äôs not as many combinations as it sounds.</li>
  <li>With enough optimizations, a decent gaming PC can do a brute-force search through 2^32 wallet combinations in less than a day.</li>
  <li>Since <code>bx</code> has a configurable output length and can be used in several ways, there are a few variations the attacker needs to test for each case. This slows down practical attacks to a few days.</li>
  <li>Once an attacker finds a match of a wallet candidate with an actual wallet used on a blockchain, they are in full possession of the private keys and can steal remaining funds, trace all previous wallet history and sign messages.</li>
  <li>The attack works independent of the owner‚Äôs current copy of the wallet secrets. In other words, even if you keep your paper wallet in a bank safe, your funds can still be stolen remotely. Crazy, right?</li>
  <li>Attackers are actively exploiting this and have been draining funds of wallets where the mnemonic was generated using this tool.</li>
  <li>Why the silly ‚ÄúMilk Sad‚Äù name? Running <code>bx seed</code> on <code>3.x</code> versions with a system time of 0.0 always generates the following secret:
    <blockquote>
      <p>milk sad wage cup reward umbrella raven visa give list decorate bulb gold raise twenty fly manual stand float super gentle climb fold park</p>
    </blockquote>
  </li>
</ul>

<h2 id="when">When?</h2>
<p>The main theft occurred around 12 July 2023, although initial exploitation likely began at a smaller scale in May 2023.</p>

<p>A separate but similar vulnerability in another wallet software was detected in November 2022 and actively exploited shortly after, which may be the prequel to this story.</p>

<h2 id="who">Who?</h2>
<p>We did not identify who is behind the ongoing thefts from vulnerable wallets.</p>

<h2 id="type">Type</h2>

<p><a href="https://cwe.mitre.org/data/definitions/338.html">CWE-338: Use of Cryptographically Weak Pseudo-Random Number Generator (PRNG)</a></p>

<h2 id="vendor">Vendor</h2>

<p><a href="https://github.com/libbitcoin">Libbitcoin</a></p>

<h2 id="further-reading">Further Reading</h2>

<p>See our <a href="https://milksad.info/disclosure.html">technical writeup</a> and <a href="https://milksad.info/faq.html">FAQ</a>.</p>

<p><a href="https://nvd.nist.gov/vuln/detail/CVE-2023-31290">CVE-2023-31290</a> was a similar vulnerability in <a href="https://community.trustwallet.com/t/browser-extension-wasm-vulnerability-postmortem/750787">Trust Wallet</a>, see <a href="https://blog.ledger.com/Funds-of-every-wallet-created-with-the-Trust-Wallet-browser-extension-could-have-been-stolen/">Ledger Donjon‚Äôs technical writeup</a>.</p>



<ul>
  <li>General requests and comments: email <a href="mailto:team@milksad.info">team@milksad.info</a></li>
  <li>Press: email <a href="mailto:press@milksad.info">press@milksad.info</a></li>
</ul>

<h2 id="team--credits">Team &amp; Credits</h2>

<ul>
  <li>Core Team
    <ul>
      <li>Distrust
        <ul>
          <li>Anton Livaja - <a href="mailto:anton@distrust.co">anton@distrust.co</a></li>
          <li>Lance R. Vick - <a href="mailto:lance@distrust.co">lance@distrust.co</a>, <a href="https://lance.dev/">https://lance.dev</a></li>
          <li>Ryan Heywood - <a href="mailto:ryan@distrust.co">ryan@distrust.co</a>, <a href="https://ryansquared.pub/">https://ryansquared.pub</a></li>
          <li>Shane Engelman - <a href="mailto:shane@distrust.co">shane@distrust.co</a></li>
        </ul>
      </li>
      <li>Independent
        <ul>
          <li>Christian Reitter - <a href="https://inhq.net/">https://inhq.net</a></li>
          <li>Daniel Grove - <a href="mailto:danny@dannygrove.com">danny@dannygrove.com</a></li>
          <li>Dustin Johnson - <a href="mailto:_@di0.io">_@di0.io</a></li>
          <li>Heiko Schaefer - <a href="mailto:heiko@schaefer.name">heiko@schaefer.name</a></li>
          <li>James Callahan - <a href="mailto:james@wavesquid.com">james@wavesquid.com</a></li>
          <li>Jochen Hoenicke - <a href="https://jhoenicke.de/">https://jhoenicke.de</a></li>
          <li>John Naulty - <a href="mailto:jnaulty@dendritictech.com">jnaulty@dendritictech.com</a></li>
          <li>Matthew Brooks - <a href="mailto:*@logicwax.com">*@logicwax.com</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Special Thanks
    <ul>
      <li>Jack Kearney - <a href="https://turnkey.com/">Turnkey</a></li>
      <li>Several trusted advisors that wish to remain uncredited. You know who you are.</li>
    </ul>
  </li>
</ul>


  <br> 
    </div></div>]]></description>
        </item>
    </channel>
</rss>