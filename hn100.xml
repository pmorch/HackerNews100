<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Wed, 26 Jun 2024 19:30:02 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Anthropic: Expanding Access to Claude for Government (101 pts)]]></title>
            <link>https://www.anthropic.com/news/expanding-access-to-claude-for-government</link>
            <guid>40802334</guid>
            <pubDate>Wed, 26 Jun 2024 17:32:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.anthropic.com/news/expanding-access-to-claude-for-government">https://www.anthropic.com/news/expanding-access-to-claude-for-government</a>, See on <a href="https://news.ycombinator.com/item?id=40802334">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="main"><article><div><p>Anthropic's mission is to build reliable, interpretable, steerable AI systems. We have been excited to see our technology used in areas like coding, customer service, drug discovery, and medical research. We're eager to make these tools available through expanded offerings to government users. Leveraging the flexibility and security of Amazon Web Services [AWS], our AI models Claude 3 Haiku and Claude 3 Sonnet are now available in the AWS Marketplace for the US Intelligence Community [IC] and in AWS GovCloud.</p><p>Claude offers a wide range of potential applications for government agencies, both in the present and looking toward the future. Government agencies can use Claude to provide improved citizen services, streamline document review and preparation, enhance policymaking with data-driven insights, and create realistic training scenarios. In the near future, AI could assist in disaster response coordination, enhance public health initiatives, or optimize energy grids for sustainability. Used responsibly, AI has the potential to transform how elected governments serve their constituents and promote peace and security.</p><h3>Adapting to government needs</h3><p>We have been carefully considering the needs of public servants about how Claude could be used to further their missions and the unique needs of government users. In addition to making our models available in the AWS marketplaces that meet stringent government security standards, we are also adapting our service agreements to the unique needs, missions, and legal authorities of governments. </p><p>For example, we have crafted a set of <a href="https://support.anthropic.com/en/articles/9528712-exceptions-to-our-usage-policy">contractual exceptions</a> to our general <a href="https://www.anthropic.com/legal/aup">Usage Policy</a> that are carefully calibrated to enable beneficial uses by carefully selected government agencies. These allow Claude to be used for legally authorized foreign intelligence analysis, such as combating human trafficking, identifying covert influence or sabotage campaigns, and providing warning in advance of potential military activities, opening a window for diplomacy to prevent or deter them. All other restrictions in our general <a href="https://www.anthropic.com/legal/aup">Usage Policy</a>, including those concerning disinformation campaigns, the design or use of weapons, censorship, and malicious cyber operations, remain.</p><p>At present, this policy applies only to models that are at AI Safety Level 2 (ASL-2) under our<a href="https://www.anthropic.com/news/anthropics-responsible-scaling-policy"> Responsible Scaling Policy</a> (RSP). As we move forward, we commit to regularly evaluating our partnerships and their impacts. Our goal remains constant: ensuring that AI serves the public interest while maintaining our empirical approach to mitigating potential risks.</p><h3>Commitment to responsible AI deployment</h3><p>Since our founding, we have been committed to working to support effective government policies about AI. We have stressed the importance of working with governments to develop <a href="https://www.anthropic.com/news/third-party-testing">effective testing and measurement regimes</a> and recently provided <a href="https://www.anthropic.com/news/claude-3-5-sonnet">pre-release access</a> of Claude 3.5 Sonnet to the UK Artificial Intelligence Safety Institute (UK AISI), which conducted pre deployment testing and shared their results with US AI Safety Institute (US AISI). We believe working with governments is essential to ensuring the world safely makes the transition toward transformative AI and are committed to working toward this goal.</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Rabbit failed to properly reset keys: emails can be sent from rabbit.tech domain (111 pts)]]></title>
            <link>https://rabbitu.de/articles/security-disclosure-2</link>
            <guid>40801523</guid>
            <pubDate>Wed, 26 Jun 2024 16:05:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://rabbitu.de/articles/security-disclosure-2">https://rabbitu.de/articles/security-disclosure-2</a>, See on <a href="https://news.ycombinator.com/item?id=40801523">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><span><span>rabbit&nbsp;</span> </span><span><span>failed&nbsp;</span> </span><span><span>to&nbsp;</span> </span><span><span>properly&nbsp;</span> </span><span><span>reset&nbsp;</span> </span><span><span>all&nbsp;</span> </span><span><span>keys:&nbsp;</span> </span><span><span>emails&nbsp;</span> </span><span><span>can&nbsp;</span> </span><span><span>be&nbsp;</span> </span><span><span>sent&nbsp;</span> </span><span><span>from&nbsp;</span> </span><span><span>rabbit.tech&nbsp;</span> </span><span><span>domains&nbsp;</span> </span></p> <p><img src="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='574px'%20height='695px'%20viewBox='0%200%20574%20695'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eskull%20bunny%204%3c/title%3e%3cg%20id='skull-bunny-4'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M238.099695,71.5133627%20C243.33016,71.5133627%20248.30593,73.0807016%20252.481514,75.8531858%20C256.657099,78.6256699%20260.032496,82.6032994%20262.062215,87.4238807%20L357.960596,315.182536%20C360.318094,320.781593%20360.182941,326.806152%20358.05865,332.020322%20C355.934358,337.234491%20351.820928,341.638271%20346.221872,343.995769%20C341.432105,346.012512%20336.083029,346.268494%20331.122568,344.71835%20L189.454763,300.447161%20C182.406257,298.244503%20176.626917,293.148484%20173.55932,286.431119%20L89.6336114,102.652194%20C87.1099927,97.1260221%2087.0652086,91.1001135%2089.0328724,85.8248432%20C91.0005361,80.549573%2094.9806476,76.0249412%20100.50682,73.5013225%20C103.375409,72.1913336%20106.492103,71.5133627%20109.645652,71.5133627%20Z'%20id='Rectangle-Copy-7'%20stroke='%23000000'%20stroke-width='12'%20fill='%23FFFFFF'%3e%3c/path%3e%3cpath%20d='M229.748512,71.937139%20L157.594151,182.112565%20C151.127134,191.987316%20140.118354,197.937139%20128.314413,197.937139%20L31.5793712,197.937139%20C25.7803813,197.937139%2020.5303813,195.586634%2016.7301288,191.786381%20C12.9298762,187.986129%2010.5793712,182.736129%2010.5793712,176.937139%20C10.5793712,172.040631%2012.2904197,167.298044%2015.4166554,163.529432%20L79.9999697,85.6755732%20C87.2193255,76.9727881%2097.9393768,71.937139%20109.246789,71.937139%20L229.748512,71.937139%20Z'%20id='Rectangle-Copy-9'%20stroke='%23000000'%20stroke-width='12'%20fill='%23FFFFFF'%3e%3c/path%3e%3cpath%20d='M266.696446,288.458019%20C307.752644,265.124838%20358.059633,265.124838%20399.115831,288.458019%20L549.959871,374.186154%20C555.901556,377.56295%20560.707585,382.405184%20564.028193,388.11177%20C567.348801,393.818356%20569.183989,400.389295%20569.183989,407.2235%20L569.183989,551.630254%20C569.183989,558.464459%20567.348801,565.035398%20564.028193,570.741984%20C560.707585,576.44857%20555.901556,581.290804%20549.959871,584.6676%20L399.115831,670.395734%20C358.059633,693.728915%20307.752644,693.728915%20266.696446,670.395734%20L115.852406,584.6676%20C109.910722,581.290804%20105.104693,576.44857%20101.784084,570.741984%20C98.4634762,565.035398%2096.628289,558.464459%2096.628289,551.630254%20L96.628289,407.2235%20C96.628289,400.389295%2098.4634762,393.818356%20101.784084,388.11177%20C105.104693,382.405184%20109.910722,377.56295%20115.852406,374.186154%20Z'%20id='Rectangle-Copy-3'%20stroke='%23000000'%20stroke-width='12'%20fill='%23FFFFFF'%3e%3c/path%3e%3cpath%20d='M414.958303,9.67270241%20C419.682733,9.59493649%20424.306669,11.0403035%20428.145754,13.7948839%20L542.946631,96.1656324%20C549.63048,100.961359%20553.650462,108.637295%20553.785853,116.86253%20L554.822813,179.859839%20L506.533714,224.018487%20L556.804587,300.256477%20L558.548356,406.19377%20C558.648341,412.268079%20556.276761,417.807861%20552.361607,421.854062%20C548.446452,425.900264%20542.987724,428.452884%20536.913415,428.552869%20C532.188986,428.630635%20527.565049,427.185268%20523.725965,424.430688%20L408.925087,342.059939%20C402.241239,337.264213%20398.221256,329.588277%20398.085865,321.363042%20L393.323362,32.031802%20C393.223377,25.9574926%20395.594957,20.4177104%20399.510112,16.3715092%20C403.425266,12.3253081%20408.883994,9.77268787%20414.958303,9.67270241%20Z'%20id='Rectangle-Copy-5'%20stroke='%23000000'%20stroke-width='12'%20fill='%23FFFFFF'%3e%3c/path%3e%3cpolygon%20id='Rectangle-Copy-12'%20fill='%23000000'%20points='380.816985%20474.420837%20309.359298%20500.317143%20226.706571%20530.270537%20308.710278%20588.844613%20392.83477%20586.120237%20411.214911%20508.475532'%3e%3c/polygon%3e%3cpolygon%20id='Rectangle-Copy-13'%20fill='%23000000'%20points='128.980183%20407.885906%20148.501388%20457.6721%20189.653568%20517.144989%20124.116039%20520.191527%20102.628289%20509.426128%20102.129132%20450.405632%20102.628289%20404.037935'%3e%3c/polygon%3e%3c/g%3e%3c/svg%3e" width="72" height="95" decoding="async"></p></div><article><div><p data-svelte-h="svelte-bo7oge">in our <a href="https://rabbitu.de/articles/security-disclosure-1" rel="nofollow">last article</a> we announced that rabbit had hardcoded keys in their codebase for ElevenLabs, Azure, Yelp, and Google Maps, which the rabbitude team had obtained.</p> <p data-svelte-h="svelte-1hcyqvr">in their discord server, rabbit issued the following response to our publication:</p> <blockquote data-svelte-h="svelte-jeu7ll"><p>Today we were made aware of an alleged data breach. Our security team immediately began investigating it. As of right now, we are not aware of any customer data being leaked or any compromise to our systems.</p> <p>If we learn of any other relevant information, we will provide an update once we have more details</p></blockquote> <p data-svelte-h="svelte-amh5k0">despite claiming no compromise had occurred, rabbit immediately revoked these four keys. one was done improperly, leading to a <a href="https://x.com/xyz3va/status/1805689140639408277" rel="nofollow">temporary outage in text-to-speech services</a>.</p> <p data-svelte-h="svelte-xbuf9z">but we omitted another key from that release, one buried deeper in the code. and surprise-surprise: despite their ongoing internal investigation, rabbit didn’t revoke it.</p> <h2 data-svelte-h="svelte-t7zfsg">sendgrid</h2> <p data-svelte-h="svelte-io4qze">as of writing, a fifth hardcoded api key exists for <a href="https://sendgrid.com/" rel="nofollow">sendgrid</a>, which is still active.</p> <p data-svelte-h="svelte-16lwwui">it provides access to a complete history of emails sent on the r1.rabbit.tech subdomain. this subdomain is primarily used for the r1’s spreadsheet-editing functions, meaning that it also includes user information contained within those spreadsheets.</p> <p data-svelte-h="svelte-yi9b7d">it also allows us to send emails from rabbit.tech email addresses. a proof-of-concept was first sent a month ago, but it went unnoticed by the rabbit team. between that point and today, we did not view or send any further emails.</p> <p data-svelte-h="svelte-13nmzq1">today we provided further proof of this retained access by sending sample emails from rabbit domains to journalists, including <a href="https://x.com/jason_koebler" rel="nofollow">Jason Koebler</a> of 404 Media, who published a great <a href="https://www.404media.co/researchers-prove-rabbit-ai-breach-by-sending-email-to-us-as-admin/" rel="nofollow">longform piece on this topic</a>.</p> <p data-svelte-h="svelte-upqxjb"><em>this article was edited shortly after publishing to correct and clarify a statement on the extent of available email data.</em></p></div></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[One Million Checkboxes (229 pts)]]></title>
            <link>https://onemillioncheckboxes.com/</link>
            <guid>40800869</guid>
            <pubDate>Wed, 26 Jun 2024 15:02:38 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://onemillioncheckboxes.com/">https://onemillioncheckboxes.com/</a>, See on <a href="https://news.ycombinator.com/item?id=40800869">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[If you're using Polyfill.io code on your site – remove it immediately (126 pts)]]></title>
            <link>https://www.theregister.com/2024/06/25/polyfillio_china_crisis/</link>
            <guid>40800734</guid>
            <pubDate>Wed, 26 Jun 2024 14:48:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theregister.com/2024/06/25/polyfillio_china_crisis/">https://www.theregister.com/2024/06/25/polyfillio_china_crisis/</a>, See on <a href="https://news.ycombinator.com/item?id=40800734">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body">
<p>The polyfill.io domain is being used to infect more than 100,000 websites with malware after a Chinese organization bought the domain earlier this year.</p>
<p>Multiple security firms sounded the alarm on Tuesday, warning organizations whose websites use any JavaScript code from the polyfill.io domain to immediately remove it.</p>
<p>The site offered <a target="_blank" rel="nofollow" href="https://developer.mozilla.org/en-US/docs/Glossary/Polyfill">polyfills</a> – useful bits of JavaScript code that add functionality to older browsers that is built into newer versions. These in-fills make life easier for developers in that by using polyfillers, they know their web code will work across a greater range of browsers.</p>

    

<p>Now we're told polyfill.io is serving malicious code hidden in those scripts, meaning anyone visiting a website using the domain will end up running that malware in their browser.</p>

        


        

<p>"The cdn.polyfill.io domain is currently being used in a web supply chain attack," security monitoring biz c/side's Carlo D'Agnolo <a target="_blank" rel="nofollow" href="https://cside.dev/blog/more-than-100k-websites-targeted-in-web-supply-chain-attack">said</a> in an advisory. "It used to host a service for adding JavaScript polyfills to websites, but is now inserting malicious code in scripts served to end-users."&nbsp;</p>
<p>Additionally, we understand Google has started blocking Google Ads for websites that use the impacted code presumably to reduce traffic to them and cut the number of potential victims. Affected site owners have also been alerted by the internet giant.</p>

        

<p>"We detected a security issue recently that may affect websites using certain third-party libraries," a Google spokesperson told <em>The Register</em>. "To help potentially impacted advertisers secure their websites, we have been proactively sharing information on how to quickly mitigate the issue."</p>
<p>Sites that embed poisoned scripts from polyfill.io and also bootcss.com may end up unexpectedly redirecting visitors away from the intended location, and send them to malicious sites, Google <a target="_blank" rel="nofollow" href="https://x.com/spazef0rze/status/1805645015663673670">told</a> advertisers.</p>
<p>More than <a target="_blank" rel="nofollow" href="https://publicwww.com/websites/%22cdn.polyfill.io%22/">100,000 sites</a> are already carrying the hostile scripts, according to the Sansec security forensics team, which on Tuesday claimed Funnull, a Chinese CDN operator that bought the polyfill.io domain and its associated GitHub account in February, has since been using the service in a supply chain attack.</p>

        

<p>Polyfill.io is used by academic library JSTOR as well as Intuit, World Economic Forum, and tons more.</p>
<p>Since February, "this domain was caught injecting <a target="_blank" rel="nofollow" href="https://web.archive.org/web/20240624110153/https://github.com/polyfillpolyfill/polyfill-service/issues/2873">malware</a> on mobile devices via any site that embeds cdn.polyfill.io," Sansec, an e-commerce security company, <a target="_blank" rel="nofollow" href="https://sansec.io/research/polyfill-supply-chain-attack">warned</a>, adding that any <a target="_blank" rel="nofollow" href="https://web.archive.org/web/20240229113710/https://github.com/polyfillpolyfill/polyfill-service/issues/2834">complaints</a> about the malicious activity are quickly vanished from the GitHub repository.</p>
<p>"The polyfill code is dynamically generated based on the HTTP headers, so multiple attack vectors are likely," Sansec noted.</p>
<ul>

<li><a href="https://www.theregister.com/2024/05/03/it_might_take_a_decade/">It may take decade to shore up software supply chain security, says infosec CEO</a></li>

<li><a href="https://www.theregister.com/2020/03/26/corejs_maintainer_jailed_code_release/">What happens when the maintainer of a JS library downloaded 26m times a week goes to prison for killing someone with a motorbike? Core-js just found out</a></li>

<li><a href="https://www.theregister.com/2024/03/25/python_package_malware/">Over 170K users caught up in poisoned Python package ruse</a></li>

<li><a href="https://www.theregister.com/2024/03/17/ai_supply_chain/">In the rush to build AI apps, please, please don't leave security behind</a></li>
</ul>
<p>In fact, Andrew Betts, who created the open source polyfill service project in the mid-2010s, told people earlier this year to not use polyfill.io at all. As we understand it, Betts maintained the project and contributed to its GitHub repo until a few years ago, arguing now that it's really no longer needed.</p>
<p>In February, he said he had nothing to do with the domain name's sale, and presumably the associated GitHub repo, to the Chinese CDN, and urged everyone to remove its code from their webpages as a precaution following the change in ownership.</p>
<p>"If you own a website, loading a script implies an incredible relationship of trust with that third party," he <a target="_blank" rel="nofollow" href="https://x.com/triblondon/status/1761852117579427975">Xeeted</a> at the time. "Do you actually trust them?"</p>
<p>Soon after other popular CDN providers including <a target="_blank" rel="nofollow" href="https://community.fastly.com/t/new-options-for-polyfill-io-users/2540">Fastly</a>, where Betts works today, and <a target="_blank" rel="nofollow" href="https://cdnjs.cloudflare.com/polyfill">Cloudflare</a> created <a target="_blank" rel="nofollow" href="https://polykill.io/">mirrors</a> of polyfill.io so that sites could continue to use the code for the meanwhile without having to load in stuff from a Chinese entity.</p>
<p>"The concerns are that any website embedding a link to the original polyfill.io domain will now be relying on Funnull to maintain and secure the underlying project to avoid the risk of a supply chain attack," Cloudflare's Sven Sauleau and Michael Tremante <a target="_blank" rel="nofollow" href="https://blog.cloudflare.com/polyfill-io-now-available-on-cdnjs-reduce-your-supply-chain-risk">said</a> in February.</p>
<p>"Such an attack would occur if the underlying third party is compromised or alters the code being served to end users in nefarious ways, causing, by consequence, all websites using the tool to be compromised," they added.</p>
<p>Now that seems to be the case. ®</p>                                
                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: R2R V2 – A open source RAG engine with prod features (139 pts)]]></title>
            <link>https://github.com/SciPhi-AI/R2R</link>
            <guid>40799791</guid>
            <pubDate>Wed, 26 Jun 2024 13:27:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/SciPhi-AI/R2R">https://github.com/SciPhi-AI/R2R</a>, See on <a href="https://news.ycombinator.com/item?id=40799791">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto">
  <a href="https://r2r-docs.sciphi.ai/" rel="nofollow"><img src="https://camo.githubusercontent.com/b9e2f36d308851fc635e9cde021acf0c5925878023d3d16dd06f7f1e760002be/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732e7363697068692e61692d334631364534" alt="Docs" data-canonical-src="https://img.shields.io/badge/docs.sciphi.ai-3F16E4"></a>
  <a href="https://discord.gg/p6KqD2kjtB" rel="nofollow"><img src="https://camo.githubusercontent.com/23ca552d7f7578a2737cf7ceea7272ec063869993600b813a23a38978172ee4f/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f313132303737343635323931353130353933343f7374796c653d736f6369616c266c6f676f3d646973636f7264" alt="Discord" data-canonical-src="https://img.shields.io/discord/1120774652915105934?style=social&amp;logo=discord"></a>
  <a href="https://github.com/SciPhi-AI"><img src="https://camo.githubusercontent.com/19e5d78787c6aeb45ecff6aa1732b8213eb9cb6b1a5437b2439579f8c4fd355a/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f5363695068692d41492f523252" alt="Github Stars" data-canonical-src="https://img.shields.io/github/stars/SciPhi-AI/R2R"></a>
  <a href="https://github.com/SciPhi-AI/R2R/pulse"><img src="https://camo.githubusercontent.com/bca0798c88e9c66c4bad61180d9592a1deaa0d2c7823dbda03d0ffc09a4dc79b/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f636f6d6d69742d61637469766974792f772f5363695068692d41492f523252" alt="Commits-per-week" data-canonical-src="https://img.shields.io/github/commit-activity/w/SciPhi-AI/R2R"></a>
  <a href="https://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/4d4571869159681d7f373eb6a4f9f340f407b409abd41c0f1ed74ea7c6b47a5b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d707572706c652e737667" alt="License: MIT" data-canonical-src="https://img.shields.io/badge/License-MIT-purple.svg"></a>
</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/SciPhi-AI/R2R/blob/main/docs/pages/r2r.png"><img src="https://github.com/SciPhi-AI/R2R/raw/main/docs/pages/r2r.png" alt="R2R Answer Engine"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">
The ultimate open source RAG answer engine
</h3><a id="user-content-the-ultimate-open-source-rag-answer-engine" aria-label="Permalink: 
The ultimate open source RAG answer engine
" href="#the-ultimate-open-source-rag-answer-engine"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">About</h2><a id="user-content-about" aria-label="Permalink: About" href="#about"></a></p>
<p dir="auto">R2R was designed to bridge the gap between local LLM experimentation and scalable, production-ready Retrieval-Augmented Generation (RAG). R2R provides a comprehensive and SOTA RAG system for developers, built around a RESTful API for ease of use.</p>
<p dir="auto">For a more complete view of R2R, check out the <a href="https://r2r-docs.sciphi.ai/" rel="nofollow">full documentation</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Key Features</h2><a id="user-content-key-features" aria-label="Permalink: Key Features" href="#key-features"></a></p>
<ul dir="auto">
<li><strong>📁 Multimodal Support</strong>: Ingest files ranging from <code>.txt</code>, <code>.pdf</code>, <code>.json</code> to <code>.png</code>, <code>.mp3</code>, and more.</li>
<li><strong>🔍 Hybrid Search</strong>: Combine semantic and keyword search with reciprocal rank fusion for enhanced relevancy.</li>
<li><strong>🔗 Graph RAG</strong>: Automatically extract relationships and build knowledge graphs.</li>
<li><strong>🗂️ App Management</strong>: Efficiently manage documents and users with rich observability and analytics.</li>
<li><strong>🌐 Client-Server</strong>: RESTful API support out of the box.</li>
<li><strong>🧩 Configurable</strong>: Provision your application using intuitive configuration files.</li>
<li><strong>🔌 Extensible</strong>: Develop your application further with easy builder + factory pattern.</li>
<li><strong>🖥️ Dashboard</strong>: Use the <a href="https://github.com/SciPhi-AI/R2R-Dashboard">R2R Dashboard</a>, an open-source React+Next.js app for a user-friendly interaction with R2R.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Table of Contents</h2><a id="user-content-table-of-contents" aria-label="Permalink: Table of Contents" href="#table-of-contents"></a></p>
<ol dir="auto">
<li><a href="#install">Install</a></li>
<li><a href="#r2r-quickstart">R2R Quickstart</a></li>
<li><a href="#r2r-dashboard">R2R Dashboard</a></li>
<li><a href="#community-and-support">Community and Support</a></li>
<li><a href="#contributing">Contributing</a></li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Install</h2><a id="user-content-install" aria-label="Permalink: Install" href="#install"></a></p>
<div dir="auto"><p dir="auto">Note</p><p dir="auto">Windows users are advised to use Docker to run R2R.</p>
</div>
<details open="">
<summary><b>Installing with Pip</b>&nbsp;🐍 </summary>
<div dir="auto" data-snippet-clipboard-copy-content="pip install r2r

# setup env
export OPENAI_API_KEY=sk-...
export POSTGRES_USER=YOUR_POSTGRES_USER
export POSTGRES_PASSWORD=YOUR_POSTGRES_PASSWORD
export POSTGRES_HOST=YOUR_POSTGRES_HOST
export POSTGRES_PORT=YOUR_POSTGRES_PORT
export POSTGRES_DBNAME=YOUR_POSTGRES_DBNAME"><pre>pip install r2r

<span><span>#</span> setup env</span>
<span>export</span> OPENAI_API_KEY=sk-...
<span>export</span> POSTGRES_USER=YOUR_POSTGRES_USER
<span>export</span> POSTGRES_PASSWORD=YOUR_POSTGRES_PASSWORD
<span>export</span> POSTGRES_HOST=YOUR_POSTGRES_HOST
<span>export</span> POSTGRES_PORT=YOUR_POSTGRES_PORT
<span>export</span> POSTGRES_DBNAME=YOUR_POSTGRES_DBNAME</pre></div>
<details>
<summary><b>Installing with Docker</b>&nbsp;🐳</summary>
<p dir="auto">Note: The R2R client must still be installed, even when running with Docker. Download the Python client with <code>pip install r2r</code>.</p>
<p dir="auto">To run R2R using Docker:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Setting up the environment. The right side is where you should put the value of your variable.
export OPENAI_API_KEY=sk-...
export POSTGRES_USER=YOUR_POSTGRES_USER
export POSTGRES_PASSWORD=YOUR_POSTGRES_PASSWORD
export POSTGRES_HOST=YOUR_POSTGRES_HOST
export POSTGRES_PORT=YOUR_POSTGRES_PORT
export POSTGRES_DBNAME=YOUR_POSTGRES_DBNAME

# Optional on first pull. Advised when fetching the latest updates.
docker pull emrgntcmplxty/r2r:latest

# Runs the image. If you set up the environment you don't need to modify anything.
# Otherwise, add your values on the right side of the -e commands.
# For Windows, remove the &quot;\&quot; from your command.
docker run -d \
   --name r2r \
   -p 8000:8000 \
   -e POSTGRES_USER=$POSTGRES_USER \
   -e POSTGRES_PASSWORD=$POSTGRES_PASSWORD \
   -e POSTGRES_HOST=$POSTGRES_HOST \
   -e POSTGRES_PORT=$POSTGRES_PORT \
   -e POSTGRES_DBNAME=$POSTGRES_DBNAME \
   -e OPENAI_API_KEY=$OPENAI_API_KEY \
   emrgntcmplxty/r2r:latest"><pre><span><span>#</span> Setting up the environment. The right side is where you should put the value of your variable.</span>
<span>export</span> OPENAI_API_KEY=sk-...
<span>export</span> POSTGRES_USER=YOUR_POSTGRES_USER
<span>export</span> POSTGRES_PASSWORD=YOUR_POSTGRES_PASSWORD
<span>export</span> POSTGRES_HOST=YOUR_POSTGRES_HOST
<span>export</span> POSTGRES_PORT=YOUR_POSTGRES_PORT
<span>export</span> POSTGRES_DBNAME=YOUR_POSTGRES_DBNAME

<span><span>#</span> Optional on first pull. Advised when fetching the latest updates.</span>
docker pull emrgntcmplxty/r2r:latest

<span><span>#</span> Runs the image. If you set up the environment you don't need to modify anything.</span>
<span><span>#</span> Otherwise, add your values on the right side of the -e commands.</span>
<span><span>#</span> For Windows, remove the "\" from your command.</span>
docker run -d \
   --name r2r \
   -p 8000:8000 \
   -e POSTGRES_USER=<span>$POSTGRES_USER</span> \
   -e POSTGRES_PASSWORD=<span>$POSTGRES_PASSWORD</span> \
   -e POSTGRES_HOST=<span>$POSTGRES_HOST</span> \
   -e POSTGRES_PORT=<span>$POSTGRES_PORT</span> \
   -e POSTGRES_DBNAME=<span>$POSTGRES_DBNAME</span> \
   -e OPENAI_API_KEY=<span>$OPENAI_API_KEY</span> \
   emrgntcmplxty/r2r:latest</pre></div>
<p dir="auto"><strong>Important:</strong> The Docker image of r2r operates in server and client mode, with the server being the Docker container and the client being your PC. This means you need to append <code>--client_server_mode</code> to all your queries.</p>
<p dir="auto">Additionally, your PC (acting as the client) needs to have Python, Pip, and the dependencies listed in the r2r folder of the repository. Therefore, you need to have the repository cloned on your computer and run <code>pip install r2r</code> in the root folder of the cloned repository.</p>
<p dir="auto">You have the option to run the client inside the terminal of the Docker container (to have everything in one place), but the use of <code>pip install r2r</code> and <code>--client_server_mode</code> is necessary.</p>
<p dir="auto">For local LLMs:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -d \
   --name r2r \
   --add-host=host.docker.internal:host-gateway \
   -p 8000:8000 \
   -e POSTGRES_USER=$POSTGRES_USER \
   -e POSTGRES_PASSWORD=$POSTGRES_PASSWORD \
   -e POSTGRES_HOST=$POSTGRES_HOST \
   -e POSTGRES_PORT=$POSTGRES_PORT \
   -e POSTGRES_DBNAME=$POSTGRES_DBNAME \
   -e OLLAMA_API_BASE=http://host.docker.internal:11434 \
   -e CONFIG_OPTION=local_ollama \
  emrgntcmplxty/r2r:latest"><pre>docker run -d \
   --name r2r \
   --add-host=host.docker.internal:host-gateway \
   -p 8000:8000 \
   -e POSTGRES_USER=<span>$POSTGRES_USER</span> \
   -e POSTGRES_PASSWORD=<span>$POSTGRES_PASSWORD</span> \
   -e POSTGRES_HOST=<span>$POSTGRES_HOST</span> \
   -e POSTGRES_PORT=<span>$POSTGRES_PORT</span> \
   -e POSTGRES_DBNAME=<span>$POSTGRES_DBNAME</span> \
   -e OLLAMA_API_BASE=http://host.docker.internal:11434 \
   -e CONFIG_OPTION=local_ollama \
  emrgntcmplxty/r2r:latest</pre></div>
</details>
<p dir="auto"><h2 tabindex="-1" dir="auto">R2R Quickstart</h2><a id="user-content-r2r-quickstart" aria-label="Permalink: R2R Quickstart" href="#r2r-quickstart"></a></p>
<p dir="auto">The following quickstart offers a step-by-step guide on running R2R locally as well as through the Python SDK. The guide ingests a list of provided provided documents and shows search, RAG, and advanced functionality. The script powering the quickstart can be found at <code>r2r/examples/quickstart.py</code>, and it can be configured and extended with sufficient developer familiarity.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/SciPhi-AI/R2R/blob/main/assets/quickstart.gif"><img src="https://github.com/SciPhi-AI/R2R/raw/main/assets/quickstart.gif" alt="quickstart" data-animated-image=""></a></p>
<details open="">
<summary><b>Document Ingestion and Management</b></summary>
<ol dir="auto">
<li>
<p dir="auto"><strong>Ingest Files</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m r2r.examples.quickstart ingest_files"><pre>python -m r2r.examples.quickstart ingest_files</pre></div>
</li>
<li>
<p dir="auto"><strong>View Document Info</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m r2r.examples.quickstart documents_overview"><pre>python -m r2r.examples.quickstart documents_overview</pre></div>
</li>
<li>
<p dir="auto"><strong>View User Overview</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m r2r.examples.quickstart users_overview"><pre>python -m r2r.examples.quickstart users_overview</pre></div>
</li>
</ol>
</details>
<details open="">
<summary><b>Search and RAG Operations</b></summary>
<ol dir="auto">
<li>
<p dir="auto"><strong>Search Documents</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m r2r.examples.quickstart search --query=&quot;Who was Aristotle?&quot;"><pre>python -m r2r.examples.quickstart search --query=<span><span>"</span>Who was Aristotle?<span>"</span></span></pre></div>
</li>
<li>
<p dir="auto"><strong>RAG Completion</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m r2r.examples.quickstart rag --query=&quot;What was Uber's profit in 2020?&quot;"><pre>python -m r2r.examples.quickstart rag --query=<span><span>"</span>What was Uber's profit in 2020?<span>"</span></span></pre></div>
</li>
<li>
<p dir="auto"><strong>Streaming RAG</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m r2r.examples.quickstart rag --query=&quot;What was Lyft's profit in 2020?&quot; --streaming=true"><pre>python -m r2r.examples.quickstart rag --query=<span><span>"</span>What was Lyft's profit in 2020?<span>"</span></span> --streaming=true</pre></div>
</li>
<li>
<p dir="auto"><strong>Hybrid Search RAG</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m r2r.examples.quickstart rag --query=&quot;Who is John Snow?&quot; --do_hybrid_search"><pre>python -m r2r.examples.quickstart rag --query=<span><span>"</span>Who is John Snow?<span>"</span></span> --do_hybrid_search</pre></div>
</li>
</ol>
</details>
<p dir="auto">For more detailed examples and advanced features, please refer to our <a href="https://r2r-docs.sciphi.ai/quickstart" rel="nofollow">Quickstart Guide</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">R2R Dashboard</h2><a id="user-content-r2r-dashboard" aria-label="Permalink: R2R Dashboard" href="#r2r-dashboard"></a></p>
<p dir="auto">Interact with R2R using our <a href="https://github.com/SciPhi-AI/R2R-Dashboard">open-source React+Next.js dashboard</a>. Check out the <a href="https://r2r-docs.sciphi.ai/cookbooks/dashboard" rel="nofollow">Dashboard Cookbook</a> to get started!</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Community and Support</h2><a id="user-content-community-and-support" aria-label="Permalink: Community and Support" href="#community-and-support"></a></p>
<ul dir="auto">
<li><a href="https://discord.gg/p6KqD2kjtB" rel="nofollow">Discord</a>: Chat live with maintainers and community members</li>
<li><a href="https://github.com/SciPhi-AI/R2R/issues">Github Issues</a>: Report bugs and request features</li>
</ul>
<p dir="auto"><strong>Explore our <a href="https://r2r-docs.sciphi.ai/" rel="nofollow">R2R Docs</a> for tutorials and cookbooks on various R2R features and integrations, including:</strong></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">RAG Cookbooks</h3><a id="user-content-rag-cookbooks" aria-label="Permalink: RAG Cookbooks" href="#rag-cookbooks"></a></p>
<ul dir="auto">
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/multiple-llms" rel="nofollow">Multiple LLMs</a>: A simple cookbook showing how R2R supports multiple LLMs.</li>
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/hybrid-search" rel="nofollow">Hybrid Search</a>: A brief introduction to running hybrid search with R2R.</li>
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/multimodal" rel="nofollow">Multimodal RAG</a>: A cookbook on multimodal RAG with R2R.</li>
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/knowledge-graph" rel="nofollow">Knowledge Graphs</a>: A walkthrough of automatic knowledge graph generation with R2R.</li>
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/local-rag" rel="nofollow">Local RAG</a>: A quick cookbook demonstration of how to run R2R with local LLMs.</li>
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/rerank-search" rel="nofollow">Reranking</a>: A short guide on how to apply reranking to R2R results.</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">App Features</h3><a id="user-content-app-features" aria-label="Permalink: App Features" href="#app-features"></a></p>
<ul dir="auto">
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/client-server" rel="nofollow">Client-Server</a>: An extension of the basic <code>R2R Quickstart</code> with client-server interactions.</li>
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/document-management" rel="nofollow">Document Management</a>: A cookbook showing how to manage your documents with R2R.</li>
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/observablity" rel="nofollow">Analytics &amp; Observability</a>: A cookbook showing R2Rs end to end logging and analytics.</li>
<li><a href="https://r2r-docs.sciphi.ai/cookbooks/dashboard" rel="nofollow">Dashboard</a>: A how-to guide on connecting with the R2R Dashboard.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Contributing</h2><a id="user-content-contributing" aria-label="Permalink: Contributing" href="#contributing"></a></p>
<p dir="auto">We welcome contributions of all sizes! Here's how you can help:</p>
<ul dir="auto">
<li>Open a PR for new features, improvements, or better documentation.</li>
<li>Submit a <a href="https://github.com/SciPhi-AI/R2R/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=feature_request.md&amp;title=">feature request</a> or <a href="https://github.com/SciPhi-AI/R2R/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=bug_report.md&amp;title=">bug report</a></li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Our Contributors</h3><a id="user-content-our-contributors" aria-label="Permalink: Our Contributors" href="#our-contributors"></a></p>
<a href="https://github.com/SciPhi-AI/R2R/graphs/contributors">
  <img src="https://camo.githubusercontent.com/871f123205045bcce7f372c629dfd89012f5a7f69a7f8908ce0b8f37fb3173d8/68747470733a2f2f636f6e747269622e726f636b732f696d6167653f7265706f3d5363695068692d41492f523252" data-canonical-src="https://contrib.rocks/image?repo=SciPhi-AI/R2R">
</a>
</details></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ghosts in the ROM (2012) (115 pts)]]></title>
            <link>https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/</link>
            <guid>40799090</guid>
            <pubDate>Wed, 26 Jun 2024 12:15:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/">https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/</a>, See on <a href="https://news.ycombinator.com/item?id=40799090">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/ghosts-in-the-rom-2/"><img decoding="async" src="https://www.nycresistor.com/wp-content/uploads/2014/04/Ghosts-in-the-ROM-300x143.jpg" alt="Ghosts in the ROM" width="300" height="143" srcset="https://www.nycresistor.com/wp-content/uploads/2014/04/Ghosts-in-the-ROM-300x143.jpg 300w, https://www.nycresistor.com/wp-content/uploads/2014/04/Ghosts-in-the-ROM.jpg 536w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>While digging through dumps generated from the Apple Mac SE ROM images we noticed that there was a large amount of non-code, non-audio data. Adam Mayer tested different stride widths and found that at 67 bytes (536 pixels across) there appeared to be some sort of image data that clearly was a picture of people. The rest of the image was skewed and distorted, so we knew that it wasn’t stored as an uncompressed bitmap.</p>
<p>After some investigation, we were able to decode the scrambled mess above and turn it into the full image with a hidden message from “<tt>Thu, Nov 20, 1986</tt>“:</p>
<p><a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/mac-se-engineers-0x1d93c/"><img fetchpriority="high" decoding="async" src="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x1D93C--300x199.jpg" alt="Mac SE engineers (0x1D93C)" width="300" height="199" srcset="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x1D93C--300x199.jpg 300w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x1D93C-.jpg 512w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>Read on for the reverse engineering details of how we recovered this and the other three photographs stored in the ROM, and some information about the Motorola 68000 era Macintosh.<br>
<span id="more-5453"></span><br>
<a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/treasure-in-the-trash/"><img decoding="async" src="https://www.nycresistor.com/wp-content/uploads/2014/04/Treasure-in-the-trash-224x300.jpg" alt="Treasure in the trash" width="224" height="300" srcset="https://www.nycresistor.com/wp-content/uploads/2014/04/Treasure-in-the-trash-224x300.jpg 224w, https://www.nycresistor.com/wp-content/uploads/2014/04/Treasure-in-the-trash.jpg 765w" sizes="(max-width: 224px) 100vw, 224px"></a></p>
<p>We found this Macintosh SE on the side of the road in Brooklyn and carried it to NYC Resistor. It boots, but lacks any media, so we decided to do some further digital archeology.</p>
<p><a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/mac-se/"><img loading="lazy" decoding="async" src="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-300x224.jpg" alt="Mac SE" width="300" height="224" srcset="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-300x224.jpg 300w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE.jpg 1024w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>We removed the two ROM chips (the ones in the middle of the board, above the VLSI ASIC that is the Integrated Woz Machine) and dumped them with my <a href="https://bitbucket.org/hudson/prom/">PROMdate</a> device. The pinout for the chips is the same as the M27C512 PROM, but with the <tt>Vpp</tt> pin reused for A17. Since it is a mask ROM that can’t be reprogrammed there is no need for the programming pin (Thanks, Nick!). This exapnds the address space to 128 KB (1024 kilobits) compared to the 64 KB of the M27C512 programmable ROM.</p>
<p><a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/promdate-now-with-avr-support/"><img loading="lazy" decoding="async" src="https://www.nycresistor.com/wp-content/uploads/2014/04/PROMdate-Now-with-AVR-support-300x224.jpg" alt="PROMdate: Now with AVR support" width="300" height="224" srcset="https://www.nycresistor.com/wp-content/uploads/2014/04/PROMdate-Now-with-AVR-support-300x224.jpg 300w, https://www.nycresistor.com/wp-content/uploads/2014/04/PROMdate-Now-with-AVR-support.jpg 1024w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>The m68k has a 16-bit wide bus, so each 128 KB 8-bit ROM has half a word and they need to be merged into a single 256 KB binary file. We knew we had a good dump and merge when <tt>strings</tt> on the file contained human readable textlike “<tt>Chicago</tt>“, “<tt>PACK</tt>” and “<tt>CDEF</tt>” (if you have the byte order wrong these will be “<tt>APKC</tt>“, etc).</p>
<p><a href="http://www.eeggs.com/items/2258.html">Reports of the easter egg</a> said that it could be found by jumping to address <tt>0x41D89A</tt>. I was able to boot the ROMs in <a href="http://minivmac.sourceforge.net/">Mini vMac</a> and confirm that these were indeed the secret images that had already been discovered. That could have been the end of it, but we wanted to know how they were stored and displayed, and to be able to look for any other surprises stored in the ROM, so further investigation was required.</p>
<p>To disassemble the ROM, I found it easiest to convert the raw binary dump to an ELF file so that <tt>objdump</tt> will process it. We know from history that the ROM was mapped to address <tt>0x0040_0000</tt> (24 MB) in memory, so we set the starting address of the ELF file there. IDA Pro is another great tool for doing exactly this sort of reverse engineering, but we’re using free software for this analysis.</p>
<pre>m68k-elf-objcopy 
  --change-addresses=0x400000 
  --redefine-sym _binary_mac_se_bin_start=rom 
  --strip-symbol _binary_mac_se_bin_size 
  --strip-symbol _binary_mac_se_bin_end 
  -I binary 
  -O elf32-m68k 
  -B m68k 
  roms/mac-se.bin 
  roms/mac-se.elf 
</pre>
<p>Looking at the easter egg function address with <tt>m68k-elf-objdump -D roms/mac-se.elf</tt>, we see:</p>
<pre>  41d89a:       4eba 0018       jsr %pc@(41d8b4 &lt;rom+0x1d8b4&gt;)
  41d89e:       5847            addqw #4,%d7
  41d8a0:       0287 0000 000c  andil #12,%d7
  41d8a6:       6100 002e       bsrw 41d8d6 &lt;rom+0x1d8d6&gt;
  41d8aa:       307c 00b5       moveaw #181,%a0
  41d8ae:       <b>a03b</b>            0120073
  41d8b0:       4efa ffec       jmp %pc@(41d89e &lt;rom+0x1d89e&gt;)
</pre>
<p>The <tt>0xa03b</tt> instruction is odd — Motorola reserved all instructions that start with <tt>0xA</tt>, so this it is not a legal m68k instruction. Instead it will trigger an illegal instruction trap, and the trap handler looks at the next word and vectors to the appropriate handler. This A-line or A-trap is the official way to enter the <a href="https://en.wikipedia.org/wiki/Macintosh_Toolbox">Macintosh Toolbox</a> and saves significant code space over the normal system call methods. <a href="http://www.mac.linux-m68k.org/devel/macalmanac.php">This list of codes</a> tells us that it is <tt>_Delay</tt> and that the value in <tt>%a0</tt> will be used as an argument for how long to delay. We’ll be refering to this list again to understand what is going on in the assembly code.<br>
Based on this we can translate this function into something like “C”:</p>
<pre>void easter_egg(void)
{
    func_41d8b4();
    while (1)
    {
        d7 = (d7 + 4) &amp; 0xC;
        func_0x41d8d6();
        _Delay(181);
    }
}
</pre>
<p>The first function that this calls is <tt>0x41d8b4</tt>:</p>
<pre>  41d8b4:       31fc ffff 0b9e  movew #-1,b9e
  41d8ba:       594f            subqw #4,%sp
  41d8bc:       2f3c 6262 6d63  movel #1650617699,%sp@-
  41d8c2:       4267            clrw %sp@-
  41d8c4:       a9a0            0124640
  41d8c6:       201f            movel %sp@+,%d0
  41d8c8:       6700 0050       beqw 41d91a &lt;rom+0x1d91a&gt;
  41d8cc:       2040            moveal %d0,%a0
  41d8ce:       21d0 0a78       movel %a0@,a78
  41d8d2:       7e00            moveq #0,%d7
  41d8d4:       4e75            rts
...
  41d91a:       a9ff            0124777
</pre>
<p>This makes the A-line call <tt>0xA9A0</tt>, or <tt>_GetResource(0x62626d63)</tt> and sets <tt>0xb9e</tt>, the <tt>RomInsertFlag</tt> to instruct the search function to look in the ROM tables. If the resource get fails it jumps to a debugger trap (<tt>0xA9FF</tt>), which halts the machine. Otherwise it zeros <tt>%d7</tt> and reads the address of the resource from the address returned by <tt>_GetResource</tt> and writes that value into the global memory location <tt>0xa78</tt> (<tt>AppleScratch</tt>).</p>
<p>If you speak ASCII, the constant might look interesting. It is a multi-byte character ‘<tt>bbmc</tt>‘, which you might have noticed in the <tt>strings</tt> output at offset <tt>0x1af4e</tt>, in what appears to be some sort of structure:</p>
<pre>001af3e: 5041 434b 0002 006a 7463 736c 0000 008e  PACK...jtcsl....
001af4e: 6262 6d63 0000 <b>009a</b> 5345 5244 0000 00a6  <b>bbmc</b>....SERD....
001af5e: 4452 5652 0004 00b2 4344 4546 0001 00ee  DRVR....CDEF....
001af6e: 4b43 4852 0000 0106 4b4d 4150 0000 0112  KCHR....KMAP....
001af7e: 4d42 4446 0000 011e 4d44 4546 0000 012a  MBDF....MDEF...*
001af8e: 5744 4546 0001 0136 4355 5253 0003 014e  WDEF...6CURS...N
001af9e: 464f 4e54 0004 017e 0005 ffff 5801 b122  FONT...~....X.."
001afae: 0000 0000 0004 ffff 5801 c188 0000 0000  ........X.......
001afbe: 0007 ffff 5801 d348 0000 0000 0000 ffff  ....X..H........
001afce: 5801 d896 0000 0000 0000 ffff <b>5801 d924</b>  X...........X..$
</pre>
<p>As of now we don’t know how to decode the structure, nor what <tt>%a0</tt> points to when it is dereferenced into the global at <tt>0xa78</tt>. We’ll come back to that later, but it clearly has something to do with <tt>0x009A</tt> and the bit in red at <tt>0x1AFDA</tt>.</p>
<p>Moving on to <tt>func_0x41d8d6()</tt>, with psudeo-code interspersed:</p>
<pre>  41d8d6:       moveal a78,%a0
  41d8da:       addaw %d7,%a0
  41d8dc:       movel %a0@,%d3     d3 = _a78[d7];
  41d8de:       movel a78,a7c
  41d8e4:       addl %d3,a7c       _a7c = _a78 + d3;
  41d8e8:       movel 824,a80      _a80 = _824 // ScrnBase
  41d8ee:       movel #340,%d3     d3 = 340;
                                   do {
  41d8f4:       pea a7c
  41d8f8:       pea a80
  41d8fc:       movew #72,%sp@-        // 72 * 8 == 576 bits
  41d900:       a8d0                   _UnpackBits(&amp;_a7c, &amp;_a80, 72)
  41d902:       subql #8,a80           _a80 -= 8;
  41d906:       dbf %d3,41d8f4     } while (d3--)
  41d90a:       pea a7c
  41d90e:       pea a80
  41d912:       movew #64,%sp@-
  41d916:       a8d0                _Unpackbits(&amp;_a7c, &amp;_a80, 64);
  41d918:       rts                 return;
</pre>
<p>Rewriting these three functions entire code in something more like C:</p>
<pre>void draw_bitmap(const uint8_t * packed)
{
	uint8_t * fb = _ScrnBase;

	for (int y = 0 ; y &lt; 340 ; y++)
	{
		_UnpackBits(&amp;packed, &amp;fb, 72);
		fb -= 8;
	}

	_UnpackBits(&amp;packed, &amp;fb, 64);
}

void easter_egg(void)
{
	const uint8_t ** bbmc = _GetResource('bbmc');
	if (!bbmc)
		halt();
	int image = 0;

	while (1)
	{
		draw_bitmap(bbmc[i]);
		i = (i + 1) % 4;
		_Delay(181);
	}
}
</pre>
<p>Adam found the format expected by <tt>_UnpackBits</tt> defined in <a href="https://en.wikipedia.org/wiki/PackBits">PackBits on wikipedia</a>, and wrote a <a href="https://github.com/phooky/PROM/blob/master/tools/unpackbits.py">python unpackbits.py</a> that can be given the offsets of the images in the ROM. So the last piece of the puzzle was to figure out where they are located.</p>
<p>And this is where I cheated… Based on a binary search of the image space using <tt>unpackbits.py</tt>, I found that the first one started at <tt>0x1d93c</tt>. Looking slightly earlier in the ROM dump, I saw:</p>
<pre>001d920: 0000 0064 0000 <b>0018</b> 0000 <b>5618</b> 0000 <b>a71c</b>  ...d......V.....
001d930: 0000 <b>f700</b> 0001 4281 0000 0000 30aa 552a  ......B.....0.U*
001d940: 52a5 294a 5294 a529 4a52 2449 1224 44a9  R.)JR..)JR$I.$D.
</pre>
<p>That <tt>0x0000_0018</tt> looks right; <tt>0x1D924 + 0x18 = 0x1D93C</tt>. And immediately afterwards are additional offsets that look like the right spacing for the other bitmaps. That puts the others at <tt>0x22F3C</tt>, <tt>0x28040</tt>, <tt>0x2D024</tt> and something unused at <tt>0x31BA5</tt>. Looking back at the ROM dump from the region of the resource definition, we even see an offset that points to <tt>0x5801D924</tt>. (Don’t be fooled by the leading <tt>0x58</tt> — the Mac SE only had 24-bit addresses, so it will be ignored by the CPU).</p>
<p>Running Adam’s tool, combined with my <tt>hex2png</tt> on the regions produced success for the four images!</p>
<pre>for offset in 1D93C 22F3C 28040 2D024; do
  off_decimal=`echo 16i $offset p | dc`
  ../unpackbits.py $off_decimal 5000 &lt; mac-se.bin 
	| ../hex2png -w 576 -y 384 -s 24576 
	| convert -crop 512x341+0+0 - 0x$offset.png  
done
</pre>
<p>So here is the team that twenty five years ago found space in the ROM to include their own images as an easter egg. Can anyone identify them? Where are they now? Are they “<tt>JCSLWRLBBMABOEMTDAHJTCFJLMBKCRCLAKEHBRDCDAFSHFT</tt>“? If you do know who they are, please send them our thanks for a fun puzzle!</p>
<p><a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/mac-se-engineers-0x22f3c/"><img loading="lazy" decoding="async" src="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x22F3C--300x199.jpg" alt="Mac SE engineers (0x22F3C)" width="300" height="199" srcset="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x22F3C--300x199.jpg 300w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x22F3C-.jpg 512w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p><a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/mac-se-engineers-0x28040/"><img loading="lazy" decoding="async" src="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x28040--300x199.jpg" alt="Mac SE engineers (0x28040)" width="300" height="199" srcset="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x28040--300x199.jpg 300w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x28040-.jpg 512w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p><a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/mac-se-engineers-0x2d024/"><img loading="lazy" decoding="async" src="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x2D024--300x199.jpg" alt="Mac SE engineers (0x2D024)" width="300" height="199" srcset="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x2D024--300x199.jpg 300w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-engineers-0x2D024-.jpg 512w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>What is in that fifth region? It didn’t seem to have any image data of note, but it might be audio based on the strings in the ROM. Perhaps that’s a project for later…</p>
<pre>0031ba0: 00b9 00b9 0000 c000 08fc 0000 0068 600a  .............h`.
0031bb0: 0000 5345 5244 0000 0003 487a 0074 487a  ..SERD....Hz.tHz
0031bc0: 0058 487a 003c 487a 0020 76fa 3003 a53d  .XHz.&lt;Hz. v.0..=
0031bd0: a029 2050 225f 20c9 30d1 30bc 0003 5343  .) P"_ .0.0...SC
</pre>
<p>These images are still copyright Apple Computer, of course. That means they have been:</p>
<p><a href="https://www.nycresistor.com/2012/08/21/ghosts-in-the-rom/mac-se-rom-images/"><img loading="lazy" decoding="async" src="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-ROM-images-300x300.jpg" alt="Mac SE ROM images" width="300" height="300" srcset="https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-ROM-images-300x300.jpg 300w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-ROM-images-150x150.jpg 150w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-ROM-images-96x96.jpg 96w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-ROM-images-24x24.jpg 24w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-ROM-images-36x36.jpg 36w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-ROM-images-48x48.jpg 48w, https://www.nycresistor.com/wp-content/uploads/2014/04/Mac-SE-ROM-images-64x64.jpg 64w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Half of Workers Around the World Are Struggling with Burnout (137 pts)]]></title>
            <link>https://www.bcg.com/press/11june2024-half-of-workers-around-the-world-struggling-with-burnout</link>
            <guid>40799038</guid>
            <pubDate>Wed, 26 Jun 2024 12:10:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bcg.com/press/11june2024-half-of-workers-around-the-world-struggling-with-burnout">https://www.bcg.com/press/11june2024-half-of-workers-around-the-world-struggling-with-burnout</a>, See on <a href="https://news.ycombinator.com/item?id=40799038">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                      <ul><li><b>New Study from BCG Reveals That When Employees Feel Included at Work, the Likelihood of Burnout Is Halved</b></li><li><b>Report Highlights Four Key Employee Sentiments That Have the Biggest Impact on Inclusion</b></li></ul><p><b>BOSTON—</b>At some point in their careers, most, if not all, employees around the world have likely experienced symptoms of burnout at work—a state of exhaustion characterized by disenchantment with one’s job and a sense of inefficiency. A new report released today by Boston Consulting Group (BCG) reveals that, on average, 48% of workers from eight countries indicate that they are currently grappling with burnout.</p><p>Based on a survey of 11,000 desk-based and frontline workers in eight countries (Australia, Canada, France, Germany, India, Japan, UK, and US) and titled <a href="https://www.bcg.com/publications/2024/four-keys-to-boosting-inclusion-and-beating-burnout" data-path="four-keys-to-boosting-inclusion-and-beating-burnout" target="_blank" rel="noopener noreferrer"><i>Four Keys to Boosting Inclusion and Beating Burnout</i></a>, the report also reveals that when employees feel included at work, burnout is halved.</p><p>Inclusion is central to building and maintaining a successful workforce. Inclusion in the workplace means that employees feel valued, respected, supported, and like they belong. Workers experiencing higher inclusion are also more likely to stay in their jobs, decreasing turnover costs for businesses.</p><p>For this research, BCG quantified inclusion as a score of how inclusive an employee finds the workplace to be, using <a href="https://www.bcg.com/publications/2023/how-to-improve-inclusion-in-the-workplace" data-path="how-to-improve-inclusion-in-the-workplace" target="_blank" rel="noopener noreferrer">BCG’s BLISS Index</a>, a statistically rigorous tool that identifies the factors that most strongly influence feelings of inclusion in the workplace.</p><p>Further, the survey revealed four sentiments that have the greatest impact on employees’ overall sense of feeling included:<br></p><ul><li>Good access to resources</li><li>Senior managerial support</li><li>Psychological safety with direct manager</li><li>Fair and equal opportunity for success</li></ul><p>These signal how much, or how little, people are experiencing inclusion in the workplace. When employees feel that these sentiments are positively addressed in their workplace, they feel <i>more</i> included and <i>less</i> burned out. Unfortunately, these most important sentiments are also the ones where survey respondents indicated the lowest levels of satisfaction.&nbsp;</p><p>And while burnout is prevalent across all employee types, it’s far higher for certain subgroups. Women, members of the LGBTQ+ community, people with disabilities, and deskless workers experienced up to 26% higher burnout. Moreover, these employee groups reported lower inclusion than employees who were in majority groups or were desk-based.</p><p>Feeling included means many different things to many different people. It follows that building inclusion can be daunting. But focusing on these four most important sentiments gives employers a clear starting point to ask workers the right questions and focus their efforts to understand the employee experience.</p><p>“Inclusion doesn’t end at recruitment. It requires listening to workers on an ongoing basis and addressing their pain points. It must address both the employee offer and the daily experience of employees with their managers,” said Gabrielle Novacek, a managing director and partner at BCG and coauthor of the report.</p><p>“By focusing on the four key areas and diagnosing where they may be falling short in their current efforts to meet their employees’ needs, companies will be able to identify where to invest and innovate to improve feelings of inclusion and reduce burnout. Establishing programs to meet these needs will help employers avoid the costs associated with burnout, be able to attract talent, and reap the benefits of a thriving workforce.”</p><p>Download the publication <a href="https://www.bcg.com/publications/2024/four-keys-to-boosting-inclusion-and-beating-burnout" data-path="four-keys-to-boosting-inclusion-and-beating-burnout" target="_blank" rel="noopener noreferrer">here</a>.&nbsp;</p><p><b>Media Contact:</b><br>Eric Gregoire--<a href="mailto:gregoire.eric@bcg.com" data-path="mailto:gregoire" target="_blank" rel="noopener noreferrer">gregoire.eric@bcg.com</a></p>
                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[FICO and the Credit Bureau Cartel (113 pts)]]></title>
            <link>https://www.thebignewsletter.com/p/inside-fico-and-the-credit-bureau</link>
            <guid>40797217</guid>
            <pubDate>Wed, 26 Jun 2024 07:14:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.thebignewsletter.com/p/inside-fico-and-the-credit-bureau">https://www.thebignewsletter.com/p/inside-fico-and-the-credit-bureau</a>, See on <a href="https://news.ycombinator.com/item?id=40797217">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p><em>The attorney in a country town is as much a businessman as the corporation counsel in a great metropolis. - William Jennings Bryan, 1896</em></p><p>The director of the Consumer Financial Protection Bureau, Rohit Chopra, coined the term ‘junk fee,’ and has begun restructuring how financial markets work, removing medical debt from credit reports, fostering competition in credit cards, and examining big tech’s entrance into payments. And yet, for ideological reasons, to many bankers, Chopra is a villain running a government agency full of bureaucratic demons, whose goal is to force them to do paperwork on behalf of nebulous ‘consumers.’ </p><p><span>So it was a </span><a href="https://www.housingwire.com/podcast/james-kleimann-on-va-and-cfpb-news-as-well-as-credit-scores-and-freddies-proposal-for-buying-closed-end-seconds/" rel="">weird da</a><span>y last month when Chopra had a room full of mortgage bankers nodding their heads in furious agreement, and even angry at their own trade association for helping a monopoly take advantage of them. HousingWire’s James Kleimann and Sarah Wheeler were shocked, calling it “Must-See TV.” </span></p><div id="youtube2-LJxKNY1G1kQ" data-attrs="{&quot;videoId&quot;:&quot;LJxKNY1G1kQ&quot;,&quot;startTime&quot;:&quot;1060&quot;,&quot;endTime&quot;:null}" data-component-name="Youtube2ToDOM"><p><iframe src="https://www.youtube-nocookie.com/embed/LJxKNY1G1kQ?start=1060&amp;rel=0&amp;autoplay=0&amp;showinfo=0&amp;enablejsapi=0" frameborder="0" loading="lazy" gesture="media" allow="autoplay; fullscreen" allowautoplay="true" allowfullscreen="true" width="728" height="409"></iframe></p></div><p><span>The Mortgage Bankers Association annual conference started with the typical attack on the government, with President and CEO Bob Broeksmit complaining about ‘regulatory knots’ while decrying government crackdowns on junk fees. CFPB Directors often attend these conferences to communicate with the industry, and the conversations aren’t always pleasant. This one didn’t seem like it would be pleasant either. But Chopra went on stage a few hours later and </span><a href="https://www.consumerfinance.gov/about-us/newsroom/prepared-remarks-of-cfpb-director-rohit-chopra-at-the-mortgage-bankers-association/" rel="">discussed</a><span> an increasing cost center for banks, which is the credit bureaus and FICO. </span></p><p>“Mortgage lenders in the U.S. increasingly face a lack of competition when it comes to accessing data and reports needed for loan origination,” he said. “In many cases, a handful of firms have cornered the market, allowing those companies to levy a tax on every mortgage application or transaction in the country.” Three firms dominate credit reporting: Equifax, Experian, and TransUnion. And just one company handles algorithms, the Fair Isaac Corporation, which sells the FICO score. “Mortgage lenders have shared that costs for credit reports and scores have increased,” he said. “Sometimes by 400% since 2022.” Chopra then went on to lay out some regulatory authority the CFPB has to impose price caps.</p><p><span>The audience, surprisingly for a free market capitalist loving group of lenders, was eating it up.</span><em> </em><span>Why? Well it’s the same reason app developers hate Apple and Google, or cattle ranchers dislike JBS, or producers fear Netflix. The credit bureau cartel are </span><em>gatekeepers </em><span>to their market. And they are being squeezed, increasingly </span><a href="https://www.nationalmortgagenews.com/news/lenders-keep-losing-money-on-every-loan-produced-mba-says#:~:text=Independent%20mortgage%20bankers%20continued%20to,by%20the%20Mortgage%20Bankers%20Association." rel="">losing</a><span> money on every mortgage they issue.</span></p><p>Consumers pay for credit scoring, but they do so indirectly. When someone is thinking of buying a house, he or she visits a mortgage lender. That lender must buy a credit score from FICO and the bureaus to see what that person can afford. When a customer takes out a loan, that mortgage banker has to purchase another more complete report of credit information.  </p><p>Even if a lender thinks the customer would be a good risk, the lender has to buy a FICO score regardless. Mortgage bankers don’t carry the capital to hold the mortgages they make. Instead they make a loan, and then send it onward to the capital markets. First, the government guarantees most mortgages through Fannie Mae and Freddie Mac as well as other programs for veterans and first time homebuyers. Then, the government in turn sends these guaranteed mortgages to Wall Street. This complex process relies on a standard to price the loans, and that standard is FICO, combined with the credit information from the three bureaus.  </p><p>Mortgage bankers aren’t typical Wall Street bankers. While mortgage lending can be done by the big guys, real estate is an inherently localized industry with a clubby network of realtors, title insurers, and various other specialists in the home-buying process, so independent players have a strong foothold. There are roughly a thousand independent mortgage lending firms nationwide, and these lenders live everywhere. So their anger at FICO and the credit bureaus has an element of regional resentment, since they are not Wall Street traders, but are local community members trying to help people get homes.</p><p><span>In January of 2024, the </span><a href="https://www.communitylender.org/wp-content/uploads/2024/01/CHLA-Credit-Score-White-Paper-FINAL-VSN.pdf" rel="">Community Home Lenders of America</a><span> discussed this dynamic with FICO, calling it a utility, which it is. The “combination of FICO’s extremely high market share, and the fact that Washington agencies require lenders to use this company’s product, means that FICO has unilateral, solid-gold market power, the type rarely seen in any US industry short of highly regulated utilities, whereby rates are set by public-utility boards or commissions.” </span></p><p>But the companies themselves know it and say it. In November 2011, then-CEO of Fair Isaac, Mark Greene, explained that the “network effect” of “FICO Scores . . . being sort of the standard language” and “having everybody . . . standardize on a FICO Score, that’s magic.” FICO sells 10 billion scores every year, four times the number of McDonald’s burgers and twice the number of Starbucks coffees sold annually. According to the company itself, nine out of ten lending decisions rely on FICO. </p><p><span>Credit scoring used to cost a relatively small amount of money, but now it can be up to $60 per pull, with the price quadrupling over the last two years for no reason whatsoever. Only one out of every ten prospective customers ends up taking out a mortgage, so higher prices fronted by mortgage bankers add up. And it’s starting to be a major expense, driving some of the mortgage lenders out of the business entirely. In other words, Chopra, though disliked for calling out junk fees charged by bankers, was actually </span><em>attacking a junk fee that</em><span> </span><em>mortgage bankers themselves have to pay.</em></p><p>After his speech, Chopra and Broeksmit sat down for a public discussion, and Broeksmit pushed back on the criticism of FICO, which had led the price hike charge. And here’s where it got fascinating. Broeksmit was supposed to be representing the mortgage bankers in his association. But Chopra pointed out that, though it was a Mortgage Bankers Association event, the session itself was sponsored by FICO. “That was a wild moment right there,” recounted Wheeler on the HousingWire podcast. The head of the Mortgage Bankers Association, was being bribed by a monopolist to betray the bankers he was supposed to represent. And he was just called out for it.</p><p><span>To understand the roots of this fight, we have to go back to the origins of credit reporting, which extend deep into American history. For 150 years, you could simply escape your debt by moving somewhere else, and adopting an entirely new identity. That’s the premise of the iconic American novel </span><em>The Great Gatsby,</em><span> the story of a mysterious East coast tycoon who has hidden his past. Today, </span><em>The Great Gatsby </em><span>couldn’t be written. Or if it were, it would be a one page story, in which someone runs a credit check on a rich liar named Jay Gatsby. </span></p><p><span>In other words, national credit reports are foundational to modern American society, binding us to one another financially as a nation through a network of computerized records. And that national market of identity is relatively new. Until 1970, credit reporting was localized, mostly through coops of town bankers who hired detectives to investigate borrowers, collecting gossip from snitches about who drank too much, who was a Communist, who slept around, and so forth. As the book </span><em>The Naked Society </em><span>noted, bureaus looked at a consumer’s "honesty, potentially dangerous habits, and manliness." Such information was kept in large paper files, it was secret, and it could often lead to someone never being able to get a job in a certain area, and they would never know why. A Gatsby was plausible, since you could escape your debts and your very identity by leaving one state and moving to another. </span></p><p>Credit bureaus, like the FBI who collaborated with them, were creepy, with no limits on their data collection practices. And they saw themselves explicitly as disciplinarians. In 1968, leading credit bureau Retail Credit Corporation President Lee Burge told Congress that the “availability of record information imposes a discipline on the American citizen. He becomes more responsible for his performance whether as a driver of his car, as an employee in his job performance, or as a payor to his creditors. But this discipline is a necessary one if we are to enjoy the fruits of our economy and the present freedom of our private enterprise.”</p><p>After a lot of complaints, Congress acted. In 1970, the only woman on the Banking Committee, Leonor Sullivan, collaborated with Rep. Wright Patman and Senator William Proxmire to write and pass the Fair Credit Reporting Act. This law eliminated the collection of the gossip, which often included information on race, gender, and sexuality. FCRA gave consumers a set of rights over their credit reporting files even though these files were held by private firms, and set limits on what data could be collected and how it could be used. No longer was it acceptable to take someone’s sex life and put it in a secret file, with that information leading to the inability to get a job for years. The new law treated the credit reporting bureaus as public utilities. </p><p>FCRA was in a sense the last of the New Deal legal arrangements, passed at a moment of immense suspicion over government surveillance, part of a set of rules limiting the use of personal information by the Federal government and corporations. But FCRA also structured the national credit market, fostering the computerization of credit information nationwide, and designed to regulate the emerging industry of credit cards, which had picked up steam during the 1960s. “When a man walks into a bank to get a loan,” said a Bank of America executive in Congressional testimony, “he gives up a certain amount of privacy.” Now the bank’s ability to invade his privacy would be regulated and standardized, with the result that a loan could be done in a national market. The Gatsby era ended.</p><p><span>There were </span><a href="https://www.communitylender.org/wp-content/uploads/2024/01/CHLA-Credit-Score-White-Paper-FINAL-VSN.pdf" rel="">two thousand credit</a><span> bureaus across the U.S. when FCRA passed. By the 1990s, due to this law and to a relaxation of antitrust, they </span><a href="https://www.philadelphiafed.org/-/media/frbp/assets/consumer-finance/discussion-papers/creditreportinghistory_062002.pdf" rel="">consolidated</a><span> into three main firms, Equifax, Experian, and TransUnion. These bureaus take advantage and encourage network effects to exclude rivals. They use a “give-to-get” rule, meaning that a lender that wants credit information to determine whether to offer a loan has to give data on its customers back to the credit bureaus in return for that information. The credit bureaus, fostered by regulatory choices and consolidation, were the first wave of big data firms, laying the groundwork for corporations like Google and Facebook years later.</span></p><p>A different corporation, applies an algorithm to these credit bureau files to give each  consumer a specific score, which is known as a FICO score. Having one number for a credit risk simplified lending and borrowing, especially as loans were split up into tranches and sold to Wall Street in large portfolios. In the 1990s, the government, through its various housing finance programs and entities Fannie Mae and Freddie Mac, adopted FICO scores as a way to price mortgage loans. In many ways, FICO is the first artificial intelligence firm. </p><p><span>By the 2000s, the credit bureaus and FICO organized the national credit market, especially when it came to home buying. These firms aren’t just private entities, but have become key parts of governance. If you want to verify </span><a href="https://www.thebignewsletter.com/p/how-equifax-became-a-private-irs" rel="">someone’s work and income</a><span>, for instance, or manage unemployment insurance claims at scale, you use one of these bureaus, most likely Equifax (which is the successor to the Retail Credit Corporation.) That firm recently </span><a href="https://finance.yahoo.com/news/equifax-inc-nyse-efx-q1-155655174.html" rel="">bragged</a><span> it signed a billion dollar contract with the Center for Medicare and Medicaid Services, “over a billion dollars that had a price increase in it,” as well as “annual escalators.” Similarly, Experian is now running </span><a href="https://www.experian.com/blogs/healthcare/100-of-the-u-s-population-now-has-a-universal-patient-identifier-qa-with-experian-health-leader-on-why-this-matters/" rel="">identity</a><span> in our health care system with NCPDP/Experian Universal Patient Identifier.</span></p><p><span>The Fair Credit Reporting Act, the first big data governance law, has been updated multiple times, expanding it to include data furnishers, allowing consumers to get free credit information, and moving regulatory enforcement of the law in 2010 from the Federal Trade Commission to the Consumer Financial Protection Bureau. If you find an error in your report, you can ask for it to be corrected. However, one statutory flaw with the Fair Credit Reporting Act is that responsibility for errors rests with the consumer, not the bureau. Because of this, 44% of consumers who </span><a href="https://www.usatoday.com/story/money/2024/05/26/credit-report-errors-what-to-do/73816078007/#:~:text=%E2%97%BE%20Among%20those%20who%20read%20their%20reports%2C%2044%25%20found%20errors.&amp;text=%E2%97%BE%20Of%20the%20errors%2C%2027,wise%20to%20read%20their%20reports." rel="">have looked</a><span> at their credit reports found errors, which can cost credit, jobs, or government benefits.</span></p><p><span>The centralization of credit reporting and scoring had the effect of fostering market power among credit bureaus, which most consumers saw not in terms of cost, but in terms of quality and identity theft. In 2017, Equifax had one of the worst data breaches in history, one that led to Congress </span><a href="https://www.congress.gov/event/116th-congress/house-event/LC64089/text" rel="">putting</a><span> credit bureau CEOs on the hot seat in a hearing. It didn’t dent its market position, however. So even Patrick McHenry, the most favorable Wall Street Republican, criticized the bureaus. “There is no better example than the oligopoly that was created than the three that are sitting before us here today,” he said. “Our credit reporting system would be well-served by increased competition." </span></p><p>The monetary cost not levied on consumers is paid by the lenders, employers, government, and other users of credit reports and identity services. And since completing a mortgage loan requires a FICO score from each one of the credit bureaus, what is known as a ‘trimerge,’ all three bureaus plus FICO have massive pricing power. FICO tends to lead the price increase, hiking its algorithm cost, which then allows credit bureaus to raise what they charge. These four firms are all doing quite well, which is odd, considering that mortgage lending is way down due to higher interest rates.</p><p><span>FICO, for instance, offers amazing returns to investors. FICO’s CEO, Will Lansing, has </span><a href="https://www.dropbox.com/scl/fi/4nomq47281anynu2rzwm8/Amended-complaint-10-2023.pdf?rlkey=nzhde04j1osy0io98ka5p26vo&amp;dl=0" rel="">noted</a><span> publicly  that his firm has “quite a bit of discretion in whether we want our margins to be higher or lower or where they are.” In 2023, its operating margin </span><a href="https://fico.gcs-web.com/static-files/20bbbc58-1ef1-4881-8504-2c94975b8c0b" rel="">was</a><span> 51%, and it spent just $159 million on research vs $407.3 million of stock buybacks. </span></p><p><span>The three bureaus are benefitting as well. In the first quarter of this year Equifax CEO’s Mark Begor in a </span><a href="https://www.insidermonkey.com/blog/equifax-inc-nyseefx-q1-2024-earnings-call-transcript-1289948/#q-and-a-session" rel="">call</a><span> with investors, talking about mortgage credit products stated: “Obviously, we take price up every year, which we did in 2024.” TransUnion’s CFO Ted Cello, similarly, in an </span><a href="https://www.insidermonkey.com/blog/transunion-nysetru-q4-2023-earnings-call-transcript-1258559/#q-and-a-session" rel="">investor</a><span> call said “For 2024, we expect mortgage inquiries to be down roughly 5% and our revenues to increase roughly 25%, primarily” due to FICO’s pricing increase. And Experian CFO Lloyd Pitchford </span><a href="https://seekingalpha.com/article/4660060-experian-plc-expgf-q2-2024-earnings-call-transcript" rel="">noted</a><span> a “pricing benefit” from FICO’s price hikes. Mortgage volume at his firm collapsed by 30%, but revenue dropped by just 3%.</span></p><p><span>To understand the market power involved, just look at FICO’s </span><a href="https://www.ficoscore.com/about" rel="">About</a><span> page, which brags about having a monopoly. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png" width="1084" height="265" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:265,&quot;width&quot;:1084,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:108546,&quot;alt&quot;:&quot;&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" title="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b10d4f7-2fcc-4cf0-a371-7bd4be4757e2_1084x265.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>But just because TransUnion, Equifax, Experian, and FICO all operate in a cartel-like arrangement doesn’t mean they have always been friendly. In 2006, the three credit bureaus decided they were tired of FICO’s position in the industry, and created a rival, called VantageScore, offering credit ratings for much cheaper than FICO and setting off a litigation war within the industry. FICO immediately sued, alleging an antitrust violation, and even trying to </span><a href="https://www.govinfo.gov/content/pkg/USCOURTS-mnd-0_06-cv-04112/pdf/USCOURTS-mnd-0_06-cv-04112-5.pdf" rel="">trademark</a><span> the idea of giving credit scores between 300-850. </span></p><p><span>Though they </span><a href="https://www.govinfo.gov/content/pkg/USCOURTS-mnd-0_06-cv-04112/pdf/USCOURTS-mnd-0_06-cv-04112-5.pdf" rel="">lost that suit in 2010</a><span>, they continued litigation and political attacks, including </span><a href="https://www.progressivepolicy.org/wp-content/uploads/2017/12/UpdatedCreditScoring_2017.pdf" rel="">hiring</a><span> the Progressive Policy Institute in 2017 to write a pseudo-academic paper supporting their monopoly to fool policymakers.</span></p><p><span>Still, the campaign worked. VantageScore never caught on in the mortgage lending part of credit scoring, instead serving as a cheap proxy for credit. When you see a free credit score on most sites, it’s usually not FICO, it’s VantageScore. In 2011, VantageScore </span><a href="https://consumerfed.org/press_release/annual-survey-reveals-that-low-income-consumers-are-most-likely-to-seek-credit-yet-know-the-least-about-credit-scores/" rel="">partnered</a><span> with the Consumer Federation of America, and tried to make the argument that its scores were better for low-income consumers, in the hopes that </span><a href="https://www.fdic.gov/resources/regulations/federal-register-publications/2013/2013-credit_risk_retention-c_22.pdf" rel="">regulators</a><span> would give them a place in the credit scoring world next to FICO. In 2013, VantageScore released its </span><a href="https://www.creditkarma.com/credit/i/vantagescore-30" rel="">3.0 model</a><span>, which scored 30-35 million Americans who couldn’t get a FICO score. It differentiated medical debt, while FICO did not. </span></p><p><span>VantageScore, though, served its purpose. In a complex set of lawsuits and negotiations from 2013 to 2018, FICO and the bureaus seemed to have come to a set of arrangements to jointly hike prices. Though contract terms are still confidential, some details have come out in an </span><a href="https://www.dropbox.com/scl/fi/4nomq47281anynu2rzwm8/Amended-complaint-10-2023.pdf?rlkey=nzhde04j1osy0io98ka5p26vo&amp;dl=0" rel="">ongoing antitrust suit</a><span> in Illinois by banks against FICO and the three bureaus. The claim is that the four firms are now a cartel.</span></p><p>Contracts between FICO and the bureaus create a set of reciprocal obligations. The contracts include a “no equivalent product” clause that prohibits a credit bureau from developing or distributing a non-FICO analytic. It also includes a “dynamic royalty schedule” that allows FICO to charge seven times more if a lender uses a non-FICO score. In return, the bureaus all get the same price from FICO through a ‘level playing field’ clause, which means they know their costs are identical and so can coordinate pricing more easily. </p><p><span>The net effect is that FICO ends up coordinating pricing in the industry. When FICO hikes prices, so do the credit bureaus. Equifax CEO Begor </span><a href="https://www.dropbox.com/scl/fi/4nomq47281anynu2rzwm8/Amended-complaint-10-2023.pdf?rlkey=nzhde04j1osy0io98ka5p26vo&amp;dl=0" rel="">said</a><span> in 2019 that when FICO “put through a price increase . . . Equifax[,] TU and Experian deliver[ed] that price increase to the marketplace, when they increase the price of their credit score. So that rolled through.”</span></p><p>It’s not that hard to come up with a model for underwriting that is reasonably accurate; any bank with scale could probably do it. But FICO uses trade secrets, copyright, patents, or restrictive contracts to block anyone from doing so. A contact in the industry sent me a sample contract, which is full of absurd restrictions on the ability to use FICO scores. </p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png" width="606" height="659" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/70964134-a08b-4b03-9453-66e424df56a5_606x659.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:659,&quot;width&quot;:606,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:300805,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70964134-a08b-4b03-9453-66e424df56a5_606x659.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>FICO prohibits not only validating different models against FICO scores, but even displaying FICO scores next to non-FICO scores. All of these tactics are an invitation to the Antitrust Division to investigate the industry, which it periodically has, most recently </span><a href="https://www.prnewswire.com/news-releases/fico-statement-regarding-antitrust-investigation-301024452.html" rel="">in 2020</a><span>. </span></p><p>And there’s another reason it’s impossible to move away from FICO - switching costs. FICO scores on top of a credit bureau file are baked into the operations of most banks and Wall Street buyers of mortgage bonds. One major lender, for instance, identified over 600 places it was using a FICO score in its business processes. Citibank undertook an 18 month operational review just to move to an updated FICO score. And when investors buy mortgage-backed securities, the FICO scores of the loans are a key mechanism to figure out how to price them. Banks hate change and risk, and a different credit scoring system introduces both.</p><p>Still, for the most part, the credit bureaus stayed off the radar, because the cost of a score had been low compared to the credit product. If you’re making a half a million dollar loan, who cares if you have to shell out $10 for a credit pull?  The bureaus and FICO sell to a broad range of customers, including banking, insurance, retail, healthcare and the government. A little bit of cost for each of them isn’t a big deal, especially when they can pass those costs onward.</p><p><span>But recently, that dynamic changed. In 2022, FICO announced a series of what would become an aggregate 500% price increase for the mortgage industry over the next two years. The reason is likely that the firm’s CEO, Will Lansing, </span><a href="https://www.wsj.com/business/highest-paid-ceo-2023-charts-0d65be3b?st=i5zuxt34reeeoek&amp;reflink=article_copyURL_share" rel="">had</a><span> significant payment contingent on the stock price performance in 2023. And it worked, Lansing was the fifth highest paid CEO in America that year. And though FICO claims it doesn’t set the overall price for credit scores (though many in the industry are skeptical), its stock price reflected much higher margins. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png" width="725" height="487" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:487,&quot;width&quot;:725,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:83920,&quot;alt&quot;:&quot;&quot;,&quot;title&quot;:&quot;&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" title="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3255626c-5d3d-49e7-a0e3-a733b339e1cb_725x487.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>And a backlash began among their customers, notably mortgage lenders. It’s a bad time to be a mortgage lender, with high interest rates absolutely killing the mortgage market. </p><p>A few years ago, the Federal Housing Finance Agency (FHFA), which runs most housing finance for the government through its control of secondary mortgage buyers Fannie Mae and Freddie Mac, decided that it might want to create some competition for FICO. So it turned to VantageScore. Only, it got backlash from Wall Street, which didn’t want to bother changing their models for mortgage backed securities.</p><p><span>Instead of allowing mortgage lenders to pick either FICO or VantageScore, FHFA simply required that lenders use both. So now, instead of having to deal with one monopoly, mortgage lenders will have to deal with two, buying two scores appended to different credit bureaus. That </span><a href="https://www.icba.org/newsroom/news-and-articles/2023/06/23/icba-groups-raise-concerns-with-new-fhfa-credit-score-models" rel="">made</a><span> the whole industry mad. And then FICO </span><a href="https://www.housingwire.com/articles/mortgage-group-asks-regulators-to-stop-ficos-price-hikes-of-up-to-400/" rel="">began</a><span> hiking prices, ostensibly to prepare for this new regime, but in reality simply because they could.</span></p><p>The prospect of having to buy more credit scores at a higher price, all at a time when there are significantly fewer customers, has sent mortgage bankers into a frenzy. If nothing is done, mortgage bankers will have to ask customers upfront to pay for their own credit scoring, which will radically limit who can get a loan.</p><p><span>There are additional problems. When a mortgage banker does a credit pull for a consumer, the credit bureau then puts that consumer on a list, and sells his data to other mortgage bankers. These ‘</span><a href="http://www.brokersdata.com/mortgage-trigger-leads.html" rel="">trigger leads</a><span>’ annoy everyone; when you sign up for anything in real estate, you get a zillion calls and emails, because the bureaus sell your data. And the banker who paid for your credit report now has a lot of people calling to try and poach the customer whose credit report you already paid for. Moreover, consumers can’t reuse credit information; every mortgage banker has to order a new credit report and score for the same consumer, which is just more money transferred to FICO and the bureaus from the lender and consumer.</span></p><p><span>When Rohit Chopra spoke in front of mortgage bankers and lambasted FICO and the credit bureaus, he was pushing on an open door. He offered a creative interpretation of a dormant provision of the Fair Credit Reporting Act, which included price caps for utility-style functions like credit reporting, “a fair and reasonable fee,” </span><a href="https://www.law.cornell.edu/uscode/text/15/1681g" rel="">according to the law</a><span>, when a consumer buys their credit information. The FTC </span><a href="https://www.govinfo.gov/content/pkg/FR-2004-11-08/html/04-24841.htm" rel="">never</a><span> did much with this section, in the Bush era when the law was passed.</span></p><p><span>It’s not a perfectly applicable legal tool; the law caps prices for what consumers pay, not lenders, but that’s a technical question that can be overcome. Chopra </span><a href="https://www.consumerfinance.gov/about-us/newsroom/prepared-remarks-of-cfpb-director-rohit-chopra-at-the-mortgage-bankers-association/" rel="">cited</a><span> this law, and asked the industry to propose ideas “to address price gouging in this market.” Chopra mentioned another authority, which is the ability that the CFPB has to force financial entities to let consumers port their financial information from one entity to another. With a price cap and interoperability, consumers could take their credit score from one mortgage banker to another, without those bankers having to pay for a new credit pull each time. </span></p><p><span>(As an aside, if you want to act on this problem, the CFPB recently opened a </span><a href="https://www.federalregister.gov/documents/2024/06/06/2024-12443/request-for-information-regarding-fees-imposed-in-residential-mortgage-transactions" rel="">public comment docket</a><span> for people to weigh in on what to do about these junk fees and asked the mortgage industry to add their thoughts. Individuals from the industry should weigh in, as the Mortgage Bankers Association is conflicted and cannot represent the industry effectively. The deadline for comments is August 6).</span></p><p><span>There are other possible solutions. More competition would be good. In March, Senator Josh Hawley </span><a href="https://www.hawley.senate.gov/hawley-calls-doj-investigate-fico-anticompetitive-practices/" rel="">asked</a><span> the Antitrust Division to investigate FICO again over its recent price hikes. It should, and that could encourage the firms to stop their aggressive gouging. There are also private suits; the current antitrust case against FICO is proceeding apace. In addition, the FHFA could change its poor decision, and allow mortgage lenders to pick either FICO or VantageScore, which would foster price competition among them. That would require some significant technical changes to how Fannie and Freddie package loans, but they can do that if they want. And then of course Congress could act, and either pass explicit price caps in this particular area, since FICO is clearly a utility, or force FICO to just let other entities use their algorithm so it faces competition.</span></p><p>One of the more interesting dynamics in politics today is what happens when groups of business leaders collectively realize they are being subjected to a coercive monopoly. They often look around and start seeing what others are facing as well. Today, that’s happening among mortgage bankers. What’s particularly interesting is that those HousingWire reporters, who write about and are favorable to mortgage bankers, actually started to notice other consumer harms that Chopra highlighted about credit reporting, once they saw that consumers and bankers were in the same boat. </p><p>Is there a broader lesson here? Well, it’s that in a sense, all of us who make money doing honest business or buying from honest businesses have an interest in the rule of law and assertive regulators. It’s not a coincidence that the people most sympathetic to the problems facing mortgage bankers is Rohit Chopra, an anti-monopolist consumer protection regulator, and Josh Hawley, a populist Senator. After all, who is the real threat to mortgage banking? The CFPB, who is trying to control the costs that they have to pay, and protect consumers at the same time? Or FICO and the credit bureau cartel, who are raising prices in the midst of collapsing demand?</p><p>That’s a lesson being re-learned, in a broader sense, not just by mortgage bankers today, but by independent pharmacists, grocery store owners, farmers and ranchers, app developers, Hollywood producers, doctors, car repair shop owners, and anyone seeing their livelihood squeezed by a coercive middleman. Eventually, someone hits on either government regulation or antitrust, and then the conversations start. In the Declaration of Independence, Thomas Jefferson wrote that “governments are instituted” in order to “to secure these rights” of “life, liberty, and the pursuit of happiness.” These kinds of problems aren’t just something government can tackle, but why a free people build governments in the first place.</p><p><span>Thanks for reading! Your tips make this newsletter what it is, so please send me tips on weird monopolies, stories I’ve missed, or other thoughts. And if you liked this issue of BIG, you can sign up&nbsp;</span><a href="http://email.mg1.substack.com/c/eJxVUMFuwyAM_ZpwjIAmYT34UHXtb0QEnBSNQARmVf5-pN1hkyzberae37PRhEtMOxBmYiVjGp0FZoEradTEXB7nhLhq54FtZfLOaHIxHFtC9LJjDzhxNUs7nKTlnGsthRKDmj-s4dIYO0i2xUyjLtZhMAj4jWmPAZmHB9GWm9OlkfcaqybKFL3H1OYyZdLmqzVxraMn-togcyC5OPNzzT3ve9WKVnS3y5WL4a54d1PdZ9PxdRH_CFiCX946XA4vL7TaGWtdS3C0jxj05NECpYKM3v94Cad9Qwj4zB6JML3Bw74chFCsHrKxcgb4o_8H-RJ1Kg" rel="">here</a><span>&nbsp;for more issues, a newsletter on how to restore fair commerce, innovation, and democracy. Consider becoming a </span><a href="https://email.mg1.substack.com/c/eJxVUMtuwyAQ_JpwtABjEw4ceulvIB6Lg4rBgrUq_31J0kO7Wmk1-xrNeIuw1XZphI7kqB0NXgfoAt89AyI0cnZoJgVNgqaSe-lI6iY2gN2mrMlxupy8xVTLc4uxhQvy0DZKpyjQIL31CqigggOPQYWBIqg3lz1DguJB15Ivc9gUSNYPxKPf5o8b_xy5W8SONWdoUz9dR-u_Jl_3MXpC35IDkjSnnI2Y6cwkZROfhIwuSrXauC7e2_u0rNhtvJaboPvG_v0iTf9SjOH21PXqDmlm1P0sCS8DxboMQWM7geDbsJcHZoMCbRgZjEXN1nmVchaci5W9VQ5bxEzlXVFFBm2o46roP8J-AJJ0hnE" rel="">paying subscriber</a><span> to support this work, or if you are a paying subscriber, giving a </span><a href="https://email.mg1.substack.com/c/eJxVUEtuxSAMPE1YRnwSSBYsKlW9BiJgUlQCETiqcvvy3uuitSxZ9tgezTiLsJd6a4SG5CwNDd4n6AzfLQEiVHI1qCZ6Tbymiju1kdhMqACHjUmT89pSdBZjyY8txmY-kU_tOZOU-bB5urhl9ouc-RomtnoXpOX0xWUvHyE70CWn25w2epL0J-LZBvE28I-eh0VsWFKCOrZra2jd1-jK0aFH62rcYBB9U-4x4CDesV5AouaUsx6CCqYoG_k4qbAFtUob5OycXcZZYrPhnoeJHjv795xU_cvZwf0h9DntWk2vx5Uj3gay3RJ4_STEl4NPU8wOGWp31huLmkkhlRIT55NkL9ndp0lQtax0JZ3Wl36V9R-lPyvjiqk" rel="">gift subscription</a><span> to a friend, colleague, or family member. If you really liked it, read my book,&nbsp;</span><a href="https://www.simonandschuster.com/books/Goliath/Matt-Stoller/9781501183089" rel="">Goliath: The 100-Year War Between Monopoly Power and Democracy</a><span>.</span></p><p>cheers,</p><p>Matt Stoller</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Google dropping continuous scroll in search results (122 pts)]]></title>
            <link>https://searchengineland.com/google-dropping-continuous-scroll-in-search-results-443529</link>
            <guid>40797130</guid>
            <pubDate>Wed, 26 Jun 2024 06:56:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://searchengineland.com/google-dropping-continuous-scroll-in-search-results-443529">https://searchengineland.com/google-dropping-continuous-scroll-in-search-results-443529</a>, See on <a href="https://news.ycombinator.com/item?id=40797130">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p>Google Search will stop its <a href="https://searchengineland.com/google-rolling-out-continuous-scroll-on-mobile-375171">continuous scroll</a> user experience where Google loads more results as you scroll past the first page of the search results. Instead, you will see see the classic and old pagination bar at the footer of the Google Search results.</p>



<p><strong>Desktop first. </strong>Starting today, Google will start to turn off continuous scroll for the desktop Google Search results. </p>



<p>Google launched continuous scroll on desktop search in <a href="https://searchengineland.com/google-brings-continuous-scroll-to-desktop-search-results-390004">December 2022</a> and first in mobile search in <a href="https://searchengineland.com/google-rolling-out-continuous-scroll-on-mobile-375171">October 2021</a>.  So continuous scroll only lasted about a year and a half for desktop search.</p>



<p>Google will remove continuous scroll from the mobile search results in the coming month.</p>



<p><strong>What Google said. </strong>A Google spokesperson told Search Engine Land that today, June 25, removing the ability to continuously scroll on desktop Search results, followed by mobile in the coming months. </p>



<p>The “Next” at the bottom of the page will show on desktop search and the “More results” button will show on mobile search.</p>



<p>Google said this change is to allow the search company to serve the search results faster on more searches, instead of automatically loading results that users haven’t explicitly requested. Google also told us that it found that loading more results automatically didn’t lead to significantly higher satisfaction with Google Search.</p>



<p><strong>What continuous scroll looks like on desktop.&nbsp;</strong>Here is a GIF of continues scroll in action on desktop search:</p>



<figure><img fetchpriority="high" decoding="async" width="600" height="391" src="https://searchengineland.com/wp-content/seloads/2024/06/google-search-continous-scroll.gif" alt="Google Search Continous Scroll" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20600%20391'%3E%3C/svg%3E"></figure>



<p><strong>What the pagination bar</strong> <strong>looks like</strong>.  Here is what the bottom of the page one Google Search results look like on desktop with the classic and old pagination bar:</p>



<figure><img decoding="async" width="1720" height="1508" src="https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back.png" alt="Google Search Pagination Bar Back" srcset="https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back.png 1720w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-386x338.png.webp 386w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-684x600.png.webp 684w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-129x113.png.webp 129w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-768x673.png.webp 768w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-1536x1347.png 1536w" sizes="(max-width: 1720px) 100vw, 1720px" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201720%201508'%3E%3C/svg%3E" data-lazy-srcset="https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back.png 1720w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-386x338.png.webp 386w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-684x600.png.webp 684w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-129x113.png.webp 129w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-768x673.png.webp 768w,https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back-1536x1347.png 1536w" data-lazy-src="https://searchengineland.com/wp-content/seloads/2024/06/google-search-pagination-bar-back.png"></figure>



<p><strong>Why we care. </strong>If you were on page two, you may see less clicks to your website. It all depends on if those searchers scroll and now click to the next page. Also this&nbsp;<a href="https://searchengineland.com/how-googles-continuous-scroll-can-affect-impressions-and-ctr-375738">may impact your Search Console data</a>&nbsp;because searchers may scroll more or less versus click the “Next” button.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Vigorous Exercise, Cognitive Decline, and High Blood Pressure (105 pts)]]></title>
            <link>https://alz-journals.onlinelibrary.wiley.com/doi/full/10.1002/alz.13887</link>
            <guid>40796459</guid>
            <pubDate>Wed, 26 Jun 2024 04:45:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://alz-journals.onlinelibrary.wiley.com/doi/full/10.1002/alz.13887">https://alz-journals.onlinelibrary.wiley.com/doi/full/10.1002/alz.13887</a>, See on <a href="https://news.ycombinator.com/item?id=40796459">Hacker News</a></p>
Couldn't get https://alz-journals.onlinelibrary.wiley.com/doi/full/10.1002/alz.13887: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Brazil's Supreme Court decriminalizes marijuana (146 pts)]]></title>
            <link>https://www.bloomberg.com/news/articles/2024-06-25/brazil-supreme-court-decriminalizes-marijuana-for-personal-use</link>
            <guid>40795404</guid>
            <pubDate>Wed, 26 Jun 2024 01:00:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bloomberg.com/news/articles/2024-06-25/brazil-supreme-court-decriminalizes-marijuana-for-personal-use">https://www.bloomberg.com/news/articles/2024-06-25/brazil-supreme-court-decriminalizes-marijuana-for-personal-use</a>, See on <a href="https://news.ycombinator.com/item?id=40795404">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
    <section>
        <h3>Why did this happen?</h3>
        <p>Please make sure your browser supports JavaScript and cookies and that you are not
            blocking them from loading.
            For more information you can review our <a href="https://www.bloomberg.com/notices/tos">Terms of
                Service</a> and <a href="https://www.bloomberg.com/notices/tos">Cookie Policy</a>.</p>
    </section>
    <section>
        <h3>Need Help?</h3>
        <p>For inquiries related to this message please <a href="https://www.bloomberg.com/feedback">contact
            our support team</a> and provide the reference ID below.</p>
        <p>Block reference ID:</p>
    </section>
</section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The album art of Phil Hartman(n) (2022) (157 pts)]]></title>
            <link>https://www.conorherbert.com/music/the-album-art-of-phil-hartmann</link>
            <guid>40795227</guid>
            <pubDate>Wed, 26 Jun 2024 00:27:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.conorherbert.com/music/the-album-art-of-phil-hartmann">https://www.conorherbert.com/music/the-album-art-of-phil-hartmann</a>, See on <a href="https://news.ycombinator.com/item?id=40795227">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="page" role="main">
        
          
<article id="sections" data-page-sections="623588c84b144d4aeea8f898">
  
  
    
    


  


<div data-content-field="main-content" data-item-id="" data-test="page-section" data-section-theme="" data-section-id="623588c84b144d4aeea8f89a" data-controller="SectionWrapperController" data-current-styles="{
&quot;imageOverlayOpacity&quot;: 0.15,
&quot;backgroundWidth&quot;: &quot;background-width--full-bleed&quot;,
&quot;sectionHeight&quot;: &quot;section-height--medium&quot;,
&quot;customSectionHeight&quot;: 10,
&quot;horizontalAlignment&quot;: &quot;horizontal-alignment--center&quot;,
&quot;verticalAlignment&quot;: &quot;vertical-alignment--middle&quot;,
&quot;contentWidth&quot;: &quot;content-width--wide&quot;,
&quot;customContentWidth&quot;: 50,
&quot;sectionTheme&quot;: &quot;&quot;,
&quot;sectionAnimation&quot;: &quot;none&quot;,
&quot;backgroundMode&quot;: &quot;image&quot;
}" data-current-context="{
&quot;video&quot;: {
&quot;playbackSpeed&quot;: 0.5,
&quot;filter&quot;: 1,
&quot;filterStrength&quot;: 0,
&quot;zoom&quot;: 0,
&quot;videoSourceProvider&quot;: &quot;none&quot;
},
&quot;backgroundImageId&quot;: null,
&quot;backgroundMediaEffect&quot;: null,
&quot;divider&quot;: null,
&quot;typeName&quot;: &quot;blog-masonry&quot;
}" data-animation="none">
  <article id="article-">
  
    
    
    
    <div>
          <div data-layout-label="Post Body" data-type="item" id="item-62e73822a9178c7a2609d51a"><div data-test="image-block-inline-outer-wrapper" data-block-type="5" id="block-yui_3_17_2_1_1659320358506_11438">

      

      
        <figure>
          
        
        

        
          
            
          <div data-animation-role="image">
            <p><img data-stretch="false" data-src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png" data-image="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png" data-image-dimensions="2500x1185" data-image-focal-point="0.5,0.5" alt="" data-load="false" elementtiming="system-image-block" src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png" width="2500" height="1185" sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" onload="this.classList.add(&quot;loaded&quot;)" srcset="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/60b7be1a-3e02-4f8f-b95c-46b9ad657fec/Asset%2B3.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs">

            </p>
          </div>
        
          
        

        
      
        </figure>
      

    </div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-0c84cf1a34e5bd2845e8">

<p><em>You might remember him from such roles as Troy McClure or Lionel Hutz, but in the years before legendary comic Phil Hartman shaved the second ‘n’ from his name, he was designing album art for some West Coast rock bands.</em></p>




















  
  



</div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1659320933276_10980">
  <p>The Phil Hartman story could — and perhaps should ‚ be told in two parts.</p><p>In the first story, a charismatic comic goes from the stand-up circuit to <em>Saturday Night Live</em>, becoming an invaluable cast member on America’s most hallowed skit show and graduating to legendary roles on <em>The Simpsons</em>. In the second, an actor on the brink of genuine stardom is murdered, the victim of a terrifying act of domestic violence.</p><p>These stories are best kept distinct in order to fully appreciate Hartman, who – like many tragic artists before him – runs the risk of becoming all but synonymous with his sensational death. His life was so much more than his tragic and infamous killing, enshrined not only in his art, but his charismatic personality often celebrated by his many co-stars and collaborators. We’ll never hear him as Zapp Brannigan or see him in the Troy McClure film he was planning, but thankfully, we’ll always have “<a href="https://youtu.be/cVFsS-AcnjM"><span>A Fish Called Selma</span></a>,” and we’ll never have to go without <a href="https://youtu.be/b5wfPlgKFh8"><span>his pitch-perfect Reagan</span></a>.</p><p>There is, however, a third thread to Hartman’s story, a chapter of public life that’s far less recognized than his indelible screen presence. It picks up long before his charismatic rise to the peak of comedy, when Hartman was more class clown than class act, a Canadian kid moving about the United States. Still going by Hartmann, his birth name, Phil graduated from Westchester High in Los Angeles, taking up art at Santa Monica City College. He soon dropped out to become a roadie for local rock band <a href="http://www.thefinalvinyl.com/rocknfoo.htm"><span>Rockin’ Foo</span></a> and, when the group needed art for <a href="https://www.discogs.com/Rockin-Foo-Rockin-Foo/master/634497"><span>their debut</span></a>, his past as a visual art student made him a natural candidate for the job. The four-piece must’ve liked his work, as Hartmann illustrated — and signed — the art to both <a href="https://www.discogs.com/Rockin-Foo-Rockin-Foo/master/700801"><span>their first and second records</span></a>.</p>
</div><div data-test="image-block-inline-outer-wrapper" data-aspect-ratio="96.91252144082333" data-block-type="5" id="block-yui_3_17_2_1_1659320358506_2196">

      

      
        <figure>
          
        
        

        
          
            
          <div data-animation-role="image">
            <p><img data-stretch="false" data-src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png" data-image="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png" data-image-dimensions="1500x1507" data-image-focal-point="0.5,0.5" alt="" data-load="false" elementtiming="system-image-block" src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png" width="1500" height="1507" sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" onload="this.classList.add(&quot;loaded&quot;)" srcset="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/1525f1f9-e4d7-4f4a-9fa7-f7207ebd19ed/hartmann%2Bearly%2Bcovers.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs">

            </p>
          </div>
        
          
        

        
      
        </figure>
      

    </div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1659320358506_12702">
  <p>In 1972, three years on from dropping out, Hartmann started studying graphic design at California State University. This time around he graduated, but not before taking on some projects from his music scene connections. In ‘72 alone, Phil cut covers for power pop four-piece <a href="https://en.wikipedia.org/wiki/Bones_(band)"><span>Bones</span></a>, boasting an approachable group photo; <a href="https://en.wikipedia.org/wiki/Pure_Food_and_Drug_Act_(band)"><span>The Pure Food and Drug Act</span></a>, whose <a href="https://www.youtube.com/watch?v=LeT76FLDC68&amp;list=OLAK5uy_mUmWJCZMdA2sDP2y43XQLJFL074XxHMnA&amp;ab_channel=PureFoodandDrugAct-Topic"><span>sole record</span></a> bears an FDA-inspired stamp; and Pure Food and Drug Act member <a href="https://en.wikipedia.org/wiki/Harvey_Mandel"><span>Harvey Mandel</span></a>, for whom Hartmann depicted the scale-laden psychedelia of <a href="https://youtu.be/lVYnmj3t3Ww"><span><em>The Snake</em></span></a>.</p><p>On graduating, Phil opened his own graphic design studio and started taking on commissions. His first big client came to him through his brother, former Geffen-Roberts staffer John Hartmann, who’d recently left that fledgling managerial company and started his own business with Harlan Goodman. <a href="https://www.discogs.com/artist/2194684-Hartmann-Goodman"><span>Hartmann &amp; Goodman</span></a> had managed to make away with a couple of Geffen’s clients, including British rock trio America — you know what they say, a Goodman is a Hartmann to find — but it was their totally new relationship with country rock band <a href="https://en.wikipedia.org/wiki/Poco"><span>Poco</span></a> that saw Phil strike up a rapport.</p><p>In hindsight, it’s possible to see Poco as something of an odds-and-ends band. That’s not how it was at the time, but the group — founded by Buffalo Springfield alumni Richie Furay and Jim Messina — might be best remembered as a repository for the immense talent within. Bassist Randy Meisner left during their first record, taking the band’s country rock approach to new heights by co-founding The Eagles. His successor in Poco, Timothy B. Schmidt, would later succeed him in The Eagles after tensions led to a vicious backstage brawl. Poco carved out a string of classic rock hits, but their legacy is often positioned between what had been and what would eventually come to pass.</p><p>It makes sense that Hartmann &amp; Goodman would have had a connection to Poco, seeing as Geffen-Roberts had managed acts such as Buffalo Springfield’s <a href="https://www.discogs.com/Stephen-Stills-Stephen-Stills-2/release/2221225"><span>Stephen Stills</span></a> and Randy Meisner’s <a href="https://www.discogs.com/Eagles-Eagles/master/59496"><span>The Eagles</span></a> in the early 1970s. The first record on which Hartmann &amp; Goodman managed the group, 1974’s <a href="https://en.wikipedia.org/wiki/Seven_(Poco_album)"><span><em>Seven</em></span></a>, was also the first to boast Phil’s artwork, a minimalist image of an upright horseshoe on a solid green backdrop. If there’s nothing radical about the piece, it does speak to a few simple tenets of the group, imparting luck on their first post-Richie Furay record, tethering them to a classic symbol of country living, and tapping into the folklore of the untamed frontier.&nbsp;</p>
</div><div data-test="image-block-inline-outer-wrapper" data-block-type="5" id="block-yui_3_17_2_1_1659320358506_3607">

      

      
        <figure>
          
        
        

        
          
            
          <div data-animation-role="image">
            <p><img data-stretch="false" data-src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png" data-image="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png" data-image-dimensions="1500x742" data-image-focal-point="0.5,0.5" alt="" data-load="false" elementtiming="system-image-block" src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png" width="1500" height="742" sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" onload="this.classList.add(&quot;loaded&quot;)" srcset="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/344f905f-e87d-439f-b778-5a1cd33355c7/hartmann-poco.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs">

            </p>
          </div>
        
          
        

        
      
        </figure>
      

    </div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1659320358506_4384">
  <p>Phil’s second commission came just seven months later, when the quartet dropped <a href="https://en.wikipedia.org/wiki/Cantamos"><span><em>Cantamos</em></span></a>, a return to their lighter country-rock roots. Phil’s familiar Navajo-inspired textile pattern fits the sound, his folksy ochre palette tethering the Californian record to the distant folklore of the American Southwest. A quaint illustration sits inset, showing the four members jamming away inside a log cabin, flanked by a wood-burning stove. It’s cozy, it’s intimate, it’s unadorned: their electric riffs on hold, the art seems to centre the return of the classic, easygoing Poco.</p><p>Hartmann’s graphic design breakout – if it could be called that – came in 1975, the same year that he joined the then-new Groundlings sketch troupe. Phil designed two albums that year: Poco’s <a href="https://en.wikipedia.org/wiki/Head_over_Heels_(Poco_album)"><span><em>Head Over Heels</em></span></a>, a poppier tack that nonetheless flopped, and America’s <a href="https://en.wikipedia.org/wiki/History:_America%27s_Greatest_Hits"><span><em>History</em></span></a>, a bestselling document of that West Coast trio’s first five years. That’s more on Dewey Bunnell, Gerry Beckley and Dan Peek’s hitmaking prowess than anything else, but Hartmann’s visuals make for a tender front to that premature celebration.</p>
</div><div data-test="image-block-inline-outer-wrapper" data-block-type="5" id="block-yui_3_17_2_1_1659320358506_5494">

      

      
        <figure>
          
        
        

        
          
            
          <div data-animation-role="image">
            <p><img data-stretch="false" data-src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png" data-image="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png" data-image-dimensions="1500x750" data-image-focal-point="0.5,0.5" alt="" data-load="false" elementtiming="system-image-block" src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png" width="1500" height="750" sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" onload="this.classList.add(&quot;loaded&quot;)" srcset="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/4b4d814b-b4fd-44c9-9d93-8855b899424d/America%2BHistory%2BSleeve.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs">

            </p>
          </div>
        
          
        

        
      
        </figure>
      

    </div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1659320358506_6283">
  <p>An illustration suspended on a cream canvas, the drawing shows all three members surrounded by glimpses of their own past. Dan Peek, whose cowboy chic is based on <a href="https://img.discogs.com/eh0expRpkxSN_7inYWhmnCQxCcM=/fit-in/600x469/filters:strip_icc():format(jpeg):mode_rgb():quality(90)/discogs-images/R-510061-1391967590-4885.jpeg.jpg"><span>a <em>Hat Trick</em> poster</span></a>, beams from beyond Westminster, an allusion to the group’s beginnings as kids of UK-based USAF personnel. Gerry Beckley, centered, wears a shirt of leaves, a backdrop upon which Hartman sketches <a href="https://www.discogs.com/America-Holiday/master/67411"><span>the <em>Holiday</em> cover</span></a>. Dewey Bunnell’s appearance is also taken from a photograph originally released with <a href="https://www.discogs.com/America-Hat-Trick/master/67402"><span><em>Hat Trick</em></span></a>, with the backdrop of the Golden Gate Bridge a reference to <a href="https://www.discogs.com/America-Hearts/master/67408"><span>their recent <em>Hearts</em> cover</span></a>.</p><p>That job spawned another rapport and, over the next two years, Hartmann designed Poco’s <a href="https://www.discogs.com/Poco-Rose-Of-Cimarron/master/100623"><span><em>Rose of Cimarron</em></span></a> with <a href="https://www.metmuseum.org/art/collection/search/811753"><span>Monterey Pop Festival art director Tom Wilkes</span></a>, and the red-plated <a href="https://www.discogs.com/Poco-Indian-Summer/master/109675"><span><em>Indian Summer</em></span></a> all by himself. He continued his streak with America by designing <a href="https://www.discogs.com/America-Hideaway/master/67409"><span><em>Hideaway</em></span></a>, centering band shots by <a href="https://www.discogs.com/artist/354607"><span>Henry Diltz</span></a>; <a href="https://www.discogs.com/America-Harbor/master/67401"><span><em>Harbor</em></span></a>, framing Diltz’s tropical shots in a sunnier palette; and <a href="https://www.discogs.com/America-Live/master/77256"><span><em>Live</em></span></a>, casually laying Diltz’ photograph atop well-worn handwritten notation.&nbsp;</p>
</div><div data-test="image-block-inline-outer-wrapper" data-block-type="5" id="block-yui_3_17_2_1_1659320358506_6669">

      

      
        <figure>
          
        
        

        
          
            
          <div data-animation-role="image">
            <p><img data-stretch="false" data-src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png" data-image="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png" data-image-dimensions="1500x1002" data-image-focal-point="0.5,0.5" alt="" data-load="false" elementtiming="system-image-block" src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png" width="1500" height="1002" sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" onload="this.classList.add(&quot;loaded&quot;)" srcset="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/43e79823-034b-426a-835a-fba79a589f75/America%2BCovers%2BCollage.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs">

            </p>
          </div>
        
          
        

        
      
        </figure>
      

    </div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1659320358506_16421">
  <p>The <a href="https://www.discogs.com/Silver-Silver/release/965407"><span>one and only record</span></a> by L.A. quintet Silver, featuring the brother of Eagles member Bernie Leadon, was overseen by Hartmann &amp; Goodman. It’s no surprise that Phil was responsible for the fairly simple design, framing pictures taken by prolific music photographer <a href="https://www.discogs.com/artist/620325-Guy-Webster"><span>Guy Webster</span></a>. If these records had seen Hartmann in more unadventurous straits — bulky, patterned and often revolving about the photos of others — his biggest personal achievement came in 1978, when Poco released their eleventh record, <a href="https://en.wikipedia.org/wiki/Legend_(Poco_album)"><span><em>Legend</em></span></a>.</p><p><em>“I did over 40 album covers, including the white Poco album,”</em> said Hartman <a href="https://archive.vn/20120711225150/http://jam.canoe.ca/Movies/Artists/H/Hartman_Phil/1996/12/01/758979.html#selection-983.46-983.71"><span>in a 1996 interview</span></a>. <em>“That's the only piece I have up in my office.”</em> More than just a passion project or a point of pride, <em>Legend</em> was both a personal achievement for Phil and a commercial peak for the radically restructured group. Arriving after years of commercial failure, <em>Legend </em>was recorded by Poco members Paul Cotton and Rusty Young, whose decision to start their own outfit was trumped by the label’s need for brand recognition. A radio-friendly pivot surely helped the record sell, but Hartmann’s cover can’t have hurt those figures, his minimalist rendering of a galloping horse befitting the lofty title.</p>
</div><div data-test="image-block-inline-outer-wrapper" data-block-type="5" id="block-yui_3_17_2_1_1659320358506_7836">

      

      
        <figure>
          
        
        

        
          
            
          <div data-animation-role="image">
            <p><img data-stretch="false" data-src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png" data-image="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png" data-image-dimensions="1500x749" data-image-focal-point="0.5,0.5" alt="" data-load="false" elementtiming="system-image-block" src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png" width="1500" height="749" sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" onload="this.classList.add(&quot;loaded&quot;)" srcset="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/0131268e-1f32-4ce6-9525-dbc8390ab9df/poco%2Blegend%2Bgatefold.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs">

            </p>
          </div>
        
          
        

        
      
        </figure>
      

    </div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1659320358506_8613">
  <p>It’s little more than a handful of lines, arranged to both cut a figure and imply a shape unseen. The red eye sits as a solitary splash of colour, drawing the audience’s own to the deceptive simplicity of that eight-line head. It’s not hard to see why the cover ended up mounted on Phil’s office wall – not only is it entirely his own vision and handiwork, but it’s easily a standout in his oft-simple portfolio. It might’ve been the peak, or maybe it was just the best so far: either way, that very year, Phil made his acting debut in Brian Trenchard-Smith’s Ozploitation film, <a href="https://en.wikipedia.org/wiki/Stunt_Rock"><span><em>Stunt Rock</em></span></a>.&nbsp;</p><p>In 1979, Phil’s work with the Groundlings saw him become a leader in the troupe. He helped fellow Groundling Paul Reubens develop<em> </em><a href="https://en.wikipedia.org/wiki/The_Pee-wee_Herman_Show"><span><em>The Pee-wee Herman Show</em></span></a>, a stage show that found its way to HBO in 1981. All the while, Hartmann took on a few more graphic design commissions, designing art for Michael Murphey’s 1979 record, <a href="https://www.discogs.com/Michael-Murphey-Peaks-Valleys-Honky-Tonks-Alleys/master/643034"><span><em>Peaks Valleys Honky-Tonks &amp; Alleys</em></span></a>, which stressed folksy photography; America’s <a href="https://www.discogs.com/America-Silent-Letter/release/2650722"><span><em>Silent Letter</em></span></a>, which saw Phil working with photographer <a href="https://www.discogs.com/artist/2235282-Gary-Heery"><span>Gary Heery</span></a>; and The Firesign Theatre’s <a href="https://www.discogs.com/The-Firesign-Theatre-Fighting-Clowns/master/331971"><span><em>Fighting Clowns</em></span></a>, which fused his worlds of troupe comedy and graphic design.&nbsp;</p><p>His final credits include a cover for America satellite <a href="https://www.discogs.com/Avalon-Everyman-A-King/master/1354123"><span>Avalon</span></a>, an AOR trio whose only record bore some graphic similarities to America’s <em>Harbor</em>, as well as two of Poco’s final records, 1982’s <a href="https://www.discogs.com/Poco-Ghost-Town/master/303556"><span><em>Ghost Town</em></span></a> and 1984’s <a href="https://www.discogs.com/Poco-Inamorata/master/415655"><span><em>Inamorata</em></span></a>. These final assignments were the product of faith alone – Hartmann &amp; Goodman hadn’t managed Poco since <em>Legend</em>, and their late return to the younger Hartmann’s vision falls as a vote of confidence.&nbsp;Phil was confident too, but about something else altogether: in 1985, he co-wrote and appeared in <a href="https://en.wikipedia.org/wiki/Pee-wee%27s_Big_Adventure"><span><em>Pee-wee’s Big Adventure</em></span></a>, a role that helped him secure his place at <em>Saturday Night Live</em>. Phil’s graphic design days were over: he dropped the second ‘n’ from his surname, and the newly-christened Phil Hartman stepped to the national stage.</p>
</div><div data-test="image-block-inline-outer-wrapper" data-block-type="5" id="block-yui_3_17_2_1_1660739149027_11008">

      

      
        <figure>
          
        
        

        
          
            
          <div data-animation-role="image">
            <p><img data-stretch="true" data-src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg" data-image="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg" data-image-dimensions="1024x693" data-image-focal-point="0.5,0.5" alt="" data-load="false" elementtiming="system-image-block" src="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg" width="1024" height="693" sizes="(max-width: 640px) 100vw, (max-width: 767px) 100vw, 100vw" onload="this.classList.add(&quot;loaded&quot;)" srcset="https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg?format=100w 100w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg?format=300w 300w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg?format=500w 500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg?format=750w 750w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/623583953cfb47358dc5ce84/9c610726-6b73-4520-b331-0b3fd79aca62/FasBCyaWQAEQ7Hj.jpeg?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs">

            </p>
          </div>
        
          
        

        
          
          <figcaption>
            <p><em>Hartmann, left, with Poco.</em></p>
          </figcaption>
        
      
        </figure>
      

    </div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1660739149027_11349">
  <p>On October 11 1986, Phil Hartman made his debut on the 12th season of SNL. It was just two days later that America submitted their revised sales numbers to the RIAA, earning a quadruple platinum plaque for <em>History</em>. That’s more than four million copies in a little over a decade. The band haven’t run the numbers again in the thirty-six years since, but one thing’s for sure: even before he stepped onto the stage at 30 Rockefeller Plaza, Hartmann’s art had gone international.</p><p>These days, it seems that Hartmann’s most famous covers are the ones he didn’t design. A persistent rumour that he designed the cover for Steely Dan’s <a href="https://www.discogs.com/Steely-Dan-Aja/master/16921"><span><em>Aja</em></span></a> isn’t all that far-fetched, given the proximity of Poco — bassist Schmidt sung backing vocals on three <em>Aja</em> tracks — and the minimalist bent that characterised some of Phil’s work. It’s nice to believe that Hartmann might’ve been hip to the Dan, but <em>Aja</em> owes its striking cover to photographer <a href="https://www.discogs.com/artist/2983708-Hideki-Fujii"><span>Hideki Fujii</span></a> and graphic designers <a href="https://www.discogs.com/artist/3226490-Patricia-Mitsui"><span>Patricia Mitsui</span></a> and <a href="https://www.discogs.com/artist/1123834-Geoff-Westen?type=Credits&amp;subtype=Visual&amp;filter_anv=0"><span>Geoff Westen</span></a>. It’s also easy to see why some believe that Hartmann was responsible for America’s <a href="https://www.discogs.com/America-Hearts/master/67408"><span><em>Hearts</em></span></a>, but that cover was designed by the ever-prolific Gary Burden.&nbsp;</p><p>That being said, there are more Hartmann covers out there. The man himself ballparked his folio at <em>“more than 40”</em> pieces, but Discogs puts just 21 covers to his name, suggesting that there’s just as many still waiting to be exhumed, their attributions yet to make it to the internet. It could be that they’re long out of print, tethered to minor projects that have since faded from our collective memory, or perhaps it’s an issue with credits, like <a href="https://imgur.com/a/q7fJYQf"><span>his Crosby, Stills and Nash logo</span></a>.</p><p>That’s stuff we might never know. If one thing’s for sure, it’s that whether you know him as Ronald Reagan, Bill Clinton, Lionel Hutz or Troy McClure, you might remember Phil Hartman from more places than you’d think. </p>
</div></div>

          

          
          
            <div data-content-field="author">
              <p><a href="https://www.conorherbert.com/music?author=599eab84d55b41d7848b684a">
  
  <span>Conor Herbert</span>
</a></p><p>A Melbourne-based screenwriter, photographer and music commentator. As well as having written a handful of feature film scripts, Conor's written about hip hop albums for Genius and Lucifer's Monocle, interned in Los Angeles and crewed on many short films. His favourite album is Kanye West's <em>808s and Heartbreak</em>, his favourite food is pasta and his favourite time of day is sometime around 9:30pm.</p>
<p><a href="http://www.conorherbert.com/" target="_blank">http://www.conorherbert.com</a>

            </p></div>
          
        </div>
  
</article>

</div>

  
</article>


          

          
            
              

            
          
        
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A brief introduction to interval arithmetic (197 pts)]]></title>
            <link>https://buttondown.email/hillelwayne/archive/a-brief-introduction-to-interval-arithmetic/</link>
            <guid>40794786</guid>
            <pubDate>Tue, 25 Jun 2024 23:15:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://buttondown.email/hillelwayne/archive/a-brief-introduction-to-interval-arithmetic/">https://buttondown.email/hillelwayne/archive/a-brief-introduction-to-interval-arithmetic/</a>, See on <a href="https://news.ycombinator.com/item?id=40794786">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                
                    <date>
                        
                            June 25, 2024
                        </date>
                
                
                
                    <h2>
                        Why x^2 isn't always x*x.
                    </h2>
                

                

                
                    
                        <p>You've got a wall in your apartment and a couch. You measure the wall with a ruler and get 7 feet, then you measure the couch and get 7 feet. Can you fit the couch against that wall?</p>
<p>Maybe. If the two measure is <em>exactly</em> 7 feet than sure, 7 ≤ 7. But you probably didn't line your measuring stick up perfectly with the couch, and also the stick itself might be a tiny bit long. There's some uncertainty around the edges, say 1/10th of a foot. </p>
<p>Instead of treating each as exactly 7 feet, we can instead say that each is <em>somewhere</em> between a minimum of 6.9 feet and a maximum of 7.1. We can write this as an <strong>interval</strong> (6.9, 7.1). From there, we can say interval (a, b) is "definitely less than" another interval (c, d) if <code>b &lt; c</code>, ie the first interval ends before the second starts. Since 7.1 !&lt; 6.9, we can't say for certain that the couch will fit against the wall. Your couch could actually be 7.1 feet and the wall 6.9 feet, or 7.05 and 7.01 feet, anything like that.</p>
<h2>More arithmetic</h2>
<p>When adding/multiplying/subtracting/dividing an interval by a scalar (single number), we just apply the op to both ends. I'll be using <a href="https://frinklang.org/" target="_blank">frink</a> because it has a built-in interval type.</p>
<div><pre><span></span><code>  i[a, b] := new interval [a, b]
  i[2, 4] + 2
[4, 6]

  i[2, 4] * 2
[4, 8]
</code></pre></div>
<p>Operating on two intervals is more complicated. The general principle is "pick a value from each interval that, when operating, give the minimum value, and do the same for the maximum value". If you measure two lengths as 3 ± 1 foot, then the length of both of them together must be 6 ± 2 feet. We can get this by just adding the minimums and maximums of the intervals together.</p>

<p>If we measure a rectangle's length as <code>(5, 7)</code> and it's width as <code>(3, 4)</code>, what's the area? Multiplication <em>seems</em> like it'd be the same as addition, just multiply the two minimums and the two maximums together:</p>
<div><pre><span></span><code>  i[5, 7] * i[3, 4]
[15, 28]
</code></pre></div>
<p>But this is breaks down when intervals cover negative numbers. If we just multiplied minimums and maximums, <code>(-3, 3) * (-3, 3)</code> would give us <code>(9, 9)</code>. But we instead get the true minimum by picking -3 from the first interval and 3 from the second, which gives us -9. So the real interval is <code>(-9, 9)</code>.</p>
<p>What about division? It works kinda like multiplication, <em>except</em> if the dividing interval spans 0, the result is undefined. Overall, interval arithmetic is like regular arithmetic except with more headaches.</p>
<h3>Trouble in paradise</h3>
<p>Now, how about <code>(-3, 3)²</code>? On first thought we say <code>(-3, 3)² = (-3, 3)*(-3, 3)</code>, which gives us the same interval <code>(-9, 9)</code>. But again, that's wrong. In <code>(-3, 3)*(-3, 3)</code>, we pick one number from each interval and multiply them together, while in <code>(-3, 3)^2</code> we pick one number from the interval and multiply it by itself. So the actual interval is <code>(0, 9)</code>. </p>


<p>But wait, doesn't that mean that <code>x*x != x^2</code>? Yes, it does. Err no, it doesn't. Maybe. It depends on what we mean by "x".</p>
<h3>The two interpretations</h3>
<ol>
<li><code>x</code> is some value in the interval <code>(-3, 3)</code>, but we don't know what it is. Then <code>x*x</code> is the same value both times, so it should be <code>(0, 9)</code>.</li>
<li><code>x</code> is "smeared out" over the <em>entire interval</em>. Then <code>x*x</code> can be treated as two separate intervals, giving us <code>(-9, 9)</code>.</li>
</ol>
<p>Now usually people use intervals to mean [1], but most interval arithmetic systems I've seen do [2], or at least a mix of both with a bias towards [2]. </p>
<p>There's two reasons why. First of all, you can reason about [2] locally. Consider the equation <code>y = sin(x)*cos(x)</code> where x is the interval <code>(0, 2π)</code>.<sup id="fnref:tau"><a href="#fn:tau">1</a></sup> Figuring out <code>y</code> under [2] is easy: it's just <code>(-1*1, 1*1) = (-1, 1)</code>. But this is impossible under [1], because sin is only ±1 when cos is 0! The actual interval under [1] is <code>(-0.5, 0.5)</code>. </p>
<p>Notice that <code>(-0.5, 0.5)</code> is a subinterval of <code>(-1, 1)</code>. That's the other reason to assume [2] in calculations: the result will always cover [1]. </p>
<p>Nonetheless [2] leads to lots of weird behavior, like <code>x*x != x^2</code>. This is called <em>overdetermination</em> and leads to <em>overestimation</em>, where your interval bounds are too wide to be that useful to you. Frink tries to be smart about this, and will in some cases rewrite interval arithmetic to avoid overdetermination, even when you <em>want</em> the intervals to be different.</p>

<p>This is all moot if we assign the same value interval to <code>(-3, 3)</code> to different variables, though, because then the interpretations of [1] and [2] don't have any differences.</p>
<div><pre><span></span><code>  x = i[-3, 3]
  y = i[-3, 3]
  x*y
[-9, 9]
</code></pre></div>
<h2>How this affects you</h2>
<div><pre><span></span><code><span># Python time!</span>
<span>&gt;&gt;&gt;</span> <span>x</span> <span>=</span> <span>0.3</span>
<span>&gt;&gt;&gt;</span> <span>x</span> <span>+</span> <span>0.00000000000000001</span>
<span>0.3</span>
<span>&gt;&gt;&gt;</span> <span>x</span> <span>+</span> <span>0.00000000000000002</span>
<span>0.3</span>
<span>&gt;&gt;&gt;</span> <span>x</span> <span>+</span> <span>0.00000000000000003</span>
<span>0.30000000000000004</span>
</code></pre></div>
<p>If a (double precision) floating point calculation lands in the interval <code>(0.3 - 3e-17, 0.3 + 3e-17)</code>, it's collapsed to the value <code>0.3</code>. This has lead to some proposals to use interval arithmetic <em>instead of</em> floating point. An interval may be less <em>precise</em> than a single FP number, but it will be more <em>accurate</em>: you won't have an exact number but you'll know that the correct number is somewhere in the bounds. While a bunch of FP computations will always give you an exact number, but it could be very far from the actual answer. </p>
<p>These proposals have been around as long as floating point. The father of the IEEE-754 standard, <a href="https://people.eecs.berkeley.edu/~wkahan/ieee754status/754story.html" target="_blank">William Kahan</a>, <a href="https://people.eecs.berkeley.edu/~wkahan/Mindless.pdf" target="_blank">wrote an essay</a> about why interval arithmetic can't replace FP. His argument comes back to overestimation: in most computations, interval boundaries grow too big to be useful. </p>
<p>He wrote that back in 2006. Since then, there's been one big new interval arithmetic proposal: John Gutafson's <a href="https://en.wikipedia.org/wiki/Unum_(number_format)" target="_blank">universal numbers</a>. I <em>think</em> his <a href="http://www.johngustafson.net/pdfs/BeatingFloatingPoint.pdf" target="_blank">posit version</a> isn't intervals but I'm not sure? This is well outside of the my area of expertise. I can tell, though, that Gustafson and Kahan <a href="http://www.johngustafson.net/pdfs/DebateTranscription.pdf" target="_blank">hate each other</a>.</p>
<p>That's the main connection between intervals and computer science. Of course, there are also particular domains where intervals are really important, such as in manufacturing tolerances.</p>
<hr>
<h2>Logic for Programmers update</h2>
<p>14k words! Writing a bunch of exercises and examples this week.</p>

                    
                

                
                    <p><em>If you're reading this on the web, you can subscribe <a href="https://buttondown.email/hillelwayne" target="_blank">here</a>. Updates are once a week. My main website is <a href="https://www.hillelwayne.com/" target="_blank">here</a>.</em></p>
                

            </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HyperCard Simulator (277 pts)]]></title>
            <link>https://hcsimulator.com/</link>
            <guid>40793924</guid>
            <pubDate>Tue, 25 Jun 2024 21:34:40 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://hcsimulator.com/">https://hcsimulator.com/</a>, See on <a href="https://news.ycombinator.com/item?id=40793924">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="innerbody">
		
	
		

		



<div id="referencecontainer">
	
		<details id="referencedetails" onmousedown="event.preventDefault();">
			<summary></summary>
		</details>

	<table id="reference">
		
		<tbody><tr><td></td><td></td></tr>

		<tr><td colspan="2">
			
			
		</td></tr>

		<tr><td colspan="2">
			<field-part id="wildcard_script" type="transparent" spellcheck="false" autoreplace="false" widemargins="false" locktext="true" onkeydown="if (event.keyCode==9) { 
					event.preventDefault(); 
					//document.execCommand('insertHTML',false,'<span>\t</span>');	indents are now automatic
				}" tabindex="0" oninput="var err; try {
					this.FixCENow();
					load_wildcard_script();
					localStorageSetItem('wildcard_script',this.contents);
					reset_wcs.enabled = true;
					upload_wcs.enabled = true;
				} catch(e) { console.warn(err = e); } 
				scripterror.innerText=err||'';
				">
			</field-part>
		</td></tr>

		<tr id="simulatorcontroltr"><td colspan="2">
			<!--button-part type=standard color=white name="show the message box" onclick="body.classList.toggle('messagebox-visible', true); messagebox_setvisible(true); "></button-part!-->
			<!--button-part type=standard color=white name="edit the simulator script" onclick="var ess = wildcard_script.lockText; body.classList.toggle('edit-simulator-script', ess); wildcard_script.lockText = !ess; this.hilite = ess; if (ess) { wildcard_script.scrollIntoView(); getSelection().selectAllChildren(wildcard_script.contentsContainer().qs('div')); } "></button-part!-->
			<button-part type="oval" color="#F8F8F8" name="see the simulator script" onclick="window.scrollTo({left:0, top:0, behavior:'smooth' });"></button-part>
			<button-part type="oval" color="#F8F8F8" name="go back to the simulator" onclick="referencedetails.open=false;"></button-part>
			<button-part type="oval" color="#F8F8F8" name="show/hide Javascript" onclick="body.classList.toggle('javascript');"></button-part>
		</td></tr>

		<tr><td colspan="2">
			Grammar of scripting language:
		</td></tr>
		
		<tr><td colspan="2">
			&lt;rule&gt; | [optional] | {group}[*]<br>
		</td></tr>
		

		<tr id="grammartr"><td colspan="1">&lt;handler&gt;</td><td colspan="1">
			<!--JavaScript output <button-part type=standard name="Hide" onclick="body.classList.toggle('javascript', false);"></button-part!-->
		</td></tr>
		
		<tr><td>on &lt;message&gt; &lt;parameterList&gt;</td><td>function*&lt;message&gt;(&lt;parameterList&gt;) {</td></tr>
		<tr><td colspan="2">&nbsp;&nbsp;&nbsp;&nbsp;[ { &lt;scriptLine&gt; } [¬] [-- comment] ]* </td></tr>
		<tr><td>end &lt;message&gt; </td><td>}</td></tr>
		
		<tr id="placeimportsbefore"></tr>
		<tr><td>&lt;identifier&gt; </td><td>/[A-Z_][A-Z_\d]*/i</td></tr>
		<tr><td>&lt;number&gt; </td><td>/[\d]+([.][\d]+)?/</td></tr>
		<tr><td>&lt;string&gt; </td><td>/"[^"]*"/</td></tr>


		<tr><td colspan="2">
		
			
		</td></tr>

	</tbody></table>

	<br>


</div>






	


	
	




	

<!--PALETTE !-->


<template id="newpalette">
	<modal-dialog name="" class="static nopadding dotted ybottom closebox palette" x="0" y="0" visible="false" style="--modal-dialog-titlebar-font: 0.5em system-ui;">
		<img src="" draggable="false">
	</modal-dialog>
</template>	










</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ball: A ball that lives in your dock (950 pts)]]></title>
            <link>https://github.com/nate-parrott/ball</link>
            <guid>40793465</guid>
            <pubDate>Tue, 25 Jun 2024 20:52:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/nate-parrott/ball">https://github.com/nate-parrott/ball</a>, See on <a href="https://news.ycombinator.com/item?id=40793465">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/nate-parrott/ball/blob/main/Recording.gif"><img src="https://github.com/nate-parrott/ball/raw/main/Recording.gif" alt="Screen recording of a ball bouncing" data-animated-image=""></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Ball</h2><a id="user-content-ball" aria-label="Permalink: Ball" href="#ball"></a></p>
<p dir="auto">It's a little ball that lives in your dock. You can drag it and it'll bounce around the screen. You can also swipe on it with two fingers. It comes in red. You can flick it, bounce it, try to make it hit the corner, see how many times it can bounce, count how many times it hits the wall, and more. It's a ball. It's fun. It's a ball.</p>
<p dir="auto"><strong>Download in <a href="https://github.com/nate-parrott/ball/releases">Releases</a></strong></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Credits</h2><a id="user-content-credits" aria-label="Permalink: Credits" href="#credits"></a></p>
<p dir="auto">It's inspired by <a href="https://heagy.com/" rel="nofollow">Nate Heagy's</a> widget for the OS X Dashboard, which I remember fondly because someone put it on our class <a href="https://en.wikipedia.org/wiki/EMac" rel="nofollow">eMac</a> in fifth grade. It was a lot bouncier and come in more colors, but it didn't go in the dock!</p>
<p dir="auto">Credit also goes to Wessley Roche, who made this <a href="https://gist.github.com/wonderbit/c8896ff429a858021a7623f312dcdbf9">little Gist</a> explaining how to get the position of the dock. I've <a href="https://github.com/nate-parrott/ball/blob/main/Ball/DockUtils.swift#L65">extended this</a> to try to estimate the position of the app's dock icon when it's clicked, so the ball can animate out of it.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Final words</h2><a id="user-content-final-words" aria-label="Permalink: Final words" href="#final-words"></a></p>
<p dir="auto">I hope you enjoy this little ball.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Fixing QuickLook (2023) (221 pts)]]></title>
            <link>https://foon.uk/fixing-quicklook/</link>
            <guid>40792740</guid>
            <pubDate>Tue, 25 Jun 2024 19:45:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://foon.uk/fixing-quicklook/">https://foon.uk/fixing-quicklook/</a>, See on <a href="https://news.ycombinator.com/item?id=40792740">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>
        

<h2><picture>
    <source height="50" srcset="https://foon.uk/fixing-quicklook/img/title-dark.svg" media="(prefers-color-scheme: dark)">
    <img height="50" src="https://foon.uk/fixing-quicklook/img/title.svg">
</picture></h2>


<p>After upgrading from Mojave to Ventura, I noticed that Apple had changed QuickLook.
</p>
<p>QuickLook is one of my favourite pieces of software. You just select a file in the Finder, press space, and the file pops up on your screen. Then you press space again and it goes away.</p>
<p>Focus stays in the Finder, so you can use the arrow keys to select different files, and the QuickLook window updates to show them to you.</p>
<p>It's simple, well-designed, fast, tasteful and just all around excellent.</p>
<p>Until now.</p>
<p>For whatever reason, QuickLook will now remove the corners of your images before showing them to you.</p>




<p>It doesn't matter if they're photos, game assets, or UI elements you're designing. Everything will be rounded off before you see it.
</p>
<p>Naturally, I searched around for the secret switch to make it stop. Apple is usually pretty good about letting us opt out of their latest improvements, so there has to be something, right? An accessibility setting? A cheeky <var>defaults.write</var>? As far as I can tell, there isn't.</p>
<p>So, I guess we're out of luck?</p>
<p>No. Don't think like that. It might be a Mac but it's still your computer. Let's fix this.</p>
<h2>QuickLook headers</h2><p>If we want to mess with how QuickLook displays things, we need to get at its window. Then we can hopefully poke around in the views and change how they draw.
</p>
<p>The QuickLook API is public and <a href="https://developer.apple.com/documentation/quicklook?language=objc">documented</a>, and if you look through the docs you'll see that this window is called <var>QLPreviewPanel</var>, there's one instance of it per app, and you retrieve it with <var>[QLPreviewPanel&nbsp;sharedPreviewPanel]</var>.</p>
<h2>Debugging Finder</h2><p>I'd only ever used QuickLook from Finder, so that was where I thought to start. Let's bust out the debugger and see what Finder's up to:
</p>
<code><span>$ </span><span>lldb -n Finder</span><br><span>error: process exited with status -1 (attach failed (Not allowed to attach to process.))</span><br></code>
<p>Actually, first, let's deal with SIP. SIP is a new Apple technology that helps you out by stopping you from reading and writing memory on your own computer. In order to fix problems in system processes like this, we have to turn it off and reboot.
</p>
<p>Alright, let's try that again:</p>
<code><span>$ </span><span>lldb -n Finder</span><br><span>Process 4040 stopped</span><br><span> thread #1, queue = 'com.apple.main-thread', stop reason = signal </span><span>SIGSTOP</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>frame </span><span>#0</span><span>: </span><span>0x000000018df1bf54 </span><span>libsystem_kernel.dylib</span><span>`</span><span>mach_msg2_trap + 8</span><br><span>libsystem_kernel.dylib`mach_msg2_trap:</span><br><span>-&gt;  </span><span>0x18df1bf54</span><span> &lt;+8&gt;</span><span>: ret</span><p><span>libsystem_kernel.dylib`macx_swapon:</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x18df1bf58</span><span> &lt;+0&gt;</span><span>: mov&nbsp;&nbsp;&nbsp;&nbsp;x16, #-0x30</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x18df1bf5c</span><span> &lt;+4&gt;</span><span>: svc&nbsp;&nbsp;&nbsp;&nbsp;#0x80</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x18df1bf60</span><span> &lt;+8&gt;</span><span>: ret</span><br><span>Target 0: (Finder) stopped.</span><br><span>Executable module set to "/System/Library/CoreServices/Finder.app/Contents/MacOS/Finder".</span><br><span>Architecture set to: arm64e-apple-macosx-.</span></p></code>
<p>&lt;hacker-voice&gt;We're in&lt;/hacker-voice&gt; to our own machine.
</p>
<p>Let's try setting a breakpoint on <var>sharedPreviewPanel</var>.</p>
<code><span>(lldb) </span><span>break set -n sharedPreviewPanel</span><br><span>Breakpoint 5: where = QuickLookUI`+[QLPreviewPanel sharedPreviewPanel], address = 0x00000001f81c025c</span><br><span>(lldb) </span><span>c</span><br></code>
<p>Navigate to an image file, press space, and:
</p>
<code><span>Process 4040 stopped</span><br><span> thread #1, queue = 'com.apple.main-thread', stop reason = </span><span>breakpoint 5.1</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>frame </span><span>#0</span><span>: </span><span>0x00000001f81c025c </span><span>QuickLookUI</span><span>`</span><span>+[QLPreviewPanel sharedPreviewPanel]</span><br><span>QuickLookUI`+[QLPreviewPanel sharedPreviewPanel]:</span><br><span>-&gt;  </span><span>0x1f81c025c</span><span> &lt;+0&gt;</span><span>:  pacibsp</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x1f81c0260</span><span> &lt;+4&gt;</span><span>:  sub&nbsp;&nbsp;&nbsp;&nbsp;sp, sp, #0x40</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x1f81c0264</span><span> &lt;+8&gt;</span><span>:  stp&nbsp;&nbsp;&nbsp;&nbsp;x22, x21, [sp, #0x10]</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x1f81c0268</span><span> &lt;+12&gt;</span><span>: stp&nbsp;&nbsp;&nbsp;&nbsp;x20, x19, [sp, #0x20]</span><br></code>
<p>LLDB has stopped the Finder process in the <var>sharedPreviewPanel</var> function. Let's get the return value, which should be the preview panel instance:
</p>
<code><span>(lldb) </span><span>finish</span><br><span>(lldb) </span><span>po $x0</span><br><span>&lt;QLPreviewPanel: 0x119c64c90&gt;</span><br></code>
<p>Alright! We're getting somewhere. Let's see what's in this panel:
</p>
<code><span>(lldb) </span><span>po [$x0 recursiveDescription]</span><br><span>[   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=--- v=--- </span><span>NSNextStepFrame</span><span> 0x12cea29b0 f=(0,0,370,223) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7fcf0&gt;</span><br><span>  [   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=-&amp;- v=-&amp;- </span><span>QLPreviewBackgroundView</span><span> 0x11e00df90 f=(0,0,370,223) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7fc60&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;[   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=--- v=--- </span><span>NSView</span><span> 0x11e040ec0 f=(0,0,370,223) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7fc00&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=--- v=--- </span><span>NSView</span><span> 0x11e047f50 f=(5,5,360,180) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7f9f0&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=-&amp;- v=-&amp;- </span><span>NSView</span><span> 0x11cf35780 f=(0,0,360,180) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7f960&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=-&amp;- v=-&amp;- </span><span>NSView</span><span> 0x11cf31c50 f=(0,0,360,180) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7f8d0&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=-&amp;- v=-&amp;- </span><span>NSView</span><span> 0x11cf31fb0 f=(0,0,360,180) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7f840&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=-&amp;- v=-&amp;- </span><span>QLPanelPreviewView</span><span> 0x11cf35d10 f=(0,0,360,180) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7f4e0&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   A&nbsp;&nbsp;&nbsp;&nbsp;   W   ] h=-&amp;- v=-&amp;- </span><span>QLPreviewContainerView</span><span> 0x11cf360d0 f=(0,0,360,180) b=(-) =&gt; &lt;CALayer: 0x600003332a80&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;   W   ] h=--- v=--- </span><span>NSRemoteView</span><span> 0x119c3a040 f=(0,0,360,180) b=(-) =&gt; &lt;NSVBCALayerHost: 0x600003225a80&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;   W   ] h=--- v=--- </span><span>QLPreviewTitleBarView</span><span> 0x11e0482b0 f=(8,189,354,30) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003fbaf70&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   AF&nbsp;&nbsp;&nbsp;&nbsp;  w   ] h=--- v=--- </span><span>QLPreviewWindowButton</span><span> 0x11cf35300 "Button" f=(4,9,12,12) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7fa80&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;V  W   ] h=--- v=--- </span><span>NSButtonImageView</span><span> 0x11cfaeca0 f=(0,0,12,12) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7f2a0&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   AF&nbsp;&nbsp;&nbsp;&nbsp;  w   ] h=--- v=--- </span><span>QLPreviewWindowButton</span><span> 0x11cf31310 "Button" f=(24,9,12,12) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7fb40&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;V  W   ] h=--- v=--- </span><span>NSButtonImageView</span><span> 0x11cfaef00 f=(0,0,12,12) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7f390&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=--- v=--- </span><span>NSView</span><span> 0x11e048d80 f=(114,4,240,22) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7a310&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=--- v=--- </span><span>QLControlsCenteringView</span><span> 0x11cfa9960 f=(0,0,240,22) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7a280&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=--- v=--- </span><span>QLControlsContainerView</span><span> 0x11cfa9ed0 f=(0,0,240,22) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f7a220&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   AF&nbsp;&nbsp;&nbsp;&nbsp;  w   ] h=--- v=--- </span><span>QLControlSegmentedControl</span><span> 0x11cf630a0 f=(38,-2,33,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003ced470&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   AF   V  W   ] h=--- v=--- </span><span>NSSegmentItemView</span><span> 0x11cf63560 f=(0,0,33,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003ced500&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;V  W   ] h=--- v=--- </span><span>NSSegmentItemBezelView</span><span> 0x11cf63840 f=(0,0,33,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f80d80&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=--- v=--- </span><span>NSSegmentItemImageView</span><span> 0x11cf63bb0 f=(10,1.5,15,17) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003ced410&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   AF&nbsp;&nbsp;&nbsp;&nbsp;  w   ] h=--- v=--- </span><span>QLControlSegmentedControl</span><span> 0x11cf5b880 f=(-1,-2,33,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003cec690&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   AF   V  W   ] h=--- v=--- </span><span>NSSegmentItemView</span><span> 0x11cf5bd40 f=(0,0,33,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003ced530&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;V  W   ] h=--- v=--- </span><span>NSSegmentItemBezelView</span><span> 0x11cf5c020 f=(0,0,33,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f80060&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=--- v=--- </span><span>NSSegmentItemImageView</span><span> 0x11cf5c390 f=(9,4,15,15) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003ceccc0&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   AF&nbsp;&nbsp;&nbsp;&nbsp;  w   ] h=--- v=--- </span><span>QLControlSegmentedControl</span><span> 0x11cf53ee0 f=(77,-2,33,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003cee370&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   AF   V  W   ] h=--- v=--- </span><span>NSSegmentItemView</span><span> 0x11cf543a0 f=(0,0,33,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003ced110&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;V  W   ] h=--- v=--- </span><span>NSSegmentItemBezelView</span><span> 0x11cf54680 f=(0,0,33,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f80270&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;   w   ] h=--- v=--- </span><span>NSSegmentItemImageView</span><span> 0x11cf549f0 f=(9.5,2,15,17) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003cec9c0&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   AF&nbsp;&nbsp;&nbsp;&nbsp;  w   ] h=--- v=--- </span><span>QLControlSegmentedControl</span><span> 0x11cf4c8c0 f=(116,-2,125,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f784e0&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   AF   V  W   ] h=--- v=--- </span><span>NSSegmentItemView</span><span> 0x11cf4cc70 f=(0,0,125,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f78720&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   A&nbsp;&nbsp;&nbsp;&nbsp;V  W   ] h=--- v=--- </span><span>NSSegmentItemBezelView</span><span> 0x11cf4cf50 f=(0,0,125,25) b=(-) =&gt; &lt;_NSViewBackingLayer: 0x600003f83000&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [   AF&nbsp;&nbsp;&nbsp;&nbsp;  w   ] h=--- v=--- </span><span>NSSegmentItemLabelView</span><span> 0x11cf4d650 "Open with Preview" f=(2,3,121,16) b=(-) =&gt; &lt;NSTextLayer: 0x600003f785a0&gt;</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[   AF&nbsp;&nbsp;&nbsp;&nbsp;  w   ] h=--- v=--- </span><span>NSTextField</span><span> 0x11e04cda0 "Screenshot 2023-08-28 at 16.21.26" f=(42,8,66,16) b=(-) =&gt; &lt;NSTextLayer: 0x600003f72610&gt;</span><br><span>A=autoresizesSubviews, C=canDrawConcurrently, D=needsDisplay, F=flipped, G=gstate, H=hidden (h=by ancestor), L=needsLayout (l=child needsLayout), U=needsUpdateConstraints (u=child needsUpdateConstraints), O=opaque, P=preservesContentDuringLiveResize, S=scaled/rotated, W=wantsLayer (w=ancestor wantsLayer), V=needsVibrancy (v=allowsVibrancy), #=has surface</span><br></code>
<p>This is pretty juicy. We can probably ignore <var>QPreviewTitleBarView</var> and its children, so let's focus on the other branch of the tree. There's a <var>QLPreviewBackgroundView</var>, then a bunch of <var>NSView</var>s, and then a <var>QLPanelPreviewView</var>, a <var>QLPreviewContainerView</var>, and right at the very top, an <var>NSRemoteView</var>.
</p>
<h2>NSRemote­View</h2><p>I haven't come across <var>NSRemoteView</var> before and I'm not really sure what it is. There doesn't seem to be a public header for it. I wonder how it works?
</p>
<p>Well, we might be getting ahead of ourselves here. We still don't know if the <var>NSRemoteView</var> has anything to do with our image. Let's hide it and see if our image disappears.</p>
<code><span>(lldb) </span><span>po [(NSRemoteView *)0x119c3a040 setHidden:YES]</span><br><span>(lldb) </span><span>c</span><br></code>

<figure>
    <picture>
        <source width="438" height="291" srcset="https://foon.uk/fixing-quicklook/img/blank-dark.png" media="(prefers-color-scheme: dark)">
        <img width="438" height="291" src="https://foon.uk/fixing-quicklook/img/blank-light.png">
    </picture>
</figure>

<p>Indeed it does. So it's this <var>NSRemoteView</var> that's actually displaying our image. The “remote” makes me think it's communicating with another process which is doing the actual rendering, so we'll probably have to look inside the remote process to see what it's doing. But which process is that? Perhaps the <var>NSRemoteView</var> can tell us? Let's see what it can do:
</p>
<code><span>(lldb) </span><span>po [[NSRemoteView class] fp_shortMethodDescription]</span><br><span>&lt;NSRemoteView: 0x1e9543bc0&gt;:</span><br><span>in NSRemoteView:</span><br><span>	Class Methods:</span><br><span>		+ (void) initialize; </span><span>(0xd465800195a3a894)</span><br><span>		+ (void) observeValueForKeyPath:(id)arg1 ofObject:(id)arg2 change:(id)arg3 context:(void*)arg4; </span><span>(0xea63800195a944bc)</span><br><span>		+ (id) _findFirstKeyViewInDirection:(unsigned long)arg1 forKeyLoopGroupingView:(id)arg2; </span><span>(0x3679000195a95140)</span><br><span>		+ (BOOL) automaticallyNotifiesObserversOfTouchBar; </span><span>(0xc10a800195ad0774)</span><br><span>		+ (const __CFString*) privateRunLoopMode; </span><span>(0x7101800195a95148)</span><br><span>		+ (CGColor*) _warningColorCG; </span><span>(0x2119800195aadb38)</span><br><span>		+ (void) initAll; </span><span>(0x932a000195a3ad40)</span><br><span>		+ (id) _warningColorNS; </span><span>(0x7d7d000195aadbbc)</span><br><span>		+ (BOOL) _appModalSessionWouldBeSafe:(BOOL)arg1; </span><span>(0x9c39800195a9b638)</span><br><span>		+ (id) _remoteViewForIdentifier:(id)arg1; </span><span>(0xda2a800195a94dc4)</span><br><span>		+ (BOOL) allowSetObjectForKey:(id)arg1 bridge:(id)arg2 bridgePhase:(unsigned char)arg3 withReply:(^block)arg4; </span><span>(0x6272000195aa1b44)</span><br><span>		+ (BOOL) anyRemoteViewAttachedToWindow:(id)arg1; </span><span>(0x285f800195a94c14)</span><br><span>		+ (void) deferBlockOntoMainThread:(^block)arg1; </span><span>(0xe1c800195a9514c)</span><br><span>		+ (BOOL) isFakeEvent:(id)arg1; </span><span>(0x4b56800195ab2860)</span><br><span>		+ (id) remoteViewsAttachedToWindow:(id)arg1; </span><span>(0xe551800195a94a14)</span><br><span>		+ (void) rendezvousWindow:(unsigned char)arg1 kind:(unsigned char)arg2 spawnedBy:(id)arg3 styleMask:(unsigned long)arg4 contentRect:(CGRect)arg5 identifier:(id)arg6 listenerEndpoint:(id)arg7 completion:(^block)arg8; </span><span>(0x8501800195aa4da0)</span><br><span>		+ (Class) rendezvousWindowClass:(Class)arg1; </span><span>(0x6316800195a99d48)</span><br><span>	Properties:</span><br><span>		@property (retain, nonatomic) NSAccessibilityRemoteUIElement* accessoryViewAccessibilityParent;</span><br><span>		@property (readonly, nonatomic) NSRemoteView* spawnedBy;</span><br><span>		@property (readonly) CGPoint requestedOrigin;</span><br><span>		@property (readonly) BOOL _isAssociated;</span><br><span>		@property NSObject&lt;NSRemoteViewDelegate&gt;* delegate;</span><br><span>		@property (retain) NSView* accessoryView;</span><br><span>		@property (readonly) BOOL isValid;</span><br><span>		@property (copy, nonatomic) NSString* serviceName;</span><br><span>		@property (retain, nonatomic) NSUUID* serviceInstanceIdentifier;  (@synthesize serviceInstanceIdentifier = _serviceInstanceIdentifier;)</span><br><span>		@property (copy, nonatomic) NSString* serviceSubclassName;</span><br><span>		@property (readonly) unsigned long hash;</span><br><span>		@property (readonly) Class superclass;</span><br><span>		@property (readonly, copy) NSString* description;</span><br><span>		@property (readonly, copy) NSString* debugDescription;</span><br><span>		@property (readonly, nonatomic) NSXPCInterface* auxiliaryInterfaceOutgoing;</span><br><span>		@property (readonly, nonatomic) NSXPCInterface* auxiliaryInterfaceIncoming;</span><br><span>		@property (weak) NSXPCConnection* auxiliaryServiceConnection;  (@synthesize auxiliaryServiceConnection = auxiliaryServiceConnection;)</span><br><span>		@property (readonly) BOOL wantsAlertStylePadding;</span><br><span>	Instance Methods:</span><br><span>		- (oneway void) release; </span><span>(0xc97d800195a40a60)</span><br><span>		- (void) dealloc; </span><span>(0x715b800195a94fa0)</span><br><span>		- (id) description; </span><span>(0x1b2e000195a94710)</span><br><span>		- (id) retain; </span><span>(0x3811000195a3ff68)</span><br><span>		- (BOOL) isValid; </span><span>(0xc844800195a413e0)</span><br><span>		- (void) .cxx_destruct; </span><span>(0x7560800195ab293c)</span><br><span>		- (void) _setDelegate:(id)arg1; </span><span>(0xc37a800195a3feac)</span><br><span>		- (id) delegate; </span><span>(0x1a7c800195a3fb64)</span><p><span>[...hundreds and hundreds of methods...]</span></p></code>
<p>A lot!
</p>
<p>Searching for “process” in that list of methods yields <var>_serviceProcessIdentifier</var> so let's call it.</p>
<code><span>(lldb) </span><span>po [$v _serviceProcessIdentifier]</span><br><span>5959</span><br></code>
<p>What's that process?
</p>
<code><span>$ </span><span>ps -c 5959</span><br><span>  PID TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   TIME CMD</span><br><span> 5959 ??&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0:14.34 QuickLookUIService</span><br></code>
<p>This has to be it. Debugging Finder isn't what we want. We need to be debugging QuickLookUIService.
</p>
<h2>Debugging QuickLookUI­Service</h2>
<code><span>(lldb) </span><span>detach</span><br><span>Process 4040 detached</span><br><span>(lldb) </span><span>attach 5959</span><br><span>Process 5959 stopped</span><br><span>  thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>frame </span><span>#0</span><span>: </span><span>0x000000018df1bf54 </span><span>libsystem_kernel.dylib</span><span>`</span><span>mach_msg2_trap + 8</span><br><span>libsystem_kernel.dylib`mach_msg2_trap:</span><br><span>-&gt;  </span><span>0x18df1bf54</span><span> &lt;+8&gt;</span><span>: ret</span><p><span>libsystem_kernel.dylib`macx_swapon:</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x18df1bf58</span><span> &lt;+0&gt;</span><span>: mov&nbsp;&nbsp;&nbsp;&nbsp;x16, #-0x30</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x18df1bf5c</span><span> &lt;+4&gt;</span><span>: svc&nbsp;&nbsp;&nbsp;&nbsp;#0x80</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x18df1bf60</span><span> &lt;+8&gt;</span><span>: ret</span><br><span>Target 0: (QuickLookUIService) stopped.</span></p></code>
<p>So, the other side of that <var>NSRemoteView</var> is... somewhere... in this process.
</p>
<p>If we could iterate through all the views in the process, we could see if any of them looked like the other end of an <var>NSRemoteViewDelegate</var>.</p>
<p>I searched the internet for a function that would get all views, but I couldn't find anything except for the odd person saying to just use Xcode.<sup><a id="ref1" href="#note1">1</a></sup></p>
<p>Well, why don't we just use Xcode?</p>
<p>After opening Xcode, creating a project, choosing where to save the project, entering a team name, choosing a template, entering a bundle identifier, creating a scheme, and setting the scheme target so it'll let me use the debugger, I attached it to QuickLookUIService, pressed “Show View Hierarchy”, and:</p>
<figure>
    <picture>
        <source srcset="https://foon.uk/fixing-quicklook/thumbs/xcode-dark.png" media="(prefers-color-scheme: dark)">
        <img src="https://foon.uk/fixing-quicklook/thumbs/xcode-light.png">
    </picture>
<figcaption>Xcode's view debugger attached to QuickLookUIService.</figcaption>
</figure>

<p>Well, that was easy! We can click through these views and get info about them, including their addresses so we can mess with them in the debugger. And we can see straight away that the frontmost view, which Xcode tells us is a <var>QLBorderView</var>, is a border with rounded corners!
</p>
<p>Wait, there's a border?</p>
<h2>The Border</h2><p>There is. I hadn't noticed it at first, but if you zoom in, you can see that as well as rounding the corners, QuickLook also superimposes a slightly-too-small border:
</p>
<figure>
    <picture>
        <source srcset="https://foon.uk/fixing-quicklook/img/big-dark.png" media="(prefers-color-scheme: dark)">
        <img src="https://foon.uk/fixing-quicklook/img/big-light.png">
    </picture>
    <figcaption></figcaption>
</figure>

<p>The <var>QLBorderView</var> turns out to be very simple; it's just a view whose layer has a <var>borderWidth</var> and a <var>borderColor</var>. Let's get its address from Xcode and tell it to cut it out:
</p>
<code><span>(lldb) </span><span>po [0x600000850180 setBorderWidth:0];</span><br></code>

<figure>
    <picture>
        <source srcset="https://foon.uk/fixing-quicklook/img/big-borderless-dark.png" media="(prefers-color-scheme: dark)">
        <img src="https://foon.uk/fixing-quicklook/img/big-borderless-light.png">
    </picture>
    <figcaption>Border successfully removed!</figcaption>
</figure>


<h2>Unclipping</h2><p>So, the border is gone, but the corners are still rounded. We can see in the view debugger that the image view's corners are not rounded, so something must be clipping it.
</p>
<p>Let's have a look through all of the parent views' layers and see if any of them have a nonzero <var>cornerRadius</var>.</p>
<p>You could probably write some code to do this but I just clicked through each one and copied its layer's address into the debugger to check:</p>
<code><span>(lldb) </span><span>p [(CALayer *)0x60000283f5a0 cornerRadius]</span><br><span>(double) $78 = 0</span><br><span>(lldb) </span><span>p [(CALayer *)0x60000283f660 cornerRadius]</span><br><span>(double) $79 = 0.43438914027149322</span><br></code>
<p>Well, that didn't take long. Let's try...
</p>
<code><span>(lldb) </span><span>po [0x60000283f660 setMasksToBounds:0]</span><br><span>(lldb) </span><span>po [0x60000283f660 setNeedsDisplay]</span><br></code>

<figure>
    <picture>
        <source srcset="https://foon.uk/fixing-quicklook/img/fixed-dark.png" media="(prefers-color-scheme: dark)">
        <img src="https://foon.uk/fixing-quicklook/img/fixed-light.png">
    </picture>
    <figcaption>Corners restored!</figcaption>
</figure>


<h2>Keeping it that way</h2><p>So, we've now fixed our view. We can see all of our pixels.
</p>
<p>But we're not done yet, because when you click on a different file, you get a new view, and the new view is rounded. It looks like QL creates one view per previewed file, and reuses the old view only for the same file.</p>
<p>So, we need to intercept it when it makes new views and stop it from screwing them up.</p>
<p>Let's start with that border view. When is it created? We'll break on its init method, which its method list tells us is <var>initWithFrame:</var>.</p>
<code><span>(lldb) </span><span>break set -n '[QLOverlayBorderView initWithFrame:]'</span><br><span>(lldb) </span><span>c</span><br></code>
<p>This does indeed trigger when you select a new image:
</p>
<code><span>Process 5959 stopped</span><br><span>  thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>frame </span><span>#0</span><span>: </span><span>0x00000001f827c7fc </span><span>QuickLookUI</span><span>`</span><span>-[QLOverlayBorderView initWithFrame:]</span><br><span>QuickLookUI`-[QLOverlayBorderView initWithFrame:]:</span><br><span>-&gt;  </span><span>0x1f827c7fc</span><span> &lt;+0&gt;</span><span>:  pacibsp</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x1f827c800</span><span> &lt;+4&gt;</span><span>:  sub&nbsp;&nbsp;&nbsp;&nbsp;sp, sp, #0x30</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x1f827c804</span><span> &lt;+8&gt;</span><span>:  stp&nbsp;&nbsp;&nbsp;&nbsp;x20, x19, [sp, #0x10]</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x1f827c808</span><span> &lt;+12&gt;</span><span>: stp&nbsp;&nbsp;&nbsp;&nbsp;x29, x30, [sp, #0x20]</span><br><span>Target 0: (QuickLookUIService) stopped.</span><br></code>
<p>Let's see who's calling us:
</p>
<code><span>(lldb) </span><span>bt 5</span><br><span>  thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1</span><br><span>  * </span><span>frame </span><span>#0</span><span>: </span><span>0x00000001f827c7fc </span><span>QuickLookUI</span><span>`</span><span>-[QLOverlayBorderView initWithFrame:]</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>frame </span><span>#1</span><span>: </span><span>0x00000001f8203128 </span><span>QuickLookUI</span><span>`</span><span>-[QLDisplayBundleViewController enableBorder] + 968</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>frame </span><span>#2</span><span>: </span><span>0x0000000106a02f80 </span><span>Image</span><span>`</span><span>___lldb_unnamed_symbol317 + 84</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>frame </span><span>#3</span><span>: </span><span>0x00000001f8202cb8 </span><span>QuickLookUI</span><span>`</span><span>-[QLDisplayBundleViewController _updateOverlayBorder] + 88</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>frame </span><span>#4</span><span>: </span><span>0x00000001f8203264 </span><span>QuickLookUI</span><span>`</span><span>-[QLDisplayBundleViewController observeValueForKeyPath:ofObject:change:context:] + 108</span><br></code>
<p>Interesting. The border view is being called from something called <var>enableBorder</var>. What if we disabled <var>enableBorder</var>?
</p>
<p>There are no docs for the <var>QLDisplayBundleViewController</var>, of course, but there's always a method list:</p>
<code><span>(lldb) </span><span>po [$x0 fp_shortMethodDescription]</span><br><span>&lt;QLImageDisplayBundleViewController: 0x13053d770&gt;:</span><br><span>in QLImageDisplayBundleViewController:</span><br><span>	Properties:</span><br><span>		@property (readonly) IKImageView2* imageView;</span><br><span>	Instance Methods:</span><br><span>		- (id) imageView; </span><span>(0xf978000106a02cf8)</span><br><span>		- (BOOL) _epsilonEqualRect:(CGRect)arg1 toRect:(CGRect)arg2; </span><span>(0x8f22800106a02d50)</span><br><span>		- (BOOL) useLayerMaskForCorners; </span><span>(0xe439000106a02dbc)</span><br><span>		- (void) updateContentCornerRadius; </span><span>(0x582e800106a02e8c)</span><br><span>		- (void) didSave:(BOOL)arg1 toURL:(id)arg2 forClosing:(BOOL)arg3; </span><span>(0xf67c000106a02e90)</span><br><span>		- (void) enableBorder; </span><span>(0x7b35800106a02f2c)</span><br><span>		- (void) disableBorder; </span><span>(0x9d21800106a02f90)</span><br><span>		- (void) teardownMarkup:(long)arg1 needsSave:(BOOL*)arg2; </span><span>(0xe96b000106a02ff4)</span><br><span>		- (BOOL) mustHandleDragAtLocation:(CGPoint)arg1; </span><span>(0xdc49800106a0305c)</span><br><span>		- (BOOL) mustHandleDoubleClickAtLocation:(CGPoint)arg1; </span><span>(0xb042800106a030b0)</span><br><span>		- (void) copy:(id)arg1; </span><span>(0x325c800106a03140)</span><br><span>		- (void) selectAll:(id)arg1; </span><span>(0xb532800106a031a4)</span><br><span>(QLDisplayBundleViewController ...)</span><br></code>
<p>As well as <var>enableBorder</var>, there's a <var>disableBorder</var>. If we're lucky it might disable the border.
</p>
<code><span>(lldb) </span><span>po [$x0 disableBorder]</span><br></code>
<p>It does! So, to fix our QuickLook process, we'll have to arrange for <var>disableBorder</var> to be called instead of <var>enableBorder</var>.<sup><a id="ref2" href="#note2">2</a></sup>
</p>
<p>Now, what about the rounded corners? We can set a breakpoint to see where the corners get rounded:</p>
<code><span>(lldb) </span><span>break set -n 'setCornerRadius:' -c '$x0 == 0x600002cbd830 &amp;&amp; $d0 != 0.0'</span><br></code>
<p>When this breakpoint is hit, we can see that it's being called from a method called <var>updateCornerRadius</var>.
</p>
<p>So, our strategy for making our fix persist will be to:</p>
<ol>
<li>Patch <var>updateCornerRadius</var> to return immediately without doing anything.
</li><li>Patch <var>enableBorder</var> to just call <var>disableBorder</var> and return.
</li></ol>


<h2>Aside: Method Swizzling</h2><p>In Objective-C, classes have methods and methods have implementations. As a holdover from the bicycle-for-the-mind days, the Objective-C runtime is hacker-friendly and provides functions to help us monkey around with things:
</p>
<code><span>Method</span><span> </span><span>class_getInstanceMethod</span><span>(</span><span>Class</span><span>,</span><span> </span><span>SEL</span><span>);</span><br><span>IMP</span><span> </span><span>class_getMethodImplementation</span><span>(</span><span>Class</span><span>,</span><span> </span><span>SEL</span><span>);</span><p><span>IMP</span><span> </span><span>method_getImplementation</span><span>(</span><span>Method</span><span>);</span><br><span>IMP</span><span> </span><span>method_setImplementation</span><span>(</span><span>Method</span><span>,</span><span> </span><span>IMP</span><span>);</span><br><span>void</span><span> </span><span>method_exchangeImplementations</span><span>(</span><span>Method</span><span>,</span><span> </span><span>Method</span><span>);</span></p></code>
<p>In theory, you should be able to use these functions to switch out the implementations of <var>enableBorder</var> and <var>updateCornerRadius</var>.
</p>
<p>But, try as I might, I couldn't get it to work reliably. Maybe I was holding it wrong, but instead of spending time figuring out why, I just went straight to no-nonsense instruction patching.</p>
<h2>Patching the corner radius</h2><p>Let's patch <var>updateCornerRadius</var> to return immediately without doing anything. We'll write a <var>ret</var> instruction over the first instruction in the function.
</p>
<p>As documented in this <a href="https://documentation-service.arm.com/static/644a406baa78c007af74e6fd">76MB PDF</a>, the encoding of <var>ret</var> in ARM64 is <var>0xd65f03c0</var>.</p>
<p>We can write a simple Python script that will find the function in memory and patch it:</p>
<code><span>(lldb) </span><span>script</span><br><span>x, = lldb.target.FindSymbols('-[IKImageContentView updateCornerRadius]')</span><br><span>e = lldb.SBError()</span><br><span>lldb.process.WriteMemory(</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;x.symbol.addr.load_addr,</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;struct.pack('&lt;I', 0xd65f03c0),</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;e</span><br><span>)</span><br><span>assert e.Success()</span><br></code>
<p>Check it worked:
</p>
<code><span>(lldb) </span><span>dis -n updateCornerRadius -c 4</span><br><span>ImageKit`-[IKImageContentView updateCornerRadius]:</span><br><span>-&gt;  </span><span>0x1c3ec9a60</span><span> &lt;+0&gt;</span><span>:  ret</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x1c3ec9a64</span><span> &lt;+4&gt;</span><span>:  stp&nbsp;&nbsp;&nbsp;&nbsp;d9, d8, [sp, #-0x30]!</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x1c3ec9a68</span><span> &lt;+8&gt;</span><span>:  stp&nbsp;&nbsp;&nbsp;&nbsp;x20, x19, [sp, #0x10]</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x1c3ec9a6c</span><span> &lt;+12&gt;</span><span>: stp&nbsp;&nbsp;&nbsp;&nbsp;x29, x30, [sp, #0x20]</span><br></code>
<p>Success!
</p>
<h2>Patching enableBorder</h2><p>Patching <var>enableBorder</var> is a little tricker, since we don't just want to have it <var>ret</var>, we want to have it jump to <var>disableBorder</var>.
</p>
<p>The ARM64 instruction for performing an unconditional jump is <var>b</var>, and is encoded as follows:</p>

<ul>
<li>The instruction is 4 bytes long, like all ARM64 instructions.
</li><li>The high 6 bits are <var>00101</var>.
</li><li>The low 26 bits are the number of instructions to jump, relative to the current instruction.
</li></ul>

<p>Each instruction is 4 bytes, so we just need to subtract the destination address from the source address, sign-extend to 26 bits, and set the high 6 bits to <var>00101</var>.
</p>
<p>Here's the Python code to do that:</p>
<code><span>(lldb) </span><span>script</span><br><span>def get_symbol_address(name):</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;symbol_context, = lldb.target.FindSymbols(name)</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;return symbol_context.symbol.addr.load_addr</span><p><span>enableBorder = get_symbol_address('-[QLDisplayBundleViewController enableBorder]')</span><br><span>disableBorder = get_symbol_address('-[QLDisplayBundleViewController disableBorder]')</span></p><p><span>jump_offset_bytes = disableBorder - enableBorder</span><br><span>jump_offset_insns = jump_offset_bytes // 4</span></p><p><span>def sign_extend(val, nbits):</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;return (val + (1 &lt;&lt; nbits)) % (1 &lt;&lt; nbits)</span></p><p><span>jump_insn = (5 &lt;&lt; 26) | sign_extend(jump_offset_insns, 26)</span></p><p><span>e = lldb.SBError()</span><br><span>lldb.process.WriteMemory(</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;enableBorder,</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;struct.pack('&lt;I', jump_insn),</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;e</span><br><span>)</span><br><span>assert e.Success()</span></p></code>
<p>Check it worked:
</p>
<code><span>(lldb) </span><span>dis -n '-[QLDisplayBundleViewController enableBorder]' -c 4</span><br><span>QuickLookUI`-[QLDisplayBundleViewController enableBorder]:</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x20b23ed60</span><span> &lt;+0&gt;</span><span>:  b&nbsp;&nbsp;&nbsp;&nbsp;  0x20b23f164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   ; -[QLDisplayBundleViewController disableBorder]</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x20b23ed64</span><span> &lt;+4&gt;</span><span>:  stp&nbsp;&nbsp;&nbsp;&nbsp;d15, d14, [sp, #-0x90]!</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x20b23ed68</span><span> &lt;+8&gt;</span><span>:  stp&nbsp;&nbsp;&nbsp;&nbsp;d13, d12, [sp, #0x10]</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>0x20b23ed6c</span><span> &lt;+12&gt;</span><span>: stp&nbsp;&nbsp;&nbsp;&nbsp;d11, d10, [sp, #0x20]</span><br></code>
<p>Nice! <sup><a id="ref3" href="#note3">3</a></sup>
</p>
<h2>Putting it all together</h2><p>We now have all the building blocks we need to make a nice script that attaches to all running QuickLook processes and patches them. This article is long enough already, so instead of reproducing it here I'll just link to the repo. That way you'll get any fixes that have been made since I wrote this article, too.
</p>
<p>You can find the latest version of the script <a href="https://github.com/rogual/fix-quicklook">here</a>.</p>
<h2>Conclusion</h2><p>I am reminded of the words of the late, great Douglas Adams:
</p>
<blockquote>
The major difference between a thing that might go wrong and a thing that cannot possibly go wrong is that when a thing that cannot possibly go wrong goes wrong it usually turns out to be impossible to get at and repair.
</blockquote>

<p>Well, perhaps not impossible. But that was rather involved!
</p>
<h2>The bit where I try and sell you something</h2><p>Thanks for reading. If you'd like to read more from me, I've got <a href="https://foon.uk/how-flash-2022">this article</a> from last year about how I ported a Flash game to C++. My <a href="https://foon.uk/">website</a> has a bunch of free games I've made over the years, and I've also got two games out on Steam:
</p>
<p>Firstly, <a href="https://store.steampowered.com/app/741110/Blackshift/">Blackshift</a>, an epic puzzle game which you can think of as Chip's Challenge in space.</p>
<p>And more recently, <a href="https://store.steampowered.com/app/1458090/Hapland_Trilogy/">Hapland Trilogy</a>, a smaller point-and-click game.</p>
<p>If you have comments about the article, or just want to say hi, please feel free to drop me an email at <a href="mailto:r@foon.uk">r@foon.uk</a>.</p>
<p>Oh, and if you want to keep up to date with anything else I write, there's an <a href="https://foon.uk/feeds/rss.xml">RSS feed</a>. RSS is coming back!</p>
<p>See you next time!</p>
<p>Robin Allen</p>
<p>2023</p>
        <div><p><a id="note1" href="#ref1">1</a>.  I'm not sure why I didn't think of <var>[NSApp windows]</var>. But I'm glad I ended up in Xcode because its view debugger is great.</p><p><a id="note2" href="#ref2">2</a>.  Why not just have <var>enableBorder</var> do nothing? I tried, but it's not enough. You really do need to call <var>disableBorder</var>.</p><p><a id="note3" href="#ref3">3</a>.  No, I did not get all this stuff working on the first try.</p></div>
    </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Rabbit data breach: all r1 responses ever given can be downloaded (172 pts)]]></title>
            <link>https://rabbitu.de/articles/security-disclosure-1</link>
            <guid>40792684</guid>
            <pubDate>Tue, 25 Jun 2024 19:39:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://rabbitu.de/articles/security-disclosure-1">https://rabbitu.de/articles/security-disclosure-1</a>, See on <a href="https://news.ycombinator.com/item?id=40792684">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><span><span>rabbit&nbsp;</span> </span><span><span>data&nbsp;</span> </span><span><span>breach:&nbsp;</span> </span><span><span>all&nbsp;</span> </span><span><span>r1&nbsp;</span> </span><span><span>responses&nbsp;</span> </span><span><span>ever&nbsp;</span> </span><span><span>given&nbsp;</span> </span><span><span>can&nbsp;</span> </span><span><span>be&nbsp;</span> </span><span><span>downloaded&nbsp;</span> </span></p> <p><img src="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='574px'%20height='695px'%20viewBox='0%200%20574%20695'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eskull%20bunny%204%3c/title%3e%3cg%20id='skull-bunny-4'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M238.099695,71.5133627%20C243.33016,71.5133627%20248.30593,73.0807016%20252.481514,75.8531858%20C256.657099,78.6256699%20260.032496,82.6032994%20262.062215,87.4238807%20L357.960596,315.182536%20C360.318094,320.781593%20360.182941,326.806152%20358.05865,332.020322%20C355.934358,337.234491%20351.820928,341.638271%20346.221872,343.995769%20C341.432105,346.012512%20336.083029,346.268494%20331.122568,344.71835%20L189.454763,300.447161%20C182.406257,298.244503%20176.626917,293.148484%20173.55932,286.431119%20L89.6336114,102.652194%20C87.1099927,97.1260221%2087.0652086,91.1001135%2089.0328724,85.8248432%20C91.0005361,80.549573%2094.9806476,76.0249412%20100.50682,73.5013225%20C103.375409,72.1913336%20106.492103,71.5133627%20109.645652,71.5133627%20Z'%20id='Rectangle-Copy-7'%20stroke='%23000000'%20stroke-width='12'%20fill='%23FFFFFF'%3e%3c/path%3e%3cpath%20d='M229.748512,71.937139%20L157.594151,182.112565%20C151.127134,191.987316%20140.118354,197.937139%20128.314413,197.937139%20L31.5793712,197.937139%20C25.7803813,197.937139%2020.5303813,195.586634%2016.7301288,191.786381%20C12.9298762,187.986129%2010.5793712,182.736129%2010.5793712,176.937139%20C10.5793712,172.040631%2012.2904197,167.298044%2015.4166554,163.529432%20L79.9999697,85.6755732%20C87.2193255,76.9727881%2097.9393768,71.937139%20109.246789,71.937139%20L229.748512,71.937139%20Z'%20id='Rectangle-Copy-9'%20stroke='%23000000'%20stroke-width='12'%20fill='%23FFFFFF'%3e%3c/path%3e%3cpath%20d='M266.696446,288.458019%20C307.752644,265.124838%20358.059633,265.124838%20399.115831,288.458019%20L549.959871,374.186154%20C555.901556,377.56295%20560.707585,382.405184%20564.028193,388.11177%20C567.348801,393.818356%20569.183989,400.389295%20569.183989,407.2235%20L569.183989,551.630254%20C569.183989,558.464459%20567.348801,565.035398%20564.028193,570.741984%20C560.707585,576.44857%20555.901556,581.290804%20549.959871,584.6676%20L399.115831,670.395734%20C358.059633,693.728915%20307.752644,693.728915%20266.696446,670.395734%20L115.852406,584.6676%20C109.910722,581.290804%20105.104693,576.44857%20101.784084,570.741984%20C98.4634762,565.035398%2096.628289,558.464459%2096.628289,551.630254%20L96.628289,407.2235%20C96.628289,400.389295%2098.4634762,393.818356%20101.784084,388.11177%20C105.104693,382.405184%20109.910722,377.56295%20115.852406,374.186154%20Z'%20id='Rectangle-Copy-3'%20stroke='%23000000'%20stroke-width='12'%20fill='%23FFFFFF'%3e%3c/path%3e%3cpath%20d='M414.958303,9.67270241%20C419.682733,9.59493649%20424.306669,11.0403035%20428.145754,13.7948839%20L542.946631,96.1656324%20C549.63048,100.961359%20553.650462,108.637295%20553.785853,116.86253%20L554.822813,179.859839%20L506.533714,224.018487%20L556.804587,300.256477%20L558.548356,406.19377%20C558.648341,412.268079%20556.276761,417.807861%20552.361607,421.854062%20C548.446452,425.900264%20542.987724,428.452884%20536.913415,428.552869%20C532.188986,428.630635%20527.565049,427.185268%20523.725965,424.430688%20L408.925087,342.059939%20C402.241239,337.264213%20398.221256,329.588277%20398.085865,321.363042%20L393.323362,32.031802%20C393.223377,25.9574926%20395.594957,20.4177104%20399.510112,16.3715092%20C403.425266,12.3253081%20408.883994,9.77268787%20414.958303,9.67270241%20Z'%20id='Rectangle-Copy-5'%20stroke='%23000000'%20stroke-width='12'%20fill='%23FFFFFF'%3e%3c/path%3e%3cpolygon%20id='Rectangle-Copy-12'%20fill='%23000000'%20points='380.816985%20474.420837%20309.359298%20500.317143%20226.706571%20530.270537%20308.710278%20588.844613%20392.83477%20586.120237%20411.214911%20508.475532'%3e%3c/polygon%3e%3cpolygon%20id='Rectangle-Copy-13'%20fill='%23000000'%20points='128.980183%20407.885906%20148.501388%20457.6721%20189.653568%20517.144989%20124.116039%20520.191527%20102.628289%20509.426128%20102.129132%20450.405632%20102.628289%20404.037935'%3e%3c/polygon%3e%3c/g%3e%3c/svg%3e" width="72" height="95" decoding="async"></p></div><article><div><p data-svelte-h="svelte-1bmmk8c"><em>this is unrelated to the announcement saying to unlink your rabbithole connections, but you should still do that.</em></p> <h2 data-svelte-h="svelte-1rxqya9">overview</h2> <p data-svelte-h="svelte-13277n3">on may 16, 2024, the rabbitude team gained access to the rabbit codebase and found several critical <strong>hardcoded api keys</strong> in its code. these keys allow anyone to:</p> <ul data-svelte-h="svelte-mkddu6"><li>read every response every r1 has ever given, including ones containing personal information</li> <li>brick all r1s</li> <li>alter the responses of all r1s</li> <li>replace every r1’s voice</li></ul> <p data-svelte-h="svelte-kkyuc6">…and more.</p> <p data-svelte-h="svelte-slh40a">these api keys are for the following services:</p> <ul data-svelte-h="svelte-o486wv"><li><a href="https://elevenlabs.io/" rel="nofollow">ElevenLabs</a> (for text-to-speech)</li> <li><a href="https://azure.com/" rel="nofollow">Azure</a> (for an old speech-to-text system)</li> <li><a href="https://yelp.com/" rel="nofollow">Yelp</a> (for review lookups)</li> <li><a href="https://maps.google.com/" rel="nofollow">Google Maps</a> (for location lookups)</li></ul> <h2 data-svelte-h="svelte-1gbaxw">details</h2> <p data-svelte-h="svelte-a6w1sw">the most interesting key is for elevenlabs, which gives full privileges. this allows us to:</p> <ul data-svelte-h="svelte-1wwj65b"><li>get a history of all past text-to-speech messages</li> <li>change voices</li> <li>add custom text replacements (e.g. “r1” to “ar one”)</li> <li>delete voices (and crash the rabbitOS backend, thus rendering all r1 devices useless)</li></ul> <h2 data-svelte-h="svelte-ccnmhn">rabbit’s response</h2> <p data-svelte-h="svelte-g0u8eu">we have internal confirmation that the rabbit team is aware of this leaking of api keys and have chosen to ignore it. the api keys continue to be valid as of writing.</p> <p data-svelte-h="svelte-1rsgaxt">we believe it is important for consumers to be aware of rabbit’s poor security practices, as it can have devastating consequences for r1 users.</p> <p data-svelte-h="svelte-5dn8cq">we will not be publishing any more details out of respect for the users, not the company.</p></div></article></div>]]></description>
        </item>
    </channel>
</rss>