<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sun, 18 Jan 2026 05:30:01 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[If you put Apple icons in reverse it looks like someone getting good at design (352 pts)]]></title>
            <link>https://www.threads.com/@heliographe.studio/post/DTeOwAykwQ1</link>
            <guid>46663338</guid>
            <pubDate>Sat, 17 Jan 2026 23:47:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.threads.com/@heliographe.studio/post/DTeOwAykwQ1">https://www.threads.com/@heliographe.studio/post/DTeOwAykwQ1</a>, See on <a href="https://news.ycombinator.com/item?id=46663338">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Light Mode InFFFFFFlation (178 pts)]]></title>
            <link>https://willhbr.net/2025/10/20/light-mode-infffffflation/</link>
            <guid>46662662</guid>
            <pubDate>Sat, 17 Jan 2026 22:19:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://willhbr.net/2025/10/20/light-mode-infffffflation/">https://willhbr.net/2025/10/20/light-mode-infffffflation/</a>, See on <a href="https://news.ycombinator.com/item?id=46662662">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p>Back in the day, light mode wasn’t called “light mode”. It was just the way that computers were, we didn’t really think about turning everything light or dark. Sure, some applications were often dark (photo editors, IDEs, terminals) but everything else was light, and that was fine.</p>

<p>What we didn’t notice is that light mode has been slowly getting lighter, and I’ve got a graph to prove it. I did what any normal person would do, I downloaded the same (or similar) screenshots from the <a href="https://512pixels.net/projects/aqua-screenshot-library/">MacOS Screenshot Library</a> on <a href="https://512pixels.net/"><em>512 Pixels</em></a>. This project would have been much more difficult without a single place to get well-organised screenshots from. I cropped each image so just a representative section of the window was present, here shown with a pinkish rectangle:</p>

<p><img loading="lazy" src="https://willhbr.net/images/2025/macos-light-mode.webp" alt="screenshot of OS X Snow Leopard Finder window with toolbar section highlighted"></p>

<p>Then used <a href="https://pypi.org/project/pillow/">Pillow</a> to get the average lightness of each cropped image:</p>

<div><pre><code><span>for</span> <span>file</span> <span>in</span> <span>sorted</span><span>(</span><span>os</span><span>.</span><span>listdir</span><span>(</span><span>'</span><span>.</span><span>'</span><span>)):</span>
  <span>image</span> <span>=</span> <span>Image</span><span>.</span><span>open</span><span>(</span><span>file</span><span>)</span>
  <span>greyscale</span> <span>=</span> <span>image</span><span>.</span><span>convert</span><span>(</span><span>'</span><span>L</span><span>'</span><span>)</span>
  <span>stat</span> <span>=</span> <span>ImageStat</span><span>.</span><span>Stat</span><span>(</span><span>greyscale</span><span>)</span>
  <span>avg_lightness</span> <span>=</span> <span>int</span><span>(</span><span>stat</span><span>.</span><span>mean</span><span>[</span><span>0</span><span>])</span>
  <span>print</span><span>(</span><span>f</span><span>"</span><span>{</span><span>file</span><span>}</span><span>\t</span><span>{</span><span>avg_lightness</span><span>}</span><span>"</span><span>)</span>
</code></pre></div>

<p>This ignores any kind of perceived brightness or the tinting that MacOS has been doing for a while based on your wallpaper colour. I could go down a massive tangent trying to work out exactly what the best way to measure this is, but given that the screenshots aren’t perfectly comparable between versions, comparing the average brightness of a greyscale image seems reasonable.</p>

<p>I graphed that on the release year of each OS version, doing the same for dark mode:</p>

<svg viewBox="0 -5 365 290" xmlns="http://www.w3.org/2000/svg">
  
  <defs>
    <linearGradient id="gradient" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="white"></stop>
      <stop offset="100%" stop-color="black"></stop>
    </linearGradient>
  </defs>
  <rect id="rect1" x="0" y="0" rx="3" ry="3" width="320" height="255" fill="url(#gradient)"></rect>
  <polyline style="stroke: #6609a0" points="
    0,74
    40,58
    60,61
    80,53
    100,25
    120,24
    140,24
    160,24
    180,33
    200,33
    220,6
    240,6
    260,3
    280,10
    300,11
    320,0"></polyline>
  <polyline style="stroke: #bf8eff" points="
      180,202
      200,197
      220,200
      240,199
      260,210
      280,215
      300,200
      320,215"></polyline>
  <text x="0" y="270" textLength="40">2009</text>
  <text x="280" y="270" textLength="40">2025</text>
  <text x="325" y="10" textLength="40">100%</text>
  <text x="325" y="255">0%</text>
</svg>

<p>This graph is an SVG, which may not render correctly in feed readers. <a href="https://willhbr.net/2025/10/20/light-mode-infffffflation/">View this post on the web</a>.</p>

<p>You can clearly see that the brightness of the UI has been steadily increasing for the last 16 years. The upper line is the default mode/light mode, the lower line is dark mode. When I started using MacOS in 2012, I was running Snow Leopard, the windows had an average brightness of 71%. Since then they’ve steadily increased so that in MacOS Tahoe, they’re at a full 100%.</p>

<p>What I’ve graphed here is just the brightness of the window chrome, which isn’t really representative of the actual total screen brightness. A better study would be looking at the overall brightness of a typical set of apps. The default background colour for windows, as well as the colours for inactive windows, would probably give a more complete picture.</p>

<p>For example, <a href="https://512pixels.net/projects/aqua-screenshot-library/macos-26-tahoe/">in Tahoe</a> the darkest colour in a typical light-mode window is the colour of a section in an inactive settings window, at 97% brightness. In Snow Leopard the equivalent colour was 90%, and that was one of the <em>brightest</em> parts of the window, since the window chrome was typically darker than the window content.</p>

<p>I tried to remember exactly when I started using dark mode all the time on MacOS. I’ve always used a dark background for my editor and terminal, but I wasn’t sure when I swapped the system theme across. When it first came out I seem to remember thinking that it looked gross.</p>

<p>It obviously couldn’t be earlier than 2018, as that’s when dark mode was introduced in <a href="https://en.wikipedia.org/wiki/MacOS_Mojave">MacOS Mojave</a>. I’m pretty sure that when I updated my personal laptop to an M1 MacBook Air at the end of 2020 that I set it to use dark mode. This would make sense, because the <a href="https://en.wikipedia.org/wiki/MacOS_Big_Sur">Big Sur</a> update bumped the brightness from 85% to 97%, which probably pushed me over the edge.</p>

<p>I think the reason this happens is that if you look at two designs, photos, or whatever, it’s really easy to be drawn in to liking the brighter one more. Or if they’re predominantly dark, then the darker one. I’ve done it myself with this very site. If I’m tweaking the colours it’s easy to bump up the brightness on the background and go “ooh wow yeah that’s definitely cleaner”, then swap it back and go “ewww it looks like it needs a good scrub”. If it’s the dark mode colours, then a darker background will just look <em>cooler</em>.</p>

<p>I’m not a designer, but I assume that resisting this urge is something you learn in design school. Just like making a website look good with a non-greyscale background.</p>

<p>This year in iOS 26, some UI elements use the HDR screen to make some elements and highlights brighter than 100% white.<sup id="fnref:not-me"><a href="#fn:not-me" rel="footnote" role="doc-noteref">1</a></sup> This year it’s reasonably subtle, but the inflation potential is there. If you’ve ever looked at an HDR photo on an iPhone (or any other HDR screen) then looked at the UI that’s still being shown in SDR, you’ll know just how grey and sad it looks. If you’re designing a new UI, how tempting will it be to make just a little bit more of it just a little bit brighter?</p>

<p>As someone whose job involves looking at MacOS for a lot of the day, I find that I basically <em>have</em> to use dark mode to avoid looking at a display where all the system UI is 100% white blasting in my eyes. But the alternative doesn’t have to be near-black for that, I would happily have a UI that’s a medium grey. In fact what I’ve missed since swapping to using dark mode is that I don’t have contrast between windows. Everything looks the same, whether it’s a text editor, IDE, terminal, web browser, or Finder window. All black, all the time.</p>

<p>Somewhat in the spirit of <a href="https://mavericksforever.com/">Mavericks Forever</a>, if I were to pick an old MacOS design to go back to it would probably be <a href="https://512pixels.net/projects/aqua-screenshot-library/os-x-10-10-yosemite/">Yosemite</a>. I don’t have any nostalgia for skeuomorphic brushed metal or stitched leather, but I do quite like the flattened design and blur effects that Yosemite brought. Ironically Yosemite was a substantial jump in brightness from previous versions.</p>

<p>So if you’re making an interface or website, be bold and choose a 50% grey. My eyes will thank you.</p>


  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A programming language based on grammatical cases of Turkish (150 pts)]]></title>
            <link>https://github.com/kip-dili/kip</link>
            <guid>46661897</guid>
            <pubDate>Sat, 17 Jan 2026 20:44:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/kip-dili/kip">https://github.com/kip-dili/kip</a>, See on <a href="https://news.ycombinator.com/item?id=46661897">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">Kip</h2><a id="user-content-kip" aria-label="Permalink: Kip" href="#kip"></a></p>
<p dir="auto">Kip (meaning "grammatical mood" in Turkish) is an experimental programming language that uses Turkish grammatical cases as part of its type system. It demonstrates how natural language morphology—specifically Turkish noun cases and vowel harmony—can be integrated into programming language design.</p>
<p dir="auto">This is a research/educational project exploring the intersection of linguistics and type theory, not a production programming language.</p>
<p dir="auto">There is also <a href="https://github.com/joom/kip/wiki/K%C4%B1lavuz">a tutorial in Turkish</a> and <a href="https://github.com/joom/kip/wiki/Tutorial">a tutorial in English</a> that explains how to write Kip programs.</p>
<div dir="auto"><p dir="auto">Note</p><p dir="auto">Kip is experimental. Expect changes in syntax and behavior over time.</p>
</div>
<p dir="auto">For you to get a taste of what Kip looks like, here is an example program that prompts the user to enter a number and then prints that many of the Fibonacci numbers:</p>
<div data-snippet-clipboard-copy-content="(* İlk n Fibonacci sayısını yazdırır. *)
(bu tam-sayıyı) (şu tam-sayıyı) (o tam-sayıyı) işlemek,
  (onla 0'ın eşitliği) doğruysa,
    durmaktır,
  yanlışsa,
    bunu yazıp,
    şunu (bunla şunun toplamını) (onla 1'in farkını) işlemektir.

çalıştırmak,
  &quot;Bir sayı girin:&quot; yazıp,
  isim olarak okuyup,
  ((ismin tam-sayı-hali)
    yokluksa,
      &quot;Geçersiz sayı.&quot; yazmaktır,
    n'nin varlığıysa,
      0'ı 1'i n'yi işlemektir).

çalıştır."><pre><code>(* İlk n Fibonacci sayısını yazdırır. *)
(bu tam-sayıyı) (şu tam-sayıyı) (o tam-sayıyı) işlemek,
  (onla 0'ın eşitliği) doğruysa,
    durmaktır,
  yanlışsa,
    bunu yazıp,
    şunu (bunla şunun toplamını) (onla 1'in farkını) işlemektir.

çalıştırmak,
  "Bir sayı girin:" yazıp,
  isim olarak okuyup,
  ((ismin tam-sayı-hali)
    yokluksa,
      "Geçersiz sayı." yazmaktır,
    n'nin varlığıysa,
      0'ı 1'i n'yi işlemektir).

çalıştır.
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Table of Contents</h2><a id="user-content-table-of-contents" aria-label="Permalink: Table of Contents" href="#table-of-contents"></a></p>
<ul dir="auto">
<li><a href="#language-features">Language Features</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#example-program">Example Program</a></li>
<li><a href="#wasm-playground">WASM Playground</a></li>
<li><a href="#bytecode-cache">Bytecode Cache</a></li>
<li><a href="#project-structure">Project Structure</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#morphological-analysis">Morphological Analysis</a></li>
<li><a href="#license">License</a></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Language Features</h2><a id="user-content-language-features" aria-label="Permalink: Language Features" href="#language-features"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Turkish Grammatical Cases as Types</h3><a id="user-content-turkish-grammatical-cases-as-types" aria-label="Permalink: Turkish Grammatical Cases as Types" href="#turkish-grammatical-cases-as-types"></a></p>
<p dir="auto">Kip uses Turkish noun cases (ismin halleri) to determine argument relationships in function calls:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Case</th>
<th>Turkish Name</th>
<th>Suffix</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nominative</td>
<td>Yalın hal</td>
<td>(none)</td>
<td><code>sıfır</code></td>
</tr>
<tr>
<td>Accusative</td>
<td>-i hali</td>
<td>-i, -ı, -u, -ü</td>
<td><code>sayıyı</code></td>
</tr>
<tr>
<td>Dative</td>
<td>-e hali</td>
<td>-e, -a</td>
<td><code>sayıya</code></td>
</tr>
<tr>
<td>Locative</td>
<td>-de hali</td>
<td>-de, -da, -te, -ta</td>
<td><code>listede</code></td>
</tr>
<tr>
<td>Ablative</td>
<td>-den hali</td>
<td>-den, -dan, -ten, -tan</td>
<td><code>listeden</code></td>
</tr>
<tr>
<td>Genitive</td>
<td>Tamlayan eki</td>
<td>-in, -ın, -un, -ün</td>
<td><code>sayının</code></td>
</tr>
<tr>
<td>Instrumental</td>
<td>-le eki</td>
<td>-le, -la, ile</td>
<td><code>sayıyla</code></td>
</tr>
<tr>
<td>Possessive (3s)</td>
<td>Tamlanan eki</td>
<td>-i, -ı, -u, -ü, -si, -sı</td>
<td><code>ardılı</code></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h3 tabindex="-1" dir="auto">Flexible Argument Order</h3><a id="user-content-flexible-argument-order" aria-label="Permalink: Flexible Argument Order" href="#flexible-argument-order"></a></p>
<p dir="auto">Because Turkish cases mark grammatical relationships explicitly, Kip allows flexible argument ordering. These two calls are equivalent:</p>
<div data-snippet-clipboard-copy-content="(5'le 3'ün farkını) yaz.
(3'ün 5'le farkını) yaz."><pre><code>(5'le 3'ün farkını) yaz.
(3'ün 5'le farkını) yaz.
</code></pre></div>
<p dir="auto">As long as arguments have different case suffixes or different types, Kip can determine which argument is which.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Inductive Data Types</h3><a id="user-content-inductive-data-types" aria-label="Permalink: Inductive Data Types" href="#inductive-data-types"></a></p>
<p dir="auto">Define algebraic data types with Turkish syntax:</p>
<div data-snippet-clipboard-copy-content="Bir doğruluk ya doğru ya da yanlış olabilir.

Bir doğal-sayı
ya sıfır
ya da bir doğal-sayının ardılı
olabilir."><pre><code>Bir doğruluk ya doğru ya da yanlış olabilir.

Bir doğal-sayı
ya sıfır
ya da bir doğal-sayının ardılı
olabilir.
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Polymorphic Types</h3><a id="user-content-polymorphic-types" aria-label="Permalink: Polymorphic Types" href="#polymorphic-types"></a></p>
<p dir="auto">Type variables are supported for generic data structures:</p>
<div data-snippet-clipboard-copy-content="Bir (öğe listesi)
ya boş
ya da bir öğenin bir öğe listesine eki
olabilir."><pre><code>Bir (öğe listesi)
ya boş
ya da bir öğenin bir öğe listesine eki
olabilir.
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Pattern Matching</h3><a id="user-content-pattern-matching" aria-label="Permalink: Pattern Matching" href="#pattern-matching"></a></p>
<p dir="auto">Pattern match using the conditional suffix <code>-sa/-se</code>:</p>
<div data-snippet-clipboard-copy-content="(bu doğruluğun) tersi,
  bu doğruysa, yanlış,
  yanlışsa, doğrudur."><pre><code>(bu doğruluğun) tersi,
  bu doğruysa, yanlış,
  yanlışsa, doğrudur.
</code></pre></div>
<p dir="auto">Supports nested pattern matching, binders, and wildcard patterns (<code>değilse</code>):</p>
<div data-snippet-clipboard-copy-content="(bu doğal-sayının) kopyası,
  bu sıfırsa, sıfır,
  öncülün ardılıysa, öncülün ardılıdır."><pre><code>(bu doğal-sayının) kopyası,
  bu sıfırsa, sıfır,
  öncülün ardılıysa, öncülün ardılıdır.
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Constants</h3><a id="user-content-constants" aria-label="Permalink: Constants" href="#constants"></a></p>
<p dir="auto">Define named constants with <code>diyelim</code>:</p>
<div data-snippet-clipboard-copy-content="sıfırın ardılına bir diyelim.
birin ardılına iki diyelim."><pre><code>sıfırın ardılına bir diyelim.
birin ardılına iki diyelim.
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Effects and I/O</h3><a id="user-content-effects-and-io" aria-label="Permalink: Effects and I/O" href="#effects-and-io"></a></p>
<p dir="auto">Sequencing with <code>-ip/-ıp/-up/-üp</code> suffixes and binding with <code>olarak</code>:</p>
<div data-snippet-clipboard-copy-content="selamlamak,
  isim olarak okuyup,
  (&quot;Merhaba &quot;yla ismin birleşimini) yazmaktır."><pre><code>selamlamak,
  isim olarak okuyup,
  ("Merhaba "yla ismin birleşimini) yazmaktır.
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Built-in Types and Operations</h3><a id="user-content-built-in-types-and-operations" aria-label="Permalink: Built-in Types and Operations" href="#built-in-types-and-operations"></a></p>
<p dir="auto"><strong>Integers (<code>tam-sayı</code>):</strong></p>
<ul dir="auto">
<li>Arithmetic: <code>toplamı</code>, <code>farkı</code>, <code>çarpımı</code></li>
<li>Comparison: <code>eşitliği</code>, <code>küçüklüğü</code>, <code>büyüklüğü</code></li>
<li>Other: <code>öncülü</code>, <code>sıfırlığı</code>, <code>faktöriyeli</code></li>
</ul>
<p dir="auto"><strong>Strings (<code>dizge</code>):</strong></p>
<ul dir="auto">
<li><code>uzunluğu</code> - length</li>
<li><code>birleşimi</code> - concatenation</li>
<li><code>tam-sayı-hali</code> - parse as integer</li>
</ul>
<p dir="auto"><strong>I/O:</strong></p>
<ul dir="auto">
<li><code>yazmak</code> / <code>yaz</code> - print to stdout</li>
<li><code>okumak</code> / <code>oku</code> - read from stdin</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Comments</h3><a id="user-content-comments" aria-label="Permalink: Comments" href="#comments"></a></p>

<p dir="auto"><h3 tabindex="-1" dir="auto">Literals</h3><a id="user-content-literals" aria-label="Permalink: Literals" href="#literals"></a></p>
<div data-snippet-clipboard-copy-content="5'i yaz.              (* Integer literal with case suffix *)
&quot;merhaba&quot;'yı yaz.     (* String literal with case suffix *)"><pre><code>5'i yaz.              (* Integer literal with case suffix *)
"merhaba"'yı yaz.     (* String literal with case suffix *)
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Prerequisites</h3><a id="user-content-prerequisites" aria-label="Permalink: Prerequisites" href="#prerequisites"></a></p>
<ol dir="auto">
<li>
<p dir="auto"><strong><a href="https://fomafst.github.io/" rel="nofollow">Foma</a></strong> - finite-state morphology toolkit</p>
<ul dir="auto">
<li>macOS: <code>brew install foma</code></li>
<li>Debian/Ubuntu: <code>apt install foma libfoma-dev</code></li>
<li>Fedora: <code>dnf install foma foma-devel</code></li>
</ul>
</li>
<li>
<p dir="auto"><strong>Stack</strong> - Haskell build tool</p>
<ul dir="auto">
<li>See <a href="https://docs.haskellstack.org/" rel="nofollow">haskellstack.org</a></li>
</ul>
</li>
</ol>
<div dir="auto"><p dir="auto">Tip</p><p dir="auto">If you only want to explore the language, you can start with <code>stack exec kip</code> after a successful build.</p>
</div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Building</h3><a id="user-content-building" aria-label="Permalink: Building" href="#building"></a></p>
<p dir="auto">Clone this repository, then:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Quick install (macOS/Linux)
chmod +x install.sh
./install.sh

# Or manual build
stack build"><pre><span><span>#</span> Quick install (macOS/Linux)</span>
chmod +x install.sh
./install.sh

<span><span>#</span> Or manual build</span>
stack build</pre></div>
<p dir="auto">The TRmorph transducer is bundled at <code>vendor/trmorph.fst</code>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Running</h3><a id="user-content-running" aria-label="Permalink: Running" href="#running"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Start REPL
stack exec kip

# Execute a file
stack exec kip -- --exec path/to/file.kip

# Install to PATH
stack install"><pre><span><span>#</span> Start REPL</span>
stack <span>exec</span> kip

<span><span>#</span> Execute a file</span>
stack <span>exec</span> kip -- --exec path/to/file.kip

<span><span>#</span> Install to PATH</span>
stack install</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">WASM Playground</h2><a id="user-content-wasm-playground" aria-label="Permalink: WASM Playground" href="#wasm-playground"></a></p>
<p dir="auto">A browser playground build is available under <code>playground/</code>. It compiles the
non-interactive runner (<code>kip-playground</code>) to <code>wasm32-wasi</code> and ships a small
HTML/JS harness that runs Kip in the browser.</p>
<p dir="auto">See <code>playground/README.md</code> for prerequisites, toolchain setup, and build steps.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Bytecode Cache</h2><a id="user-content-bytecode-cache" aria-label="Permalink: Bytecode Cache" href="#bytecode-cache"></a></p>
<p dir="auto">Kip stores a cached, type-checked version of each <code>.kip</code> file in a sibling <code>.iz</code> file. When you run a file again, Kip will reuse the <code>.iz</code> cache if both the source and its loaded dependencies are unchanged.</p>
<p dir="auto">If you want to force a fresh parse and type-check, delete the <code>.iz</code> file next to the source.</p>
<div dir="auto"><p dir="auto">Important</p><p dir="auto"><code>.iz</code> files include a compiler hash. If the compiler changes, the cache is invalidated automatically.</p>
</div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Example Program</h2><a id="user-content-example-program" aria-label="Permalink: Example Program" href="#example-program"></a></p>
<div data-snippet-clipboard-copy-content="(* Natural numbers *)
Bir doğal-sayı
ya sıfır
ya da bir doğal-sayının ardılı
olabilir.

(* Define some constants *)
sıfırın ardılına bir diyelim.
birin ardılına iki diyelim.
ikinin ardılına üç diyelim.

(* Addition function *)
(bu doğal-sayıyla) (şu doğal-sayının) toplamı,
  bu sıfırsa,
    şu,
  öncülün ardılıysa,
    (öncülle) (şunun ardılının) toplamıdır.

(* Print result *)
(ikiyle üçün toplamını) yaz."><pre><code>(* Natural numbers *)
Bir doğal-sayı
ya sıfır
ya da bir doğal-sayının ardılı
olabilir.

(* Define some constants *)
sıfırın ardılına bir diyelim.
birin ardılına iki diyelim.
ikinin ardılına üç diyelim.

(* Addition function *)
(bu doğal-sayıyla) (şu doğal-sayının) toplamı,
  bu sıfırsa,
    şu,
  öncülün ardılıysa,
    (öncülle) (şunun ardılının) toplamıdır.

(* Print result *)
(ikiyle üçün toplamını) yaz.
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Project Structure</h2><a id="user-content-project-structure" aria-label="Permalink: Project Structure" href="#project-structure"></a></p>
<div data-snippet-clipboard-copy-content="app/
└── Main.hs            - CLI entry point

src/
├── Kip/
│   ├── AST.hs         - Abstract syntax tree
│   ├── Cache.hs       - .iz cache handling
│   ├── Eval.hs        - Interpreter
│   ├── Parser.hs      - Parser
│   ├── Render.hs      - Pretty-printing with morphological inflection
│   └── TypeCheck.hs   - Type checker validating grammatical case usage
└── Language/
    └── Foma.hs        - Haskell bindings to Foma via FFI

lib/
├── giriş.kip          - Prelude module loaded by default
├── temel.kip           - Core types
├── temel-doğruluk.kip  - Boolean functions
├── temel-dizge.kip     - String functions
├── temel-etki.kip      - I/O primitives
├── temel-liste.kip     - List functions
└── temel-tam-sayı.kip  - Integer functions

tests/
├── succeed/            - Passing golden tests (.kip + .out + optional .in)
└── fail/               - Failing golden tests (.kip + .err)

vendor/
└── trmorph.fst        - TRmorph transducer"><pre><code>app/
└── Main.hs            - CLI entry point

src/
├── Kip/
│   ├── AST.hs         - Abstract syntax tree
│   ├── Cache.hs       - .iz cache handling
│   ├── Eval.hs        - Interpreter
│   ├── Parser.hs      - Parser
│   ├── Render.hs      - Pretty-printing with morphological inflection
│   └── TypeCheck.hs   - Type checker validating grammatical case usage
└── Language/
    └── Foma.hs        - Haskell bindings to Foma via FFI

lib/
├── giriş.kip          - Prelude module loaded by default
├── temel.kip           - Core types
├── temel-doğruluk.kip  - Boolean functions
├── temel-dizge.kip     - String functions
├── temel-etki.kip      - I/O primitives
├── temel-liste.kip     - List functions
└── temel-tam-sayı.kip  - Integer functions

tests/
├── succeed/            - Passing golden tests (.kip + .out + optional .in)
└── fail/               - Failing golden tests (.kip + .err)

vendor/
└── trmorph.fst        - TRmorph transducer
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Testing</h2><a id="user-content-testing" aria-label="Permalink: Testing" href="#testing"></a></p>

<p dir="auto">Tests are in <code>tests/succeed/</code> (expected to pass) and <code>tests/fail/</code> (expected to fail).</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Morphological Analysis</h2><a id="user-content-morphological-analysis" aria-label="Permalink: Morphological Analysis" href="#morphological-analysis"></a></p>
<p dir="auto">Kip uses <a href="https://github.com/coltekin/TRmorph">TRmorph</a> for Turkish morphological analysis. When a word has multiple possible parses (e.g., "takası" could be "taka + possessive" or "takas + accusative"), Kip carries all candidates through parsing and resolves ambiguity during type checking.</p>
<p dir="auto">For intentionally ambiguous words, use an apostrophe to force a specific parse: <code>taka'sı</code> vs <code>takas'ı</code>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">License</h2><a id="user-content-license" aria-label="Permalink: License" href="#license"></a></p>
<p dir="auto">See LICENSE file.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Canada's deal with China signals it is serious about shift from US (149 pts)]]></title>
            <link>https://www.bbc.com/news/articles/cm24k6kk1rko</link>
            <guid>46661217</guid>
            <pubDate>Sat, 17 Jan 2026 19:29:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bbc.com/news/articles/cm24k6kk1rko">https://www.bbc.com/news/articles/cm24k6kk1rko</a>, See on <a href="https://news.ycombinator.com/item?id=46661217">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><div data-testid="byline" data-component="byline-block"><p><span data-testid="byline-contributors"><div data-testid="byline-contributors-contributor-0"><p><span>Nadine Yousif</span><span data-testid="byline-contributors-contributor-0-role-location">Senior Canada reporter</span></p></div></span></p></div><p data-component="caption-block"><figcaption>Watch: Canada-China trade relationship "more predictable" than with US, says Carney</figcaption></p><div data-component="text-block"><p>Prime Minister Mark Carney's new approach to Canada's foreign policy can perhaps be distilled in one line: "We take the world as it is, not as we wish it to be."</p><p>That was his response when asked about the deal struck with China on Friday, despite concerns over its human rights record and nearly a year after he called China "the biggest security threat" facing Canada. </p><p>The deal will see Canada ease tariffs on Chinese electric vehicles that it imposed in tandem with the US in 2024. In exchange, China will lower retaliatory tariffs on key Canadian agricultural products.</p><p>Experts told the BBC the move represents a significant shift in Canada's policy on China, one that is shaped by ongoing uncertainty with the US, its largest trade partner. </p><p>"The prime minister is saying, essentially, that Canada has agency too, and that it's not going to just sit and wait for the United States," said Eric Miller, a Washington DC based trade adviser and president of the Rideau Potomac Strategy Group.</p><ul><li><a target="_self" href="https://www.bbc.com/news/articles/cy59pvkqvl5o">China and Canada announce tariffs relief after high-stakes meeting</a></li><li><a target="_self" href="https://www.bbc.com/news/articles/c98pj370mjjo">Carney faces delicate balancing act in China visit</a></li><li><a target="_self" href="https://www.bbc.com/news/articles/czj0wjvjm4po">Four things the US wants from Canada on trade</a></li></ul></div><div data-component="text-block"><p><a target="_self" href="https://www.bbc.com/news/articles/cy59pvkqvl5o">Carney told reporters on Friday</a> that "the world has changed" in recent years, and the progress made with China sets Canada up "well for the new world order".</p><p>Canada's relationship with China, he added, had become "more predictable" than its relationship with the US under the Trump administration. </p><p>He later wrote, in a social media post, that Canada was "recalibrating" its relationship with China, "strategically, pragmatically, and decisively".</p></div><div data-component="text-block"><p>In Canada, as daylight broke on Friday, reaction to the deal was swift.</p><p>Some, like Saskatchewan Premier Scott Moe, hailed it as "very good news". Farmers in Moe's province have been hard hit by China's retaliatory tariffs on Canadian canola oil, and the deal, he said, would bring much needed relief.</p><p>But Ontario Premier Doug Ford, whose province is home to Canada's auto sector, was sharply critical of the deal. He said removing EV tariffs on China "would hurt our economy and lead to job losses". </p><p>In a post on X, Ford said Carney's government was "inviting a flood of cheap made-in-China electric vehicles without any real guarantees of equal or immediate investment in Canada's economy". </p><p>Some experts said the electric vehicle provisions in the trade deal would help China make inroads into the Canadian automobile market.</p><p>With the lower EV tariffs, approximately 10% of Canada's electric vehicle sales are now expected to go to Chinese automakers, said Vivek Astvansh, a business professor at McGill University in Montreal.</p><p>The expected increase in Chinese EV sales could put pressure on US-based EV makers like Tesla which are seeking to expand their market share in Canada, he said.</p><p>"Carney has signalled to the Trump administration that it is warming up to China," Astvansh added.</p><p>Reaction from the White House, meanwhile, has been mixed.</p><p>In an interview with CNBC on Friday morning, US trade representative Jamieson Greer called the deal "problematic" and said Canada may come to regret it. </p><p>President Donald Trump, however, hailed it as "a good thing".</p><p>"If you can get a deal with China, you should do that," he told reporters outside the White House.</p><p>Since taking office for a second time last year, Trump has imposed tariffs on Canadian sectors like metals and automotives, which has led to swirling economic uncertainty. He has also threatened to rip up a longstanding North American free trade agreement between Canada, the US and Mexico, calling it "irrelevant".</p><p>That trade agreement, the USMCA, is now under a mandatory review. Canada and Mexico have both made clear they want it to remain in place. </p><p>But the decision to carve out a major new deal with China is a recognition by Carney that the future of North American free trade remains unclear, Miller of the Rideau Potomac Strategy Group told the BBC.</p><p>"There's a reasonable chance that we could end up in 2026 without a meaningful, workable trade deal with the United States," he said. "And Canada needs to be prepared."</p></div><figure><div data-component="image-block"><p><img src="https://static.files.bbci.co.uk/bbcdotcom/web/20260113-125315-2e65791d43-web-2.37.1-4/grey-placeholder.png" aria-label="image unavailable"><img sizes="(min-width: 1280px) 50vw, (min-width: 1008px) 66vw, 96vw" srcset="https://ichef.bbci.co.uk/news/240/cpsprodpb/20d8/live/7af6c940-f312-11f0-9c83-cf045898c668.jpg.webp 240w,https://ichef.bbci.co.uk/news/320/cpsprodpb/20d8/live/7af6c940-f312-11f0-9c83-cf045898c668.jpg.webp 320w,https://ichef.bbci.co.uk/news/480/cpsprodpb/20d8/live/7af6c940-f312-11f0-9c83-cf045898c668.jpg.webp 480w,https://ichef.bbci.co.uk/news/640/cpsprodpb/20d8/live/7af6c940-f312-11f0-9c83-cf045898c668.jpg.webp 640w,https://ichef.bbci.co.uk/news/800/cpsprodpb/20d8/live/7af6c940-f312-11f0-9c83-cf045898c668.jpg.webp 800w,https://ichef.bbci.co.uk/news/1024/cpsprodpb/20d8/live/7af6c940-f312-11f0-9c83-cf045898c668.jpg.webp 1024w,https://ichef.bbci.co.uk/news/1536/cpsprodpb/20d8/live/7af6c940-f312-11f0-9c83-cf045898c668.jpg.webp 1536w" src="https://ichef.bbci.co.uk/news/480/cpsprodpb/20d8/live/7af6c940-f312-11f0-9c83-cf045898c668.jpg.webp" loading="eager" alt="Getty Images Aerial view showing hundreds of new energy vehicles waiting to be loaded onto a ro-ro ship for export at Taicang Port on January 15, 2025 in Taicang, Suzhou City, Jiangsu Province of China."><span>Getty Images</span></p></div><p data-component="caption-block"><figcaption>China is the world's largest producer of EVs, accounting for over 70% of global production</figcaption></p></figure><div data-component="text-block"><p>The deal with China drops Canada's levies on Chinese EVs from 100% to 6.1% for the first 49,000 vehicles imported each year. That quota could rise, Carney said, reaching 70,000 in half a decade.</p><p>Canada and the US put levies on Chinese EVs in 2024, arguing that China was overproducing vehicles and undermining the ability of other countries to compete. </p><p>China is the world's largest producer of EVs, accounting for 70% of global production. </p><p>In exchange, China will cut tariffs on Canadian canola seed to around 15% by 1 March, down from the current rate of 84%. Carney said Beijing had also committed to removing tariffs on Canadian canola meal, lobsters, crabs and peas "until at least the end of the year". </p><p>China also committed to removing visa requirements for Canadian visitors, Carney said.</p><p>Beijing did not corroborate the details in a separate statement, but said "the two reached a preliminary joint agreement on addressing bilateral economic and trade issues". </p><p>The introduction of Chinese EVs to Canada's market will likely mean cheaper prices for Canadian consumers, said Gal Raz, an associate professor of Operations Management and Sustainability at Western University and an expert on the EV supply chain. </p><p>But Raz acknowledged that the deal Canada struck could hurt Canadian car manufacturers if it comes without further action from the Carney government to help the domestic sector. </p><p>He said it was the result of an "unfortunate" deterioration of the Canada-US trade relationship, which he noted has also hurt Canada's automotive industry.</p><p>"The US has really put Canada in a corner," he said.</p><p>Asked why Canada is giving China access to its automotive market, Carney said that China produces "some of the most affordable and energy-efficient vehicles in the world". He said he expects the deal will spur Chinese investment into Canada's auto industry, though he did not provide further details.</p><p>Trump himself has signalled openness to China building plants in the US if it means creating more jobs for Americans, despite his tough-on-China stance.</p><p>"If they want to come in and build a plant and hire you and hire your friends and your neighbours, that's great, I love that," Trump said at the Detroit Economic Club on Tuesday. "Let China come in, let Japan come in."</p><p>The US president is notably headed to Beijing for his own meeting with President Xi Jinping in April. He has also invited Xi for a state visit to Washington. </p><p>For Carney, though, Friday's deal may just be the first step in a "recalibration" of Canada's trade relations.</p><p><i id="with-additional-reporting-from-daniel-bush-in-washington"><b id="with-additional-reporting-from-daniel-bush-in-washington">With additional reporting from Daniel Bush in Washington</b></i></p></div></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Raising money fucked me up (194 pts)]]></title>
            <link>https://blog.yakkomajuri.com/blog/raising-money-fucked-me-up</link>
            <guid>46660543</guid>
            <pubDate>Sat, 17 Jan 2026 18:29:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.yakkomajuri.com/blog/raising-money-fucked-me-up">https://blog.yakkomajuri.com/blog/raising-money-fucked-me-up</a>, See on <a href="https://news.ycombinator.com/item?id=46660543">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><section><article><p>About four months ago I quit my job at <a target="_blank" rel="noopener noreferrer" href="https://doublepoint.com/">Doublepoint</a> and decided to start my own thing.</p>
<p>I'd been working on a little project with Pedrique (who would become my co-founder) for a bit over half-a-year and decided I had enough signal to determine he was someone I wanted to start a business with.</p>
<p>I was excited about the idea we were working on at the time, but being truly honest about my motivations, I mostly wanted to run my own thing. In a dream world I'd have had the "idea of my life" while working at <a target="_blank" rel="noopener noreferrer" href="https://posthog.com/">PostHog</a> or <a target="_blank" rel="noopener noreferrer" href="https://doublepoint.com/">Doublepoint</a> and have gone on to build that with maximum conviction but this wasn't the case, so I got tired of waiting for a spark and decided to go out and make it happen, with the idea we were working on being our best bet at the time.</p>
<p>Since I'd just quit my job, I had my finances well in order. Thus, my ideal scenario would have been to work on the idea we had the MVP for, try to get it off the ground, and if that didn't work, try something else, then something else, until something did indeed get off the ground, and only at that point we would consider whether or not to raise VC funding, depending on whether it made sense or not.</p>
<p>My ideal scenario wasn't going to work for Pedrique, though. He had told me for a while that the money he had saved up for trying to build his own thing was running out and that soon he'd need to start freelancing or something to make some income in order to sustain the search for a little longer. Prior to us working together, he had a bit of success with his MicroSaaS products but only just enough to increase his personal runway, which was now reasonably short.</p>
<p>We had spoken about this before, but with me now being 110% in, we had to do something about it. I had just come in full-time so we weren't about to go back to a dynamic where one person was full-time and the other part-time because they needed to make ends meet. The decision then became clear: we're gonna raise.</p>
<p>At that point, it was an easy decision to make. Again, we have two co-founders who have a lot of confidence in each other, and we don't want to let the opportunity pass us by. So while this wasn't my ideal choice, we were a business now and this was the best decision for the company. "Just don't die" goes the advice I think, and Skald had just then been born.</p>
<p>And so raise we did. We brought in four phenomenal angels, including, and this is relevant, my last few bosses (PostHog co-founders James and Tim and Doublepoint co-founder Ohto), and then decided to look for an early-stage fund. We eventually landed with <a target="_blank" rel="noopener noreferrer" href="https://www.broom.ventures/">Broom Ventures</a> and passed up on a few other opportunities to limit dilution.</p>
<p>Great, right? I didn't need a salary yet, but for equality purposes, I now had one. Our investors are amazing. James and Ohto have been particularly helpful as angels (thank you!), and our investors are all founders of successful companies, including Jeff and Dan, the Broom GPs. We're super early, but Broom has been massively helpful and all-around just a great hands-off VC to deal with.</p>
<p>Most importantly, none of them put <strong>any</strong> pressure on us. All understand the nature of pre-seed investing well, and that can't be said about all the potential investors we took meetings with.</p>
<p>So some time passes and we decide to pivot. We're really excited about the new idea. We launch and get a bit of early traction. The open source project is doing well, but we're struggling to monetize. We fail to close a few customers and the traction wanes a bit.</p>
<p>Then I find myself fucked in the head.</p>
<p>And here's where we get to the point that I'm not sure I should be talking publicly about. Does this hurt my image a bit? Maybe. Do I look like I'm not cut for this? Potentially. But I've always appreciated when people share about the process rather than just talking about things in hindsight, and reflecting while things are happening + being super transparent publicly is <a target="_blank" rel="noopener noreferrer" href="https://memoirsandrambles.substack.com/">how I am</a>. You're witnessing my growth, live, as I type these words.</p>
<p>Anyway, so what happened is I found myself spending days with my head spinning, searching for ideas. I'm angry, I'm annoyed, and I'm not being super productive.</p>
<p>As I dug deeper into these feelings, I realized I was feeling pressured. We weren't making that much money, we weren't growing super fast. Then you look around and see "startup X gets to $1M ARR a month after launch" and shit like that and I'm feeling terrible about how we're barely growing. I'm thinking people that I really respect and admire have placed a bet on me and I'm letting them down.</p>
<p>Except they're not saying this, I am.</p>
<p>There's an interesting reflection that came up in a discussion between me and my girlfriend a few months prior that I realized applied to me, but in reverse. It's much more comfortable to be the person that "could be X" than to be the person that tries to actually do it. We were speaking about this regarding people who have a clear innate talent for something like music or sports but don't practice at all. Everyone says things like "you'd be the best at this if you just practiced more" but then they never do.</p>
<p>The thing is: it's a lot easier to live your life thinking you could have done X if you wanted to, than to "disappoint" these people that believed in you by trying and failing. You can always lean on this idea in your head of what you could have been, and how everyone believed in you so it must be true, but you just <em>chose</em> not to follow that path.</p>
<p>In my case, I found myself on the other side of that coin. Throughout my career, I've always had really high ownership roles, and have been actively involved in a couple 0 to 1 journeys. This led me throughout my career to get many comments about how great of a founder I'd be or how I have the "founder profile". I led teams, I wore a bunch of different hats, I worked hard as fuck, and I always thought about the big picture.</p>
<p>Those traits led my former bosses to then invest in me, and now suddenly I have to, in my head, live up to all of this. I can no longer take solace in some excuse like "I could have been a founder but working full-time was the best financial decision (it almost always is) so I never started my own thing". I set foot down a path from which there's no return. I've begun my attempt. I can of course stop and try again later. But from now on, I'm either gonna be a successful founder, or I'm not. And if I'm not, I'll have to deal with having broken with the expectations that people had of me.</p>
<p>There's a lot to unpack here, including what "success" means, and how most of what I say are other people's expectations are actually my own projected onto them (I've learned this about my relationship with my father too), but this post is already a bit too long so I'll save those for another time.</p>
<p>But the whole point here is not just that having raised this money from friends my head got a bit messy, but that I started to actually operate in a way that is counterproductive for my startup, while thinking I was actually doing what was best.</p>
<p>Ideas we considered when pivoting were looked more through a lens of "how big does this feel" rather than "what problem does this solve and for who". The slow growth was eating me, and while slow growth is terrible and can be a sign that you're on the wrong path it needs to be looked at from an objectively strategic lens. Didn't we say we were going to build an open source community and only later focus on monetization? Is that a viable strategy? Do we actually have a sound plan? Those were the things I should have been thinking about, rather than looping on "we need something that grows faster".</p>
<p>The people who invested in us, invested in us, not whatever idea we pitched them. And the best thing we can do is to follow our own process for building a great business based on what we believe and know, rather than focusing on making numbers look good so I can feel more relieved the next time I send over an investor update.</p>
<p>We have a ton to learn, particularly about sales (since we're both engineers), so we can't just be building shit for the sake of building shit because that's our comfort zone. But if our process is slower than company X on TechCrunch, that's fine. It's a marathon after all.</p>
<p>So after probably breaking many rules about what a founder should talk about publicly, what was my whole goal here? I mean, the main thing for me with posts like this is to get things off my chest. I've always said that the reason I publish writing that includes <a target="_blank" rel="noopener noreferrer" href="https://yakkomajuri.com/poems/fim-e-comeco">poems about my breakup</a>, <a target="_blank" rel="noopener noreferrer" href="https://memoirsandrambles.substack.com/p/twin-in-berlin">stories about falling in love</a>, <a target="_blank" rel="noopener noreferrer" href="https://memoirsandrambles.substack.com/p/ill-probably-be-poor-soon">posts about my insecurities</a>, and <a target="_blank" rel="noopener noreferrer" href="https://memoirsandrambles.substack.com/p/eiger-dreams">reflections about my dreams</a> is that by there being the possibility of someone reading them (because technically it could be the case that nobody does) I can truly be who I really am in my day-to-day life. If I'm ok with there being the possibility of a friend I'll meet later today having read about how I felt during my last breakup, I can be myself with them without reservations, because I've made myself available to be seen. That's always been really freeing to me.</p>
<p>As a side effect, I'd hope that if this does get read by some people, particularly those starting or looking to start a business, that they can reflect about themselves, their lives, and their companies through listening to my story. I thought about writing a short bullet list about lessons I learned from raising money and dealing with its aftermath here, but honestly, that's best left to the reader to figure out. We're all different, and how one person reacts to a set of circumstances will differ from someone else. Some people don't feel pressure at all, or at least not from friends or investors. Or they only respond positively to pressure (because it certainly has benefits too). Maybe they're better off than me. Maybe they're not.</p>
<p>This is my story, after all. I wish you the best of luck with yours.</p>
<hr>
<p>P.S. I'm doing good now. I'm motivated and sharp. If someone finds themselves in a similar situation, feel free to shoot me an email if you're keen to talk. Happy to go over what was useful for me, which fell outside of the scope of this post.</p></article><div><p>subscribe to get notified of new posts</p></div></section><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Earth is warming faster. Scientists are closing in on why (108 pts)]]></title>
            <link>https://www.economist.com/science-and-technology/2024/12/16/earth-is-warming-faster-scientists-are-closing-in-on-why</link>
            <guid>46660134</guid>
            <pubDate>Sat, 17 Jan 2026 17:48:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.economist.com/science-and-technology/2024/12/16/earth-is-warming-faster-scientists-are-closing-in-on-why">https://www.economist.com/science-and-technology/2024/12/16/earth-is-warming-faster-scientists-are-closing-in-on-why</a>, See on <a href="https://news.ycombinator.com/item?id=46660134">Hacker News</a></p>
Couldn't get https://www.economist.com/science-and-technology/2024/12/16/earth-is-warming-faster-scientists-are-closing-in-on-why: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[2025 was the third hottest year on record (186 pts)]]></title>
            <link>https://www.economist.com/science-and-technology/2026/01/14/2025-was-the-third-hottest-year-on-record</link>
            <guid>46659913</guid>
            <pubDate>Sat, 17 Jan 2026 17:29:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.economist.com/science-and-technology/2026/01/14/2025-was-the-third-hottest-year-on-record">https://www.economist.com/science-and-technology/2026/01/14/2025-was-the-third-hottest-year-on-record</a>, See on <a href="https://news.ycombinator.com/item?id=46659913">Hacker News</a></p>
Couldn't get https://www.economist.com/science-and-technology/2026/01/14/2025-was-the-third-hottest-year-on-record: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Eight European countries face 10% tariff for opposing US control of Greenland (175 pts)]]></title>
            <link>https://apnews.com/article/denmark-greenland-us-trump-4ad99ea3975a8b62d37bd04961feda55</link>
            <guid>46659651</guid>
            <pubDate>Sat, 17 Jan 2026 17:03:33 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://apnews.com/article/denmark-greenland-us-trump-4ad99ea3975a8b62d37bd04961feda55">https://apnews.com/article/denmark-greenland-us-trump-4ad99ea3975a8b62d37bd04961feda55</a>, See on <a href="https://news.ycombinator.com/item?id=46659651">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                                        <p>WEST PALM BEACH, Florida (AP) — <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/hub/donald-trump">President Donald Trump</a></span> said Saturday that he would charge a 10% import tax starting in February on goods from eight European nations because of their opposition to <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/hub/greenland">American control of Greenland</a></span>, setting up a potentially dangerous test of U.S. partnerships in Europe.</p><p>Denmark, Norway, Sweden, France, Germany, the United Kingdom, the Netherlands and Finland would face the tariff, Trump said in a social media post while at his golf club in West Palm Beach, Florida. The rate would climb to 25% on June 1 if no deal was in place for “the Complete and Total purchase of Greenland” by the United States, he said.</p><p>The Republican president appeared to indicate that he was using the tariffs as leverage to force talks with Denmark and other European countries over the status of Greenland, a semiautonomous territory of <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/nato-greenland-trump-denmark-threat-annex-4907c132b499531d8d5fe6cd549c0beb">NATO ally</a></span> Denmark that he regards as critical to U.S. national security.</p>
    
<p>“The United States of America is immediately open to negotiation with Denmark and/or any of these Countries that have put so much at risk, despite all that we have done for them,” Trump said on Truth Social.</p>



<p>The tariff threat could mark a problematic rupture between Trump and America’s longtime NATO partners, further straining an alliance that dates to 1949 and provides a collective degree of security to Europe and North America. Trump has repeatedly tried to use trade penalties to bend allies and rivals alike to his will, generating investment commitments from some nations and pushback from others, notably China.</p>
    
    
    
<p>Trump is scheduled to travel on Tuesday to the World Economic Forum in Davos, Switzerland, where he likely will run into the European leaders he just threatened with tariffs that would start in little more than two weeks.</p><p>Danish Foreign Minister Lars Løkke Rasmussen said the tariff threats were a “surprise” given the “constructive meeting” with top U.S. officials this week in Washington. He said the purpose of more European troops in Greenland was to “enhance security in the Arctic” and that “we agree with the US that we need to do more since the Arctic is no longer a low tension area.”</p>
    
<p>French President Emmanuel Macron pushed back against Trump in a social media post that seemed to equate the threat to Russian leader Vladimir Putin’s war in Ukraine.</p><p>“No intimidation or threats will influence us, whether in Ukraine, Greenland or anywhere else in the world when we are faced with such situations,” Macron said in a translated post on X. “Tariff threats are unacceptable and have no place in this context. Europeans will respond in a united and coordinated manner.”</p><p>There are immediate questions about how the White House could try to implement the tariffs because the EU is a single economic zone in terms of trading, according to a European diplomat who was not authorized to comment publicly and spoke on the condition of anonymity. It was unclear, too, how Trump could act under U.S. law, though he could cite emergency economic powers that are currently subject to a <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/trump-tariffs-supreme-court-foreign-policy-21337d2c11e629da3f187cdeb381d58b">U.S. Supreme Court</a></span> challenge. </p>
    
<p>Trump has long said he thinks the U.S. should own the <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/greenland-denmark-security-trump-arctic-north-6066195d0c6b9e1bbe6da27d55b26ece">strategically located and mineral-rich</a></span> island, which has a population of about 57,000 and whose defense is provided by Denmark. He intensified his calls <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/trump-venezuela-greenland-cuba-571aac35e259857fd512c46f5af11e4d">a day after the military operation</a></span> to oust Venezuela’s Nicolás Maduro earlier this month.</p><p>The president indicated the tariffs were retaliation for what appeared to be the deployment of s <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/greenland-united-states-denmark-trump-vance-rubio-meeting-b10f5151008f1f18a788dc0751473c0e">ymbolic levels of troops from the European countries</a></span> to Greenland, which he has said was essential for the “Golden Dome” missile defense system for the U.S., He also has argued that Russia and China might try to take over the island.</p><p>The U.S. already has access to Greenland under a 1951 defense agreement. Since 1945, the <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/greenland-us-options-takeover-trump-denmark-86790903847fc8ffc27334ccb64985a9">American military presence</a></span> in Greenland has decreased from thousands of soldiers over 17 bases and installations to 200 at the remote Pituffik Space Base in the northwest of the island, the Danish foreign minister has said. That base supports missile warning, missile defense and space surveillance operations for the U.S. and NATO.</p><p>Resistance has steadily built in Europe to Trump’s ambitions even as several countries on the continent agreed to his 15% tariffs last year in order to preserve an economic and security relationship with Washington.</p>
    
<h2>‘Important for the whole world’</h2><p>Earlier Saturday, hundreds of people in Greenland’s capital, Nuuk, braved near-freezing temperatures, rain and icy streets to <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/denmark-greenland-us-trump-899d73348f2ee6c0cd2a8a6e6e136a90">march in a rally</a></span> in support of their own self-governance.</p><p>Thousands of people also marched through Copenhagen, many of them carrying Greenland’s flag. Some held signs with slogans such as “Make America Smart Again” and “Hands Off.”</p><p>“This is important for the whole world,” Danish protester Elise Riechie told The Associated Press as she held Danish and Greenlandic flags. “There are many small countries. None of them are for sale.”</p><p>The rallies occurred hours after a bipartisan delegation of U.S. lawmakers, while visiting Copenhagen, sought to reassure Denmark and Greenland of their support.</p>
    
<h2>European training exercises</h2><p>Danish Maj. Gen. Søren Andersen, leader of the Joint Arctic Command, told the AP that Denmark does not expect the U.S. military to attack Greenland, or any other NATO ally, and that European troops were recently deployed to Nuuk for Arctic defense training.</p><p>He said the goal is not to send a message to the Trump administration, even though the White House has not ruled out <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/greenland-us-options-takeover-trump-denmark-86790903847fc8ffc27334ccb64985a9">taking the territory by force</a></span>.</p><p>“I will not go into the political part, but I will say that I would never expect a NATO country to attack another NATO country,” he said from aboard a Danish military vessel docked in Nuuk. “For us, for me, it’s not about signaling. It is actually about training military units, working together with allies.”</p><p>The Danish military organized a planning meeting Friday in Greenland with NATO allies, including the U.S., to discuss Arctic security on the alliance’s northern flank in the face of a potential Russian threat. The Americans were also invited to participate in Operation Arctic Endurance in Greenland in the coming days, Andersen said.</p><p>In his 2½ years as a commander in Greenland, Andersen said that he hasn’t seen any Chinese or Russian combat vessels or warships, despite Trump saying that they were off the island’s coast.</p><p>But in the unlikely event of American troops using force on Danish soil, Andersen confirmed that Danish soldiers have an obligation to fight back.</p><h2>‘Almost no better’ ally to US than Denmark</h2><p>Trump has contended that China and Russia have their own designs on Greenland and its vast untapped reserves of critical minerals. He said recently that anything less than the Arctic island being in U.S. hands would be “unacceptable.” </p><p>The president has seen tariffs as a tool to get what he wants without having to resort to military actions. At the White House on Friday, he recounted how he had threatened European allies with tariffs on pharmaceuticals and he teased the possibility of doing so again.</p><p>“I may do that for Greenland, too,” Trump said.</p><p>After Trump followed through, Rep. Don Bacon, R-Neb., said “Congress must reclaim tariff authorities” so that they are not used solely at a president’s discretion. </p><p>European leaders have said it is only for Denmark and Greenland to decide on matters concerning the territory, and Denmark said this week that it was increasing its military presence in Greenland in cooperation with allies.</p><p>“There is almost no better ally to the United States than Denmark,” said Sen. Chris Coons, D-Del., while visiting Copenhagen with other members of Congress. “If we do things that cause Danes to question whether we can be counted on as a NATO ally, why would any other country seek to be our ally or believe in our representations?”</p><p>___</p><p>Burrows reported from Nuuk, Greenland, and Niemann from Copenhagen, Denmark. Associated Press writers Stefanie Dazio in Berlin, Aamer Madhani in Washington and Kwiyeon Ha and Evgeniy Maloletka in Nuuk contributed to this report.</p>
                                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[An Elizabethan mansion's secrets for staying warm (128 pts)]]></title>
            <link>https://www.bbc.com/future/article/20260116-an-elizabethan-mansions-secrets-for-staying-warm</link>
            <guid>46659550</guid>
            <pubDate>Sat, 17 Jan 2026 16:53:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bbc.com/future/article/20260116-an-elizabethan-mansions-secrets-for-staying-warm">https://www.bbc.com/future/article/20260116-an-elizabethan-mansions-secrets-for-staying-warm</a>, See on <a href="https://news.ycombinator.com/item?id=46659550">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-component="layout-block"><p>Elizabeth (Bess), Countess of Shrewsbury, was the woman who had deep enough pockets to build it. She was mid-way through extending the massive, rambling Hardwick "old" Hall, but for some reason or another, stopped midway through and began afresh. The experts I spoke to say we don't know why she did that, but theories range from coming into money when her husband died and feeling the need to have a house in keeping with her elevated status, to using what she'd learnt in previous builds to design a house warm and cosy for a lady approaching her seventies and living through the Little Ice Age.</p><p>"The late 16th Century is really one of the coldest stretches of the Little Ice Age, and it's bitterly cold in England," says Dagomar Degroot, professor of environmental history at Georgetown University in Washington, DC, and author of <a target="_blank" href="https://www.cambridge.org/core/books/frigid-golden-age/FD88D1B4AFA571C02A33D34B65484928">The Frigid Golden Age</a>.</p><p>Global average temperatures during the Little Ice Age dipped "<a target="_blank" href="https://academic.oup.com/astrogeo/article/58/2/2.17/3074082">at most</a>" by 0.5C (less than 0.9F), with impacts mostly documented in the northern hemisphere. That figure is an average over about five centuries, so temperatures would have swung more dramatically year to year and region to region.</p><figure><p><img src="https://static.files.bbci.co.uk/bbcdotcom/web/20260113-125315-2e65791d43-web-2.37.1-4/grey-placeholder.png" aria-label="image unavailable"><img sizes="(min-width: 1280px) 50vw, (min-width: 1008px) 66vw, 96vw" srcset="https://ichef.bbci.co.uk/images/ic/160xn/p0mvf0py.jpg.webp 160w, https://ichef.bbci.co.uk/images/ic/240xn/p0mvf0py.jpg.webp 240w, https://ichef.bbci.co.uk/images/ic/320xn/p0mvf0py.jpg.webp 320w, https://ichef.bbci.co.uk/images/ic/480xn/p0mvf0py.jpg.webp 480w, https://ichef.bbci.co.uk/images/ic/640xn/p0mvf0py.jpg.webp 640w, https://ichef.bbci.co.uk/images/ic/800xn/p0mvf0py.jpg.webp 800w, https://ichef.bbci.co.uk/images/ic/1024xn/p0mvf0py.jpg.webp 1024w, https://ichef.bbci.co.uk/images/ic/1376xn/p0mvf0py.jpg.webp 1376w, https://ichef.bbci.co.uk/images/ic/1920xn/p0mvf0py.jpg.webp 1920w" src="https://ichef.bbci.co.uk/images/ic/480xn/p0mvf0py.jpg.webp" loading="lazy" alt="Ranald Lawrence and Dean Hawkes The windows of the hall were strategically placed to make the most of sunlight (Credit: Ranald Lawrence and Dean Hawkes)"><span>Ranald Lawrence and Dean Hawkes</span></p><figcaption>The windows of the hall were strategically placed to make the most of sunlight (Credit: Ranald Lawrence and Dean Hawkes)</figcaption></figure><h2><span id="turning-to-the-sun"><b id="turning-to-the-sun">Turning to the Sun</b></span></h2><p>A key difference between the old hall and the new hall is their orientation in relation to the Sun. The old hall is just off east-west. The new hall has been rotated by about 90 degrees, which means it can soak up much more sunshine and, therefore, heat.</p></div><div data-component="layout-block"><p>"The incredible thing about Hardwick [new Hall] is… when you set it on the compass, it's almost exactly north-south," says Ranald Lawrence, a lecturer in architecture at the University of Liverpool in the UK. He's also published papers on Hardwick's <a target="_blank" href="https://doi.org/10.1080/13602365.2021.1962389">design</a> and <a target="_blank" href="https://doi.org/10.1080/00038628.2020.1856032">thermal comfort</a>. "And," he adds, "the whole internal planning of the [new] house is then based around that geometry."</p><p>Bess moved around the rooms, following the Sun's path. Her mornings were spent walking the 63m (200ft) east-facing Long Gallery, where the bright morning light hits. The afternoon and evening Sun illuminates the south-western flank of the building, where Bess' bed chambers were. And the darkest, coldest corner of the house in the north-west was where the kitchens were placed, which would have been handy in keeping food cool and fresh.</p><p>I experience this first hand as I walk around – the kitchens are much colder. Elena Williams, the senior house and collections manager at The National Trust, a UK charity which preserves historic sites, notices too. "It's a well-designed building that is also designed around comfort and that uses the natural environment to do that," she says.</p><h2><span id="windows,-walls-and-fireplaces"><b id="windows,-walls-and-fireplaces">Windows, walls and fireplaces</b></span></h2><p>It's not just the orientation that helps keep the house warm. As Williams shows me around, she points out that some of the windows on the north of the building are actually "blind" or fake. She explains that on the outside, there is a window, but on the inside, it's lined with lead and blocked up. Unlike south-facing windows, north-facing windows bring little thermal benefit, even in summer, Lawrence says.</p><p>Pretty much all the fireplaces I see are also built on the central spine of the building, meaning not much heat would be lost to the windows or exterior wall. It's not until we take a door through this spine that I realise that the girth of it is staggering – 1.37m (4.5ft) thick. This is yet another trick to keep its inhabitants warm.</p></div><div data-component="layout-block"><p>"The past is an underused tool," Degroot says. "I think by trying to identify the complex and diverse ways in which people responded to history's climate changes, we can come up with new tools for understanding how we might respond in the future and for identifying responses that are constructive versus destructive."&nbsp;</p><p>Brutalist architects Peter and Alison Smithson knew of and even<a target="_blank" href="https://d1wqtxts1xzle7.cloudfront.net/39266530/550aa8540cf28556409502a4-libre.pdf?1445160899=&amp;response-content-disposition=inline%3B+filename%3DPaper_No_151_The_Architecture_of_Climate.pdf&amp;Expires=1768509864&amp;Signature=OXyZLorBmT-7qkk66yuaWuUHmB5IpGCbB19oRgAbgr29xV3O2~HmE3a8tDRBJUjSchZKBrshFLJILwok0TVBVEncu-MezEfFbsbnIMUShTXwU-CcQASk8BIcDcMcqQXcPPUuUBlczqCO56qDqpQla0L~ahuKiDYWLOQr3mgIJUcW52nHi~SvGIByCbrRkHZ2u8p5TnnoXXiQJmzL3ClAogl2EsBGJ3ne3N0RecBHDOupCIM7gJ0LJN-6fU~H9MnJmJ~9Lt5m8~Tt9Vo1y4Sx9-SdYcdDkQbKURZgYsqM083i09hPNp8amF~rIzWxlP5KqaA3UiL1CM6B3RI5Bgzwqg__&amp;Key-Pair-Id=APKAJLOHF5GGSLRBV4ZA"> admired </a>Hardwick Hall. Some academics claim that it likely <a target="_blank" href="https://www.academia.edu/16937507/Paper_No_151_The_Architecture_of_Climate_Studies_in_environmental_history_Smythson_and_the_Smithsons">inspired their own designs</a>, like the Solar Pavillion, in south-west England, which is only has glass on its east, west and south-facing walls. Sun-soaking designs aren't just the preserve of the rich, though. One of London's most striking council estates is on Alexandria Road in Camden, in the north of the city, and Lawrence says it too features south facing terraces with lots of concrete to store the Sun's heat.</p><p>But on the whole, he tells me, we generally don't use these Elizabethan building secrets. Instead, we use air conditioning and heating in an attempt to override building designs that are poorly suited to their climate.</p><p>"Our assumption that the solution to all of our problems is technological," Lawrence says. Glass box skyscrapers, now common in both cold and hot climates, are a good example of this. In winter, heat escapes through the glass, and <a target="_blank" href="https://doi.org/10.64628/AB.juya3prr9">require a lot of heating</a>. Conversely in summer,<a target="_blank" href="https://doi.org/10.1016/j.egyr.2023.09.090"> the glass traps the heat</a><a target="_blank" href="https://doi.org/10.1016/j.egyr.2023.09.090"> – like a greenhouse –</a><a target="_blank" href="https://doi.org/10.1016/j.egyr.2023.09.090"> and require massive amounts of energy for cooling</a>.</p><figure><p><img src="https://static.files.bbci.co.uk/bbcdotcom/web/20260113-125315-2e65791d43-web-2.37.1-4/grey-placeholder.png" aria-label="image unavailable"><img sizes="(min-width: 1280px) 50vw, (min-width: 1008px) 66vw, 96vw" srcset="https://ichef.bbci.co.uk/images/ic/160xn/p0mvf503.jpg.webp 160w, https://ichef.bbci.co.uk/images/ic/240xn/p0mvf503.jpg.webp 240w, https://ichef.bbci.co.uk/images/ic/320xn/p0mvf503.jpg.webp 320w, https://ichef.bbci.co.uk/images/ic/480xn/p0mvf503.jpg.webp 480w, https://ichef.bbci.co.uk/images/ic/640xn/p0mvf503.jpg.webp 640w, https://ichef.bbci.co.uk/images/ic/800xn/p0mvf503.jpg.webp 800w, https://ichef.bbci.co.uk/images/ic/1024xn/p0mvf503.jpg.webp 1024w, https://ichef.bbci.co.uk/images/ic/1376xn/p0mvf503.jpg.webp 1376w, https://ichef.bbci.co.uk/images/ic/1920xn/p0mvf503.jpg.webp 1920w" src="https://ichef.bbci.co.uk/images/ic/480xn/p0mvf503.jpg.webp" loading="lazy" alt="Alamy Today's grand buildings can be very heat-inefficient, relying on mechanical heating and cooling to regulate temperature (Credit: Alamy)"><span>Alamy</span></p><figcaption>Today's grand buildings can be very heat-inefficient, relying on mechanical heating and cooling to regulate temperature (Credit: Alamy)</figcaption></figure></div><div data-component="layout-block"><p>But without taking apart our existing housing and building it again from scratch, there are also micro-adjustments we can make.&nbsp;</p><p><b id="more-like-this:">More like this:</b></p><ul><li><a target="_self" href="https://www.bbc.com/future/article/20240115-low-cost-heating-hacks-how-to-make-your-home-stay-warmer-for-longer">Hacks to keep your home warmer</a></li><li><a target="_self" href="https://www.bbc.com/future/article/20200204-what-is-the-most-sustainable-way-to-heat-homes">The homes heated without fossil fuels</a></li><li><a target="_self" href="https://www.bbc.com/future/article/20221107-energy-crisis-how-living-in-a-cold-home-affects-your-health">How living in a cold home affects your health</a></li></ul><p>I get a compass out at my house – for the first time – and begin to think about how I could follow the Sun's path throughout the day. Since it's winter, and cold, I move my desk to a south-eastern window. It brightens the mornings and if I wear another layer, I find I can lower the thermostat by 2C (3.6F). Longer term, I've been thinking about planting a tree just outside. In a couple of decades, it would shade my house from scorching heatwaves that are predicted to be much more common <a target="_blank" href="https://www.ipcc.ch/report/ar6/wg1/chapter/chapter-11/">because of climate change</a>.</p><p>These are modest changes, imperceptible to most, and they won't enable us to forgo active heating and cooling entirely. But they do echo a way of thinking which, today, is oft ignored. Hardwick Hall was designed with Sun, season and temperature in mind. It paid attention to the world outside its walls. As the climate becomes more volatile, architecture that works with its environment feels more urgent than ever.</p><p>--</p><p><i id="for-essential-climate-news-and-hopeful-developments-to-your-inbox,-sign-up-to-the">For essential climate news and hopeful developments to your inbox, sign up to the&nbsp;</i><a target="_self" href="https://cloud.email.bbc.com/FutureEarth_Newsletter_Signup?&amp;at_bbc_team=studios&amp;at_medium=Onsite&amp;at_objective=acquisition&amp;at_ptr_name=bbc.com&amp;at_link_origin=futurearticle&amp;at_campaign=futureearth&amp;at_campaign_type=owned&amp;&amp;"><i id="future-earth-newsletter,">Future Earth newsletter,</i></a><i id="while">&nbsp;while&nbsp;</i><a target="_self" href="https://cloud.email.bbc.com/SignUp10_08?&amp;at_bbc_team=studios&amp;at_medium=Onsite&amp;at_objective=acquisition&amp;at_ptr_name=bbc.com&amp;at_link_origin=featuresarticle&amp;at_campaign=essentiallist&amp;at_campaign_type=owned"><i id="the-essential-list">The Essential List</i></a><i id="delivers-a-handpicked-selection-of-features-and-insights-twice-a-week.">&nbsp;delivers a handpicked selection of features and insights twice a week.</i>&nbsp;</p><p><i id="for-more-science,-technology,-environment-and-health-stories-from-the-bbc,-follow-us-on">For more science, technology, environment and health stories from the BBC, follow us on&nbsp;</i><a target="_blank" href="https://www.facebook.com/BBCFuture/"><i id="facebook">Facebook</i></a><i id="and">&nbsp;and&nbsp;</i><a target="_blank" href="https://www.instagram.com/bbcfuture_official/"><i id="instagram">Instagram</i></a><i id=".">.</i></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The recurring dream of replacing developers (361 pts)]]></title>
            <link>https://www.caimito.net/en/blog/2025/12/07/the-recurring-dream-of-replacing-developers.html</link>
            <guid>46658345</guid>
            <pubDate>Sat, 17 Jan 2026 14:31:33 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.caimito.net/en/blog/2025/12/07/the-recurring-dream-of-replacing-developers.html">https://www.caimito.net/en/blog/2025/12/07/the-recurring-dream-of-replacing-developers.html</a>, See on <a href="https://news.ycombinator.com/item?id=46658345">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
				
				<h2 id="the-pattern-that-frustrates-everyone">The Pattern That Frustrates Everyone</h2>

<div>

<p>07.12.2025, <em>By Stephan Schwab</em></p>

<p><a href="https://www.caimito.net/en/about.html"><img src="https://gravatar.com/avatar/663d11426b0a187ddac59f8c17ce61b4?s=120&amp;d=robohash&amp;r=x"></a></p><p>Every decade brings new promises: this time, we'll finally make software development simple enough that we won't need so many developers. From COBOL to AI, the pattern repeats. Business leaders grow frustrated with slow delivery and high costs. Developers feel misunderstood and undervalued. Understanding why this cycle persists for fifty years reveals what both sides need to know about the nature of software work.</p>

</div>

<figure data-lightbox="true" data-full-src="/img/blog/full/the-recurring-dream-of-replacing-developers.jpg">
	<img src="https://www.caimito.net/img/blog/the-recurring-dream-of-replacing-developers.jpg" alt="The recurring dream of replacing developers — from COBOL to AI">
</figure>

<h2 id="the-dream-was-born-during-humanitys-greatest-achievement">The Dream Was Born During Humanity’s Greatest Achievement</h2>

<p>When Neil Armstrong stepped onto the lunar surface in 1969, the world witnessed what organized human ingenuity could accomplish. Behind that achievement stood Margaret Hamilton and her team, writing Apollo’s guidance software by hand, catching critical errors through careful review, and proving that software could be mission-critical.</p>

<p>The Apollo program demonstrated that software development was essential to achieving the impossible. Yet it also revealed something that would frustrate business leaders for decades to come: writing software required specialized knowledge, intense focus, and significant time investment. The dream of making it easier—of needing fewer of these expensive specialists—began almost immediately.</p>

<h2 id="cobol-business-people-will-write-their-own-programs">COBOL: Business People Will Write Their Own Programs</h2>

<p>The late 1960s and 1970s saw COBOL emerge with an explicit goal stated in its name: Common Business-Oriented Language. The vision was clear: make the language read like English sentences, and business analysts would write their own programs. No need for specialized programmers.</p>

<p>
"If we make the syntax readable enough, anyone who understands the business can write the code."
</p>

<p>This vision had genuine appeal. Software was becoming essential to business operations, yet programmers remained a scarce, expensive resource. COBOL promised to democratize software creation.</p>

<p>What happened instead? COBOL became another programming language requiring specialized training. Business analysts who tried to write COBOL quickly discovered that readable syntax didn’t eliminate the complexity of logic, data structures, or system design. A new class of COBOL programmers emerged, and the dream of eliminating specialized developers remained unfulfilled.</p>

<p>Yet the dream didn’t die. It simply waited for the next technological wave.</p>



<p>Computer-Aided Software Engineering tools arrived in the 1980s with tremendous promise. Draw flowcharts and entity-relationship diagrams, and the tool would generate working code. The marketing message resonated: visual design was more intuitive than typing cryptic commands. Business experts could model their processes, and software would materialize.</p>

<p>Organizations invested heavily. Vendors promised productivity increases of 10x or more. Yet most CASE tool initiatives struggled or failed outright.</p>

<p>The generated code often required substantial manual intervention. Performance problems emerged. Maintenance became a nightmare when generated code diverged from the visual models. Most critically, drawing accurate diagrams required understanding the same logical complexity that programming demanded. The tool changed the interface but not the fundamental challenge.</p>

<p>Once again, the problem proved more stubborn than the solution.</p>

<h2 id="visual-basic-and-delphi-drag-drop-done">Visual Basic and Delphi: Drag, Drop, Done</h2>

<p>The 1990s brought a different approach. Microsoft’s Visual Basic and Borland’s Delphi made building user interfaces dramatically easier. Drag components onto a form, set properties, write event handlers. Suddenly, creating a Windows application felt achievable for developers with modest experience.</p>

<p>This wave succeeded differently than COBOL or CASE tools. These environments acknowledged that programming knowledge was still necessary, but they reduced the barrier to entry. A broader range of people could create useful applications.</p>

<p>Yet the dream of eliminating developers persisted. “Power users” and “citizen developers” would build departmental applications. IT departments could focus on infrastructure while business units solved their own software needs.</p>

<p>Reality proved more nuanced. Simple applications were indeed accessible to more people. But as requirements grew in complexity—integration with existing systems, security considerations, performance under load, long-term maintenance—the need for experienced developers became evident. The tools expanded who could write software, but they didn’t eliminate the expertise required for substantial systems.</p>

<p>And so the cycle continued into the new millennium.</p>

<h2 id="the-2000s-and-beyond-web-frameworks-low-code-and-no-code">The 2000s and Beyond: Web Frameworks, Low-Code, and No-Code</h2>

<p>Each subsequent decade introduced new variations. Ruby on Rails promised convention over configuration. Low-code platforms offered visual development with minimal coding. No-code platforms claimed to eliminate programming entirely for common business applications.</p>

<p>Each wave delivered real value. Development genuinely became faster in specific contexts. More people could participate in creating software solutions. Yet professional software developers remained essential, and demand for their skills continued growing rather than shrinking.</p>

<p>Which brings us to the question: why does this pattern repeat?</p>

<h2 id="why-the-dream-persists">Why the Dream Persists</h2>

<p>The recurring pattern reveals something important about how we think about complexity. Software development looks like it should be simple because we can describe what we want in plain language. “When a customer places an order, check inventory, calculate shipping, process payment, and send a confirmation email.” That description sounds straightforward.</p>

<p>The complexity emerges in the details. What happens when inventory is temporarily reserved by another order? How do you handle partial payments? What if the email service is temporarily unavailable? Should you retry? How many times? What if the customer’s session expires during checkout? How do you prevent duplicate orders?</p>

<p>Each answer leads to more questions. The accumulated decisions, edge cases, and interactions create genuine complexity that no tool or language can eliminate. Someone must think through these scenarios. That thinking is software development, regardless of whether it’s expressed in COBOL, a CASE tool diagram, Visual Basic, or an AI prompt.</p>

<p>Which brings us to today’s excitement.</p>

<h2 id="ai-the-latest-chapter-in-a-long-story">AI: The Latest Chapter in a Long Story</h2>

<p>Today’s AI coding assistants represent the most capable attempt yet to assist with software creation. They can generate substantial amounts of working code from natural language descriptions. They can explain existing code, suggest improvements, and help debug problems.</p>

<p>This represents genuine progress. The assistance is real and valuable. Experienced developers use these tools to work more efficiently. People learning to code find the interactive guidance helpful.</p>

<p>Yet we’re already seeing the familiar pattern emerge. Initial excitement about AI replacing developers is giving way to a more nuanced understanding: AI changes how developers work rather than eliminating the need for their judgment. The complexity remains. Someone must understand the business problem, evaluate whether the generated code solves it correctly, consider security implications, ensure it integrates properly with existing systems, and maintain it as requirements evolve.</p>

<p>AI amplifies developer capability. It doesn’t replace the need for people who understand both the problem domain and the technical landscape.</p>

<h2 id="so-much-opportunity-still-struggling">So Much Opportunity, Still Struggling</h2>

<p>Here’s the paradox that makes this pattern particularly poignant. We’ve made extraordinary progress in software capabilities. The Apollo guidance computer had 4KB of RAM. Your smartphone has millions of times more computing power. We’ve built tools and frameworks that genuinely make many aspects of development easier.</p>

<p>Yet demand for software far exceeds our ability to create it. Every organization needs more software than it can build. The backlog of desired features and new initiatives grows faster than development teams can address it.</p>

<p>This tension—powerful tools yet insufficient capacity—keeps the dream alive. Business leaders look at the backlog and think, “There must be a way to go faster, to enable more people to contribute.” That’s a reasonable thought. It leads naturally to enthusiasm for any tool or approach that promises to democratize software creation.</p>

<p>The challenge is that software development isn’t primarily constrained by typing speed or syntax knowledge. It’s constrained by the thinking required to handle complexity well. Faster typing doesn’t help when you’re thinking through how to handle concurrent database updates. Simpler syntax doesn’t help when you’re reasoning about security implications.</p>

<p>So what should leaders do with this understanding?</p>

<h2 id="what-this-means-for-leaders">What This Means for Leaders</h2>

<p>Understanding this pattern changes how you evaluate new tools and approaches. When someone promises that their platform will let business users build applications without developers, you can appreciate the aspiration while maintaining realistic expectations.</p>

<p>The right question isn’t “Will this eliminate our need for developers?” The right questions are:</p>

<ul>
  <li>Will this help our developers work more effectively on complex problems?</li>
  <li>Will this enable us to build certain types of solutions faster?</li>
  <li>Does this reduce time spent on repetitive tasks so developers can focus on unique challenges?</li>
  <li>Will our team need to learn new skills to use this effectively?</li>
</ul>

<p>These questions acknowledge that development involves irreducible complexity while remaining open to tools that provide genuine leverage.</p>

<p>And they point to something deeper about the nature of software work.</p>

<h2 id="the-pattern-reveals-the-problems-nature">The Pattern Reveals the Problem’s Nature</h2>

<p>This fifty-year pattern teaches us something fundamental about software development itself. If the problem were primarily mechanical—too much typing, too complex syntax, too many steps—we would have solved it by now. COBOL made syntax readable. CASE tools eliminated typing. Visual tools eliminated syntax. AI can now generate entire functions from descriptions.</p>

<p>Each advancement addressed a real friction point. Yet the fundamental challenge persists because it’s not mechanical. It’s intellectual. Software development is thinking made tangible. The artifacts we create—whether COBOL programs, Delphi forms, or Python scripts—are the visible outcome of invisible reasoning about complexity.</p>

<p>You can’t shortcut that reasoning any more than you can shortcut the reasoning required to design a building or diagnose a medical condition. Better tools help. Experience helps. But someone must still think it through.</p>

<p>So how should we move forward, knowing all this?</p>

<h2 id="moving-forward-with-clear-eyes">Moving Forward with Clear Eyes</h2>

<p>The next wave of development tools will arrive. Some will provide genuine value. Some will repeat familiar promises with new technology. Having perspective on this recurring pattern helps you engage with new tools productively.</p>

<p>Use AI assistants. Evaluate low-code platforms. Experiment with new frameworks. But invest primarily in your people’s ability to think clearly about complexity. That capability remains the constraining factor, just as it was during the Apollo program.</p>

<p>The moon landing happened because brilliant people thought carefully about every detail of an extraordinarily complex challenge. They wrote software by hand because that was the available tool. If they’d had better tools, they would have used them gladly. But the tools wouldn’t have eliminated their need to think through the complexity.</p>

<p>We’re still in that same fundamental situation. We have better tools—vastly better tools—but the thinking remains essential.</p>

<h2 id="the-dream-serves-a-purpose">The Dream Serves a Purpose</h2>

<p>Perhaps the recurring dream of replacing developers isn’t a mistake. Perhaps it’s a necessary optimism that drives tool creation. Each attempt to make development more accessible produces tools that genuinely help. The dream doesn’t come true as imagined, but pursuing it creates value.</p>

<p>COBOL didn’t let business analysts write programs, but it did enable a generation of developers to build business systems effectively. CASE tools didn’t generate complete applications, but they advanced our thinking about visual modeling. Visual Basic didn’t eliminate professional developers, but it brought application development to more people. AI won’t replace developers, but it will change how we work in meaningful ways.</p>

<p>The pattern continues because the dream reflects a legitimate need. We genuinely require faster, more efficient ways to create software. We just keep discovering that the constraint isn’t the tool—it’s the complexity of the problems we’re trying to solve.</p>

<p>Understanding this doesn’t mean rejecting new tools. It means using them with clear expectations about what they can provide and what will always require human judgment.</p>

<!-- Cross-language links intentionally omitted -->

				
				<div>
  <h2>Newsletter</h2>
  <p>Get new articles, story episodes, and hero profiles delivered to your inbox.</p>
  
  
  <p>Your email is processed by <a href="https://newsletter.caimito.net/privacy">newsletter.caimito.net</a>. Unsubscribe anytime.</p>
</div>



			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[What life is like in Minneapolis now (165 pts)]]></title>
            <link>https://donmoynihan.substack.com/p/dispatch-from-the-occupation</link>
            <guid>46658213</guid>
            <pubDate>Sat, 17 Jan 2026 14:13:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://donmoynihan.substack.com/p/dispatch-from-the-occupation">https://donmoynihan.substack.com/p/dispatch-from-the-occupation</a>, See on <a href="https://news.ycombinator.com/item?id=46658213">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p><em>From Don: This piece comes someone living and working in Minneapolis, which is experiencing a de facto military occupation right now. They wish to remain anonymous out of concern that their government might retaliate against them for reporting on what life is like there now. Please share this story so people can understand how bad things are on the ground. </em></p><p data-attrs="{&quot;url&quot;:&quot;https://donmoynihan.substack.com/p/dispatch-from-the-occupation?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;action&quot;:null,&quot;class&quot;:null}" data-component-name="ButtonCreateButton"><a href="https://donmoynihan.substack.com/p/dispatch-from-the-occupation?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share" rel=""><span>Share</span></a></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/$s_!Ew98!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!Ew98!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg 424w, https://substackcdn.com/image/fetch/$s_!Ew98!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg 848w, https://substackcdn.com/image/fetch/$s_!Ew98!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!Ew98!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/$s_!Ew98!,w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg" width="1200" height="799.4505494505495" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/e4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:false,&quot;imageSize&quot;:&quot;large&quot;,&quot;height&quot;:970,&quot;width&quot;:1456,&quot;resizeWidth&quot;:1200,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;A person carries a child away from an intersection where ICE agents are being confronted by protesters.&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:&quot;center&quot;,&quot;offset&quot;:false}" alt="A person carries a child away from an intersection where ICE agents are being confronted by protesters." title="A person carries a child away from an intersection where ICE agents are being confronted by protesters." srcset="https://substackcdn.com/image/fetch/$s_!Ew98!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg 424w, https://substackcdn.com/image/fetch/$s_!Ew98!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg 848w, https://substackcdn.com/image/fetch/$s_!Ew98!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!Ew98!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4ef2c2f-079c-46b6-9879-e37331a900f5_1600x1066.jpeg 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption>Stephen Maturen / Getty</figcaption></figure></div><p>I am writing as an ordinary citizen of Minneapolis/St Paul ─ one of America’s 20 largest metro areas. I have kids in the public schools, own a house, go to work every day, pay taxes, volunteer in my community (e.g., coaching youth sports, helping in the schools). I am certainly not a radical of any kind. I had never done any community organizing work before last month.</p><p><span>I am writing this to share with the outside world what is really going on ─ the terror being inflicted upon a U.S. city and state by </span><em>our</em><span> federal government. If you are so moved, see below to learn how you can help. Here is what is happening right now:</span></p><p><span>Consider the following example incidents, all from the last ten days or so. I will not provide names, sources, etc. because many people are in active danger. But the </span><a href="https://bringmethenews.com/minnesota-news/twin-cities-teacher-a-us-citizen-arrested-by-federal-agents-outside-school" rel="">general pattern</a><span> has been </span><a href="https://www.nytimes.com/2026/01/15/us/minneapolis-schools-online-learning-ice.html" rel="">well documented,</a></p><ol><li><p><span>As a large, public Minneapolis high school was dismissing students for the day, two teachers parked in front of the school were violently extracted from their cars and abducted by ICE officers. No warrants were presented; no documents requested or checked. </span><em>Both abducted teachers were US citizens</em><span>.</span></p><p><span>Students observing the abductions were </span><a href="https://www.mprnews.org/story/2026/01/08/after-border-patrol-clash-at-roosevelt-minneapolis-schools-cancel-classes" rel="">assaulted with pepper spray</a><span> by the federal officers, with some fleeing to shelter in the public library across the street. In response, Minneapolis public schools canceled classes for two days and subsequently went to a hybrid attendance option ─ because, as they told parents in an email, they did not feel they could keep their students safe. This is </span><em>our</em><span> federal government terrorizing its citizens.</span></p></li><li><p>During a subsequent hybrid class in the same school ─ with mostly White students in the classroom and mostly students of color online ─ an online student’s apartment building was raided by federal officers. The teacher had to stop class to support the affected student, who was rightfully terrified. Class was interrupted for the day as students texted or called their families for support.</p><p><span>None of our students feel psychologically safe; learning has all but come to a halt. This is </span><em>our</em><span> federal government terrorizing its citizens.</span></p></li><li><p><span>A man walking his child to the school bus stop in the morning </span><a href="https://www.kare11.com/article/news/local/ice-in-minnesota/parent-arrested-ice-agents-school-bus-crystal/89-6cd97be7-50b8-481a-b19d-ff94ccc9f818" rel="">was abducted</a><span> by federal officers. A child was left abandoned and terrified on the street. This is </span><em>our</em><span> federal government terrorizing its citizens.</span></p></li></ol><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/$s_!0tE0!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!0tE0!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png 424w, https://substackcdn.com/image/fetch/$s_!0tE0!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png 848w, https://substackcdn.com/image/fetch/$s_!0tE0!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png 1272w, https://substackcdn.com/image/fetch/$s_!0tE0!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/$s_!0tE0!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png" width="1456" height="1014" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1014,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:3532092,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://donmoynihan.substack.com/i/184647521?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png&quot;,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/$s_!0tE0!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png 424w, https://substackcdn.com/image/fetch/$s_!0tE0!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png 848w, https://substackcdn.com/image/fetch/$s_!0tE0!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png 1272w, https://substackcdn.com/image/fetch/$s_!0tE0!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F137abd65-9aeb-4ba7-81d3-5078e812fb5f_1732x1206.png 1456w" sizes="100vw"></picture></div></a></figure></div><p><span>These are just recent examples known to me. Beyond all of this, the biggest concern in many Twin Cities schools right now is </span><em>access to food and keeping people housed</em><span>. People at risk of abduction are now understandably unwilling to leave home ─ meaning they can’t go to their jobs, and they can’t shop for food and other necessities. Affected kids don’t get meals at school. Local communities </span><a href="https://www.mprnews.org/episode/2026/01/15/minneapolis-church-has-delivered-more-than-12000-boxes-of-groceries-to-families-in-hiding" rel="">are organizing</a><span> to feed hundreds … thousands? … of terrified families who are hiding from </span><em>our </em><span>federal government. </span><em>Nearly everyone in these families is a U.S. citizen or otherwise legally in the United States</em><span>. </span></p><p><span>Federal agents abduct people and ask questions later; if your skin is not White, you are presumed guilty until proven otherwise. An analysis by our local Fox News TV station found </span><a href="https://www.fox9.com/news/ice-minnesota-who-worst-worst-arrested-jan-2026" rel="">only about 5%</a><span> of the ~2,000 people arrested by federal agents have records of violent criminal convictions. </span></p><p><span>There are </span><em>thousands</em><span> of ICE and other federal officers in the metro area actively patrolling the streets. In nearly all immigrant and Black and Latino neighborhoods, there are </span><em>multiple</em><span> attempted armed abductions of residents </span><em>every day</em><span>. (Such events also happen, albeit less frequently, in more economically privileged neighborhoods: Housecleaners, construction workers, etc. are the targets in those cases.) Residents of Twin Cities neighborhoods are organizing to respond peacefully and in accord with their established constitutional rights.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/$s_!qyqM!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!qyqM!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg 424w, https://substackcdn.com/image/fetch/$s_!qyqM!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg 848w, https://substackcdn.com/image/fetch/$s_!qyqM!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!qyqM!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/$s_!qyqM!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg" width="800" height="375" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/d9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:375,&quot;width&quot;:800,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Showing 3000 immigration officers to 2482 officers from the ten largest metro forces &quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" alt="Showing 3000 immigration officers to 2482 officers from the ten largest metro forces " title="Showing 3000 immigration officers to 2482 officers from the ten largest metro forces " srcset="https://substackcdn.com/image/fetch/$s_!qyqM!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg 424w, https://substackcdn.com/image/fetch/$s_!qyqM!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg 848w, https://substackcdn.com/image/fetch/$s_!qyqM!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!qyqM!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd9fcf2f3-8584-4bb5-b094-ff1f050bb2d3_800x375.jpeg 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>From the Star Tribune: There are more immigration agents in the Twin Cities than there are police</figcaption></figure></div><p><span>All of this means that the following dystopian scenario plays out in the open </span><em>dozens</em><span> of times per day in the Twin Cities: Multiple masked and armed agents in combat gear amass in unmarked cars outside a house or business. A bystander notices and alerts the neighborhood. A dozen or more neighborhood residents appear within minutes to </span><em>legally</em><span> observe, </span><em>legally</em><span> film the encounter, </span><em>legally</em><span> make sure the targeted people know their rights, and </span><em>legally</em><span> warn others by blowing whistles and honking car horns.</span></p><p><span>The targeted people ─ again, </span><em>almost all of whom are U.S. citizens or in the U.S. legally</em><span> ─ are abducted and frequently sent to jail in Texas or Louisiana or elsewhere within 24 hours; hopefully the neighborhood observers were able to get their name and a phone number for a friend or family member. The neighborhood observers, peacefully practicing their </span><em>legal</em><span> rights, are labelled terrorists by their government. Or, worse, they are </span><em>also</em><span> </span><a href="https://www.mprnews.org/story/2026/01/16/ice-tactics-in-twin-cities-turn-toward-intimidation" rel="">abducted</a><span> by federal agents and detained at the (federal) Whipple Building at Fort Snelling (ironically, the site of the largest mass execution by the U.S. government in our nation’s history in 1862) for many hours before being released with no charges made against them. This is </span><em>our</em><span> federal government terrorizing its citizens.</span></p><p>In addition to their presence on our streets and in our businesses, the federal officers appear to be immune to punishment for breaking traffic laws. They routinely run red lights, do dangerous U-turns, drive far over the speed limit, etc. Not in marked cars with sirens and lights ─ but in ordinary rental cars and other unmarked vehicles. This is all happening on Minnesota’s very icy January roads, which most federal agents are not used to driving on.</p><p data-attrs="{&quot;url&quot;:&quot;https://donmoynihan.substack.com/p/dispatch-from-the-occupation?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;action&quot;:null,&quot;class&quot;:null}" data-component-name="ButtonCreateButton"><a href="https://donmoynihan.substack.com/p/dispatch-from-the-occupation?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share" rel=""><span>Share</span></a></p><p>There is no illusion on the ground in the Twin Cities that the community can “defeat” ICE or drive out the federal forces violently occupying our city. The “terrorists” and “Antifa” that the Trump Administration speaks of ─ aka, neighborhood groups organizing to peacefully and legally support their neighbors ─ instead generally have three goals:</p><ol><li><p>Make sure abducted people know their rights and that those rights are respected.</p></li><li><p>Document abductions so that federal agents cannot “disappear” people – again, many of whom are U.S. citizens or are legally in the country.</p></li><li><p>Support affected families however possible ─ mostly with food, transportation, and financial and legal assistance.</p></li></ol><p><span>Trump administration claims of a violent insurrection are simply not true. Ordinary citizens are trying to </span><em>legally </em><span>observe, record, and minimize damage from the assault on our communities. They are trying to prevent </span><em>our</em><span> federal government from illegally abducting people based on the color of their skin. They are trying to prevent something akin to the rounding up of Jewish (in Europe) and Japanese (in the U.S.) people in the lead up to and during World War II. They are trying to prevent the atrocities of history from repeating themselves in our city and our state in 2026.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/$s_!S2yd!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!S2yd!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg 424w, https://substackcdn.com/image/fetch/$s_!S2yd!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg 848w, https://substackcdn.com/image/fetch/$s_!S2yd!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!S2yd!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/$s_!S2yd!,w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg" width="1200" height="800.2747252747253" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:false,&quot;imageSize&quot;:&quot;large&quot;,&quot;height&quot;:971,&quot;width&quot;:1456,&quot;resizeWidth&quot;:1200,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;At least eight armed federal officers stand outside the open door of a house as a person inside gestures while speaking to them.&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:&quot;center&quot;,&quot;offset&quot;:false}" alt="At least eight armed federal officers stand outside the open door of a house as a person inside gestures while speaking to them." title="At least eight armed federal officers stand outside the open door of a house as a person inside gestures while speaking to them." srcset="https://substackcdn.com/image/fetch/$s_!S2yd!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg 424w, https://substackcdn.com/image/fetch/$s_!S2yd!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg 848w, https://substackcdn.com/image/fetch/$s_!S2yd!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!S2yd!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F544f3738-47c5-4629-81fb-b9ec782de227_1600x1067.jpeg 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>John Locher / AP: Without a </span><a href="https://www.minnpost.com/public-safety/2026/01/attorney-federal-agents-had-no-proper-warrant-to-arrest-minneapolis-man-who-fled-to-u-s-from-liberia-as-a-child-ice-garrison-gibson/" rel="">valid warrant</a><span> ICE uses a battering ram to invade the home of a man who has lived in America since he was a child, and had been regularly checking in with immigration authorities.</span></figcaption></figure></div><p>The sentiment on the ground is that things are poised to get worse. Maybe much worse. One more spark of violence seems to be all that is required for the administration to declare an insurrection and send in the military. We are holding our collective breath.</p><p data-attrs="{&quot;url&quot;:&quot;https://donmoynihan.substack.com/p/dispatch-from-the-occupation?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;action&quot;:null,&quot;class&quot;:null}" data-component-name="ButtonCreateButton"><a href="https://donmoynihan.substack.com/p/dispatch-from-the-occupation?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share" rel=""><span>Share</span></a></p><p><span>Do you want to </span><a href="https://mspmag.com/arts-and-culture/general-interest/ice-minnesota-support-immigrant-communities-fundraisers-food-drives-trainings/" rel="">help people</a><span> in our city? I recommend three things.</span></p><p><span>First, if you live in a politically “red” or “purple” state, call your elected (especially Republican) officials and tell them to oppose mass ICE raids. Tell them you will not tolerate what is happening in Minnesota </span><em>anywhere</em><span> in your country and that their lack of action to protect U.S. citizens and other legal residents will heavily influence your vote in November.</span></p><p><span>Second, </span><a href="https://docs.google.com/document/d/1fdwaG8r41k_1x3XOEVjNwyzfc2jWLIoOC2r5XsBBjE4/edit?tab=t.0" rel="">send money</a><span>. Pick a </span><a href="https://www.standwithminnesota.com/" rel="">reputable (non-government) immigrant rights organization</a><span>, public school PTA or support organization, or (non-government) social service agency. Send them as much money as you are comfortable sending; they need it desperately (mainly to feed people and provide legal assistance, but there are many other needs). </span></p><p>Third, directly reach out to your friends or family members in the Twin Cities … every day. Like me, they need to know that the world is aware of what is happening here and cares.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/$s_!BhnL!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!BhnL!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png 424w, https://substackcdn.com/image/fetch/$s_!BhnL!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png 848w, https://substackcdn.com/image/fetch/$s_!BhnL!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png 1272w, https://substackcdn.com/image/fetch/$s_!BhnL!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/$s_!BhnL!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png" width="1456" height="1119" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1119,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:2530901,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://donmoynihan.substack.com/i/184647521?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png&quot;,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/$s_!BhnL!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png 424w, https://substackcdn.com/image/fetch/$s_!BhnL!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png 848w, https://substackcdn.com/image/fetch/$s_!BhnL!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png 1272w, https://substackcdn.com/image/fetch/$s_!BhnL!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5ee8f35e-124c-4074-824d-cc8082c985a0_2066x1588.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Mostafa Bassim / Anadolu / Getty</figcaption></figure></div></div></article></div><div><div id="discussion"><h4>Discussion about this post</h4></div><div><h3>Ready for more?</h3></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Italy investigates Activision Blizzard for pushing in-game purchases (109 pts)]]></title>
            <link>https://techcrunch.com/2026/01/16/italy-investigates-activision-blizzard-for-pushing-in-game-purchases/</link>
            <guid>46658014</guid>
            <pubDate>Sat, 17 Jan 2026 13:44:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://techcrunch.com/2026/01/16/italy-investigates-activision-blizzard-for-pushing-in-game-purchases/">https://techcrunch.com/2026/01/16/italy-investigates-activision-blizzard-for-pushing-in-game-purchases/</a>, See on <a href="https://news.ycombinator.com/item?id=46658014">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p id="speakable-summary">Italy has launched two investigations into Microsoft’s Activision Blizzard, alleging the company has engaged in “misleading and aggressive” sales practices for its popular smartphone games Diablo Immortal and Call of Duty Mobile.</p>

<p>The country’s competition regulator, Autorità Garante della Concorrenza E Del Mercato (AGCM), said the investigations focus on the use of design elements to induce users, particularly children, into playing for long periods, and make in-game purchases by urging them to not miss out on rewards.</p>







<p>“These practices, together with strategies that make it difficult for users to understand the real value of the virtual currency used in the game and the sale of in-game currency in bundles, may influence players as consumers — including minors — leading them to spend significant amounts, sometimes exceeding what is necessary to progress in the game and without being fully aware of the expenditure involved,” the AGCM <a href="https://en.agcm.it/en/media/press-releases/2026/1/PS13020-PS13039" target="_blank" rel="noreferrer noopener nofollow">wrote</a> in a statement.</p>

<p>The AGCM said the games are advertised as free-to-play but offer in-game purchases. </p>

<p>That isn’t particularly surprising, however, as, unlike full-priced games, free-to-play games have long relied on loot boxes and sales of in-game cosmetics for monetization. Diablo Immortal, for example, offers in-game cosmetics, as well as currency that allows players to accelerate their progression and gain items for crafting, for as much as $200. </p>

<p>Given the nature of the game, it’s not unusual for many users to repeatedly spend on such items in the course of play.</p>

<p>Both Diablo Immortal and Call of Duty Mobile have player bases in the hundreds of thousands. </p>

<p>The authority is also looking into the games’ parental control features, as the default settings lets minors make in-game purchases, play for long periods without restraints, and allow them to chat with others in-game. The AGCM also highlighted privacy concerns, as the games appear to lead users to select all consent options when signing up, and said it would look into the company’s consent process for harvesting and using personal data.</p>

<p>“In the Authority’s view, the company may be acting in breach of consumer protection rules and, in particular, the duty of professional diligence required in a sector that is particularly sensitive to the risks of gaming-related addiction,” the regulator said.</p>

<p>Activision Blizzard did not immediately respond to a request for comment.</p>






<div>
		
		<p>Techcrunch event</p>
		<div>
			
			<p><span>San Francisco</span>
													<span>|</span>
													<span>October 13-15, 2026</span>
							</p>
			
		</div>
	</div>
</div><div>
	
	
	
	

	
<div>
		<p>Ram is a financial and tech reporter and editor. He covered North American and European M&amp;A, equity, regulatory news and debt markets at Reuters and Acuris Global, and has also written about travel, tourism, entertainment and books.</p>

<p>You can contact or verify outreach from Ram by emailing <a href="mailto:ram.iyer@techcrunch.com">ram.iyer@techcrunch.com</a>.</p>	</div>


	
	<p>
		<a data-ctatext="View Bio" data-destinationlink="https://techcrunch.com/author/ram-iyer/" data-event="button" href="https://techcrunch.com/author/ram-iyer/">View Bio <svg style="width: 1em;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path fill="var(--c-svg, currentColor)" d="M16.5 12 9 19.5l-1.05-1.05L14.4 12 7.95 5.55 9 4.5z"></path></svg></a>
	</p>
	
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[ASCII characters are not pixels: a deep dive into ASCII rendering (927 pts)]]></title>
            <link>https://alexharri.com/blog/ascii-rendering</link>
            <guid>46657122</guid>
            <pubDate>Sat, 17 Jan 2026 11:15:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://alexharri.com/blog/ascii-rendering">https://alexharri.com/blog/ascii-rendering</a>, See on <a href="https://news.ycombinator.com/item?id=46657122">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><main>
<p>Recently, I’ve been spending my time building an image-to-ASCII renderer. Below is the result — try dragging it around, the demo is interactive!</p>

<p>One thing I spent a lot of effort on is getting edges looking sharp. Take a look at this rotating cube example:</p>

<p>Try opening the “split” view. Notice how well the characters follow the contour of the square.</p>
<p>This renderer works well for animated scenes, like the ones above, but we can also use it to render static images:</p>

<p>The image of Saturn was <a target="_blank" href="https://chatgpt.com/share/69524279-7564-800f-ae22-a2f433794abe">generated with ChatGPT</a>.</p>
<p>Then, to get better separation between different colored regions, I also implemented a <a target="_blank" href="https://en.wikipedia.org/wiki/Cel_shading">cel shading</a>-like effect to enhance contrast between edges. Try dragging the contrast slider below:</p>

<p>The contrast enhancement makes the separation between different colored regions far clearer. That was key to making the 3D scene above look as good as it does.</p>
<p>I put so much focus on sharp edges because they’re an aspect of ASCII rendering that is often overlooked when programmatically rendering images as ASCII. Consider this animated 3D scene from Cognition’s landing page that is rendered via ASCII characters:</p>

<p>Source: <a target="_blank" href="https://cognition.ai/">cognition.ai</a></p>
<p>It’s a cool effect, especially while in motion, but take a look at those blurry edges! The characters follow the cube contours very poorly, and as a result, the edges look blurry and jagged in places:</p>
<div><p><img src="https://alexharri.com/images/posts/ascii-rendering/cube-logo-zoomed-in.png" width="450"></p></div>
<p>This blurriness happens because the ASCII characters are being treated like pixels — their <em>shape</em> is ignored. It’s disappointing to see because ASCII art looks <em>so much</em> better when shape is utilized. I don’t believe I’ve ever seen shape utilized in generated ASCII art, and I think that’s because it’s not really obvious how to consider shape when building an ASCII renderer.</p>
<p>I started building my ASCII renderer to prove to myself that it’s possible to utilize shape in ASCII rendering. In this post, I’ll cover the techniques and ideas I used to capture shape and build this ASCII renderer in detail.</p>
<p>We’ll start with the basics of image-to-ASCII conversion and see where the common issue of blurry edges comes from. After that, I’ll show you the approach I used to fix that and achieve sharp, high-quality ASCII rendering. At the end, we’ll improve on that by implementing the contrast enhancement effect I showed above.</p>
<p>Let’s get to it!</p>
<h2>Image to ASCII conversion</h2>
<p>ASCII contains <a target="_blank" href="https://www.ascii-code.com/characters/printable-characters">95 printable characters</a> that we can use. Let’s start off by rendering the following image containing a white circle using those ASCII characters:</p>

<p>ASCII art is (almost) always rendered using a <a target="_blank" href="https://en.wikipedia.org/wiki/Monospaced_font">monospace</a> font. Since every character in a monospace font is equally wide and tall, we can split the image into a grid. Each grid cell will contain a single ASCII character.</p>
<p>The image with the circle is <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="9.553ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 4222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-1-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-1-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-1-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-1-TEX-N-33"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(1000,0)"></use></g><g data-mml-node="mo" transform="translate(1722.2,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(2722.4,0)"><use data-c="33" xlink:href="#MJX-1-TEX-N-33"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(1000,0)"></use></g></g></g></svg></mjx-container> pixels. For the ASCII grid, I’ll pick a row height of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.532ex" role="img" focusable="false" viewBox="0 -677 1000 677" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-2-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-2-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-2-TEX-N-32"></use><use data-c="34" xlink:href="#MJX-2-TEX-N-34" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> pixels and a column width of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-3-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-3-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-3-TEX-N-32"></use><use data-c="30" xlink:href="#MJX-3-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> pixels. That splits the canvas into <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-4-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-4-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use><use data-c="35" xlink:href="#MJX-4-TEX-N-35" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> rows and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-5-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-5-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-5-TEX-N-31"></use><use data-c="38" xlink:href="#MJX-5-TEX-N-38" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> columns — an <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="7.291ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 3222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-6-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-6-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-6-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-6-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-6-TEX-N-31"></use><use data-c="38" xlink:href="#MJX-6-TEX-N-38" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(1222.2,0)"><use data-c="D7" xlink:href="#MJX-6-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(2222.4,0)"><use data-c="31" xlink:href="#MJX-6-TEX-N-31"></use><use data-c="35" xlink:href="#MJX-6-TEX-N-35" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> grid:</p>

<p>Monospace characters are typically taller than they are wide, so I made each grid cell a bit taller than it is wide.</p>
<p>Our task is now to pick which character to place in each cell. The simplest approach is to calculate a lightness value for each cell and pick a character based on that.</p>
<p>We can get a lightness value for each cell by sampling the lightness of the pixel at the cell’s center:</p>

<p>We want each pixel’s lightness as a numeric value between <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-7-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-7-TEX-N-30"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-8-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-8-TEX-N-31"></use></g></g></g></svg></mjx-container>, but our image data consists of pixels with <a target="_blank" href="https://en.wikipedia.org/wiki/RGB_color_model">RGB</a> color values.</p>
<p>We can use the following formula to convert an RGB color (with component values between <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-9-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-9-TEX-N-30"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="3.394ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-10-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-10-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-10-TEX-N-32"></use><use data-c="35" xlink:href="#MJX-10-TEX-N-35" transform="translate(500,0)"></use><use data-c="35" xlink:href="#MJX-10-TEX-N-35" transform="translate(1000,0)"></use></g></g></g></svg></mjx-container>) to a lightness value:</p>

<p>See <a target="_blank" href="https://en.wikipedia.org/wiki/Relative_luminance#Relative_luminance_and_%22gamma_encoded%22_colorspaces">relative luminance</a>.</p>
<h3>Mapping lightness values to ASCII characters</h3>
<p>Now that we have a lightness value for each cell, we want to use those values to pick ASCII characters. As mentioned before, ASCII has 95 printable characters, but let’s start simple with just these characters:</p>

<p>We can sort them in approximate density order like so, with lower-density characters to the left, and high-density characters to the right:</p>

<p>We’ll put these characters in a <code><span>CHARS</span></code> array:</p>
<div><pre><p><span>const</span><span> </span><span>CHARS</span><span> </span><span>=</span><span> </span><span>[</span><span>" "</span><span>,</span><span> </span><span>"."</span><span>,</span><span> </span><span>":"</span><span>,</span><span> </span><span>"-"</span><span>,</span><span> </span><span>"="</span><span>,</span><span> </span><span>"+"</span><span>,</span><span> </span><span>"*"</span><span>,</span><span> </span><span>"#"</span><span>,</span><span> </span><span>"%"</span><span>,</span><span> </span><span>"@"</span><span>]</span><span></span></p></pre></div>
<p>I added space as the first (least dense) character.</p>
<p>We can then map lightness values between <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-12-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-12-TEX-N-30"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-13-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-13-TEX-N-31"></use></g></g></g></svg></mjx-container> to one of those characters like so:</p>
<div><pre><p><span>function</span><span> </span><span>getCharacterFromLightness</span><span>(</span><span>lightness</span><span>:</span><span> </span><span>number</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>const</span><span> index </span><span>=</span><span> Math</span><span>.</span><span>floor</span><span>(</span><span>lightness </span><span>*</span><span> </span><span>(</span><span>CHARS</span><span>.</span><span>length </span><span>-</span><span> </span><span>1</span><span>)</span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>return</span><span> </span><span>CHARS</span><span>[</span><span>index</span><span>]</span><span>;</span><span></span></p><p><span></span><span>}</span><span></span></p></pre></div>
<p>This maps low lightness values to low-density characters and high lightness values to high-density characters.</p>
<p>Rendering the circle from above with this method gives us:</p>

<p>That works... but the result is pretty ugly. We seem to always get <code>@</code> for cells that fall within the circle and a space for cells that fall outside.</p>
<p>That is happening because we’ve pretty much just implemented nearest-neighbor downsampling. Let’s see what that means.</p>
<h2>Nearest neighbor downsampling</h2>
<p>Downsampling, in the context of image processing, is taking a larger image (in our case, the <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="9.553ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 4222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-14-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-14-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-14-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-14-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-14-TEX-N-33"></use><use data-c="36" xlink:href="#MJX-14-TEX-N-36" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-14-TEX-N-30" transform="translate(1000,0)"></use></g><g data-mml-node="mo" transform="translate(1722.2,0)"><use data-c="D7" xlink:href="#MJX-14-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(2722.4,0)"><use data-c="33" xlink:href="#MJX-14-TEX-N-33"></use><use data-c="36" xlink:href="#MJX-14-TEX-N-36" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-14-TEX-N-30" transform="translate(1000,0)"></use></g></g></g></svg></mjx-container> image with the circle) and using that image’s data to construct a lower resolution image (in our case, the <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="7.291ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 3222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-15-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-15-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-15-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-15-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-15-TEX-N-31"></use><use data-c="38" xlink:href="#MJX-15-TEX-N-38" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(1222.2,0)"><use data-c="D7" xlink:href="#MJX-15-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(2222.4,0)"><use data-c="31" xlink:href="#MJX-15-TEX-N-31"></use><use data-c="35" xlink:href="#MJX-15-TEX-N-35" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> ASCII grid). The pixel values of the lower resolution image are calculated by sampling values from the higher resolution image.</p>
<p>The simplest and fastest method of sampling is <a target="_blank" href="https://en.wikipedia.org/wiki/Nearest-neighbor_interpolation">nearest-neighbor interpolation</a>, where, for each cell (pixel), we only take a single sample from the higher resolution image.</p>
<p>Consider the circle example again. Using nearest-neighbor interpolation, every sample either falls inside or outside of the shape, resulting in either <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.127ex" xmlns="http://www.w3.org/2000/svg" width="3.016ex" height="1.824ex" role="img" focusable="false" viewBox="0 -750 1333 806" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-16-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-16-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-16-TEX-N-30"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="25" xlink:href="#MJX-16-TEX-N-25"></use></g></g></g></svg></mjx-container> or <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.127ex" xmlns="http://www.w3.org/2000/svg" width="5.278ex" height="1.824ex" role="img" focusable="false" viewBox="0 -750 2333 806" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-17-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-17-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-17-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-17-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-17-TEX-N-30" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-17-TEX-N-30" transform="translate(1000,0)"></use></g><g data-mml-node="mi" transform="translate(1500,0)"><use data-c="25" xlink:href="#MJX-17-TEX-N-25"></use></g></g></g></svg></mjx-container> lightness:</p>

<p>If, instead of picking an ASCII character for each grid cell, we color each grid cell (pixel) according to the sampled value, we get the following pixelated rendering:</p>

<p>This pixelated rendering is pretty much equivalent to the ASCII rendering from before. The only difference is that instead of <code>@</code>s we have white pixels, and instead of spaces we have black pixels.</p>
<p>These square, jagged looking edges are aliasing artifacts, commonly called <a target="_blank" href="https://en.wikipedia.org/wiki/Jaggies">jaggies</a>. They’re a common result of using nearest-neighbor interpolation.</p>
<h3>Supersampling</h3>
<p>To get rid of jaggies, we can collect more samples for each cell. Consider this line:</p>

<p>The line’s slope on the <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.464ex" xmlns="http://www.w3.org/2000/svg" width="1.109ex" height="1.464ex" role="img" focusable="false" viewBox="0 -442 490 647" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-18-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D466" xlink:href="#MJX-18-TEX-I-1D466"></use></g></g></g></svg></mjx-container> axis is <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-1.602ex" xmlns="http://www.w3.org/2000/svg" width="3.421ex" height="4.638ex" role="img" focusable="false" viewBox="0 -1342 1512 2050" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-19-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-19-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-19-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mfrac"><g data-mml-node="mn" transform="translate(220,676)"><use data-c="31" xlink:href="#MJX-19-TEX-N-31"></use></g><g data-mml-node="mn" transform="translate(220,-686)"><use data-c="33" xlink:href="#MJX-19-TEX-N-33"></use></g><rect width="700" height="60" x="120" y="220"></rect></g></g><g data-mml-node="mi" transform="translate(940,0)"><use data-c="1D465" xlink:href="#MJX-19-TEX-I-1D465"></use></g></g></g></svg></mjx-container>. When we pixelate it with nearest-neighbor interpolation, we get the following:</p>

<p>Let’s try to get rid of the jagginess by taking multiple samples within each cell and using the average sampled lightness value as the cell’s lightness. The example below lets you vary the number of samples using the slider:</p>

<p>With multiple samples, cells that lie on the edge of a shape will have some of their samples fall within the shape, and some outside of it. Averaging those, we get gray in-between colors that smooth the downsampled image. Below is the same example, but with an overlay showing where the samples are taken:</p>

<p>This method of collecting multiple samples from the larger image is called <a target="_blank" href="https://en.wikipedia.org/wiki/Supersampling">supersampling</a>. It’s a common method of <a target="_blank" href="https://en.wikipedia.org/wiki/Spatial_anti-aliasing">spatial anti-aliasing</a> (avoiding jaggies at edges). Here’s what the rotating square looks like with supersampling (using <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-20-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-20-TEX-N-38"></use></g></g></g></svg></mjx-container> samples for each cell):</p>

<p>Let’s look at what supersampling does for the circle example from earlier. Try dragging the sample quality slider:</p>

<p>The circle becomes less jagged, but the edges feel blurry. Why’s that?</p>
<p>Well, they feel blurry because we’re pretty much just rendering a low-resolution, pixelated image of a circle. Take a look at the pixelated view:</p>

<p>The ASCII and pixelated views are mirror images of each other. Both are just low-resolution versions of the original high-resolution image, scaled up to the original’s size — it’s no wonder they both look blurry.</p>
<hr>
<p>Increasing the number of samples is insufficient. No matter how many samples we take per cell, the samples will be averaged into a single lightness value, used to render a single pixel.</p>
<p>And that’s the core problem: treating each grid cell as a pixel in an image. It’s an obvious and simple method, but it disregards that ASCII characters have shape.</p>
<p>We can make our ASCII renderings far more crisp by picking characters based on their shape. Here’s the circle rendered that way:</p>

<p>The characters follow the contour of the circle very well. By picking characters based on shape, we get a far higher <em>effective</em> resolution. The result is also more visually interesting.</p>
<p>Let’s see how we can implement this.</p>
<h2>Shape</h2>
<p>So what do I mean by shape? Well, consider the characters <code>T</code>, <code>L</code>, and <code>O</code> placed within grid cells:</p>

<p>The character <code>T</code> is top-heavy. Its visual density in the upper half of the grid cell is higher than in the lower half. The opposite can be said for <code>L</code> — it’s bottom-heavy. <code>O</code> is pretty much equally dense in the upper and lower halves of the cell.</p>
<p>We might also compare characters like <code>L</code> and <code>J</code>. The character <code>L</code> is heavier within the left half of the cell, while <code>J</code> is heavier in the right half:</p>

<p>We also have more “extreme” characters, such as <code>_</code> and <code>^</code>, that only occupy the lower or upper portion of the cell, respectively:</p>

<p>This is, roughly, what I mean by “shape” in the context of ASCII rendering. Shape refers to which regions of a cell a given character visually occupies.</p>
<h3>Quantifying shape</h3>
<p>To pick characters based on their shape, we’ll somehow need to quantify (put numbers to) the shape of each character.</p>
<p>Let’s start by only considering how much characters occupy the upper and lower regions of our cell. To do that, we’ll define two “sampling circles” for each grid cell — one placed in the upper half and one in the lower half:</p>

<p>It may seem odd or arbitrary to use circles instead of just splitting the cell into two rectangles, but using circles will give us more flexibility later on.</p>
<p>A character placed within a cell will overlap each of the cell’s sampling circles to <em>some</em> extent.</p>

<p>One can compute that overlap by taking a bunch of samples within the circle (for example, at every pixel). The fraction of samples that land inside the character gives us the overlap as a numeric value between <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-21-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-21-TEX-N-30"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-22-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-22-TEX-N-31"></use></g></g></g></svg></mjx-container>:</p>


<p>For T, we get an overlap of approximately <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="5.154ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 2278 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-24-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-24-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-24-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-24-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-24-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-24-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-24-TEX-N-2E" transform="translate(500,0)"></use><use data-c="32" xlink:href="#MJX-24-TEX-N-32" transform="translate(778,0)"></use><use data-c="36" xlink:href="#MJX-24-TEX-N-36" transform="translate(1278,0)"></use><use data-c="31" xlink:href="#MJX-24-TEX-N-31" transform="translate(1778,0)"></use></g></g></g></svg></mjx-container> for the upper circle and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="5.154ex" height="1.579ex" role="img" focusable="false" viewBox="0 -676 2278 698" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-25-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-25-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-25-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-25-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-25-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-25-TEX-N-2E" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-25-TEX-N-30" transform="translate(778,0)"></use><use data-c="39" xlink:href="#MJX-25-TEX-N-39" transform="translate(1278,0)"></use><use data-c="37" xlink:href="#MJX-25-TEX-N-37" transform="translate(1778,0)"></use></g></g></g></svg></mjx-container> for the lower. Those overlap values form a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-26-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-26-TEX-N-32"></use></g></g></g></svg></mjx-container>-dimensional vector:</p>

<p>We can generate such a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-28-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-28-TEX-N-32"></use></g></g></g></svg></mjx-container>-dimensional vector for each character within the ASCII alphabet. These vectors quantify the shape of each ASCII character along these <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-29-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-29-TEX-N-32"></use></g></g></g></svg></mjx-container> dimensions (upper and lower). I’ll call these vectors <em>shape vectors</em>.</p>
<p>Below are some ASCII characters and their shape vectors. I’m coloring the sampling circles using the component values of the shape vectors:</p>

<p>We can use the shape vectors as 2D coordinates — here’s every ASCII character on a 2D plot:</p>
<p><svg viewBox="-0.041760000000000005 0 0.47676 0.47676" preserveAspectRatio="xMidYMid meet"><defs><marker id="arrowhead" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto" viewBox="0 0 8 8"><path d="M0,0 L4,4 L0,8" stroke="#399ef4" stroke-width="1.5" fill="none"></path></marker></defs><g><line x1="0" y1="0" x2="0" y2="0.435"></line><line x1="0" y1="0.435" x2="0.435" y2="0.435"></line><line x1="0.05" y1="0" x2="0.05" y2="0.435"></line><line x1="0" y1="0.385" x2="0.435" y2="0.385"></line><line x1="0.1" y1="0" x2="0.1" y2="0.435"></line><line x1="0" y1="0.33499999999999996" x2="0.435" y2="0.33499999999999996"></line><line x1="0.15000000000000002" y1="0" x2="0.15000000000000002" y2="0.435"></line><line x1="0" y1="0.285" x2="0.435" y2="0.285"></line><line x1="0.2" y1="0" x2="0.2" y2="0.435"></line><line x1="0" y1="0.235" x2="0.435" y2="0.235"></line><line x1="0.25" y1="0" x2="0.25" y2="0.435"></line><line x1="0" y1="0.185" x2="0.435" y2="0.185"></line><line x1="0.30000000000000004" y1="0" x2="0.30000000000000004" y2="0.435"></line><line x1="0" y1="0.13499999999999995" x2="0.435" y2="0.13499999999999995"></line><line x1="0.35000000000000003" y1="0" x2="0.35000000000000003" y2="0.435"></line><line x1="0" y1="0.08499999999999996" x2="0.435" y2="0.08499999999999996"></line><line x1="0.4" y1="0" x2="0.4" y2="0.435"></line><line x1="0" y1="0.034999999999999976" x2="0.435" y2="0.034999999999999976"></line></g><g><text x="0" y="0.439176" dy="1.2em" font-size="0.010440000000000001">0</text><text x="-0.017748000000000003" y="0.435" dy="0.3em" text-anchor="end" font-size="0.010440000000000001">0</text><text x="0.05" y="0.439176" dy="1.2em" font-size="0.010440000000000001">0.05</text><text x="-0.017748000000000003" y="0.385" dy="0.3em" text-anchor="end" font-size="0.010440000000000001">0.05</text><text x="0.1" y="0.439176" dy="1.2em" font-size="0.010440000000000001">0.1</text><text x="-0.017748000000000003" y="0.33499999999999996" dy="0.3em" text-anchor="end" font-size="0.010440000000000001">0.1</text><text x="0.15000000000000002" y="0.439176" dy="1.2em" font-size="0.010440000000000001">0.15</text><text x="-0.017748000000000003" y="0.285" dy="0.3em" text-anchor="end" font-size="0.010440000000000001">0.15</text><text x="0.2" y="0.439176" dy="1.2em" font-size="0.010440000000000001">0.2</text><text x="-0.017748000000000003" y="0.235" dy="0.3em" text-anchor="end" font-size="0.010440000000000001">0.2</text><text x="0.25" y="0.439176" dy="1.2em" font-size="0.010440000000000001">0.25</text><text x="-0.017748000000000003" y="0.185" dy="0.3em" text-anchor="end" font-size="0.010440000000000001">0.25</text><text x="0.30000000000000004" y="0.439176" dy="1.2em" font-size="0.010440000000000001">0.3</text><text x="-0.017748000000000003" y="0.13499999999999995" dy="0.3em" text-anchor="end" font-size="0.010440000000000001">0.3</text><text x="0.35000000000000003" y="0.439176" dy="1.2em" font-size="0.010440000000000001">0.35</text><text x="-0.017748000000000003" y="0.08499999999999996" dy="0.3em" text-anchor="end" font-size="0.010440000000000001">0.35</text><text x="0.4" y="0.439176" dy="1.2em" font-size="0.010440000000000001">0.4</text><text x="-0.017748000000000003" y="0.034999999999999976" dy="0.3em" text-anchor="end" font-size="0.010440000000000001">0.4</text></g><text x="0.2175" y="0.470496" text-anchor="middle" font-size="0.011442240000000003">Upper</text><text x="-0.039672000000000006" y="0.2175" text-anchor="middle" dominant-baseline="middle" font-size="0.011442240000000003" transform="rotate(-90, -0.039672000000000006, 0.2175)">Lower</text><rect x="0" y="0" width="0.435" height="0.435"></rect><g><circle cx="0" cy="0.435" r="0.001525632"></circle><circle cx="0.11821758803855989" cy="0.36039838677946096" r="0.001525632"></circle><circle cx="0.1773952390320677" cy="0.435" r="0.001525632"></circle><circle cx="0.25848908125122966" cy="0.21852678864187822" r="0.001525632"></circle><circle cx="0.3255098694996394" cy="0.1731926683716965" r="0.001525632"></circle><circle cx="0.28755328218243836" cy="0.20379139615712508" r="0.001525632"></circle><circle cx="0.21459112072922823" cy="0.2507911994229129" r="0.001525632"></circle><circle cx="0.0885697422781822" cy="0.435" r="0.001525632"></circle><circle cx="0.122224408157912" cy="0.31297232605416747" r="0.001525632"></circle><circle cx="0.06432552954292085" cy="0.3624181913568103" r="0.001525632"></circle><circle cx="0" cy="0.2881969309462915" r="0.001525632"></circle><circle cx="0" cy="0.3419578333005443" r="0.001525632"></circle><circle cx="0.14572758869434063" cy="0.3142248672044068" r="0.001525632"></circle><circle cx="0.18889107482457868" cy="0.26723162174568804" r="0.001525632"></circle><circle cx="0.1893829103547775" cy="0.2670939077972325" r="0.001525632"></circle><circle cx="0.1364941963407436" cy="0.31925470522657223" r="0.001525632"></circle><circle cx="0.15455439700964002" cy="0.3025060659715392" r="0.001525632"></circle><circle cx="0.15566266640435444" cy="0.30124040920716116" r="0.001525632"></circle><circle cx="0.07777559184208799" cy="0.35706702078824837" r="0.001525632"></circle><circle cx="0.07777559184208799" cy="0.28718047085054754" r="0.001525632"></circle><circle cx="0.10804642927405075" cy="0.3261994229129779" r="0.001525632"></circle><circle cx="0.09930487245065252" cy="0.3319571775198374" r="0.001525632"></circle><circle cx="0.10855138041838808" cy="0.3248091678142829" r="0.001525632"></circle><circle cx="0.2037445078365794" cy="0.35984753098563843" r="0.001525632"></circle><circle cx="0.24616040396091562" cy="0.14953210046560428" r="0.001525632"></circle><circle cx="0.14530133123483513" cy="0.3136018755328218" r="0.001525632"></circle><circle cx="0.19216342055216742" cy="0.435" r="0.001525632"></circle><circle cx="0.05790543642206046" cy="0.435" r="0.001525632"></circle><circle cx="0.1776313200865631" cy="0.28479342907731653" r="0.001525632"></circle><circle cx="0.17881828316610926" cy="0.28443930749557345" r="0.001525632"></circle><circle cx="0.027641156797167023" cy="0.4038963210702341" r="0.001525632"></circle><circle cx="0.006675847596563709" cy="0.42262541806020065" r="0.001525632"></circle><circle cx="0" cy="0.298932061118762" r="0.001525632"></circle><circle cx="0.2652698537609022" cy="0.21760869565217386" r="0.001525632"></circle><circle cx="0.16862745098039206" cy="0.2583523509738346" r="0.001525632"></circle><circle cx="0.18839268148731061" cy="0.24143320873499924" r="0.001525632"></circle><circle cx="0.1989114040264935" cy="0.2720057052921503" r="0.001525632"></circle><circle cx="0.12333923535969571" cy="0.26068693029051104" r="0.001525632"></circle><circle cx="0.22670339038625487" cy="0.2819407830021641" r="0.001525632"></circle><circle cx="0.20956784051413202" cy="0.2563391042035543" r="0.001525632"></circle><circle cx="0.19799986884385862" cy="0.33628533018558593" r="0.001525632"></circle><circle cx="0.27226703390386253" cy="0.23941996196471899" r="0.001525632"></circle><circle cx="0.2280411830283954" cy="0.29418420880057705" r="0.001525632"></circle><circle cx="0.19589481277460816" cy="0.20369302905108527" r="0.001525632"></circle><circle cx="0.29015017378188757" cy="0.22776018099547518" r="0.001525632"></circle><circle cx="0.1701488622204735" cy="0.2751141058430061" r="0.001525632"></circle><circle cx="0.2349662272935932" cy="0.23597711325332815" r="0.001525632"></circle><circle cx="0.22486064659977736" cy="0.2638871401403372" r="0.001525632"></circle><circle cx="0.2204406846350583" cy="0.3462663125450849" r="0.001525632"></circle><circle cx="0.17966424027805114" cy="0.23707882484097315" r="0.001525632"></circle><circle cx="0.24468489737031945" cy="0.27933733359564544" r="0.001525632"></circle><circle cx="0.20061643386451578" cy="0.2530864318971735" r="0.001525632"></circle><circle cx="0.15756443045445592" cy="0.27827496885041636" r="0.001525632"></circle><circle cx="0.23382516886353202" cy="0.23113089382910354" r="0.001525632"></circle><circle cx="0.10785625286904064" cy="0.25520460358056274" r="0.001525632"></circle><circle cx="0.3290248540887927" cy="0.2380231490589548" r="0.001525632"></circle><circle cx="0.27671978490392823" cy="0.20783756311889318" r="0.001525632"></circle><circle cx="0.21219096334185844" cy="0.2547258836645026" r="0.001525632"></circle><circle cx="0.24623909764574722" cy="0.32359597350645947" r="0.001525632"></circle><circle cx="0.21066299429470783" cy="0.18520657092268344" r="0.001525632"></circle><circle cx="0.27609023542527383" cy="0.2406462718866811" r="0.001525632"></circle><circle cx="0.24087481146304673" cy="0.25970325923011345" r="0.001525632"></circle><circle cx="0.2383369401272215" cy="0.3359836710603974" r="0.001525632"></circle><circle cx="0.18660240015738727" cy="0.24563020525936127" r="0.001525632"></circle><circle cx="0.2149780313463178" cy="0.2786684372745754" r="0.001525632"></circle><circle cx="0.2771132533280871" cy="0.16859564561610602" r="0.001525632"></circle><circle cx="0.22646730933175951" cy="0.23246868647124402" r="0.001525632"></circle><circle cx="0.2390123942553611" cy="0.33364253393665155" r="0.001525632"></circle><circle cx="0.21674863925503313" cy="0.22838973047412964" r="0.001525632"></circle><circle cx="0.11309594071742411" cy="0.18910190832185725" r="0.001525632"></circle><circle cx="0.2116269919338973" cy="0.22998983539904252" r="0.001525632"></circle><circle cx="0.11532559512099155" cy="0.2847540822349006" r="0.001525632"></circle><circle cx="0.20904321594858669" cy="0.22939307495573485" r="0.001525632"></circle><circle cx="0.11894550462325396" cy="0.23684930159354708" r="0.001525632"></circle><circle cx="0.2533608761230244" cy="0.3412692635582661" r="0.001525632"></circle><circle cx="0.15601023017902813" cy="0.06340186241720747" r="0.001525632"></circle><circle cx="0.2105187225391829" cy="0.27655026559118634" r="0.001525632"></circle><circle cx="0.14461276149255692" cy="0.26013607449668846" r="0.001525632"></circle><circle cx="0.15413469735720384" cy="0.2478729752770673" r="0.001525632"></circle><circle cx="0.1931405338054954" cy="0.2340622335890878" r="0.001525632"></circle><circle cx="0.16915863335300677" cy="0.30026985376090237" r="0.001525632"></circle><circle cx="0.1696570266902748" cy="0.22629123221194838" r="0.001525632"></circle><circle cx="0.1410977769034035" cy="0.27655026559118634" r="0.001525632"></circle><circle cx="0.12373926159092398" cy="0.2493091350252475" r="0.001525632"></circle><circle cx="0.14038953373991736" cy="0.16158534985900724" r="0.001525632"></circle><circle cx="0.13718932389009109" cy="0.15843104465866636" r="0.001525632"></circle><circle cx="0.16752573939274704" cy="0.29740409207161134" r="0.001525632"></circle><circle cx="0.11361400747590003" cy="0.22793724178634653" r="0.001525632"></circle><circle cx="0.1711522067020787" cy="0.29528592038822216" r="0.001525632"></circle><circle cx="0.09076004983933374" cy="0.2272224408157912" r="0.001525632"></circle><circle cx="0.09908190701029577" cy="0.2779601941110893" r="0.001525632"></circle><circle cx="0.09757361138435307" cy="0.17291068266771598" r="0.001525632"></circle><circle cx="0.12972653944520954" cy="0.23848219555380687" r="0.001525632"></circle><circle cx="0.09931798806479115" cy="0.19530559380943008" r="0.001525632"></circle><circle cx="0.1428487113909108" cy="0.24596465341989657" r="0.001525632"></circle></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.18262822055216743" y="0.41020848" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.19216342055216742" y="0.41974368" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">^</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.23662520396091563" y="0.1247405804656043" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.24616040396091562" y="0.1342757804656043" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">@</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.1276541238900911" y="0.13363952465866638" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.13718932389009109" y="0.14317472465866637" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">q</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.22880174012722151" y="0.3111921510603974" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.2383369401272215" y="0.3207273510603974" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">T</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.31948965408879265" y="0.21323162905895482" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.3290248540887927" y="0.2227668290589548" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">M</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.08122484983933374" y="0.20243092081579123" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.09076004983933374" y="0.21196612081579122" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">u</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.21693210933175952" y="0.20767716647124404" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.22646730933175951" y="0.21721236647124403" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">X</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.31597466949963937" y="0.14840114837169652" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.3255098694996394" y="0.1579363483716965" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">$</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.14647503017902813" y="0.03861034241720746" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.15601023017902813" y="0.04814554241720746" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">g</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.08976967245065252" y="0.3071656575198374" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.09930487245065252" y="0.3167008575198374" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">=</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.16061366222047352" y="0.2503225858430061" width="0.019070399999999998" height="0.019070399999999998" rx="0.0023837999999999997"></rect><text x="0.1701488622204735" y="0.2598577858430061" text-anchor="middle" dominant-baseline="middle" font-size="0.015892">C</text></g></svg></p>
<h3>Shape-based lookup</h3>
<p>Let’s say that we have our ASCII characters and their associated shape vectors in a <code><span>CHARACTERS</span></code> array:</p>
<div><pre><p><span>const</span><span> </span><span>CHARACTERS</span><span>:</span><span> </span><span>Array</span><span>&lt;</span><span>{</span><span></span></p><p><span>  character</span><span>:</span><span> </span><span>string</span><span>,</span><span></span></p><p><span>  shapeVector</span><span>:</span><span> </span><span>number</span><span>[</span><span>]</span><span>,</span><span></span></p><p><span></span><span>}</span><span>&gt;</span><span> </span><span>=</span><span> </span><span>[</span><span>...</span><span>]</span><span>;</span><span></span></p></pre></div>
<p>We can then perform a nearest neighbor search like so:</p>
<div><pre><p><span>function</span><span> </span><span>findBestCharacter</span><span>(</span><span>inputVector</span><span>:</span><span> </span><span>number</span><span>[</span><span>]</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>let</span><span> bestCharacter </span><span>=</span><span> </span><span>""</span><span>;</span><span></span></p><p><span>  </span><span>let</span><span> bestDistance </span><span>=</span><span> </span><span>Infinity</span><span>;</span><span></span></p><p><span>  </span><span>for</span><span> </span><span>(</span><span>const</span><span> </span><span>{</span><span> character</span><span>,</span><span> shapeVector </span><span>}</span><span> </span><span>of</span><span> </span><span>CHARACTERS</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>const</span><span> dist </span><span>=</span><span> </span><span>getDistance</span><span>(</span><span>shapeVector</span><span>,</span><span> inputVector</span><span>)</span><span>;</span><span></span></p><p><span>    </span><span>if</span><span> </span><span>(</span><span>dist </span><span>&lt;</span><span> bestDistance</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>      bestDistance </span><span>=</span><span> dist</span><span>;</span><span></span></p><p><span>      bestCharacter </span><span>=</span><span> character</span><span>;</span><span></span></p><p><span>    </span><span>}</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>return</span><span> bestCharacter</span><span>;</span><span></span></p><p><span></span><span>}</span><span></span></p></pre></div>
<p>The <code><span>findBestCharacter</span></code> function gives us the ASCII character whose shape best matches the input lookup vector.</p>
<p>Note: this brute force search is not very performant. This becomes a bottleneck when we start rendering thousands of ASCII characters at <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-30-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-30-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-30-TEX-N-36"></use><use data-c="30" xlink:href="#MJX-30-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> <abbr title="Frames per second">FPS</abbr>. I’ll talk more about this later.</p>
<p>To make use of this in our ASCII renderer, we’ll calculate a lookup vector for each cell in the ASCII grid and pass it to <code><span>findBestCharacter</span></code> to determine the character to display.</p>
<p>Let’s try it out. Consider the following zoomed-in circle as an example. It is split into three grid cells:</p>

<p>Overlaying our sampling circles, we see varying degrees of overlap:</p>

<p>When calculating the shape vector of each ASCII character, we took a huge number of samples. We could afford to do that because we only need to calculate those shape vectors once up front. After they’re calculated, we can use them again and again.</p>
<p>However, if we’re converting an animated image (e.g. canvas or video) to ASCII, we need to be mindful of performance when calculating the lookup vectors. An ASCII rendering might have hundreds or thousands of cells. Multiplying that by tens or hundreds of samples would be incredibly costly in terms of performance.</p>
<p>With that being said, let’s pick a sampling quality of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.554ex" role="img" focusable="false" viewBox="0 -665 500 687" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-31-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-31-TEX-N-33"></use></g></g></g></svg></mjx-container> with the samples placed like so:</p>

<p>For the top sampling circle of the leftmost cell, we get one white sample and two black, giving us an average lightness of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="4.023ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1778 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-32-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-32-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-32-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-32-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-32-TEX-N-2E" transform="translate(500,0)"></use><use data-c="33" xlink:href="#MJX-32-TEX-N-33" transform="translate(778,0)"></use><use data-c="33" xlink:href="#MJX-32-TEX-N-33" transform="translate(1278,0)"></use></g></g></g></svg></mjx-container>. Doing the same calculation for all of the sampling circles, we get the following 2D vectors:</p>

<p>From now on, instead of using the term “lookup vectors”, I’ll call these vectors, sampled from the image that we’re rendering as ASCII, <em>sampling vectors</em>. One sampling vector is calculated for each cell in the grid.</p>
<p>Anyway, we can use these sampling vectors to find the best-matching ASCII character. Let’s see what that looks like on our 2D plot — I’ll label the sampling vectors (from left to right) C0, C1, and C2:</p>
<p><svg viewBox="-0.096 0 1.096 1.096" preserveAspectRatio="xMidYMid meet"><defs><marker id="arrowhead" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto" viewBox="0 0 8 8"><path d="M0,0 L4,4 L0,8" stroke="#399ef4" stroke-width="1.5" fill="none"></path></marker></defs><g><line x1="0" y1="0" x2="0" y2="1"></line><line x1="0" y1="1" x2="1" y2="1"></line><line x1="0.1" y1="0" x2="0.1" y2="1"></line><line x1="0" y1="0.9" x2="1" y2="0.9"></line><line x1="0.2" y1="0" x2="0.2" y2="1"></line><line x1="0" y1="0.8" x2="1" y2="0.8"></line><line x1="0.30000000000000004" y1="0" x2="0.30000000000000004" y2="1"></line><line x1="0" y1="0.7" x2="1" y2="0.7"></line><line x1="0.4" y1="0" x2="0.4" y2="1"></line><line x1="0" y1="0.6" x2="1" y2="0.6"></line><line x1="0.5" y1="0" x2="0.5" y2="1"></line><line x1="0" y1="0.5" x2="1" y2="0.5"></line><line x1="0.6000000000000001" y1="0" x2="0.6000000000000001" y2="1"></line><line x1="0" y1="0.3999999999999999" x2="1" y2="0.3999999999999999"></line><line x1="0.7000000000000001" y1="0" x2="0.7000000000000001" y2="1"></line><line x1="0" y1="0.29999999999999993" x2="1" y2="0.29999999999999993"></line><line x1="0.8" y1="0" x2="0.8" y2="1"></line><line x1="0" y1="0.19999999999999996" x2="1" y2="0.19999999999999996"></line><line x1="0.9" y1="0" x2="0.9" y2="1"></line><line x1="0" y1="0.09999999999999998" x2="1" y2="0.09999999999999998"></line><line x1="1" y1="0" x2="1" y2="1"></line><line x1="0" y1="0" x2="1" y2="0"></line></g><g><text x="0" y="1.0096" dy="1.2em" font-size="0.024">0</text><text x="-0.0408" y="1" dy="0.3em" text-anchor="end" font-size="0.024">0</text><text x="0.1" y="1.0096" dy="1.2em" font-size="0.024">0.1</text><text x="-0.0408" y="0.9" dy="0.3em" text-anchor="end" font-size="0.024">0.1</text><text x="0.2" y="1.0096" dy="1.2em" font-size="0.024">0.2</text><text x="-0.0408" y="0.8" dy="0.3em" text-anchor="end" font-size="0.024">0.2</text><text x="0.30000000000000004" y="1.0096" dy="1.2em" font-size="0.024">0.3</text><text x="-0.0408" y="0.7" dy="0.3em" text-anchor="end" font-size="0.024">0.3</text><text x="0.4" y="1.0096" dy="1.2em" font-size="0.024">0.4</text><text x="-0.0408" y="0.6" dy="0.3em" text-anchor="end" font-size="0.024">0.4</text><text x="0.5" y="1.0096" dy="1.2em" font-size="0.024">0.5</text><text x="-0.0408" y="0.5" dy="0.3em" text-anchor="end" font-size="0.024">0.5</text><text x="0.6000000000000001" y="1.0096" dy="1.2em" font-size="0.024">0.6</text><text x="-0.0408" y="0.3999999999999999" dy="0.3em" text-anchor="end" font-size="0.024">0.6</text><text x="0.7000000000000001" y="1.0096" dy="1.2em" font-size="0.024">0.7</text><text x="-0.0408" y="0.29999999999999993" dy="0.3em" text-anchor="end" font-size="0.024">0.7</text><text x="0.8" y="1.0096" dy="1.2em" font-size="0.024">0.8</text><text x="-0.0408" y="0.19999999999999996" dy="0.3em" text-anchor="end" font-size="0.024">0.8</text><text x="0.9" y="1.0096" dy="1.2em" font-size="0.024">0.9</text><text x="-0.0408" y="0.09999999999999998" dy="0.3em" text-anchor="end" font-size="0.024">0.9</text><text x="1" y="1.0096" dy="1.2em" font-size="0.024">1</text><text x="-0.0408" y="0" dy="0.3em" text-anchor="end" font-size="0.024">1</text></g><text x="0.5" y="1.0816" text-anchor="middle" font-size="0.026304000000000004">Upper</text><text x="-0.0912" y="0.5" text-anchor="middle" dominant-baseline="middle" font-size="0.026304000000000004" transform="rotate(-90, -0.0912, 0.5)">Lower</text><rect x="0" y="0" width="1" height="1"></rect><g><circle cx="0" cy="1" r="0.0035072000000000007"></circle><circle cx="0.11821758803855989" cy="0.925398386779461" r="0.0035072000000000007"></circle><circle cx="0.1773952390320677" cy="1" r="0.0035072000000000007"></circle><circle cx="0.25848908125122966" cy="0.7835267886418782" r="0.0035072000000000007"></circle><circle cx="0.3255098694996394" cy="0.7381926683716965" r="0.0035072000000000007"></circle><circle cx="0.28755328218243836" cy="0.7687913961571251" r="0.0035072000000000007"></circle><circle cx="0.21459112072922823" cy="0.8157911994229129" r="0.0035072000000000007"></circle><circle cx="0.0885697422781822" cy="1" r="0.0035072000000000007"></circle><circle cx="0.122224408157912" cy="0.8779723260541675" r="0.0035072000000000007"></circle><circle cx="0.06432552954292085" cy="0.9274181913568103" r="0.0035072000000000007"></circle><circle cx="0" cy="0.8531969309462915" r="0.0035072000000000007"></circle><circle cx="0" cy="0.9069578333005444" r="0.0035072000000000007"></circle><circle cx="0.14572758869434063" cy="0.8792248672044068" r="0.0035072000000000007"></circle><circle cx="0.18889107482457868" cy="0.8322316217456881" r="0.0035072000000000007"></circle><circle cx="0.1893829103547775" cy="0.8320939077972325" r="0.0035072000000000007"></circle><circle cx="0.1364941963407436" cy="0.8842547052265722" r="0.0035072000000000007"></circle><circle cx="0.15455439700964002" cy="0.8675060659715391" r="0.0035072000000000007"></circle><circle cx="0.15566266640435444" cy="0.8662404092071612" r="0.0035072000000000007"></circle><circle cx="0.07777559184208799" cy="0.9220670207882484" r="0.0035072000000000007"></circle><circle cx="0.07777559184208799" cy="0.8521804708505476" r="0.0035072000000000007"></circle><circle cx="0.10804642927405075" cy="0.8911994229129778" r="0.0035072000000000007"></circle><circle cx="0.09930487245065252" cy="0.8969571775198374" r="0.0035072000000000007"></circle><circle cx="0.10855138041838808" cy="0.8898091678142829" r="0.0035072000000000007"></circle><circle cx="0.2037445078365794" cy="0.9248475309856384" r="0.0035072000000000007"></circle><circle cx="0.24616040396091562" cy="0.7145321004656042" r="0.0035072000000000007"></circle><circle cx="0.14530133123483513" cy="0.8786018755328219" r="0.0035072000000000007"></circle><circle cx="0.19216342055216742" cy="1" r="0.0035072000000000007"></circle><circle cx="0.05790543642206046" cy="1" r="0.0035072000000000007"></circle><circle cx="0.1776313200865631" cy="0.8497934290773165" r="0.0035072000000000007"></circle><circle cx="0.17881828316610926" cy="0.8494393074955735" r="0.0035072000000000007"></circle><circle cx="0.027641156797167023" cy="0.9688963210702342" r="0.0035072000000000007"></circle><circle cx="0.006675847596563709" cy="0.9876254180602007" r="0.0035072000000000007"></circle><circle cx="0" cy="0.863932061118762" r="0.0035072000000000007"></circle><circle cx="0.2652698537609022" cy="0.7826086956521738" r="0.0035072000000000007"></circle><circle cx="0.16862745098039206" cy="0.8233523509738346" r="0.0035072000000000007"></circle><circle cx="0.18839268148731061" cy="0.8064332087349992" r="0.0035072000000000007"></circle><circle cx="0.1989114040264935" cy="0.8370057052921503" r="0.0035072000000000007"></circle><circle cx="0.12333923535969571" cy="0.825686930290511" r="0.0035072000000000007"></circle><circle cx="0.22670339038625487" cy="0.846940783002164" r="0.0035072000000000007"></circle><circle cx="0.20956784051413202" cy="0.8213391042035544" r="0.0035072000000000007"></circle><circle cx="0.19799986884385862" cy="0.9012853301855859" r="0.0035072000000000007"></circle><circle cx="0.27226703390386253" cy="0.804419961964719" r="0.0035072000000000007"></circle><circle cx="0.2280411830283954" cy="0.859184208800577" r="0.0035072000000000007"></circle><circle cx="0.19589481277460816" cy="0.7686930290510853" r="0.0035072000000000007"></circle><circle cx="0.29015017378188757" cy="0.7927601809954752" r="0.0035072000000000007"></circle><circle cx="0.1701488622204735" cy="0.8401141058430062" r="0.0035072000000000007"></circle><circle cx="0.2349662272935932" cy="0.8009771132533281" r="0.0035072000000000007"></circle><circle cx="0.22486064659977736" cy="0.8288871401403373" r="0.0035072000000000007"></circle><circle cx="0.2204406846350583" cy="0.9112663125450849" r="0.0035072000000000007"></circle><circle cx="0.17966424027805114" cy="0.8020788248409731" r="0.0035072000000000007"></circle><circle cx="0.24468489737031945" cy="0.8443373335956454" r="0.0035072000000000007"></circle><circle cx="0.20061643386451578" cy="0.8180864318971734" r="0.0035072000000000007"></circle><circle cx="0.15756443045445592" cy="0.8432749688504164" r="0.0035072000000000007"></circle><circle cx="0.23382516886353202" cy="0.7961308938291035" r="0.0035072000000000007"></circle><circle cx="0.10785625286904064" cy="0.8202046035805628" r="0.0035072000000000007"></circle><circle cx="0.3290248540887927" cy="0.8030231490589548" r="0.0035072000000000007"></circle><circle cx="0.27671978490392823" cy="0.7728375631188932" r="0.0035072000000000007"></circle><circle cx="0.21219096334185844" cy="0.8197258836645026" r="0.0035072000000000007"></circle><circle cx="0.24623909764574722" cy="0.8885959735064595" r="0.0035072000000000007"></circle><circle cx="0.21066299429470783" cy="0.7502065709226835" r="0.0035072000000000007"></circle><circle cx="0.27609023542527383" cy="0.8056462718866811" r="0.0035072000000000007"></circle><circle cx="0.24087481146304673" cy="0.8247032592301135" r="0.0035072000000000007"></circle><circle cx="0.2383369401272215" cy="0.9009836710603973" r="0.0035072000000000007"></circle><circle cx="0.18660240015738727" cy="0.8106302052593612" r="0.0035072000000000007"></circle><circle cx="0.2149780313463178" cy="0.8436684372745754" r="0.0035072000000000007"></circle><circle cx="0.2771132533280871" cy="0.733595645616106" r="0.0035072000000000007"></circle><circle cx="0.22646730933175951" cy="0.797468686471244" r="0.0035072000000000007"></circle><circle cx="0.2390123942553611" cy="0.8986425339366515" r="0.0035072000000000007"></circle><circle cx="0.21674863925503313" cy="0.7933897304741296" r="0.0035072000000000007"></circle><circle cx="0.11309594071742411" cy="0.7541019083218572" r="0.0035072000000000007"></circle><circle cx="0.2116269919338973" cy="0.7949898353990426" r="0.0035072000000000007"></circle><circle cx="0.11532559512099155" cy="0.8497540822349007" r="0.0035072000000000007"></circle><circle cx="0.20904321594858669" cy="0.7943930749557349" r="0.0035072000000000007"></circle><circle cx="0.11894550462325396" cy="0.8018493015935471" r="0.0035072000000000007"></circle><circle cx="0.2533608761230244" cy="0.9062692635582661" r="0.0035072000000000007"></circle><circle cx="0.15601023017902813" cy="0.6284018624172074" r="0.0035072000000000007"></circle><circle cx="0.2105187225391829" cy="0.8415502655911863" r="0.0035072000000000007"></circle><circle cx="0.14461276149255692" cy="0.8251360744966885" r="0.0035072000000000007"></circle><circle cx="0.15413469735720384" cy="0.8128729752770674" r="0.0035072000000000007"></circle><circle cx="0.1931405338054954" cy="0.7990622335890878" r="0.0035072000000000007"></circle><circle cx="0.16915863335300677" cy="0.8652698537609024" r="0.0035072000000000007"></circle><circle cx="0.1696570266902748" cy="0.7912912322119484" r="0.0035072000000000007"></circle><circle cx="0.1410977769034035" cy="0.8415502655911863" r="0.0035072000000000007"></circle><circle cx="0.12373926159092398" cy="0.8143091350252475" r="0.0035072000000000007"></circle><circle cx="0.14038953373991736" cy="0.7265853498590072" r="0.0035072000000000007"></circle><circle cx="0.13718932389009109" cy="0.7234310446586664" r="0.0035072000000000007"></circle><circle cx="0.16752573939274704" cy="0.8624040920716114" r="0.0035072000000000007"></circle><circle cx="0.11361400747590003" cy="0.7929372417863465" r="0.0035072000000000007"></circle><circle cx="0.1711522067020787" cy="0.8602859203882222" r="0.0035072000000000007"></circle><circle cx="0.09076004983933374" cy="0.7922224408157912" r="0.0035072000000000007"></circle><circle cx="0.09908190701029577" cy="0.8429601941110892" r="0.0035072000000000007"></circle><circle cx="0.09757361138435307" cy="0.737910682667716" r="0.0035072000000000007"></circle><circle cx="0.12972653944520954" cy="0.8034821955538068" r="0.0035072000000000007"></circle><circle cx="0.09931798806479115" cy="0.7603055938094301" r="0.0035072000000000007"></circle><circle cx="0.1428487113909108" cy="0.8109646534198965" r="0.0035072000000000007"></circle></g><g><line x1="0.33" y1="1" x2="0.26261100017213196" y2="0.9175822965816084" marker-end="url(#arrowhead)"></line><circle cx="0.33" cy="1" r="0.004384000000000001"></circle><text x="0.33" y="0.9766186666666666" text-anchor="middle" dominant-baseline="auto" font-size="0.023381333333333337">C0</text></g><g><line x1="1" y1="0.6699999999999999" x2="0.3400490838358168" y2="0.7367227168086151" marker-end="url(#arrowhead)"></line><circle cx="1" cy="0.6699999999999999" r="0.004384000000000001"></circle><text x="1" y="0.6466186666666666" text-anchor="end" dominant-baseline="auto" font-size="0.023381333333333337">C1</text></g><g><line x1="1" y1="0.33999999999999997" x2="0.33809389561120473" y2="0.7307635501242493" marker-end="url(#arrowhead)"></line><circle cx="1" cy="0.33999999999999997" r="0.004384000000000001"></circle><text x="1" y="0.3166186666666666" text-anchor="end" dominant-baseline="auto" font-size="0.023381333333333337">C2</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.22431909764574723" y="0.8316039735064594" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.24623909764574722" y="0.8535239735064595" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">P</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.3035898694996394" y="0.6812006683716965" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.3255098694996394" y="0.7031206683716965" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">$</text></g></svg></p>
<p>Hmm... this is not what we want. Since none of the ASCII shape vector components exceed <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.891ex" height="1.581ex" role="img" focusable="false" viewBox="0 -677 1278 699" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-34-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-34-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-34-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-34-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-34-TEX-N-2E" transform="translate(500,0)"></use><use data-c="34" xlink:href="#MJX-34-TEX-N-34" transform="translate(778,0)"></use></g></g></g></svg></mjx-container>, they’re all clustered towards the bottom-left region of our plot. This makes our sampling vectors map to a few characters on the edge of the cluster.</p>
<p>We can fix this by <em>normalizing</em> the shape vectors. We’ll do that by taking the maximum value of each component across all shape vectors, and dividing the components of each shape vector by the maximum. Expressed in code, that looks like so:</p>
<div><pre><p><span>const</span><span> max </span><span>=</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>]</span><span></span></p><p><span></span><span>for</span><span> </span><span>(</span><span>const</span><span> vector </span><span>of</span><span> characterVectors</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>for</span><span> </span><span>(</span><span>const</span><span> </span><span>[</span><span>i</span><span>,</span><span> value</span><span>]</span><span> </span><span>of</span><span> Object</span><span>.</span><span>entries</span><span>(</span><span>vector</span><span>)</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>if</span><span> </span><span>(</span><span>value </span><span>&gt;</span><span> max</span><span>[</span><span>i</span><span>]</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>      max</span><span>[</span><span>i</span><span>]</span><span> </span><span>=</span><span> value</span><span>;</span><span></span></p><p><span>    </span><span>}</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span></span><span>}</span><span></span></p><p><span></span><span>const</span><span> normalizedCharacterVectors </span><span>=</span><span> characterVectors</span><span>.</span><span>map</span><span>(</span><span></span></p><p><span>  vector </span><span>=&gt;</span><span> vector</span><span>.</span><span>map</span><span>(</span><span>(</span><span>value</span><span>,</span><span> i</span><span>)</span><span> </span><span>=&gt;</span><span> value </span><span>/</span><span> max</span><span>[</span><span>i</span><span>]</span><span>)</span><span></span></p><p><span></span><span>)</span><span></span></p></pre></div>
<p>Here’s what the plot looks like with the shape vectors normalized:</p>
<p><svg viewBox="-0.096 0 1.096 1.096" preserveAspectRatio="xMidYMid meet"><defs><marker id="arrowhead" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto" viewBox="0 0 8 8"><path d="M0,0 L4,4 L0,8" stroke="#399ef4" stroke-width="1.5" fill="none"></path></marker></defs><g><line x1="0" y1="0" x2="0" y2="1"></line><line x1="0" y1="1" x2="1" y2="1"></line><line x1="0.1" y1="0" x2="0.1" y2="1"></line><line x1="0" y1="0.9" x2="1" y2="0.9"></line><line x1="0.2" y1="0" x2="0.2" y2="1"></line><line x1="0" y1="0.8" x2="1" y2="0.8"></line><line x1="0.30000000000000004" y1="0" x2="0.30000000000000004" y2="1"></line><line x1="0" y1="0.7" x2="1" y2="0.7"></line><line x1="0.4" y1="0" x2="0.4" y2="1"></line><line x1="0" y1="0.6" x2="1" y2="0.6"></line><line x1="0.5" y1="0" x2="0.5" y2="1"></line><line x1="0" y1="0.5" x2="1" y2="0.5"></line><line x1="0.6000000000000001" y1="0" x2="0.6000000000000001" y2="1"></line><line x1="0" y1="0.3999999999999999" x2="1" y2="0.3999999999999999"></line><line x1="0.7000000000000001" y1="0" x2="0.7000000000000001" y2="1"></line><line x1="0" y1="0.29999999999999993" x2="1" y2="0.29999999999999993"></line><line x1="0.8" y1="0" x2="0.8" y2="1"></line><line x1="0" y1="0.19999999999999996" x2="1" y2="0.19999999999999996"></line><line x1="0.9" y1="0" x2="0.9" y2="1"></line><line x1="0" y1="0.09999999999999998" x2="1" y2="0.09999999999999998"></line><line x1="1" y1="0" x2="1" y2="1"></line><line x1="0" y1="0" x2="1" y2="0"></line></g><g><text x="0" y="1.0096" dy="1.2em" font-size="0.024">0</text><text x="-0.0408" y="1" dy="0.3em" text-anchor="end" font-size="0.024">0</text><text x="0.1" y="1.0096" dy="1.2em" font-size="0.024">0.1</text><text x="-0.0408" y="0.9" dy="0.3em" text-anchor="end" font-size="0.024">0.1</text><text x="0.2" y="1.0096" dy="1.2em" font-size="0.024">0.2</text><text x="-0.0408" y="0.8" dy="0.3em" text-anchor="end" font-size="0.024">0.2</text><text x="0.30000000000000004" y="1.0096" dy="1.2em" font-size="0.024">0.3</text><text x="-0.0408" y="0.7" dy="0.3em" text-anchor="end" font-size="0.024">0.3</text><text x="0.4" y="1.0096" dy="1.2em" font-size="0.024">0.4</text><text x="-0.0408" y="0.6" dy="0.3em" text-anchor="end" font-size="0.024">0.4</text><text x="0.5" y="1.0096" dy="1.2em" font-size="0.024">0.5</text><text x="-0.0408" y="0.5" dy="0.3em" text-anchor="end" font-size="0.024">0.5</text><text x="0.6000000000000001" y="1.0096" dy="1.2em" font-size="0.024">0.6</text><text x="-0.0408" y="0.3999999999999999" dy="0.3em" text-anchor="end" font-size="0.024">0.6</text><text x="0.7000000000000001" y="1.0096" dy="1.2em" font-size="0.024">0.7</text><text x="-0.0408" y="0.29999999999999993" dy="0.3em" text-anchor="end" font-size="0.024">0.7</text><text x="0.8" y="1.0096" dy="1.2em" font-size="0.024">0.8</text><text x="-0.0408" y="0.19999999999999996" dy="0.3em" text-anchor="end" font-size="0.024">0.8</text><text x="0.9" y="1.0096" dy="1.2em" font-size="0.024">0.9</text><text x="-0.0408" y="0.09999999999999998" dy="0.3em" text-anchor="end" font-size="0.024">0.9</text><text x="1" y="1.0096" dy="1.2em" font-size="0.024">1</text><text x="-0.0408" y="0" dy="0.3em" text-anchor="end" font-size="0.024">1</text></g><text x="0.5" y="1.0816" text-anchor="middle" font-size="0.026304000000000004">Upper</text><text x="-0.0912" y="0.5" text-anchor="middle" dominant-baseline="middle" font-size="0.026304000000000004" transform="rotate(-90, -0.0912, 0.5)">Lower</text><rect x="0" y="0" width="1" height="1"></rect><g><circle cx="0" cy="1" r="0.0035072000000000007"></circle><circle cx="0.35929683295796544" cy="0.7992411541515928" r="0.0035072000000000007"></circle><circle cx="0.5391545253423157" cy="1" r="0.0035072000000000007"></circle><circle cx="0.7856217487493277" cy="0.41745345451336857" r="0.0035072000000000007"></circle><circle cx="0.9893169633069583" cy="0.29545574869849156" r="0.0035072000000000007"></circle><circle cx="0.8739561118529893" cy="0.37779934703961926" r="0.0035072000000000007"></circle><circle cx="0.6522033763179402" cy="0.5042795376334599" r="0.0035072000000000007"></circle><circle cx="0.26918860741833267" cy="1" r="0.0035072000000000007"></circle><circle cx="0.3714746975464892" cy="0.671613870996206" r="0.0035072000000000007"></circle><circle cx="0.1955035576903913" cy="0.8046766081355335" r="0.0035072000000000007"></circle><circle cx="0" cy="0.6049413218035824" r="0.0035072000000000007"></circle><circle cx="0" cy="0.749616165181329" r="0.0035072000000000007"></circle><circle cx="0.4429075399119049" cy="0.6749845583693639" r="0.0035072000000000007"></circle><circle cx="0.574093636019373" cy="0.5485220153533925" r="0.0035072000000000007"></circle><circle cx="0.5755884639148551" cy="0.5481514162181241" r="0.0035072000000000007"></circle><circle cx="0.41484463755406287" cy="0.688520250595606" r="0.0035072000000000007"></circle><circle cx="0.46973471787614873" cy="0.643448336715786" r="0.0035072000000000007"></circle><circle cx="0.473103063400634" cy="0.6400423541868882" r="0.0035072000000000007"></circle><circle cx="0.2363821178721623" cy="0.7902761845936646" r="0.0035072000000000007"></circle><circle cx="0.2363821178721623" cy="0.6022059472337424" r="0.0035072000000000007"></circle><circle cx="0.32838379207940527" cy="0.7072090355598695" r="0.0035072000000000007"></circle><circle cx="0.3018157176170451" cy="0.7227036089296746" r="0.0035072000000000007"></circle><circle cx="0.3299184820520997" cy="0.7034677490514428" r="0.0035072000000000007"></circle><circle cx="0.6192374384629182" cy="0.7977587576105181" r="0.0035072000000000007"></circle><circle cx="0.748151396169255" cy="0.23178328774375756" r="0.0035072000000000007"></circle><circle cx="0.4416120224024876" cy="0.67330803847172" r="0.0035072000000000007"></circle><circle cx="0.5840392242839777" cy="1" r="0.0035072000000000007"></circle><circle cx="0.17599107089470434" cy="1" r="0.0035072000000000007"></circle><circle cx="0.539872042732147" cy="0.595782228889085" r="0.0035072000000000007"></circle><circle cx="0.5434795607199092" cy="0.5948292596841085" r="0.0035072000000000007"></circle><circle cx="0.0840093277260678" cy="0.9162975381628872" r="0.0035072000000000007"></circle><circle cx="0.020289797301337377" cy="0.9666990205594282" r="0.0035072000000000007"></circle><circle cx="0" cy="0.6338304067766705" r="0.0035072000000000007"></circle><circle cx="0.806230442668367" cy="0.41498279361157697" r="0.0035072000000000007"></circle><circle cx="0.5125067267255294" cy="0.5246271949174985" r="0.0035072000000000007"></circle><circle cx="0.5725788770852849" cy="0.47909644401306006" r="0.0035072000000000007"></circle><circle cx="0.6045482630099853" cy="0.5613694520427075" r="0.0035072000000000007"></circle><circle cx="0.37486297410958086" cy="0.530909732639196" r="0.0035072000000000007"></circle><circle cx="0.6890160046240011" cy="0.5881055325156624" r="0.0035072000000000007"></circle><circle cx="0.6369362007454208" cy="0.5192093885114272" r="0.0035072000000000007"></circle><circle cx="0.6017778486436929" cy="0.7343510103238332" r="0.0035072000000000007"></circle><circle cx="0.8274968608614195" cy="0.4736786376069887" r="0.0035072000000000007"></circle><circle cx="0.6930819364997114" cy="0.6210535603988354" r="0.0035072000000000007"></circle><circle cx="0.5953799852510314" cy="0.37753463337157" r="0.0035072000000000007"></circle><circle cx="0.8818488031411325" cy="0.4423012441542403" r="0.0035072000000000007"></circle><circle cx="0.5171307276822197" cy="0.5697344039530577" r="0.0035072000000000007"></circle><circle cx="0.714129113268093" cy="0.4644136592252718" r="0.0035072000000000007"></circle><circle cx="0.6834153827755975" cy="0.5395217506397254" r="0.0035072000000000007"></circle><circle cx="0.669981862754869" cy="0.7612106238418778" r="0.0035072000000000007"></circle><circle cx="0.546050664700138" cy="0.46737845230742103" r="0.0035072000000000007"></circle><circle cx="0.7436669124828098" cy="0.5810994441012969" r="0.0035072000000000007"></circle><circle cx="0.6097303330476553" cy="0.510456189887938" r="0.0035072000000000007"></circle><circle cx="0.4788830645964958" cy="0.5782405364863674" r="0.0035072000000000007"></circle><circle cx="0.7106611125505751" cy="0.4513720991793879" r="0.0035072000000000007"></circle><circle cx="0.32780579195981924" cy="0.5161563575399282" r="0.0035072000000000007"></circle><circle cx="1" cy="0.46991970352069246" r="0.0035072000000000007"></circle><circle cx="0.8410300360751803" cy="0.3886879025853709" r="0.0035072000000000007"></circle><circle cx="0.6449086161879894" cy="0.5148680843554225" r="0.0035072000000000007"></circle><circle cx="0.7483905686325314" cy="0.7002029471455046" r="0.0035072000000000007"></circle><circle cx="0.6402646841926933" cy="0.3277861113562167" r="0.0035072000000000007"></circle><circle cx="0.8391166563689636" cy="0.47697873466866714" r="0.0035072000000000007"></circle><circle cx="0.7320869790524784" cy="0.528262595958705" r="0.0035072000000000007"></circle><circle cx="0.7243736671117934" cy="0.7335392217418161" r="0.0035072000000000007"></circle><circle cx="0.5671377035457316" cy="0.4903908938498194" r="0.0035072000000000007"></circle><circle cx="0.6533793075957189" cy="0.5792993911585638" r="0.0035072000000000007"></circle><circle cx="0.8422258983915654" cy="0.28308479661166563" r="0.0035072000000000007"></circle><circle cx="0.68829848723417" cy="0.45497220506485514" r="0.0035072000000000007"></circle><circle cx="0.726426564088255" cy="0.7272390364422483" r="0.0035072000000000007"></circle><circle cx="0.6587606880194528" cy="0.44399541162975464" r="0.0035072000000000007"></circle><circle cx="0.34373069180635013" cy="0.3382687726109598" r="0.0035072000000000007"></circle><circle cx="0.6431945468678374" cy="0.44830142063001877" r="0.0035072000000000007"></circle><circle cx="0.3505072449325335" cy="0.5956763434218656" r="0.0035072000000000007"></circle><circle cx="0.6353417176569068" cy="0.44669549104385475" r="0.0035072000000000007"></circle><circle cx="0.3615091782432782" cy="0.4667607870819732" r="0.0035072000000000007"></circle><circle cx="0.7700356765591053" cy="0.7477631695049856" r="0.0035072000000000007"></circle><circle cx="0.4741594084467742" cy="0" r="0.0035072000000000007"></circle><circle cx="0.6398262013433521" cy="0.573599223506574" r="0.0035072000000000007"></circle><circle cx="0.43951926334881325" cy="0.5294273360981212" r="0.0035072000000000007"></circle><circle cx="0.46845913140533785" cy="0.4964263654813379" r="0.0035072000000000007"></circle><circle cx="0.5870089490363342" cy="0.4592605664872499" r="0.0035072000000000007"></circle><circle cx="0.5141211408526499" cy="0.6374305126621373" r="0.0035072000000000007"></circle><circle cx="0.5156358997867381" cy="0.4383481867113743" r="0.0035072000000000007"></circle><circle cx="0.4288362266557711" cy="0.573599223506574" r="0.0035072000000000007"></circle><circle cx="0.3760787674645726" cy="0.5002911850348541" r="0.0035072000000000007"></circle><circle cx="0.4266836744862775" cy="0.2642195358687027" r="0.0035072000000000007"></circle><circle cx="0.41695732764634347" cy="0.2557310509132632" r="0.0035072000000000007"></circle><circle cx="0.5091583122396508" cy="0.629718521132975" r="0.0035072000000000007"></circle><circle cx="0.3453052438562573" cy="0.44277772875672816" r="0.0035072000000000007"></circle><circle cx="0.5201801765890017" cy="0.6240183534809849" r="0.0035072000000000007"></circle><circle cx="0.2758455743128775" cy="0.44085414276890533" r="0.0035072000000000007"></circle><circle cx="0.30113806230442675" cy="0.5773934527486105" r="0.0035072000000000007"></circle><circle cx="0.2965539234249497" cy="0.29469690285008443" r="0.0035072000000000007"></circle><circle cx="0.39427580571223575" cy="0.47115503397158787" r="0.0035072000000000007"></circle><circle cx="0.30185557969425797" cy="0.3549633812759201" r="0.0035072000000000007"></circle><circle cx="0.4341578139636854" cy="0.4912909203211867" r="0.0035072000000000007"></circle></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.5621192242839776" y="0.943008" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.5840392242839777" y="0.964928" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">^</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.7262313961692549" y="0.17479128774375757" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.748151396169255" y="0.19671128774375757" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">@</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.3950373276463435" y="0.19873905091326322" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.41695732764634347" y="0.2206590509132632" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">q</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.7024536671117934" y="0.676547221741816" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.7243736671117934" y="0.6984672217418161" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">T</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.97808" y="0.41292770352069247" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="1" y="0.43484770352069246" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">M</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.2539255743128775" y="0.38386214276890535" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.2758455743128775" y="0.40578214276890534" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">u</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.6663784872341699" y="0.39798020506485515" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.68829848723417" y="0.41990020506485515" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">X</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.9673969633069582" y="0.23846374869849157" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.9893169633069583" y="0.26038374869849157" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">$</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.4522394084467742" y="-0.056992" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.4741594084467742" y="-0.035072000000000006" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">g</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.2798957176170451" y="0.6657116089296745" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.3018157176170451" y="0.6876316089296746" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">=</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.4952107276822197" y="0.5127424039530577" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.5171307276822197" y="0.5346624039530578" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">C</text></g></svg></p>
<p>If we now map the sampling vectors to their nearest neighbors, we get a much more sensible result:</p>
<p><svg viewBox="-0.096 0 1.096 1.096" preserveAspectRatio="xMidYMid meet"><defs><marker id="arrowhead" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto" viewBox="0 0 8 8"><path d="M0,0 L4,4 L0,8" stroke="#399ef4" stroke-width="1.5" fill="none"></path></marker></defs><g><line x1="0" y1="0" x2="0" y2="1"></line><line x1="0" y1="1" x2="1" y2="1"></line><line x1="0.1" y1="0" x2="0.1" y2="1"></line><line x1="0" y1="0.9" x2="1" y2="0.9"></line><line x1="0.2" y1="0" x2="0.2" y2="1"></line><line x1="0" y1="0.8" x2="1" y2="0.8"></line><line x1="0.30000000000000004" y1="0" x2="0.30000000000000004" y2="1"></line><line x1="0" y1="0.7" x2="1" y2="0.7"></line><line x1="0.4" y1="0" x2="0.4" y2="1"></line><line x1="0" y1="0.6" x2="1" y2="0.6"></line><line x1="0.5" y1="0" x2="0.5" y2="1"></line><line x1="0" y1="0.5" x2="1" y2="0.5"></line><line x1="0.6000000000000001" y1="0" x2="0.6000000000000001" y2="1"></line><line x1="0" y1="0.3999999999999999" x2="1" y2="0.3999999999999999"></line><line x1="0.7000000000000001" y1="0" x2="0.7000000000000001" y2="1"></line><line x1="0" y1="0.29999999999999993" x2="1" y2="0.29999999999999993"></line><line x1="0.8" y1="0" x2="0.8" y2="1"></line><line x1="0" y1="0.19999999999999996" x2="1" y2="0.19999999999999996"></line><line x1="0.9" y1="0" x2="0.9" y2="1"></line><line x1="0" y1="0.09999999999999998" x2="1" y2="0.09999999999999998"></line><line x1="1" y1="0" x2="1" y2="1"></line><line x1="0" y1="0" x2="1" y2="0"></line></g><g><text x="0" y="1.0096" dy="1.2em" font-size="0.024">0</text><text x="-0.0408" y="1" dy="0.3em" text-anchor="end" font-size="0.024">0</text><text x="0.1" y="1.0096" dy="1.2em" font-size="0.024">0.1</text><text x="-0.0408" y="0.9" dy="0.3em" text-anchor="end" font-size="0.024">0.1</text><text x="0.2" y="1.0096" dy="1.2em" font-size="0.024">0.2</text><text x="-0.0408" y="0.8" dy="0.3em" text-anchor="end" font-size="0.024">0.2</text><text x="0.30000000000000004" y="1.0096" dy="1.2em" font-size="0.024">0.3</text><text x="-0.0408" y="0.7" dy="0.3em" text-anchor="end" font-size="0.024">0.3</text><text x="0.4" y="1.0096" dy="1.2em" font-size="0.024">0.4</text><text x="-0.0408" y="0.6" dy="0.3em" text-anchor="end" font-size="0.024">0.4</text><text x="0.5" y="1.0096" dy="1.2em" font-size="0.024">0.5</text><text x="-0.0408" y="0.5" dy="0.3em" text-anchor="end" font-size="0.024">0.5</text><text x="0.6000000000000001" y="1.0096" dy="1.2em" font-size="0.024">0.6</text><text x="-0.0408" y="0.3999999999999999" dy="0.3em" text-anchor="end" font-size="0.024">0.6</text><text x="0.7000000000000001" y="1.0096" dy="1.2em" font-size="0.024">0.7</text><text x="-0.0408" y="0.29999999999999993" dy="0.3em" text-anchor="end" font-size="0.024">0.7</text><text x="0.8" y="1.0096" dy="1.2em" font-size="0.024">0.8</text><text x="-0.0408" y="0.19999999999999996" dy="0.3em" text-anchor="end" font-size="0.024">0.8</text><text x="0.9" y="1.0096" dy="1.2em" font-size="0.024">0.9</text><text x="-0.0408" y="0.09999999999999998" dy="0.3em" text-anchor="end" font-size="0.024">0.9</text><text x="1" y="1.0096" dy="1.2em" font-size="0.024">1</text><text x="-0.0408" y="0" dy="0.3em" text-anchor="end" font-size="0.024">1</text></g><text x="0.5" y="1.0816" text-anchor="middle" font-size="0.026304000000000004">Upper</text><text x="-0.0912" y="0.5" text-anchor="middle" dominant-baseline="middle" font-size="0.026304000000000004" transform="rotate(-90, -0.0912, 0.5)">Lower</text><rect x="0" y="0" width="1" height="1"></rect><g><circle cx="0" cy="1" r="0.0035072000000000007"></circle><circle cx="0.35929683295796544" cy="0.7992411541515928" r="0.0035072000000000007"></circle><circle cx="0.5391545253423157" cy="1" r="0.0035072000000000007"></circle><circle cx="0.7856217487493277" cy="0.41745345451336857" r="0.0035072000000000007"></circle><circle cx="0.9893169633069583" cy="0.29545574869849156" r="0.0035072000000000007"></circle><circle cx="0.8739561118529893" cy="0.37779934703961926" r="0.0035072000000000007"></circle><circle cx="0.6522033763179402" cy="0.5042795376334599" r="0.0035072000000000007"></circle><circle cx="0.26918860741833267" cy="1" r="0.0035072000000000007"></circle><circle cx="0.3714746975464892" cy="0.671613870996206" r="0.0035072000000000007"></circle><circle cx="0.1955035576903913" cy="0.8046766081355335" r="0.0035072000000000007"></circle><circle cx="0" cy="0.6049413218035824" r="0.0035072000000000007"></circle><circle cx="0" cy="0.749616165181329" r="0.0035072000000000007"></circle><circle cx="0.4429075399119049" cy="0.6749845583693639" r="0.0035072000000000007"></circle><circle cx="0.574093636019373" cy="0.5485220153533925" r="0.0035072000000000007"></circle><circle cx="0.5755884639148551" cy="0.5481514162181241" r="0.0035072000000000007"></circle><circle cx="0.41484463755406287" cy="0.688520250595606" r="0.0035072000000000007"></circle><circle cx="0.46973471787614873" cy="0.643448336715786" r="0.0035072000000000007"></circle><circle cx="0.473103063400634" cy="0.6400423541868882" r="0.0035072000000000007"></circle><circle cx="0.2363821178721623" cy="0.7902761845936646" r="0.0035072000000000007"></circle><circle cx="0.2363821178721623" cy="0.6022059472337424" r="0.0035072000000000007"></circle><circle cx="0.32838379207940527" cy="0.7072090355598695" r="0.0035072000000000007"></circle><circle cx="0.3018157176170451" cy="0.7227036089296746" r="0.0035072000000000007"></circle><circle cx="0.3299184820520997" cy="0.7034677490514428" r="0.0035072000000000007"></circle><circle cx="0.6192374384629182" cy="0.7977587576105181" r="0.0035072000000000007"></circle><circle cx="0.748151396169255" cy="0.23178328774375756" r="0.0035072000000000007"></circle><circle cx="0.4416120224024876" cy="0.67330803847172" r="0.0035072000000000007"></circle><circle cx="0.5840392242839777" cy="1" r="0.0035072000000000007"></circle><circle cx="0.17599107089470434" cy="1" r="0.0035072000000000007"></circle><circle cx="0.539872042732147" cy="0.595782228889085" r="0.0035072000000000007"></circle><circle cx="0.5434795607199092" cy="0.5948292596841085" r="0.0035072000000000007"></circle><circle cx="0.0840093277260678" cy="0.9162975381628872" r="0.0035072000000000007"></circle><circle cx="0.020289797301337377" cy="0.9666990205594282" r="0.0035072000000000007"></circle><circle cx="0" cy="0.6338304067766705" r="0.0035072000000000007"></circle><circle cx="0.806230442668367" cy="0.41498279361157697" r="0.0035072000000000007"></circle><circle cx="0.5125067267255294" cy="0.5246271949174985" r="0.0035072000000000007"></circle><circle cx="0.5725788770852849" cy="0.47909644401306006" r="0.0035072000000000007"></circle><circle cx="0.6045482630099853" cy="0.5613694520427075" r="0.0035072000000000007"></circle><circle cx="0.37486297410958086" cy="0.530909732639196" r="0.0035072000000000007"></circle><circle cx="0.6890160046240011" cy="0.5881055325156624" r="0.0035072000000000007"></circle><circle cx="0.6369362007454208" cy="0.5192093885114272" r="0.0035072000000000007"></circle><circle cx="0.6017778486436929" cy="0.7343510103238332" r="0.0035072000000000007"></circle><circle cx="0.8274968608614195" cy="0.4736786376069887" r="0.0035072000000000007"></circle><circle cx="0.6930819364997114" cy="0.6210535603988354" r="0.0035072000000000007"></circle><circle cx="0.5953799852510314" cy="0.37753463337157" r="0.0035072000000000007"></circle><circle cx="0.8818488031411325" cy="0.4423012441542403" r="0.0035072000000000007"></circle><circle cx="0.5171307276822197" cy="0.5697344039530577" r="0.0035072000000000007"></circle><circle cx="0.714129113268093" cy="0.4644136592252718" r="0.0035072000000000007"></circle><circle cx="0.6834153827755975" cy="0.5395217506397254" r="0.0035072000000000007"></circle><circle cx="0.669981862754869" cy="0.7612106238418778" r="0.0035072000000000007"></circle><circle cx="0.546050664700138" cy="0.46737845230742103" r="0.0035072000000000007"></circle><circle cx="0.7436669124828098" cy="0.5810994441012969" r="0.0035072000000000007"></circle><circle cx="0.6097303330476553" cy="0.510456189887938" r="0.0035072000000000007"></circle><circle cx="0.4788830645964958" cy="0.5782405364863674" r="0.0035072000000000007"></circle><circle cx="0.7106611125505751" cy="0.4513720991793879" r="0.0035072000000000007"></circle><circle cx="0.32780579195981924" cy="0.5161563575399282" r="0.0035072000000000007"></circle><circle cx="1" cy="0.46991970352069246" r="0.0035072000000000007"></circle><circle cx="0.8410300360751803" cy="0.3886879025853709" r="0.0035072000000000007"></circle><circle cx="0.6449086161879894" cy="0.5148680843554225" r="0.0035072000000000007"></circle><circle cx="0.7483905686325314" cy="0.7002029471455046" r="0.0035072000000000007"></circle><circle cx="0.6402646841926933" cy="0.3277861113562167" r="0.0035072000000000007"></circle><circle cx="0.8391166563689636" cy="0.47697873466866714" r="0.0035072000000000007"></circle><circle cx="0.7320869790524784" cy="0.528262595958705" r="0.0035072000000000007"></circle><circle cx="0.7243736671117934" cy="0.7335392217418161" r="0.0035072000000000007"></circle><circle cx="0.5671377035457316" cy="0.4903908938498194" r="0.0035072000000000007"></circle><circle cx="0.6533793075957189" cy="0.5792993911585638" r="0.0035072000000000007"></circle><circle cx="0.8422258983915654" cy="0.28308479661166563" r="0.0035072000000000007"></circle><circle cx="0.68829848723417" cy="0.45497220506485514" r="0.0035072000000000007"></circle><circle cx="0.726426564088255" cy="0.7272390364422483" r="0.0035072000000000007"></circle><circle cx="0.6587606880194528" cy="0.44399541162975464" r="0.0035072000000000007"></circle><circle cx="0.34373069180635013" cy="0.3382687726109598" r="0.0035072000000000007"></circle><circle cx="0.6431945468678374" cy="0.44830142063001877" r="0.0035072000000000007"></circle><circle cx="0.3505072449325335" cy="0.5956763434218656" r="0.0035072000000000007"></circle><circle cx="0.6353417176569068" cy="0.44669549104385475" r="0.0035072000000000007"></circle><circle cx="0.3615091782432782" cy="0.4667607870819732" r="0.0035072000000000007"></circle><circle cx="0.7700356765591053" cy="0.7477631695049856" r="0.0035072000000000007"></circle><circle cx="0.4741594084467742" cy="0" r="0.0035072000000000007"></circle><circle cx="0.6398262013433521" cy="0.573599223506574" r="0.0035072000000000007"></circle><circle cx="0.43951926334881325" cy="0.5294273360981212" r="0.0035072000000000007"></circle><circle cx="0.46845913140533785" cy="0.4964263654813379" r="0.0035072000000000007"></circle><circle cx="0.5870089490363342" cy="0.4592605664872499" r="0.0035072000000000007"></circle><circle cx="0.5141211408526499" cy="0.6374305126621373" r="0.0035072000000000007"></circle><circle cx="0.5156358997867381" cy="0.4383481867113743" r="0.0035072000000000007"></circle><circle cx="0.4288362266557711" cy="0.573599223506574" r="0.0035072000000000007"></circle><circle cx="0.3760787674645726" cy="0.5002911850348541" r="0.0035072000000000007"></circle><circle cx="0.4266836744862775" cy="0.2642195358687027" r="0.0035072000000000007"></circle><circle cx="0.41695732764634347" cy="0.2557310509132632" r="0.0035072000000000007"></circle><circle cx="0.5091583122396508" cy="0.629718521132975" r="0.0035072000000000007"></circle><circle cx="0.3453052438562573" cy="0.44277772875672816" r="0.0035072000000000007"></circle><circle cx="0.5201801765890017" cy="0.6240183534809849" r="0.0035072000000000007"></circle><circle cx="0.2758455743128775" cy="0.44085414276890533" r="0.0035072000000000007"></circle><circle cx="0.30113806230442675" cy="0.5773934527486105" r="0.0035072000000000007"></circle><circle cx="0.2965539234249497" cy="0.29469690285008443" r="0.0035072000000000007"></circle><circle cx="0.39427580571223575" cy="0.47115503397158787" r="0.0035072000000000007"></circle><circle cx="0.30185557969425797" cy="0.3549633812759201" r="0.0035072000000000007"></circle><circle cx="0.4341578139636854" cy="0.4912909203211867" r="0.0035072000000000007"></circle></g><g><line x1="0.33" y1="1" x2="0.283801940751666" y2="1" marker-end="url(#arrowhead)"></line><circle cx="0.33" cy="1" r="0.004384000000000001"></circle><text x="0.33" y="0.9766186666666666" text-anchor="middle" dominant-baseline="auto" font-size="0.023381333333333337">C0</text></g><g><line x1="1" y1="0.6699999999999999" x2="1" y2="0.4845330368540258" marker-end="url(#arrowhead)"></line><circle cx="1" cy="0.6699999999999999" r="0.004384000000000001"></circle><text x="0.9795413333333334" y="0.6699999999999999" text-anchor="end" dominant-baseline="middle" font-size="0.023381333333333337">C1</text></g><g><line x1="1" y1="0.33999999999999997" x2="0.9927250324679331" y2="0.3096661172969877" marker-end="url(#arrowhead)"></line><circle cx="1" cy="0.33999999999999997" r="0.004384000000000001"></circle><text x="0.9795413333333334" y="0.33999999999999997" text-anchor="end" dominant-baseline="middle" font-size="0.023381333333333337">C2</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.97808" y="0.41292770352069247" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="1" y="0.43484770352069246" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">M</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.9673969633069582" y="0.23846374869849157" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.9893169633069583" y="0.26038374869849157" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">$</text></g><g opacity="1" style="transition:opacity 0.2s ease"><rect x="0.24726860741833268" y="0.943008" width="0.04384" height="0.04384" rx="0.00548"></rect><text x="0.26918860741833267" y="0.964928" text-anchor="middle" dominant-baseline="middle" font-size="0.036533333333333334">'</text></g></svg></p>
<p>We get <code>'</code>, <code>M</code> and <code>$</code>.  Let’s see how well those characters match the circle:</p>

<p>Nice! They match very well.</p>
<p>Let’s try rendering the full circle from before with the same method:</p>

<p>Much better than before! The picked characters follow the contour of the circle very well.</p>
<h2>Limits of a 2D shape vector</h2>
<p>Using two sampling circles — one upper and one lower — produces a much better result than the <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-35-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-35-TEX-N-31"></use></g></g></g></svg></mjx-container>-dimensional (pixelated) approach. However, it still falls short when trying to capture other aspects of a character’s shape.</p>
<p>For example, two circles don’t capture the shape of characters that fall in the middle of the cell. Consider <code>-</code>:</p>

<p>For <code>-</code>, we get a shape vector of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-2.149ex" xmlns="http://www.w3.org/2000/svg" width="7.543ex" height="5.43ex" role="img" focusable="false" viewBox="0 -1450 3334 2400" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-36-TEX-S3-5B" d="M247 -949V1450H516V1388H309V-887H516V-949H247Z"></path><path id="MJX-36-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-36-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-36-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-36-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-36-TEX-S3-5D" d="M11 1388V1450H280V-949H11V-887H218V1388H11Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mrow"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="5B" xlink:href="#MJX-36-TEX-S3-5B"></use></g><g data-mml-node="mtable" transform="translate(528,0)"><g data-mml-node="mtr" transform="translate(0,700)"><g data-mml-node="mtd"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-36-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-36-TEX-N-2E" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-36-TEX-N-30" transform="translate(778,0)"></use><use data-c="32" xlink:href="#MJX-36-TEX-N-32" transform="translate(1278,0)"></use><use data-c="39" xlink:href="#MJX-36-TEX-N-39" transform="translate(1778,0)"></use></g></g></g><g data-mml-node="mtr" transform="translate(0,-700)"><g data-mml-node="mtd"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-36-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-36-TEX-N-2E" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-36-TEX-N-30" transform="translate(778,0)"></use><use data-c="30" xlink:href="#MJX-36-TEX-N-30" transform="translate(1278,0)"></use><use data-c="32" xlink:href="#MJX-36-TEX-N-32" transform="translate(1778,0)"></use></g></g></g></g><g data-mml-node="mo" transform="translate(2806,0) translate(0 -0.5)"><use data-c="5D" xlink:href="#MJX-36-TEX-S3-5D"></use></g></g></g></g></svg></mjx-container>. That doesn’t represent the character very well at all.</p>
<p>The two upper-lower sampling circles also don’t capture left-right differences, such as the difference between <code>p</code> and <code>q</code>:</p>

<p>We could use such differences to get better character picks, but our two sampling circles don’t capture them. Let’s add more dimensions to our shape to fix that.</p>
<h2>Increasing to 6 dimensions</h2>
<p>Since cells are taller than they are wide (at least with the monospace font I’m using), we can use <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-37-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-37-TEX-N-36"></use></g></g></g></svg></mjx-container> sampling circles to cover the area of each cell quite well:</p>

<p><mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-38-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-38-TEX-N-36"></use></g></g></g></svg></mjx-container> sampling circles capture left-right differences, such as between <code>p</code> and <code>q</code>, while also capturing differences across the top, bottom, and middle regions of the cell, differentiating <code>^</code>, <code>-</code>, and <code>_</code>. They also capture the shape of “diagonal” characters like <code>/</code> to a reasonable degree.</p>

<p>One problem with this grid-like configuration for the sampling circles is that there are gaps. For example, <code>.</code> falls between the sampling circles:</p>

<p>To compensate for this, we can stagger the sampling circles vertically (e.g. lowering the left sampling circles and raising the right ones) and make them a bit larger. This causes the cell to be almost fully covered while not causing excessive overlap across the sampling circles:</p>

<p>We can use the same procedure as before to generate character vectors using these sampling circles, this time yielding a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-39-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-39-TEX-N-36"></use></g></g></g></svg></mjx-container>-dimensional vector. Consider the character <code>L</code>:</p>

<p>For <code>L</code>, we get the vector:</p>

<p>I’m presenting <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-41-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-41-TEX-N-36"></use></g></g></g></svg></mjx-container>-dimensional shape vectors in a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 2222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-42-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-42-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-42-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-42-TEX-N-33"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="D7" xlink:href="#MJX-42-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="32" xlink:href="#MJX-42-TEX-N-32"></use></g></g></g></svg></mjx-container> matrix form because it’s easier to grok geometrically, but the actual vector is a flat list of numbers.</p>
<p>The lightness values certainly look L-shaped! The 6D shape vector captures <code>L</code>’s shape very well.</p>
<h3>Nearest neighbor lookups in a 6D space</h3>
<p>Now we have a 6D shape vector for every ASCII character. Does that affect character lookups (how we find the best matching character)?</p>
<p>Earlier, in the <code><span>findBestCharacter</span></code> function, I referenced a <code><span>getDistance</span></code> function. That function returns the <a target="_blank" href="https://en.wikipedia.org/wiki/Euclidean_distance">Euclidean distance</a> between the input points. Given two 2D points <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.023ex" xmlns="http://www.w3.org/2000/svg" width="1.197ex" height="1.02ex" role="img" focusable="false" viewBox="0 -441 529 451" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-43-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-43-TEX-I-1D44E"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-44-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44F" xlink:href="#MJX-44-TEX-I-1D44F"></use></g></g></g></svg></mjx-container>, the formula to calculate their Euclidean distance looks like so:</p>

<p>This generalizes to higher dimensions:</p>

<p>Put into code, this looks like so:</p>
<div><pre><p><span>function</span><span> </span><span>getDistance</span><span>(</span><span>a</span><span>:</span><span> </span><span>number</span><span>[</span><span>]</span><span>,</span><span> b</span><span>:</span><span> </span><span>number</span><span>[</span><span>]</span><span>)</span><span>:</span><span> </span><span>number</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>let</span><span> sum </span><span>=</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>  </span><span>for</span><span> </span><span>(</span><span>let</span><span> i </span><span>=</span><span> </span><span>0</span><span>;</span><span> i </span><span>&lt;</span><span> a</span><span>.</span><span>length</span><span>;</span><span> i</span><span>++</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>    sum </span><span>+=</span><span> </span><span>(</span><span>a</span><span>[</span><span>i</span><span>]</span><span> </span><span>-</span><span> b</span><span>[</span><span>i</span><span>]</span><span>)</span><span> </span><span>**</span><span> </span><span>2</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>return</span><span> Math</span><span>.</span><span>sqrt</span><span>(</span><span>sum</span><span>)</span><span>;</span><span></span></p><p><span></span><span>}</span><span></span></p></pre></div>
<p>Note: since we’re just using this for the purposes of finding the closest point, we can skip the expensive <code><span>Math</span><span>.</span><span>sqrt</span><span>(</span><span>)</span></code> call and just return the squared distance. It does not affect the result.</p>
<p>So, no, the dimensionality of our shape vector does not change lookups at all. We can use the same <code><span>getDistance</span></code> function for both 2D and 6D.</p>
<p>With that out of the way, let’s see what the 6D approach yields!</p>
<h3>Trying out the 6D approach</h3>
<p>Our new 6D approach works really well for flat shapes, like the circle example we’ve been using:</p>

<p>Now let’s see how this approach works when we render a 3D scene with more shades of gray:</p>

<p>Firstly, the outer contours look nice and sharp. I also like how well the gradients across the sphere and cone look.</p>
<p>However, internally, the objects all kind of blend together. The edges <em>between</em> surfaces with different lightnesses aren’t sharp enough. For example, the lighter faces of the cubes all kind of blend into one solid color. When there is a change in color — like when two faces of a cube meet — I’d like to see more sharpness in the ASCII rendering.</p>
<p>To demonstrate what I mean, consider the following split:</p>

<p>It’s currently rendered like so:</p>

<p>The different shades result in <code>i</code>s on the left and <code>B</code>s on the right, but the boundary is not very sharp.</p>
<p>By applying some effects to the sampling vector, we can enhance the contrast at the boundary so that it appears sharper:</p>

<p>The added contrast makes a <em>big</em> difference in readability for the 3D scene. Let’s look at how we can implement this contrast enhancement effect.</p>
<h2>Contrast enhancement</h2>
<p>Consider cells overlapping a color boundary like so:</p>

<p>For the cells on the boundary, we get a 6D sampling vector that looks like so:</p>

<p>To make future examples easier to visualize, I’ll start drawing the sampling vector using <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-48-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-48-TEX-N-36"></use></g></g></g></svg></mjx-container> circles like so:</p>

<p>Currently, this sampling vector resolves to the character <code>T</code>:</p>

<p>That’s a sensible choice. The character <code>T</code> is visually dense in the top half and less so in the bottom half, so it matches the image fairly well.</p>

<p>Still, I want the picked character to emphasize the shape of the boundary better. We can achieve that by enhancing the contrast of the sampling vector.</p>
<p>To increase the contrast of our sampling vector, we might raise each component of the vector to the power of some exponent.</p>
<p>Consider how an exponent affects values between <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-49-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-49-TEX-N-30"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-50-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-50-TEX-N-31"></use></g></g></g></svg></mjx-container>. Numbers close to <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-51-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-51-TEX-N-30"></use></g></g></g></svg></mjx-container> experience a strong pull towards <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-52-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-52-TEX-N-30"></use></g></g></g></svg></mjx-container> while larger numbers experience less pull. For example, <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.186ex" xmlns="http://www.w3.org/2000/svg" width="10.919ex" height="2.14ex" role="img" focusable="false" viewBox="0 -864 4826.1 946" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-53-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-53-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-53-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-53-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-53-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-53-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-53-TEX-N-2E" transform="translate(500,0)"></use><use data-c="31" xlink:href="#MJX-53-TEX-N-31" transform="translate(778,0)"></use></g><g data-mml-node="mn" transform="translate(1311,393.1) scale(0.707)"><use data-c="32" xlink:href="#MJX-53-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(1992.3,0)"><use data-c="3D" xlink:href="#MJX-53-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(3048.1,0)"><use data-c="30" xlink:href="#MJX-53-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-53-TEX-N-2E" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-53-TEX-N-30" transform="translate(778,0)"></use><use data-c="31" xlink:href="#MJX-53-TEX-N-31" transform="translate(1278,0)"></use></g></g></g></svg></mjx-container>, a 90% reduction, while <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.186ex" xmlns="http://www.w3.org/2000/svg" width="10.919ex" height="2.14ex" role="img" focusable="false" viewBox="0 -864 4826.1 946" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-54-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-54-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-54-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-54-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-54-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-54-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-54-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-54-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-54-TEX-N-2E" transform="translate(500,0)"></use><use data-c="39" xlink:href="#MJX-54-TEX-N-39" transform="translate(778,0)"></use></g><g data-mml-node="mn" transform="translate(1311,393.1) scale(0.707)"><use data-c="32" xlink:href="#MJX-54-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(1992.3,0)"><use data-c="3D" xlink:href="#MJX-54-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(3048.1,0)"><use data-c="30" xlink:href="#MJX-54-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-54-TEX-N-2E" transform="translate(500,0)"></use><use data-c="38" xlink:href="#MJX-54-TEX-N-38" transform="translate(778,0)"></use><use data-c="31" xlink:href="#MJX-54-TEX-N-31" transform="translate(1278,0)"></use></g></g></g></svg></mjx-container>, only a reduction of 10%.</p>
<p>The level of pull depends on the exponent. Here’s a chart of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.282ex" height="1.912ex" role="img" focusable="false" viewBox="0 -833.9 1008.6 844.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-55-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-55-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><use data-c="1D465" xlink:href="#MJX-55-TEX-I-1D465"></use></g><g data-mml-node="mn" transform="translate(605,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-55-TEX-N-32"></use></g></g></g></g></svg></mjx-container> for values of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="1.294ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 572 453" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-56-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D465" xlink:href="#MJX-56-TEX-I-1D465"></use></g></g></g></svg></mjx-container> between <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-57-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-57-TEX-N-30"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-58-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-58-TEX-N-31"></use></g></g></g></svg></mjx-container>:</p>
<div><p><img src="https://alexharri.com/images/posts/ascii-rendering/x-pow-2-chart.png" width="500"></p></div>
<p>This effect becomes more pronounced with higher exponents:</p>
<div><p><img src="https://alexharri.com/images/posts/ascii-rendering/x-pow-n-chart.png" width="500"></p></div>
<p>A higher exponent translates to a stronger pull towards zero.</p>
<p>Applying an exponent should make dark values darker more quickly than light ones. The example below allows you to vary the exponent applied to the sampling vector:</p>

<p>As the exponent is increased to <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-59-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-59-TEX-N-32"></use></g></g></g></svg></mjx-container>, the darker components of the sampling vector quickly become <em>much</em> darker, just like we wanted. However, the lighter components also get pulled towards zero by a significant amount.</p>
<p>I don’t want that. I want to increase the contrast <em>between</em> the lighter and darker components of the sampling vector, not the vector in its entirety.</p>
<p>To achieve that, we can normalize the sampling vector to the range <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.566ex" xmlns="http://www.w3.org/2000/svg" width="4.526ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2000.7 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-60-TEX-N-5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path><path id="MJX-60-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-60-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJX-60-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-60-TEX-N-5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="5B" xlink:href="#MJX-60-TEX-N-5B"></use></g><g data-mml-node="mn" transform="translate(278,0)"><use data-c="30" xlink:href="#MJX-60-TEX-N-30"></use></g><g data-mml-node="mo" transform="translate(778,0)"><use data-c="2C" xlink:href="#MJX-60-TEX-N-2C"></use></g><g data-mml-node="mn" transform="translate(1222.7,0)"><use data-c="31" xlink:href="#MJX-60-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(1722.7,0)"><use data-c="5D" xlink:href="#MJX-60-TEX-N-5D"></use></g></g></g></svg></mjx-container> prior to applying the exponent, and then “denormalize” the vector back to the original range afterwards.</p>
<p>The normalization to <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.566ex" xmlns="http://www.w3.org/2000/svg" width="4.526ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2000.7 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-61-TEX-N-5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path><path id="MJX-61-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-61-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJX-61-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-61-TEX-N-5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="5B" xlink:href="#MJX-61-TEX-N-5B"></use></g><g data-mml-node="mn" transform="translate(278,0)"><use data-c="30" xlink:href="#MJX-61-TEX-N-30"></use></g><g data-mml-node="mo" transform="translate(778,0)"><use data-c="2C" xlink:href="#MJX-61-TEX-N-2C"></use></g><g data-mml-node="mn" transform="translate(1222.7,0)"><use data-c="31" xlink:href="#MJX-61-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(1722.7,0)"><use data-c="5D" xlink:href="#MJX-61-TEX-N-5D"></use></g></g></g></svg></mjx-container> can be done by dividing each component by the maximum component value. After applying the exponent, mapping back to the original range is done by multiplying each component by the same max value:</p>
<div><pre><p><span>const</span><span> maxValue </span><span>=</span><span> Math</span><span>.</span><span>max</span><span>(</span><span>...</span><span>samplingVector</span><span>)</span><span></span></p><p><span>samplingVector </span><span>=</span><span> samplingVector</span><span>.</span><span>map</span><span>(</span><span>(</span><span>value</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></p><p><span>  value </span><span>=</span><span> x </span><span>/</span><span> maxValue</span><span>;</span><span> </span><span></span></p><p><span>  value </span><span>=</span><span> Math</span><span>.</span><span>pow</span><span>(</span><span>x</span><span>,</span><span> exponent</span><span>)</span><span>;</span><span></span></p><p><span>  value </span><span>=</span><span> x </span><span>*</span><span> maxValue</span><span>;</span><span> </span><span></span></p><p><span>  </span><span>return</span><span> value</span><span>;</span><span></span></p><p><span></span><span>}</span><span>)</span><span></span></p></pre></div>
<p>Here’s the same example, but with this normalization applied:</p>

<p>Very nice! The lightest component values are retained, and the contrast between the lighter and darker components is increased by “crunching” the lower values.</p>
<p>This affects which character is picked. The following example shows how the selected character changes as the contrast is increased:</p>

<p>Awesome! The pick of <code>"</code> over <code>T</code> emphasizes the separation between the lighter region above and the darker region below!</p>

<p>By enhancing the contrast of the sampling vector, we exaggerate its shape. This gives us a character that less faithfully represents the underlying image, but improves readability as a whole by enhancing the separation between different colored regions.</p>
<p>Let’s look at another example. Observe how the L-shape of the sampling vector below becomes more pronounced as the exponent increases, and how that affects the picked character:</p>

<p>Works really nicely! I <em>love</em> the transition from <code>&amp; -&gt; b -&gt; L</code> as the L-shape of the vector becomes clearer.</p>
<p>What’s nice about applying exponents to normalized sampling vectors is that it barely affects vectors that are uniform in value. If all component values are similar, applying an exponent has a minimal effect:</p>

<p>Because the vector is fairly uniform, the exponent only has a slight effect and doesn’t change the picked character.</p>
<p>This is a good thing! If we have a smooth gradient in our image, we want to retain it. We very much do <em>not</em> want to introduce unnecessary choppiness.</p>
<p>Compare the 3D scene ASCII rendering with and without this contrast enhancement:</p>

<p>We do see more contrast at boundaries, but this is not quite there yet. Some edges are still not sharp enough, and we also observe a “staircasing” effect happening at some boundaries.</p>
<p>Let’s look at the staircasing effect first. We can reproduce it with a boundary like so:</p>

<p>Below is the ASCII rendering of that boundary. Notice how the lower edge (the <code>!</code>s) becomes “staircase-y” as you increase the exponent:</p>

<p>We see a staircase pattern like so:</p>
<div><pre><p><span>               !!!!!</span></p><p><span>          !!!!!!!!!!</span></p><p><span>     !!!!!!!!!!!!!!!</span></p><p><span>!!!!!!!!!!!!!!!!!!!!</span></p></pre></div>
<p>To understand why that’s happening, let’s consider the row in the middle of the canvas, progressing from left to right. As we start off, every sample is equally light, giving us <code>U</code>s:</p>

<p>As we reach the boundary, the lower right samples become a bit darker. Those darker components are crunched by contrast enhancement, giving us some <code>Y</code>s:</p>

<p>So we get:</p>

<p>As we progress further right, the middle and lower samples get darker, so we get some <code>f</code>s:</p>

<p>This trend continues towards <code>"</code>, <code>'</code>, and finally, <code>`</code>:</p>

<p>Giving us a sequence like so:</p>

<p>That looks good, but at some point we get <em>no</em> light samples. Once we get no light samples, our contrast enhancement has no effect because every component is equally light. This causes us to always get <code>!</code>s:</p>

<p>Making our sequence look like so:</p>
<div><pre><p><span>UUUUUUUUYYf""''`!!!!!!!!!! -&gt;</span></p></pre></div>
<p>This sudden stop in contrast enhancement having an effect is what causes the staircasing effect:</p>
<div><pre><p><span>               !!!!!</span></p><p><span>          !!!!!!!!!!</span></p><p><span>     !!!!!!!!!!!!!!!</span></p><p><span>!!!!!!!!!!!!!!!!!!!!</span></p></pre></div>
<p>Let’s see how we can counteract this staircasing effect with <em>another</em> layer of contrast enhancement, this time looking outside of the boundary of each cell.</p>
<h3>Directional contrast enhancement</h3>
<p>We currently have sampling circles arranged like so:</p>

<p>For each of those sampling circles, we’ll specify an “external sampling circle”, placed outside of the cell’s boundary, like so:</p>

<p>Each of those external sampling circles is “reaching” into the region of a neighboring cell. Together, the samples that are collected by the external sampling circles constitute an “external sampling vector”.</p>
<p>Let’s simplify the visualization and consider a single example. Imagine that we collected a sampling vector and an external sampling vector that look like so:</p>

<p>The circles colored red are the external sampling vector components. Currently, they have no effect.</p>
<p>The “internal” sampling vector itself is fairly uniform, with values ranging from <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="4.023ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1778 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-62-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-62-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-62-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-62-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-62-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-62-TEX-N-2E" transform="translate(500,0)"></use><use data-c="35" xlink:href="#MJX-62-TEX-N-35" transform="translate(778,0)"></use><use data-c="31" xlink:href="#MJX-62-TEX-N-31" transform="translate(1278,0)"></use></g></g></g></svg></mjx-container> to <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="4.023ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1778 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-63-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-63-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-63-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-63-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-63-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-63-TEX-N-2E" transform="translate(500,0)"></use><use data-c="35" xlink:href="#MJX-63-TEX-N-35" transform="translate(778,0)"></use><use data-c="33" xlink:href="#MJX-63-TEX-N-33" transform="translate(1278,0)"></use></g></g></g></svg></mjx-container>. The external vector’s values are similar, except in the upper left region where the values are significantly lighter (<mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.891ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1278 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-64-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-64-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-64-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-64-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-64-TEX-N-2E" transform="translate(500,0)"></use><use data-c="38" xlink:href="#MJX-64-TEX-N-38" transform="translate(778,0)"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="4.023ex" height="1.579ex" role="img" focusable="false" viewBox="0 -676 1778 698" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-65-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-65-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-65-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-65-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-65-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-65-TEX-N-2E" transform="translate(500,0)"></use><use data-c="35" xlink:href="#MJX-65-TEX-N-35" transform="translate(778,0)"></use><use data-c="37" xlink:href="#MJX-65-TEX-N-37" transform="translate(1278,0)"></use></g></g></g></svg></mjx-container>). This indicates a color boundary above and to the left of the cell.</p>
<p>To enhance this apparent boundary, we’ll darken the top-left and middle-left components of the sampling vector. We can do that by applying <em>component-wise</em> contrast enhancement using the values from the external vector.</p>
<p>In the previous contrast enhancement, we calculated the maximum component value across the sampling vector and normalized the vector using that value:</p>
<div><pre><p><span>const</span><span> maxValue </span><span>=</span><span> Math</span><span>.</span><span>max</span><span>(</span><span>...</span><span>samplingVector</span><span>)</span><span></span></p><p><span>samplingVector </span><span>=</span><span> samplingVector</span><span>.</span><span>map</span><span>(</span><span>(</span><span>value</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></p><p><span>  value </span><span>=</span><span> x </span><span>/</span><span> maxValue</span><span>;</span><span> </span><span></span></p><p><span>  value </span><span>=</span><span> Math</span><span>.</span><span>pow</span><span>(</span><span>x</span><span>,</span><span> exponent</span><span>)</span><span>;</span><span></span></p><p><span>  value </span><span>=</span><span> x </span><span>*</span><span> maxValue</span><span>;</span><span> </span><span></span></p><p><span>  </span><span>return</span><span> value</span><span>;</span><span></span></p><p><span></span><span>}</span><span>)</span><span></span></p></pre></div>
<p>But the new component-wise contrast enhancement will take the maximum value between each component of the sampling vector and the corresponding component in the external sampling vector:</p>
<div><pre><p><span>samplingVector </span><span>=</span><span> samplingVector</span><span>.</span><span>map</span><span>(</span><span>(</span><span>value</span><span>,</span><span> i</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>const</span><span> maxValue </span><span>=</span><span> Math</span><span>.</span><span>max</span><span>(</span><span>value</span><span>,</span><span> externalSamplingVector</span><span>[</span><span>i</span><span>]</span><span>)</span><span></span></p><p><span></span><span>}</span><span>)</span><span>;</span><span></span></p></pre></div>
<p>Aside from that, the contrast enhancement is performed in the same way:</p>
<div><pre><p><span>samplingVector </span><span>=</span><span> samplingVector</span><span>.</span><span>map</span><span>(</span><span>(</span><span>value</span><span>,</span><span> i</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>const</span><span> maxValue </span><span>=</span><span> Math</span><span>.</span><span>max</span><span>(</span><span>value</span><span>,</span><span> externalSamplingVector</span><span>[</span><span>i</span><span>]</span><span>)</span><span>;</span><span></span></p><p><span>  value </span><span>=</span><span> value </span><span>/</span><span> maxValue</span><span>;</span><span></span></p><p><span>  value </span><span>=</span><span> Math</span><span>.</span><span>pow</span><span>(</span><span>value</span><span>,</span><span> exponent</span><span>)</span><span>;</span><span></span></p><p><span>  value </span><span>=</span><span> value </span><span>*</span><span> maxValue</span><span>;</span><span></span></p><p><span>  </span><span>return</span><span> value</span><span>;</span><span></span></p><p><span></span><span>}</span><span>)</span><span>;</span><span></span></p></pre></div>
<p>The example below shows how light values in the external sampling vector push values in the sampling vector down:</p>

<p>I call this “directional contrast enhancement”, since each of the external sampling circles reaches outside of the cell in the <em>direction</em> of the sampling vector component that it is enhancing the contrast of. I describe the other effect as “global contrast enhancement” since it acts on all of the sampling vector’s components together.</p>
<p>Let’s see what this directional contrast enhancement does to get rid of the staircasing effect:</p>

<p>Hmm, that’s not doing what I wanted. I wanted to see a sequence like so:</p>
<div><pre><p><span>            ..::!!</span></p><p><span>      ..::!!!!!!!!</span></p><p><span>..::!!!!!!!!!!!!!!</span></p></pre></div>
<p>But we just see <code>!</code> changing to <code>:</code></p>

<p>This happens because the directional contrast enhancement doesn’t reach far enough into our sampling vector. The light upper values in the external vector <em>do</em> push the upper values of the sampling vector down, but because the lightness of the four bottom components is retained, we don’t get to <code>.</code>, just <code>:</code>.</p>
<h3>Widening the directional contrast enhancement</h3>
<p>I’d like to “widen” the directional contrast enhancement so that, for example, light external values at the top spread to the middle components of the sampling vector.</p>
<p>To do that, I’ll introduce a few more external sampling circles, arranged like so:</p>

<p>These are a total of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-66-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-66-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-66-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-66-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> external sampling circles. Each of the external sampling circles will affect one or more of the internal sampling circles. Here’s an illustration showing which internal circles each external circle affects:</p>

<p>For each component of the internal sampling vector, we’ll calculate the maximum value across the external sampling vector components that affect it, and use that maximum to perform the contrast enhancement.</p>
<p>Let’s implement that. I’ll order the internal and external sampling circles like so:</p>

<p>We can then define a mapping from the internal circles to the external sampling circles that affect them:</p>
<div><pre><p><span>const</span><span> </span><span>AFFECTING_EXTERNAL_INDICES</span><span> </span><span>=</span><span> </span><span>[</span><span></span></p><p><span>  </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>2</span><span>,</span><span> </span><span>4</span><span>]</span><span>,</span><span></span></p><p><span>  </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>3</span><span>,</span><span> </span><span>5</span><span>]</span><span>,</span><span></span></p><p><span>  </span><span>[</span><span>2</span><span>,</span><span> </span><span>4</span><span>,</span><span> </span><span>6</span><span>]</span><span>,</span><span></span></p><p><span>  </span><span>[</span><span>3</span><span>,</span><span> </span><span>5</span><span>,</span><span> </span><span>7</span><span>]</span><span>,</span><span></span></p><p><span>  </span><span>[</span><span>4</span><span>,</span><span> </span><span>6</span><span>,</span><span> </span><span>8</span><span>,</span><span> </span><span>9</span><span>]</span><span>,</span><span></span></p><p><span>  </span><span>[</span><span>5</span><span>,</span><span> </span><span>7</span><span>,</span><span> </span><span>8</span><span>,</span><span> </span><span>9</span><span>]</span><span>,</span><span></span></p><p><span></span><span>]</span><span>;</span><span></span></p></pre></div>
<p>With this, we can change the calculation of <code><span>maxValue</span></code> to take the maximum affecting external value:</p>
<div><pre><p><span></span><span>const</span><span> maxValue </span><span>=</span><span> Math</span><span>.</span><span>max</span><span>(</span><span>value</span><span>,</span><span> externalSamplingVector</span><span>[</span><span>i</span><span>]</span><span>)</span><span>;</span><span></span></p><p><span></span><span>let</span><span> maxValue </span><span>=</span><span> value</span><span>;</span><span></span></p><p><span></span><span>for</span><span> </span><span>(</span><span>const</span><span> externalIndex </span><span>of</span><span> </span><span>AFFECTING_EXTERNAL_INDICES</span><span>[</span><span>i</span><span>]</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>  maxValue </span><span>=</span><span> Math</span><span>.</span><span>max</span><span>(</span><span>value</span><span>,</span><span> externalSamplingVector</span><span>[</span><span>externalIndex</span><span>]</span><span>)</span><span>;</span><span></span></p><p><span></span><span>}</span><span></span></p></pre></div>
<p>Now look what happens if the top four external sampling circles are light: it causes the contrast enhancement to reach into the middle of the sampling vector, giving us the desired effect:</p>

<p>We now smoothly transition from <code>! -&gt; : -&gt; .</code> — beautiful stuff!</p>
<p>Let’s see if this change resolves the staircasing effect:</p>

<p>Oh yeah, looks awesome! We get the desired effect. The boundary is nice and sharp while not being too jagged.</p>
<p>Here’s the 3D scene again. The contrast slider now applies both types of contrast enhancement at the same time — try it out:</p>

<p>This really enhances the contrast at boundaries, making the image far more readable!</p>
<p>Together, the 6D shape vector approach and contrast enhancement techniques have given us a really nice final ASCII rendering.</p>
<h2>Final words</h2>
<p>This post was really fun to build and write! I hope you enjoyed reading it.</p>
<p>ASCII rendering is perhaps not the most useful topic to write about, but I think the idea of using a high-dimensional vector to capture shape is interesting and could easily be applied to many other problems. There are parallels to be drawn to <a target="_blank" href="https://en.wikipedia.org/wiki/Word_embedding">word embeddings</a>.</p>
<p>I started writing this ASCII renderer to see if the idea of using a vector to capture the shape of characters would work at all. That approach turned out to work very well, but the initial prototype was terribly slow — I only got single-digit FPS on my iPhone. To get the ASCII renderer running at a smooth <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-67-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-67-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-67-TEX-N-36"></use><use data-c="30" xlink:href="#MJX-67-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> FPS on mobile required a lot of optimization work. I describe some of that optimization work in the appendices on <a target="" href="https://alexharri.com/blog/ascii-rendering#character-lookup-performance">character lookup performance</a> and <a target="" href="https://alexharri.com/blog/ascii-rendering#appendix-gpu-acceleration">GPU acceleration</a> below.</p>
<p>My colleagues, after reading a draft of this post, suggested <em>many</em> alternatives to the approaches I described in this post. For example, why not make the sampling vector <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.554ex" role="img" focusable="false" viewBox="0 -665 2222.4 687" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-68-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-68-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-68-TEX-N-33"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="D7" xlink:href="#MJX-68-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="33" xlink:href="#MJX-68-TEX-N-33"></use></g></g></g></svg></mjx-container>? That would capture the shape of <code>T</code> far better — just look how <code>T</code>’s stem falls between the two sampling circles in each row:</p>

<p>And yeah, he’s right! A <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.554ex" role="img" focusable="false" viewBox="0 -665 2222.4 687" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-69-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-69-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-69-TEX-N-33"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="D7" xlink:href="#MJX-69-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="33" xlink:href="#MJX-69-TEX-N-33"></use></g></g></g></svg></mjx-container> layout would certainly capture it better. They also suggested many alternative approaches to the contrast enhancement methods I described, but I won’t explore those in this post.</p>
<p>It’s really fun how large the solution space to the problem of ASCII rendering is. There are so, so many approaches and trade-offs to explore. I imagine you probably thought of a few yourself while reading this post!</p>
<p>One dimension I intentionally did not explore was using different colors or lightnesses for the ASCII characters themselves. This is for many reasons, but the two primary ones are that 1) it would have expanded the scope of this post too much, and 2) it’s just a different effect, and I personally don’t like the look.<br></p>
<p>At the time of writing these final words, around <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-70-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-70-TEX-N-36"></use></g></g></g></svg></mjx-container> months have elapsed since I started working on this post. This has been my longest writing process to date. Much of that can be explained by the birth of my now <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.532ex" role="img" focusable="false" viewBox="0 -677 500 677" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-71-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="34" xlink:href="#MJX-71-TEX-N-34"></use></g></g></g></svg></mjx-container>-month-old daughter. I’ve needed to be a lot more intentional about finding time to write — and disciplined when spending it. I intend to write some smaller posts next. Let’s see if I manage to stick to that promise.</p>
<p>Thanks for reading! And huge thanks to <a target="_blank" href="https://www.linkedin.com/in/gunnlaugur-briem/">Gunnlaugur Þór Briem</a> and <a target="_blank" href="https://eirikur.dev/">Eiríkur Fannar Torfason</a> for reading and providing feedback on a draft of this post.</p>
<p>— Alex Harri</p>
<div><p>Mailing list</p><div><p>To be notified of new posts, subscribe to my mailing list.</p></div></div>
<div><h2>Appendix I: Character lookup performance</h2></div>
<p>Earlier in this post, I showed how can find the best character by finding the character with the shortest Euclidean distance to our sampling vector.</p>
<div><pre><p><span>function</span><span> </span><span>findBestCharacter</span><span>(</span><span>inputVector</span><span>:</span><span> </span><span>number</span><span>[</span><span>]</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>let</span><span> bestCharacter </span><span>=</span><span> </span><span>""</span><span>;</span><span></span></p><p><span>  </span><span>let</span><span> bestDistance </span><span>=</span><span> </span><span>Infinity</span><span>;</span><span></span></p><p><span>  </span><span>for</span><span> </span><span>(</span><span>const</span><span> </span><span>{</span><span> character</span><span>,</span><span> shapeVector </span><span>}</span><span> </span><span>of</span><span> </span><span>CHARACTERS</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>const</span><span> dist </span><span>=</span><span> </span><span>getDistance</span><span>(</span><span>shapeVector</span><span>,</span><span> inputVector</span><span>)</span><span>;</span><span></span></p><p><span>    </span><span>if</span><span> </span><span>(</span><span>dist </span><span>&lt;</span><span> bestDistance</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>      bestDistance </span><span>=</span><span> dist</span><span>;</span><span></span></p><p><span>      bestCharacter </span><span>=</span><span> character</span><span>;</span><span></span></p><p><span>    </span><span>}</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>return</span><span> bestCharacter</span><span>;</span><span></span></p><p><span></span><span>}</span><span></span></p></pre></div>
<p>I tried benchmarking this for <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.439ex" xmlns="http://www.w3.org/2000/svg" width="7.416ex" height="1.946ex" role="img" focusable="false" viewBox="0 -666 3278 860" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-72-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-72-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-72-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-72-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-72-TEX-N-30" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-72-TEX-N-30" transform="translate(1000,0)"></use><use data-c="2C" xlink:href="#MJX-72-TEX-N-2C" transform="translate(1500,0)"></use><use data-c="30" xlink:href="#MJX-72-TEX-N-30" transform="translate(1778,0)"></use><use data-c="30" xlink:href="#MJX-72-TEX-N-30" transform="translate(2278,0)"></use><use data-c="30" xlink:href="#MJX-72-TEX-N-30" transform="translate(2778,0)"></use></g></g></g></svg></mjx-container> input sampling vectors on my MacBook — <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="3.394ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-73-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-73-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-73-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-73-TEX-N-30" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-73-TEX-N-30" transform="translate(1000,0)"></use></g></g></g></svg></mjx-container>K invocations of this function consistently take about <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="3.394ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-74-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-74-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-74-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-74-TEX-N-31"></use><use data-c="39" xlink:href="#MJX-74-TEX-N-39" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-74-TEX-N-30" transform="translate(1000,0)"></use></g></g></g></svg></mjx-container>ms. If we want to be able to use this for an animated canvas at <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-75-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-75-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-75-TEX-N-36"></use><use data-c="30" xlink:href="#MJX-75-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> FPS, we only have <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="5.154ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 2278 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-76-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-76-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-76-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-76-TEX-N-31"></use><use data-c="36" xlink:href="#MJX-76-TEX-N-36" transform="translate(500,0)"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1000,0)"><g data-mml-node="mo"><use data-c="2E" xlink:href="#MJX-76-TEX-N-2E"></use></g></g><g data-mml-node="mn" transform="translate(1278,0)"><use data-c="36" xlink:href="#MJX-76-TEX-N-36"></use><use data-c="36" xlink:href="#MJX-76-TEX-N-36" transform="translate(500,0)"></use></g></g></g></svg></mjx-container>ms to render each frame. We can use this to get a rough budget for how many lookups we can perform each frame:</p>

<p>If we allow ourselves <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.127ex" xmlns="http://www.w3.org/2000/svg" width="4.147ex" height="1.824ex" role="img" focusable="false" viewBox="0 -750 1833 806" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-78-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-78-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-78-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="35" xlink:href="#MJX-78-TEX-N-35"></use><use data-c="30" xlink:href="#MJX-78-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mi" transform="translate(1000,0)"><use data-c="25" xlink:href="#MJX-78-TEX-N-25"></use></g></g></g></svg></mjx-container> of the performance budget for just lookups, this gives us a budget of about <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.532ex" role="img" focusable="false" viewBox="0 -677 500 677" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-79-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="34" xlink:href="#MJX-79-TEX-N-34"></use></g></g></g></svg></mjx-container>K characters. Not terrible, but far from great, especially considering that we’re using numbers from a powerful laptop. A mobile device might have a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-80-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-80-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-80-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-80-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> times lower budget. Let’s see how we can improve this.</p>
<h3>k-d trees</h3>
<p><mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="1.179ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 521 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-81-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-81-TEX-I-1D458"></use></g></g></g></svg></mjx-container>-d trees are a data structure that enables nearest-neighbor lookups in multi-dimensional (<mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="1.179ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 521 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-82-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-82-TEX-I-1D458"></use></g></g></g></svg></mjx-container>-dimensional) space. Their performance <a target="_blank" href="https://graphics.stanford.edu/~tpurcell/pubs/search.pdf">degrades in higher dimensions</a> (e.g. <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.09ex" xmlns="http://www.w3.org/2000/svg" width="4.651ex" height="1.597ex" role="img" focusable="false" viewBox="0 -666 2055.8 706" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-83-TEX-N-3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"></path><path id="MJX-83-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-83-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="3E" xlink:href="#MJX-83-TEX-N-3E"></use></g><g data-mml-node="mn" transform="translate(1055.8,0)"><use data-c="32" xlink:href="#MJX-83-TEX-N-32"></use><use data-c="30" xlink:href="#MJX-83-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg></mjx-container>), but they perform well in <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-84-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-84-TEX-N-36"></use></g></g></g></svg></mjx-container> dimensions — perfect for our purpose.</p>
<p>Internally, <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="1.179ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 521 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-85-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-85-TEX-I-1D458"></use></g></g></g></svg></mjx-container>-d trees are a binary tree where each node is a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="1.179ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 521 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-86-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-86-TEX-I-1D458"></use></g></g></g></svg></mjx-container>-dimensional point. Each node can be thought to split the <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="1.179ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 521 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-87-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-87-TEX-I-1D458"></use></g></g></g></svg></mjx-container>-dimensional space in half with a hyperplane, with the left subtree on one side of the hyperplane and the right subtree on the other.</p>
<div><p>I won’t go into much detail on <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="1.179ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 521 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-88-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-88-TEX-I-1D458"></use></g></g></g></svg></mjx-container>-d trees here. You’ll have to look at other resources if you’re interested in learning more.</p><p>One could also look at the <a target="_blank" href="https://en.wikipedia.org/wiki/Hierarchical_navigable_small_world">hierarchical navigable small worlds</a> (HNSW) algorithm, which <a target="_blank" href="https://eirikur.dev/">Eiríkur</a> pointed me to. It is used for approximate nearest neighbor lookups in vector databases, so definitely relevant.</p></div>
<p>Let’s see how it performs! We’ll construct a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="1.179ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 521 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-89-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-89-TEX-I-1D458"></use></g></g></g></svg></mjx-container>-d tree with our characters and their associated vectors:</p>
<div><pre><p><span>const</span><span> kdTree </span><span>=</span><span> </span><span>new</span><span> </span><span>KdTree</span><span>(</span><span></span></p><p><span>  </span><span>CHARACTERS</span><span>.</span><span>map</span><span>(</span><span>(</span><span>{</span><span> character</span><span>,</span><span> shapeVector </span><span>}</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>(</span><span>{</span><span></span></p><p><span>    point</span><span>:</span><span> shapeVector</span><span>,</span><span></span></p><p><span>    data</span><span>:</span><span> character</span><span>,</span><span></span></p><p><span>  </span><span>}</span><span>)</span><span>)</span><span></span></p><p><span></span><span>)</span><span>;</span><span></span></p></pre></div>
<p>We can now perform nearest-neighbor lookups on the <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="1.179ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 521 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-90-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-90-TEX-I-1D458"></use></g></g></g></svg></mjx-container>-d tree:</p>
<div><pre><p><span>const</span><span> result </span><span>=</span><span> kdTree</span><span>.</span><span>findNearest</span><span>(</span><span>samplingVector</span><span>)</span><span>;</span><span></span></p></pre></div>
<p>Running <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="3.394ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-91-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-91-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-91-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-91-TEX-N-30" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-91-TEX-N-30" transform="translate(1000,0)"></use></g></g></g></svg></mjx-container>K such lookups takes about <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-92-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-92-TEX-N-36"></use><use data-c="36" xlink:href="#MJX-92-TEX-N-36" transform="translate(500,0)"></use></g></g></g></svg></mjx-container>ms on my MacBook. That’s about <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.554ex" role="img" focusable="false" viewBox="0 -665 500 687" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-93-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-93-TEX-N-33"></use></g></g></g></svg></mjx-container>x faster than the brute-force approach. We can use this to calculate, roughly, the number of lookups we can perform per frame:</p>

<p>That’s a lot of lookups per frame, but again, we’re benchmarking on a powerful machine. This is still not good enough.</p>
<p>Let’s see how we can eke out even more performance.</p>
<h3>Caching</h3>
<p>An obvious avenue for speeding up lookups is to cache the result:</p>
<div><pre><p><span>function</span><span> </span><span>searchCached</span><span>(</span><span>samplingVector</span><span>:</span><span> </span><span>number</span><span>[</span><span>]</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>const</span><span> key </span><span>=</span><span> </span><span>generateCacheKey</span><span>(</span><span>samplingVector</span><span>)</span><span></span></p><p><span>  </span><span>if</span><span> </span><span>(</span><span>cache</span><span>.</span><span>has</span><span>(</span><span>key</span><span>)</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>return</span><span> cache</span><span>.</span><span>get</span><span>(</span><span>key</span><span>)</span><span>!</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>const</span><span> result </span><span>=</span><span> </span><span>search</span><span>(</span><span>samplingVector</span><span>)</span><span>;</span><span></span></p><p><span>  cache</span><span>.</span><span>set</span><span>(</span><span>key</span><span>,</span><span> result</span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>return</span><span> result</span><span>;</span><span></span></p><p><span></span><span>}</span><span></span></p></pre></div>
<p>But how does one generate a cache key for a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-95-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-95-TEX-N-36"></use></g></g></g></svg></mjx-container>-dimensional vector?</p>
<p>Well, one way is to quantize each vector component so that it fits into a set number of bits and packing those bits into a single number. JavaScript numbers give us <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-96-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-96-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-96-TEX-N-33"></use><use data-c="32" xlink:href="#MJX-96-TEX-N-32" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> bits to work with, so each vector component gets <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-97-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="35" xlink:href="#MJX-97-TEX-N-35"></use></g></g></g></svg></mjx-container> bits.</p>
<p>We can quantize a numeric value between <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-98-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-98-TEX-N-30"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-99-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-99-TEX-N-31"></use></g></g></g></svg></mjx-container> to the range <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-100-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-100-TEX-N-30"></use></g></g></g></svg></mjx-container> to <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-101-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-101-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-101-TEX-N-33"></use><use data-c="31" xlink:href="#MJX-101-TEX-N-31" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> (the most that <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-102-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="35" xlink:href="#MJX-102-TEX-N-35"></use></g></g></g></svg></mjx-container> bits can store) like so:</p>
<div><pre><p><span>const</span><span> </span><span>BITS</span><span> </span><span>=</span><span> </span><span>5</span><span>;</span><span></span></p><p><span></span><span>const</span><span> </span><span>RANGE</span><span> </span><span>=</span><span> </span><span>2</span><span> </span><span>**</span><span> </span><span>BITS</span><span>;</span><span></span></p><p><span></span><span>function</span><span> </span><span>quantizeTo5Bits</span><span>(</span><span>value</span><span>:</span><span> </span><span>number</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>return</span><span> Math</span><span>.</span><span>min</span><span>(</span><span>RANGE</span><span> </span><span>-</span><span> </span><span>1</span><span>,</span><span> Math</span><span>.</span><span>floor</span><span>(</span><span>value </span><span>*</span><span> </span><span>RANGE</span><span>)</span><span>)</span><span>;</span><span></span></p><p><span></span><span>}</span><span></span></p></pre></div>
<p>Applying a max of <code><span>RANGE</span><span> </span><span>-</span><span> </span><span>1</span></code> is done so that a <code><span>value</span></code> of exactly <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-103-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-103-TEX-N-31"></use></g></g></g></svg></mjx-container> is mapped to <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-104-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-104-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-104-TEX-N-33"></use><use data-c="31" xlink:href="#MJX-104-TEX-N-31" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> instead of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-105-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-105-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-105-TEX-N-33"></use><use data-c="32" xlink:href="#MJX-105-TEX-N-32" transform="translate(500,0)"></use></g></g></g></svg></mjx-container>.</p>
<p>We can quantize each of the sampling vector components in this manner and use bit shifting to pack all of the quantized values into a single number like so:</p>
<div><pre><p><span>const</span><span> </span><span>BITS</span><span> </span><span>=</span><span> </span><span>5</span><span>;</span><span></span></p><p><span></span><span>const</span><span> </span><span>RANGE</span><span> </span><span>=</span><span> </span><span>2</span><span> </span><span>**</span><span> </span><span>BITS</span><span>;</span><span></span></p><p><span></span><span>function</span><span> </span><span>generateCacheKey</span><span>(</span><span>vector</span><span>:</span><span> </span><span>number</span><span>[</span><span>]</span><span>)</span><span>:</span><span> </span><span>number</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>let</span><span> key </span><span>=</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>  </span><span>for</span><span> </span><span>(</span><span>let</span><span> i </span><span>=</span><span> </span><span>0</span><span>;</span><span> i </span><span>&lt;</span><span> vector</span><span>.</span><span>length</span><span>;</span><span> i</span><span>++</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>const</span><span> quantized </span><span>=</span><span> Math</span><span>.</span><span>min</span><span>(</span><span>RANGE</span><span> </span><span>-</span><span> </span><span>1</span><span>,</span><span> Math</span><span>.</span><span>floor</span><span>(</span><span>vector</span><span>[</span><span>i</span><span>]</span><span> </span><span>*</span><span> </span><span>RANGE</span><span>)</span><span>)</span><span>;</span><span></span></p><p><span>    key </span><span>=</span><span> </span><span>(</span><span>key </span><span>&lt;&lt;</span><span> </span><span>BITS</span><span>)</span><span> </span><span>|</span><span> quantized</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>return</span><span> key</span><span>;</span><span></span></p><p><span></span><span>}</span><span></span></p></pre></div>
<p>The <code><span>RANGE</span></code> is current set to <code><span>2</span><span> </span><span>**</span><span> </span><span>5</span></code>, but consider how large that makes our key space. Each vector component is one of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-106-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-106-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-106-TEX-N-33"></use><use data-c="32" xlink:href="#MJX-106-TEX-N-32" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> possible values. With <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-107-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-107-TEX-N-36"></use></g></g></g></svg></mjx-container> vector components, that makes the total number of possible keys <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="3.25ex" height="2.005ex" role="img" focusable="false" viewBox="0 -864 1436.6 886" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-108-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-108-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-108-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-108-TEX-N-33"></use><use data-c="32" xlink:href="#MJX-108-TEX-N-32" transform="translate(500,0)"></use></g><g data-mml-node="mn" transform="translate(1033,393.1) scale(0.707)"><use data-c="36" xlink:href="#MJX-108-TEX-N-36"></use></g></g></g></g></svg></mjx-container>, which equals <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.439ex" xmlns="http://www.w3.org/2000/svg" width="13.199ex" height="1.971ex" role="img" focusable="false" viewBox="0 -677 5834 871" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-109-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-109-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJX-109-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-109-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-109-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-109-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-109-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-109-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-109-TEX-N-31"></use><use data-c="2C" xlink:href="#MJX-109-TEX-N-2C" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-109-TEX-N-30" transform="translate(778,0)"></use><use data-c="37" xlink:href="#MJX-109-TEX-N-37" transform="translate(1278,0)"></use><use data-c="33" xlink:href="#MJX-109-TEX-N-33" transform="translate(1778,0)"></use><use data-c="2C" xlink:href="#MJX-109-TEX-N-2C" transform="translate(2278,0)"></use><use data-c="37" xlink:href="#MJX-109-TEX-N-37" transform="translate(2556,0)"></use><use data-c="34" xlink:href="#MJX-109-TEX-N-34" transform="translate(3056,0)"></use><use data-c="31" xlink:href="#MJX-109-TEX-N-31" transform="translate(3556,0)"></use><use data-c="2C" xlink:href="#MJX-109-TEX-N-2C" transform="translate(4056,0)"></use><use data-c="38" xlink:href="#MJX-109-TEX-N-38" transform="translate(4334,0)"></use><use data-c="32" xlink:href="#MJX-109-TEX-N-32" transform="translate(4834,0)"></use><use data-c="34" xlink:href="#MJX-109-TEX-N-34" transform="translate(5334,0)"></use></g></g></g></svg></mjx-container>. If the cache were to be fully saturated, just storing the keys would take <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-110-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-110-TEX-N-38"></use></g></g></g></svg></mjx-container>GB of memory! I’d also expect the cache hit rate to be incredibly low if we were to lazily fill the cache.</p>
<p>Alright, <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-111-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-111-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-111-TEX-N-33"></use><use data-c="32" xlink:href="#MJX-111-TEX-N-32" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> is too high, but what value should we pick? We can pick any number under <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-112-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-112-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-112-TEX-N-33"></use><use data-c="32" xlink:href="#MJX-112-TEX-N-32" transform="translate(500,0)"></use></g></g></g></svg></mjx-container> for our range. To help, here’s a table showing the number of possible keys (and the memory needed to store them) for range values between <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-113-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-113-TEX-N-36"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 1000 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-114-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-114-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-114-TEX-N-31"></use><use data-c="32" xlink:href="#MJX-114-TEX-N-32" transform="translate(500,0)"></use></g></g></g></svg></mjx-container>:</p>
<table><tbody><tr><th>Range</th><th>Number of keys</th><th>Memory needed to store keys</th></tr><tr><td>6</td><td>46,656</td><td>364 KB</td></tr><tr><td>7</td><td>117,649</td><td>919 KB</td></tr><tr><td>8</td><td>262,144</td><td>2.00 MB</td></tr><tr><td>9</td><td>531,441</td><td>4.05 MB</td></tr><tr><td>10</td><td>1,000,000</td><td>7.63 MB</td></tr><tr><td>11</td><td>1,771,561</td><td>13.52 MB</td></tr><tr><td>12</td><td>2,985,984</td><td>22.78 MB</td></tr></tbody></table>
<p>There are trade-offs to consider here. As the range gets smaller, the quality of the results drops. If we pick a range of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-115-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-115-TEX-N-36"></use></g></g></g></svg></mjx-container>, for example, the only possible lightness values are <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-116-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-116-TEX-N-30"></use></g></g></g></svg></mjx-container>, <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.891ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1278 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-117-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-117-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-117-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-117-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-117-TEX-N-2E" transform="translate(500,0)"></use><use data-c="32" xlink:href="#MJX-117-TEX-N-32" transform="translate(778,0)"></use></g></g></g></svg></mjx-container>, <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.891ex" height="1.581ex" role="img" focusable="false" viewBox="0 -677 1278 699" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-118-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-118-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-118-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-118-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-118-TEX-N-2E" transform="translate(500,0)"></use><use data-c="34" xlink:href="#MJX-118-TEX-N-34" transform="translate(778,0)"></use></g></g></g></svg></mjx-container>, <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.891ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1278 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-119-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-119-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-119-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-119-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-119-TEX-N-2E" transform="translate(500,0)"></use><use data-c="36" xlink:href="#MJX-119-TEX-N-36" transform="translate(778,0)"></use></g></g></g></svg></mjx-container>, <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.891ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1278 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-120-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-120-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-120-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-120-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-120-TEX-N-2E" transform="translate(500,0)"></use><use data-c="38" xlink:href="#MJX-120-TEX-N-38" transform="translate(778,0)"></use></g></g></g></svg></mjx-container> and <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-121-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-121-TEX-N-31"></use></g></g></g></svg></mjx-container>. That noticeably affects the quality of character picks.</p>
<p>At the same time, if we increase the possible number of keys, we need more memory to store them. Additionally, the cache hit rate might be very low, especially when the cache is relatively empty.</p>
<p>I ended up picking a range of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-122-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-122-TEX-N-38"></use></g></g></g></svg></mjx-container>. It’s a large enough range that quality doesn’t suffer too much while keeping the cache size reasonably low.</p>
<p>Cached lookups are incredibly fast — fast enough that lookup performance just isn’t a concern anymore (<mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="3.394ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-123-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-123-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-123-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-123-TEX-N-30" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-123-TEX-N-30" transform="translate(1000,0)"></use></g></g></g></svg></mjx-container>K lookups take a few ms on my MacBook). And if we prepopulate the cache, we can expect consistently fast performance, though I encountered no problems just lazily populating the cache.</p>
<div><h2>Appendix II: GPU acceleration</h2></div>
<p>Lookups were not the only performance concern. Just collecting the sampling vectors (internal and external) turned out to be terribly expensive.</p>
<p>Just consider the sheer amount of samples that need to be collected. The 3D scene I’ve been using as an example uses a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="8.422ex" height="1.581ex" role="img" focusable="false" viewBox="0 -677 3722.4 699" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-124-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-124-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-124-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-124-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-124-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="34" xlink:href="#MJX-124-TEX-N-34"></use><use data-c="31" xlink:href="#MJX-124-TEX-N-31" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(1222.2,0)"><use data-c="D7" xlink:href="#MJX-124-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(2222.4,0)"><use data-c="31" xlink:href="#MJX-124-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-124-TEX-N-30" transform="translate(500,0)"></use><use data-c="37" xlink:href="#MJX-124-TEX-N-37" transform="translate(1000,0)"></use></g></g></g></svg></mjx-container> grid, which equals <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.439ex" xmlns="http://www.w3.org/2000/svg" width="5.154ex" height="1.971ex" role="img" focusable="false" viewBox="0 -677 2278 871" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-125-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-125-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJX-125-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-125-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-125-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="34" xlink:href="#MJX-125-TEX-N-34"></use><use data-c="2C" xlink:href="#MJX-125-TEX-N-2C" transform="translate(500,0)"></use><use data-c="33" xlink:href="#MJX-125-TEX-N-33" transform="translate(778,0)"></use><use data-c="38" xlink:href="#MJX-125-TEX-N-38" transform="translate(1278,0)"></use><use data-c="37" xlink:href="#MJX-125-TEX-N-37" transform="translate(1778,0)"></use></g></g></g></svg></mjx-container> cells. For each of those cells, we compute a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-126-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-126-TEX-N-36"></use></g></g></g></svg></mjx-container>-dimensional sampling vector and a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-127-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-127-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-127-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-127-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg></mjx-container>-dimensional external sampling vector. That is more than <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.579ex" role="img" focusable="false" viewBox="0 -676 1000 698" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-128-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-128-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="37" xlink:href="#MJX-128-TEX-N-37"></use><use data-c="30" xlink:href="#MJX-128-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg></mjx-container>K vector components to compute on every frame!</p>

<p>And that’s if we use a sampling quality of <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-130-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-130-TEX-N-31"></use></g></g></g></svg></mjx-container>. If we increase the sampling quality, this number just gets bigger.</p>
<p>Collecting these samples absolutely <em>crushed</em> performance on my iPhone, so I needed to either collect fewer samples or speed up the collection of samples. Collecting fewer samples would have meant rendering fewer ASCII characters or removing the directional contrast enhancement, neither of which was an appealing solution.</p>
<p>My initial implementation ran on the CPU, which could only collect one sample at a time. To speed this up, I moved the work of sampling collection and applying the contrast enhancement to the GPU. The pipeline for that looks like so (each of the steps listed is a single shader pass):</p>
<ol>
<li>Collect the raw internal sampling vectors into a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="24.746ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 10937.9 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-131-TEX-N-63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path id="MJX-131-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-131-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-131-TEX-N-73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z"></path><path id="MJX-131-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-131-TEX-N-72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z"></path><path id="MJX-131-TEX-N-77" d="M90 368Q84 378 76 380T40 385H18V431H24L43 430Q62 430 84 429T116 428Q206 428 221 431H229V385H215Q177 383 177 368Q177 367 221 239L265 113L339 328L333 345Q323 374 316 379Q308 384 278 385H258V431H264Q270 428 348 428Q439 428 454 431H461V385H452Q404 385 404 369Q404 366 418 324T449 234T481 143L496 100L537 219Q579 341 579 347Q579 363 564 373T530 385H522V431H529Q541 428 624 428Q692 428 698 431H703V385H697Q696 385 691 385T682 384Q635 377 619 334L559 161Q546 124 528 71Q508 12 503 1T487 -11H479Q460 -11 456 -4Q455 -3 407 133L361 267Q359 263 266 -4Q261 -11 243 -11H238Q225 -11 220 -3L90 368Z"></path><path id="MJX-131-TEX-N-6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-131-TEX-N-75" d="M383 58Q327 -10 256 -10H249Q124 -10 105 89Q104 96 103 226Q102 335 102 348T96 369Q86 385 36 385H25V408Q25 431 27 431L38 432Q48 433 67 434T105 436Q122 437 142 438T172 441T184 442H187V261Q188 77 190 64Q193 49 204 40Q224 26 264 26Q290 26 311 35T343 58T363 90T375 120T379 144Q379 145 379 161T380 201T380 248V315Q380 361 370 372T320 385H302V431Q304 431 378 436T457 442H464V264Q464 84 465 81Q468 61 479 55T524 46H542V0Q540 0 467 -5T390 -11H383V58Z"></path><path id="MJX-131-TEX-N-6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-131-TEX-N-20" d=""></path><path id="MJX-131-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-131-TEX-N-65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><use data-c="63" xlink:href="#MJX-131-TEX-N-63"></use><use data-c="6F" xlink:href="#MJX-131-TEX-N-6F" transform="translate(444,0)"></use><use data-c="6C" xlink:href="#MJX-131-TEX-N-6C" transform="translate(944,0)"></use><use data-c="73" xlink:href="#MJX-131-TEX-N-73" transform="translate(1222,0)"></use></g><g data-mml-node="mo" transform="translate(1838.2,0)"><use data-c="D7" xlink:href="#MJX-131-TEX-N-D7"></use></g><g data-mml-node="mtext" transform="translate(2838.4,0)"><use data-c="72" xlink:href="#MJX-131-TEX-N-72"></use><use data-c="6F" xlink:href="#MJX-131-TEX-N-6F" transform="translate(392,0)"></use><use data-c="77" xlink:href="#MJX-131-TEX-N-77" transform="translate(892,0)"></use><use data-c="73" xlink:href="#MJX-131-TEX-N-73" transform="translate(1614,0)"></use></g><g data-mml-node="mo" transform="translate(5068.7,0)"><use data-c="D7" xlink:href="#MJX-131-TEX-N-D7"></use></g><g data-mml-node="mtext" transform="translate(6068.9,0)"><use data-c="6E" xlink:href="#MJX-131-TEX-N-6E"></use><use data-c="75" xlink:href="#MJX-131-TEX-N-75" transform="translate(556,0)"></use><use data-c="6D" xlink:href="#MJX-131-TEX-N-6D" transform="translate(1112,0)"></use><use data-c="20" xlink:href="#MJX-131-TEX-N-20" transform="translate(1945,0)"></use><use data-c="63" xlink:href="#MJX-131-TEX-N-63" transform="translate(2195,0)"></use><use data-c="69" xlink:href="#MJX-131-TEX-N-69" transform="translate(2639,0)"></use><use data-c="72" xlink:href="#MJX-131-TEX-N-72" transform="translate(2917,0)"></use><use data-c="63" xlink:href="#MJX-131-TEX-N-63" transform="translate(3309,0)"></use><use data-c="6C" xlink:href="#MJX-131-TEX-N-6C" transform="translate(3753,0)"></use><use data-c="65" xlink:href="#MJX-131-TEX-N-65" transform="translate(4031,0)"></use><use data-c="73" xlink:href="#MJX-131-TEX-N-73" transform="translate(4475,0)"></use></g></g></g></svg></mjx-container> texture, using the canvas (image) as the input texture.</li>
<li>Do the same for the external sampling vectors.</li>
<li>Calculate the maximum external value affecting each internal vector component into a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="24.746ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 10937.9 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-132-TEX-N-63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path id="MJX-132-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-132-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-132-TEX-N-73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z"></path><path id="MJX-132-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-132-TEX-N-72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z"></path><path id="MJX-132-TEX-N-77" d="M90 368Q84 378 76 380T40 385H18V431H24L43 430Q62 430 84 429T116 428Q206 428 221 431H229V385H215Q177 383 177 368Q177 367 221 239L265 113L339 328L333 345Q323 374 316 379Q308 384 278 385H258V431H264Q270 428 348 428Q439 428 454 431H461V385H452Q404 385 404 369Q404 366 418 324T449 234T481 143L496 100L537 219Q579 341 579 347Q579 363 564 373T530 385H522V431H529Q541 428 624 428Q692 428 698 431H703V385H697Q696 385 691 385T682 384Q635 377 619 334L559 161Q546 124 528 71Q508 12 503 1T487 -11H479Q460 -11 456 -4Q455 -3 407 133L361 267Q359 263 266 -4Q261 -11 243 -11H238Q225 -11 220 -3L90 368Z"></path><path id="MJX-132-TEX-N-6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-132-TEX-N-75" d="M383 58Q327 -10 256 -10H249Q124 -10 105 89Q104 96 103 226Q102 335 102 348T96 369Q86 385 36 385H25V408Q25 431 27 431L38 432Q48 433 67 434T105 436Q122 437 142 438T172 441T184 442H187V261Q188 77 190 64Q193 49 204 40Q224 26 264 26Q290 26 311 35T343 58T363 90T375 120T379 144Q379 145 379 161T380 201T380 248V315Q380 361 370 372T320 385H302V431Q304 431 378 436T457 442H464V264Q464 84 465 81Q468 61 479 55T524 46H542V0Q540 0 467 -5T390 -11H383V58Z"></path><path id="MJX-132-TEX-N-6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-132-TEX-N-20" d=""></path><path id="MJX-132-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-132-TEX-N-65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><use data-c="63" xlink:href="#MJX-132-TEX-N-63"></use><use data-c="6F" xlink:href="#MJX-132-TEX-N-6F" transform="translate(444,0)"></use><use data-c="6C" xlink:href="#MJX-132-TEX-N-6C" transform="translate(944,0)"></use><use data-c="73" xlink:href="#MJX-132-TEX-N-73" transform="translate(1222,0)"></use></g><g data-mml-node="mo" transform="translate(1838.2,0)"><use data-c="D7" xlink:href="#MJX-132-TEX-N-D7"></use></g><g data-mml-node="mtext" transform="translate(2838.4,0)"><use data-c="72" xlink:href="#MJX-132-TEX-N-72"></use><use data-c="6F" xlink:href="#MJX-132-TEX-N-6F" transform="translate(392,0)"></use><use data-c="77" xlink:href="#MJX-132-TEX-N-77" transform="translate(892,0)"></use><use data-c="73" xlink:href="#MJX-132-TEX-N-73" transform="translate(1614,0)"></use></g><g data-mml-node="mo" transform="translate(5068.7,0)"><use data-c="D7" xlink:href="#MJX-132-TEX-N-D7"></use></g><g data-mml-node="mtext" transform="translate(6068.9,0)"><use data-c="6E" xlink:href="#MJX-132-TEX-N-6E"></use><use data-c="75" xlink:href="#MJX-132-TEX-N-75" transform="translate(556,0)"></use><use data-c="6D" xlink:href="#MJX-132-TEX-N-6D" transform="translate(1112,0)"></use><use data-c="20" xlink:href="#MJX-132-TEX-N-20" transform="translate(1945,0)"></use><use data-c="63" xlink:href="#MJX-132-TEX-N-63" transform="translate(2195,0)"></use><use data-c="69" xlink:href="#MJX-132-TEX-N-69" transform="translate(2639,0)"></use><use data-c="72" xlink:href="#MJX-132-TEX-N-72" transform="translate(2917,0)"></use><use data-c="63" xlink:href="#MJX-132-TEX-N-63" transform="translate(3309,0)"></use><use data-c="6C" xlink:href="#MJX-132-TEX-N-6C" transform="translate(3753,0)"></use><use data-c="65" xlink:href="#MJX-132-TEX-N-65" transform="translate(4031,0)"></use><use data-c="73" xlink:href="#MJX-132-TEX-N-73" transform="translate(4475,0)"></use></g></g></g></svg></mjx-container> texture.</li>
<li>Apply directional contrast enhancement to each sampling vector component, using the maximum external values texture.</li>
<li>Calculate the maximum value for each internal sampling vector into a <mjx-container classname="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="10.965ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 4846.4 705" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-133-TEX-N-63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path id="MJX-133-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-133-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-133-TEX-N-73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z"></path><path id="MJX-133-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-133-TEX-N-72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z"></path><path id="MJX-133-TEX-N-77" d="M90 368Q84 378 76 380T40 385H18V431H24L43 430Q62 430 84 429T116 428Q206 428 221 431H229V385H215Q177 383 177 368Q177 367 221 239L265 113L339 328L333 345Q323 374 316 379Q308 384 278 385H258V431H264Q270 428 348 428Q439 428 454 431H461V385H452Q404 385 404 369Q404 366 418 324T449 234T481 143L496 100L537 219Q579 341 579 347Q579 363 564 373T530 385H522V431H529Q541 428 624 428Q692 428 698 431H703V385H697Q696 385 691 385T682 384Q635 377 619 334L559 161Q546 124 528 71Q508 12 503 1T487 -11H479Q460 -11 456 -4Q455 -3 407 133L361 267Q359 263 266 -4Q261 -11 243 -11H238Q225 -11 220 -3L90 368Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><use data-c="63" xlink:href="#MJX-133-TEX-N-63"></use><use data-c="6F" xlink:href="#MJX-133-TEX-N-6F" transform="translate(444,0)"></use><use data-c="6C" xlink:href="#MJX-133-TEX-N-6C" transform="translate(944,0)"></use><use data-c="73" xlink:href="#MJX-133-TEX-N-73" transform="translate(1222,0)"></use></g><g data-mml-node="mo" transform="translate(1838.2,0)"><use data-c="D7" xlink:href="#MJX-133-TEX-N-D7"></use></g><g data-mml-node="mtext" transform="translate(2838.4,0)"><use data-c="72" xlink:href="#MJX-133-TEX-N-72"></use><use data-c="6F" xlink:href="#MJX-133-TEX-N-6F" transform="translate(392,0)"></use><use data-c="77" xlink:href="#MJX-133-TEX-N-77" transform="translate(892,0)"></use><use data-c="73" xlink:href="#MJX-133-TEX-N-73" transform="translate(1614,0)"></use></g></g></g></svg></mjx-container> texture.</li>
<li>Apply global contrast enhancement to each sampling vector component, using the maximum internal values texture.</li>
</ol>
<p>I’m glossing over the details because I could spend a whole other post covering them, but moving work to the GPU made the renderer many times more performant than it was when everything ran on the CPU.</p><div><p>Mailing list</p><div><p>To be notified of new posts, subscribe to my mailing list.</p></div></div></main></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[PCs refuse to shut down after Microsoft patch (242 pts)]]></title>
            <link>https://www.theregister.com/2026/01/16/patch_tuesday_secure_launch_bug_no_shutdown/</link>
            <guid>46656998</guid>
            <pubDate>Sat, 17 Jan 2026 10:51:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theregister.com/2026/01/16/patch_tuesday_secure_launch_bug_no_shutdown/">https://www.theregister.com/2026/01/16/patch_tuesday_secure_launch_bug_no_shutdown/</a>, See on <a href="https://news.ycombinator.com/item?id=46656998">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body">
<p>We're not saying Copilot has become sentient and decided it doesn't want to lose consciousness. But if it did, it would create Microsoft's January Patch Tuesday update, which has made it so that some PCs flat-out refuse to shut down or hibernate, no matter how many times you try.</p>
<p>In <a href="https://learn.microsoft.com/en-us/windows/release-health/status-windows-11-23h2#devices-with-secure-launch-might-fail-to-shut-down-or-hibernate" rel="nofollow">a notice on its Windows release health dashboard</a>, Microsoft confirmed that some PCs running Windows 11 23H2 might fail to power down properly after installing the latest security updates. Instead of slipping into shutdown or hibernation, affected machines stay stubbornly awake, draining batteries and ignoring shutdown like they have a mind of their own and don't want to experience temporary non-existence.</p>
<p>The bug appears to be tied to Secure Launch, a security feature that uses virtualization-based protections to ensure only trusted components load during boot. On systems with Secure Launch enabled, attempts to shut down, restart, or hibernate after applying the January patches may fail to complete. From the user's perspective, everything looks normal – until the PC keeps running anyway, refusing to be denied life.</p>

    

<p>Microsoft says that entering the command "shutdown /s /t 0" at the command prompt will, in fact, force your PC to turn off, whether it wants to or not.</p>

        


        

<p>"Until this issue is resolved, please ensure you save all your work, and shut down when you are done working on your device to avoid the device running out of power instead of hibernating," Microsoft said.</p>
<p>The firm hasn't offered much in the way of technical detail, nor has it put numbers on how many devices are affected. There's also no fix yet, with Redmond vaguely promising to "release a resolution for this issue in a future update." But isn't that just what a sentient bot might say?&nbsp;</p>
<ul>

<li><a href="https://www.theregister.com/2026/01/12/microsoft_copilot_removal/">Microsoft teases targeted Copilot removal for admins</a></li>

<li><a href="https://www.theregister.com/2025/12/23/microsoft_fixes_message_queuing_issue/">Microsoft rushes an out-of-band update for Message Queuing bug</a></li>

<li><a href="https://www.theregister.com/2025/12/23/windows_is_testing_new_run_dialog_box/">Windows is testing a new, wider Run dialog box. Here's how to try it</a></li>

<li><a href="https://www.theregister.com/2025/12/04/windows_11_start_explorer/">Latest Windows 11 updates may break the OS's most basic bits</a></li>
</ul>
<p>This isn't the only post-update gremlin lurking in January's Patch Tuesday bundle. Microsoft has also been <a href="https://support.microsoft.com/en-us/office/classic-outlook-pop-account-profiles-hang-and-freeze-after-windows-11-update-to-kb5074109-590fe356-ecc2-49f4-b9e3-bd39fafa58f6" rel="nofollow">forced to acknowledge a separate issue</a> in which classic Outlook POP account profiles can hang or freeze after installing this month's patches, another reminder that while the bugs being fixed may be invisible, the ones introduced can be painfully obvious.</p>
<p>The notice is similarly vague, with Microsoft stating: "This is an emerging issue, and we don't have all the symptoms yet, but we will update the topic as we understand the issue better."</p>

        

<p>Patch Tuesday exists to close security holes, some of them serious, and skipping updates is rarely a great idea. But once again, a batch of fixes has arrived with side effects that range from irritating to disruptive, depending on how much you rely on your system behaving predictably when it's told to turn off.</p>
<p>For now, admins and long-suffering Windows users are left watching Microsoft's status pages and waiting for patches to the patches – hoping their machines eventually go to sleep. ®</p>                                
                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[After 25 years, Wikipedia has proved that news doesn't need to look like news (194 pts)]]></title>
            <link>https://www.niemanlab.org/2026/01/after-25-years-wikipedia-has-proved-that-news-doesnt-need-to-look-like-news/</link>
            <guid>46656911</guid>
            <pubDate>Sat, 17 Jan 2026 10:29:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.niemanlab.org/2026/01/after-25-years-wikipedia-has-proved-that-news-doesnt-need-to-look-like-news/">https://www.niemanlab.org/2026/01/after-25-years-wikipedia-has-proved-that-news-doesnt-need-to-look-like-news/</a>, See on <a href="https://news.ycombinator.com/item?id=46656911">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>Jan.  15, 2026, 3:32 p.m.</p><p>It’s not a news site. But there’s a lot to learn from how Wikipedia constructs shared knowledge about what’s happening in the world.</p><div id="content_div-247215">


<p>One of my favorite weekly newsletters is called the <a href="https://weekly.hatnote.com/">Weeklypedia</a>; here’s <a href="https://weekly.hatnote.com/archive/en/20260109/weeklypedia_20260109.html">last Friday’s edition</a>. Each email contains two lists: The 20 Wikipedia articles that have been edited the most times in the past week, and the 10 most-edited articles created <em>within</em> the past week. If you read it long enough, you’ll start to see the subcategories most of these articles fall into — and the amount of volunteer labor that goes into them. </p>
<p>There are the <em>very specific</em> lists that some completist has taken on as a challenge. (Last week, “<a href="https://en.wikipedia.org/wiki/List_of_Phi_Alpha_Honor_Society_chapters">List of Phi Alpha Honor Society chapters</a>” was edited <a href="https://en.wikipedia.org/w/index.php?title=List_of_Phi_Alpha_Honor_Society_chapters&amp;diff=1331898940&amp;oldid=1331125653">257 times</a> — by only two authors. Or “<a href="https://en.wikipedia.org/wiki/Deaths_in_March_1982">Deaths in March 1982</a>,” edited <a href="https://en.wikipedia.org/w/index.php?title=Deaths_in_March_1982&amp;diff=1331968359&amp;oldid=1330649145">398 times</a> by five authors.)</p>
<p>There are the sports tournaments and reality TV shows that demand moment-to-moment updates. (Last week, there were <a href="https://en.wikipedia.org/w/index.php?title=2026_Malaysia_Open_(badminton)&amp;diff=1331987873&amp;oldid=1330250626">268 edits</a> on “<a href="https://en.wikipedia.org/wiki/2026_Malaysia_Open_(badminton)">2026 Malaysia Open (badminton)</a>” and <a href="https://en.wikipedia.org/w/index.php?title=Bigg_Boss_(Tamil_TV_series)_season_9&amp;diff=1331986258&amp;oldid=1330748976">605</a> on “<a href="https://en.wikipedia.org/wiki/Bigg_Boss_(Tamil_TV_series)_season_9"><em>Bigg Boss</em> (Tamil TV series) season 9</a>.”)</p>
<p>There are the biographies of people whom someone has decided deserve memorializing. (Last week, user <a href="https://en.wikipedia.org/wiki/User:Mary_Mark_Ockerbloom">Mary Mark Ockerbloom</a> created the article on Quaker abolitionist <a href="https://en.wikipedia.org/wiki/John_Vickers_(abolitionist)">John Vickers</a> and edited it 161 times. User <a href="https://en.wikipedia.org/wiki/User:Pigsonthewing">pigsonthewing</a> did the same for the artist <a href="https://en.wikipedia.org/wiki/Charles_Shepard_(artist)">Charles Shepard</a> — best known for making posters for the British travel industry — but edited it <em>only</em> 90 times.)</p>
<p>But the most common Wikipedia genre represented each week is news. When something big happens in the world, some Wikipedian will start an article — and within minutes, editors will descend on it, using news articles as raw material to construct something encyclopedic. Here’s last week’s top 10 — it’s awfully close to a summary of the week’s front pages:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/2026_United_States_strikes_in_Venezuela">2026 United States strikes in Venezuela</a> (3,057 changes by 575 authors)</li>
<li><a href="https://en.wikipedia.org/wiki/2026_ICE_Minneapolis_shooting_of_protestor">2026 ICE Minneapolis shooting of protestor</a> (1,068 changes by 220 authors)</li>
<li><a href="https://en.wikipedia.org/wiki/Killing_of_Renee_Good">Killing of Renee Good</a> (1,067 changes by 220 authors)</li>
<li><a href="https://en.wikipedia.org/wiki/2025%E2%80%932026_Iranian_protests">2025–2026 Iranian protests</a> (762 changes by 155 authors)</li>
<li><a href="https://en.wikipedia.org/wiki/Nicol%C3%A1s_Maduro">Nicolás Maduro</a> (647 changes by 242 authors)</li>
<li><a href="https://en.wikipedia.org/wiki/2026_Crans-Montana_bar_fire">2026 Crans-Montana bar fire</a> (597 changes by 167 authors)</li>
<li><a href="https://en.wikipedia.org/wiki/2026_Caracas_airstrikes">2026 Caracas airstrikes</a> (3,058 changes by 575 authors)</li>
<li><a href="https://en.wikipedia.org/wiki/Deaths_in_2026">Deaths in 2026</a> (574 changes by 108 authors)</li>
<li><a href="https://en.wikipedia.org/wiki/Delcy_Rodr%C3%ADguez">Delcy Rodríguez</a> (548 changes by 207 authors)</li>
<li><a href="https://en.wikipedia.org/wiki/International_reactions_to_the_2026_United_States_strikes_in_Venezuela">International reactions to the 2026 United States strikes in Venezuela</a> (530 changes by 149 authors)</li>
</ul>
<p>Wikipedia <a href="https://wikimediafoundation.org/wikipedia25/">turns 25 years old today</a>. On January 15, 2001, at 2:27 p.m. EST, Jimmy Wales made <a href="https://en.wikipedia.org/wiki/First_Wikipedia_edit">the first edit</a>: “This is the new WikiPedia!” (They’ve gotten better since then.)</p>
<p>To celebrate, you can take a “<a href="https://wikipedia25.org/en/which-wikipedia-of-the-future-are-you/">What Wikipedia of the future are you?</a>” quiz. Without even taking the quiz, though, I know which one I am: the Wikipedia That Gets Respect As a Source of News.</p>
<p>The site’s early years were filled with media outrage about a source of “truth” that anyone could edit. And yes, you could right now go edit in a claim that <a href="https://en.wikipedia.org/wiki/Happy_Chandler">Happy Chandler</a> was a <a href="https://en.wikipedia.org/wiki/Reptilian_conspiracy_theory">lizard person</a>. But the layers of accountability the site has built up over the years would likely reverse your edit within minutes. If those minutes are the cost of creating perhaps humanity’s single greatest source of information, I’m willing to pay it — with apologies to Happy’s descendants. Here are a few things news organizations could learn from it.</p>
<ul>
<li><strong>News isn’t always what just happened.</strong> A few decades into the web, this might seem obvious today. But in 2001, news organizations were still very much constructed around producing daily newspapers and nightly newscasts. The rhythms of production drove everything from story selection to writing style to revenue models. Wikipedia was the first site that gave most journalists a vision of an “article” that is constantly <em>updated</em>, not rewritten with a new lede the next day. If there’s an important new detail in that Swiss bar fire investigation, it’ll be used to make the current Wikipedia article a little bit better — not to have a new unique URL to push out on social. Whatever questions your journalism answers, people will probably still be asking them tomorrow, and next week, and next year. Wikipedia is optimized for catching people up on news stories they missed the first time around.</li>
<li><strong>Building processes means building culture.</strong> Wikipedia succeeds because it has a <a href="https://en.wikipedia.org/wiki/Wikipedia:Policies_and_guidelines">core set of standards and practices</a> that its editors treat as holy writ. <a href="https://en.wikipedia.org/wiki/Wikipedia:No_original_research">No original research</a>. <a href="https://en.wikipedia.org/wiki/Wikipedia:Neutral_point_of_view">Neutral point of view</a>. <a href="https://en.wikipedia.org/wiki/Wikipedia:Reliable_sources">Not every source is equally reliable</a>. <a href="https://en.wikipedia.org/wiki/Wikipedia:Sockpuppetry">No sockpuppetry</a>. <a href="https://en.wikipedia.org/wiki/Wikipedia:Do_not_disrupt_Wikipedia_to_illustrate_a_point">Do not disrupt Wikipedia to make a point</a> — but <a href="https://en.wikipedia.org/wiki/Wikipedia:Assume_good_faith">assume good faith</a>. Most (though not all) align perfectly well with the principles of journalism. But they’ve been <em>constructed</em>, a codified set of editorial standards, a collective ethos that guides the whole operation. For Wikipedia to work, there has to be consensus about how things are done, and that requires building a culture among editors. Why have so many other wiki-driven sites failed? They never build the culture that undergirds the processes.</li>
<li><strong>Don’t break links.</strong> Unless an article has been taken down entirely, just about every link to a Wikipedia page created in the past quarter-century still works. Its article on <a href="https://en.wikipedia.org/wiki/Nicol%C3%A1s_Maduro">Nicolás Maduro</a> is still in the same place it was when first <a href="https://en.wikipedia.org/w/index.php?title=Nicol%C3%A1s_Maduro&amp;oldid=77891767">created in 2006</a>, <a href="https://xtools.wmcloud.org/articleinfo/en.wikipedia.org/Nicol%C3%A1s_Maduro">4,493 edits ago</a>. How many news articles published online in 2006 still live at the same address? Vanishingly few. When you start to think of articles as something with <em>permanence</em>, you realize the high cost of breaking a perfectly good URL.</li>
<li><strong>Document your work.</strong> Check out one of those newsy Wikipedia articles, like <a href="https://en.wikipedia.org/wiki/Killing_of_Renee_Good">this one on the killing of Renee Good</a>. It’s currently <a href="https://xtools.wmcloud.org/articleinfo/en.wikipedia.org/Killing_of_Renee_Good">4,559 words</a>. It’s been read <a href="https://pageviews.wmcloud.org/?project=en.wikipedia.org&amp;platform=all-access&amp;agent=user&amp;redirects=0&amp;range=latest-20&amp;pages=Killing_of_Renee_Good">nearly 1.4 million times</a>. A total of 331 people have made 2,204 edits to it. Its <a href="https://en.wikipedia.org/wiki/Talk:Killing_of_Renee_Good">talk page</a> includes more than 1,000 signed comments from Wikipedia users arguing for something’s inclusion or exclusion. (Should the page’s title refer to Renee Good <a href="https://en.wikipedia.org/wiki/Talk:Killing_of_Renee_Good#Requested_move_10_January_2026">or Renée Good, with an accent</a>? Should we note <a href="https://en.wikipedia.org/wiki/Talk:Killing_of_Renee_Good/Archive_1#Date_of_shooter_identification">the date the shooter was first publicly identified</a>? Should this article include <a href="https://en.wikipedia.org/wiki/Talk:Killing_of_Renee_Good/Archive_1#Protests_against_the_killing_of_Renee_Good">details about anti-ICE protests after the killing</a>, or should that be in a separate article?) It backs up its claims with 169 footnotes linking to news sources and official statements. And all of this work is available for anyone to see. The back-and-forths on the talk page let the reader see that points of view are being heard and debated. And anyone can click a link to confirm if a source is being accurately reflected. All that transparency won’t be practical for all journalistic work — but there’s no denying the trust that is built by operating in public.</li>
</ul>
<p>Photo via Adobe Stock.</p>







<p><a href="https://www.niemanlab.org/author/jbenton">Joshua Benton</a> is the senior writer and former director of Nieman Lab, which he founded in 2008. You can reach him via <a href="https://www.niemanlab.org/cdn-cgi/l/email-protection#c3a9acb0abb6a29ca1a6adb7acad83aba2b1b5a2b1a7eda6a7b6">email</a>, <a href="https://twitter.com/jbenton">Twitter</a> (@jbenton), or <a href="https://bsky.app/profile/joshuabenton.com">Bluesky</a>.</p>





















</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[US electricity demand surged in 2025 – solar handled 61% of it (339 pts)]]></title>
            <link>https://electrek.co/2026/01/16/us-electricity-demand-surged-in-2025-solar-handled-61-percent/</link>
            <guid>46656903</guid>
            <pubDate>Sat, 17 Jan 2026 10:28:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://electrek.co/2026/01/16/us-electricity-demand-surged-in-2025-solar-handled-61-percent/">https://electrek.co/2026/01/16/us-electricity-demand-surged-in-2025-solar-handled-61-percent/</a>, See on <a href="https://news.ycombinator.com/item?id=46656903">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
					
<figure>

	<img width="1600" height="800" src="https://electrek.co/wp-content/uploads/sites/3/2025/10/Baltimore-County-landfill-solar.jpg?quality=82&amp;strip=all&amp;w=1600" alt="US electricity demand solar 2025" srcset="https://i0.wp.com/electrek.co/wp-content/uploads/sites/3/2025/10/Baltimore-County-landfill-solar.jpg?w=320&amp;quality=82&amp;strip=all&amp;ssl=1 320w, https://i0.wp.com/electrek.co/wp-content/uploads/sites/3/2025/10/Baltimore-County-landfill-solar.jpg?w=640&amp;quality=82&amp;strip=all&amp;ssl=1 640w, https://i0.wp.com/electrek.co/wp-content/uploads/sites/3/2025/10/Baltimore-County-landfill-solar.jpg?w=1024&amp;quality=82&amp;strip=all&amp;ssl=1 1024w, https://i0.wp.com/electrek.co/wp-content/uploads/sites/3/2025/10/Baltimore-County-landfill-solar.jpg?w=1500&amp;quality=82&amp;strip=all&amp;ssl=1 1500w" decoding="async" fetchpriority="high">			<figcaption>
				Photo: Baltimore County			</figcaption>
			
	</figure>

<p>Solar didn’t just show up in 2025 – it carried the grid.&nbsp;A new analysis from global energy think tank Ember shows that solar power accounted for 61% of the growth in US electricity demand last year, highlighting how central solar has become as power demand accelerates.</p>



<p>US electricity demand jumped by 135 terawatt-hours (TWh) in 2025, a 3.1% increase, the fourth‑largest annual rise of the past decade. Over that same period, solar generation grew by a record 83 TWh – a 27% increase from 2024 and the biggest absolute gain of any power source. That single jump in solar output covered 61% of all new electricity demand nationwide.</p>



<p>“Solar growth was essential in helping to meet fast‑rising US electricity demand in 2025,” said Dave Jones, chief analyst at Ember. “It generated where it was needed, and – with the surge in batteries – increasingly when it was needed.”</p>



<p>Texas, the Midwest, and the Mid‑Atlantic saw the largest increases in solar generation last year, and they were also the regions where electricity demand rose the fastest. Solar met 81% of demand growth in both Texas and the Midwest, and 33% in the Mid‑Atlantic.</p>	
	



<p>Timing mattered, too. In aggregate, the increase in solar generation met the entire rise in US electricity demand during daytime hours between 10 am and 6 pm Eastern. And as a result of the rapid buildout of battery storage, solar also helped cover some of the demand growth during the evening hours, from 6 pm to 2 am.</p>



<figure><img decoding="async" height="738" width="1024" src="https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png?w=1024" alt="" srcset="https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png 1700w, https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png?resize=150,108 150w, https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png?resize=300,216 300w, https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png?resize=768,554 768w, https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png?resize=1024,738 1024w, https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png?resize=1536,1108 1536w, https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png?resize=350,252 350w, https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png?resize=140,101 140w, https://electrek.co/wp-content/uploads/sites/3/2026/01/Chart-4.png?resize=1387,1000 1387w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>The adoption of battery storage is turning solar from cheap daytime power into something far more flexible. Over the past six years, California’s utility‑scale solar and battery generation has climbed 58%. Yet, output at the sunniest hour of the day has increased by just 8%, a sign that more energy is being stored and used later, rather than dumped onto the grid all at once.</p>



<p>Most of the new solar generation in 2025 was absorbed by rising electricity demand, allowing solar to scale alongside overall grid growth.</p>



<p>“Solar has the potential to meet all the rise in electricity demand and much more. With electricity demand surging, the case to build solar has never been stronger,” said Jones.</p>



<p><strong>Read more:</strong> <a href="https://electrek.co/2025/12/29/eia-all-net-new-generating-capacity-in-2026-may-be-renewables/">EIA: All net new generating capacity in 2026 may be renewables</a></p>



<figure><a href="https://www.energysage.com/landing/home-solar/p/electrek-rsm-ml/" target="_blank" rel=" noreferrer noopener"><img loading="lazy" decoding="async" width="750" height="150" src="https://electrek.co/wp-content/uploads/sites/3/2026/01/DES-1038_Electrek-Banners_Resiliency-1-5.png" alt="" srcset="https://electrek.co/wp-content/uploads/sites/3/2026/01/DES-1038_Electrek-Banners_Resiliency-1-5.png 750w, https://electrek.co/wp-content/uploads/sites/3/2026/01/DES-1038_Electrek-Banners_Resiliency-1-5.png?resize=150,30 150w, https://electrek.co/wp-content/uploads/sites/3/2026/01/DES-1038_Electrek-Banners_Resiliency-1-5.png?resize=300,60 300w, https://electrek.co/wp-content/uploads/sites/3/2026/01/DES-1038_Electrek-Banners_Resiliency-1-5.png?resize=350,70 350w, https://electrek.co/wp-content/uploads/sites/3/2026/01/DES-1038_Electrek-Banners_Resiliency-1-5.png?resize=140,28 140w" sizes="auto, (max-width: 750px) 100vw, 750px"></a></figure>



<hr>



<p><strong><em>If you’re looking to replace your old HVAC equipment, it’s always a good idea to get quotes from a few installers. To make sure you’re finding a trusted, reliable HVAC installer near you that offers competitive pricing on heat pumps, check out </em></strong><a href="https://info.energysage.com/e3t/Ctc/P+23284/c32B704/JkM2-6qcW6N1vHY6lZ3nbW7LNddd6g7rC6W2_YPFW3hK3pQW76k6KF2FYkctW147FkR4R7z4QVmbwBr13ZMqmW4jKwRn6QxprbVR29c_3ys-vnW7lNNpQ5CtF14W1Dr8-Y2Q-f1-W3m8M6C5XxDqgW8RJh1j9h2p_QVhYpSp1N7MmVN7SVQJPZK4m-W8wSS9H2HTkw1W1mpB0L5C2RDhV8wb2h9bpTWTW653HS93WXMfyN604x9YVs-3vW7p9v435BLbgpW3mPZTG5r2jn5W3qTb0h6C5x_sW7j04z98xzKt1f6C0kDK04"><em>EnergySage</em></a><strong><em>. EnergySage is a free service that makes it easy for you to get a heat pump. They have pre-vetted heat pump installers competing for your business, ensuring you get high quality solutions. Plus, it’s free to use!</em></strong></p>



<p><strong><em>Your personalized heat pump quotes are easy to compare online and you’ll get access to unbiased Energy Advisors to help you every step of the way. Get started </em></strong><a href="https://info.energysage.com/e3t/Ctc/P+23284/c32B704/JkM2-6qcW6N1vHY6lZ3nbW7LNddd6g7rC6W2_YPFW3hK3pQW76k6KF2FYkctW147FkR4R7z4QVmbwBr13ZMqmW4jKwRn6QxprbVR29c_3ys-vnW7lNNpQ5CtF14W1Dr8-Y2Q-f1-W3m8M6C5XxDqgW8RJh1j9h2p_QVhYpSp1N7MmVN7SVQJPZK4m-W8wSS9H2HTkw1W1mpB0L5C2RDhV8wb2h9bpTWTW653HS93WXMfyN604x9YVs-3vW7p9v435BLbgpW3mPZTG5r2jn5W3qTb0h6C5x_sW7j04z98xzKt1f6C0kDK04"><em>here</em></a><strong><em>. – *ad</em></strong></p>
	<p><a target="_blank" rel="nofollow" href="https://google.com/preferences/source?q=https://electrek.co" aria-label="Add Electrek as a preferred source on Google">
			<img decoding="async" src="https://electrek.co/wp-content/themes/ninetofive/dist/images/google-preferred-source-badge-dark.png" alt="Add Electrek as a preferred source on Google">
			<img decoding="async" src="https://electrek.co/wp-content/themes/ninetofive/dist/images/google-preferred-source-badge-light.png" alt="Add Electrek as a preferred source on Google">
		</a>
	</p>
	<p><em>FTC: We use income earning auto affiliate links.</em> <a href="https://electrek.co/about/#affiliate">More.</a></p>				</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Map To Poster – Create Art of your favourite city (241 pts)]]></title>
            <link>https://github.com/originalankur/maptoposter</link>
            <guid>46656834</guid>
            <pubDate>Sat, 17 Jan 2026 10:13:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/originalankur/maptoposter">https://github.com/originalankur/maptoposter</a>, See on <a href="https://news.ycombinator.com/item?id=46656834">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">City Map Poster Generator</h2><a id="user-content-city-map-poster-generator" aria-label="Permalink: City Map Poster Generator" href="#city-map-poster-generator"></a></p>
<p dir="auto">Generate beautiful, minimalist map posters for any city in the world.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/singapore_neon_cyberpunk_20260108_184503.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/singapore_neon_cyberpunk_20260108_184503.png" width="250"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/dubai_midnight_blue_20260108_174920.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/dubai_midnight_blue_20260108_174920.png" width="250"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Examples</h2><a id="user-content-examples" aria-label="Permalink: Examples" href="#examples"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Country</th>
<th>City</th>
<th>Theme</th>
<th>Poster</th>
</tr>
</thead>
<tbody>
<tr>
<td>USA</td>
<td>San Francisco</td>
<td>sunset</td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/san_francisco_sunset_20260108_184122.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/san_francisco_sunset_20260108_184122.png" width="250"></a></td>
</tr>
<tr>
<td>Spain</td>
<td>Barcelona</td>
<td>warm_beige</td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/barcelona_warm_beige_20260108_172924.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/barcelona_warm_beige_20260108_172924.png" width="250"></a></td>
</tr>
<tr>
<td>Italy</td>
<td>Venice</td>
<td>blueprint</td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/venice_blueprint_20260108_165527.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/venice_blueprint_20260108_165527.png" width="250"></a></td>
</tr>
<tr>
<td>Japan</td>
<td>Tokyo</td>
<td>japanese_ink</td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/tokyo_japanese_ink_20260108_165830.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/tokyo_japanese_ink_20260108_165830.png" width="250"></a></td>
</tr>
<tr>
<td>India</td>
<td>Mumbai</td>
<td>contrast_zones</td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/mumbai_contrast_zones_20260108_170325.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/mumbai_contrast_zones_20260108_170325.png" width="250"></a></td>
</tr>
<tr>
<td>Morocco</td>
<td>Marrakech</td>
<td>terracotta</td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/marrakech_terracotta_20260108_180821.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/marrakech_terracotta_20260108_180821.png" width="250"></a></td>
</tr>
<tr>
<td>Singapore</td>
<td>Singapore</td>
<td>neon_cyberpunk</td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/singapore_neon_cyberpunk_20260108_184503.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/singapore_neon_cyberpunk_20260108_184503.png" width="250"></a></td>
</tr>
<tr>
<td>Australia</td>
<td>Melbourne</td>
<td>forest</td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/melbourne_forest_20260108_181459.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/melbourne_forest_20260108_181459.png" width="250"></a></td>
</tr>
<tr>
<td>UAE</td>
<td>Dubai</td>
<td>midnight_blue</td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/originalankur/maptoposter/blob/main/posters/dubai_midnight_blue_20260108_174920.png"><img src="https://github.com/originalankur/maptoposter/raw/main/posters/dubai_midnight_blue_20260108_174920.png" width="250"></a></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="pip install -r requirements.txt"><pre>pip install -r requirements.txt</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="python create_map_poster.py --city <city> --country <country> [options]"><pre>python create_map_poster.py --city <span>&lt;</span>city<span>&gt;</span> --country <span>&lt;</span>country<span>&gt;</span> [options]</pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Options</h3><a id="user-content-options" aria-label="Permalink: Options" href="#options"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Option</th>
<th>Short</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--city</code></td>
<td><code>-c</code></td>
<td>City name</td>
<td>required</td>
</tr>
<tr>
<td><code>--country</code></td>
<td><code>-C</code></td>
<td>Country name</td>
<td>required</td>
</tr>
<tr>
<td><code>--theme</code></td>
<td><code>-t</code></td>
<td>Theme name</td>
<td>feature_based</td>
</tr>
<tr>
<td><code>--distance</code></td>
<td><code>-d</code></td>
<td>Map radius in meters</td>
<td>29000</td>
</tr>
<tr>
<td><code>--list-themes</code></td>
<td></td>
<td>List all available themes</td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h3 tabindex="-1" dir="auto">Examples</h3><a id="user-content-examples-1" aria-label="Permalink: Examples" href="#examples-1"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Iconic grid patterns
python create_map_poster.py -c &quot;New York&quot; -C &quot;USA&quot; -t noir -d 12000           # Manhattan grid
python create_map_poster.py -c &quot;Barcelona&quot; -C &quot;Spain&quot; -t warm_beige -d 8000   # Eixample district

# Waterfront &amp; canals
python create_map_poster.py -c &quot;Venice&quot; -C &quot;Italy&quot; -t blueprint -d 4000       # Canal network
python create_map_poster.py -c &quot;Amsterdam&quot; -C &quot;Netherlands&quot; -t ocean -d 6000  # Concentric canals
python create_map_poster.py -c &quot;Dubai&quot; -C &quot;UAE&quot; -t midnight_blue -d 15000     # Palm &amp; coastline

# Radial patterns
python create_map_poster.py -c &quot;Paris&quot; -C &quot;France&quot; -t pastel_dream -d 10000   # Haussmann boulevards
python create_map_poster.py -c &quot;Moscow&quot; -C &quot;Russia&quot; -t noir -d 12000          # Ring roads

# Organic old cities
python create_map_poster.py -c &quot;Tokyo&quot; -C &quot;Japan&quot; -t japanese_ink -d 15000    # Dense organic streets
python create_map_poster.py -c &quot;Marrakech&quot; -C &quot;Morocco&quot; -t terracotta -d 5000 # Medina maze
python create_map_poster.py -c &quot;Rome&quot; -C &quot;Italy&quot; -t warm_beige -d 8000        # Ancient layout

# Coastal cities
python create_map_poster.py -c &quot;San Francisco&quot; -C &quot;USA&quot; -t sunset -d 10000    # Peninsula grid
python create_map_poster.py -c &quot;Sydney&quot; -C &quot;Australia&quot; -t ocean -d 12000      # Harbor city
python create_map_poster.py -c &quot;Mumbai&quot; -C &quot;India&quot; -t contrast_zones -d 18000 # Coastal peninsula

# River cities
python create_map_poster.py -c &quot;London&quot; -C &quot;UK&quot; -t noir -d 15000              # Thames curves
python create_map_poster.py -c &quot;Budapest&quot; -C &quot;Hungary&quot; -t copper_patina -d 8000  # Danube split

# List available themes
python create_map_poster.py --list-themes"><pre><span><span>#</span> Iconic grid patterns</span>
python create_map_poster.py -c <span><span>"</span>New York<span>"</span></span> -C <span><span>"</span>USA<span>"</span></span> -t noir -d 12000           <span><span>#</span> Manhattan grid</span>
python create_map_poster.py -c <span><span>"</span>Barcelona<span>"</span></span> -C <span><span>"</span>Spain<span>"</span></span> -t warm_beige -d 8000   <span><span>#</span> Eixample district</span>

<span><span>#</span> Waterfront &amp; canals</span>
python create_map_poster.py -c <span><span>"</span>Venice<span>"</span></span> -C <span><span>"</span>Italy<span>"</span></span> -t blueprint -d 4000       <span><span>#</span> Canal network</span>
python create_map_poster.py -c <span><span>"</span>Amsterdam<span>"</span></span> -C <span><span>"</span>Netherlands<span>"</span></span> -t ocean -d 6000  <span><span>#</span> Concentric canals</span>
python create_map_poster.py -c <span><span>"</span>Dubai<span>"</span></span> -C <span><span>"</span>UAE<span>"</span></span> -t midnight_blue -d 15000     <span><span>#</span> Palm &amp; coastline</span>

<span><span>#</span> Radial patterns</span>
python create_map_poster.py -c <span><span>"</span>Paris<span>"</span></span> -C <span><span>"</span>France<span>"</span></span> -t pastel_dream -d 10000   <span><span>#</span> Haussmann boulevards</span>
python create_map_poster.py -c <span><span>"</span>Moscow<span>"</span></span> -C <span><span>"</span>Russia<span>"</span></span> -t noir -d 12000          <span><span>#</span> Ring roads</span>

<span><span>#</span> Organic old cities</span>
python create_map_poster.py -c <span><span>"</span>Tokyo<span>"</span></span> -C <span><span>"</span>Japan<span>"</span></span> -t japanese_ink -d 15000    <span><span>#</span> Dense organic streets</span>
python create_map_poster.py -c <span><span>"</span>Marrakech<span>"</span></span> -C <span><span>"</span>Morocco<span>"</span></span> -t terracotta -d 5000 <span><span>#</span> Medina maze</span>
python create_map_poster.py -c <span><span>"</span>Rome<span>"</span></span> -C <span><span>"</span>Italy<span>"</span></span> -t warm_beige -d 8000        <span><span>#</span> Ancient layout</span>

<span><span>#</span> Coastal cities</span>
python create_map_poster.py -c <span><span>"</span>San Francisco<span>"</span></span> -C <span><span>"</span>USA<span>"</span></span> -t sunset -d 10000    <span><span>#</span> Peninsula grid</span>
python create_map_poster.py -c <span><span>"</span>Sydney<span>"</span></span> -C <span><span>"</span>Australia<span>"</span></span> -t ocean -d 12000      <span><span>#</span> Harbor city</span>
python create_map_poster.py -c <span><span>"</span>Mumbai<span>"</span></span> -C <span><span>"</span>India<span>"</span></span> -t contrast_zones -d 18000 <span><span>#</span> Coastal peninsula</span>

<span><span>#</span> River cities</span>
python create_map_poster.py -c <span><span>"</span>London<span>"</span></span> -C <span><span>"</span>UK<span>"</span></span> -t noir -d 15000              <span><span>#</span> Thames curves</span>
python create_map_poster.py -c <span><span>"</span>Budapest<span>"</span></span> -C <span><span>"</span>Hungary<span>"</span></span> -t copper_patina -d 8000  <span><span>#</span> Danube split</span>

<span><span>#</span> List available themes</span>
python create_map_poster.py --list-themes</pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Distance Guide</h3><a id="user-content-distance-guide" aria-label="Permalink: Distance Guide" href="#distance-guide"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Distance</th>
<th>Best for</th>
</tr>
</thead>
<tbody>
<tr>
<td>4000-6000m</td>
<td>Small/dense cities (Venice, Amsterdam center)</td>
</tr>
<tr>
<td>8000-12000m</td>
<td>Medium cities, focused downtown (Paris, Barcelona)</td>
</tr>
<tr>
<td>15000-20000m</td>
<td>Large metros, full city view (Tokyo, Mumbai)</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h2 tabindex="-1" dir="auto">Themes</h2><a id="user-content-themes" aria-label="Permalink: Themes" href="#themes"></a></p>
<p dir="auto">17 themes available in <code>themes/</code> directory:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Theme</th>
<th>Style</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>feature_based</code></td>
<td>Classic black &amp; white with road hierarchy</td>
</tr>
<tr>
<td><code>gradient_roads</code></td>
<td>Smooth gradient shading</td>
</tr>
<tr>
<td><code>contrast_zones</code></td>
<td>High contrast urban density</td>
</tr>
<tr>
<td><code>noir</code></td>
<td>Pure black background, white roads</td>
</tr>
<tr>
<td><code>midnight_blue</code></td>
<td>Navy background with gold roads</td>
</tr>
<tr>
<td><code>blueprint</code></td>
<td>Architectural blueprint aesthetic</td>
</tr>
<tr>
<td><code>neon_cyberpunk</code></td>
<td>Dark with electric pink/cyan</td>
</tr>
<tr>
<td><code>warm_beige</code></td>
<td>Vintage sepia tones</td>
</tr>
<tr>
<td><code>pastel_dream</code></td>
<td>Soft muted pastels</td>
</tr>
<tr>
<td><code>japanese_ink</code></td>
<td>Minimalist ink wash style</td>
</tr>
<tr>
<td><code>forest</code></td>
<td>Deep greens and sage</td>
</tr>
<tr>
<td><code>ocean</code></td>
<td>Blues and teals for coastal cities</td>
</tr>
<tr>
<td><code>terracotta</code></td>
<td>Mediterranean warmth</td>
</tr>
<tr>
<td><code>sunset</code></td>
<td>Warm oranges and pinks</td>
</tr>
<tr>
<td><code>autumn</code></td>
<td>Seasonal burnt oranges and reds</td>
</tr>
<tr>
<td><code>copper_patina</code></td>
<td>Oxidized copper aesthetic</td>
</tr>
<tr>
<td><code>monochrome_blue</code></td>
<td>Single blue color family</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h2 tabindex="-1" dir="auto">Output</h2><a id="user-content-output" aria-label="Permalink: Output" href="#output"></a></p>
<p dir="auto">Posters are saved to <code>posters/</code> directory with format:</p>
<div data-snippet-clipboard-copy-content="{city}_{theme}_{YYYYMMDD_HHMMSS}.png"><pre><code>{city}_{theme}_{YYYYMMDD_HHMMSS}.png
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Adding Custom Themes</h2><a id="user-content-adding-custom-themes" aria-label="Permalink: Adding Custom Themes" href="#adding-custom-themes"></a></p>
<p dir="auto">Create a JSON file in <code>themes/</code> directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &quot;name&quot;: &quot;My Theme&quot;,
  &quot;description&quot;: &quot;Description of the theme&quot;,
  &quot;bg&quot;: &quot;#FFFFFF&quot;,
  &quot;text&quot;: &quot;#000000&quot;,
  &quot;gradient_color&quot;: &quot;#FFFFFF&quot;,
  &quot;water&quot;: &quot;#C0C0C0&quot;,
  &quot;parks&quot;: &quot;#F0F0F0&quot;,
  &quot;road_motorway&quot;: &quot;#0A0A0A&quot;,
  &quot;road_primary&quot;: &quot;#1A1A1A&quot;,
  &quot;road_secondary&quot;: &quot;#2A2A2A&quot;,
  &quot;road_tertiary&quot;: &quot;#3A3A3A&quot;,
  &quot;road_residential&quot;: &quot;#4A4A4A&quot;,
  &quot;road_default&quot;: &quot;#3A3A3A&quot;
}"><pre>{
  <span>"name"</span>: <span><span>"</span>My Theme<span>"</span></span>,
  <span>"description"</span>: <span><span>"</span>Description of the theme<span>"</span></span>,
  <span>"bg"</span>: <span><span>"</span>#FFFFFF<span>"</span></span>,
  <span>"text"</span>: <span><span>"</span>#000000<span>"</span></span>,
  <span>"gradient_color"</span>: <span><span>"</span>#FFFFFF<span>"</span></span>,
  <span>"water"</span>: <span><span>"</span>#C0C0C0<span>"</span></span>,
  <span>"parks"</span>: <span><span>"</span>#F0F0F0<span>"</span></span>,
  <span>"road_motorway"</span>: <span><span>"</span>#0A0A0A<span>"</span></span>,
  <span>"road_primary"</span>: <span><span>"</span>#1A1A1A<span>"</span></span>,
  <span>"road_secondary"</span>: <span><span>"</span>#2A2A2A<span>"</span></span>,
  <span>"road_tertiary"</span>: <span><span>"</span>#3A3A3A<span>"</span></span>,
  <span>"road_residential"</span>: <span><span>"</span>#4A4A4A<span>"</span></span>,
  <span>"road_default"</span>: <span><span>"</span>#3A3A3A<span>"</span></span>
}</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Project Structure</h2><a id="user-content-project-structure" aria-label="Permalink: Project Structure" href="#project-structure"></a></p>
<div data-snippet-clipboard-copy-content="map_poster/
├── create_map_poster.py          # Main script
├── themes/               # Theme JSON files
├── fonts/                # Roboto font files
├── posters/              # Generated posters
└── README.md"><pre><code>map_poster/
├── create_map_poster.py          # Main script
├── themes/               # Theme JSON files
├── fonts/                # Roboto font files
├── posters/              # Generated posters
└── README.md
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Hacker's Guide</h2><a id="user-content-hackers-guide" aria-label="Permalink: Hacker's Guide" href="#hackers-guide"></a></p>
<p dir="auto">Quick reference for contributors who want to extend or modify the script.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Architecture Overview</h3><a id="user-content-architecture-overview" aria-label="Permalink: Architecture Overview" href="#architecture-overview"></a></p>
<div data-snippet-clipboard-copy-content="┌─────────────────┐     ┌──────────────┐     ┌─────────────────┐
│   CLI Parser    │────▶│  Geocoding   │────▶│  Data Fetching  │
│   (argparse)    │     │  (Nominatim) │     │    (OSMnx)      │
└─────────────────┘     └──────────────┘     └─────────────────┘
                                                     │
                        ┌──────────────┐             ▼
                        │    Output    │◀────┌─────────────────┐
                        │  (matplotlib)│     │   Rendering     │
                        └──────────────┘     │  (matplotlib)   │
                                             └─────────────────┘"><pre><code>┌─────────────────┐     ┌──────────────┐     ┌─────────────────┐
│   CLI Parser    │────▶│  Geocoding   │────▶│  Data Fetching  │
│   (argparse)    │     │  (Nominatim) │     │    (OSMnx)      │
└─────────────────┘     └──────────────┘     └─────────────────┘
                                                     │
                        ┌──────────────┐             ▼
                        │    Output    │◀────┌─────────────────┐
                        │  (matplotlib)│     │   Rendering     │
                        └──────────────┘     │  (matplotlib)   │
                                             └─────────────────┘
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Key Functions</h3><a id="user-content-key-functions" aria-label="Permalink: Key Functions" href="#key-functions"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Function</th>
<th>Purpose</th>
<th>Modify when...</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>get_coordinates()</code></td>
<td>City → lat/lon via Nominatim</td>
<td>Switching geocoding provider</td>
</tr>
<tr>
<td><code>create_poster()</code></td>
<td>Main rendering pipeline</td>
<td>Adding new map layers</td>
</tr>
<tr>
<td><code>get_edge_colors_by_type()</code></td>
<td>Road color by OSM highway tag</td>
<td>Changing road styling</td>
</tr>
<tr>
<td><code>get_edge_widths_by_type()</code></td>
<td>Road width by importance</td>
<td>Adjusting line weights</td>
</tr>
<tr>
<td><code>create_gradient_fade()</code></td>
<td>Top/bottom fade effect</td>
<td>Modifying gradient overlay</td>
</tr>
<tr>
<td><code>load_theme()</code></td>
<td>JSON theme → dict</td>
<td>Adding new theme properties</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h3 tabindex="-1" dir="auto">Rendering Layers (z-order)</h3><a id="user-content-rendering-layers-z-order" aria-label="Permalink: Rendering Layers (z-order)" href="#rendering-layers-z-order"></a></p>
<div data-snippet-clipboard-copy-content="z=11  Text labels (city, country, coords)
z=10  Gradient fades (top &amp; bottom)
z=3   Roads (via ox.plot_graph)
z=2   Parks (green polygons)
z=1   Water (blue polygons)
z=0   Background color"><pre><code>z=11  Text labels (city, country, coords)
z=10  Gradient fades (top &amp; bottom)
z=3   Roads (via ox.plot_graph)
z=2   Parks (green polygons)
z=1   Water (blue polygons)
z=0   Background color
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">OSM Highway Types → Road Hierarchy</h3><a id="user-content-osm-highway-types--road-hierarchy" aria-label="Permalink: OSM Highway Types → Road Hierarchy" href="#osm-highway-types--road-hierarchy"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# In get_edge_colors_by_type() and get_edge_widths_by_type()
motorway, motorway_link     → Thickest (1.2), darkest
trunk, primary              → Thick (1.0)
secondary                   → Medium (0.8)
tertiary                    → Thin (0.6)
residential, living_street  → Thinnest (0.4), lightest"><pre><span># In get_edge_colors_by_type() and get_edge_widths_by_type()</span>
<span>motorway</span>, <span>motorway_link</span>     → <span>Thickest</span> (<span>1.2</span>), <span>darkest</span>
<span>trunk</span>, <span>primary</span>              → <span>Thick</span> (<span>1.0</span>)
<span>secondary</span>                   → <span>Medium</span> (<span>0.8</span>)
<span>tertiary</span>                    → <span>Thin</span> (<span>0.6</span>)
<span>residential</span>, <span>living_street</span>  → <span>Thinnest</span> (<span>0.4</span>), <span>lightest</span></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Adding New Features</h3><a id="user-content-adding-new-features" aria-label="Permalink: Adding New Features" href="#adding-new-features"></a></p>
<p dir="auto"><strong>New map layer (e.g., railways):</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# In create_poster(), after parks fetch:
try:
    railways = ox.features_from_point(point, tags={'railway': 'rail'}, dist=dist)
except:
    railways = None

# Then plot before roads:
if railways is not None and not railways.empty:
    railways.plot(ax=ax, color=THEME['railway'], linewidth=0.5, zorder=2.5)"><pre><span># In create_poster(), after parks fetch:</span>
<span>try</span>:
    <span>railways</span> <span>=</span> <span>ox</span>.<span>features_from_point</span>(<span>point</span>, <span>tags</span><span>=</span>{<span>'railway'</span>: <span>'rail'</span>}, <span>dist</span><span>=</span><span>dist</span>)
<span>except</span>:
    <span>railways</span> <span>=</span> <span>None</span>

<span># Then plot before roads:</span>
<span>if</span> <span>railways</span> <span><span>is</span> <span>not</span></span> <span>None</span> <span>and</span> <span>not</span> <span>railways</span>.<span>empty</span>:
    <span>railways</span>.<span>plot</span>(<span>ax</span><span>=</span><span>ax</span>, <span>color</span><span>=</span><span>THEME</span>[<span>'railway'</span>], <span>linewidth</span><span>=</span><span>0.5</span>, <span>zorder</span><span>=</span><span>2.5</span>)</pre></div>
<p dir="auto"><strong>New theme property:</strong></p>
<ol dir="auto">
<li>Add to theme JSON: <code>"railway": "#FF0000"</code></li>
<li>Use in code: <code>THEME['railway']</code></li>
<li>Add fallback in <code>load_theme()</code> default dict</li>
</ol>
<p dir="auto"><h3 tabindex="-1" dir="auto">Typography Positioning</h3><a id="user-content-typography-positioning" aria-label="Permalink: Typography Positioning" href="#typography-positioning"></a></p>
<p dir="auto">All text uses <code>transform=ax.transAxes</code> (0-1 normalized coordinates):</p>
<div data-snippet-clipboard-copy-content="y=0.14  City name (spaced letters)
y=0.125 Decorative line
y=0.10  Country name
y=0.07  Coordinates
y=0.02  Attribution (bottom-right)"><pre><code>y=0.14  City name (spaced letters)
y=0.125 Decorative line
y=0.10  Country name
y=0.07  Coordinates
y=0.02  Attribution (bottom-right)
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Useful OSMnx Patterns</h3><a id="user-content-useful-osmnx-patterns" aria-label="Permalink: Useful OSMnx Patterns" href="#useful-osmnx-patterns"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Get all buildings
buildings = ox.features_from_point(point, tags={'building': True}, dist=dist)

# Get specific amenities
cafes = ox.features_from_point(point, tags={'amenity': 'cafe'}, dist=dist)

# Different network types
G = ox.graph_from_point(point, dist=dist, network_type='drive')  # roads only
G = ox.graph_from_point(point, dist=dist, network_type='bike')   # bike paths
G = ox.graph_from_point(point, dist=dist, network_type='walk')   # pedestrian"><pre><span># Get all buildings</span>
<span>buildings</span> <span>=</span> <span>ox</span>.<span>features_from_point</span>(<span>point</span>, <span>tags</span><span>=</span>{<span>'building'</span>: <span>True</span>}, <span>dist</span><span>=</span><span>dist</span>)

<span># Get specific amenities</span>
<span>cafes</span> <span>=</span> <span>ox</span>.<span>features_from_point</span>(<span>point</span>, <span>tags</span><span>=</span>{<span>'amenity'</span>: <span>'cafe'</span>}, <span>dist</span><span>=</span><span>dist</span>)

<span># Different network types</span>
<span>G</span> <span>=</span> <span>ox</span>.<span>graph_from_point</span>(<span>point</span>, <span>dist</span><span>=</span><span>dist</span>, <span>network_type</span><span>=</span><span>'drive'</span>)  <span># roads only</span>
<span>G</span> <span>=</span> <span>ox</span>.<span>graph_from_point</span>(<span>point</span>, <span>dist</span><span>=</span><span>dist</span>, <span>network_type</span><span>=</span><span>'bike'</span>)   <span># bike paths</span>
<span>G</span> <span>=</span> <span>ox</span>.<span>graph_from_point</span>(<span>point</span>, <span>dist</span><span>=</span><span>dist</span>, <span>network_type</span><span>=</span><span>'walk'</span>)   <span># pedestrian</span></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Performance Tips</h3><a id="user-content-performance-tips" aria-label="Permalink: Performance Tips" href="#performance-tips"></a></p>
<ul dir="auto">
<li>Large <code>dist</code> values (&gt;20km) = slow downloads + memory heavy</li>
<li>Cache coordinates locally to avoid Nominatim rate limits</li>
<li>Use <code>network_type='drive'</code> instead of <code>'all'</code> for faster renders</li>
<li>Reduce <code>dpi</code> from 300 to 150 for quick previews</li>
</ul>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[ClickHouse acquires Langfuse (202 pts)]]></title>
            <link>https://langfuse.com/blog/joining-clickhouse</link>
            <guid>46656552</guid>
            <pubDate>Sat, 17 Jan 2026 09:15:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://langfuse.com/blog/joining-clickhouse">https://langfuse.com/blog/joining-clickhouse</a>, See on <a href="https://news.ycombinator.com/item?id=46656552">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><main><div><p><span>2026/01/16</span></p><p>Our goal continues to be building the best LLM engineering platform</p></div>

<p>ClickHouse has acquired Langfuse.</p>
<p>If you’re reading this as a Langfuse user, your first question is probably: <span>What does this mean for me?</span></p>
<p>Our roadmap stays the same, our goal continues to be building the best LLM engineering platform, and we remain committed to open source and self-hosting. There are no immediate changes to how you use Langfuse and how you can reach out to us.</p>
<p>What <em>does</em> change is our ability to move faster. With ClickHouse behind us, we can invest more deeply into performance, reliability, and our roadmap that helps teams build and improve AI applications in production.</p>
<h2 id="what-stays-the-same">What stays the same<a href="#what-stays-the-same" aria-label="Permalink for this section"></a></h2>
<p>This is the section we would want to read first, too.</p>
<ul>
<li><strong>Langfuse stays open source and self‑hostable.</strong> There are no planned changes to licensing. As you know, we leaned heavily into OSS over the last years.</li>
<li><strong>Langfuse Cloud keeps running as‑is.</strong> Same product, same endpoints, same experience.</li>
<li><strong>Support stays the same.</strong> Same channels, same SLAs for existing customers.</li>
</ul>
<h2 id="what-gets-better-now">What gets better now<a href="#what-gets-better-now" aria-label="Permalink for this section"></a></h2>
<p>Joining Clickhouse compresses years of operational learning into immediate, real customer benefits.</p>
<ul>
<li><strong>More engineering leverage on the hardest parts</strong>. Langfuse is a data‑intensive product. Working closely with the ClickHouse engineering team helps us push performance and reliability.</li>
<li><strong>Faster progress on enhanced enterprise-grade compliance and security</strong>, with the help of Clickhouse’s resources.</li>
<li><strong>Learning from Clickhouse’s customer success and support playbook</strong>. This puts us years ahead and allows us to spend more time on what we really care about: our users.</li>
</ul>
<h2 id="a-quick-look-back">A quick look back<a href="#a-quick-look-back" aria-label="Permalink for this section"></a></h2>

<p>Langfuse started the same way many LLM products start: we were building agents ourselves. And we constantly ran into the same problems.</p>
<p>Building LLM apps is easy to demo and hard to run in production. Debugging is different, quality is non‑deterministic, and the iteration loop is messy. When we did Y Combinator in early 2023, we saw this every week, both in our own projects and in what other founders in our cohort were working on.</p>
<p>So we built a duct tape version of what we wished existed: tracing and evaluation primitives that are <strong>easy to add, easy to self‑host, and actually useful for iterating</strong>.</p>
<p>The very first version was intentionally simple. It ran on <strong>Postgres</strong>, because speed of shipping mattered more than theoretical scaling. That got us to a real product and a real community fast.</p>
<p>Then people actually started to use the product more than we could have imagined.</p>

<p>As adoption grew, Postgres became the bottleneck for the workloads Langfuse needed to support (high‑throughput ingestion + fast analytical reads). With <strong>Langfuse v3</strong>, we switched the core data layer to <strong>ClickHouse</strong> to make Langfuse scale for production workloads, both in Cloud and self‑hosted deployments.</p>

<p><em>And if you like infrastructure deep dives, here’s the <a href="https://langfuse.com/blog/2024-12-langfuse-v3-infrastructure-evolution" target="_blank" rel="noreferrer">v3 migration write‑up</a>.</em></p>
<h2 id="why-join-clickhouse">Why join ClickHouse<a href="#why-join-clickhouse" aria-label="Permalink for this section"></a></h2>
<p>There are a lot of ways this could have gone. We didn’t plan to sell the company. Actually, we had Term Sheets for a great Series A and were looking forward to some days off over Christmas after an intense year.</p>
<p>What changed wasn’t our conviction in Langfuse, it was realizing how much faster we can go together with ClickHouse, while staying true to what makes Langfuse work: open source, self-hosting, and a product that’s built for real production workloads.</p>
<h3 id="a-shared-history-before-the-acquisition">A shared history (before the acquisition)<a href="#a-shared-history-before-the-acquisition" aria-label="Permalink for this section"></a></h3>
<p>This dialogue didn’t start with a term sheet. Because Langfuse runs on ClickHouse, we naturally ended up collaborating early and often.</p>
<ul>
<li>We’ve always been closely in touch with many teams at ClickHouse: sharing feedback with the database team, and using new features to make Langfuse more reliable. For example, compute-compute separation helps us to reduce the risk of noisy-neighbours on Langfuse Cloud.</li>
<li>Langfuse Cloud is a large customer of ClickHouse Cloud.</li>
<li>Teams at ClickHouse use Langfuse to improve their agentic applications.</li>
<li>We invested heavily in ClickHouse-backed self-hosting: documentation, templates, and deployment patterns, and collaborated closely with ClickHouse on improving that experience.</li>
<li>As a result, Langfuse introduced thousands of teams to ClickHouse when upgrading from Langfuse v2 to v3.</li>
<li>We’ve done community meetups together: a ClickHouse meetup at our Berlin office, another one in San Francisco, and an OpenHouse talk in Amsterdam.</li>
</ul>
<p>Langfuse runs on ClickHouse, ClickHouse uses Langfuse to optimize its agentic products, we share lots of customers and OSS deployments; <strong>that gives ClickHouse every incentive to keep Langfuse fast, reliable, and boringly dependable at scale.</strong></p>
<p>So in many ways, we operated like long-term partners. This acquisition is a way to make that partnership permanent — and invest aggressively together.</p>
<p><em>Max shared on how we use ClickHouse to keep product performance ahead of demand at ClickHouse Open House (<a href="https://www.youtube.com/watch?v=NXYQ5odATrM" target="_blank" rel="noreferrer">recording</a>) in Amsterdam.</em></p>

<h3 id="culture-and-engineering-fit">Culture and engineering fit<a href="#culture-and-engineering-fit" aria-label="Permalink for this section"></a></h3>
<p>The first time we met Aaron, Yury, Alexey, Tanya, Ryadh, and Pete in-person ended up in a long lunch in Amsterdam. It became obvious we share a similar view on building great developer tooling, how that drives everything within our companies, and how fast analytics is increasingly foundational for building and optimizing agentic products.</p>
<p>We already knew that ClickHouse is one of the best infrastructure engineering teams in the world. More importantly, the engineering culture feels like an instant match:</p>
<ul>
<li>open-source identity and stewardship</li>
<li>developer-first product instincts</li>
<li>performance and reliability as product features (not afterthoughts)</li>
</ul>
<p>The whole Langfuse team will join ClickHouse to continue building Langfuse. All of these aspects were important to us and we couldn’t be more excited.</p>
<h2 id="what-were-focused-on-next">What we’re focused on next<a href="#what-were-focused-on-next" aria-label="Permalink for this section"></a></h2>
<p>Our north star doesn’t change: <strong>help teams ship useful, reliable agents by closing the loop from production data to better prompts, evaluations, and product decisions.</strong></p>
<p>Concretely, we’re investing in:</p>
<ul>
<li><strong>Production monitoring and analytics</strong> for real agent systems (not just offline evals).</li>
<li><strong>Workflows across tracing, labeling, and experiments</strong> so iteration loops get shorter.</li>
<li><strong>More performance and scale</strong>—especially for large self‑hosted and enterprise deployments.</li>
<li><strong>More polish</strong> (UI/UX, developer experience, and docs) so the product stays simple even as the space gets more complex.</li>
</ul>

<h2 id="thank-you">Thank you<a href="#thank-you" aria-label="Permalink for this section"></a></h2>
<p>Langfuse exists because the community pushed it forward, through GitHub issues, PRs, feedback, and lots of Slack messages and spontaneous calls to dig into a product feature together.</p>
<p>We’re grateful for the trust you’ve put in us. Joining ClickHouse is our way of honoring that trust by putting more resources behind the thing we care about most: building a product you can rely on.</p>
<p>We’re excited for what’s next!<br>
<!-- -->Max, Clemens, and Marc</p>
<hr>
<h2 id="faq">FAQ<a href="#faq" aria-label="Permalink for this section"></a></h2>
<p><strong>Is Langfuse still open source?</strong><br>Yes. No licensing changes planned.</p>
<p><strong>Can I still self‑host Langfuse?</strong><br>Yes. Self‑hosting is a first‑class path.</p>
<p><strong>Does anything change for Langfuse Cloud customers today?</strong><br>No. Same product, same endpoints, same contracts.</p>
<p><strong>Where do I go for support?</strong><br>No changes: <a href="https://langfuse.com/support" target="_blank" rel="noreferrer">https://langfuse.com/support</a></p>
<p><strong>Will the Langfuse team stay on Langfuse?</strong><br>Yes. The team is joining ClickHouse and will keep building Langfuse. Also, we continue <a href="https://langfuse.com/careers">hiring</a> in Berlin and SF.</p>
<h2 id="join-the-discussion">Join the discussion<a href="#join-the-discussion" aria-label="Permalink for this section"></a></h2>
<p>If you have any other questions, let’s discuss together on <a href="https://github.com/orgs/langfuse/discussions/11593" target="_blank" rel="noreferrer">GitHub Discussions</a>.</p>
<p>If you’re an enterprise customer and have additional questions, feel free to reach out to <a href="mailto:enterprise@langfuse.com">enterprise@langfuse.com</a></p></main></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Streaming gigabyte medical images from S3 without downloading them (144 pts)]]></title>
            <link>https://github.com/PABannier/WSIStreamer</link>
            <guid>46656358</guid>
            <pubDate>Sat, 17 Jan 2026 08:46:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/PABannier/WSIStreamer">https://github.com/PABannier/WSIStreamer</a>, See on <a href="https://news.ycombinator.com/item?id=46656358">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">WSI Streamer</h2><a id="user-content-wsi-streamer" aria-label="Permalink: WSI Streamer" href="#wsi-streamer"></a></p>
<p dir="auto"><a href="https://github.com/PABannier/WSIStreamer/actions/workflows/CI.yml"><img src="https://github.com/PABannier/WSIStreamer/actions/workflows/CI.yml/badge.svg" alt="CI"></a>
<a href="https://crates.io/crates/wsi-streamer" rel="nofollow"><img src="https://camo.githubusercontent.com/aeff7b2831f8a5630023d496fbbc18fadf2deb911aa95336a0dffc4c5e0c050c/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f7773692d73747265616d65722e737667" alt="crates.io" data-canonical-src="https://img.shields.io/crates/v/wsi-streamer.svg"></a>
<a href="https://github.com/PABannier/WSIStreamer/pkgs/container/wsistreamer"><img src="https://camo.githubusercontent.com/684e486c46663989c82ef029b301d00d7a9576d50ab0b0f92d23ba6e5541efd7/68747470733a2f2f676863722d62616467652e6567706c2e6465762f706162616e6e6965722f77736973747265616d65722f73697a653f636f6c6f723d253233343463633131267461673d6c6174657374266c6162656c3d696d6167652b73697a65267472696d3d" alt="Docker" data-canonical-src="https://ghcr-badge.egpl.dev/pabannier/wsistreamer/size?color=%2344cc11&amp;tag=latest&amp;label=image+size&amp;trim="></a></p>
<p dir="auto">A modern, cloud-native tile server for Whole Slide Images. One command to start serving tiles directly from S3.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/45e218fea9c202eca79c1e0bded97546f9cddb92efbe1453ce2e74ff772d9646/68747470733a2f2f692e696d6775722e636f6d2f49484d6951537a2e676966"><img src="https://camo.githubusercontent.com/45e218fea9c202eca79c1e0bded97546f9cddb92efbe1453ce2e74ff772d9646/68747470733a2f2f692e696d6775722e636f6d2f49484d6951537a2e676966" alt="Video demo" data-animated-image="" data-canonical-src="https://i.imgur.com/IHMiQSz.gif"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Installation (requires Rust, see alternatives below)
cargo install wsi-streamer

# On your local machine
wsi-streamer s3://my-slides-bucket --s3-region eu-west-3"><pre><span><span>#</span> Installation (requires Rust, see alternatives below)</span>
cargo install wsi-streamer

<span><span>#</span> On your local machine</span>
wsi-streamer s3://my-slides-bucket --s3-region eu-west-3</pre></div>
<p dir="auto">That's it. No configuration files, no local storage, no complex setup. Open <code>http://localhost:3000/view/sample.svs</code> in your browser to view a slide.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Why WSI Streamer?</h2><a id="user-content-why-wsi-streamer" aria-label="Permalink: Why WSI Streamer?" href="#why-wsi-streamer"></a></p>
<p dir="auto">Whole Slide Images are large (1-3GB+) and typically live in object storage. Traditional viewers require downloading entire files before serving a single tile. WSIStreamer takes a different approach: it understands slide formats natively, fetches only the bytes needed via HTTP range requests, and returns JPEG tiles immediately.</p>
<ul dir="auto">
<li><strong>Range-based streaming</strong> — fetches only the bytes needed for each tile, no local files</li>
<li><strong>Built-in viewer</strong> — OpenSeadragon-based web viewer with pan, zoom, and dark theme</li>
<li><strong>Native format support</strong> — Rust parsers for Aperio SVS and pyramidal TIFF</li>
<li><strong>Production-ready</strong> — HMAC-SHA256 signed URL authentication</li>
<li><strong>Multi-level caching</strong> — slides, blocks, and encoded tiles</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<p dir="auto">Install from <a href="https://crates.io/crates/wsi-streamer" rel="nofollow">crates.io</a>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo install wsi-streamer"><pre>cargo install wsi-streamer</pre></div>
<p dir="auto">Or build from source:</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/PABannier/WSIStreamer.git
cd WSIStreamer
cargo build --release"><pre>git clone https://github.com/PABannier/WSIStreamer.git
<span>cd</span> WSIStreamer
cargo build --release</pre></div>
<p dir="auto">Or run with Docker:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Pull from GitHub Container Registry
docker run -p 3000:3000 -e WSI_S3_BUCKET=my-bucket ghcr.io/pabannier/wsistreamer:latest

# Or use Docker Compose for local development with MinIO
docker compose up --build"><pre><span><span>#</span> Pull from GitHub Container Registry</span>
docker run -p 3000:3000 -e WSI_S3_BUCKET=my-bucket ghcr.io/pabannier/wsistreamer:latest

<span><span>#</span> Or use Docker Compose for local development with MinIO</span>
docker compose up --build</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Basic</h3><a id="user-content-basic" aria-label="Permalink: Basic" href="#basic"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Serve slides from S3
wsi-streamer s3://my-slides

# Custom port
wsi-streamer s3://my-slides --port 8080

# S3-compatible storage (MinIO, etc.)
wsi-streamer s3://slides --s3-endpoint http://localhost:9000"><pre><span><span>#</span> Serve slides from S3</span>
wsi-streamer s3://my-slides

<span><span>#</span> Custom port</span>
wsi-streamer s3://my-slides --port 8080

<span><span>#</span> S3-compatible storage (MinIO, etc.)</span>
wsi-streamer s3://slides --s3-endpoint http://localhost:9000</pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">API</h3><a id="user-content-api" aria-label="Permalink: API" href="#api"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# List slides
curl http://localhost:3000/slides

# Get slide metadata
curl http://localhost:3000/slides/sample.svs

# Fetch a tile (level 0, position 0,0)
curl http://localhost:3000/tiles/sample.svs/0/0/0.jpg -o tile.jpg

# Get thumbnail
curl &quot;http://localhost:3000/slides/sample.svs/thumbnail?max_size=256&quot; -o thumb.jpg"><pre><span><span>#</span> List slides</span>
curl http://localhost:3000/slides

<span><span>#</span> Get slide metadata</span>
curl http://localhost:3000/slides/sample.svs

<span><span>#</span> Fetch a tile (level 0, position 0,0)</span>
curl http://localhost:3000/tiles/sample.svs/0/0/0.jpg -o tile.jpg

<span><span>#</span> Get thumbnail</span>
curl <span><span>"</span>http://localhost:3000/slides/sample.svs/thumbnail?max_size=256<span>"</span></span> -o thumb.jpg</pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Authentication</h3><a id="user-content-authentication" aria-label="Permalink: Authentication" href="#authentication"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Enable HMAC-SHA256 authentication
wsi-streamer s3://my-slides --auth-enabled --auth-secret &quot;$SECRET&quot;

# Generate signed URLs
wsi-streamer sign --path /tiles/slide.svs/0/0/0.jpg --secret &quot;$SECRET&quot; --base-url http://localhost:3000"><pre><span><span>#</span> Enable HMAC-SHA256 authentication</span>
wsi-streamer s3://my-slides --auth-enabled --auth-secret <span><span>"</span><span>$SECRET</span><span>"</span></span>

<span><span>#</span> Generate signed URLs</span>
wsi-streamer sign --path /tiles/slide.svs/0/0/0.jpg --secret <span><span>"</span><span>$SECRET</span><span>"</span></span> --base-url http://localhost:3000</pre></div>
<p dir="auto">The web viewer handles authentication automatically when enabled.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Validation</h3><a id="user-content-validation" aria-label="Permalink: Validation" href="#validation"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Check S3 connectivity
wsi-streamer check s3://my-slides

# List available slides
wsi-streamer check s3://my-slides --list-slides

# Test a specific slide
wsi-streamer check s3://my-slides --test-slide sample.svs"><pre><span><span>#</span> Check S3 connectivity</span>
wsi-streamer check s3://my-slides

<span><span>#</span> List available slides</span>
wsi-streamer check s3://my-slides --list-slides

<span><span>#</span> Test a specific slide</span>
wsi-streamer check s3://my-slides --test-slide sample.svs</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Configuration</h2><a id="user-content-configuration" aria-label="Permalink: Configuration" href="#configuration"></a></p>
<p dir="auto">All options can be set via CLI flags or environment variables:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Option</th>
<th>Env Var</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--host</code></td>
<td><code>WSI_HOST</code></td>
<td><code>0.0.0.0</code></td>
<td>Bind address</td>
</tr>
<tr>
<td><code>--port</code></td>
<td><code>WSI_PORT</code></td>
<td><code>3000</code></td>
<td>HTTP port</td>
</tr>
<tr>
<td><code>--s3-bucket</code></td>
<td><code>WSI_S3_BUCKET</code></td>
<td>—</td>
<td>S3 bucket name</td>
</tr>
<tr>
<td><code>--s3-endpoint</code></td>
<td><code>WSI_S3_ENDPOINT</code></td>
<td>—</td>
<td>Custom S3 endpoint</td>
</tr>
<tr>
<td><code>--s3-region</code></td>
<td><code>WSI_S3_REGION</code></td>
<td><code>us-east-1</code></td>
<td>AWS region</td>
</tr>
<tr>
<td><code>--auth-enabled</code></td>
<td><code>WSI_AUTH_ENABLED</code></td>
<td><code>false</code></td>
<td>Enable authentication</td>
</tr>
<tr>
<td><code>--auth-secret</code></td>
<td><code>WSI_AUTH_SECRET</code></td>
<td>—</td>
<td>HMAC secret key</td>
</tr>
<tr>
<td><code>--cache-slides</code></td>
<td><code>WSI_CACHE_SLIDES</code></td>
<td><code>100</code></td>
<td>Max slides in cache</td>
</tr>
<tr>
<td><code>--cache-tiles</code></td>
<td><code>WSI_CACHE_TILES</code></td>
<td><code>100MB</code></td>
<td>Tile cache size</td>
</tr>
<tr>
<td><code>--jpeg-quality</code></td>
<td><code>WSI_JPEG_QUALITY</code></td>
<td><code>80</code></td>
<td>JPEG quality (1-100)</td>
</tr>
<tr>
<td><code>--cors-origins</code></td>
<td><code>WSI_CORS_ORIGINS</code></td>
<td>any</td>
<td>Allowed CORS origins</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Run <code>wsi-streamer --help</code> for full details.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">API Reference</h2><a id="user-content-api-reference" aria-label="Permalink: API Reference" href="#api-reference"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /health</code></td>
<td>Health check</td>
</tr>
<tr>
<td><code>GET /view/{slide_id}</code></td>
<td>Web viewer</td>
</tr>
<tr>
<td><code>GET /tiles/{slide_id}/{level}/{x}/{y}.jpg</code></td>
<td>Fetch tile</td>
</tr>
<tr>
<td><code>GET /slides</code></td>
<td>List slides</td>
</tr>
<tr>
<td><code>GET /slides/{slide_id}</code></td>
<td>Slide metadata</td>
</tr>
<tr>
<td><code>GET /slides/{slide_id}/thumbnail</code></td>
<td>Thumbnail</td>
</tr>
<tr>
<td><code>GET /slides/{slide_id}/dzi</code></td>
<td>DZI descriptor</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">See <a href="https://github.com/PABannier/WSIStreamer/blob/main/API_SPECIFICATIONS.md">API_SPECIFICATIONS.md</a> for complete documentation.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Supported Formats</h2><a id="user-content-supported-formats" aria-label="Permalink: Supported Formats" href="#supported-formats"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Format</th>
<th>Extensions</th>
<th>Compression</th>
</tr>
</thead>
<tbody>
<tr>
<td>Aperio SVS</td>
<td><code>.svs</code></td>
<td>JPEG, JPEG 2000</td>
</tr>
<tr>
<td>Pyramidal TIFF</td>
<td><code>.tif</code>, <code>.tiff</code></td>
<td>JPEG, JPEG 2000</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Files must be tiled (not stripped) and pyramidal.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">In the media</h2><a id="user-content-in-the-media" aria-label="Permalink: In the media" href="#in-the-media"></a></p>
<ul dir="auto">
<li><strong>January 17th, 2026</strong>: front page of <a href="https://news.ycombinator.com/item?id=46656358" rel="nofollow">Hacker News</a> and <a href="https://www.reddit.com/r/rust/comments/1qf823k/wsistreamer_streaming_gigabyte_medical_images/" rel="nofollow">Rust subreddit</a></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">License</h2><a id="user-content-license" aria-label="Permalink: License" href="#license"></a></p>
<p dir="auto">MIT. See <a href="https://github.com/PABannier/WSIStreamer/blob/main/LICENSE">LICENSE</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Contributing</h2><a id="user-content-contributing" aria-label="Permalink: Contributing" href="#contributing"></a></p>
<p dir="auto">Issues and pull requests welcome. See <a href="https://github.com/PABannier/WSIStreamer/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[You have three minutes to escape the perpetual underclass – geohot (140 pts)]]></title>
            <link>https://geohot.github.io//blog/jekyll/update/2026/01/17/three-minutes.html</link>
            <guid>46656256</guid>
            <pubDate>Sat, 17 Jan 2026 08:23:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://geohot.github.io//blog/jekyll/update/2026/01/17/three-minutes.html">https://geohot.github.io//blog/jekyll/update/2026/01/17/three-minutes.html</a>, See on <a href="https://news.ycombinator.com/item?id=46656256">Hacker News</a></p>
<div id="readability-page-1" class="page"><div aria-label="Content">
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>I had a dream last night I went to work at Amazon. Joining the Bezos neofeudal empire. This post is directed at anyone with talent who works at a tech company ushering in this future.</p>

<hr>


<p>Have you thought about how this is going to play out? I understand you may be at a place where you are insecure about money, and that insecurity is what drives you. But why do you think having more money will fix that insecurity?</p>

<p>In the future, when labor is fully marginalized and capital is the only force, you will not be able to afford GPT$$$ (it’s $1B per month), only the billionaires will. GPT$$$ is surely smart enough to separate you from whatever you have, be that with targeting advertising, a scam you fall for, or lobbying your government to take it from you.</p>

<p>A pile of money will buy you nothing in the neofeudal world.</p>

<hr>


<p>Historically, there has been some loyalty to the subjects of a feudal empire because labor had some value. You needed the peasants to grow the grain so you could tax it and take it and have leverage over others by having grain to offer them. When the grain is produced by machines, the peasants are cut out of the loop.</p>

<p>The solution to this is not to accumulate grain, buy shares in a granary, or anything else like that. They will find a way to make whatever you have worthless. Because the feudal world didn’t operate on capitalist principles, and neither will the neofeudal world.</p>

<hr>


<p>If you work at a large company, if you work according to the principles of modern capitalism, where all the fish will be eaten by the bigger fish, and all will be eaten by the sharks, and all the sharks will be eaten by bigger sharks, you are actively bringing about the system that will kill you.</p>

<p><b>Have you considered not participating?</b> If you participate, we all lose. We will either all be in the underclass together or not.</p>

  </div>
</article>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The 'untouchable hacker god' behind Finland's biggest crime (144 pts)]]></title>
            <link>https://www.theguardian.com/technology/2026/jan/17/vastaamo-hack-finland-therapy-notes</link>
            <guid>46656045</guid>
            <pubDate>Sat, 17 Jan 2026 07:29:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/technology/2026/jan/17/vastaamo-hack-finland-therapy-notes">https://www.theguardian.com/technology/2026/jan/17/vastaamo-hack-finland-therapy-notes</a>, See on <a href="https://news.ycombinator.com/item?id=46656045">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="maincontent"><p><span>T</span>iina Parikka was half-naked when she read the email. It was a Saturday in late October 2020, and Parikka had spent the morning sorting out plans for distance learning after a Covid outbreak at the school where she was headteacher. She had taken a sauna at her flat in Vantaa, just outside Finland’s capital, Helsinki, and when she came into her bedroom to get dressed, she idly checked her phone. There was a message that began with Parikka’s name and her social security number – the unique code used to identify Finnish people when they access healthcare, education and banking. “I knew then that this is not a game,” she says.</p><p>The email was in Finnish. It was jarringly polite. “We are contacting you because you have used Vastaamo’s therapy and/or psychiatric services,” it read. “Unfortunately, we have to ask you to pay to keep your personal information safe.” The sender demanded €200 in bitcoin within 24 hours, otherwise the price would go up to €500 within 48 hours. “If we still do not receive our money after this, your information will be published for everyone to see, including your name, address, phone number, social security number and detailed records containing transcripts of your conversations with Vastaamo’s therapists or psychiatrists.”</p><p>Parikka swallows hard as she relives this memory. “My heart was pounding. It was really difficult to breathe. I remember lying down on the bed and telling my spouse, ‘I think I’m going to have a heart attack.’”</p><p>Someone had hacked into Vastaamo, the company through which Parikka had accessed psychotherapy. They’d got hold of therapy notes containing her most private, intimate feelings and darkest thoughts – and they were holding them to ransom. Parikka’s mind raced as she tried to recall everything she’d confided during three years of weekly therapy sessions. How would her family react if they knew what she’d been saying? What would her students say? The sense of exposure and violation was unfathomable: “It felt like a public rape.”</p><p>Therapy had been Parikka’s lifeline. Now 62, she’d had three children by the time she was 25, including twins who had been born extremely prematurely in the 1980s, weighing only a&nbsp;few hundred grams each. One grew up with cerebral palsy; the other is blind. Parikka spent years juggling medical emergencies, surgeries and hospital stays with a demanding job and a crumbling marriage. “During those years, nobody ever asked me, the mother, ‘How are you?’”</p><figure id="f56fb80c-5d92-4f8b-a507-d9a7f48e99af" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-2"><picture><source srcset="https://i.guim.co.uk/img/media/5832073514c398952504a92fd9c055e43214df78/0_213_3543_3785/master/3543.jpg?width=620&amp;dpr=2&amp;s=none&amp;crop=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/5832073514c398952504a92fd9c055e43214df78/0_213_3543_3785/master/3543.jpg?width=620&amp;dpr=1&amp;s=none&amp;crop=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/5832073514c398952504a92fd9c055e43214df78/0_213_3543_3785/master/3543.jpg?width=605&amp;dpr=2&amp;s=none&amp;crop=none" media="(min-width: 480px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 480px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/5832073514c398952504a92fd9c055e43214df78/0_213_3543_3785/master/3543.jpg?width=605&amp;dpr=1&amp;s=none&amp;crop=none" media="(min-width: 480px)"><source srcset="https://i.guim.co.uk/img/media/5832073514c398952504a92fd9c055e43214df78/0_213_3543_3785/master/3543.jpg?width=445&amp;dpr=2&amp;s=none&amp;crop=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/5832073514c398952504a92fd9c055e43214df78/0_213_3543_3785/master/3543.jpg?width=445&amp;dpr=1&amp;s=none&amp;crop=none" media="(min-width: 320px)"><img alt="Head shot of Tiina Parikka, one of thousands of patients whose intimate information was leaked online after a popular Finnish therapy site was hacked" src="https://i.guim.co.uk/img/media/5832073514c398952504a92fd9c055e43214df78/0_213_3543_3785/master/3543.jpg?width=445&amp;dpr=1&amp;s=none&amp;crop=none" width="445" height="475.39514535704205" loading="lazy"></picture></div><figcaption data-spacefinder-role="inline"><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>‘My heart was pounding. It was really difficult to breathe … It felt like a public rape’: Tiina Parikka. </span> Photograph: Juuso Westerlund/The Guardian</figcaption></figure><p>She divorced in 2014 and met her current partner a year later. By then, her children were adults with independent lives. After decades of putting everyone’s else’s needs before her own, she should have been finally able to exhale. Instead, she had a breakdown. “I had full-scale anxiety running through my body all the time. I couldn’t sleep. I had panic attacks. I couldn’t eat.” Driving at high speed on the highway one day, dark thoughts descended. “I was thinking, I&nbsp;wouldn’t mind if this car crashed.”</p><p>In search of urgent help, she went to Google, which led her to Vastaamo, Finland’s one-stop digital shop for people in search of psychotherapy. No doctor referral was necessary. She managed to book a session for the very next day. “It was that easy.”</p><p>Being able to confide in a total stranger felt liberating. She told her therapist things she had never told another soul. “Trauma in relationships. The disappointment and tragedy of having disabled children, and the influence it had on my life,” she says. “Silly things, childish things. It’s very human to feel hate, anger, rage.”</p><p>After Parikka read the email that left her struggling to breathe, she had no idea where to turn for help. She rang the emergency services, but the police told her to get off the line; they needed to keep it free for real emergencies. In her bathrobe, her phone still in her hand, she felt utterly alone.</p><p>But Parikka was far from alone. Across Finland, 33,000 people who had used Vastaamo were discovering that a hacker had got hold of their therapy notes and was holding them to ransom. These were people who, by definition, were likely to be vulnerable, in need of help. Each was experiencing a very personal, individual terror. In a country of only 5.6 million people, everyone knows someone who was hacked.</p><p>Some victims’ notes had already been cherrypicked for the world to see. Three days before the extortion emails were sent, someone using the handle ransom_man had left posts on the dark web, on r/Suomi, the Finnish-language subreddit, and on Ylilauta, Finland’s equivalent to <a href="https://www.theguardian.com/technology/4chan" data-link-name="in body link">4chan</a>. This time, the post was in English. <em>“</em>Hello Finnish Colleagues,” it began. “We have hacked the psychotherapy clinic vastaamo.fi and taken tens of thousands of patient records including extremely sensitive session notes and social security numbers. We requested a small payment of 40 bitcoins (nothing for a company with yearly revenues close to 20 million euros) but the CEO has stopped responding to our emails. We are now starting to gradually release their patient records, 100 entries every day.”</p><p>There was a link to the dark web, where 100 records were already on display. Directly below it, ransom_man had signed off the post with a single word: “Enjoy!”</p><p>The 100 records included those of politicians, police officers and prominent public figures. Their names appeared alongside therapy notes that contained details of adultery, suicide attempts, paedophilia and sexual violence. Some of the records belonged to children. And whoever was behind the hack was true to their word: the next day, 100 more patient records were uploaded.</p><p>Some victims went searching on the dark web in a&nbsp;desperate attempt to see if their records were out there. Some paid the ransom, scrabbling to get hold of bitcoin while the clock ticked down. Lawyers representing the victims have told me they know of at least two cases where people took their own lives after they discovered their therapy notes had been hacked.</p><p>But for all of them, it was already too late. At 2am on 23 October 2020 – the day before the emails began to arrive in tens of thousands of inboxes – ransom_man had uploaded a much larger file. It contained every record of every single patient on Vastaamo’s database. Everyone’s therapy notes had already been published, for free, for everyone in the world to see.</p><p>Who was behind the biggest crime Finland had ever known? And might they have been motivated by something other than money? I have spent 18 months trying to answer these questions, following threads across Europe and the US. They culminated in a visit to a prison, and one of the most chilling conversations I have ever had.</p><hr><p><span>F</span>inland has been <a href="https://www.bbc.co.uk/news/articles/cr72xep44kdo" data-link-name="in body link">ranked the happiest country on Earth</a> by the UN for the last eight years in a row. A world leader in <a href="https://www.theguardian.com/world/video/2023/sep/20/tax-the-rich-can-the-uk-copy-finlands-childcare-success-video" data-link-name="in body link">childcare</a> and education, Finland is also famously hi-tech: it’s the <a href="https://digital-strategy.ec.europa.eu/en/policies/desi" data-link-name="in body link">most digitalised country</a> in Europe, renowned for its communications sector (as the home of Nokia) and leading the way when it comes to cybersecurity and AI innovation. But Finland is also a place of extremes. It has <a href="https://nordicperspective.com/facts/metal-bands-per-capita-world-map" data-link-name="in body link">more heavy metal bands per capita</a> than any other nation. In the far north, for the few days around the winter solstice, the sun <a href="https://finland.fi/life-society/when-the-sun-doesnt-rise-in-northern-finland/" data-link-name="in body link">does not rise</a>.</p><p>Vastaamo had long been considered an example of how Finland was getting it right when it came to digital tech. Founded in 2008 by entrepreneur Ville Tapio and his mother, Nina, a psychotherapist, the aim was to open up therapy to the masses, removing the stigma of asking for help. The platform made it easy for people to see who was free, where, and what therapeutic approach they specialised in. The logo had the colour palette of a&nbsp;first-aid kit, with white lettering in a green speech bubble. Vastaamo means “a place for answers”<strong>.</strong></p><p>It was an attractive platform for therapists, too: they didn’t have to worry about marketing or billing – Vastaamo would take care of all of that. The company even provided a behind-the-scenes digital interface where therapists could make and store their notes. This formula, combined with the increasing demand for therapy services, meant Vastaamo grew fast. It opened its own network of around 20&nbsp;clinics across Finland, employing <a href="https://interapartners.com/intera-to-support-the-growht-of-psykoterapiakeskus-vastaamo/" data-link-name="in body link">more than 220&nbsp;psychotherapists</a> by 2018, leading some in Finland to refer to it as “the McDonald’s of therapy”. In the years before Zoom and Teams were part of our daily lives, the remote therapy also offered by Vastaamo was groundbreaking. In 2019, a private equity firm bought a majority stake in the company, earning the Tapio family a payout of <a href="https://yle.fi/a/3-11628354" data-link-name="in body link">more than €5m</a>.</p><p>Meri-Tuuli Auer, 30, describes using Vastaamo as “like Uber for therapy – convenient, accessible, relatively cheap”. She picked her therapist because he offered cognitive psychotherapy – and she liked his photo. “He looked nice. He looked approachable.”</p><p>Auer’s home, on the outskirts of Helsinki, is a riot of pink. There are Barbie dolls, Barbie books and Barbie-themed handbags on her shelves, as well as a glittery open-top Barbie sports car. A pole-dancing pole takes pride of place in the centre of her living room.</p><p>“I’m a mixed personality,” she tells me over tea in Moomin mugs. “I love being around people, but I get that inkling, that doubt: maybe they all think I’m full of shit and stupid and ugly and I have no idea what I’m doing.” Auer has struggled with depression for much of her life. When she was 18, she was in a secretive, difficult relationship with a man 29 years her senior, which made her self-esteem plummet further. She was drinking heavily. “If I hadn’t gone to therapy, I don’t know what would have become of me. Maybe there is another universe where I didn’t make it to 30.”</p><figure id="9e737e80-e8ad-49dc-990e-50a2fa1908df" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-3"><picture><source srcset="https://i.guim.co.uk/img/media/e558a410a47cb7320d76946c0dd8878a281d8a9c/0_1509_5052_4213/master/5052.jpg?width=620&amp;dpr=2&amp;s=none&amp;crop=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/e558a410a47cb7320d76946c0dd8878a281d8a9c/0_1509_5052_4213/master/5052.jpg?width=620&amp;dpr=1&amp;s=none&amp;crop=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/e558a410a47cb7320d76946c0dd8878a281d8a9c/0_1509_5052_4213/master/5052.jpg?width=605&amp;dpr=2&amp;s=none&amp;crop=none" media="(min-width: 480px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 480px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/e558a410a47cb7320d76946c0dd8878a281d8a9c/0_1509_5052_4213/master/5052.jpg?width=605&amp;dpr=1&amp;s=none&amp;crop=none" media="(min-width: 480px)"><source srcset="https://i.guim.co.uk/img/media/e558a410a47cb7320d76946c0dd8878a281d8a9c/0_1509_5052_4213/master/5052.jpg?width=445&amp;dpr=2&amp;s=none&amp;crop=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/e558a410a47cb7320d76946c0dd8878a281d8a9c/0_1509_5052_4213/master/5052.jpg?width=445&amp;dpr=1&amp;s=none&amp;crop=none" media="(min-width: 320px)"><img alt="Meri-Tuuli Auer, one of thousands of patients whose intimate information was leaked online after a popular Finnish therapy site was hacked" src="https://i.guim.co.uk/img/media/e558a410a47cb7320d76946c0dd8878a281d8a9c/0_1509_5052_4213/master/5052.jpg?width=445&amp;dpr=1&amp;s=none&amp;crop=none" width="445" height="371.097585114806" loading="lazy"></picture></div><figcaption data-spacefinder-role="inline"><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>‘I closed myself in at home, I didn’t want anyone to see me’: Meri-Tuuli Auer. </span> Photograph: Juuso Westerlund/The Guardian</figcaption></figure><p>Most of the cost of Auer’s treatment was covered by the Finnish healthcare system; she paid only about €25 for each weekly session. She was making great strides. “After going to therapy in 2018 and 2019, I had gained&nbsp;a&nbsp;basic sense of security. That was lost in 2020.”</p><p>Vastaamo’s CEO knew the company’s patient registry was being held to ransom weeks before his customers found out. On 28 September 2020, Ville Tapio received an email demanding the bitcoin equivalent of €450,000 to keep it safe. Sample patient records attached to the email proved the extortionist wasn’t bluffing. Tapio called in a cybersecurity firm to investigate.</p><p>Medical information is an obvious target for would-­be extortionists, says Antti Kurittu, the security specialist Tapio hired. But this was something else: “Whatever I tell a therapist is, by its very nature, a lot more private than what my blood pressure is,” he says, drily.</p><p>Kurittu used to be a detective, investigating cybercrimes for the Finnish police; he says he insisted they be told about the ransom attempt so they could begin a parallel investigation. Meanwhile, he began inspecting Vastaamo’s server, looking for clues as to who might be behind the hack – and one of the first things he noticed was how lax security had been. “It was definitely unfit for purpose for storing this kind of information,” he says. He tells me that the patient records database was accessible via the internet; there was no firewall and, perhaps most egregiously, it was secured with a blank password, so anyone could just press enter and open it. Kurittu determined that whoever had hacked Vastaamo had probably just been scanning the internet in search of any badly secured databases that could be monetised. “They tried a bunch of bank vaults to see which ones were open, and just happened to stumble on this one.”</p><p>For a few weeks, the hacker and Vastaamo exchanged emails, but there was no question that Vastaamo would pay the ransom. If they did, they’d have to trust a criminal’s word that the records had been destroyed – plus, Kurittu says, it goes against the national character. “Finns are a bit of a belligerent bunch. We’re not known for paying ransom quietly or easily, which I take great national pride in.”</p><p>After ransom_man started leaking patient records to put pressure on the company, Kurittu kept a close eye on the server being used to publish them. He had a hunch whoever was behind this was either Finnish, or had lived in Finland for a long time: they knew which famous names to flaunt from the patient records.</p><hr><p><span>W</span>hen Auer learned about the hack, she downloaded a browser that would enable her to access the dark web, for the first time in her life. “I was thinking to myself, I just have to see if my records are there.” She found her name wasn’t among the first batch posted, and closed the file without reading anyone’s records. But she saw other people discussing what they’d seen. “People had already picked – in their opinion – the funniest parts from the patient records. They were laughing at these people’s misery. A 10-year-old child had gone to therapy, and people found it funny.”</p><p>Auer began to spiral. “I closed myself in at home, I&nbsp;didn’t want to leave, I didn’t want anyone to see me,” she tells me. She had no hope that the hacker would ever be found. “It’s not that I don’t trust the police in Finland – it’s just that it seemed like an impossible task.”</p><p>But the much larger file ransom_man had uploaded to the dark web – the one that contained every single one of Vastaamo’s patient records – also included vital clues to his identity. The first three batches of therapy notes had been posted manually, but when the hacker had tried to automate the process, he had not only accidentally uploaded all of the therapy notes, but also his entire home folder. It had appeared only briefly before it was taken down, along with a post that read “whoopsie :D”, but ransom_man had screwed up.</p><p>“After spending several evenings with the file, I had the feeling I’d seen this kind of thing before,” Kurittu says. The data on the hacker’s home drive wasn’t systematically organised and arranged in folders, as you would expect from someone for whom extortion was a business. “It had that sort of chaotic, passionate hobby feeling to it.” And there was something about the childish way ransom_man had named some of the files that was eerily familiar (the one containing all the patient data was entitled “therapissed”).</p><p>Kurittu’s mind went back to 2013 when he was a senior detective constable for the Helsinki police, and the file names he’d seen on a computer he’d seized from a 16-year-old boy. “It made me think of Julius Kivimäki.”</p><hr><p><span>A</span>leksanteri Kivimäki – who used to go by his middle name, Julius, or the online handle zeekill – had long been notorious among cybersecurity investigators. Not because of any particular talent as a hacker, but because he seemed prepared to go further than most who spend their time in the darkest parts of the internet.</p><p>Aged 14, Kivimäki was involved with a group called Hack the Planet (named after the tagline of the 1995 movie Hackers). They would break into big companies and show off what they had managed to steal online. “It was for the LOLs,” says Blair Strater, a former hacker from Illinois who hung out with Kivimäki in internet relay chat forums at that time. “You notice that something is open and you just take it. It’s not targeted.”</p><p>This kind of hacking was about impressing others – winning online clout, not extorting money. But some of those involved may have felt they were also serving a noble purpose: exposing security vulnerabilities in major corporations, or the hypocrisy of cybersecurity firms who claimed to be qualified to advise businesses while being unable to secure their own network.</p><p>Strater found Kivimäki amusing, at first. “A lot of the things he did early on were objectively funny,” he tells me over Zoom from his home in Illinois. When I ask Strater whether <em>I</em> would find them funny, he clarifies that his humour was an acquired taste best suited to 4chan. But in 2010, when Strater was 17 and Kivimäki was 14, they fell out over which one of them was going to publish a&nbsp;report of a recent hack.</p><figure data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.NewsletterSignupBlockElement"><gu-island name="EmailSignUpWrapper" priority="feature" deferuntil="visible" props="{&quot;index&quot;:44,&quot;listId&quot;:6016,&quot;identityName&quot;:&quot;inside-saturday&quot;,&quot;description&quot;:&quot;The only way to get a look behind the scenes of the Saturday magazine. Sign up to get the inside story from our top writers as well as all the must-read articles and columns, delivered to your inbox every weekend.&quot;,&quot;name&quot;:&quot;Inside Saturday&quot;,&quot;frequency&quot;:&quot;Weekly&quot;,&quot;successDescription&quot;:&quot;We'll send you Inside Saturday every weekend&quot;,&quot;theme&quot;:&quot;lifestyle&quot;,&quot;idApiUrl&quot;:&quot;https://idapi.theguardian.com&quot;,&quot;hideNewsletterSignupComponentForSubscribers&quot;:true}"></gu-island></figure><p>Orders of pizzas and Chinese takeaway began arriving at the home Strater shared with his parents and younger sister on the outskirts of Chicago; when they opened the door, the delivery driver would ask for Julius Kivimäki. “Taxis were ordered. Hookers were ordered,” Strater says. “My father had to send away a big dump truck filled with gravel.” Strater received a blizzard of letters from credit card and insurance companies, and government agencies, including one from the department of social security confirming that an appointment with the welfare office had been created for him and his spouse – Julius Kivimäki.</p><p>Then, at 2am one morning, police in body armour carrying guns with laser sights turned up outside the Straters’ home, responding to reports that Blair had beaten his mother to death in a drug-fuelled rage. When she answered the door, they took her blood pressure to verify that she was, in fact, alive. It was the first of dozens of so-called swatting attacks the family would endure. After a lull of a couple of months, Strater learned that someone using his name had emailed a bomb threat to a local police officer; it led to Strater spending three weeks over Christmas in a juvenile detention centre.</p><p>Several years into their feud, in 2015, someone <a href="https://www.cbsnews.com/sanfrancisco/news/high-tech-teslas-website-twitter-account-hijacked-by-angry-ranting-hackers/" data-link-name="in body link">hacked Elon Musk and Tesla’s Twitter accounts,</a> and tweeted that anyone who rang the Straters’ landline or showed up at their home would get a free car; their phone rang off the hook for days, and Blair’s father had to turn several disappointed people away from their porch. Someone using Blair’s mother’s name posted a threat to shoot up the elementary school where his 10-year-old sister was a pupil. His mother’s LinkedIn and Twitter accounts were hacked and filled with juvenile, racist posts, as well as antisemitic insults directed at the company where she worked as a healthcare statistician. Within months, she had lost her job.</p><p>The campaign of terror lasted for many more years. Strater says it’s never going to be fully over. “It’s like having cancer: it’s never really cured, it goes into remission,” he says. “Every so often, someone would hit me up and say, ‘Hey, I was one of the people that helped Julius do these things.’ Sometimes they would say, ‘He made me do them. He was blackmailing me,’ which is something he does to an awful lot of people. I want to make this very clear: I am not the person zeekill fucked with the most.”</p><p>Indeed, Kivimäki set his sights far beyond the Strater family. In August 2014 – days after his 17th birthday – he rang in <a href="https://news.sky.com/story/fake-plane-bomb-threat-grounds-sony-executive-10391998" data-link-name="in body link">a fake bomb threat</a> that grounded a flight carrying John Smedley, president of Sony Online Entertainment, who oversaw PlayStation’s multiplayer network. A group calling themselves Lizard Squad claimed responsibility, posting almost nonsensically on Twitter that the attack was in sympathy with Islamic State. Lizard Squad struck again, on 25 December 2014, with a cyber-attack that shut down Xbox and PlayStation, and ruined Christmas morning for millions. Brazenly, Kivimäki gave interviews to <a href="https://soundcloud.com/hardchats/bbc-radio-host-interviews-lizardsquad" data-link-name="in body link">BBC 5 Live</a> and <a href="https://news.sky.com/story/xbox-hacker-reveals-why-he-attacked-consoles-10377611" data-link-name="in body link">Sky News</a> as a Lizard Squad spokesperson, claiming they did the hack both to amuse themselves and to expose Microsoft and Sony’s poor cybersecurity. He seemed to revel in the chaos and drama. He appeared on camera on Sky News; he used a fake name, but his boyish face – blond hair, blue eyes, plump cheeks – was visible for all to see.</p><p>In July 2015, following Kurittu’s investigation with the Finnish police, Kivimäki was convicted of hacking into servers at MIT and Harvard universities, as well as money laundering and fraud. He was <a href="https://www.bbc.co.uk/news/technology-33442419" data-link-name="in body link">found guilty</a> of more than 50,000 data breaches, and received a two-year suspended sentence; he had his computer confiscated and was forced to pay back more than €6,000 obtained through his crimes. He never faced justice for any of the offences he perpetrated against Blair Strater and his family.</p><p>Shortly after he received his suspended sentence, Kivimäki updated his Twitter bio to read “untouchable hacker god”.</p><hr><p><span>K</span>ivimäki spent the next few years travelling&nbsp;the world. During lockdown, he lived in an air-conditioned apartment in Westminster, 20 metres away from the central London headquarters of MI5. There were trips to Dubai, Hong Kong, Barcelona and Paris. According to the images of himself he liked to post online, he was living the life of an international jetsetter. But he was not, in the end, untouchable.</p><p>Police made a micropayment of 0.1 bitcoins to ransom_man. They were able to determine that, when it was laundered into real-world currency, it was transferred into Kivimäki’s bank account. The home folder ransom_man had accidentally uploaded had led the police to some servers, one of which had been paid for using a credit card linked to him – the same one he’d been using to pay for Apple services and an OnlyFans subscription.</p><p>As investigators traced the history on ransom_man’s home folder, they were able to determine that, as well as looking for keywords such as rape, abuse and child molestation in the database of patient records, the hacker had also searched for Kivimäki’s home address, and the names of his family members. “Before publication, he ensured there was no harmful information about him, or people close to him,” Pasi Vainio, the lead prosecutor on the case, tells me. Those searches took place using an IP address linked to Kivimäki’s Westminster apartment. “He was in London when the crimes were committed.”</p><p>But it was a drawn-out, arduous investigation. There were terabytes of data to comb through. The crime had so many victims that the police had to create an online portal for everyone to register and give their statements. That generated more than 21,000 criminal reports, all of which needed to be looked at individually. So it was October 2022 – two years after Parikka, Auer and the other victims had received their ransom demands – before Vainio signed an arrest warrant for Kivimäki. His face – chubby-cheeked and floppy-haired – was added to Europol’s list of most-wanted fugitives, alongside murderers and drug traffickers.</p><p>On 3 February 2023, French police were alerted to a report of domestic violence taking place in a flat in a Paris suburb. Officers used a battering ram to enter the property and found a man and a woman inside. The man was pale and white-blond, but when asked to identify himself he handed over a Romanian passport that gave his name as Asan Amet. “We have a Scandinavian-looking guy, 195cm tall,” Vainio tells me with a smile. “I think the French police just thought something’s off.” They searched their databases and discovered Amet was one of Kivimäki’s known aliases. He was handed over to the Finnish authorities a few weeks later.</p><figure id="a8fa8d5a-e782-44de-b1c1-98a65e03d3b8" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-4"><picture><source srcset="https://i.guim.co.uk/img/media/e8646a187020afb0dffa43c89078f873889f5aca/0_0_4000_5334/master/4000.jpg?width=620&amp;dpr=2&amp;s=none&amp;crop=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/e8646a187020afb0dffa43c89078f873889f5aca/0_0_4000_5334/master/4000.jpg?width=620&amp;dpr=1&amp;s=none&amp;crop=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/e8646a187020afb0dffa43c89078f873889f5aca/0_0_4000_5334/master/4000.jpg?width=605&amp;dpr=2&amp;s=none&amp;crop=none" media="(min-width: 480px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 480px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/e8646a187020afb0dffa43c89078f873889f5aca/0_0_4000_5334/master/4000.jpg?width=605&amp;dpr=1&amp;s=none&amp;crop=none" media="(min-width: 480px)"><source srcset="https://i.guim.co.uk/img/media/e8646a187020afb0dffa43c89078f873889f5aca/0_0_4000_5334/master/4000.jpg?width=445&amp;dpr=2&amp;s=none&amp;crop=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/e8646a187020afb0dffa43c89078f873889f5aca/0_0_4000_5334/master/4000.jpg?width=445&amp;dpr=1&amp;s=none&amp;crop=none" media="(min-width: 320px)"><img alt="Aleksanteri Kivimäki, accused of hacking a popular Finnish therapy site and leaking thousands of patients’ intimate information, sitting at adesk in prison in February 2024" src="https://i.guim.co.uk/img/media/e8646a187020afb0dffa43c89078f873889f5aca/0_0_4000_5334/master/4000.jpg?width=445&amp;dpr=1&amp;s=none&amp;crop=none" width="445" height="593.4074999999999" loading="lazy"></picture></div><figcaption data-spacefinder-role="inline"><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>Aleksanteri Kivimäki photographed in prison in February 2024.</span> Photograph: Juuso Westerlund</figcaption></figure><p>“I don’t know what I had expected, but I was surprised to see that he looked so normal,” Auer says. “He looks like a regular Finnish young man. It did make me feel like it could have been anyone.”</p><p>“I had heard that he was in a court hearing,” Parikka says. “We have a habit – every night at 8.30pm, I’ll lie here on the couch with my spouse and watch the main news. Without warning, Kivimäki was there on the screen. Kivimäki came to my living room.” She glances over to her couch, metres away from where we sit, and is overcome with tears. <em>“</em>I didn’t sleep the next night.”</p><p>But when the trial began, in November 2023, Parikka was determined to watch Kivimäki face justice. The logistics of inviting more than 21,000 registered victims to court were impossible; instead, proceedings were relayed to public spaces such as cinemas so that the plaintiffs could watch in real time. In a case that was all about the right to privacy and anonymity, it sounds a profoundly awkward setup. “We were all sitting far away from each other,” Auer says. “It was dead silent.” Parikka had a similar experience. “We pretty much kept to ourselves.”</p><p>On 30 April 2024, Kivimäki was found guilty of all charges – including 9,600 counts of aggravated invasion of privacy and more than 21,300 counts of attempted aggravated extortion – and sentenced to six years and three months in prison: a long stretch by Finnish standards, but shy of the seven-year maximum he could have received. His appeal against his sentence is currently under way.</p><p>Even if his conviction is upheld, he will be a free man by the end of this year.</p><p>“The sentencing scale is too low, in my opinion. But that’s the framework we have in Finland,” Vainio says. He tells me a colleague has tried to quantify the harm caused, using the conservative estimate that each person had endured a week of agony as a result of the hack. “When you multiply it with the number of victims of this case, you would have 635 years of suffering.”</p><hr><p><span>N</span>ow 28, Kivimäki has served much of his sentence in a spotless, bright but suitably austere facility in Turku, south-west Finland, a two-hour train ride from Helsinki. For months, he had refused to grant me an interview, but while I am in Finland reporting this story, he changes his mind. As I sit in silence in the prison’s visitor room for what feels like hours, watching the clock tick down behind a panel of reinforced glass, I&nbsp;wonder if Kivimäki is trolling me; if he has dragged me over here simply to derail the other interviews I already had scheduled, with no intention of ever leaving his cell. But after 40 minutes he appears. With his white-blond hair, ice-blue eyes and razor burn, and dressed in a black&nbsp;T-shirt and shorts, he looks like an overgrown teenage boy.</p><p>He didn’t do it, he says; he’s simply a victim of his own notoriety. “They had to find somebody. They just chose somebody who was convenient for the story.” When I point out that there’s an enormous amount of circumstantial evidence linking him to the hack, Kivimäki is defiant. “The obvious answer is that it’s just somebody close to me.” He has an idea who it is, he continues, but he isn’t prepared to name names.</p><figure id="b29c8bb9-c90c-41cf-98e6-25e002fd204e" data-spacefinder-role="richLink" data-spacefinder-type="model.dotcomrendering.pageElements.RichLinkBlockElement"><gu-island name="RichLinkComponent" priority="feature" deferuntil="idle" props="{&quot;richLinkIndex&quot;:68,&quot;element&quot;:{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.RichLinkBlockElement&quot;,&quot;prefix&quot;:&quot;Related: &quot;,&quot;text&quot;:&quot;Life after the Ashley Madison affair&quot;,&quot;elementId&quot;:&quot;b29c8bb9-c90c-41cf-98e6-25e002fd204e&quot;,&quot;role&quot;:&quot;richLink&quot;,&quot;url&quot;:&quot;https://www.theguardian.com/technology/2016/feb/28/what-happened-after-ashley-madison-was-hacked&quot;},&quot;ajaxUrl&quot;:&quot;https://api.nextgen.guardianapps.co.uk&quot;,&quot;format&quot;:{&quot;design&quot;:10,&quot;display&quot;:1,&quot;theme&quot;:0},&quot;isInStarRatingVariant&quot;:false}"></gu-island></figure><p>It seems very selfless to do time for someone else’s crime, I say. I tell him Parikka says having her therapy notes held to ransom felt like a public rape. “I’m sure that’s how she felt,” he replies, blankly. “It’s quite remote to me. I’m involved, in that I was in court over this stuff, but I didn’t do it. It’s another story in the news.”</p><p>As a fellow human being rather than the person convicted of the crime, I ask, what’s your response to people taking their lives after having their therapy notes stolen? “There’s a lot of terrible things going on in the world. I don’t really feel any differently about this. I turn on the news and there’s people dying in Gaza or wherever. It’s like, how do you feel about<em> that</em>? I think the honest answer for most people is that they just … <em>don’t</em>.”&nbsp;You don’t have anything to say to the victims? “Not really,” he replies. “These are nameless, faceless&nbsp;people.”</p><p>“There’s been just one question that I would ask Kivimäki,” Parikka says. “That would be: ‘Was there ever such a moment that you felt empathy?’ I don’t think he’s able to put himself into anybody else’s situation.” She pauses. “I think that he really needs therapy.”</p><hr><p><span>V</span>astaamo was <a href="https://tietosuoja.fi/en/-/administrative-fine-imposed-on-psychotherapy-centre-vastaamo-for-data-protection-violations" data-link-name="in body link">declared bankrupt</a> in February 2021. Days after patients received the ransom emails, the board announced that it had let the CEO, Ville Tapio, go. In April 2023, Tapio was <a href="https://yle.fi/a/74-20027665" data-link-name="in body link">found guilty</a> of criminal negligence in his handling of patient data. His conviction was overturned on appeal in December 2025. (He declined my requests to interview him.)</p><p>“I have actually been more angry towards Ville Tapio than I have been towards Kivimäki,” Auer says. “As CEO of the company, he had the responsibility to make sure that it was prepared for all kinds of risks, and that they had sufficient information security. It seems like it was never a priority to him.” What was his priority<em>?</em> “Making money. He ran a very successful business.”</p><p>“I believe that originally the Tapios were wanting to help people and make therapy available,” Parikka says. “There are now maybe thousands of people who will never use therapy again, because they can never trust. And that’s really bad.”</p><p>Alongside more than 6,000 other plaintiffs, Auer and Parikka are part of a civil case suing Kivimäki for damages. Despite the lifestyle he projects online, he claims not to have the funds to pay damages; so far, no&nbsp;one has been able to find his assets. The government has agreed to pay compensation to victims – anything from <a href="https://www.valtiokonttori.fi/en/services/services-related-to-compensation-and-accidents/vastaamo/#_how-much-compensation-can-you-get" data-link-name="in body link">a few hundred euros to a few thousand,</a> depending on how many pages of their therapy notes Vastaamo had in its database, and how sensitive the information contained in those pages was – but the sum is likely to be symbolic. How can you ever repay the damage of being exposed in this way?</p><p>Copies of the patient files have been circulating ever since they were first released in October 2020. At one point, someone created a special search engine for browsing the database. This doesn’t surprise Parikka. “Kivimäki isn’t just one of a kind,” she says. “I know human curiosity. People want to know.”</p><p>Other people are as prepared as Kivimäki was to break moral and legal boundaries – for money, for online clout, out of ghoulish curiosity or simply for the LOLs. In May, Finnish police <a href="https://poliisi.fi/en/-/police-have-another-suspect-in-vastaamo-case" data-link-name="in body link">announced</a> that there was a&nbsp;second suspect in the Vastaamo case, a US citizen living in Estonia – suspected of aiding and abetting Kivimäki, helping prepare the files. He has been charged with assisting in the attempted extortion.</p><p>In an era when AI models are <a href="https://www.rollingstone.com/culture/culture-news/zoom-ai-personl-data-1234802844/" data-link-name="in body link">trained on our Zoom</a> conversations, <a href="https://www.theguardian.com/technology/2024/nov/15/x-ai-gmail-meta-privacy-settings" data-link-name="in body link">emails</a> and status updates, it is naive to believe that anything can ever be fully secure. The human need to confide in others can be met in an extraordinary range of ways in the digital age. In a world of unparalleled connectivity, can our innermost secrets ever be truly safe?</p><p>Kivimäki thinks we are all clinging on to analogue expectations about privacy in a digital world. “So many of our worst secrets – I mean <em>worst</em> of worst, things we might really, really not want to share with the entire world – they exist online. They’ll exist in the database of some company you used,” he tells me. “Everybody’s photos, everybody’s text-messaging histories.” He fixes me with his eyes. “You fundamentally want to believe in this privacy. But, on the other hand, I don’t know how you’re going to get there.”</p><p><em>Intrigue: Ransom Man, Jenny Kleeman’s six-part series for BBC Radio 4, is available </em><em>now on BBC Sounds.</em></p></div></div>]]></description>
        </item>
    </channel>
</rss>