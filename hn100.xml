<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Mon, 26 Aug 2024 00:30:03 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Why am I writing a Rust compiler in C? (169 pts)]]></title>
            <link>https://notgull.net/announcing-dozer/</link>
            <guid>41351446</guid>
            <pubDate>Sun, 25 Aug 2024 21:08:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://notgull.net/announcing-dozer/">https://notgull.net/announcing-dozer/</a>, See on <a href="https://news.ycombinator.com/item?id=41351446">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p>To bootstrap Rust, no cost is too great.</p>

<p>Perceptive Rustaceans may have noticed my activity has gone down as of late.
There are a handful of different reasons for this. I’ve been the subject of a
truly apocalyptic series of life events, including the death of a relative that
rattled me to my core. I’ve had more responsibilities at work, leaving me with
less time and energy to contribute. Maybe I’ve also lost a little bit of the
college-kid enthusiasm that brought me to open source in the first place.</p>

<p>There’s another reason, too. I’ve been cooking up a project that’s been taking
up most of my time. It’s certainly the largest project I’ve created in the open
source world, and if I complete it, it will certainly be my crowning
achievement.</p>

<p>I am writing a Rust compiler in pure C. No C++. No <a href="https://en.wikipedia.org/wiki/Flex_(lexical_analyser_generator)"><code>flex</code></a> or <a href="https://en.wikipedia.org/wiki/Yacc"><code>yacc</code></a>. Not even a
<a href="https://en.wikipedia.org/wiki/Make_(software)"><code>Makefile</code></a>. Nothing but pure C.</p>

<p>It’s called <a href="https://codeberg.org/notgull/dozer">Dozer</a>.</p>

<h2 id="wait-why">Wait, Why?</h2>

<p>To understand why I’ve followed this path of madness, you first need to
understand bootstrapping and why it is important.</p>

<p>Let’s say that you’ve written some code in Rust. In order to run this code, you
need to <em>compile</em> it. A <em>compiler</em> is a program that parses your code, validates
its correctness, and then transforms it into machine code that the CPU can
understand.</p>

<blockquote>
  <p><img src="https://notgull.net/images/ddog.jpg" alt="Dependency Dog" width="100">
<strong>Dependency Dog:</strong> Yes, it’s significantly more complicated than that. Except when it’s less complicated than that. Compilers are tricky to even describe.</p>
</blockquote>

<p>For Rust, your main compiler is <a href="https://github.com/rust-lang/rust">rustc</a>. If you don’t know, this is the
underlying program that <code>cargo</code> calls when you run <code>cargo build</code>. It’s fantastic
software, and frankly a gem of the open source community. Its code quality is up
there with the Linux kernel and the Quake III source code.</p>

<p>However, <a href="https://github.com/rust-lang/rust">rustc</a> itself is a program. So it needs a compiler to compile it from
its source code to machine code. Say, what language <em>is</em> <a href="https://github.com/rust-lang/rust">rustc</a> written in?</p>

<p><img src="https://notgull.net/images/rustc-in-rust.png" alt="rustc is 97.3 percent rust"></p>

<p>Ah, <a href="https://github.com/rust-lang/rust">rustc</a> is a Rust program. Written in Rust, for the purpose of compiling
Rust code. But, think about this for a second. If <a href="https://github.com/rust-lang/rust">rustc</a> is written in Rust,
and <a href="https://github.com/rust-lang/rust">rustc</a> is needed to compile Rust code, that means you need to use <a href="https://github.com/rust-lang/rust">rustc</a>
to compile <a href="https://github.com/rust-lang/rust">rustc</a>. Which is fine for us users, since we can just download
<a href="https://github.com/rust-lang/rust">rustc</a> from the internet and use it.</p>

<p>But, who compiled the first <a href="https://github.com/rust-lang/rust">rustc</a>? There had to be a chicken before the egg,
right? Where does it start?</p>

<p>…</p>

<p>Actually, that’s fairly simple. Every new version of <a href="https://github.com/rust-lang/rust">rustc</a> was compiled with
the previous version of <a href="https://github.com/rust-lang/rust">rustc</a>. So <a href="https://github.com/rust-lang/rust">rustc</a> version 1.80.0 was compiled with
<a href="https://github.com/rust-lang/rust">rustc</a> version 1.79.0. Which was, in turn, compiled with <a href="https://github.com/rust-lang/rust">rustc</a> version
1.78.0. And so on and so forth, all the way back to <a href="https://github.com/rust-lang/rust/tree/ef75860a0a72f79f97216f8aaa5b388d98da6480">version 0.7</a>
if the compiler. At that point, the compiler was written in <a href="https://en.wikipedia.org/wiki/OCaml">OCaml</a>. So all you
needed was an OCaml compiler to get a fully functioning <a href="https://github.com/rust-lang/rust">rustc</a> program.</p>

<p>There, problem solved! We’ve figured out how to create <a href="https://github.com/rust-lang/rust">rustc</a> from first
principles! All is well, let’s go back to business.</p>

<p>Just one more thing. We still need a version of the <a href="https://en.wikipedia.org/wiki/OCaml">OCaml</a> compiler for all of
this to work. So what language is the <a href="https://en.wikipedia.org/wiki/OCaml">OCaml</a> compiler written in?</p>

<p><img src="https://notgull.net/images/ocaml-in-ocaml.png" alt="OCaml is 84 percent OCaml"></p>

<p><em>faceplant</em></p>

<p>Okay, okay, no worries! There is a <a href="https://github.com/Ekdohibs/camlboot">project</a>
that can successfully compile the <a href="https://en.wikipedia.org/wiki/OCaml">OCaml</a> compiler using <a href="https://en.wikipedia.org/wiki/GNU_Guile">Guile</a>, which is one of the many
variants of <a href="https://en.wikipedia.org/wiki/Scheme_(programming_language)">Scheme</a>, which is one of many variants of <a href="https://en.wikipedia.org/wiki/Lisp_(programming_language)">Lisp</a>. Not to mention,
<a href="https://en.wikipedia.org/wiki/GNU_Guile">Guile</a>’s interpreter is written in C.</p>

<p>So this brings us, as all eventually things do, to the C programming language. We just
compile it using <a href="https://en.wikipedia.org/wiki/GNU_Compiler_Collection">GCC</a>, and everything works out. So we just need to compile
<a href="https://en.wikipedia.org/wiki/GNU_Compiler_Collection">GCC</a>, which is written using… C++?!</p>

<p>Okay, that’s a little unfair. <a href="https://en.wikipedia.org/wiki/GNU_Compiler_Collection">GCC</a> was written in C until version 5, and it’s
not like there’s a shortage of C compilers written in C out there. For instance,
consider <a href="https://en.wikipedia.org/wiki/Tiny_C_Compiler">TinyCC</a>, which is written in C and handles not only compiling, but
assembly and linking too.</p>

<p>…but that still doesn’t answer our question. What was the first C compiler
written in? Assembly? Then what was the first assembler written in?</p>

<h2 id="the-descent-principle">The Descent Principle</h2>

<p>This is where we introduce the <a href="https://bootstrappable.org/">Bootstrappable Builds</a>
project. To me, this is one of the most fascinating projects in the open source
community. It’s basically code alchemy.</p>

<p>Their <a href="https://github.com/fosslinux/live-bootstrap">Linux bootstrap process</a>
starts with a 512-byte binary seed. This seed contains what’s possibly the
simplest compiler you can imagine: it takes hexadecimal digits and outputs the
corresponding raw bytes. As an example, here part of the “source code” that’s
compiled with this compiler.</p>

<div><pre><code>31 C0           # xor ax, ax
8E D8           # mov ds, ax
8E C0           # mov es, ax
8E D0           # mov ss, ax
BC 00 77        # mov sp, 0x7700
FC              # cld ; clear direction flag
88 16 15 7C     # mov [boot_drive], dl
</code></pre></div>

<p>Note that everything after the pound sign is a comment, and all whitespace is
stripped. Frankly, I’m not even sure this can be called a programming language.
Still, it is <em>technically</em> analyzable, dissectable source code.</p>

<p>From here, this compiler compiles a very simple operating system, a barebones
shell, and a slightly more advanced compiler. That compiler compiles a slightly
more advanced compiler. A few steps later, you have something that roughly
<em>looks</em> like assembly code.</p>

<div><pre><code>DEFINE cmp_ebx,edx 39D3
DEFINE je 0F84
DEFINE sub_ebx, 81EB

:loop_options
    cmp_ebx,edx                         # Check if we are done
    je %loop_options_done               # We are done
    sub_ebx, %2                         # --options
</code></pre></div>

<p>Man, it’s weird to think of <em>assembly code</em> as being higher-level than anything
else, right?</p>

<p>This is enough to get them to a very basic subset of C. Then they compile a
slightly more advanced C compiler written in this subset. A few steps later they
can compile <a href="https://en.wikipedia.org/wiki/Tiny_C_Compiler">TinyCC</a>. From there they can bootstrap <a href="https://en.wikipedia.org/wiki/Yacc"><code>yacc</code></a>, basic coreutils,
Bash, autotools, and eventually <a href="https://en.wikipedia.org/wiki/GNU_Compiler_Collection">GCC</a> and Linux.</p>

<p>I’m not doing this justice, it’s a fascinating process. Every step is listed
<a href="https://github.com/fosslinux/live-bootstrap/blob/master/parts.rst">here</a>.</p>

<p>Anyhow, you’ve essentially gone from “a binary blob small enough to be manually
analyzed” to Linux, GCC, and basically everything else. But let’s start again
from <a href="https://en.wikipedia.org/wiki/Tiny_C_Compiler">TinyCC</a>.</p>

<p>Right now, Rust shows up very late into this process. They use <a href="https://github.com/thepowersgang/mrustc">mrustc</a>, an
alternative Rust implementation written in C++ that can compile <a href="https://github.com/rust-lang/rust">rustc</a> version
1.56. From here, they then compile up to modern Rust code.</p>

<p>The main issue here is that, by the time C++ is introduced into the bootstrap
chain, the bootstrap is basically over. So if you wanted to use Rust at any
point before C++ is introduced, you’re out of luck.</p>

<p>So, for me, it would be <em>really nice</em> if there was a Rust compiler that could be
bootstrapped from C. Specifically, a Rust compiler that can be bootstrapped from
<a href="https://en.wikipedia.org/wiki/Tiny_C_Compiler">TinyCC</a>, while assuming that there are no tools on the system yet that could be
potentially useful.</p>

<p>That’s <a href="https://codeberg.org/notgull/dozer">Dozer</a>.</p>

<h2 id="the-plan">The Plan</h2>

<p>I’ve been working on <a href="https://codeberg.org/notgull/dozer">Dozer</a> for the past two months, putting my anemic free
time to work on writing in a language that I kind of hate.</p>

<blockquote>
  <p><img src="https://notgull.net/images/ddog.jpg" alt="Dependency Dog" width="100">
<strong>Dependency Dog:</strong> That’s a little unfair. C has some elegant qualities to it. Reality truly is what you make of it. It’s just that I would not let this code anywhere near production.</p>
</blockquote>

<p>It’s written with no extensions, and so far both <a href="https://en.wikipedia.org/wiki/Tiny_C_Compiler">TinyCC</a> and <a href="https://sr.ht/~mcf/cproc/">cproc</a> are able
to compile it with no issues. I’m using <a href="https://c9x.me/compile/">QBE</a> as a backend. Other than that, I
assume no tools exist on the system. Just a C compiler, some very basic shell
implementation, and nothing else.</p>

<p>I won’t get into the raw <em>experience</em> of writing a compiler in this blogpost.
But so far, I have the lexer done, as well as a sizable part of the parser.
Macro/module expansion is something I’m putting off as long as possible,
typechecking only supports <code>i32</code>, and codegen is a little bit rough. But it’s a
start.</p>

<p>I can successfully compile this code:</p>

<div><pre><code><span>fn</span> <span>rust_main</span><span>()</span> <span>-&gt;</span> <span>i32</span> <span>{</span>
    <span>(</span><span>2</span> <span>-</span> <span>1</span><span>)</span> <span>*</span> <span>6</span> <span>+</span> <span>3</span>
<span>}</span>
</code></pre></div>

<p>So, where to from here? Here’s my plan.</p>

<ul>
  <li>Slowly advance <a href="https://codeberg.org/notgull/dozer">Dozer</a> until it can compile some basic <code>libc</code>-using samples,
then <code>libcore</code>, then <a href="https://github.com/rust-lang/rust">rustc</a>.
    <ul>
      <li>For the record, I’m planning on compiling <a href="https://github.com/rust-lang/rust">rustc</a>’s <a href="https://github.com/rust-lang/rustc_codegen_cranelift">Cranelift</a>
backend, which is written entirely in Rust. Since we’re assuming we don’t
have C++ yet, we can’t compile LLVM.</li>
    </ul>
  </li>
  <li>Create a <code>cargo</code> equivalent that can use <a href="https://codeberg.org/notgull/dozer">Dozer</a> to compile Rust packages.</li>
  <li>Find out which sources in <a href="https://github.com/rust-lang/rust">rustc</a> are automaticaly generated and then strip
them out. By the Bootstrappable project’s rules, automatically generated code
is not allowed.</li>
  <li>Create a process that can be used to compile <a href="https://github.com/rust-lang/rust">rustc</a> and then <code>cargo</code>, then
use our compiled versions of <a href="https://github.com/rust-lang/rust">rustc</a>/<code>cargo</code> to re-compile canonical versions
of <a href="https://github.com/rust-lang/rust">rustc</a>/<code>cargo</code>.</li>
</ul>

<p>This will definitely be the hardest project I’ve ever undertaken. Part of me
doubts that I will be able to finish it. But you know what? It’s better to have
tried and lost than to never have tried at all.</p>

<p>Stay tuned for more <a href="https://codeberg.org/notgull/dozer">Dozer</a> updates, as well as an explanation of the
architecture I have planned.</p>


  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Database "sharding" came from Ultima Online? (101 pts)]]></title>
            <link>https://www.raphkoster.com/2009/01/08/database-sharding-came-from-uo/</link>
            <guid>41351219</guid>
            <pubDate>Sun, 25 Aug 2024 20:42:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.raphkoster.com/2009/01/08/database-sharding-came-from-uo/">https://www.raphkoster.com/2009/01/08/database-sharding-came-from-uo/</a>, See on <a href="https://news.ycombinator.com/item?id=41351219">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><a href="https://startuplessonslearned.blogspot.com/2009/01/sharding-for-startups.html#comment-form"><span title="L"><span>L</span></span>essons Learned: Sharding for startups </a>is a technical post about database scalability. What caught my eye was the <em>term</em>. What an odd term — “sharding.” Why would a database be described that way?</p>
<p>So I started reading a bit about it. It basically means running a bunch of parallel databases and looking into the right one, rather than trying to cram everything into one.</p>
<p>Near as I can tell, a quick Google seems to say that the term came about <a href="http://highscalability.com/unorthodox-approach-database-design-coming-shard">because of a guy who worked at Friendster and Flickr, </a>and seems to . Wikipedia has only had <a href="https://en.wikipedia.org/wiki/Shard_(database_architecture)">an article</a> for a little while. In the comment thread at Lessons Learned, there’s mention of the term being used in 2006.</p>
<p>Flickr, of course, was born as an MMO called <a href="https://en.wikipedia.org/wiki/Game_Neverending"><em>Game Neverending</em></a>. In fact, I was quoted in Ludicorp’s business plan, and Stewart Butterfield had asked if I could be an advisor, but I couldn’t do it at the time because of my contract with Sony. Sigh. Anyway, I would be <em>shocked</em> if the term “shard” hadn’t been thrown around those offices… because in MMOs, of course, “shards” has a very specific meaning and history.</p>

<p>It means database partitioning — of worlds. Parallel worlds each running the same static template database source, but evolving different runtime databases. But these were just called “servers” — like, <em>Meridian 59</em> had bunches of them, and they had numbers instead of the common practice of names that is in use today.</p>
<div><p><img decoding="async" title="A snippet from the UO intro movie" src="https://upload.wikimedia.org/wikipedia/en/c/cb/Mondain-uo-intro.jpg" alt="A snippet from the UO intro movie" width="283" height="160"></p><p>A snippet from the UO intro movie</p></div>
<p>No, “shards” came about specifically because when we realized we would need to run multiple whole copies of <em>Ultima Online</em> for users to connect to, we needed to come up with a fiction for it. I went off and read a whole mess of stuff about early Ultima lore and tried to come up with a fictional justification. What I ended up with <a href="https://en.wikipedia.org/wiki/Britannia_(Ultima_Online)">is described here pretty well</a>: that the evil wizard Mondain had attempted to gain control over Sosaria by trapping its essence in a crystal. When the Stranger at the end of Ultima I defeated Mondain and shattered the crystal, the crystal <strong>shards</strong> each held a refracted copy of Sosaria.</p>
<p>It was a very very specific word chosen because, well, it was a piece of a crystal, which was a completely fictional invention. If Mondain had captured Sosaria on a parchment or in a painting, I would have said “a tatter” or a “fragment” or some such. But in the original U1, it specifically said he had used a crystal to gain power. We even talked about terms like “multiverse” and the like at the time and dismissed them as comic-book geeky and not really Ultima-flavored… so “shard” it was.</p>
<p>Now, from there time kept marching forward as each parallel Sosaria evolved in tandem. (UO was supposed to be between U3 and U4, in terms of chronology). The difference is, some of them got the Avatar (sent by the Time Lord) and some didn’t. Some of them were captured by The Guardian, and we invented the notion that Shadowlords were essentially evil beings created from shards he had captured. In fact, the beta test shard eventually was captured in this way — if you read up on it, you’ll find that really, there should be a fourth Shadowlord running around now.</p>
<div><p><a href="http://flickr.com/photos/37996580417@N01/6819311"><img fetchpriority="high" decoding="async" title="Original planned UO map" src="https://i0.wp.com/farm1.static.flickr.com/6/6819311_40cd3d3801.jpg?resize=400%2C300" alt="Original planned UO map, photo by Cory Doctorow, CC BY-SA" width="400" height="300" data-recalc-dims="1"></a></p><p>Original planned UO map, photo by Cory Doctorow, CC BY-SA</p></div>
<p>(Originally, the landmass of <em>Second Age</em> was supposed to be Ambrosia from Ultima III, and there’s actually a spot up north that is where Exodus is supposed to go. We even made the art for the whirlpool that is supposed to go there, and then just never put it in. But that’s a whole other story…)</p>
<p>(Oh… and then why does the Stranger in the original UO intro movie have an Ankh on his chest? Because U9 was in development aready, and nobody had time to make a new model. 🙂 So it’s the same 3d model as was used in U9, which didn’t ship until <em>years</em> later. So expedience led to a fictional glitch.)</p>
<p>In any case, we called parallel servers “shards” and it became a term used occasionally though not universally as a term of art within the field. You’ll hear folks who worked on MMOs in the 90s use server and shard interchangeably — sometimes saying “shard” to reference a parallel server cluster rather than a physical server.</p>
<p>So, did this database term come from a doc that I dashed off one afternoon in 1996? Umm… I am not sure. Seems like an interesting coincidence, if not.</p>
<p>I wonder if I still have that doc…</p>

 </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Is Telegram really an encrypted messaging app? (332 pts)]]></title>
            <link>https://blog.cryptographyengineering.com/2024/08/25/telegram-is-not-really-an-encrypted-messaging-app/</link>
            <guid>41350530</guid>
            <pubDate>Sun, 25 Aug 2024 19:34:53 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.cryptographyengineering.com/2024/08/25/telegram-is-not-really-an-encrypted-messaging-app/">https://blog.cryptographyengineering.com/2024/08/25/telegram-is-not-really-an-encrypted-messaging-app/</a>, See on <a href="https://news.ycombinator.com/item?id=41350530">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-7859">
	
	<div>
		
<p>This blog is reserved for more serious things, and ordinarily I wouldn’t spend time on questions like the above. But much as I’d like to spend my time writing about exciting topics, sometimes the world requires a bit of what <a href="https://braddelong.substack.com/">Brad Delong </a>calls “Intellectual Garbage Pickup,” namely: correcting wrong, or mostly-wrong ideas that spread unchecked across the Internet. </p>



<p>This post is inspired by the recent and concerning news that <a href="http://app is accused of failure to cooperate with law enforcement over drug trafficking, child sexual content and fraud.">Telegram’s CEO Pavel Durov has been arrested by French authorities</a> for its failure to sufficiently moderate content. While I don’t know the details, the use of criminal charges to coerce social media companies is a pretty worrying escalation, and I hope there’s more to the story.</p>



<p>But this arrest is not what I want to talk about today.</p>



<p>What I do want to talk about is one specific detail of the reporting. Specifically: the fact that nearly every news report about the arrest refers to Telegram as an “encrypted messaging app.” Here are <a href="https://www.politico.eu/article/telegram-app-ceo-pavel-durov-reportedly-arrested-at-french-airport/">just a</a> <a href="https://abcnews.go.com/Technology/wireStory/french-authorities-arrest-telegram-ceo-pavel-durov-paris-113132319">few</a> <a href="https://www.france24.com/en/live-news/20240825-telegram-chief-pavel-durov-arrested-at-french-airport">examples</a>: </p>


<div>
<figure><a href="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-1.png"><img data-attachment-id="7864" data-permalink="https://blog.cryptographyengineering.com/2024/08/25/telegram-is-not-really-an-encrypted-messaging-app/image-34/" data-orig-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-1.png" data-orig-size="1182,274" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-1.png?w=300" data-large-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-1.png?w=700" tabindex="0" role="button" width="1024" height="237" src="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-1.png?w=1024" alt=""></a></figure></div>

<div>
<figure><a href="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-2.png"><img data-attachment-id="7865" data-permalink="https://blog.cryptographyengineering.com/2024/08/25/telegram-is-not-really-an-encrypted-messaging-app/image-35/" data-orig-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-2.png" data-orig-size="2466,562" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-2.png?w=300" data-large-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-2.png?w=700" tabindex="0" role="button" width="1024" height="233" src="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-2.png?w=1024" alt=""></a></figure></div>

<div>
<figure><a href="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-3.png"><img data-attachment-id="7867" data-permalink="https://blog.cryptographyengineering.com/2024/08/25/telegram-is-not-really-an-encrypted-messaging-app/image-36/" data-orig-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-3.png" data-orig-size="2040,582" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-3.png?w=300" data-large-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-3.png?w=700" tabindex="0" role="button" width="1024" height="292" src="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-3.png?w=1024" alt=""></a></figure></div>


<p>This phrasing drives me buts because in one a very limited technical sense it’s <em>not wrong.</em> Yet in every sense that matters, it fundamentally misrepresents what Telegram is and how it works in practice. And this misrepresentation is bad for both journalists and particularly for Telegram’s users, many of whom could be badly hurt as a result.</p>



<p>Now to the details. </p>



<h3>Does Telegram have encryption or doesn’t it?</h3>



<p>Many systems use encryption in some way or another. However, when we talk about encryption in the context of modern private messaging services, the word typically has a very specific meaning: it refers to the use of default <a href="https://en.wikipedia.org/wiki/End-to-end_encryption">end-to-end</a> encryption to protect users’ message content. When used in an industry-standard way, this feature ensures that every message will be encrypted using encryption keys that are only known to the communicating parties, and not to the service provider.</p>



<p>From your perspective as a user, an “encrypted messenger” ensures that each time you start a conversation, your messages will only be readable by the folks you intend to speak with. If the operator of a messaging service tries to view the content of your messages, all they’ll see is useless encrypted junk. That same guarantee holds for anyone who might hack into the provider’s servers, and also, for better or for worse, to <a href="https://www.theguardian.com/technology/2023/apr/20/crime-agencies-condemn-facebook-instagram-encryption-plans">law enforcement agencies that serve providers with a subpoena</a>. </p>



<p>Telegram clearly fails to meet this stronger definition for a simple reason: it does not end-to-end encrypt conversations by default. If you want to use end-to-end encryption in Telegram, you must manually activate an <a href="https://core.telegram.org/blackberry/secretchats">optional end-to-end encryption feature</a> called “Secret Chats” for every single private conversation you want to have. The feature is explicitly <span>not turned on</span> for the vast majority of conversations, and is only available for one-on-one conversations, and never for group chats with more than two people in them. </p>



<p>As a kind of a weird bonus, activating end-to-end encryption in Telegram is oddly difficult for non-expert users to actually do.</p>



<p>For one thing, the button that activates Telegram’s encryption feature is not visible from the main conversation pane, or from the home screen. To find it in the iOS app, I had to click at least four times — once to make a hidden menu pop up, and a second time to “confirm” that I wanted to use encryption. And even after this I was not able to actually have an encrypted conversation, since <em>Secret Chats only works if your conversation partner happens to be online </em>when you do this. </p>


<div>
<figure><a href="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-7.png"><img data-attachment-id="7884" data-permalink="https://blog.cryptographyengineering.com/2024/08/25/telegram-is-not-really-an-encrypted-messaging-app/image-40/" data-orig-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-7.png" data-orig-size="2908,658" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-7.png?w=300" data-large-file="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-7.png?w=700" tabindex="0" role="button" loading="lazy" width="1024" height="231" src="https://blog.cryptographyengineering.com/wp-content/uploads/2024/08/image-7.png?w=1024" alt=""></a><figcaption><em>Starting a “secret chat” with my friend Michael on the latest Telegram iOS app. From an ordinary chat screen this option isn’t directly visible. Getting it activated requires four clicks: <strong>(1)</strong> to get to Michael’s profile (left image), <strong>(2)</strong> on the “…” button to display a hidden set of options (center image), <strong>(3)</strong> on “Start Secret Chat”, and <strong>(4)</strong> on the “Are you sure…” confirmation dialog. After that I’m still unable to send Michael any messages, because Telegram’s Secret Chats can only be turned on if the other user is also online. </em></figcaption></figure></div>


<p>Overall this is quite different from the experience of starting a new encrypted chat in an industry-standard modern messaging application, which simply requires you to open a new chat window.</p>



<p>While it might seem like I’m being picky, the difference in adoption between default end-to-end encryption and this experience is likely very significant. The practical impact of these UX decisions is likely to ensure that the vast majority of one-on-one Telegram conversations — and literally <em>every single group chat</em> — allow Telegram’s servers to see and record the content of all messages sent between users. That may or may not be a problem for every Telegram user, but it’s certainly not something we’d advertise as particularly well encrypted.</p>



<p>(If you’re interested in the details, as well as a little bit of further criticism of Telegram’s actual encryption protocols, I’ll get into what we know about that further below.)</p>



<h3>But wait, does default encryption really matter?</h3>



<p>Maybe yes, maybe no! There are two different ways to think about this.</p>



<p>One is that <em>Telegram’s lack of default encryption is just fine</em> <em>for many people</em>. The reality is that many users don’t choose Telegram for encrypted private messaging at all. For plenty of people, Telegram is used more like a social media network than a private messenger. </p>



<p>Getting more specific, Telegram has two popular features that makes it ideal for this use-case. One of those is the ability to create and subscribe to “<a href="https://telegram.org/tour/channels">channels</a>“, each of which works like a broadcast network where one person (or a small number of people) can push content out to millions of readers. When you’re <em>broadcasting</em> messages to thousands of strangers in public, maintaining the secrecy of your chat content isn’t as important. </p>



<p>Telegram also supports large public <a href="https://telegram.org/tour/groups">group chats</a> that can include thousands of users. These groups can be made open for the general public to join, or they can set up as invite-only. While I’ve never personally wanted to share a group chat with thousands of people, I’m told that many people enjoy this feature. In the large and <em>public</em> instantiation, it also doesn’t really matter that Telegram group chats are unencrypted — after all, who cares about confidentiality if you’re talking in the public square?</p>



<p>But Telegram is not limited to just those features, and many users who join for them will also do other things.</p>



<p>Imagine you’re in a “public square” having a large group conversation. In that setting there may be no expectation of strong privacy, and so end-to-end encryption doesn’t really matter to you. But let’s say that you and five friends step out of the square to have a side conversation. Does <em>that</em> conversation deserve strong privacy? It doesn’t really matter what you want, because <em>Telegram won’t provide it</em>, at least not with encryption that protects you from sharing your content with Telegram servers. </p>



<p>Similarly, imagine you use Telegram for its social media-like features, meaning that you mainly consume content rather than producing it. But one day your friend, who also uses Telegram for similar reasons, notices you’re on the platform and decides she wants to send you a private message. Are you concerned about privacy now? And are you each going to manually turn on the “Secret Chat” feature —&nbsp;even though it requires four explicit clicks through hidden menus, and even though it will prevent you from communicating immediately if one of you is offline?</p>



<p>My strong suspicion is that many people who join Telegram for its social media features also end up using it to communicate privately. And I think Telegram knows this, and tends to advertise itself as a “secure messenger” and talk about the platform’s encryption features precisely because they know it makes people feel more comfortable. But in practice, I also suspect that very few of those users are actually <em>using Telegram’s encryption</em>. Many of those users may not even realize they have to turn encryption on manually, and think they’re already using it. </p>



<p>Which brings me to my next point.</p>



<h3>Telegram knows its encryption is difficult to turn on, and they continue to promote their product as a secure messenger</h3>



<p>Telegram’s encryption has <a href="https://threadreaderapp.com/thread/1474067549574688768.html">been subject to</a> <a href="https://grugq.tumblr.com/post/133453305233/operational-telegram">heavy criticism</a> <a href="https://www.dailydot.com/debug/telegram-isis-encryption-cryptography/">since</a> <a href="https://cpj.org/2016/05/why-telegrams-security-flaws-may-put-irans-journal/">at least 2016</a> (and possibly earlier) for many of the reasons I outlined in this post. In fact, many of these criticisms were made by experts including myself, in years-old conversations with Pavel Durov on Twitter.<sup>1</sup></p>



<p>Although the interaction with Durov could sometimes be harsh, I still mostly assumed good faith from Telegram back in those days. I believed that Telegram was busy growing their network and that, in time, they would improve the quality and usability of the platform’s end-to-end encryption: for example, by activating it as a default, providing support for group chats, and making it possible to start encrypted chats with offline users. I assumed that while Telegram might be a follower rather than a leader, it would eventually reach feature parity with the encryption protocols offered by Signal and WhatsApp. Of course, a second possibility was that Telegram would abandon encryption entirely — and just focus on being a social media platform.</p>



<p>What’s actually happened is a lot more confusing to me.</p>



<p>Instead of improving the usability of Telegram’s end-to-end encryption, the owners of Telegram have more or less kept their encryption UX unchanged since 2016. While there have been a <a href="https://core.telegram.org/mtproto">few upgrades to the underlying encryption algorithms</a> used by the platform, the user-facing experience of Secret Chats in 2024 is almost identical to the one <a href="https://grugq.tumblr.com/post/133453305233/operational-telegram">you’d have seen eight years ago</a>. This, despite the fact that the number of Telegram users has grown by 7-9x during the same time period.</p>



<p>At the same time, Telegram CEO Pavel Durov has continued to aggressively market Telegram as a “secure messenger.” Most recently he <a href="https://www.theregister.com/2024/05/14/telegram_ceo_calls_out_rival/">issued a scathing criticism of</a> Signal and WhatsApp on his personal Telegram channel, implying that those systems were backdoored by the US government, and only Telegram’s independent encryption protocols were really trustworthy. </p>



<p>While this might be a reasonable nerd-argument if it was taking place between two platforms that both supported default end-to-end encryption, Telegram really has no legs to stand on in this particular discussion. Indeed, it no longer feels amusing to see the Telegram organization urge people away from default-encrypted messengers, while <em>refusing to implement essential features that would widely encrypt their own users’ messages</em>. In fact, it’s starting to feel a bit malicious.</p>



<h3>What about the boring encryption details? </h3>



<p>This is a cryptography blog and so I’d be remiss if I didn’t spend at least a little bit of time on the boring encryption protocols. I’d also be missing a good opportunity to <em>let my mouth gape open in amazement</em>, which is pretty much what happens every time I look at the internals of Telegram’s encryption. </p>



<p>I’m going to handle this in one paragraph to reduce the pain, and you can feel free to skip past it if you’re not interested.</p>



<p>According to <a href="https://core.telegram.org/api/end-to-end">what I <em>think</em> is the latest encryption spec</a>, Telegram’s Secret Chats feature is based on a custom feature called MTProto 2.0. This system uses 2048-bit* finite-field <a href="https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange">Diffie-Hellman</a> key agreement, with group parameters (I think) chosen by the server.* (Since the Diffie-Hellman protocol is only executed interactively, this is why Secret Chats cannot be set up when one user is offline.*) MITM protection is handled by the end-users, who must compare key fingerprints. There are some weird random nonces provided by the server, which I don’t fully understands the purpose of* — and that <a href="https://words.filippo.io/dispatches/telegram-ecdh/">in the past used to actively make the key exchange totally insecure against a malicious server</a> (but this has long since been fixed.*) The resulting keys are then used to power the most amazing, <a href="https://eprint.iacr.org/2015/1177.pdf">non-standard</a> authenticated encryption mode ever invented, something called “<a href="https://core.telegram.org/api/end-to-end">Infinite Garble Extension</a>” (IGE) based on AES and with SHA2 handling authentication.*</p>



<p>NB: Every place I put a “*” in the paragraph above is a point where expert cryptographers would, in the context of something like a professional security audit, raise their hands and ask <em>a lot</em> of questions. I’m not going to go further than this. Suffice it to say that Telegram’s encryption is unusual. </p>



<h3>Is there anything else I should know?</h3>



<p>Yes, unfortunately. Even though end-to-end encryption is one of the best tools we’ve developed to prevent data compromise, it is hardly the end of the story. One of the biggest privacy problems in messaging is the availability of loads of meta-data — essentially data about who uses the service, who they talk to, and when they do that talking. </p>



<p>This data is not typically protected by end-to-end encryption. Even in applications that are broadcast-only, such as Telegram’s channels, there is plenty of useful metadata available about <em>who is listening to a broadcast.</em> That information alone is valuable to people, as evidenced by the enormous amounts of money that traditional broadcasters <a href="https://www.komando.com/news/security/stop-smart-tv-tracking/">spend to collect it</a>. Right now all of that information likely exists on Telegram’s servers, where it is available to anyone who wants to collect it.</p>



<p>I am not specifically calling out Telegram for this, since the same problem exists with virtually every other social media network and private messenger. But it should be mentioned, just to avoid leaving you with the conclusion that encryption is all we need. </p>



<p>Notes:</p>



<ol>
<li>I will never find all of these conversations again, thanks to Twitter search being so broken. If anyone can turn them up I’d appreciate it. </li>
</ol>
	</div><!-- .entry-content -->

			<!-- .entry-footer -->
	</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[TIL: Versions of UUID and when to use them (148 pts)]]></title>
            <link>https://ntietz.com/blog/til-uses-for-the-different-uuid-versions/</link>
            <guid>41350225</guid>
            <pubDate>Sun, 25 Aug 2024 19:05:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ntietz.com/blog/til-uses-for-the-different-uuid-versions/">https://ntietz.com/blog/til-uses-for-the-different-uuid-versions/</a>, See on <a href="https://news.ycombinator.com/item?id=41350225">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
  

  <p><strong>Saturday, June 29, 2024</strong></p>

  <div><p>About a month ago<sup><a href="#not-today">1</a></sup>, I was onboarding a friend into one of my side project codebases and she asked me why I was using a particular type of UUID.
I'd heard about this type while working on that project, and it's really neat.
So instead of hogging that knowledge for just us, here it is: some good uses for different versions of UUID.</p>
<h2 id="what-are-the-different-versions">What are the different versions?</h2>
<p>Usually when we have multiple numbered versions, the higher numbers are newer and presumed to be better.
In contrast, there are 8 UUID versions (v1 through v8) which are different and all defined in <a href="https://datatracker.ietf.org/doc/html/rfc9562">the standard</a>.</p>
<p>Here, I'll provide some explanation of what they are at a high level, linking to the specific section of the RFC in case you want more details.</p>
<ul>
<li><a href="https://www.rfc-editor.org/rfc/rfc9562.html#name-uuid-version-1">UUID Version 1 (v1)</a> is generated from timestamp, monotonic counter, and a MAC address.</li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc9562#name-uuid-version-2">UUID Version 2 (v2)</a> is reserved for security IDs with no known details<sup><a href="#dce">2</a></sup>.</li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9562.html#name-uuid-version-3">UUID Version 3 (v3)</a> is generated from MD5 hashes of some data you provide. The RFC suggests DNS and URLs among the candidates for data.</li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9562.html#name-uuid-version-4">UUID Version 4 (v4)</a> is generated from entirely random data. This is probably what most people think of and run into with UUIDs.</li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9562.html#name-uuid-version-5">UUID Version 5 (v5)</a> is generated from SHA1 hahes of some data you proivde. As with v3, the RFC suggests DNS or URLs as candidates.</li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9562.html#name-uuid-version-6">UUID Version 6 (v6)</a> is generated from timestamp, monotonic counter, and a MAC address. These are the same data as Version 1, but they change the order so that sorting them will sort by creation time.</li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9562.html#name-uuid-version-7">UUID Version 7 (v7)</a> is generated from a timestamp and random data.</li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9562.html#name-uuid-version-8">UUID Version 8 (v8)</a> is entirely custom (besides the required version/variant fields that all versions contain).</li>
</ul>
<h2 id="when-should-you-use-them">When should you use them?</h2>
<p>With eight different versions, which should you use?
There are a few common use cases that dictate which you should use, and some have been replaced by others.</p>
<p>You'll usually be picking between two of them: v4 or v7.
There are also some occasions to pick v5 or v8.</p>
<ul>
<li>Use v4 when you just want a random ID.
<em>This is a good default choice.</em></li>
<li>Use v7 if you're using the ID in a context where you want to be able to sort.
For example, consider using v7 if you are using UUIDs as database keys.</li>
<li>v5 or v8 are used if you have your own data you want in the UUID, but generally, you will know if you need it.</li>
</ul>
<p>What about the other ones?</p>
<ul>
<li><a href="https://www.rfc-editor.org/rfc/rfc9562.html#section-5.7-4">Per the RFC</a>, v7 improves on v1 and v6 and should be used over those if possible.
So you usually won't want v1 or v6.
If you do want one of those, you <em>can</em> use v6.</li>
<li>v2 is reserved for unspecified security things.
If you <em>are</em> using these, you probably can't tell me or anyone else about it, and you're probably not reading this post to figure out more about them.</li>
<li>v3 is superceded by v5, which uses a stronger hash.
This one is one where you probably <em>know</em> if you need it.</li>
</ul>
<hr>


</div>

  


  <hr>
  <p>
    If this post was enjoyable or useful for you, <strong>please share it!</strong>
    If you have comments, questions, or feedback, you can email <a href="mailto:me@ntietz.com">my personal email</a>.
    To get new posts and support my work, subscribe to the <a href="https://ntietz.com/newsletter/">newsletter</a>. There is also an <a href="https://ntietz.com/atom.xml">RSS feed</a>.
  </p>
  <p>
  <i></i> Want to become a better programmer?
  <a href="https://www.recurse.com/scout/click?t=c9a1a9e2e7a2ffefd4af20020b4af1e6">Join the Recurse Center!</a>
  <br>
  Want to hire great programmers?
  <a href="https://recurse.com/hire?utm_source=ntietz&amp;utm_medium=blog">Hire via Recurse Center!</a>
  <i></i>
</p>


</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The art of programming and why I won't use LLM (156 pts)]]></title>
            <link>https://kennethnym.com/blog/why-i-still-wont-use-llm/</link>
            <guid>41349443</guid>
            <pubDate>Sun, 25 Aug 2024 17:47:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kennethnym.com/blog/why-i-still-wont-use-llm/">https://kennethnym.com/blog/why-i-still-wont-use-llm/</a>, See on <a href="https://news.ycombinator.com/item?id=41349443">Hacker News</a></p>
<div id="readability-page-1" class="page"><div> <article> <div>   <p>as llms get better and better at writing code, more and more people, at least on twt, have started to incorporate llms into their workflow. most people seem to agree that llms have been a game changer for coding, praising them for how much they have improved their productivity, how much easier it is to write code, and claiming that programmers who refuse to use them are “not using them correctly” and will eventually get left behind
in my opinion, the effectiveness of llms in coding at their current state is vastly overblown. even if llms were as good as what avid users of them claim, i still won’t see myself using it in any meaningful capacity.</p>
<h2 id="the-art-of-programming">the art of programming</h2>
<p>programming can be broken down into two parts - solving problems algorithmically, breaking problems into steps that computers can follow within some contraints, thus forming a solution to the original problem; and expressing the solution in a way that the computer can understand.</p>
<p>both parts provide the programmers with an infinite canvas on which they can express their creativitiy. there are practically limitless ways to approach and solve a problem, and a practically infinite way to express a solution to the problem. hence, programming is a form of self-expression - it is an art form. what is produced through programming is a kind of art - an art few appreciate.</p>
<h2 id="i-am-a-programming-artist">i am a programming artist</h2>
<p>in that sense, i see myself as an artist, one that expresses his creative self through programming. i enjoy creating programming art, because only through it do i find my true self, one who has a burning passion to create and build things.</p>
<h2 id="llm-is-not-for-me">llm is not for me</h2>
<p>using llm to write code is like asking an artist to paint for you. if you only want the end result, by all means! if you are like me who enjoy the process of painting, then why would you bother automating the fun part away? one may say, “but i am only using llm to write code. i am still doing the problem solving myself!”. to me, programming isn’t complete if i don’t get to express the solution in code myself. it isn’t my art if i don’t create it myself.</p>
<h2 id="a-sad-reality">a sad reality</h2>
<p>it is sad to me just how much people are trying to automate away programming and delegating it to a black box that can’t even count letters in a word sometimes, even going as far as trying to emulate a software engineer on top of the black box. does no one not find programming fun anymore? does no one care enough about programming to go further beyond getting things working “well enough”? is this just another case of availability bias?</p>
<p>please don’t take this as a judgemental piece to anyone that i am alluring to. it’s fine to not find programming enjoyable. it’s fine to just want things to work. i am just disappointed at how the ones who care appear to be an ever dying breed.</p>  </div> </article> </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Lidl's Cloud Gambit: Europe's Shift to Sovereign Computing (246 pts)]]></title>
            <link>https://horovits.medium.com/lidl-is-taking-on-aws-the-age-of-eurocloud-b237258e3311</link>
            <guid>41348659</guid>
            <pubDate>Sun, 25 Aug 2024 16:35:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://horovits.medium.com/lidl-is-taking-on-aws-the-age-of-eurocloud-b237258e3311">https://horovits.medium.com/lidl-is-taking-on-aws-the-age-of-eurocloud-b237258e3311</a>, See on <a href="https://news.ycombinator.com/item?id=41348659">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><figure></figure><div><a rel="noopener follow" href="https://horovits.medium.com/?source=post_page-----b237258e3311--------------------------------"><div aria-hidden="false"><p><img alt="Dotan Horovits (@horovits)" src="https://miro.medium.com/v2/resize:fill:88:88/1*6rhez1l3VXgPkm1n8u_yZQ.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"></p></div></a></div><p id="f330">“<em>How Lidl accidentally took on the big guns of cloud computing</em>” — this article published yesterday <a href="https://www.ft.com/content/08eb1b45-91c2-4312-9d3c-ac5e4e557278" rel="noopener ugc nofollow" target="_blank">in the Financial Times</a> caught my attention. It shed light on an unexpected player in the cloud computing arena — Lidl, the European discount retailer known for its no-frills approach to groceries.</p><p id="361d">Remember the story of how AWS started some 20 years ago, as the Amazon retailer wanted to solve its own IT infrastructure needs? Now Lidl and its owner Schwarz Group is pulling the proverbial AWS play, and spinning up its internal IT unit, <a href="https://schwarz-digits.de/en" rel="noopener ugc nofollow" target="_blank">Schwarz Digits</a>, into a standalone operating division, which competes with AWS. According to FT, it positioned itself as a credible regional challenger against the likes of AWS, Google, and Microsoft.</p><p id="60ce">This move is not just an isolated case but part of a broader trend in Europe towards sovereign cloud computing.</p><p id="7198">As I pointed out in my previous <a href="https://medium.com/p/033e7518eefb" rel="noopener">blog post about the shifts in AWS</a>, the one-stop-cloud-shop approach has shown cracks. Amazon, Google, Microsoft, Alibaba et al. won’t be able to cover all grounds, neither in tech domains, nor in geo’s.</p><p id="742e">This realization comes at a time when European countries, led by Germany and Austria, are increasingly prioritizing stringent privacy and data protection laws. GDPR compliance is non-negotiable, and businesses are demanding cloud services that operate entirely within the EU’s borders and address these control and sovereignty needs. In essence, Europe is looking for its own “EuroCloud”.</p><p id="0141">This demand isn’t just theoretical. The EU has already taken concrete steps with initiatives like <a href="https://gaia-x.eu/" rel="noopener ugc nofollow" target="_blank">Gaia-X</a>, which sets the framework for what an EU cloud should look like — sovereign, secure, and compliant with European regulations.</p><figure><figcaption>gaia-x.eu</figcaption></figure><p id="2a0c">This push for a EuroCloud is why a grocery chain like Lidl can suddenly emerge as a cloud player, grabbing market share from AWS. Schwarz Digits generated €1.9 billion in sales last year and has signed on major clients like SAP and Bayern Munich. This is no fringe experiment. The <a href="https://www.stackit.de/en/" rel="noopener ugc nofollow" target="_blank">StackIT page</a> features a service list ranging from the basic compute-network-storage through managed databases, messaging, Kubernetes, monitoring, security and more.</p><p id="f3d4">This is something AWS is scrambling to address with its recent announcement of a €7.8 billion investment in an <a href="https://aws.amazon.com/blogs/security/aws-plans-to-invest-e7-8b-into-the-aws-european-sovereign-cloud-set-to-launch-by-the-end-of-2025/" rel="noopener ugc nofollow" target="_blank">AWS European Sovereign Cloud</a>, expected to launch its first region in Germany by the end of 2025. But will that be enough to regain the trust of European corporations</p><p id="dfe7">The pricing factor is another interesting angle. Lidl disrupted the retail market with its low-cost groceries; can it do the same in cloud computing? With Schwarz Digits, <strong>could Lidl become the low-cost EuroCloud alternative</strong> that businesses are looking for? AWS’s challenge will be to convince these businesses that its new European Sovereign Cloud can offer the same level of trust, security, and affordability.</p><p id="c4fa">As we watch this play out, it’s clear that the days of one-stop-cloud-shops are numbered. The market is fragmenting, and specialized, regionally-focused providers like Schwarz Digits are stepping in to fill the gaps left by global giants.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Finding a therapist who takes your insurance can be nearly impossible (125 pts)]]></title>
            <link>https://www.npr.org/sections/shots-health-news/2024/08/24/nx-s1-5028551/insurance-therapy-therapist-mental-health-coverage</link>
            <guid>41348421</guid>
            <pubDate>Sun, 25 Aug 2024 16:12:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.npr.org/sections/shots-health-news/2024/08/24/nx-s1-5028551/insurance-therapy-therapist-mental-health-coverage">https://www.npr.org/sections/shots-health-news/2024/08/24/nx-s1-5028551/insurance-therapy-therapist-mental-health-coverage</a>, See on <a href="https://news.ycombinator.com/item?id=41348421">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="storytext">
      <div id="resg-s1-18415">
            <div data-crop-type="">
        <picture>
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2286+0+0/resize/1100/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F90%2F73%2Fa87000f443909c130e2b8c2cc77f%2Fvertical-4x5-crop-updated.jpg" type="image/webp" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2286+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F90%2F73%2Fa87000f443909c130e2b8c2cc77f%2Fvertical-4x5-crop-updated.jpg" data-format="webp">
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2286+0+0/resize/1100/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F90%2F73%2Fa87000f443909c130e2b8c2cc77f%2Fvertical-4x5-crop-updated.jpg" type="image/jpeg" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2286+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F90%2F73%2Fa87000f443909c130e2b8c2cc77f%2Fvertical-4x5-crop-updated.jpg" data-format="jpeg">
            <img src="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2286+0+0/resize/1100/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F90%2F73%2Fa87000f443909c130e2b8c2cc77f%2Fvertical-4x5-crop-updated.jpg" alt="Clockwise from top left: Marsinah Ramirez Buchan, Philip Bender, Elizabeth Fisher, Rosanne Marmor, Kendra F. Dunlap, and Carter J. Carter. This is a collage of six portraits of therapists in their offices.	" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2286+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F90%2F73%2Fa87000f443909c130e2b8c2cc77f%2Fvertical-4x5-crop-updated.jpg" data-format="jpeg">
        </picture>
</div>
<div>
    <div>
        <p>
                Top row, from left: Marsinah Ramirez Buchan, Philip Bender, Elizabeth Fisher. Bottom row, from left: Rosanne Marmor, Kendra F. Dunlap, and Carter J. Carter.
                <b aria-label="Image credit">
                    
                    Tony Luong for ProPublica
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        Tony Luong for ProPublica
        
    </span>
</p></div>
   </div>
   <p>Carter J. Carter became a therapist to help young people struggling with their mental health. Rosanne Marmor wanted to support survivors of trauma. Kendra F. Dunlap aspired to serve people of color.</p>   <p>They studied, honed their skills and opened practices, joining health insurance networks that put them within reach of people who couldn’t afford to pay for sessions out of pocket.</p>   <p>So did more than 500 other psychologists, psychiatrists and therapists who shared their experiences with ProPublica.</p>   <p><em>This story comes from ProPublica, a nonprofit newsroom that investigates abuses of power. Sign up to receive </em><a href="https://www.propublica.org/newsletters/the-big-story?source=www.propublica.org&amp;placement=top-note&amp;region=national"><em>their biggest stories</em></a><em> as soon as they’re published.</em></p>   <p>But one after another, they confronted a system set up to squeeze them out.</p>   
   <p>Although federal law requires insurers to provide the same access to mental and physical health care, these companies have been caught, time and again, shortchanging customers with mental illness — <a href="https://ag.ny.gov/press-release/2021/attorney-general-james-and-us-department-labor-deliver-14-million-consumers-who">restricting coverage</a> and <a href="https://www.latimes.com/california/story/2023-10-13/kaiser-permanente-200-million-settlement-mental-health-care">delaying</a> or <a href="https://www.governor.ny.gov/news/governor-hochul-announces-26-million-fines-against-insurance-companies-failing-adequately">denying</a> treatment.</p>   <p>These patients — whose disorders can be chronic and <a href="https://www.milliman.com/-/media/milliman/pdfs/articles/milliman-high-cost-patient-study-2020.ashx">costly</a> — are bad for business, industry insiders told ProPublica.</p>   <p>“The way to look at mental health care from an insurance perspective is: I don’t want to attract those people. I am never going to make money on them,” said Ron Howrigon, a consultant who used to manage contracts with providers for major insurers. “One way to get rid of those people or not get them is to not have a great network.”</p>   
   
<!-- END ID="RESNX-S1-5028551-100" CLASS="BUCKETWRAP INTERNALLINK INSETTWOCOLUMN INSET2COL " -->
   <p>There are nowhere near enough available <a href="https://www.mamh.org/assets/files/RTI_Behavioral_Health_Parity_Report.pdf">therapists</a> in insurance networks to serve all of the people <a href="https://kffhealthnews.org/news/narrow-networks-get-even-tighter-when-shopping-for-mental-health-specialists/">seeking</a> care. And although almost all Americans are insured, about <a href="https://www.nimh.nih.gov/health/statistics">half of people</a> with mental illness are unable to access treatment.</p>   <p>The <a href="https://www.azcentral.com/story/opinion/op-ed/2022/06/20/mental-health-services-should-up-doctors-not-insurers/7629980001/">consequences</a> can be <a href="https://www.npr.org/sections/health-shots/2023/04/17/1164782264/teen-suicide-health-insurance-denial-mental-health-parity">devastating.</a></p>   <p>To understand the forces that drive even the most well-intentioned therapists from insurance networks, ProPublica plunged into a problem most often explored in statistics and one-off perspectives. Reporters spoke to hundreds of providers in nearly all 50 states, from rural communities to big cities.</p>   
   <p>The interviews underscore how the nation’s insurers — quietly, and with minimal pushback from lawmakers and regulators — have assumed an outsize role in mental health care.</p>   <p>It is often the insurers, not the therapists, that determine who can get treatment, what kind they can get and for how long.<strong> </strong>More than a dozen therapists said insurers urged them to reduce care when their patients were on the brink of harm, including suicide.</p>   <p>All the while, mental health providers struggled to stay in business as insurers withheld reimbursements that sometimes came months late. Some spent hours a week chasing down the meager payments, listening to hold music and sending faxes into the abyss.</p>   <p>Several insurers told ProPublica that they are committed to ensuring access to mental health providers, emphasizing that their plans are in compliance with state and federal laws. Insurers also said they have practices in place to make sure reimbursement rates reflect market value and to support and retain providers, for which they continually recruit.</p>   
   
<!-- END ID="RESNX-S1-5028551-101" CLASS="BUCKETWRAP INTERNALLINK INSETTWOCOLUMN INSET2COL " -->
   <p>Therapists have tried to stick it out.</p>   <p>They have forgone denied payments. They have taken second jobs. They have sought therapy for their own support.</p>   <p>But the hundreds who spoke with ProPublica said they each faced a moment in which they decided they had to leave the network.</p>   <h3>Why I left the network: Because insurers interfered with my patient’s care</h3>   <p>For Melissa Todd, that moment came after she was pressured to limit the care of a patient in crisis.</p>   <p>A psychologist from Eugene, Oregon, Todd was treating a young woman with a history of trauma whose father had died unexpectedly.</p>   <p>When the patient came to Todd, she was often unable to sleep more than an hour or two for days on end. “She described it to me as maddening,” said Todd, who recognized an array of symptoms that fit a diagnosis of bipolar disorder.</p>   <div id="resg-s1-18397">
            <div data-crop-type="">
        <picture>
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/400/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/900/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1200/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/webp">
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/400/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/900/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1200/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/jpeg">
            <img src="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1100/quality/50/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F77%2F15%2F5b8f15b94c4481ed3abb30a65a8d%2F20240616-luong-mental-health-project-3400-1.jpg" alt="Melissa Todd in her office in Eugene, Oregon." loading="lazy">
        </picture>
</div>
<div>
    <div>
        <p>
                Melissa Todd in her office in Eugene, Oregon.
                <b aria-label="Image credit">
                    
                    Tony Luong  for ProPublica
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        Tony Luong  for ProPublica
        
    </span>
</p></div>
   </div>
   <p>Todd helped her devise safety plans when she felt suicidal and was available after hours, even in the middle of the night.</p>   
   <p>“I was giving her almost daily updates,” the patient told ProPublica, “because that was what I realized I needed to do if I wanted to survive.” (Her name is being withheld to protect her privacy.)</p>   <p>Longstanding practice guidelines recommend that providers consider a combination of therapy and medication when treating patients with bipolar disorder, so Todd sought a psychiatrist who could manage the young woman’s prescription. Although the patient was covered by UnitedHealthcare, America’s largest insurer, Todd was unable to find anyone who had openings. Her patient had to pay hundreds of dollars for out-of-network psychiatry sessions.</p>   <p>Then, six months into treatment, UnitedHealthcare began to question whether therapy was even necessary.</p>   <p>Todd walked an insurance reviewer through the details of her patient’s fragile state. Even when the woman had periods of calm, Todd said, she knew the disorder was unpredictable. She worried her patient could attempt suicide if care was cut off at the wrong time.</p>   <p>The reviewers responded that the patient needed to be actively experiencing severe symptoms to continue with treatment and suggested that the therapy wasn’t working.</p>   <p>“I felt all this pressure to say the right thing to be able to keep giving my client what she needed,” Todd said.</p>   <p>In the end, the reviewers demanded a date when therapy would no longer be needed.</p>   <p>Todd left the network so she could treat her patient without interference. The patient could afford to pay out-of-pocket because of a small settlement after her father’s sudden death. People are more than twice as likely to pay their full bill out of pocket for visits to mental health providers than primary care physicians, according to a ProPublica analysis of <a href="https://meps.ahrq.gov/mepsweb/">federal survey data</a>.</p>   <p>While United did not respond to questions about Todd’s experience, spokesperson Tony Marusic <a href="https://www.documentcloud.org/documents/25052510-propublica-insurance-statements-why-i-left-the-network">said</a> the insurance company is “committed to ensuring members have access to care that is consistent with the terms of their health plans.”</p>   
   <p>Like Todd, many providers told ProPublica that insurers frequently interfere with patient care. In addition to cutting off therapy, they are pressuring providers to cap the length of their sessions to 45 minutes, even when the patients require more time. Therapists told us that they have seen their patients sink deeper into depression, suffer worsening panic attacks and wind up in emergency rooms after insurers refused to cover treatment.</p>   <p><em>ProPublica interviewed 44 providers who said they left networks after insurers questioned the necessity of care.</em></p>   <p data-pym-loader="" data-child-src="https://apps.npr.org/dailygraphics/graphics/mental-health-quotes-20240822/group-1.html" id="responsive-embed-mental-health-quotes-20240822-group-1"> Loading... </p>
   
<!-- END ID="RESNX-S1-5028551-102" CLASS="BUCKETWRAP STATICHTML" -->
   <h3>Why I left the network: Because of the dysfunction</h3>   <p>Last summer, Daniel Clark, a psychologist from New York, tested a college student for attention deficit hyperactivity disorder. According to the student’s plan, Cigna was supposed to cover nearly all of the evaluation, which cost more than $1,400. But the company refused to do so and told Clark to bill the patient. Clark told his patient not to pay until he contested the claim.</p>   <p>When Clark first called Cigna, a customer service representative told him the insurer had made a mistake. But the company didn’t immediately correct the error, so Clark faxed an appeal. He figured it would be quicker than sending it via snail mail — which, in the year 2023, remained his only other way to contest a coverage decision.</p>   <div id="resg-s1-18398">
            <div data-crop-type="">
        <picture>
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/400/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/900/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1200/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/webp">
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/400/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/900/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1200/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/jpeg">
            <img src="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1100/quality/50/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa3%2F5e%2F31ad7e37476ab893c72e7b94569b%2F20240723-upload-6511-1.jpg" alt="Daniel Clark in his office in New York City." loading="lazy">
        </picture>
</div>
<div>
    <div>
        <p>
                <em>Daniel Clark in his office in New York City.</em>
                <b aria-label="Image credit">
                    
                    Tony Luong for ProPublica
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        Tony Luong for ProPublica
        
    </span>
</p></div>
   </div>
   <p>When he heard nothing in response, he called again and repeated the story to a new customer service rep, who said the claim was still being worked on. Clark kept making calls — from his office, his car, his home — but gave up logging them when he hit 20. Just last month, more than a year after seeing the patient and what he estimates were 45 calls, Cigna finally paid Clark. With the amount of time he spent on customer service lines, he calculates he has lost more than $5,000 that he could have earned seeing additional patients.</p>   
   <p>Anneliese Hanson, a former Cigna manager, told ProPublica that the poor customer service can be traced, in part, to a decision several years ago to <a href="https://www.propublica.org/article/cigna-medical-director-doctor-patient-preapproval-denials-insurance">outsource these calls to the Philippines</a>. A therapist who was hired as a manager at Cigna, Hanson worked in the behavioral health department during that transition. She said overseas employees lack access to the full claims system and often are unfamiliar with complex medical terminology in English.</p>   <p>After leaving the insurance industry in 2022, Hanson opened her own private therapy practice. She has experienced firsthand waiting more than two hours on hold and searching in vain for relevant addresses and fax numbers. The byzantine process isn’t an accident, she has concluded.</p>   <p>“The idea is if you make it so frustrating for providers to follow up on claim denials, they’re just going to give up and the insurance company is not going to have to pay out,” Hanson said.</p>   <p>Cigna did not respond to ProPublica’s questions.</p>   <p><em>ProPublica spoke with more than 100 providers who left insurance networks after getting tangled in red tape.</em></p>   <p data-pym-loader="" data-child-src="https://apps.npr.org/dailygraphics/graphics/mental-health-quotes-20240822/group-2.html" id="responsive-embed-mental-health-quotes-20240822-group-2"> Loading... </p>
   
<!-- END ID="RESNX-S1-5028551-103" CLASS="BUCKETWRAP STATICHTML" -->
   <p>In 2022, Connecticut therapist Donna Nicolino was treating a Ukrainian woman for posttraumatic stress. Her condition worsened after Russia invaded her home country, which threatened her family’s safety and led to the death of her friend’s son.</p>   <p>Just before the conflict began, New York-based Healthfirst denied nearly a dozen of Nicolino’s therapy claims.</p>   <div id="resg-s1-18402">
            <div data-crop-type="">
        <picture>
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/400/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/900/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1200/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/webp">
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/400/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/900/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1200/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/jpeg">
            <img src="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1100/quality/50/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F22%2Fcb%2Fcb0df79249f9bb5e1b0040ea3133%2F20240726-luong-mental-health-project-7275.jpg" alt="Donna Nicolino in her office in Willimantic, Connecticut." loading="lazy">
        </picture>
</div>
<div>
    <div>
        <p>
                <em>Donna Nicolino in her office in Willimantic, Connecticut.</em>
                <b aria-label="Image credit">
                    
                    Tony Luong for ProPublica
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        Tony Luong for ProPublica
        
    </span>
</p></div>
   </div>
   <p>“Documentation does not support services billed,” a notice stated. Her claims lacked a physician’s signature, according to the insurer, and did not include sufficient information to identify the patient or proof of consent for telehealth.</p>   <p>Nicolino was perplexed: Her notes didn’t require a doctor’s signature. Her records detailed the patient’s progress and included a signed consent.</p>   <p>Nicolino shared photos of her handwritten notes, and her patient called to attest that the therapy sessions had actually occurred. But Healthfirst continued to deny the claims and didn’t clarify why.</p>   <p>Nicolino saw her patient, often for free, as she tried to overturn the denials. She worried that the stress of dealing with insurance was aggravating her patient’s trauma.</p>   
   <p>But after nearly a year, Nicolino couldn’t go on with the instability and left the network. The patient, unable to cover the costs, had to end treatment.</p>   <p>“She was making some progress,” Nicolino said, “and we had to just pull the plug.”</p>   <p>Healthfirst spokesperson Maria Ramirez did not respond to questions about Nicolino’s payment issues, but she <a href="https://www.documentcloud.org/documents/25052510-propublica-insurance-statements-why-i-left-the-network">said</a> as a general matter, the insurer has “processes to verify that claims accurately reflect the services provided and are coded with accuracy and completeness.”</p>   <h3>Why I left the network: Because it was financially unsustainable</h3>   <p>Many providers just couldn’t make ends meet as in-network therapists.</p>   <p>Reimbursements <a href="https://www.gao.gov/products/gao-22-104597">rates</a> are largely stagnant and notoriously low. Therapists on average <a href="https://www.healthsystemtracker.org/brief/telehealth-payments-similar-early-in-the-pandemic/#Among%20firms%20offering%20telemedicine%20health%20benefits,%20how%20the%20firm%20expects%20telehealth%20use%20will%20compare%20to%20last%20year,%202022">earn</a> about $98 for a 45-minute session from commercial insurers, whereas their out-of-network colleagues can earn more than double that amount. Dozens of providers told ProPublica their reimbursement rates have barely shifted in years.</p>   <p>The <a href="https://www.in.gov/fssa/dmha/files/Financial-Challenges-Facing-Psychologists-Who-Accept-Insurance.pdf">overhead</a> of running a private practice can also be substantial: malpractice and health insurance, billing and administrative services, office rent and utilities. Insurers pay only for time in session, not the documenting of notes or chasing down of payments.</p>   <p>The reimbursement rates for mental health clinicians are also lower than what insurers pay medical providers for similar services. Take two in-network clinicians: If you spend an office visit talking about depression with your psychiatrist and then <a href="https://www.mamh.org/assets/files/RTI_Behavioral_Health_Parity_Report.pdf">have the same conversation</a> with a physician assistant, an insurer could pay the physician assistant nearly 20% more than the psychiatrist, despite their medical school training. This is according to rates set by Medicare, which insurers <a href="https://www.mamh.org/assets/files/RTI_Behavioral_Health_Parity_Report.pdf">look to</a> when setting their own rates. Despite federal rules requiring equitable access to care, there are no requirements to even out provider reimbursements.</p>   <p>Providers could join forces to fight for better pay, but <a href="https://www.apaservices.org/practice/legal/managed/antitrust-law">antitrust laws</a> and insurer contracts forbid them from collectively setting fees, which limits them talking to one another about how much they make.</p>   
   <p>Many did not share their pay rates with ProPublica, afraid that they would break a law or lead insurers to claw back payments.</p>   <p><em>More than 130 providers said they left insurance networks because of low reimbursement rates.</em></p>   <p data-pym-loader="" data-child-src="https://apps.npr.org/dailygraphics/graphics/mental-health-quotes-20240822/group-3.html" id="responsive-embed-mental-health-quotes-20240822-group-3"> Loading... </p>
   
<!-- END ID="RESNX-S1-5028551-104" CLASS="BUCKETWRAP STATICHTML" -->
   <p>Almost every state has a law that requires insurers to quickly <a href="https://www.apaservices.org/practice/business/legal/professional/prompt-pay">reimburse</a> for treatment claims, but the strength and enforcement of those laws varies greatly. Providers said they sometimes had to wait years to get paid.</p>   <p>Companies can also take back money even if they are the ones who made a mistake. Many states generally limit an insurer from clawing back payments more than two years after a claim is paid. But about 10 states have no restrictions.</p>   <p><em>Nearly 60 providers told ProPublica that they left networks after insurers delayed payments or tried to claw them back.</em></p>   <p data-pym-loader="" data-child-src="https://apps.npr.org/dailygraphics/graphics/mental-health-quotes-20240822/group-4.html" id="responsive-embed-mental-health-quotes-20240822-group-4"> Loading... </p>
   
<!-- END ID="RESNX-S1-5028551-105" CLASS="BUCKETWRAP STATICHTML" -->
   <p>After nearly a decade of providing therapy for children with severe autism, psychologist Anna DiNoto learned Premera Blue Cross was taking back more than $11,000 in payments for services she already delivered.</p>   <p>The company alleged that her large Washington-based practice sometimes used incorrect billing codes and kept notes that were not detailed enough to justify the treatment provided.</p>   <div id="resg-s1-18405">
            <div data-crop-type="">
        <picture>
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/400/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/900/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1200/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/webp">
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/400/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/900/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1200/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/jpeg">
            <img src="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/1100/quality/50/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x2000+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F1f%2Fde%2F25e0fd0b48d4869164d01aa2ff90%2F20240613-luong-mental-health-project-1963-1.jpg" alt="Anna DiNoto in her office in Monroe, Washington." loading="lazy">
        </picture>
</div>
<div>
    <div>
        <p>
                <em>Anna DiNoto in her office in Monroe, Washington.</em>
                <b aria-label="Image credit">
                    
                    Tony Luong for ProPublica
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        Tony Luong for ProPublica
        
    </span>
</p></div>
   </div>
   <p>Instead of having providers correct isolated errors like forgetting to log start and stop times for sessions, it placed the entire practice on a prepayment audit: For months, payments weren’t made because a reviewer had to first deem the documentation adequate.</p>   <p>“We just kept being told that our notes weren’t good and we needed to spend less and less time with our patients,” she said.</p>   <p>After taking out loans to pay staff, DiNoto and her business partner informed patients they would soon be unable to provide services. By the end, she estimated the insurance company had failed to pay them $1.5 million.</p>   <p>“And they also stole my heart,” she said. “I felt like I was gonna have a heart attack every day.”</p>   
   <p>A Premera spokesperson <a href="https://www.documentcloud.org/documents/25052510-propublica-insurance-statements-why-i-left-the-network">said</a> that the company was “transparent, responsive, and made every effort to ensure our responses were clear and straightforward.” The process of recouping money, the spokesperson said, ensures “proper fund use to support access to quality, affordable care.”</p>   <p>DiNoto, who took pride in having helped children who couldn’t walk or talk to be able to move and communicate, said her patients were left with little recourse. Several families went months without being able to find another provider. Some never did.</p>   <p>Desperate parents called her as their kids regressed; one went back to punching walls and running away from home.</p>   <p>When she informed Premera she was leaving the network, she received an email that surprised her almost as much as the audit.</p>   <p>Premera asked her to stay.</p>   <p>But she had made up her mind: She was done.</p>   <p><em>This story comes from ProPublica, a nonprofit newsroom that investigates abuses of power. Sign up to receive </em><a href="https://www.propublica.org/newsletters/the-big-story?source=www.propublica.org&amp;placement=top-note&amp;region=national"><em>their biggest stories</em></a><em> as soon as they’re published.</em></p>   <p><em>Photography by Tony Luong, special to ProPublica. Art Direction by ProPublica’s Alex Bandoni. </em><a href="https://www.propublica.org/people/kirsten-berg"><em>Kirsten Berg</em></a><em> and </em><a href="https://www.propublica.org/people/jeff-ernsthausen"><em>Jeff Ernsthausen</em></a><em> of ProPublica contributed reporting and research and </em><a href="https://www.propublica.org/people/Agnel-Philip"><em>Agnel Philip</em></a><em> contributed data analysis.  Visual design by Brent Jones of NPR and Mhari Shaw for NPR. </em><br></p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Rnote – Sketch and take handwritten notes (118 pts)]]></title>
            <link>https://github.com/flxzt/rnote</link>
            <guid>41348204</guid>
            <pubDate>Sun, 25 Aug 2024 15:51:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/flxzt/rnote">https://github.com/flxzt/rnote</a>, See on <a href="https://news.ycombinator.com/item?id=41348204">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/flxzt/rnote/main/crates/rnote-ui/data/icons/scalable/apps/rnote.svg"><img src="https://raw.githubusercontent.com/flxzt/rnote/main/crates/rnote-ui/data/icons/scalable/apps/rnote.svg" width="300"></a>
</p><p><a href="https://github.com/flxzt/rnote/actions/workflows/ci.yml">
        <img alt="CI" src="https://github.com/flxzt/rnote/actions/workflows/ci.yml/badge.svg">
    </a>
    <a href="https://liberapay.com/flxzt/donate" rel="nofollow">
        <img alt="Donate using Liberapay" src="https://raw.githubusercontent.com/flxzt/rnote/main/misc/assets/liberapay-donate-button.svg" width="60" height="20">
    </a>
</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Rnote</h2><a id="user-content-rnote" aria-label="Permalink: Rnote" href="#rnote"></a></p>
<blockquote>
<p dir="auto">Sketch and take handwritten notes.</p>
</blockquote>
<p dir="auto">Rnote is an open-source vector-based drawing app for sketching, handwritten notes and to annotate documents and pictures.
It is targeted at students, teachers and those who own a drawing tablet and provides features like Pdf and picture import and export,
an infinite canvas and an adaptive UI for big and small screens.</p>
<p dir="auto">Written in Rust and GTK4.</p>
<p dir="auto"><strong>Features</strong></p>
<ul dir="auto">
<li>Adaptive UI focused on stylus input</li>
<li>Pressure-sensitive stylus input with different and configurable stroke styles</li>
<li>Create many different shapes with the shape tool</li>
<li>Move, rotate, resize and modify existing content with the selection tool</li>
<li>Different document expansion layouts ( fixed pages, continuous vertical, infinite in every direction, .. )</li>
<li>Customizable background colors, patterns, sizes</li>
<li>Customizable page format</li>
<li>(Optional) pen sounds</li>
<li>Reconfigurable stylus button shortcuts</li>
<li>An integrated workspace browser for quick access to related files</li>
<li>Drag &amp; Drop, clipboard support</li>
<li>Pdf, Bitmap and Svg image import</li>
<li>Documents can be exported to Svg, Pdf and Xopp. Document pages and selections to Svg, Png and Jpeg.</li>
<li>Save and load the documents in the native <code>.rnote</code> file format</li>
<li>Tabs to work on multiple documents at the same time</li>
<li>Autosave, printing</li>
</ul>
<p dir="auto"><strong>Disclaimer</strong></p>
<p dir="auto">The file format is still unstable. It might change and break compatibility between versions.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Website</h2><a id="user-content-website" aria-label="Permalink: Website" href="#website"></a></p>
<p dir="auto">Rnote has a project website: <a href="https://rnote.flxzt.net/" rel="nofollow">rnote.flxzt.net</a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Linux</h3><a id="user-content-linux" aria-label="Permalink: Linux" href="#linux"></a></p>
<p dir="auto">Download the official flatpak on Flathub <a href="https://flathub.org/apps/details/com.github.flxzt.rnote" rel="nofollow">here</a>.</p>
<p><a href="https://flathub.org/apps/details/com.github.flxzt.rnote" rel="nofollow"><img width="250" alt="Download on Flathub" src="https://raw.githubusercontent.com/flxzt/rnote/main/misc/assets/flathub-badge.svg"></a>
</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">MacOS</h3><a id="user-content-macos" aria-label="Permalink: MacOS" href="#macos"></a></p>
<p dir="auto">Thanks to @dehesselle the app is available on MacOS as an app bundle.<br>
Check out the <a href="https://gitlab.com/dehesselle/rnote_macos" rel="nofollow">repository</a>, the latest release can be downloaded <a href="https://gitlab.com/dehesselle/rnote_macos/-/releases/permalink/latest" rel="nofollow">here</a>.</p>
<p><a href="https://gitlab.com/dehesselle/rnote_macos/-/releases/permalink/latest" rel="nofollow"><img height="150" alt="Download MacOS app bundle" src="https://raw.githubusercontent.com/flxzt/rnote/main/misc/assets/rnote-macos-app-bundle-badge.png"></a>
</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Windows</h3><a id="user-content-windows" aria-label="Permalink: Windows" href="#windows"></a></p>
<p dir="auto">Download the Windows installer from the latest release which can be found <a href="https://github.com/flxzt/rnote/releases/latest">here</a>.</p>
<p><a href="https://github.com/flxzt/rnote/releases/latest"><img width="250" alt="Download Windows installer" src="https://raw.githubusercontent.com/flxzt/rnote/main/misc/assets/windows-installer-badge.svg"></a>
</p>
<p dir="auto">Install using <a href="https://github.com/microsoft/winget-pkgs/tree/master/manifests/f/flxzt/rnote">Winget</a>:</p>
<div data-snippet-clipboard-copy-content="winget install flxzt.rnote"><pre><code>winget install flxzt.rnote
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Downgrading</h3><a id="user-content-downgrading" aria-label="Permalink: Downgrading" href="#downgrading"></a></p>
<p dir="auto">Because the file format still is unstable, downgrading to a specific version might be necessary.</p>
<p dir="auto">List all available past versions on flathub:</p>
<div dir="auto" data-snippet-clipboard-copy-content="flatpak remote-info --log flathub com.github.flxzt.rnote"><pre>flatpak remote-info --log flathub com.github.flxzt.rnote</pre></div>
<p dir="auto">Pick the commit from the desired version and downgrade with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo flatpak update --commit=<commit-hash> com.github.flxzt.rnote "><pre>sudo flatpak update --commit=<span>&lt;</span>commit-hash<span>&gt;</span> com.github.flxzt.rnote </pre></div>
<p dir="auto">After downgrading, the flatpak version can be pinned or unpinned with:</p>
<div data-snippet-clipboard-copy-content="$ flatpak mask com.github.flxzt.rnote
$ flatpak mask --remove com.github.flxzt.rnote"><pre><code>$ flatpak mask com.github.flxzt.rnote
$ flatpak mask --remove com.github.flxzt.rnote
</code></pre></div>
<p dir="auto">To update to the latest version again, unpin and run <code>flatpak update</code>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Screenshots</h2><a id="user-content-screenshots" aria-label="Permalink: Screenshots" href="#screenshots"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/flxzt/rnote/blob/main/crates/rnote-ui/data/screenshots/overview.png"><img src="https://github.com/flxzt/rnote/raw/main/crates/rnote-ui/data/screenshots/overview.png" alt="overview"></a><br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/flxzt/rnote/blob/main/crates/rnote-ui/data/screenshots/selection.png"><img src="https://github.com/flxzt/rnote/raw/main/crates/rnote-ui/data/screenshots/selection.png" alt="selection"></a><br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/flxzt/rnote/blob/main/crates/rnote-ui/data/screenshots/typewriter.png"><img src="https://github.com/flxzt/rnote/raw/main/crates/rnote-ui/data/screenshots/typewriter.png" alt="typewriter"></a><br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/flxzt/rnote/blob/main/crates/rnote-ui/data/screenshots/focus-mode.png"><img src="https://github.com/flxzt/rnote/raw/main/crates/rnote-ui/data/screenshots/focus-mode.png" alt="focus-mode"></a><br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/flxzt/rnote/blob/main/crates/rnote-ui/data/screenshots/workspaces.png"><img src="https://github.com/flxzt/rnote/raw/main/crates/rnote-ui/data/screenshots/workspaces.png" alt="workspaces"></a><br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/flxzt/rnote/blob/main/crates/rnote-ui/data/screenshots/document-settings.png"><img src="https://github.com/flxzt/rnote/raw/main/crates/rnote-ui/data/screenshots/document-settings.png" alt="document-settings"></a><br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/flxzt/rnote/blob/main/crates/rnote-ui/data/screenshots/action-shortcuts.png"><img src="https://github.com/flxzt/rnote/raw/main/crates/rnote-ui/data/screenshots/action-shortcuts.png" alt="action-shortcuts"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Pitfalls &amp; Known Issues</h2><a id="user-content-pitfalls--known-issues" aria-label="Permalink: Pitfalls &amp; Known Issues" href="#pitfalls--known-issues"></a></p>
<ul dir="auto">
<li>
<p dir="auto">Drag &amp; Drop not working -<br>
Make sure Rnote has permissions to the locations you are dragging files from. Can be granted in Flatseal (a Flatpak permissions manager)</p>
</li>
<li>
<p dir="auto">Odd location for current file -<br>
When the directory displayed in the header title is something like <code>/run/user/1000/../</code>, rnote does not have permissions to access the directory. Again, granting them in Flatseal fixes this issue.</p>
</li>
<li>
<p dir="auto">Stylus buttons move canvas / are not functional -<br>
Make sure that the <code>xf86-input-wacom</code>, drivers on X11 and <code>libinput</code> on Wayland and <code>libwacom</code> are installed and loaded.</p>
</li>
<li>
<p dir="auto">While hovering with the stylus, other input events are blocked in some regions of the screen -<br>
Supposed to be palm rejection, but might be undesirable. If there is a left- / righthanded system tablet setting, make sure it is set correctly. Rnote can't disable this unfortunately. ( discussed in issue <a href="https://github.com/flxzt/rnote/issues/329" data-hovercard-type="issue" data-hovercard-url="/flxzt/rnote/issues/329/hovercard">#329</a> )</p>
</li>
<li>
<p dir="auto">One of the stylus buttons shortcut mapping does not work as intended -<br>
On some devices one stylus button is mapped to a dedicated "Eraser" mode (which is the back-side on other styli). The buttons in the shortcuts settings could then be inconsistent ( the secondary / upper button is actually the primary / lower button , or reverse ). To change the tool that is mapped to this "Eraser" mode, do the following:</p>
<ul dir="auto">
<li>Hover over the canvas, and press and hold the button that is suspected to be mapped to the "Eraser" mode</li>
<li>Switch to the desired pen style while keeping the button pressed</li>
<li>When releasing the pressed button, it should switch back to the previous pen style</li>
<li>The pen style in the "Eraser" mode should now be remembered</li>
</ul>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Translations</h2><a id="user-content-translations" aria-label="Permalink: Translations" href="#translations"></a></p>
<a href="https://hosted.weblate.org/engage/rnote/" rel="nofollow">
<img src="https://camo.githubusercontent.com/cf03c6333dbcab0574e6715d5a0dd29b8775df93378a64eeaad69174c875b59a/68747470733a2f2f686f737465642e7765626c6174652e6f72672f776964676574732f726e6f74652f2d2f7265706f2f6d756c74692d6175746f2e737667" alt="Translation status" data-canonical-src="https://hosted.weblate.org/widgets/rnote/-/repo/multi-auto.svg">
</a><p dir="auto">A great way to contribute to the project without writing code is adding a new or start maintaining an existing translation language. The translations files are located in <code>crates/rnote-ui/po/</code>.</p>
<p dir="auto">Creating translations for new languages or updating existing ones can be done in multiple ways:</p>
<ul dir="auto">
<li>take the <code>rnote.pot</code> file and generate a new <code>.po</code> translation file from it, for example with "Poedit". Add the new translation language to <code>LINGUAS</code> and submit a PR with the changed files.</li>
<li>use <a href="https://hosted.weblate.org/projects/rnote/repo/" rel="nofollow">weblate</a> for an easy way to translate in the browser without having to deal with git.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Fonts</h2><a id="user-content-fonts" aria-label="Permalink: Fonts" href="#fonts"></a></p>
<p dir="auto">The following fonts are bundled with the application:</p>
<ul dir="auto">
<li><a href="https://fonts.google.com/specimen/Grape+Nuts" rel="nofollow">Grape Nuts</a>: Grape Nuts is a simple handwritten casual font.</li>
<li><a href="https://github.com/antijingoist/opendyslexic">OpenDyslexic-Regular</a>: OpenDyslexic is a typeface designed against some
common symptoms of dyslexia.</li>
<li><a href="https://github.com/ctrlcctrlv/TT2020">TT2020Base-Regular</a>: TT2020 is an advanced, open source, hyperrealistic,
multilingual typewriter font for a new decade.</li>
<li><a href="https://virgil.excalidraw.com/" rel="nofollow">Virgil</a>: The font that powers Excalidraw.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">File Format</h2><a id="user-content-file-format" aria-label="Permalink: File Format" href="#file-format"></a></p>
<p dir="auto">The <code>.rnote</code> file format is a gzipped json file.</p>
<p dir="auto">So far breaking changes in the format happened in versions:</p>
<ul dir="auto">
<li><code>v0.2.0</code></li>
<li><code>v0.3.0</code></li>
<li><code>v0.4.0</code></li>
<li><code>v0.5.0</code></li>
</ul>
<p dir="auto">To be able to open and export older files that are incompatible with the newest version, look under <strong>Installation</strong> /<strong>Downgrading</strong> to install older versions of Rnote.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">License</h2><a id="user-content-license" aria-label="Permalink: License" href="#license"></a></p>
<p dir="auto">Rnote is available under GPL-3.0-or-later. See the LICENSE file for more info.</p>
<div data-snippet-clipboard-copy-content="Copyright (C) 2023  The Rnote Authors

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>."><pre><code>Copyright (C) 2023  The Rnote Authors

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Credits</h2><a id="user-content-credits" aria-label="Permalink: Credits" href="#credits"></a></p>
<ul dir="auto">
<li>A huge thanks to the contributors, translators and to all that donated. You are the ones that help keep the project going!</li>
<li><a href="https://freesound.org/" rel="nofollow">Freesound</a> is the source for the pen sounds. The individual sounds are credited in <code>sounds/Licenses.md</code></li>
<li><a href="https://roughjs.com/" rel="nofollow">Rough.js</a> provides the algorithms for implementation of Rnote's rough shapes.</li>
<li><a href="https://pizarra.categulario.xyz/en/" rel="nofollow">Pizarra</a> is an innovative drawing app with advanced shaping and featuring an infinite zoom. It is a great inspiration of the architecture of Rnote. Go check it out!</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Community</h2><a id="user-content-community" aria-label="Permalink: Community" href="#community"></a></p>
<p dir="auto">If you have any questions or want to start a general discussion, open a topic in the <a href="https://github.com/flxzt/rnote/discussions">Github Discussions</a> section.</p>
<p dir="auto">There are also two Matrix chat rooms:</p>
<ul dir="auto">
<li>for users: <a href="https://matrix.to/#/#rnote:matrix.org" rel="nofollow">#rnote:matrix.org</a></li>
<li>for developers: <a href="https://matrix.to/#/#rnote-dev:matrix.org" rel="nofollow">#rnote-dev:matrix.org</a></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Drawings Created With Rnote</h2><a id="user-content-drawings-created-with-rnote" aria-label="Permalink: Drawings Created With Rnote" href="#drawings-created-with-rnote"></a></p>
<p dir="auto">If you have drawn something cool in Rnote and want to share it, submit a PR to add it here. :)</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/flxzt/rnote/main/misc/drawings/pikachu.png"><img alt="Pikachu" src="https://raw.githubusercontent.com/flxzt/rnote/main/misc/drawings/pikachu.png" height="400"></a>
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/flxzt/rnote/main/misc/drawings/love.png"><img alt="Love" src="https://raw.githubusercontent.com/flxzt/rnote/main/misc/drawings/love.png" height="400"></a>
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/flxzt/rnote/main/misc/drawings/suits.png"><img alt="Suits" src="https://raw.githubusercontent.com/flxzt/rnote/main/misc/drawings/suits.png" height="400"></a>
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/flxzt/rnote/main/misc/drawings/natureza_gato.png"><img alt="Nature's cat" src="https://raw.githubusercontent.com/flxzt/rnote/main/misc/drawings/natureza_gato.png" height="400"></a>
</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Building</h2><a id="user-content-building" aria-label="Permalink: Building" href="#building"></a></p>
<p dir="auto">Build instructions for Linux are documented in <a href="https://github.com/flxzt/rnote/blob/main/BUILDING.md">BUILDING.md</a> and for other platforms <a href="https://github.com/flxzt/rnote/blob/main/misc/building">here</a></p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Facebook Banned Me for Life Because I Help People Use It Less (2021) (210 pts)]]></title>
            <link>https://slate.com/technology/2021/10/facebook-unfollow-everything-cease-desist.html</link>
            <guid>41348149</guid>
            <pubDate>Sun, 25 Aug 2024 15:46:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://slate.com/technology/2021/10/facebook-unfollow-everything-cease-desist.html">https://slate.com/technology/2021/10/facebook-unfollow-everything-cease-desist.html</a>, See on <a href="https://news.ycombinator.com/item?id=41348149">Hacker News</a></p>
<div id="readability-page-1" class="page"><article data-uri="slate.com/_components/article/instances/ckufu0gkc001onom9ds8pml0x@published" data-has-roadblock="false" data-rubric="future-tense" itemscope="" itemtype="http://schema.org/Article">
  

  

<header>

  <a href="https://slate.com/technology/future-tense"><img alt="Future Tense" height="17" width="115.25" src="https://compote.slate.com/images/7ff9545e-d46d-4daa-9328-e1bf5436be86.png"></a>

  




    </header>

  

  <section>
      


      

    <div itemprop="mainEntityOfPage">
          <p data-word-count="31" data-uri="slate.com/_components/slate-paragraph/instances/ckufu0gkc001jnom9k3xxff30@published">If someone built a tool that made Facebook less addictive—a tool that allowed users to benefit from Facebook’s positive features while limiting their exposure to its negative ones—how would Facebook respond?</p>

  <p data-word-count="51" data-uri="slate.com/_components/slate-paragraph/instances/ckufussru000h3e6d0cju3x9r@published">I know the answer, because I built the tool, and Facebook squashed it. This summer, Facebook sent me a cease-and-desist letter threatening legal action. It permanently disabled my Facebook and Instagram accounts. And it demanded that I agree to never again create tools that interact with Facebook or its other services.</p>

  <p data-word-count="117" data-uri="slate.com/_components/slate-paragraph/instances/ckufusssc000i3e6do4lxdv9v@published">The tool I created, a browser extension called Unfollow Everything, allowed users to delete their News Feed by unfollowing their friends, groups, and pages<strong>.</strong>&nbsp;The News Feed, as users of Facebook know, is that never-ending page that greets you when you log in. It’s the central hub of Facebook. It’s also a major source of revenue. As a Facebook whistleblower observed&nbsp;<a href="https://www.cbsnews.com/news/facebook-whistleblower-frances-haugen-misinformation-public-60-minutes-2021-10-03/">on <em>60 Minutes</em></a>&nbsp;on Sunday, time spent on the platform translates to ads viewed and clicked on, which in turn translates to billions of dollars for Facebook. The News Feed is the thing that keeps people glued to the platform for hours on end, often on a daily basis; without it, time spent on the network would drop considerably.</p>

  

  <p data-word-count="38" data-uri="slate.com/_components/slate-paragraph/instances/ckufusssu000j3e6ddhfca7p8@published">I had the idea for Unfollow Everything a few years ago, when I realized you don’t actually need to have a News Feed. If you unfollow everything—all of your friends, groups, and pages—your News Feed ends up empty.</p>

  <p data-word-count="67" data-uri="slate.com/_components/slate-paragraph/instances/ckufussto000k3e6d935rpmhn@published">This isn’t the same as unfriending. If you unfollow your friends and groups, you’re still connected to them, and you can look up their profiles if you want. But by unfollowing everything, you eliminate your News Feed. This leaves you free to use Facebook without the feed, or to more actively curate it by refollowing only those friends and groups whose posts you really want to see.</p>

  


  <p data-word-count="70" data-uri="slate.com/_components/slate-paragraph/instances/ckufussuo000l3e6dq8u62s6o@published">I still remember the feeling of unfollowing everything for the first time. It was near-miraculous. I had lost nothing, since I could still see my favorite friends and groups by going to them directly. But I had gained a staggering amount of control. I was no longer tempted to scroll down an infinite feed of content. The time I spent on Facebook decreased dramatically. Overnight, my Facebook addiction became manageable.</p>

  


  


  


  <p data-word-count="71" data-uri="slate.com/_components/slate-paragraph/instances/ckufussv1000m3e6dfay4hpec@published">When I unfollowed everything for the first time, I did it manually. I spent hours using a Facebook-provided feature to click unfollow on each of my friends, groups, and pages. I quickly realized that very few people would go to the same trouble, so I coded a simple tool that would automate the process. In July 2020, I published it to the Chrome Store, where people could download it for free.</p>

  


  <p data-word-count="48" data-uri="slate.com/_components/slate-paragraph/instances/ckufussvv000n3e6d1v8f9o0j@published">Unfollow Everything started taking off. People loved it. Thousands of people got rid of their News Feed using it. Reviews included comments like “I am officially not addicted to Facebook thanks to you!” I received emails from people telling me that using the tool had changed their lives.</p>

  <p data-word-count="150" data-uri="slate.com/_components/slate-paragraph/instances/ckufusswb000o3e6d6pqnrj4i@published">A few months after I published Unfollow Everything, academics at the University of Neuchâtel, in Switzerland, expressed interest in using it to study the News Feed’s impact on the amount of time spent on Facebook and the happiness of the platform’s users. We began working together. The university recruited people to join two study groups: one where participants deleted their News Feeds using Unfollow Everything and a control group where participants left their feeds intact. Participants agreed to share limited and anonymous information—specifically, the amount of time they spent on Facebook, the number of times they visited the site, and the number of friends, groups, and pages they were following and not following, both in total and broken down by category. (For regular Unfollow Everything users, the only Facebook-related data shared was the ratio of followed profiles to total profiles, a metric that helped me ensure the tool was working.)</p>

  


  


  <p data-word-count="96" data-uri="slate.com/_components/slate-paragraph/instances/ckufusswz000p3e6duejmq4yl@published">Then, a few months ago, Facebook sent me a cease-and-desist letter. The company demanded that I take down the tool. It also told me that it had permanently disabled my Facebook account—an account that I’d had for more than 15 years, and that was my primary way of staying in touch with family and friends around the world. Pointing to a provision in its terms of service that purports to bind even&nbsp;<em>former</em>&nbsp;users of Facebook, Facebook also demanded that I never again create a tool that interacts with Facebook or its many other services in any way.</p>

  


  <p data-word-count="109" data-uri="slate.com/_components/slate-paragraph/instances/ckufussxs000q3e6dyi83dus9@published">These demands seemed outrageous to me. They also seemed outrageous to lawyers I consulted from the Knight First Amendment Institute at Columbia University, and in the U.K. But my options were limited. I’m a U.K. resident, so a lawsuit against Facebook would probably have played out in a U.K. court, where I would have been personally on the hook for Facebook’s litigation costs if I lost. Facebook is a <a href="https://www.theverge.com/2021/6/28/22554502/facebook-1-trillion-dollar-market-cap-company-business">trillion-dollar company</a>. I couldn’t afford that risk, so Unfollow Everything no longer exists. This is bad for its users, and also for the University of Neuchâtel, which will no longer be able to use it to study the News Feed.</p>

  


  


  


  <p data-word-count="71" data-uri="slate.com/_components/slate-paragraph/instances/ckufussyn000r3e6d56dfk1p3@published">I am far from the only one to face this kind of scenario. Facebook is increasingly using its terms of service to crush not only&nbsp;<a href="https://www.nytimes.com/2021/08/10/opinion/facebook-misinformation.html">research</a>, but also tools that give users more control over their data and platform experience. Just last summer, Facebook&nbsp;<a href="https://www.eff.org/deeplinks/2020/11/once-again-facebook-using-privacy-sword-kill-independent-innovation">went after</a>&nbsp;Friendly, a web browser that allows users to switch between their social media accounts, more easily download or repost photos and videos, and filter their feeds by keyword.</p>


  <p data-word-count="73" data-uri="slate.com/_components/slate-paragraph/instances/ckufussyy000s3e6ddg25ui3m@published">Facebook’s behavior isn’t just anti-competitive; it’s anti-consumer. We are being locked into platforms by virtue of their undeniable usefulness, and then prevented from making legitimate choices over how we use them—not just through the squashing of tools like Unfollow Everything, but through the highly manipulative designs and features platforms adopt in the first place. The loser here is the user, and the cost is counted in billions of wasted hours spent on Facebook.</p>

  


  <p data-word-count="80" data-uri="slate.com/_components/slate-paragraph/instances/ckufust05000t3e6du50ambe3@published">If lawmakers and regulators are serious about empowering users to stand up to big tech, they need to address the ways in which platforms stymie user choice, including through terms of service. Platforms shouldn’t be able to wield the threat of lawsuits and account suspensions against researchers and developers who create tools that merely empower users—but as my experience shows, they can and do. How many people will be put off making tools that serve the public as a result?</p>

  <p data-word-count="33" data-uri="slate.com/_components/slate-paragraph/instances/ckufust0o000u3e6dfqbibzba@published">I’m still searching for other ways to help people use Facebook less. But in the meantime, at least I can thank it for something: My own Facebook addiction is now definitively under <span>control.</span></p>

  <p data-uri="slate.com/_components/future-tense-kicker/instances/ckufu0gkc001lnom9n07xm3s5@published">
<a href="http://www.slate.com/articles/technology/future_tense/2012/03/future_tense_emerging_technologies_society_and_policy_.html">Future Tense</a>
    is a partnership of
    <a href="https://slate.com/">Slate</a>,
    <a href="https://www.newamerica.org/">New America</a>, and
    <a href="https://www.asu.edu/?feature=research">Arizona State University</a>
    that examines emerging technologies, public policy, and society.
</p>

  

</div>

      <ul>
<li>
            <a href="https://slate.com/tag/facebook">
              Facebook
            </a>
          </li><li>
            <a href="https://slate.com/tag/social-media">
              Social Media
            </a>
          </li><li>
            <a href="https://slate.com/tag/apps">
              Apps
            </a>
          </li>      </ul>

  </section>

      

</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Arrest of Pavel Durov, Telegram CEO, charges of terrorism, fraud, child porn (594 pts)]]></title>
            <link>https://decripto.org/en/arrest-of-pavel-durov-charges-of-terrorism-fraud-and-child-pornography-he-did-not-cooperate-with-the-authorities-he-risks-20-years-in-prison/</link>
            <guid>41347909</guid>
            <pubDate>Sun, 25 Aug 2024 15:20:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://decripto.org/en/arrest-of-pavel-durov-charges-of-terrorism-fraud-and-child-pornography-he-did-not-cooperate-with-the-authorities-he-risks-20-years-in-prison/">https://decripto.org/en/arrest-of-pavel-durov-charges-of-terrorism-fraud-and-child-pornography-he-did-not-cooperate-with-the-authorities-he-risks-20-years-in-prison/</a>, See on <a href="https://news.ycombinator.com/item?id=41347909">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-54679">
				
<div>

		
				
		<p>On Saturday evening, <a href="https://decripto.org/it/arrestato-a-parigi-il-fondatore-di-telegram-pavel-durov-preso-in-custodia-dai-servizi-segreti/">Pavel Durov</a>, founder and CEO of Telegram, was arrested at Le Bourget airport in Paris. The arrest took place as Durov, accompanied by his bodyguard and a woman, stepped off a private jet that had arrived from Azerbaijan. The arrest was made on the basis of a French search warrant issued by the National Directorate of Judicial Police, following a preliminary investigation. Durov was placed on a federal wanted list and the warrant was issued because of his alleged failure to cooperate with the French authorities.</p>


<p>Durov is accused of numerous serious crimes, including:</p>



<ul>
<li><strong>Terrorism</strong></li>



<li><strong>Drug trafficking</strong></li>



<li><strong>Complicity in criminal activities</strong></li>



<li><strong>Fraud</strong></li>



<li><strong>Money laundering</strong></li>



<li><strong>Concealment of illegal activities</strong></li>



<li><strong>Distribution of child sexual abuse content</strong></li>
</ul>


<p>French authorities believe that Telegram, under Durov’s leadership, became a major platform for organised crime due to its encrypted messaging services, which allegedly facilitated illegal activities. Investigators have taken Durov into custody and he is expected to be brought before a judge soon. The seriousness of the charges could lead to a sentence of up to 20 years in prison.</p>


<p><strong>Impact on the crypto TON</strong></p>


<p>The arrest had an immediate impact on the cryptocurrency market. Toncoin, the cryptocurrency associated with Telegram, fell significantly, dropping more than 15% on the markets after the news of the arrest.</p>


<p><strong>The European Union’s accusations</strong></p>


<p>The main accusation by EU authorities concerns Telegram’s encrypted messaging services, which were allegedly used to facilitate organised crime. One investigator stated that ‘Telegram has become the number one platform for organised crime over the years’, underlining the perceived link between the platform’s privacy features and criminal activities.</p>


<p><strong>Durov is French: he will face trial in France</strong></p>


<p>As a French citizen, Durov will be tried in France and will have to answer to the charges against him. The case could have major legal repercussions and influence the regulation of digital platforms and cryptocurrencies in the future.</p>

				
		
		
		
	</div>
	
			</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Study: Air purifier use at daycare centres cut kids' sick days by a third (2023) (338 pts)]]></title>
            <link>https://yle.fi/a/74-20062381</link>
            <guid>41347868</guid>
            <pubDate>Sun, 25 Aug 2024 15:15:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://yle.fi/a/74-20062381">https://yle.fi/a/74-20062381</a>, See on <a href="https://news.ycombinator.com/item?id=41347868">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>The results of the study at two Helsinki daycare centres are still preliminary but promising, a researcher says.</p><figure><div><picture><source data-testid="source-for-S" media="(max-width: 767px)" srcset="https://images.cdn.yle.fi/image/upload/ar_1.4998493522145224,c_fill,g_faces,h_511,w_767/dpr_2.0/q_auto:eco/f_auto/fl_lossy/v1701098302/39-117653765115d5c4f6c1 2x,https://images.cdn.yle.fi/image/upload/ar_1.4998493522145224,c_fill,g_faces,h_511,w_767/dpr_1.0/q_auto:eco/f_auto/fl_lossy/v1701098302/39-117653765115d5c4f6c1 1x"><source data-testid="source-for-M" media="(min-width: 768px)" srcset="https://images.cdn.yle.fi/image/upload/ar_1.4998493522145224,c_fill,g_faces,h_424,w_636/dpr_2.0/q_auto:eco/f_auto/fl_lossy/v1701098302/39-117653765115d5c4f6c1 2x,https://images.cdn.yle.fi/image/upload/ar_1.4998493522145224,c_fill,g_faces,h_424,w_636/dpr_1.0/q_auto:eco/f_auto/fl_lossy/v1701098302/39-117653765115d5c4f6c1 1x"><img alt="Four daycare age girls looking up at the camera." src="https://images.cdn.yle.fi/image/upload/c_crop,h_2792,w_4965,x_12,y_268/ar_1.7777777777777777,c_fill,g_faces,h_431,w_767/dpr_1.0/q_auto:eco/f_auto/fl_lossy/v1701098302/39-117653765115d5c4f6c1"></picture></div><figcaption><span>The air purifiers used in the experiment differed in size as well as manufacturer.</span><span> <!-- -->Image: Mårten Lampén / Yle</span></figcaption></figure><div><p><time datetime="2023-11-27T17:33:31+02:00">27.11.2023 17:33</time><time datetime="2023-11-28T07:57:10+02:00">Updated<!-- --> <!-- -->28.11.2023 7:57</time></p></div></div><section><p>Use of air purifiers at two daycare centres in Helsinki led to a reduction in illnesses and absences among children and staff, according to preliminary findings of a new study led by E3 Pandemic Response.</p><p>Air purifiers of various sizes and types were placed in two of the city's daycare centres during cold and flu seasons.</p><p>The initial results from the first year of research are promising, according to researcher <strong>Enni Sanmark</strong>, from HUS Helsinki University Hospital.</p><p>"Children were clearly less sick in daycare centres where air purification devices were used — down by around 30 percent," Sanmark explained.</p><p>The air purifiers were changed at two daycare centres serving as a control in the experiment, in order to rule out the effect that possible epidemic fluctuations could have on the results. The study's next phase will continue until April.</p><p>"We will be able to analyse whether there were only decreases in flu-type illnesses or whether the use of air purification could also help reduce stomach ailments," Sanmark said.</p><p>On average, daycare centre-aged children suffer 10-13 infectious illnesses every year, with each illness lasting from one to three weeks, according to the research.</p><figure><div><picture><source data-testid="source-for-S" media="(max-width: 767px)" srcset="https://images.cdn.yle.fi/image/upload/ar_1.5011129660545353,c_fill,g_faces,h_510,w_767/dpr_2.0/q_auto:eco/f_auto/fl_lossy/v1695038403/39-1173374650838b44c966 2x,https://images.cdn.yle.fi/image/upload/ar_1.5011129660545353,c_fill,g_faces,h_510,w_767/dpr_1.0/q_auto:eco/f_auto/fl_lossy/v1695038403/39-1173374650838b44c966 1x"><source data-testid="source-for-M" media="(min-width: 768px)" srcset="https://images.cdn.yle.fi/image/upload/ar_1.5011129660545353,c_fill,g_faces,h_423,w_636/dpr_2.0/q_auto:eco/f_auto/fl_lossy/v1695038403/39-1173374650838b44c966 2x,https://images.cdn.yle.fi/image/upload/ar_1.5011129660545353,c_fill,g_faces,h_423,w_636/dpr_1.0/q_auto:eco/f_auto/fl_lossy/v1695038403/39-1173374650838b44c966 1x"><img alt="Enni Sanmark Topeliuksen leikkipuistossa." src="https://images.cdn.yle.fi/image/upload/c_crop,h_3032,w_5391,x_4,y_210/ar_1.7777777777777777,c_fill,g_faces,h_431,w_767/dpr_1.0/q_auto:eco/f_auto/fl_lossy/v1695038403/39-1173374650838b44c966"></picture></div><figcaption><span>Researcher Enni Sanmark from HUS Helsinki University Hospital.</span><span> <!-- -->Image: Mårten Lampén / Yle</span></figcaption></figure><p>Meanwhile, kids between the ages of 1-3 come down with flu-like symptoms between five to eight times a year — and children also often suffer stomach bugs, on top of that. Kids are particularly prone to catching colds after returning to daycare after their summer break.</p><p>Those illnesses are often shared by the kids' parents and daycare staff, prompting absences from work.</p><p>Sanmark said that employers face costs of around 370 euros for one day of an employee's sick leave.</p><p>"It would be a big savings if we could get rid of 30 percent of sick days spread by children, as well as the illnesses that go home to parents," Sanmark said.</p><p>The research aims to help build an air purification scheme that could be used at other daycare centres — namely how to get the air cleaner at such facilities in ways that aren't too noisy, expensive or take up too much space.</p><p>The final results of the study are expected next spring.</p><p>"At the moment, we are cautiously positive. Daycares and schools [here] have not done this before, but of course results from around the world show that air purification can reduce pathogens in the air, so our results are in line with these findings. We're excited and will continue our research," Sanmark said.</p><p>Prompted by the Covid-19 crisis, the <a href="https://www.pandemicresponse.fi/about" role="link">E3 Pandemic Response</a> project is a private and public effort that aims to "harness modern science and technology to create effective countermeasures to prevent the spreading of novel infectious diseases".</p><p><em><strong>Users with an Yle ID can leave comments on our news stories. You can create your Yle ID via</strong></em> <a href="https://yle.fi/aihe/yle-tunnus/yle-id" role="link"><em><strong>this link</strong></em></a><em><strong>. Our guidelines on commenting and moderation are explained</strong></em> <a href="https://yle.fi/aihe/s/discussion-policy" role="link"><em><strong>here</strong></em></a><em><strong>.</strong></em></p></section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Strandbeest (294 pts)]]></title>
            <link>https://www.strandbeest.com/</link>
            <guid>41347016</guid>
            <pubDate>Sun, 25 Aug 2024 13:06:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.strandbeest.com/">https://www.strandbeest.com/</a>, See on <a href="https://news.ycombinator.com/item?id=41347016">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Neurotechnology numbers worth knowing (2022) (142 pts)]]></title>
            <link>https://milan.cvitkovic.net/writing/neurotechnology_numbers_worth_knowing/</link>
            <guid>41344176</guid>
            <pubDate>Sun, 25 Aug 2024 03:40:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://milan.cvitkovic.net/writing/neurotechnology_numbers_worth_knowing/">https://milan.cvitkovic.net/writing/neurotechnology_numbers_worth_knowing/</a>, See on <a href="https://news.ycombinator.com/item?id=41344176">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
<article>
    <p>In the tradition of <a href="http://book.bionumbers.org/">Cell Biology by the Numbers</a>,
<a href="https://www.amazon.com/Physiology-Numbers-Encouragement-Quantitative-Thinking/dp/0521777038/ref=sr_1_1?keywords=Physiology+by+Numbers&amp;qid=1651088845&amp;sr=8-1">Physiology by Numbers</a>,
and <a href="http://norvig.com/21-days.html#answers">Latency Numbers Every Programmer Should Know</a>,
here’s a collection of numbers worth knowing if you’re working in neurotechnology.</p>
<p>You can also <a href="https://ankiweb.net/shared/info/325249141"><strong>download this list as Anki flashcards</strong></a>.
Having them memorized and at your fingertips is great for sanity checking ideas.</p>
<p>I plan to keep growing this list and Anki deck in perpetuity, so if it’s missing your
favorite numbers, please <a href="mailto:mwcvitkovic@gmail.com">let me know</a>!</p>
<p><em>Thanks to <a href="https://twitter.com/EemaanKaur">Eemaan Thind</a>,
<a href="https://twitter.com/maxhodak_">Max Hodak</a>,
<a href="https://twitter.com/SumnerLN">Sumner Norman</a>,
<a href="https://twitter.com/SGRodriques">Sam Rodriques</a>,
Mackenzie Dion,
and <a href="https://twitter.com/raffi_hotter">Raffi Hotter</a>
for contributions.</em></p>
<h2 id="the-numbers">The Numbers</h2>
<h3 id="general-orientation">General Orientation</h3>
<ul>
<li>A human hair is ~50 um in diameter.</li>
<li>1 angstrom equals 0.1 nm.</li>
<li>The C-H bond length is ~1 angstroms.</li>
<li>The covalent radius of Hydrogen is ~30 pm. The covalent radius of Caesium is ~250 pm.</li>
<li>A water molecule is ~0.25 nm across.</li>
<li>A glucose molecule’s mass is ~180 g/mol, and its cyclic form would fit comfortably in a 1nm diameter sphere.</li>
<li>1 mm equals 3 French</li>
<li>The abundance-weighted average mass of an amino acid in humans is ~110 g/mol.</li>
<li>Viruses range in size from 10s to 100s of nm in diameter.</li>
<li>Viral genomes range in length from 1s to 100s of kbs.</li>
<li>AAVs are ~25 nm in diameter and contain ~4.7 kb of single-stranded DNA.</li>
<li><em>E. coli</em> is ~1 um in diameter and ~2 um long, with a volume of ~1 um^3.</li>
<li><em>C. elegans</em> has ~300 neurons and is ~1mm long.</li>
<li>A doubles tennis court is ~3000 ft^2.</li>
</ul>
<hr>
<ul>
<li>1 mm^3 equals 1 uL.</li>
<li>1 M concentration is ~1 particle per 1 nm^3.</li>
<li>1 nM concentration is about ~1 particle per 1 um^3.</li>
<li>The density of water is 0.99 g/ml at 1 atm and body temperature.</li>
<li>Healthy average human body temperature is ~37°C, with variations of +- ~1°C between individuals and within individuals throughout the day. (<a href="https://www.bmj.com/content/359/bmj.j5468">source</a>)</li>
<li>Room temperature is ~25°C.</li>
<li>A medium-sized apple weighs ~1 Newton and exerts ~500 Pa of pressure on your palm.</li>
<li>A slightly overinflated road bike tire is at ~1 MPa of pressure.</li>
<li>Humans can hear sounds from 20 to 20,000 Hz and above 20 uPa of pressure.</li>
<li>The Svedberg is defined as 10^−13 s.</li>
</ul>
<hr>
<ul>
<li>The Earth’s magnetic field at its surface is ~50 uT. (<a href="https://hypertextbook.com/facts/1999/DanielleCaruso.shtml">source</a>)</li>
<li>A fridge magnet is ~10 mT. (<a href="https://nationalmaglab.org/about/maglab-dictionary/tesla#:~:text=A%20refrigerator%20magnet%20is%20100,around%20a%20half%20a%20gauss.">source</a>)</li>
<li>The FCC limit for public exposure from cellular telephones is an SAR level of 1.6 W/kg. The peak power output of a cell phone is on the order of 1s of W.  (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC156641/">source</a>)</li>
<li>Average US electricity price is ~10¢ / kWh.</li>
</ul>
<hr>
<ul>
<li>Gamma and X-rays have wavelengths &lt; ~1nm and frequencies &gt; ~300 PHz.</li>
<li>UV spectrum has wavelengths between 1 nm and 380 nm and frequencies between 300 PHz and 790 THz.</li>
<li>Visible spectrum has wavelengths between 380 nm and 750 nm and frequencies between 790 THz and 400 THz.</li>
<li>IR spectrum has wavelengths between 750 nm and 1 mm and frequencies between 400 THz and 300 GHz.</li>
<li>Microwave spectrum has wavelengths between 1mm and 1m and frequencies between 300 GHz and 300 MHz.</li>
<li>Radio spectrum has wavelengths &gt;1m and frequencies &lt;300 MHz.</li>
</ul>
<hr>
<ul>
<li>Time period between conscious intention and action is ~200 ms. (<a href="https://www.pnas.org/doi/10.1073/pnas.1513569112">source</a>)</li>
<li>Human response times on simple reaction time tasks are ~200 ms.</li>
<li>Information transfer rate for typing is ~250 bits/min (50 wpm conversational texting speed x ~5 char/word x ~1 bit/char) and ~3000 bits/min for speaking. (Partially derived from <a href="https://www.princeton.edu/~wbialek/rome/refs/shannon_51.pdf%5D">source</a>)</li>
<li>The fast (16th) synth notes in <a href="https://www.youtube.com/watch?v=y6120QOlsfU">Darude’s <em>Sandstorm</em></a> (the notes you’d sing if you were trying to sing <em>Sandstorm</em> to someone) are ~10Hz.</li>
</ul>
<h3 id="structural">Structural</h3>
<ul>
<li>The human brain weighs ~1.5 kg.</li>
<li>The brain is between ~75% water by mass. (<a href="https://pubmed.ncbi.nlm.nih.gov/10413163/">source</a>)</li>
<li>Intracranial volume is ~1700 mL, consisting of ~1400 mL (80%) of brain, ~150 mL (10%) of blood, and ~150 mL (10%) of CSF. (<a href="https://faculty.washington.edu/chudler/facts.html">source</a>)</li>
<li>The brain’s interstitial system accounts for ~20% of brain volume. (<a href="https://www.degruyter.com/document/doi/10.1515/revneuro-2020-0057/html?lang=en#:~:text=Introduction-,Brain%20interstitial%20system%20(ISS)%20is%20a%20nanoscale%20network%20of%20continuously,dissolves%20a%20variety%20of%20the">source</a>)</li>
<li>Intracranial pressure is between 1-2 kPa.  (<a href="https://en.wikipedia.org/wiki/Intracranial_pressure#:~:text=Intracranial%20pressure%20(ICP)%20is%20the,mmHg%20for%20a%20supine%20adult">source</a>)</li>
<li>Normal human blood pressure is 120/80 mmHg (systolic/diastolic), or 16/10 kPa.  (<a href="https://hypertextbook.com/facts/1999/IrinaVinar.shtml">source</a>)</li>
<li>Interruption of cerebral blood flow results in loss of consciousness within 10s. (<a href="https://sci-hub.mksa.top/10.1002/ana.410130103">source</a>)</li>
<li>Only ~25% of people have a fully intact Circle of Willis. (<a href="https://radiopaedia.org/articles/circle-of-willis?lang=us#:~:text=A%20complete%20circle%20of%20Willis,nearly%2050%25%20of%20anatomical%20specimens">source</a>)</li>
</ul>
<hr>
<ul>
<li>Capillaries make up ~85% of the vasculature of the brain. (<a href="https://www.nature.com/articles/nrneurol.2017.188">source</a>)</li>
<li>The arteries in the Circle of Willis are between 2-4 mm in diameter. (<a href="https://pubmed.ncbi.nlm.nih.gov/28150270/">source</a>)</li>
<li>Brain capillaries are ~7 um in diameter. (<a href="https://www.frontiersin.org/articles/10.3389/fneng.2013.00007/full#B6">source</a>)</li>
<li>The mean intercapillary distance in the human brain is ~40um, which is room for ~2 neurons. (<a href="https://pubmed.ncbi.nlm.nih.gov/25669455/">source</a>)</li>
<li>The average human adult has ~5 liters of circulating blood. (<a href="https://pubmed.ncbi.nlm.nih.gov/30252333/#:~:text=The%20amount%20of%20blood%20circulating,by%20roughly%2050%25%20during%20pregnancy.">source</a>)</li>
<li>Normal values for complete blood count are between 4M-6M RBC/uL, between 100k-300k platelet/uL, between 5k-10k WBC/uL, and between 35-50% hematocrit. (<a href="https://www.mayoclinic.org/tests-procedures/complete-blood-count/about/pac-20384919">source</a>)</li>
<li>The average density of human blood is ~1.06 g/mL. (<a href="https://hypertextbook.com/facts/2004/MichaelShmukler.shtml">source</a>)</li>
<li>The entire volume of CSF is produced between 4-5 times per day in the human brain. (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6966240/">source</a>)</li>
<li>Healthy human resting heart rate is between 1-2 Hz.</li>
<li>Cerebral displacement with heartbeat is on the order of 100s of um, varying by region. (<a href="https://www.sciencedirect.com/science/article/pii/S2666522021000022?via%3Dihub#bib0007">source</a>)</li>
<li>In the aorta, peak blood velocity is ~1 m/sec. (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5702593/">source</a>) As blood moves into the capillary beds, the rate of movement slows to ~1 mm/sec. (<a href="https://opentextbc.ca/biology/chapter/21-4-blood-flow-and-blood-pressure-regulation/#:~:text=As%20blood%20moves%20into%20the,of%20movement%20in%20the%20aorta.">source</a>)</li>
<li>~94% of cerebral oxygen consumption is by gray matter. (<a href="https://faculty.washington.edu/chudler/facts.html">source</a>)</li>
<li>The basal metabolic rate of a human is ~1500 kcal or ~6 MJ per day. (<a href="https://hypertextbook.com/facts/2009/VickieWu.shtml">source</a>)</li>
<li>The safe range of temp increase of human brain tissue is up to ~3°C. (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4189373/">source</a>)</li>
<li>Human brain temperature at the periphery is about equal to body temperature, and rises up to 1°C higher in the deep brain. (<a href="https://www.frontiersin.org/articles/10.3389/fnins.2014.00307/full#:~:text=On%20average%2C%20deep%20brain%20temperature,et%20al.%2C%202002">source</a>)</li>
<li>The volume of the human body is ~50 L.</li>
<li>The surface area of the body covered by skin is ~2 m^2. (<a href="https://www.wiley.com/en-us/How+the+Immune+System+Works,+6th+Edition-p-9781119542124">source</a>)</li>
<li>The surface area of the body’s mucous membranes (digestive, respiratory, reproductive) is ~400 m^2. (<a href="https://www.wiley.com/en-us/How+the+Immune+System+Works,+6th+Edition-p-9781119542124">source</a>)</li>
</ul>
<hr>
<ul>
<li>Young’s modulus of brain is between 0.1-16 kPa.  (<a href="https://www.researchgate.net/profile/William-Tyler-3/publication/233724206_The_mechanobiology_of_brain_function/links/54d8df1a0cf24647581cd69c/The-mechanobiology-of-brain-function.pdf">source</a>)</li>
<li>Young’s modulus of connective tissues and arteries are between 0.1–1 MPa.  (<a href="https://www.researchgate.net/profile/William-Tyler-3/publication/233724206_The_mechanobiology_of_brain_function/links/54d8df1a0cf24647581cd69c/The-mechanobiology-of-brain-function.pdf">source</a>)</li>
<li>Young’s modulus of bone is between 15–30 GPa.  (<a href="https://www.researchgate.net/profile/William-Tyler-3/publication/233724206_The_mechanobiology_of_brain_function/links/54d8df1a0cf24647581cd69c/The-mechanobiology-of-brain-function.pdf">source</a>)</li>
<li>Speed of sound is ~1480 m/s in water. (<a href="https://itis.swiss/virtual-population/tissue-properties/database/acoustic-properties/speed-of-sound/">source</a>)</li>
<li>Speed of sound is ~1500 m/s in brain tissue. (<a href="https://itis.swiss/virtual-population/tissue-properties/database/acoustic-properties/speed-of-sound/">source</a>)</li>
<li>Speed of sound is ~2100 m/s in trabecular bone. (<a href="https://itis.swiss/virtual-population/tissue-properties/database/acoustic-properties/speed-of-sound/">source</a>)</li>
<li>Speed of sound is ~2800 m/s in cortical bone. (<a href="https://itis.swiss/virtual-population/tissue-properties/database/acoustic-properties/speed-of-sound/">source</a>)</li>
</ul>
<hr>
<ul>
<li>The resistivity of air is ~10^15 Ω⋅m. (<a href="https://www.sciencedirect.com/science/article/pii/S2213158213000673?via%3Dihub">source</a>)</li>
<li>The resistivity of dry skin through the epidermis is ~10k Ω⋅m. (<a href="https://www.researchgate.net/figure/Passive-electrical-properties-of-the-skin-a-The-resistivity-of-each-layer-of-skin-At_fig1_356358487">source</a>)</li>
<li>The resistivity of (wet) scalp is ~2 Ω⋅m. (<a href="https://pubmed.ncbi.nlm.nih.gov/21777878/">source</a>)</li>
<li>The resistivity of fat is ~40 Ω⋅m. (<a href="https://www.sciencedirect.com/science/article/pii/S2213158213000673?via%3Dihub">source</a>)</li>
<li>The resistivity of skull is ~100 Ω⋅m. (<a href="https://www.sciencedirect.com/science/article/pii/S2213158213000673?via%3Dihub">source</a>)</li>
<li>The resistivity of CSF is ~0.5 Ω⋅m. (<a href="https://www.sciencedirect.com/science/article/pii/S2213158213000673?via%3Dihub">source</a>)</li>
<li>The resistivity of gray matter is ~4 Ω⋅m. (<a href="https://www.sciencedirect.com/science/article/pii/S2213158213000673?via%3Dihub">source</a>)</li>
<li>The resistivity of white matter is ~8 Ω⋅m. (<a href="https://www.sciencedirect.com/science/article/pii/S2213158213000673?via%3Dihub">source</a>)</li>
</ul>
<h3 id="cellular">Cellular</h3>
<ul>
<li>There are ~85 B neurons and about the same number of glia in the whole brain. (<a href="https://pubmed.ncbi.nlm.nih.gov/19226510/">source</a>)</li>
<li>The cortex (GM + WM, everything outside the striatum) has ~15 B neurons and ~60 B glia; that’s ~80% of the brain’s mass and ~20% of the brain’s neurons. (<a href="https://pubmed.ncbi.nlm.nih.gov/19226510/">source</a>)</li>
<li>The cerebellum has ~70 B neurons and ~15 B glia; that’s ~10% of the mass and ~80% of the neurons. (<a href="https://pubmed.ncbi.nlm.nih.gov/19226510/">source</a>)</li>
<li>The non-cortex-non-cerebellum part of the brain has ~1 B neurons and ~10 B glia; that’s ~10% of the mass and ~1% of the neurons. (<a href="https://pubmed.ncbi.nlm.nih.gov/19226510/">source</a>)</li>
<li>Gray matter has ~20 B glia, while white matter has ~40 B glia. (<a href="https://pubmed.ncbi.nlm.nih.gov/19226510/">source</a>)</li>
<li>Gray matter has ~12 B neurons, while white matter has ~3 B neurons. (<a href="https://pubmed.ncbi.nlm.nih.gov/19226510/">source</a>)</li>
<li>There are ~150 trillion synapses in cortex. (<a href="https://faculty.washington.edu/chudler/facts.html">source</a>)</li>
<li>~88% of neurons in the brain are granule cells. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=106407&amp;ver=2&amp;trm=brain+human&amp;org=">source</a>)</li>
<li>Only ~500k neurons in the brain produce dopamine.</li>
<li>Serotonin is produced by ~100k neurons in the brainstem. Serotonergic neurons project so widely that virtually every neuron in the brain may be contacted by a serotonergic fiber.</li>
<li>Histamine is exclusively synthesized by ~65k neurons per side in the hypothalamus, projecting everywhere in the CNS.</li>
<li>The locus ceruleus contains ~25k norepinephrine neurons per side, providing virtually all the norepinephrine to the cortex and accounting for ~50% of all norepinephrine neurons in the brain.</li>
</ul>
<hr>
<ul>
<li>Total surface area of the cerebral cortex is ~2500 cm^2. (<a href="https://faculty.washington.edu/chudler/facts.html">source</a>)</li>
<li>The surface area of the cerebellar cortex is ~1590 cm^2. (<a href="https://faculty.washington.edu/chudler/facts.html">source</a>)</li>
<li>Thickness of cortical gray matter is ~2.5 mm on average, ranging between 1-4.5 mm by region. (<a href="https://www.pnas.org/doi/10.1073/pnas.200033797">source</a>)</li>
<li>A mm^3 of cortex contains on the order of 10s of thousands of neurons. (derived)</li>
<li>Cortical minicolumns contain between 80–100 neurons, spanning all cortical layers, with a diameter of approximately 30–50 um. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=107321&amp;ver=1&amp;trm=brain&amp;org=">source</a>)</li>
</ul>
<hr>
<ul>
<li>Delta waves are between 0–4 Hz, prominent in deep sleep, associated with motivation. (<a href="https://pubmed.ncbi.nlm.nih.gov/30772238/">source</a>)</li>
<li>Theta waves are between 4–8 Hz, prominent in deep sleep, associated with memory and prefrontal cognitive processes. (<a href="https://pubmed.ncbi.nlm.nih.gov/30772238/">source</a>)</li>
<li>Alpha waves are between 8–13 Hz, prominent when eyes are closed or when drowsy/relaxed, associated with cognitive inhibition. (<a href="https://pubmed.ncbi.nlm.nih.gov/30772238/">source</a>)</li>
<li>Mu waves are between 7.5–12.5 Hz, prominent in motor cortex when body is physically at rest, suppressed by motor actions. (<a href="https://pubmed.ncbi.nlm.nih.gov/30772238/">source</a>)</li>
<li>Beta waves are between 13–30 Hz, prominent in frontal/central regions when alert and active, associated with motor control. (<a href="https://pubmed.ncbi.nlm.nih.gov/30772238/">source</a>)</li>
<li>Gamma waves are between 30–70 Hz, prominent in frontal regions when engaged in higher cognitive processing, associated with short-range cortical feedback loops and activity of fast-spiking inhibitory interneurons. (<a href="https://pubmed.ncbi.nlm.nih.gov/30772238/">source</a>)</li>
</ul>
<hr>
<ul>
<li>Diameters of neuron somas are between 5-100 um. (<a href="https://psych.athabascau.ca/html/Psych289/Biotutorials/1/soma.shtml">source</a>)</li>
<li>There can be between 10^2-10^5 synapses per neuron, varying by neuron type.</li>
<li>The lifespan of a red blood cell is ~127 days. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=107875&amp;ver=5&amp;trm=&amp;org=">source</a>)</li>
<li>Red blood cells are ~8um in diameter and ~2um thick. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=100798&amp;ver=7&amp;trm=&amp;org=">source</a>)</li>
<li>The death rate of neocortical neurons in adult is ~1 per second. (<a href="https://faculty.washington.edu/chudler/facts.html">source</a>)</li>
<li>To reach the brain auditory stimuli take between 8-10 ms. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=110801&amp;ver=1&amp;trm=brain&amp;org=">source</a>)</li>
<li>To reach the brain visual stimuli take between 20-40 ms. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=110801&amp;ver=1&amp;trm=brain&amp;org=">source</a>)</li>
<li>There are ~100M photoreceptors per human retina and ~1M nerve fibers per optic nerve.</li>
<li>The human spinal cord contains ~200M neurons and ~1B glia. (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5845477/#:~:text=Accordingly%2C%20the%20number%20of%20neurons,cord%20is%20about%2069%20million">source</a>)</li>
<li>Short term plasticity lasts milliseconds to minutes.</li>
<li>Long-term potentiation/depression lasts minutes to months.</li>
<li>Between 25-75% of neurons are “dark” (never observed firing) in ephys studies, though this varies widely. (<a href="https://link.springer.com/article/10.1007/s00359-006-0117-6">source</a>)</li>
<li>Successful spike transmission rates between 10-90% are widely reported in the literature. (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3253165/">source</a>)</li>
</ul>
<h3 id="intracellular">Intracellular</h3>
<ul>
<li>An alpha helix has ~3.5 residues per turn and rises ~0.5 nm per turn.</li>
<li>Strands in a beta sheet are ~0.5 nm apart.</li>
<li>mRNA comprises between 1–5% of the total RNA in a typical mammalian cell.</li>
<li>There are 9 essential amino acids for humans.</li>
<li>There are 21 proteinogenic amino acids in eukaryotes.</li>
<li>There are 20 amino acids in the standard genetic code.</li>
<li>Proteins and macromolecules occupy between 20-30% of the cytosolic volume. (<a href="https://doi.org/10.1016/S0968-0004(01)01938-7">source</a>)</li>
<li>There are ~200M hemoglobin molecules per red blood cell. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=102740&amp;ver=8&amp;trm=&amp;org=">source</a>)</li>
<li>Diameters of neuron nuclei are between 3-18 um. (<a href="https://nba.uth.tmc.edu/neuroscience/m/s1/chapter08.html#:~:text=The%20nucleus%20in%20neurons%20is,larger%20cell%20body%20and%20nucleus">source</a>)</li>
<li>A nuclear pore complex moves a protein in or out of the nucleus at a frequency of ~1 kHz. (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC145537/">source</a>)</li>
<li>The mass of a base pair in DNA (2 nucleosides and 2 phosphates) is ~650 g/mol.</li>
<li>The DNA double helix has a diameter of ~2 nm.</li>
<li>A nucleosome is ~10 nm in diameter, with ~150 base pairs wrapped around it.</li>
<li>If stretched out, a human cell’s DNA would be ~3 meters in length. (<a href="https://hypertextbook.com/facts/1998/StevenChen.shtml">source</a>)</li>
<li>The typical mRNA half life in human cells is ~10 hours. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=104747&amp;ver=12&amp;trm=&amp;org=">source</a>))</li>
<li>The ribosome has a diameter of between 20-30 nm and a mass of ~2.5 MDa.</li>
<li>Higher eukaryotic ribosomes have a mass of ~4.5 MDa.</li>
<li>Organellar ribosomes have a mass of ~2.5 MDa.</li>
<li>A microtubule is ~25nm in diameter.</li>
<li>Fast anterograde and retrograde transport down cytoskeleton is between 1-4 um/s. Slow transport down cytoskeleton is 1-30 nm/s - though really it’s saltatory, not slow.</li>
<li>~30 ATP molecules are generated from full oxidation (all pathways) of one molecule of glucose. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=101778&amp;ver=10&amp;trm=&amp;org=">source</a>)</li>
<li>Mitochondria vary widely in shape and over two orders of magnitude in size but are on the order of 1um.</li>
<li>Cell membranes are between 4-6 nm across.</li>
<li>The cell membrane area is ~50% protein and the remainder lipid.</li>
<li>GPCRs are between 50-100 kDA in mass, ~500 AAs long, and their transmembrane domains are between 6-8 nm “tall.”</li>
<li>Large dense core vesicles are between ~100 nm in diameter.</li>
<li>Synaptic vesicles are ~40 nm in diameter, or ~10^-5 um^3 in volume.</li>
<li>There are between 10^3-10^4 neurotransmitter molecules in each synaptic vesicle.</li>
<li>Distance across the synaptic cleft is between 20-40 nm.</li>
<li>The surface area of synapses vary widely in shape and over 3 orders of magnitude in size, with a mean area ~75k nm^2. (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5790755/">source</a>)</li>
<li>It takes on the order of 10s for a protein to diffuse 20 um in a cell. (<a href="http://book.bionumbers.org/what-are-the-time-scales-for-diffusion-in-cells/">source</a>)</li>
</ul>
<hr>
<ul>
<li>The resting membrane potential of a neuron ranges between -40 and -90 mV in healthy human neurons. On average it’s ~ -70mV and the firing threshold is ~ -55 mV. (<a href="https://link.springer.com/book/10.1007/978-3-030-43395-6">source</a>)</li>
<li>Biological membranes have a capacitance of ~1 uF/cm^2. (<a href="https://onlinelibrary.wiley.com/doi/pdf/10.1002/9781118687864.app3">source</a>)</li>
<li>In the exocytotic cycle, the vesicle fusion and release takes ~1ms; endocytosis takes between 10-1000 ms; recycling, neurotransmitter transport, docking, priming take 10-60s.</li>
<li>A sodium–potassium pump transports 3 Na+ ions out of the cell and 2 K+ ions in at a time.</li>
<li>A single sodium-potassium pump’s maximum transport rate is ~200 Na ions/s and ~130 K ions/s.</li>
<li>It takes ~1 ms for a neurotransmitter to diffuse across the synaptic cleft.</li>
<li>ACh receptors open transiently for between 1-10ms on ACh binding.</li>
<li>During an axonal action potential, the membrane depolarizes in ~1 ms and returns to the resting value in the next betewen 1-2 ms. (<a href="https://www.amazon.com/Cellular-Physiology-Neurophysiology-Monograph-Student/dp/0323057098">source</a>)</li>
<li>Conduction velocity down an axon in peripheral nerve is ~50 m/s, ranging between 0.5-120 m/s depending on nerve type. (<a href="https://en.wikipedia.org/wiki/Nerve_conduction_velocity">source</a>)</li>
<li>Action potential durations vary depending on cell type, but in the brain are generally between 1-5 ms. (<a href="https://neurophysics.ucsd.edu/courses/physics_171/Bean_AP_Review.pdf">source</a>)</li>
<li>GCaMP8m has a time to peak of ~20ms and peak delta F/F of ~1 for one action potential. (<a href="https://www.biorxiv.org/content/10.1101/2021.11.08.467793v2">source</a>)</li>
</ul>
<h3 id="genetic">Genetic</h3>
<ul>
<li>There are 23 pairs of chromosomes in the nucleus of a somatic human cell.</li>
<li>There are 3.2 billion base pairs in a haploid human genome.</li>
<li>The human genome is ~1.5% coding exons, ~25% introns, and the rest non-intron noncoding.</li>
<li>There are ~45,000 genes in the haploid human genome, of which ~20,000 are protein-coding genes.</li>
<li>There are ~17,000 base pairs in and 13 proteins encoded by the mitochondrial human genome.</li>
<li>The median human gene contains 7 exons and the average length of introns is ~3 kb, though this varies widely. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=106732&amp;ver=6&amp;trm=&amp;org=">source</a>)</li>
<li>There are ~800 GPCRs encoded by the human genome, about 50% of which are olfactory receptors. (<a href="https://www.cell.com/cell/fulltext/S0092-8674(20)30265-8?_returnURL=https%3A%2F%2Flinkinghub.elsevier.com%2Fretrieve%2Fpii%2FS0092867420302658%3Fshowall%3Dtrue">source</a>)</li>
<li>RNA polymerases make one mistake for every ~10^4 nucleotides transcribed.</li>
<li>Rate of DNA replication is ≤ ~2 kb/min, which is the rate at which replication forks plow through chromatin. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=104136&amp;ver=15&amp;trm=&amp;org=">source</a>)</li>
<li>Spacing between origins of DNA replication is ~100 kb. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=104137&amp;ver=2&amp;trm=&amp;org=">source</a>)</li>
<li>There are ~1^-8 mutations per base pair per generation, or ~30 mutations per replication of haploid genome. (<a href="https://bionumbers.hms.harvard.edu/bionumber.aspx?id=105813&amp;ver=8&amp;trm=&amp;org=">source</a>)</li>
</ul>
<h3 id="hardware">Hardware</h3>
<ul>
<li>DBS leads are ~1.3 mm in diameter with currents on the order of 1s of mA. (<a href="https://www.accessdata.fda.gov/cdrh_docs/pdf15/p150031b.pdf">source</a>)</li>
<li>The smallest FDA-approved stent is ~2mm in diameter. (<a href="https://www.dicardiology.com/product/medtronic-launches-2-mm-onyx-des#:~:text=%E2%80%9CThe%20Resolute%20Onyx%202%20mm,reach%20areas%20of%20the%20heart.%E2%80%9D">source</a>)</li>
<li>Standard optical fibers for optogenetics are on the order of 100s of um in diameter. (<a href="https://www.thorlabs.com/navigation.cfm?guide_id=2187">source</a>)</li>
<li>The diffraction limit of a visible light microscope is ~200 nm.  (<a href="https://hypertextbook.com/facts/1999/GeetikaKumar.shtml">source</a>)</li>
<li>Nominal bitrate of a USB 4.0 is 40 Gbit/s.</li>
<li>Bluetooth 2.0 nominal bitrate is 3.0 Mbit/s.</li>
<li>L1 cache ref takes ~1 ns. (<a href="https://colin-scott.github.io/personal_website/research/interactive_latency.html">source</a>)</li>
<li>L2 cache ref takes ~4 ns. (<a href="https://colin-scott.github.io/personal_website/research/interactive_latency.html">source</a>)</li>
<li>Main memory ref takes ~100 ns. (<a href="https://colin-scott.github.io/personal_website/research/interactive_latency.html">source</a>)</li>
<li>Packet roundtrip CA to Netherlands will take ~150 ms. (<a href="https://colin-scott.github.io/personal_website/research/interactive_latency.html">source</a>)</li>
<li>The fastest mobile SoCs as of 2022 are on the order of 100 mm^2 in size, TDPs on the order of 1s of W, and GPUs doing on the order of 1s of TFLOPS. (<a href="https://en.wikipedia.org/wiki/List_of_Qualcomm_Snapdragon_processors">source</a>)</li>
<li>Sequencing error rates range from 10%/base to 0.1%/base depending on method and hardware. (<a href="https://www.genengnews.com/insights/dna-sequencing-accuracy-comes-a-long-way/">source</a>)</li>
</ul>
<h3 id="operational">Operational</h3>
<ul>
<li>Generic all-in lab space costs are ~$100/sqft/yr in science hubs (SFO, BOS, etc.) and ~$50/sqft/yr in non-hubs.</li>
<li>An 1-hr MRI scan costs on the order of $1k at a university.</li>
<li>A cage of 5 mice costs ~$1k upfront and ~$5k/yr recurring.</li>
<li>It’s ~$1M/yr for a minimum-viable macaque program. Smaller NHPs have far lower overhead. (<a href="https://twitter.com/maxhodak_/status/1519843035130912768">source</a>)</li>
<li>New drug development costs vary widely, but are on average $1B and 10 years from start to FDA approval.</li>
<li>Street prices for psychoactive drugs vary widely, but are on the order of 100s of $/g. (<a href="https://www.unodc.org/documents/data-and-analysis/WDR2021/8.1_Prices_an_purities_of_Drugs.pdf">source</a>)</li>
<li>Rule of thumb is that it takes 10k patient uses with no adverse effects for the FDA to allow a medical device to go OTC.</li>
<li>Total inpatient cost for fully invasive brain surgery is ~$50k. (<a href="https://pubmed.ncbi.nlm.nih.gov/28327904/">source</a>)</li>
<li>Total inpatient cost for fully invasive brain surgery including longer term care is ~$100k. (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4070631/">source</a>)</li>
<li>In 2021, ~16% of the US population 12 or older had a substance use disorder. (<a href="https://www.samhsa.gov/newsroom/press-announcements/20230104/samhsa-announces-nsduh-results-detailing-mental-illness-substance-use-levels-2021">source</a>)</li>
<li>In 2017, substance use was responsible ~20% of deaths globally. (<a href="https://ourworldindata.org/drug-use">source</a>)</li>
<li>In 2017, the most dangerous neurotechnologies were tobacco, 15% of global deaths, and alcohol, 4% of global deaths. Deaths from all other drug is  ~1% of global deaths. (<a href="https://ourworldindata.org/drug-use">source</a>)</li>
</ul>
</article>

        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ruby's official documentation just got a new look (123 pts)]]></title>
            <link>https://docs.ruby-lang.org/en/master/</link>
            <guid>41344004</guid>
            <pubDate>Sun, 25 Aug 2024 03:01:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://docs.ruby-lang.org/en/master/">https://docs.ruby-lang.org/en/master/</a>, See on <a href="https://news.ycombinator.com/item?id=41344004">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="main">


<p><a href="https://github.com/ruby/ruby/actions?query=workflow%3A%22MinGW%22"><img src="https://github.com/ruby/ruby/workflows/MinGW/badge.svg"></a> <a href="https://github.com/ruby/ruby/actions?query=workflow%3A%22RJIT%22"><img src="https://github.com/ruby/ruby/workflows/RJIT/badge.svg"></a> <a href="https://github.com/ruby/ruby/actions?query=workflow%3A%22Ubuntu%22"><img src="https://github.com/ruby/ruby/workflows/Ubuntu/badge.svg"></a> <a href="https://github.com/ruby/ruby/actions?query=workflow%3A%22Windows%22"><img src="https://github.com/ruby/ruby/workflows/Windows/badge.svg"></a> <a href="https://app.travis-ci.com/ruby/ruby"><img src="https://app.travis-ci.com/ruby/ruby.svg?branch=master"></a></p>

<h2 id="label-What+is+Ruby-3F">What is Ruby?<span><a href="#label-What+is+Ruby-3F">¶</a> <a href="#top">↑</a></span></h2>

<p>Ruby is an interpreted object-oriented programming language often used for web development. It also offers many scripting features to process plain text and serialized files, or manage system tasks. It is simple, straightforward, and extensible.</p>

<h2 id="label-Features+of+Ruby">Features of Ruby<span><a href="#label-Features+of+Ruby">¶</a> <a href="#top">↑</a></span></h2>
<ul><li>
<p>Simple Syntax</p>
</li><li>
<p><strong>Normal</strong> Object-oriented Features (e.g. class, method calls)</p>
</li><li>
<p><strong>Advanced</strong> Object-oriented Features (e.g. mix-in, singleton-method)</p>
</li><li>
<p>Operator Overloading</p>
</li><li>
<p><a href="https://docs.ruby-lang.org/en/master/Exception.html"><code>Exception</code></a> Handling</p>
</li><li>
<p>Iterators and Closures</p>
</li><li>
<p>Garbage Collection</p>
</li><li>
<p>Dynamic Loading of <a href="https://docs.ruby-lang.org/en/master/Object.html"><code>Object</code></a> Files (on some architectures)</p>
</li><li>
<p>Highly Portable (works on many Unix-like/POSIX compatible platforms as well as Windows, macOS, etc.) cf. <a href="https://docs.ruby-lang.org/en/master/maintainers_md.html#label-Platform+Maintainers">docs.ruby-lang.org/en/master/maintainers_md.html#label-Platform+Maintainers</a></p>
</li></ul>

<h2 id="label-How+to+get+Ruby">How to get Ruby<span><a href="#label-How+to+get+Ruby">¶</a> <a href="#top">↑</a></span></h2>

<p>For a complete list of ways to install Ruby, including using third-party tools like rvm, see:</p>

<p><a href="https://www.ruby-lang.org/en/downloads">www.ruby-lang.org/en/downloads</a>/</p>

<p>You can download release packages and the snapshot of the repository. If you want to download whole versions of Ruby, please visit <a href="https://www.ruby-lang.org/en/downloads/releases">www.ruby-lang.org/en/downloads/releases</a>/.</p>

<h3 id="label-Download+with+Git">Download with Git<span><a href="#label-Download+with+Git">¶</a> <a href="#top">↑</a></span></h3>

<p>The mirror of the Ruby source tree can be checked out with the following command:</p>

<pre>$ git clone https://github.com/ruby/ruby.git</pre>

<p>There are some other branches under development. Try the following command to see the list of branches:</p>

<pre>$ git ls-remote https://github.com/ruby/ruby.git</pre>

<p>You may also want to use <a href="https://git.ruby-lang.org/ruby.git">git.ruby-lang.org/ruby.git</a> (actual master of Ruby source) if you are a committer.</p>

<h2 id="label-How+to+build">How to build<span><a href="#label-How+to+build">¶</a> <a href="#top">↑</a></span></h2>

<p>See <a href="https://docs.ruby-lang.org/en/master/contributing/building_ruby_md.html">Building Ruby</a></p>

<h2 id="label-Ruby+home+page">Ruby home page<span><a href="#label-Ruby+home+page">¶</a> <a href="#top">↑</a></span></h2>

<p><a href="https://www.ruby-lang.org/">www.ruby-lang.org</a>/</p>


<ul><li>
<p><a href="https://docs.ruby-lang.org/en/master/index.html">English</a></p>
</li><li>
<p><a href="https://docs.ruby-lang.org/ja/master/index.html">Japanese</a></p>
</li></ul>

<h2 id="label-Mailing+list">Mailing list<span><a href="#label-Mailing+list">¶</a> <a href="#top">↑</a></span></h2>

<p>There is a mailing list to discuss Ruby. To subscribe to this list, please send the following phrase:</p>

<pre><span>join</span>
</pre>

<p>in the mail subject (not body) to the address <a href="mailto:ruby-talk-request@ml.ruby-lang.org?subject=join">ruby-talk-request@ml.ruby-lang.org</a>.</p>

<h2 id="label-Copying">Copying<span><a href="#label-Copying">¶</a> <a href="#top">↑</a></span></h2>

<p>See the file <a href="https://docs.ruby-lang.org/en/master/COPYING.html">COPYING</a>.</p>

<h2 id="label-Feedback">Feedback<span><a href="#label-Feedback">¶</a> <a href="#top">↑</a></span></h2>

<p>Questions about the Ruby language can be asked on the <a href="https://www.ruby-lang.org/en/community/mailing-lists">Ruby-Talk</a> mailing list or on websites like <a href="https://stackoverflow.com/">stackoverflow.com</a>.</p>

<p>Bugs should be reported at <a href="https://bugs.ruby-lang.org/">bugs.ruby-lang.org</a>. Read <a href="https://docs.ruby-lang.org/en/master/contributing/reporting_issues_md.html">“Reporting Issues”</a> for more information.</p>

<h2 id="label-Contributing">Contributing<span><a href="#label-Contributing">¶</a> <a href="#top">↑</a></span></h2>

<p>See <a href="https://docs.ruby-lang.org/en/master/contributing_md.html">“Contributing to Ruby”</a>, which includes setup and build instructions.</p>



<p>Ruby was originally designed and developed by Yukihiro Matsumoto (Matz) in 1995.</p>

<p><a href="mailto:matz@ruby-lang.org">matz@ruby-lang.org</a></p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Anthropic Claude 3.5 can create icalendar files, so I did this (321 pts)]]></title>
            <link>https://gregsramblings.com/stupid-but-useful-ai-tricks-creating-calendar-entries-from-an-image-using-anthropic-claude-35</link>
            <guid>41343826</guid>
            <pubDate>Sun, 25 Aug 2024 02:27:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gregsramblings.com/stupid-but-useful-ai-tricks-creating-calendar-entries-from-an-image-using-anthropic-claude-35">https://gregsramblings.com/stupid-but-useful-ai-tricks-creating-calendar-entries-from-an-image-using-anthropic-claude-35</a>, See on <a href="https://news.ycombinator.com/item?id=41343826">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="post-content-parent"><p>A few days ago, my jazz piano teacher sent me the new fall/winter schedule for my private jazz piano lessons -- 13 different dates -- as a JPG (mine are outlined in green marker):</p>
<p><img loading="lazy" src="https://cdn.hashnode.com/res/hashnode/image/upload/v1724550508637/b7807f68-6a22-45bc-85f0-78faadcaec63.jpeg?auto=compress,format&amp;format=webp" alt=""></p>
<p>I was too lazy to go make 13 entries in Google Calendar, so I decided to see if Claude could help me out:</p>
<p>I first uploaded the jpg to Claude 3.5 Sonnet)...</p>
<blockquote>
<p><strong>My prompt:</strong> List the dates that are outlined in green</p>
<p>The dates outlined in green in the image are:</p>
<p>Friday, 13-Sep-24 Friday, 27-Sep-24 Friday, 11-Oct-24 Friday, 8-Nov-24 Friday, 6-Dec-24 Friday, 20-Dec-24 Friday, 17-Jan-25 Friday, 31-Jan-25 Friday, 28-Feb-25 Friday, 14-Mar-25 Friday, 11-Apr-25 Friday, 25-Apr-25 Friday, 23-May-25</p>
<p>These dates correspond to the Friday column for students who have their first every-other-week lesson starting the week of Tuesday Sept 10, 2024.</p>
</blockquote>
<p>Cool - that was easy and accurate. Now I need to get it into my calendar, so I asked it to create an <a target="_blank" href="https://en.wikipedia.org/wiki/ICalendar">ics</a> file...</p>
<blockquote>
<p><strong>My prompt:</strong> Create a calendar ics file that creates an appointment on each of those dates at 2pm pacific time. The appointment title will be “Jazz Piano Lesson”</p>
<p>Certainly. I'll create an ICS (iCalendar) file with appointments for "Jazz Piano Lesson" on each of the dates you specified, set for 2:00 PM Pacific Time.</p>
</blockquote>
<pre><code>BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Claude//Jazz Piano Lessons//EN
CALSCALE:GREGORIAN
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20240913T210000Z
DTEND:20240913T220000Z
DTSTAMP:20240824T000000Z
UID:20240913jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20240927T210000Z
DTEND:20240927T220000Z
DTSTAMP:20240824T000000Z
UID:20240927jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20241011T210000Z
DTEND:20241011T220000Z
DTSTAMP:20240824T000000Z
UID:20241011jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20241108T220000Z
DTEND:20241108T230000Z
DTSTAMP:20240824T000000Z
UID:20241108jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20241206T220000Z
DTEND:20241206T230000Z
DTSTAMP:20240824T000000Z
UID:20241206jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20241220T220000Z
DTEND:20241220T230000Z
DTSTAMP:20240824T000000Z
UID:20241220jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20250117T220000Z
DTEND:20250117T230000Z
DTSTAMP:20240824T000000Z
UID:20250117jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20250131T220000Z
DTEND:20250131T230000Z
DTSTAMP:20240824T000000Z
UID:20250131jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20250228T220000Z
DTEND:20250228T230000Z
DTSTAMP:20240824T000000Z
UID:20250228jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20250314T210000Z
DTEND:20250314T220000Z
DTSTAMP:20240824T000000Z
UID:20250314jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20250411T210000Z
DTEND:20250411T220000Z
DTSTAMP:20240824T000000Z
UID:20250411jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20250425T210000Z
DTEND:20250425T220000Z
DTSTAMP:20240824T000000Z
UID:20250425jazzpiano@claude.ai
END:VEVENT
BEGIN:VEVENT
SUMMARY:Jazz Piano Lesson
DTSTART:20250523T210000Z
DTEND:20250523T220000Z
DTSTAMP:20240824T000000Z
UID:20250523jazzpiano@claude.ai
END:VEVENT
END:VCALENDAR
</code></pre>
<blockquote>
<p>I've created an ICS file with the following details:</p>
<ol>
<li><p>Each event is titled "Jazz Piano Lesson"</p>
</li>
<li><p>The events are scheduled for 2:00 PM Pacific Time on each of the specified dates</p>
</li>
<li><p>Each event is set to last for one hour</p>
</li>
<li><p>The time zone is properly adjusted to UTC (Z) in the file</p>
</li>
<li><p>Unique identifiers (UIDs) are provided for each event</p>
</li>
</ol>
<p>You can save this content as a .ics file and import it into most calendar applications. Here are a few notes about the file:</p>
<ol>
<li><p>The times are in UTC (Coordinated Universal Time). 2:00 PM Pacific Time translates to 9:00 PM UTC (21:00) for dates not in Daylight Saving Time, and 10:00 PM UTC (22:00) for dates within Daylight Saving Time. The file accounts for these changes.</p>
</li>
<li><p>The DTSTAMP for all events is set to the date of this conversation (August 24, 2024) as a placeholder. Your calendar application will likely update this when you import the events.</p>
</li>
<li><p>The UID for each event is unique, based on the date of the lesson and a simple string.</p>
</li>
</ol>
<p>To use this file:</p>
<ol>
<li><p>Copy the content of the artifact</p>
</li>
<li><p>Paste it into a new text file</p>
</li>
<li><p>Save the file with a .ics extension (e.g., "jazz_piano_lessons.ics")</p>
</li>
<li><p>Import this file into your preferred calendar application</p>
</li>
</ol>
<p>Most calendar applications should be able to read this file and create the appropriate recurring events. Let me know if you need any modifications or have any questions!</p>
</blockquote>
<p>I went to <a href="http://calendar.google.com/" target="_blank">calendar.google.com</a>, imported the ics, and my appointments were imported perfectly!<br>(To import ics files into Google calendar, go to the calendar settings, then to import/export)</p>
<p>I'm pleasantly surprised at how easy this was!</p>
<p>I tried the exact same thing in ChatGPT -- it identified the dates in the images, but it was unable to create an .ics file. However, it did give me some Python code to create the ics file for me.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Postgres as a Search Engine (146 pts)]]></title>
            <link>https://anyblockers.com/posts/postgres-as-a-search-engine</link>
            <guid>41343814</guid>
            <pubDate>Sun, 25 Aug 2024 02:25:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://anyblockers.com/posts/postgres-as-a-search-engine">https://anyblockers.com/posts/postgres-as-a-search-engine</a>, See on <a href="https://news.ycombinator.com/item?id=41343814">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>Build a retrieval system with semantic, full-text, and fuzzy search in Postgres to be used as a backbone in RAG pipelines.</p><div>  <p><strong>Search is hard</strong>. It’s a critical part of many apps, but getting it right isn’t easy. This is especially true for RAG-pipelines where the quality of retrieval can make or break the entire process.</p>
<p>While semantic search is trendy, good old lexical search is still the backbone. Semantic techniques can improve results, but they work best when added to a solid text-based search foundation.</p>
<p>In this post, we’ll explore how to use Postgres to create a robust search engine. We’ll combine three techniques:</p>
<ol>
<li>Full-text search with <code>tsvector</code></li>
<li>Semantic search with <code>pgvector</code></li>
<li>Fuzzy matching with <code>pg_trgm</code></li>
<li>Bonus: BM25</li>
</ol>
<p>This approach might not be the absolute best for every situation, but it’s a great alternative to setting up a separate search service. It’s a solid starting point that you can implement and scale within your existing Postgres database.</p>
<p>I won’t go into why you should Just Use Postgres™️ for everything, but if you want to read about it, here are a couple of good resources:</p>

<h2 id="table-with-four-legs"><a data-heading-link="" href="#table-with-four-legs">Table with four legs</a></h2>
<p>This is the table we’ll work with as an example.</p>
<pre tabindex="0" data-language="sql"><code><span><span>create</span><span> table</span><span> documents</span><span> (</span></span>
<span><span>    id </span><span>bigint</span><span> primary key</span><span> generated</span><span> always</span><span> as</span><span> identity</span><span>,</span></span>
<span><span>    title </span><span>text</span><span>,</span></span>
<span><span>    fts_title tsvector </span><span>generated</span><span> always</span><span> as</span><span> (to_tsvector(</span><span>'english'</span><span>, title)) stored,</span></span>
<span><span>    embedding vector(</span><span>1536</span><span>)</span></span>
<span><span>);</span></span>
<span></span></code></pre>
<p>We’ll evolve this table down the road.
Since Supabase has a great article on implementing hybrid search, we’ll use that as a starting point. <a href="https://supabase.com/docs/guides/ai/hybrid-search" rel="nofollow" target="_blank">Hybrid search<span><img src="https://www.google.com/s2/favicons?domain=supabase.com&amp;sz=64"></span></a></p>
<ul>
<li>Follow the guide to implement FTS with GIN-indexes and semantic search with pgvector (also known as bi-encoder dense retrieval).</li>
<li>From personal experience, I’d opt for 1536 dimensional embeddings since it’s gotten me way better results. Source: trust me.</li>
<li>I’ve replaced the Supabase function with just CTEs and a query, as well as prefixed the params with <code>$</code>. Here’s what it’ll look like:</li>
</ul>
<pre tabindex="0" data-language="sql"><code><span><span>with</span><span> full_text </span><span>as</span><span> (</span></span>
<span><span>    select</span></span>
<span><span>        id,</span></span>
<span><span>        -- Note: ts_rank_cd is not indexable but will only rank matches of the where clause</span></span>
<span><span>        -- which shouldn't be too big</span></span>
<span><span>        row_number</span><span>() </span><span>over</span><span>(</span><span>order by</span><span> ts_rank_cd(fts_title, websearch_to_tsquery($query_text)) </span><span>desc</span><span>) </span><span>as</span><span> rank_ix</span></span>
<span><span>    from</span></span>
<span><span>        documents</span></span>
<span><span>    where</span></span>
<span><span>        fts_title @@ websearch_to_tsquery($query_text)</span></span>
<span><span>    order by</span><span> rank_ix</span></span>
<span><span>    limit</span><span> least</span><span>($match_count, </span><span>30</span><span>)</span></span>
<span><span>),</span></span>
<span><span>semantic </span><span>as</span><span> (</span></span>
<span><span>    select</span></span>
<span><span>        id,</span></span>
<span><span>        row_number</span><span>() </span><span>over</span><span> (</span><span>order by</span><span> embedding </span><span>&lt;</span><span>#</span><span>&gt;</span><span> $query_embedding) </span><span>as</span><span> rank_ix</span></span>
<span><span>    from</span></span>
<span><span>        documents</span></span>
<span><span>    order by</span><span> rank_ix</span></span>
<span><span>    limit</span><span> least</span><span>($match_count, </span><span>30</span><span>)</span></span>
<span><span>)</span></span>
<span><span>select</span></span>
<span><span>    documents.</span><span>*</span></span>
<span><span>from</span></span>
<span><span>    full_text</span></span>
<span><span>    full outer join</span><span> semantic</span></span>
<span><span>        on</span><span> full_text</span><span>.</span><span>id</span><span> =</span><span> semantic</span><span>.</span><span>id</span></span>
<span><span>    join</span><span> documents</span></span>
<span><span>        on</span><span> coalesce</span><span>(</span><span>full_text</span><span>.</span><span>id</span><span>, </span><span>semantic</span><span>.</span><span>id</span><span>) </span><span>=</span><span> documents</span><span>.</span><span>id</span></span>
<span><span>order by</span></span>
<span><span>    coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> full_text</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $full_text_weight </span><span>+</span></span>
<span><span>    coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> semantic</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $semantic_weight</span></span>
<span><span>    desc</span></span>
<span><span>limit</span></span>
<span><span>    least</span><span>($match_count, </span><span>30</span><span>);</span></span>
<span></span></code></pre>
<p>Note: We’re using <code>coalesce</code> in several places for important reasons:</p>
<ol>
<li>
<p>In the <code>join</code> clause:</p>
<pre tabindex="0" data-language="sql"><code><span><span>join</span><span> documents</span></span>
<span><span>    on</span><span> coalesce</span><span>(</span><span>full_text</span><span>.</span><span>id</span><span>, </span><span>semantic</span><span>.</span><span>id</span><span>) </span><span>=</span><span> documents</span><span>.</span><span>id</span></span>
<span></span></code></pre>
<p>This ensures that we include results from both full-text and semantic searches, even if a document appears in only one of these result sets. If a document is found by full-text search but not by semantic search (or vice versa), we still want to include it.</p>
</li>
<li>
<p>In the <code>order by</code> clause:</p>
<pre tabindex="0" data-language="sql"><code><span><span>coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> full_text</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $full_text_weight </span><span>+</span></span>
<span><span>coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> semantic</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $semantic_weight</span></span>
<span></span></code></pre>
<p>This handles cases where a document might be present in one search result but not the other. If a document isn’t in the full-text results, its <code>full_text.rank_ix</code> will be NULL, so we use <code>coalesce</code> to treat it as 0.0 in the ranking calculation. The same applies for semantic search results.</p>
</li>
</ol>
<p>Here we’re using Reciprocal Ranked Fusion (RRF) to merge the results.</p>
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 799.71875 395.890625" style="max-width: 799.71875px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-0"><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" id="mermaid-0_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" id="mermaid-0_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" id="mermaid-0_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" id="mermaid-0_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" id="mermaid-0_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" id="mermaid-0_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g><g><g id="subGraph2"><rect height="83" width="247.90625" y="0" x="535.8125" ry="0" rx="0" style=""></rect><g transform="translate(640.640625, 0)"><foreignObject height="18" width="38.25"><p><span>List 3</span></p></foreignObject></g></g><g id="subGraph1"><rect height="83" width="247.90625" y="0" x="267.90625" ry="0" rx="0" style=""></rect><g transform="translate(372.734375, 0)"><foreignObject height="18" width="38.25"><p><span>List 2</span></p></foreignObject></g></g><g id="subGraph0"><rect height="83" width="247.90625" y="0" x="0" ry="0" rx="0" style=""></rect><g transform="translate(104.828125, 0)"><foreignObject height="18" width="38.25"><p><span>List 1</span></p></foreignObject></g></g></g><g><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-L1A-RRF-0" d="M47.836,58L47.836,62.167C47.836,66.333,47.836,74.667,47.836,83C47.836,91.333,47.836,99.667,98.725,113.581C149.615,127.495,251.394,146.989,302.284,156.737L353.173,166.484"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-L1B-RRF-0" d="M123.508,58L123.508,62.167C123.508,66.333,123.508,74.667,123.508,83C123.508,91.333,123.508,99.667,162.039,113.292C200.571,126.917,277.634,145.835,316.165,155.293L354.697,164.752"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-L1C-RRF-0" d="M199.625,58L199.625,62.167C199.625,66.333,199.625,74.667,199.625,83C199.625,91.333,199.625,99.667,225.883,112.826C252.141,125.985,304.656,143.971,330.914,152.963L357.172,161.956"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-L2B-RRF-0" d="M315.742,58L315.742,62.167C315.742,66.333,315.742,74.667,315.742,83C315.742,91.333,315.742,99.667,324.218,111.131C332.693,122.596,349.645,137.193,358.12,144.491L366.596,151.789"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-L2C-RRF-0" d="M391.859,58L391.859,62.167C391.859,66.333,391.859,74.667,391.859,83C391.859,91.333,391.859,99.667,391.925,107.2C391.991,114.734,392.123,121.467,392.189,124.834L392.255,128.201"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-L2A-RRF-0" d="M467.977,58L467.977,62.167C467.977,66.333,467.977,74.667,467.977,83C467.977,91.333,467.977,99.667,459.662,111.125C451.348,122.584,434.72,137.168,426.405,144.46L418.091,151.752"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-L3C-RRF-0" d="M584.094,58L584.094,62.167C584.094,66.333,584.094,74.667,584.094,83C584.094,91.333,584.094,99.667,558.002,112.824C531.91,125.982,479.727,143.964,453.635,152.955L427.543,161.946"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-L3A-RRF-0" d="M660.211,58L660.211,62.167C660.211,66.333,660.211,74.667,660.211,83C660.211,91.333,660.211,99.667,621.846,113.291C583.481,126.916,506.751,145.831,468.386,155.289L430.021,164.747"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-L3B-RRF-0" d="M735.883,58L735.883,62.167C735.883,66.333,735.883,74.667,735.883,83C735.883,91.333,735.883,99.667,685.16,113.58C634.437,127.494,532.991,146.987,482.268,156.734L431.545,166.481"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-RRF-FR-0" d="M392.359,214.391L392.276,218.474C392.193,222.557,392.026,230.724,391.943,238.091C391.859,245.457,391.859,252.024,391.859,255.307L391.859,258.591"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-FR-FRA-0" d="M361.684,296.891L354.065,301.057C346.445,305.224,331.205,313.557,323.585,321.007C315.965,328.457,315.965,335.024,315.965,338.307L315.965,341.591"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-FR-FRB-0" d="M391.771,296.891L391.748,301.057C391.726,305.224,391.681,313.557,391.659,321.007C391.637,328.457,391.637,335.024,391.637,338.307L391.637,341.591"></path><path marker-end="url(#mermaid-0_flowchart-pointEnd)" style="fill:none;" id="L-FR-FRC-0" d="M422.034,296.891L429.654,301.057C437.274,305.224,452.514,313.557,460.134,321.007C467.754,328.457,467.754,335.024,467.754,338.307L467.754,341.591"></path></g><g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g></g><g><g transform="translate(584.09375, 41.5)" data-id="L3C" data-node="true" id="flowchart-L3C-6"><rect height="33" width="26.5625" y="-16.5" x="-13.28125" ry="0" rx="0" style=""></rect><g transform="translate(-5.78125, -9)" style=""><rect></rect><foreignObject height="18" width="11.5625"><p><span>C</span></p></foreignObject></g></g><g transform="translate(660.2109375, 41.5)" data-id="L3A" data-node="true" id="flowchart-L3A-7"><rect height="33" width="25.671875" y="-16.5" x="-12.8359375" ry="0" rx="0" style=""></rect><g transform="translate(-5.3359375, -9)" style=""><rect></rect><foreignObject height="18" width="10.671875"><p><span>A</span></p></foreignObject></g></g><g transform="translate(735.8828125, 41.5)" data-id="L3B" data-node="true" id="flowchart-L3B-8"><rect height="33" width="25.671875" y="-16.5" x="-12.8359375" ry="0" rx="0" style=""></rect><g transform="translate(-5.3359375, -9)" style=""><rect></rect><foreignObject height="18" width="10.671875"><p><span>B</span></p></foreignObject></g></g><g transform="translate(315.7421875, 41.5)" data-id="L2B" data-node="true" id="flowchart-L2B-3"><rect height="33" width="25.671875" y="-16.5" x="-12.8359375" ry="0" rx="0" style=""></rect><g transform="translate(-5.3359375, -9)" style=""><rect></rect><foreignObject height="18" width="10.671875"><p><span>B</span></p></foreignObject></g></g><g transform="translate(391.859375, 41.5)" data-id="L2C" data-node="true" id="flowchart-L2C-4"><rect height="33" width="26.5625" y="-16.5" x="-13.28125" ry="0" rx="0" style=""></rect><g transform="translate(-5.78125, -9)" style=""><rect></rect><foreignObject height="18" width="11.5625"><p><span>C</span></p></foreignObject></g></g><g transform="translate(467.9765625, 41.5)" data-id="L2A" data-node="true" id="flowchart-L2A-5"><rect height="33" width="25.671875" y="-16.5" x="-12.8359375" ry="0" rx="0" style=""></rect><g transform="translate(-5.3359375, -9)" style=""><rect></rect><foreignObject height="18" width="10.671875"><p><span>A</span></p></foreignObject></g></g><g transform="translate(47.8359375, 41.5)" data-id="L1A" data-node="true" id="flowchart-L1A-0"><rect height="33" width="25.671875" y="-16.5" x="-12.8359375" ry="0" rx="0" style=""></rect><g transform="translate(-5.3359375, -9)" style=""><rect></rect><foreignObject height="18" width="10.671875"><p><span>A</span></p></foreignObject></g></g><g transform="translate(123.5078125, 41.5)" data-id="L1B" data-node="true" id="flowchart-L1B-1"><rect height="33" width="25.671875" y="-16.5" x="-12.8359375" ry="0" rx="0" style=""></rect><g transform="translate(-5.3359375, -9)" style=""><rect></rect><foreignObject height="18" width="10.671875"><p><span>B</span></p></foreignObject></g></g><g transform="translate(199.625, 41.5)" data-id="L1C" data-node="true" id="flowchart-L1C-2"><rect height="33" width="26.5625" y="-16.5" x="-13.28125" ry="0" rx="0" style=""></rect><g transform="translate(-5.78125, -9)" style=""><rect></rect><foreignObject height="18" width="11.5625"><p><span>C</span></p></foreignObject></g></g><g transform="translate(391.859375, 173.4453125)" data-id="RRF" data-node="true" id="flowchart-RRF-10"><polygon style="" transform="translate(-40.4453125,40.4453125)" points="40.4453125,0 80.890625,-40.4453125 40.4453125,-80.890625 0,-40.4453125"></polygon><g transform="translate(-16.4453125, -9)" style=""><rect></rect><foreignObject height="18" width="32.890625"><p><span>RRF</span></p></foreignObject></g></g><g transform="translate(391.859375, 280.390625)" data-id="FR" data-node="true" id="flowchart-FR-28"><rect height="33" width="112.828125" y="-16.5" x="-56.4140625" ry="0" rx="0" style=""></rect><g transform="translate(-48.9140625, -9)" style=""><rect></rect><foreignObject height="18" width="97.828125"><p><span>Final Ranking</span></p></foreignObject></g></g><g transform="translate(315.96484375, 363.390625)" data-id="FRA" data-node="true" id="flowchart-FRA-30"><rect height="33" width="25.671875" y="-16.5" x="-12.8359375" ry="0" rx="0" style=""></rect><g transform="translate(-5.3359375, -9)" style=""><rect></rect><foreignObject height="18" width="10.671875"><p><span>A</span></p></foreignObject></g></g><g transform="translate(391.63671875, 363.390625)" data-id="FRB" data-node="true" id="flowchart-FRB-32"><rect height="33" width="25.671875" y="-16.5" x="-12.8359375" ry="0" rx="0" style=""></rect><g transform="translate(-5.3359375, -9)" style=""><rect></rect><foreignObject height="18" width="10.671875"><p><span>B</span></p></foreignObject></g></g><g transform="translate(467.75390625, 363.390625)" data-id="FRC" data-node="true" id="flowchart-FRC-34"><rect height="33" width="26.5625" y="-16.5" x="-13.28125" ry="0" rx="0" style=""></rect><g transform="translate(-5.78125, -9)" style=""><rect></rect><foreignObject height="18" width="11.5625"><p><span>C</span></p></foreignObject></g></g></g></g></g></svg>
<blockquote>
<p>This method ensures that items ranked high in multiple lists are given a high rank in the final list. It also ensures that items ranked high in only a few lists but low in others are not given a high rank in the final list. Placing the rank in the denominator when calculating score helps penalize the low ranking records.</p>
</blockquote>
<p>It’s also worth noting:</p>
<ul>
<li><code>$rrf_k</code>: To prevent extremely high scores for items ranked first (since we’re dividing by the rank), a k constant is often added to the denominator to smooth the score.</li>
<li><code>$ _weight</code>: We can assign a weight to each method. This is very useful when you’re tuning the results.</li>
</ul>
<h2 id="implementing-fuzzy-search"><a data-heading-link="" href="#implementing-fuzzy-search">Implementing fuzzy search</a></h2>
<p>While this gets us a long way, an immediate issue will be typos in named entities. While semantic search eliminates some of these issues by capturing similarity, it struggles to do so for names, acronyms, and other text that’s not semantically similar. To mitigate this, we’ll introduce the <code>pg_trgm</code> extension to allow for fuzzy searching.</p>
<pre tabindex="0" data-language="sql"><code><span><span>create</span><span> extension </span><span>if</span><span> not</span><span> exists</span><span> pg_trgm;</span></span>
<span></span></code></pre>
<p>It operates with Trigrams. Here’s how it works:</p>
<p><img src="https://anyblockers.com/_astro/trigrams.CyxTPrsW_Z4ew9V.svg" alt="Trigrams" width="800" height="300" loading="lazy" decoding="async"></p>
<p>Trigrams are useful for fuzzy search because they break down words into three-character sequences. This allows for matching similar words even if they contain typos or slight variations. For example, “hello” and “helo” share many trigrams, making them easier to match in a fuzzy search.</p>
<p>You have to create a new index for the desired column like this:</p>
<pre tabindex="0" data-language="sql"><code><span><span>create</span><span> index</span><span> idx_documents_title_trgm</span><span> on</span><span> documents </span><span>using</span><span> gin (title gin_trgm_ops);</span></span>
<span></span></code></pre>
<p>After that, you need to add it to the full search query. The extension exposes the % operator to filter out text where similarity is larger than <code>pg_trgm.similarity_threshold</code> (default is 0.3). There are also several other operators that are useful. Everything is well documented here: <a href="https://www.postgres.org/docs/current/pgtrgm.html" rel="nofollow" target="_blank">pg_trgm — support for similarity of text using trigram matching<span><img src="https://www.google.com/s2/favicons?domain=www.postgres.org&amp;sz=64"></span></a></p>
<p>Here’s the new query with fuzzy searching implemented:</p>
<pre tabindex="0" data-language="sql"><code><span><span>with</span><span> fuzzy </span><span>as</span><span> ( </span></span>
<span><span>    select</span><span> id,</span></span>
<span><span>           similarity(title, $query_text) </span><span>as</span><span> sim_score,</span></span>
<span><span>           row_number</span><span>() </span><span>over</span><span> (</span><span>order by</span><span> similarity(title, $query_text) </span><span>desc</span><span>) </span><span>as</span><span> rank_ix</span></span>
<span><span>    from</span><span> documents</span></span>
<span><span>    where</span><span> title % $query_text</span></span>
<span><span>    order by</span><span> rank_ix</span></span>
<span><span>    limit</span><span> least</span><span>($match_count, </span><span>30</span><span>)</span></span>
<span><span>),</span></span>
<span><span>full_text </span><span>as</span><span> (</span></span>
<span><span>    select</span><span> id,</span></span>
<span><span>           ts_rank_cd(to_tsvector(</span><span>'english'</span><span>, title), websearch_to_tsquery($query_text)) </span><span>as</span><span> rank_score,</span></span>
<span><span>           row_number</span><span>() </span><span>over</span><span> (</span><span>order by</span><span> ts_rank_cd(to_tsvector(</span><span>'english'</span><span>, title), websearch_to_tsquery($query_text)) </span><span>desc</span><span>) </span><span>as</span><span> rank_ix</span></span>
<span><span>    from</span><span> documents</span></span>
<span><span>    where</span><span> to_tsvector(</span><span>'english'</span><span>, title) @@ websearch_to_tsquery($query_text)</span></span>
<span><span>    order by</span><span> rank_ix</span></span>
<span><span>    limit</span><span> least</span><span>($match_count, </span><span>30</span><span>)</span></span>
<span><span>),</span></span>
<span><span>semantic </span><span>as</span><span> (</span></span>
<span><span>    select</span><span> id,</span></span>
<span><span>           row_number</span><span>() </span><span>over</span><span> (</span><span>order by</span><span> embedding </span><span>&lt;</span><span>#</span><span>&gt;</span><span> $query_embedding) </span><span>as</span><span> rank_ix</span></span>
<span><span>    from</span><span> documents</span></span>
<span><span>    order by</span><span> rank_ix</span></span>
<span><span>    limit</span><span> least</span><span>($match_count, </span><span>30</span><span>)</span></span>
<span><span>)</span></span>
<span><span>select</span><span> documents.</span><span>*</span></span>
<span><span>from</span><span> fuzzy</span></span>
<span><span>full outer join</span><span> full_text </span><span>on</span><span> fuzzy</span><span>.</span><span>id</span><span> =</span><span> full_text</span><span>.</span><span>id</span></span>
<span><span>full outer join</span><span> semantic </span><span>on</span><span> coalesce</span><span>(</span><span>fuzzy</span><span>.</span><span>id</span><span>, </span><span>full_text</span><span>.</span><span>id</span><span>) </span><span>=</span><span> semantic</span><span>.</span><span>id</span></span>
<span><span>join</span><span> documents </span><span>on</span><span> coalesce</span><span>(</span><span>fuzzy</span><span>.</span><span>id</span><span>, </span><span>full_text</span><span>.</span><span>id</span><span>, </span><span>semantic</span><span>.</span><span>id</span><span>) </span><span>=</span><span> documents</span><span>.</span><span>id</span></span>
<span><span>order by</span></span>
<span><span>    coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> fuzzy</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $fuzzy_weight </span><span>+</span></span>
<span><span>    coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> full_text</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $full_text_weight </span><span>+</span></span>
<span><span>    coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> semantic</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $semantic_weight</span></span>
<span><span>desc</span></span>
<span><span>limit</span><span> least</span><span>($match_count, </span><span>30</span><span>);</span></span>
<span></span></code></pre>
<h2 id="debugging-the-rankings"><a data-heading-link="" href="#debugging-the-rankings">Debugging the rankings</a></h2>
<p>When getting the results back, it’s very useful to understand why something matched and not. First, we need to ensure we’re returning all scores from the various CTEs.</p>
<pre tabindex="0" data-language="sql"><code><span><span>semantic </span><span>as</span><span> (</span></span>
<span><span>  select</span><span> id,</span></span>
<span><span>  1</span><span> -</span><span> (embedding </span><span>&lt;=&gt;</span><span> $query_embedding) </span><span>as</span><span> cosine_similarity, </span></span>
<span><span>)</span></span>
<span></span></code></pre>
<p>Next, we need to actually include it in the final response. I’ve found it useful to store as a JSON object that you can pass around however you want.</p>
<pre tabindex="0" data-language="sql"><code><span><span>select</span></span>
<span><span>  ...</span></span>
<span><span>  json_build_object(</span></span>
<span><span>      'fuzzy'</span><span>, json_build_object(</span><span>'rank_ix'</span><span>, </span><span>fuzzy</span><span>.</span><span>rank_ix</span><span>, </span><span>'sim_score'</span><span>, </span><span>fuzzy</span><span>.</span><span>sim_score</span><span>),</span></span>
<span><span>      'full_text'</span><span>, json_build_object(</span><span>'rank_ix'</span><span>, </span><span>full_text</span><span>.</span><span>rank_ix</span><span>, </span><span>'rank_score'</span><span>, </span><span>full_text</span><span>.</span><span>rank_score</span><span>),</span></span>
<span><span>      'semantic'</span><span>, json_build_object(</span><span>'rank_ix'</span><span>, </span><span>semantic</span><span>.</span><span>rank_ix</span><span>, </span><span>'cosine_similarity'</span><span>, </span><span>semantic</span><span>.</span><span>cosine_similarity</span><span>)</span></span>
<span><span>  ) </span><span>as</span><span> rankings</span></span>
<span><span>...</span></span>
<span></span></code></pre>
<p>Here’s what it’ll look like:</p>
<pre tabindex="0" data-language="json"><code><span><span>{</span></span>
<span><span>  "rankings"</span><span>: {</span></span>
<span><span>    "fuzzy"</span><span>: {</span></span>
<span><span>      "rank_ix"</span><span>: </span><span>5</span><span>,</span></span>
<span><span>      "sim_score"</span><span>: </span><span>0.6</span></span>
<span><span>    },</span></span>
<span><span>    "full_text"</span><span>: {</span></span>
<span><span>      "rank_ix"</span><span>: </span><span>4</span><span>,</span></span>
<span><span>      "rank_score"</span><span>: </span><span>0.756</span></span>
<span><span>    },</span></span>
<span><span>    "semantic"</span><span>: {</span></span>
<span><span>      "rank_ix"</span><span>: </span><span>1</span><span>,</span></span>
<span><span>      "cosine_similarity"</span><span>: </span><span>0.912</span></span>
<span><span>    }</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<h2 id="tuning-full-text-search"><a data-heading-link="" href="#tuning-full-text-search">Tuning full text search</a></h2>
<h3 id="weighing-tsvectors"><a data-heading-link="" href="#weighing-tsvectors">Weighing tsvectors</a></h3>
<p>Now, your actual documents might actually include some content and not just a title. Let’s go ahead and add a <code>body</code> column.</p>
<pre tabindex="0" data-language="sql"><code><span><span>create</span><span> table</span><span> documents</span><span> (</span></span>
<span><span>    id </span><span>bigint</span><span> primary key</span><span> generated</span><span> always</span><span> as</span><span> identity</span><span>,</span></span>
<span><span>    title </span><span>text</span><span>,</span></span>
<span><span>    body </span><span>text</span><span>, </span></span>
<span><span>    fts_title tsvector </span><span>generated</span><span> always</span><span> as</span><span> (to_tsvector(</span><span>'english'</span><span>, title)) stored, </span></span>
<span><span>    fts_body tsvector </span><span>generated</span><span> always</span><span> as</span><span> (to_tsvector(</span><span>'english'</span><span>, body)) stored, </span></span>
<span><span>    embedding vector(</span><span>1536</span><span>)</span></span>
<span><span>);</span></span>
<span></span></code></pre>
<p>As you can see, we’ll only keep a single embedding column even though we have multiple fields. Personally, I’ve found no significant performance in keeping multiple embeddings, but instead keeping both <code>title</code> and <code>body</code> in the same. After all, the <code>title</code> should™️ be a short representation of the body. I encourage you to experiment with this based on your needs.</p>
<p>Now, let’s look at the <code>fts_</code> columns. We expect the title to be short and keyword-rich, while the body will be longer and include more details. Thus we need to adjust how the full text search columns are weighed against each other. Read the docs to get a better understanding here: <a href="https://www.postgres.org/docs/current/textsearch-controls.html#TEXTSEARCH-RANKING" rel="nofollow" target="_blank">12.3.3. Ranking Search Results<span><img src="https://www.google.com/s2/favicons?domain=www.postgres.org&amp;sz=64"></span></a>. Here’s the tl;dr:</p>
<ul>
<li>Weights allow prioritizing words based on their location or importance in the document.</li>
<li>A-weight: Most important (e.g., title, headers). Default <code>1.0</code></li>
<li>B-weight: Important (e.g., beginning of document, abstract). Default <code>0.4</code></li>
<li>C-weight: Standard importance (e.g., main body text). Default <code>0.2</code></li>
<li>D-weight: Least important (e.g., footnotes, annotations). Default <code>0.1</code></li>
<li>Adjust weights to fine-tune relevance based on document structure and application needs.</li>
</ul>
<p>The title is given more weight than the body because it’s typically a concise representation of the document’s main topic. Users often scan titles first when searching, so matching keywords in the title are usually more relevant to the user’s intent than matches in the body text.</p>
<p>With this information, we can go ahead and update the indexes:</p>
<pre tabindex="0" data-language="sql"><code><span><span>create</span><span> table</span><span> documents</span><span> (</span></span>
<span><span>    id </span><span>bigint</span><span> primary key</span><span> generated</span><span> always</span><span> as</span><span> identity</span><span>,</span></span>
<span><span>    title </span><span>text</span><span>,</span></span>
<span><span>    body </span><span>text</span><span>,</span></span>
<span><span>    fts_title tsvector </span><span>generated</span><span> always</span><span> as</span><span> (setweight(to_tsvector(</span><span>'english'</span><span>, </span><span>coalesce</span><span>(title, </span><span>''</span><span>)), </span><span>'A'</span><span>)) stored, </span></span>
<span><span>    fts_body tsvector </span><span>generated</span><span> always</span><span> as</span><span> (setweight(to_tsvector(</span><span>'english'</span><span>, </span><span>coalesce</span><span>(body, </span><span>''</span><span>)), </span><span>'C'</span><span>)) stored, </span></span>
<span><span>    embedding vector(</span><span>1536</span><span>)</span></span>
<span><span>);</span></span>
<span></span></code></pre>
<p>This will make the <code>title</code> have a weight of <code>1.0</code> and <code>body</code> a weight of <code>0.2</code>.</p>
<p>Like before, we’ll add the new <code>fts_body</code> to the final query. I’ve also renamed the previous <code>full_text</code> to <code>fts_title</code>.</p>
<pre tabindex="0" data-language="sql"><code><span><span>...</span></span>
<span><span>fts_body </span><span>as</span><span> (</span></span>
<span><span>    select</span><span> id,</span></span>
<span><span>           ts_rank_cd(fts_body, websearch_to_tsquery($query_text)) </span><span>as</span><span> rank_score,</span></span>
<span><span>           row_number</span><span>() </span><span>over</span><span> (</span><span>order by</span><span> ts_rank_cd(fts_body, websearch_to_tsquery($query_text)) </span><span>desc</span><span>) </span><span>as</span><span> rank_ix</span></span>
<span><span>    from</span><span> documents</span></span>
<span><span>    where</span><span> fts_body @@ websearch_to_tsquery($query_text)</span></span>
<span><span>    order by</span><span> rank_ix</span></span>
<span><span>    limit</span><span> least</span><span>($match_count, </span><span>30</span><span>)</span></span>
<span><span>),</span></span>
<span><span>...</span></span>
<span></span></code></pre>
<p>And the combined query</p>
<pre tabindex="0" data-language="sql"><code><span><span>select</span></span>
<span><span>    documents.</span><span>*</span><span>,</span></span>
<span><span>    coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> fuzzy</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $fuzzy_weight </span><span>+</span></span>
<span><span>    coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> fts_title</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $fts_title_weight </span><span>+</span></span>
<span><span>    coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> fts_body</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $fts_body_weight </span><span>+</span></span>
<span><span>    coalesce</span><span>(</span><span>1</span><span>.</span><span>0</span><span> /</span><span> ($rrf_k </span><span>+</span><span> semantic</span><span>.</span><span>rank_ix</span><span>), </span><span>0</span><span>.</span><span>0</span><span>) </span><span>*</span><span> $semantic_weight </span><span>as</span><span> combined_rank,</span></span>
<span><span>    json_build_object(</span></span>
<span><span>        'fuzzy'</span><span>, json_build_object(</span><span>'rank_ix'</span><span>, </span><span>fuzzy</span><span>.</span><span>rank_ix</span><span>, </span><span>'sim_score'</span><span>, </span><span>fuzzy</span><span>.</span><span>sim_score</span><span>),</span></span>
<span><span>        'fts_title'</span><span>, json_build_object(</span><span>'rank_ix'</span><span>, </span><span>fts_title</span><span>.</span><span>rank_ix</span><span>, </span><span>'rank_score'</span><span>, </span><span>fts_title</span><span>.</span><span>rank_score</span><span>),</span></span>
<span><span>        'fts_body'</span><span>, json_build_object(</span><span>'rank_ix'</span><span>, </span><span>fts_body</span><span>.</span><span>rank_ix</span><span>, </span><span>'rank_score'</span><span>, </span><span>fts_body</span><span>.</span><span>rank_score</span><span>), </span></span>
<span><span>        'semantic'</span><span>, json_build_object(</span><span>'rank_ix'</span><span>, </span><span>semantic</span><span>.</span><span>rank_ix</span><span>, </span><span>'cosine_similarity'</span><span>, </span><span>semantic</span><span>.</span><span>cosine_similarity</span><span>)</span></span>
<span><span>    ) </span><span>as</span><span> debug_rankings</span></span>
<span><span>from</span><span> fuzzy</span></span>
<span><span>full outer join</span><span> fts_title </span><span>on</span><span> fuzzy</span><span>.</span><span>id</span><span> =</span><span> fts_title</span><span>.</span><span>id</span></span>
<span><span>full outer join</span><span> fts_body </span><span>on</span><span> coalesce</span><span>(</span><span>fuzzy</span><span>.</span><span>id</span><span>, </span><span>fts_title</span><span>.</span><span>id</span><span>) </span><span>=</span><span> fts_body</span><span>.</span><span>id</span></span>
<span><span>full outer join</span><span> semantic </span><span>on</span><span> coalesce</span><span>(</span><span>fuzzy</span><span>.</span><span>id</span><span>, </span><span>fts_title</span><span>.</span><span>id</span><span>, </span><span>fts_body</span><span>.</span><span>id</span><span>) </span><span>=</span><span> semantic</span><span>.</span><span>id</span></span>
<span><span>join</span><span> documents </span><span>on</span><span> coalesce</span><span>(</span><span>fuzzy</span><span>.</span><span>id</span><span>, </span><span>fts_title</span><span>.</span><span>id</span><span>, </span><span>fts_body</span><span>.</span><span>id</span><span>, </span><span>semantic</span><span>.</span><span>id</span><span>) </span><span>=</span><span> documents</span><span>.</span><span>id</span></span>
<span><span>order by</span><span> combined_rank </span><span>desc</span></span>
<span><span>limit</span><span> least</span><span>($match_count, </span><span>30</span><span>);</span></span>
<span></span></code></pre>
<h3 id="adjusting-for-length"><a data-heading-link="" href="#adjusting-for-length">Adjusting for length</a></h3>
<p>If you read the documentation for <code>ts_rank_cd</code> you saw that there’s a normalization parameter. If not, here it is:</p>
<blockquote>
<p>Both ranking functions take an integer <code>normalization</code> option that specifies whether and how a document’s length should impact its rank. The integer option controls several behaviors, so it is a bit mask: you can specify one or more behaviors using <code>|</code> (for example, <code>2|4</code>).</p>
</blockquote>
<p>We can use these various options to:</p>
<ul>
<li>Adjust for document length bias</li>
<li>Balance relevance across diverse document sets</li>
<li>Scale ranking results for consistent presentation</li>
</ul>
<p><img src="https://anyblockers.com/_astro/document-length-normalization.DS5tgXDF_Z155tVw.svg" alt="Document Length Normalization" width="800" height="400" loading="lazy" decoding="async"></p>













































<table><thead><tr><th>Option Value</th><th>When to Use</th><th>Use Case</th></tr></thead><tbody><tr><td>No normalization (<code>0</code>)</td><td>When you want raw ranking scores without adjustments</td><td>Comparing documents of similar length and structure</td></tr><tr><td>Log length normalization (<code>1</code>)</td><td>When you want to mildly reduce the impact of document length</td><td>Mixed-length documents where longer docs shouldn’t dominate</td></tr><tr><td>Length normalization (<code>2</code>)</td><td>When you want to strongly normalize by document length</td><td>Diverse document lengths where content density matters more than total matches</td></tr><tr><td>Harmonic mean distance (ts_rank_cd only) (<code>4</code>)</td><td>When you want to consider term proximity in ranking</td><td>Phrases or closely related terms are important in your search</td></tr><tr><td>Unique word normalization (<code>8</code>)</td><td>When you want to favor documents with more diverse vocabulary</td><td>Rewarding content richness over repetition</td></tr><tr><td>Log unique word normalization (<code>16</code>)</td><td>When you want to mildly reduce the impact of vocabulary diversity</td><td>Balancing between vocabulary richness and raw term frequency</td></tr><tr><td>Scaling to 0-1 range (<code>32</code>)</td><td>When you need a consistent score range for all queries</td><td>Displaying scores as percentages or progress bars</td></tr></tbody></table>
<p>Combine options using bitwise OR (<code>|</code>) for more nuanced normalization. For example:</p>
<p>Use <code>2|4</code> to normalize by both length and term proximity
Use <code>1|8</code> for a balanced approach considering both document length and vocabulary diversity</p>
<p>I’ve found good results with setting <code>0</code> (no normalization) for the title and <code>1</code> (logarithmic doc length) for the body. Again, I encourage you to experiment with different options to find the best fit for your use case.</p>
<h2 id="reranking-with-cross-encoder"><a data-heading-link="" href="#reranking-with-cross-encoder">Reranking with cross-encoder</a></h2>
<p>Many retrieval systems are two-step based. This means you’ll use a bi-directional encoder to retrieve the initial N results, then a cross-encoder to rank these against the search query.</p>
<p>The bi-encoder is fast, making it great for searching a multitude of documents. The cross-encoder is slower but more performant, making it great for reranking retrieved results.</p>
<p>Cross-encoders differ from bi-encoders in that they process the query and document together, allowing for more nuanced understanding of the relationship between them. This results in better ranking accuracy but at the cost of computation time and scalability. Here’s a simple diagram to illustrate the process:</p>
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 785.375 215" style="max-width: 785.375px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-1"><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" id="mermaid-1_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" id="mermaid-1_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" id="mermaid-1_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" id="mermaid-1_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" id="mermaid-1_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" id="mermaid-1_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g><g></g><g><path marker-end="url(#mermaid-1_flowchart-pointEnd)" style="fill:none;" id="L-FTS-D1-0" d="M91.031,16.5L102.833,16.5C114.635,16.5,138.24,16.5,153.325,16.5C168.41,16.5,174.977,16.5,178.26,16.5L181.544,16.5"></path><path marker-end="url(#mermaid-1_flowchart-pointEnd)" style="fill:none;" id="L-SS-D2-0" d="M136.844,99.5L141.01,99.5C145.177,99.5,153.51,99.5,160.96,99.5C168.41,99.5,174.977,99.5,178.26,99.5L181.544,99.5"></path><path marker-end="url(#mermaid-1_flowchart-pointEnd)" style="fill:none;" id="L-Fuzzy-D3-0" d="M97.258,182.5L108.022,182.5C118.786,182.5,140.315,182.5,154.363,182.5C168.41,182.5,174.977,182.5,178.26,182.5L181.544,182.5"></path><path marker-end="url(#mermaid-1_flowchart-pointEnd)" style="fill:none;" id="L-D1-CE-0" d="M280.109,16.5L284.276,16.5C288.443,16.5,296.776,16.5,320.655,27.163C344.534,37.826,383.958,59.152,403.67,69.815L423.383,80.478"></path><path marker-end="url(#mermaid-1_flowchart-pointEnd)" style="fill:none;" id="L-D2-CE-0" d="M280.109,99.5L284.276,99.5C288.443,99.5,296.776,99.5,304.226,99.5C311.676,99.5,318.243,99.5,321.526,99.5L324.809,99.5"></path><path marker-end="url(#mermaid-1_flowchart-pointEnd)" style="fill:none;" id="L-D3-CE-0" d="M280.109,182.5L284.276,182.5C288.443,182.5,296.776,182.5,320.655,171.837C344.534,161.174,383.958,139.848,403.67,129.185L423.383,118.522"></path><path marker-end="url(#mermaid-1_flowchart-pointEnd)" style="fill:none;" id="L-CE-FD-0" d="M586.984,99.5L591.151,99.5C595.318,99.5,603.651,99.5,611.101,99.5C618.551,99.5,625.118,99.5,628.401,99.5L631.684,99.5"></path></g><g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g></g><g><g transform="translate(68.421875, 16.5)" data-id="FTS" data-node="true" id="flowchart-FTS-38"><rect height="33" width="45.21875" y="-16.5" x="-22.609375" ry="0" rx="0" style=""></rect><g transform="translate(-15.109375, -9)" style=""><rect></rect><foreignObject height="18" width="30.21875"><p><span>FTS</span></p></foreignObject></g></g><g transform="translate(233.4765625, 16.5)" data-id="D1" data-node="true" id="flowchart-D1-39"><rect height="33" width="93.265625" y="-16.5" x="-46.6328125" ry="0" rx="0" style=""></rect><g transform="translate(-39.1328125, -9)" style=""><rect></rect><foreignObject height="18" width="78.265625"><p><span>documents</span></p></foreignObject></g></g><g transform="translate(68.421875, 99.5)" data-id="SS" data-node="true" id="flowchart-SS-40"><rect height="33" width="136.84375" y="-16.5" x="-68.421875" ry="0" rx="0" style=""></rect><g transform="translate(-60.921875, -9)" style=""><rect></rect><foreignObject height="18" width="121.84375"><p><span>Semantic Search</span></p></foreignObject></g></g><g transform="translate(233.4765625, 99.5)" data-id="D2" data-node="true" id="flowchart-D2-41"><rect height="33" width="93.265625" y="-16.5" x="-46.6328125" ry="0" rx="0" style=""></rect><g transform="translate(-39.1328125, -9)" style=""><rect></rect><foreignObject height="18" width="78.265625"><p><span>documents</span></p></foreignObject></g></g><g transform="translate(68.421875, 182.5)" data-id="Fuzzy" data-node="true" id="flowchart-Fuzzy-42"><rect height="33" width="57.671875" y="-16.5" x="-28.8359375" ry="0" rx="0" style=""></rect><g transform="translate(-21.3359375, -9)" style=""><rect></rect><foreignObject height="18" width="42.671875"><p><span>Fuzzy</span></p></foreignObject></g></g><g transform="translate(233.4765625, 182.5)" data-id="D3" data-node="true" id="flowchart-D3-43"><rect height="33" width="93.265625" y="-16.5" x="-46.6328125" ry="0" rx="0" style=""></rect><g transform="translate(-39.1328125, -9)" style=""><rect></rect><foreignObject height="18" width="78.265625"><p><span>documents</span></p></foreignObject></g></g><g transform="translate(458.546875, 99.5)" data-id="CE" data-node="true" id="flowchart-CE-45"><rect height="33" width="256.875" y="-16.5" x="-128.4375" ry="0" rx="0" style=""></rect><g transform="translate(-120.9375, -9)" style=""><rect></rect><foreignObject height="18" width="241.875"><p><span>Rerank with Cross-encoder model</span></p></foreignObject></g></g><g transform="translate(703.1796875, 99.5)" data-id="FD" data-node="true" id="flowchart-FD-51"><rect height="33" width="132.390625" y="-16.5" x="-66.1953125" ry="0" rx="0" style=""></rect><g transform="translate(-58.6953125, -9)" style=""><rect></rect><foreignObject height="18" width="117.390625"><p><span>Final documents</span></p></foreignObject></g></g></g></g></g></svg>
<p>There are a bunch of different tools out there to do this. One of the best is <a href="https://cohere.com/blog/rerank-3" rel="nofollow" target="_blank">Cohere’s Rerank<span><img src="https://www.google.com/s2/favicons?domain=cohere.com&amp;sz=64"></span></a>. Another way is to <a href="https://cookbook.openai.com/examples/search_reranking_with_cross-encoders" rel="nofollow" target="_blank">build your own with GPT from OpenAI<span><img src="https://www.google.com/s2/favicons?domain=cookbook.openai.com&amp;sz=64"></span></a>.</p>
<h2 id="boosting-results-to-improve-ux"><a data-heading-link="" href="#boosting-results-to-improve-ux">Boosting results to improve UX</a></h2>
<p>To provide an even better user experience, you might want to boost certain columns depending on your use case. For example, in a knowledge search, you might want to boost search results that the user has interacted with. You also might want to boost recently changed results.</p>
<p>Boosting recent results or user-specific results can improve UX because it personalizes the search experience. Recent results are often more relevant, especially for time-sensitive information. User-specific boosts can surface content the user has previously found useful, making their search more efficient.</p>
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 753.1875 232" style="max-width: 753.1875px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-2"><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" id="mermaid-2_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" id="mermaid-2_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" id="mermaid-2_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" id="mermaid-2_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" id="mermaid-2_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" id="mermaid-2_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g><g><g id="subGraph1"><rect height="83" width="737.1875" y="133" x="0" ry="0" rx="0" style=""></rect><g transform="translate(318.34375, 133)"><foreignObject height="18" width="100.5"><p><span>After Boosting</span></p></foreignObject></g></g><g id="subGraph0"><rect height="83" width="737.1875" y="0" x="0" ry="0" rx="0" style=""></rect><g transform="translate(311.6640625, 0)"><foreignObject height="18" width="113.859375"><p><span>Before Boosting</span></p></foreignObject></g></g></g><g><path marker-end="url(#mermaid-2_flowchart-pointEnd)" style="fill:none;" id="L-B1-A2-0" d="M225.328,58L225.328,62.167C225.328,66.333,225.328,74.667,225.328,83C225.328,91.333,225.328,99.667,225.328,108C225.328,116.333,225.328,124.667,225.328,132.117C225.328,139.567,225.328,146.133,225.328,149.417L225.328,152.7"></path><path marker-end="url(#mermaid-2_flowchart-pointEnd)" style="fill:none;" id="L-B2-A4-0" d="M511.414,58L511.414,62.167C511.414,66.333,511.414,74.667,511.414,83C511.414,91.333,511.414,99.667,511.414,108C511.414,116.333,511.414,124.667,511.414,132.117C511.414,139.567,511.414,146.133,511.414,149.417L511.414,152.7"></path><path marker-end="url(#mermaid-2_flowchart-pointEnd)" style="fill:none;" id="L-B3-A1-0" d="M82.07,58L82.07,62.167C82.07,66.333,82.07,74.667,82.07,83C82.07,91.333,82.07,99.667,82.07,108C82.07,116.333,82.07,124.667,82.07,132.117C82.07,139.567,82.07,146.133,82.07,149.417L82.07,152.7"></path><path marker-end="url(#mermaid-2_flowchart-pointEnd)" style="fill:none;" id="L-B4-A5-0" d="M655.117,58L655.117,62.167C655.117,66.333,655.117,74.667,655.117,83C655.117,91.333,655.117,99.667,655.117,108C655.117,116.333,655.117,124.667,655.117,132.117C655.117,139.567,655.117,146.133,655.117,149.417L655.117,152.7"></path><path marker-end="url(#mermaid-2_flowchart-pointEnd)" style="fill:none;" id="L-B5-A3-0" d="M368.148,58L368.148,62.167C368.148,66.333,368.148,74.667,368.148,83C368.148,91.333,368.148,99.667,368.148,108C368.148,116.333,368.148,124.667,368.148,132.117C368.148,139.567,368.148,146.133,368.148,149.417L368.148,152.7"></path></g><g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject height="0" width="0"></foreignObject></g></g></g><g><g transform="translate(82.0703125, 174.5)" data-id="A1" data-node="true" id="flowchart-A1-57"><rect height="33" width="94.140625" y="-16.5" x="-47.0703125" ry="0" rx="0" style="fill:#ff9999;stroke:#333;stroke-width:2px;"></rect><g transform="translate(-39.5703125, -9)" style=""><rect></rect><foreignObject height="18" width="79.140625"><p><span>1. Result C</span></p></foreignObject></g></g><g transform="translate(225.328125, 174.5)" data-id="A2" data-node="true" id="flowchart-A2-58"><rect height="33" width="92.375" y="-16.5" x="-46.1875" ry="0" rx="0" style=""></rect><g transform="translate(-38.6875, -9)" style=""><rect></rect><foreignObject height="18" width="77.375"><p><span>2. Result A</span></p></foreignObject></g></g><g transform="translate(368.1484375, 174.5)" data-id="A3" data-node="true" id="flowchart-A3-59"><rect height="33" width="93.265625" y="-16.5" x="-46.6328125" ry="0" rx="0" style="fill:#99ff99;stroke:#333;stroke-width:2px;"></rect><g transform="translate(-39.1328125, -9)" style=""><rect></rect><foreignObject height="18" width="78.265625"><p><span>3. Result E</span></p></foreignObject></g></g><g transform="translate(511.4140625, 174.5)" data-id="A4" data-node="true" id="flowchart-A4-60"><rect height="33" width="93.265625" y="-16.5" x="-46.6328125" ry="0" rx="0" style=""></rect><g transform="translate(-39.1328125, -9)" style=""><rect></rect><foreignObject height="18" width="78.265625"><p><span>4. Result B</span></p></foreignObject></g></g><g transform="translate(655.1171875, 174.5)" data-id="A5" data-node="true" id="flowchart-A5-61"><rect height="33" width="94.140625" y="-16.5" x="-47.0703125" ry="0" rx="0" style=""></rect><g transform="translate(-39.5703125, -9)" style=""><rect></rect><foreignObject height="18" width="79.140625"><p><span>5. Result D</span></p></foreignObject></g></g><g transform="translate(225.328125, 41.5)" data-id="B1" data-node="true" id="flowchart-B1-52"><rect height="33" width="92.375" y="-16.5" x="-46.1875" ry="0" rx="0" style=""></rect><g transform="translate(-38.6875, -9)" style=""><rect></rect><foreignObject height="18" width="77.375"><p><span>1. Result A</span></p></foreignObject></g></g><g transform="translate(511.4140625, 41.5)" data-id="B2" data-node="true" id="flowchart-B2-53"><rect height="33" width="93.265625" y="-16.5" x="-46.6328125" ry="0" rx="0" style=""></rect><g transform="translate(-39.1328125, -9)" style=""><rect></rect><foreignObject height="18" width="78.265625"><p><span>2. Result B</span></p></foreignObject></g></g><g transform="translate(82.0703125, 41.5)" data-id="B3" data-node="true" id="flowchart-B3-54"><rect height="33" width="94.140625" y="-16.5" x="-47.0703125" ry="0" rx="0" style="fill:#ff9999;stroke:#333;stroke-width:2px;"></rect><g transform="translate(-39.5703125, -9)" style=""><rect></rect><foreignObject height="18" width="79.140625"><p><span>3. Result C</span></p></foreignObject></g></g><g transform="translate(655.1171875, 41.5)" data-id="B4" data-node="true" id="flowchart-B4-55"><rect height="33" width="94.140625" y="-16.5" x="-47.0703125" ry="0" rx="0" style=""></rect><g transform="translate(-39.5703125, -9)" style=""><rect></rect><foreignObject height="18" width="79.140625"><p><span>4. Result D</span></p></foreignObject></g></g><g transform="translate(368.1484375, 41.5)" data-id="B5" data-node="true" id="flowchart-B5-56"><rect height="33" width="93.265625" y="-16.5" x="-46.6328125" ry="0" rx="0" style="fill:#99ff99;stroke:#333;stroke-width:2px;"></rect><g transform="translate(-39.1328125, -9)" style=""><rect></rect><foreignObject height="18" width="78.265625"><p><span>5. Result E</span></p></foreignObject></g></g></g></g></g></svg>
<p>Assuming we have <code>updated_at</code> and <code>updated_by</code> columns in our documents table, we could implement it like this:</p>
<pre tabindex="0" data-language="sql"><code><span><span>select</span></span>
<span><span>    ...</span></span>
<span><span>    -- Recency boost</span></span>
<span><span>    (</span><span>1</span><span> +</span><span> $recency_boost </span><span>*</span><span> (</span><span>1</span><span> -</span><span> extract(epoch </span><span>from</span><span> (</span><span>now</span><span>() </span><span>-</span><span> documents</span><span>.</span><span>updated_at</span><span>)) </span><span>/</span><span> extract(epoch </span><span>from</span><span> (</span><span>now</span><span>() </span><span>-</span><span> '2020-01-01'</span><span>::</span><span>timestamp</span><span>)))) </span><span>*</span></span>
<span><span>    -- User boost</span></span>
<span><span>    case</span><span> when</span><span> documents</span><span>.</span><span>updated_by</span><span> =</span><span> $current_user_id </span><span>then</span><span> (</span><span>1</span><span> +</span><span> $user_boost) </span><span>else</span><span> 1</span><span> end</span></span>
<span><span>    as</span><span> combined_rank,</span></span>
<span><span>    json_build_object(</span></span>
<span><span>        ...</span></span>
<span><span>        'recency_boost'</span><span>, (</span><span>1</span><span> -</span><span> extract(epoch </span><span>from</span><span> (</span><span>now</span><span>() </span><span>-</span><span> documents</span><span>.</span><span>updated_at</span><span>)) </span><span>/</span><span> extract(epoch </span><span>from</span><span> (</span><span>now</span><span>() </span><span>-</span><span> '2020-01-01'</span><span>::</span><span>timestamp</span><span>))),</span></span>
<span><span>        'user_boost'</span><span>, </span><span>case</span><span> when</span><span> documents</span><span>.</span><span>updated_by</span><span> =</span><span> $current_user_id </span><span>then</span><span> $user_boost </span><span>else</span><span> 0</span><span> end</span></span>
<span><span>    ) </span><span>as</span><span> debug_rankings</span></span>
<span></span></code></pre>
<h2 id="when-should-i-look-for-alternative-solutions"><a data-heading-link="" href="#when-should-i-look-for-alternative-solutions">When should I look for alternative solutions?</a></h2>
<p>While Postgres is a solid choice for many search scenarios, it’s not without limitations. The lack of advanced algorithms like BM25 can be felt when dealing with diverse document lengths. <del>Postgres’s reliance on TF-IDF for full-text search can struggle with very long documents and rare terms in large collections.</del></p>
<p><strong>Edit:</strong> Postgres actually doesn’t use TF-IDF for full-text search. Its built-in ranking functions (ts_rank and ts_rank_cd) primarily consider term frequency within individual documents and term proximity, but don’t take into account corpus-wide statistics. This approach can still struggle with very long documents and doesn’t inherently account for the rarity of terms across the entire collection.</p>
<p>Make sure to measure before you look into alternative solutions. Chances are, it might not be worth it.</p>
<h2 id="bonus-adding-bm25"><a data-heading-link="" href="#bonus-adding-bm25">Bonus: adding BM25</a></h2>
<p>Unlike Postgres’s FTS, BM25 considers corpus-wide statistics and document length normalization. Here are some of the reaons you might want to use it:</p>
<ul>
<li>Better handling of document length variations</li>
<li>Improved relevance for rare terms</li>
<li>Accounts for diminishing returns of term frequency</li>
<li>Industry standard in information retrieval</li>
</ul>
<p>And here are some extensions you can install go get BM25 going:</p>

<h2 id="conclusion"><a data-heading-link="" href="#conclusion">Conclusion</a></h2>
<p>We’ve covered a lot of ground in this post, from basic full-text search to advanced techniques like fuzzy matching, semantic search, and result boosting. By leveraging Postgres’s powerful features, you can create a robust and flexible search engine tailored to your specific needs.</p>
<p>Postgres might not be the first tool that comes to mind for search, but it gets you really far.</p>
<p>Remember, the key to a great search experience is continuous iteration and fine-tuning. Use the debugging techniques we discussed to understand how your search is performing, and don’t be afraid to adjust weights and parameters based on user feedback and behavior.</p>
<p>Let me know if I missed anything! :)</p>  </div></div>]]></description>
        </item>
    </channel>
</rss>