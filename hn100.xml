<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Mon, 14 Aug 2023 18:00:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Backward Compatibility, Go 1.21, and Go 2 (142 pts)]]></title>
            <link>https://go.dev/blog/compat</link>
            <guid>37122871</guid>
            <pubDate>Mon, 14 Aug 2023 16:22:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://go.dev/blog/compat">https://go.dev/blog/compat</a>, See on <a href="https://news.ycombinator.com/item?id=37122871">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-slug="/blog/compat">
    
    <h2><a href="https://go.dev/blog/">The Go Blog</a></h2>
    

    
      
      
      
      <p>Go 1.21 includes new features to improve compatibility.
Before you stop reading, I know that sounds boring.
But boring can be good.
Back in the early days of Go 1,
Go was exciting and full of surprises.
Each week we cut a new snapshot release
and everyone got to roll the dice
to see what we’d changed
and how their programs would break.
We released Go 1 and its compatibility promise
to remove the excitement,
so that new releases of Go would be boring.</p>
<p>Boring is good.
Boring is stable.
Boring means being able to focus on your work,
not on what’s different about Go.
This post is about the important work we shipped in Go 1.21
to keep Go boring.</p>
<h2 id="go1">Go 1 Compatibility</h2>
<p>We’ve been focused on compatibility for over a decade.
For Go 1, back in 2012, we published a document titled
“<a href="https://go.dev/doc/go1compat">Go 1 and the Future of Go Programs</a>”
that lays out a very clear intention:</p>
<blockquote>
<p>It is intended that programs written to the Go 1 specification
will continue to compile and run correctly, unchanged,
over the lifetime of that specification. …
Go programs that work today should continue to work
even as future releases of Go 1 arise.</p>
</blockquote>
<p>There are a few qualifications to that.
First, compatibility means source compatibility.
When you update to a new version of Go,
you do have to recompile your code.
Second, we can add new APIs,
but not in a way that breaks existing code.</p>
<p>The end of the document warns,
“[It] is impossible to guarantee that no future change will break any program.”
Then it lays out a number of reasons why programs might still break.</p>
<p>For example, it makes sense that if your program depends on a buggy behavior
and we fix the bug, your program will break.
But we try very hard to break as little as possible and keep Go boring.
There are two main approaches we’ve used so far: API checking and testing.</p>
<h2 id="api">API Checking</h2>
<p>Perhaps the clearest fact about compatibility
is that we can’t take away API, or else programs using it will break.</p>
<p>For example, here’s a program someone has written
that we can’t break:</p>
<pre><code>package main

import "os"

func main() {
    os.Stdout.WriteString("hello, world\n")
}
</code></pre>
<p>We can’t remove the package <code>os</code>;
we can’t remove the global variable <code>os.Stdout</code>, which is an <code>*os.File</code>;
and we also can’t remove the <code>os.File</code> method <code>WriteString</code>.
It should be clear that removing any of those would
break this program.</p>
<p>It’s perhaps less clear that we can’t change the type of <code>os.Stdout</code> at all.
Suppose we want to make it an interface with the same methods.
The program we just saw wouldn’t break, but this one would:</p>
<pre><code>package main

import "os"

func main() {
    greet(os.Stdout)
}

func greet(f *os.File) {
    f.WriteString(“hello, world\n”)
}
</code></pre>
<p>This program passes <code>os.Stdout</code> to a function named <code>greet</code>
that requires an argument of type <code>*os.File</code>.
So changing <code>os.Stdout</code> to an interface will break this program.</p>
<p>To help us as we develop Go, we use a tool that maintains
a list of each package’s exported API
in files separate from the actual packages:</p>
<pre><code>% cat go/api/go1.21.txt
pkg bytes, func ContainsFunc([]uint8, func(int32) bool) bool #54386
pkg bytes, method (*Buffer) AvailableBuffer() []uint8 #53685
pkg bytes, method (*Buffer) Available() int #53685
pkg cmp, func Compare[$0 Ordered]($0, $0) int #59488
pkg cmp, func Less[$0 Ordered]($0, $0) bool #59488
pkg cmp, type Ordered interface {} #59488
pkg context, func AfterFunc(Context, func()) func() bool #57928
pkg context, func WithDeadlineCause(Context, time.Time, error) (Context, CancelFunc) #56661
pkg context, func WithoutCancel(Context) Context #40221
pkg context, func WithTimeoutCause(Context, time.Duration, error) (Context, CancelFunc) #56661
</code></pre>
<p>One of our standard tests checks that the actual package APIs match those files.
If we add new API to a package, the test breaks unless we add it to the API files.
And if we change or remove API, the test breaks too. This helps us avoid mistakes.
However, a tool like this only finds a certain class of problems, namely API changes and removals.
There are other ways to make incompatible changes to Go.</p>
<p>That leads us to the second approach we use to keep Go boring: testing.</p>
<h2 id="testing">Testing</h2>
<p>The most effective way to find unexpected incompatibilities
is to run existing tests against the development version of the next Go release.
We test the development version of Go against
all of Google’s internal Go code on a rolling basis.
When tests are passing, we install that commit as
Google’s production Go toolchain.</p>
<p>If a change breaks tests inside Google,
we assume it will also break tests outside Google,
and we look for ways to reduce the impact.
Most of the time, we roll back the change entirely
or find a way to rewrite it so that it doesn’t break any programs.
Sometimes, however, we conclude that the change is
important to make and “compatible” even though it does
break some programs.
In that case, we still work to reduce the impact as much as possible,
and then we document the potential problem in the release notes.</p>
<p>Here are two examples of that kind of subtle compatibility problems
we found by testing Go inside Google but still included in Go 1.1.</p>
<h2 id="struct">Struct Literals and New Fields</h2>
<p>Here is some code that runs fine in Go 1:</p>
<pre><code>package main

import "net"

var myAddr = &amp;net.TCPAddr{
    net.IPv4(18, 26, 4, 9),
    80,
}
</code></pre>
<p>Package <code>main</code> declares a global variable <code>myAddr</code>,
which is a composite literal of type <code>net.TCPAddr</code>.
In Go 1, package <code>net</code> defines the type <code>TCPAddr</code>
as a struct with two fields, <code>IP</code> and <code>Port</code>.
Those match the fields in the composite literal,
so the program compiles.</p>
<p>In Go 1.1, the program stopped compiling, with a compiler error
that said “too few initializers in struct literal.”
The problem is that we added a third field, <code>Zone</code>, to <code>net.TCPAddr</code>,
and this program is missing the value for that third field.
The fix is to rewrite the program using tagged literals,
so that it builds in both versions of Go:</p>
<pre><code>var myAddr = &amp;net.TCPAddr{
    IP:   net.IPv4(18, 26, 4, 9),
    Port: 80,
}
</code></pre>
<p>Since this literal doesn’t specify a value for <code>Zone</code>, it will use the
zero value (an empty string in this case).</p>
<p>This requirement to use composite literals for standard library
structs is explicitly called out in the <a href="https://go.dev/doc/go1compat">compatibility document</a>,
and <code>go vet</code> reports literals that need tags
to ensure compatibility with later versions of Go.
This problem was new enough in Go 1.1
to merit a short comment in the release notes.
Nowadays we just mention the new field.</p>
<h2 id="precision">Time Precision</h2>
<p>The second problem we found while testing Go 1.1
had nothing to do with APIs at all.
It had to do with time.</p>
<p>Shortly after Go 1 was released, someone pointed
out that <a href="https://go.dev/pkg/time/#Now"><code>time.Now</code></a>
returned times with microsecond precision,
but with some extra code,
it could return times with nanosecond precision instead.
That sounds good, right?
More precision is better.
So we made that change.</p>
<p>That broke a handful of tests inside Google that
were schematically like this one:</p>
<pre><code>func TestSaveTime(t *testing.T) {
    t1 := time.Now()
    save(t1)
    if t2 := load(); t2 != t1 {
        t.Fatalf("load() = %v, want %v", t1, t2)
    }
}
</code></pre>
<p>This code calls <code>time.Now</code>
and then round-trips the result
through <code>save</code> and <code>load</code>
and expects to get the same time back.
If <code>save</code> and <code>load</code> use a representation
that only stores microsecond precision,
that will work fine in Go 1 but fail in Go 1.1.</p>
<p>To help fix tests like this,
we added <a href="https://go.dev/pkg/time/#Time.Round"><code>Round</code></a> and
<a href="https://go.dev/pkg/time/#Time.Truncate"><code>Truncate</code></a> methods
to discard unwanted precision,
and in the release notes,
we documented the possible problem
and the new methods to help fix it.</p>
<p>These examples show how
testing finds different kinds of incompatibility
than the API checks do.
Of course, testing is not a complete guarantee
of compatibility either,
but it’s more complete than just API checks.
There are many examples of problems we’ve found
while testing that we decided did break the compatibility
rules and rolled back before the release.
The time precision change is an interesting example
of something that broke programs but that we released
anyway.
We made the change because the improved precision
was better and was allowed within the documented behavior of the function.</p>
<p>This example shows that sometimes, despite significant effort
and attention, there are times when changing Go means
breaking Go programs.
The changes are, strictly speaking, “compatible” in the sense
of the Go 1 document, but they still break programs.
Most of these compatibility issues can be placed
in one of three categories:
output changes,
input changes,
and protocol changes.</p>
<h2 id="output">Output Changes</h2>
<p>An output change happens when a function gives a different output
than it used to, but the new output is just as correct as, or even more correct than,
the old output.
If existing code is written to expect only the old output, it will break.
We just saw an example of this, with <code>time.Now</code> adding nanosecond precision.</p>
<p><strong>Sort.</strong> Another example happened in Go 1.6,
when we changed the implementation of sort
to run about 10% faster.
Here’s an example program
that sorts a list of colors by length of name:</p>
<pre><code>colors := strings.Fields(
    `black white red orange yellow green blue indigo violet`)
sort.Sort(ByLen(colors))
fmt.Println(colors)

Go 1.5:  [red blue green white black yellow orange indigo violet]
Go 1.6:  [red blue white green black orange yellow indigo violet]
</code></pre>
<p>Changing sort algorithms often changes
how equal elements are ordered,
and that happened here.
Go 1.5 returned green, white, black, in that order.
Go 1.6 returned white, green, black.</p>
<p>Sort is clearly allowed to return equal results in any order it likes,
and this change made it 10% faster, which is great.
But programs that expect a specific output will break.
This is a good example of why compatibility is so hard.
We don’t want to break programs,
but we also don’t want to be locked in
to undocumented implementation details.</p>
<p><strong>Compress/flate.</strong> As another example, in Go 1.8 we improved
<code>compress/flate</code> to produce smaller outputs,
with roughly the same CPU and memory overheads.
That sounds like a win-win, but it broke a project inside Google
that needed reproducible archive builds:
now they couldn’t reproduce their old archives.
They forked <code>compress/flate</code> and <code>compress/gzip</code>
to keep a copy of the old algorithm.</p>
<p>We do a similar thing with the Go compiler,
using a fork of the <code>sort</code> package (<a href="https://go.googlesource.com/go/+/go1.21.0/src/cmd/dist/buildtool.go#22" rel="noreferrer" target="_blank">and others</a>)
so that the compiler produces the same results
even when it is built using earlier versions of Go.</p>
<p>For output change incompatibilities like these,
the best answer is to write programs and tests
that accept any valid output,
and to use these kinds of breakages
as an opportunity to change your testing strategy,
not just update the expected answers.
If you need truly reproducible outputs,
the next best answer is to fork the code
to insulate yourself from changes,
but remember that
you’re also insulating yourself from bug fixes.</p>
<h2 id="input">Input Changes</h2>
<p>An input change happens when a function changes which inputs it accepts
or how it processes them.</p>
<p><strong>ParseInt.</strong> For example, Go 1.13 added support for
underscores in large numbers for readability.
Along with the language change,
we made <code>strconv.ParseInt</code> accept the new syntax.
This change didn’t break anything inside Google,
but much later we heard from an external user
whose code did break.
Their program used numbers separated by underscores
as a data format.
It tried <code>ParseInt</code> first and only fell back to checking for underscores if <code>ParseInt</code> failed.
When <code>ParseInt</code> stopped failing, the underscore-handling code stopped running.</p>
<p><strong>ParseIP.</strong> As another example, Go’s <code>net.ParseIP</code>,
followed the examples in early IP RFCs,
which often showed decimal IP addresses with leading zeros.
It read the IP address 18.032.4.011 address as 18.32.4.11, just with a few extra zeros.
We found out much later that BSD-derived C libraries
interpret leading zeros in IP addresses as starting an octal number:
in those libraries, 18.032.4.011 means 18.26.4.9!</p>
<p>This was a serious mismatch
between Go and the rest of the world,
but changing the meaning of leading zeros
from one Go release to the next
would be a serious mismatch too.
It would be a huge incompatibility.
In the end, we decided to change <code>net.ParseIP</code> in Go 1.17
to reject leading zeros entirely.
This stricter parsing ensures that when Go and C
both parse an IP address successfully,
or when old and new Go versions do,
they all agree about what it means.</p>
<p>This change didn’t break anything inside Google,
but the Kubernetes team was concerned about
saved configurations that might have parsed before
but would stop parsing with Go 1.17.
Addresses with leading zeros
probably should be removed from those configs,
since Go interprets them differently from
essentially every other language,
but that should happen on Kubernetes’s timeline, not Go’s.
To avoid the semantic change,
Kubernetes started using its own forked copy
of the original <code>net.ParseIP</code>.</p>
<p>The best response to input changes is to process user input
by first validating the syntax you want to accept
before parsing the values,
but sometimes you need to fork the code instead.</p>
<h2 id="protocol">Protocol Changes</h2>
<p>The final common kind of incompatibility is protocol changes.
A protocol change is a change made to a package
that ends up externally visible
in the protocols a program uses
to communicate with the external world.
Almost any change can become externally visible
in certain programs, as we saw with <code>ParseInt</code> and <code>ParseIP</code>,
but protocol changes are externally visible
in essentially all programs.</p>
<p><strong>HTTP/2.</strong> A clear example of a protocol change is when
Go 1.6 added automatic support for HTTP/2.
Suppose a Go 1.5 client is connecting to an HTTP/2-capable
server over a network with middleboxes that happen to
break HTTP/2.
Since Go 1.5 only uses HTTP/1.1, the program works fine.
But then updating to Go 1.6 breaks the program, because Go 1.6
starts using HTTP/2, and in this context, HTTP/2 doesn’t work.</p>
<p>Go aims to support modern protocols by default,
but this example shows that enabling HTTP/2 can break programs
through no fault of their own (nor any fault of Go’s).
Developers in this situation could go back to using Go 1.5,
but that’s not very satisfying.
Instead, Go 1.6 documented the change in the release notes
and made it straightforward to disable HTTP/2.</p>
<p>In fact, <a href="https://go.dev/doc/go1.6#http2">Go 1.6 documented two ways</a> to disable HTTP/2:
configure the <code>TLSNextProto</code> field explicitly using the package API,
or set the GODEBUG environment variable:</p>
<pre><code>GODEBUG=http2client=0 ./myprog
GODEBUG=http2server=0 ./myprog
GODEBUG=http2client=0,http2server=0 ./myprog
</code></pre>
<p>As we’ll see later, Go 1.21 generalizes this GODEBUG mechanism
to make it a standard for all potentially breaking changes.</p>
<p><strong>SHA1.</strong> Here’s a subtler example of a protocol change.
No one should be using SHA1-based certificates for HTTPS anymore.
Certificate authorities stopped issuing them in 2015,
and all the major browsers stopped accepting them in 2017.
In early 2020, Go 1.18 disabled support for them by default,
with a GODEBUG setting to override that change.
We also announced our intent to remove the GODEBUG setting in Go 1.19.</p>
<p>The Kubernetes team let us know that
some installations still use private SHA1 certificates.
Putting aside the security questions,
it’s not Kubernetes’s place to force these enterprises to
upgrade their certificate infrastructure,
and it would be extremely painful to fork <code>crypto/tls</code>
and <code>net/http</code> to keep SHA1 support.
Instead, we agreed to keep the override in place longer than we had planned,
to create more time for an orderly transition.
After all, we want to break as few programs as possible.</p>
<h2 id="expanded-godebug-support-in-go-121">Expanded GODEBUG Support in Go 1.21</h2>
<p>To improve backwards compatibility even in these subtle cases
we’ve been examining, Go 1.21 expands and formalizes the use of GODEBUG.</p>
<p>To begin with, for any change that is permitted by Go 1 compatibility but
still might break existing programs,
we do all the work we just saw to understand potential
compatibility problems, and we engineer the change to keep as many existing
programs working as possible.
For the remaining programs, the new approach is:</p>
<ol>
<li>
<p>We will define a new GODEBUG setting that allows
individual programs to opt out of the new behavior.
A GODEBUG setting may not be added if doing so is infeasible, but that should be extremely rare.</p>
</li>
<li>
<p>GODEBUG settings added for compatibility will be maintained for a minimum
of two years (four Go releases). Some, such as <code>http2client</code> and <code>http2server</code>,
will be maintained much longer, even indefinitely.</p>
</li>
<li>
<p>When possible, each GODEBUG setting has an associated
<a href="https://go.dev/pkg/runtime/metrics/"><code>runtime/metrics</code></a> counter
named <code>/godebug/non-default-behavior/&lt;name&gt;:events</code>
that counts the number of times a particular program’s behavior
has changed based on a non-default value for that setting.
For example, when <code>GODEBUG=http2client=0</code> is set,
<code>/godebug/non-default-behavior/http2client:events</code> counts the
number of HTTP transports that the program has configured without HTTP/2 support.</p>
</li>
<li>
<p>A program’s GODEBUG settings are configured to match the Go version
listed in the main package’s <code>go.mod</code> file.
If your program’s <code>go.mod</code> file says <code>go 1.20</code> and you update to
a Go 1.21 toolchain, any GODEBUG-controlled behaviors changed in
Go 1.21 will retain their old Go 1.20 behavior until you change the
<code>go.mod</code> to say <code>go 1.21</code>.</p>
</li>
<li>
<p>A program can change individual GODEBUG settings by using <code>//go:debug</code> lines
in package <code>main</code>.</p>
</li>
<li>
<p>All GODEBUG settings are documented in a <a href="https://go.dev/doc/godebug#history">single, central list</a>
for easy reference.</p>
</li>
</ol>
<p>This approach means that each new version of Go should be the best possible
implementation of older versions of Go, even preserving behaviors that were
changed in compatible-but-breaking ways in later releases when compiling old code.</p>
<p>For example, in Go 1.21, <code>panic(nil)</code> now causes a (non-nil) runtime panic,
so that the result of <a href="https://go.dev/ref/spec/#Handling_panics"><code>recover</code></a> now reliably
reports whether the current goroutine is panicking.
This new behavior is controlled by a GODEBUG setting and therefore dependent
on the main package’s <code>go.mod</code>’s <code>go</code> line: if it says <code>go 1.20</code> or earlier,
<code>panic(nil)</code> is still allowed.
If it says <code>go 1.21</code> or later, <code>panic(nil)</code> turns into a panic with a <code>runtime.PanicNilError</code>.
And the version-based default can be overridden explicitly by adding a line like this to package main:</p>
<pre><code>//go:debug panicnil=1
</code></pre>
<p>This combination of features means that programs can update to newer toolchains
while preserving the behaviors of the earlier toolchains they used,
can apply finer-grained control over specific settings as needed,
and can use production monitoring to understand which jobs make
use of these non-default behaviors in practice.
Combined, those should make rolling out new toolchains even
smoother than in the past.</p>
<p>See “<a href="https://go.dev/doc/godebug">Go, Backwards Compatibility, and GODEBUG</a>” for more details.</p>
<h2 id="go2">An Update on Go 2</h2>
<p>In the quoted text from “<a href="https://go.dev/doc/go1compat">Go 1 and the Future of Go Programs</a>”
at the top of this post, the ellipsis hid the following qualifier:</p>
<blockquote>
<p>At some indefinite point, a Go 2 specification may arise,
but until that time, [… all the compatibility details …].</p>
</blockquote>
<p>That raises an obvious question: when should we expect the
Go 2 specification that breaks old Go 1 programs?</p>
<p>The answer is never.
Go 2, in the sense of breaking with the past
and no longer compiling old programs,
is never going to happen.
Go 2 in the sense of being the major revision of Go 1
we started toward in 2017 has already happened.</p>
<p>There will not be a Go 2 that breaks Go 1 programs.
Instead, we are going to double down on compatibility,
which is far more valuable than any possible break with the past.
In fact, we believe that prioritizing compatibility
was the most important design decision we made for Go 1.</p>
<p>So what you will see over the next few years
is plenty of new, exciting work, but done in a careful,
compatible way, so that we can keep your upgrades from
one toolchain to the next as boring as possible.</p>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Software Engineering at Google (209 pts)]]></title>
            <link>https://abseil.io/resources/swe-book/html/toc.html</link>
            <guid>37121180</guid>
            <pubDate>Mon, 14 Aug 2023 14:06:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://abseil.io/resources/swe-book/html/toc.html">https://abseil.io/resources/swe-book/html/toc.html</a>, See on <a href="https://news.ycombinator.com/item?id=37121180">Hacker News</a></p>
<div id="readability-page-1" class="page">
    <!-- This is a placeholder element for use with the automatic TOC generation option in Atlas -->
<nav data-type="toc">
<ol>
  <li data-type="foreword">
    <a href="https://abseil.io/resources/swe-book/html/foreword.html">Foreword</a>
            <ol>
</ol>
      </li>
  <li data-type="preface">
    <a href="https://abseil.io/resources/swe-book/html/pr01.html">Preface</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/pr01.html#programming_over_time">Programming Over Time</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/pr01.html#googleapostrophes_perspective">Google’s Perspective</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/pr01.html#what_this_book_isnapostrophet">What This Book Isn’t</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/pr01.html#parting_remarks">Parting Remarks</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/pr01.html#_conventions_used_in_this_book">Conventions Used in This Book</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/pr01.html#_safari_books_online">O'Reilly Online Learning</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/pr01.html#_how_to_contact_us">How to Contact Us</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/pr01.html#_acknowledgments">Acknowledgments</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="part">
    <a href="https://abseil.io/resources/swe-book/html/part1.html">Thesis</a>
            <ol>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html">What Is Software Engineering?</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#time_and_change">Time and Change</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#hyrumapostrophes_law">Hyrum’s Law</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#example_hash_ordering">Example: Hash Ordering</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#why_not_just_aim_for_quotation_marknoth">Why Not Just Aim for “Nothing Changes”?</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#scale_and_efficiency">Scale and Efficiency</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#policies_that_donapostrophet_scale">Policies That Don’t Scale</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#policies_that_scale_well">Policies That Scale Well</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#example_compiler_upgrade">Example: Compiler Upgrade</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#shifting_left">Shifting Left</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#tradeoffs_and_costs">Trade-offs and Costs</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#example_markers">Example: Markers</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#inputs_to_decision_making">Inputs to Decision Making</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#example_distributed_builds">Example: Distributed Builds</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#example_deciding_between_time_and_scale">Example: Deciding Between Time and Scale</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#revisiting_decisionscomma_making_mistak">Revisiting Decisions, Making Mistakes</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#software_engineering_versus_programming">Software Engineering Versus Programming</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#conclusion">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch01.html#tlsemicolondr">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="part">
    <a href="https://abseil.io/resources/swe-book/html/part2.html">Culture</a>
            <ol>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html">How to Work Well on Teams</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#help_me_hide_my_code">Help Me Hide My Code</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#the_genius_myth">The Genius Myth</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#hiding_considered_harmful">Hiding Considered Harmful</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#early_detection">Early Detection</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#the_bus_factor">The Bus Factor</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#pace_of_progress">Pace of Progress</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#in_shortcomma_donapostrophet_hide">In Short, Don’t Hide</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#itapostrophes_all_about_the_team">It’s All About the Team</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#the_three_pillars_of_social_interaction">The Three Pillars of Social Interaction</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#why_do_these_pillars_matterquestion_mar">Why Do These Pillars Matter?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#humilitycomma_respectcomma_and_trust_in">Humility, Respect, and Trust in Practice</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#blameless_postmortem_culture">Blameless Post-Mortem Culture</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#being_googley">Being Googley</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#conclusion-id00006">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch02.html#tlsemicolondr-id00171">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html">Knowledge Sharing</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#challenges_to_learning">Challenges to Learning</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#philosophy">Philosophy</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#setting_the_stage_psychological_safety">Setting the Stage: Psychological Safety</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#mentorship">Mentorship</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#psychological_safety_in_large_groups">Psychological Safety in Large Groups</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#growing_your_knowledge">Growing Your Knowledge</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#ask_questions">Ask Questions</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#understand_context">Understand Context</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#scaling_your_questions_ask_the_communit">Scaling Your Questions: Ask the Community</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#group_chats">Group Chats</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#mailing_lists">Mailing Lists</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#yaqs_question_and_answer_platform">YAQS: Question-and-Answer Platform</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#scaling_your_knowledge_you_always_have">Scaling Your Knowledge: You Always Have Something to Teach</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#office_hours">Office Hours</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#tech_talks_and_classes">Tech Talks and Classes</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#documentation-id00039">Documentation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#code">Code</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#scaling_your_organizationapostrophes_kn">Scaling Your Organization’s Knowledge</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#cultivating_a_knowledge-sharing_culture">Cultivating a Knowledge-Sharing Culture</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#establishing_canonical_sources_of_infor">Establishing Canonical Sources of Information</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#staying_in_the_loop">Staying in the Loop</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#readability_standardized_mentorship_thr">Readability: Standardized Mentorship Through Code Review</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#what_is_the_readability_processquestion">What Is the Readability Process?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#why_have_this_processquestion_mark">Why Have This Process?</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#conclusion-id00007">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch03.html#tlsemicolondrs-id00101">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html">Engineering for Equity</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#bias_is_the_default">Bias Is the Default</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#understanding_the_need_for_diversity">Understanding the Need for Diversity</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#building_multicultural_capacity">Building Multicultural Capacity</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#making_diversity_actionable">Making Diversity Actionable</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#reject_singular_approaches">Reject Singular Approaches</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#challenge_established_processes">Challenge Established Processes</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#values_versus_outcomes">Values Versus Outcomes</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#stay_curiouscomma_push_forward">Stay Curious, Push Forward</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#conclusion-id00008">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch04.html#tlsemicolondrs-id00103">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html">How to Lead a Team</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#managers_and_tech_leads_left_parenthesi">Managers and Tech Leads (and Both)</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#the_engineering_manager">The Engineering Manager</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#the_tech_lead">The Tech Lead</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#the_tech_lead_manager">The Tech Lead Manager</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#moving_from_an_individual_contributor_r">Moving from an Individual Contributor Role to a Leadership Role</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#the_only_thing_to_fear_issemicolonwellc">The Only Thing to Fear Is…Well, Everything</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#servant_leadership">Servant Leadership</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#the_engineering_manage">The Engineering Manager</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#manager_is_a_four-letter_word">Manager Is a Four-Letter Word</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#todayapostrophes_engineering_manager">Today’s Engineering Manager</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#antipatterns">Antipatterns</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#antipattern_hire_pushovers">Antipattern: Hire Pushovers</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#antipattern_ignore_low_performers">Antipattern: Ignore Low Performers</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#antipattern_ignore_human_issues">Antipattern: Ignore Human Issues</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#antipattern_be_everyoneapostrophes_frie">Antipattern: Be Everyone’s Friend</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#antipattern_compromise_the_hiring_bar">Antipattern: Compromise the Hiring Bar</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#antipattern_treat_your_team_like_childr">Antipattern: Treat Your Team Like Children</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#positive_patterns">Positive Patterns</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#lose_the_ego-id00072">Lose the Ego</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#be_a_zen_master">Be a Zen Master</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#be_a_catalyst">Be a Catalyst</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#remove_roadblocks">Remove Roadblocks</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#be_a_teacher_and_a_mentor">Be a Teacher and a Mentor</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#set_clear_goals">Set Clear Goals</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#be_honest">Be Honest</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#track_happiness">Track Happiness</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#the_unexpected_question">The Unexpected Question</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#other_tips_and_tricks">Other Tips and Tricks</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#people_are_like_plants">People Are Like Plants</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#intrinsic_versus_extrinsic_motivation">Intrinsic Versus Extrinsic Motivation</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#conclusion-id00009">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch05.html#tlsemicolondrs">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html">Leading at Scale</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#always_be_deciding">Always Be Deciding</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#the_parable_of_the_airplane">The Parable of the Airplane</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#identify_the_blinders">Identify the Blinders</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#identify_the_key_trade-offs">Identify the Key Trade-Offs</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#decidecomma_then_iterate">Decide, Then Iterate</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#always_be_leaving">Always Be Leaving</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#your_mission_build_a_quotation_markself">Your Mission: Build a “Self-Driving” Team</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#dividing_the_problem_space">Dividing the Problem Space</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#always_be_scaling">Always Be Scaling</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#the_cycle_of_success">The Cycle of Success</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#important_versus_urgent">Important Versus Urgent</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#learn_to_drop_balls">Learn to Drop Balls</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#protecting_your_energy">Protecting Your Energy</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#conclusion-id00010">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch06.html#tlsemicolondrs-id00106">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html">Measuring Engineering Productivity</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#why_should_we_measure_engineering_produ">Why Should We Measure Engineering Productivity?</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#triage_is_it_even_worth_measuringquesti">Triage: Is It Even Worth Measuring?</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#selecting_meaningful_metrics_with_goals">Selecting Meaningful Metrics with Goals and Signals</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#goals">Goals</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#signals">Signals</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#metrics">Metrics</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#using_data_to_validate_metrics">Using Data to Validate Metrics</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#taking_action_and_tracking_results">Taking Action and Tracking Results</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#conclusion-id00011">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch07.html#tlsemicolondrs-id00108">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="part">
    <a href="https://abseil.io/resources/swe-book/html/part3.html">Processes</a>
            <ol>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html">Style Guides and Rules</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#why_have_rulesquestion_mark">Why Have Rules?</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#creating_the_rules">Creating the Rules</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#guiding_principles">Guiding Principles</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#the_style_guide">The Style Guide</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#changing_the_rules">Changing the Rules</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#the_process">The Process</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#the_style_arbiters">The Style Arbiters</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#exceptions">Exceptions</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#guidance">Guidance</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#applying_the_rules">Applying the Rules</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#error_checkers">Error Checkers</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#code_formatters">Code Formatters</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#conclusion-id00012">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch08.html#tlsemicolondrs-id00109">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html">Code Review</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#code_review_flow-id00005">Code Review Flow</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#how_code_review_works_at_google">How Code Review Works at Google</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#code_review_benefits">Code Review Benefits</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#code_correctness">Code Correctness</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#comprehension_of_code">Comprehension of Code</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#code_consistency">Code Consistency</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#psychological_and_cultural_benefits">Psychological and Cultural Benefits</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#knowledge_sharing-id00052">Knowledge Sharing</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#code_review_best_practices">Code Review Best Practices</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#be_polite_and_professional">Be Polite and Professional</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#write_small_changes">Write Small Changes</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#write_good_change_descriptions">Write Good Change Descriptions</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#keep_reviewers_to_a_minimum">Keep Reviewers to a Minimum</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#automate_where_possible">Automate Where Possible</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#types_of_code_reviews">Types of Code Reviews</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#greenfield_code_reviews">Greenfield Code Reviews</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#behavioral_changescomma_improvementscom">Behavioral Changes, Improvements, and Optimizations</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#bug_fixes_and_rollbacks">Bug Fixes and Rollbacks</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#refactorings_and_large-scale_changes">Refactorings and Large-Scale Changes</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#conclusion-id00013">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch09.html#tlsemicolondrs-id00110">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html">Documentation</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#what_qualifies_as_documentationquestion">What Qualifies as Documentation?</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#why_is_documentation_neededquestion_mar">Why Is Documentation Needed?</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#documentation_is_like_code">Documentation Is Like Code</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#know_your_audience">Know Your Audience</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#types_of_audiences">Types of Audiences</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#documentation_types">Documentation Types</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#reference_documentation">Reference Documentation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#design_docs">Design Docs</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#tutorials">Tutorials</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#conceptual_documentation">Conceptual Documentation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#landing_pages">Landing Pages</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#documentation_reviews">Documentation Reviews</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#documentation_philosophy">Documentation Philosophy</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#whocomma_whatcomma_whencomma_wherecomma">WHO, WHAT, WHEN, WHERE, and WHY</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#the_beginningcomma_middlecomma_and_end">The Beginning, Middle, and End</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#the_parameters_of_good_documentation">The Parameters of Good Documentation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#deprecating_documents">Deprecating Documents</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#when_do_you_need_technical_writersquest">When Do You Need Technical Writers?</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#conclusion-id00014">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch10.html#tlsemicolondrs-id00112">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html">Testing Overview</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#why_do_we_write_testsquestion_mark">Why Do We Write Tests?</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#the_story_of_google_web_server">The Story of Google Web Server</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#testing_at_the_speed_of_modern_developm">Testing at the Speed of Modern Development</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#writecomma_runcomma_react">Write, Run, React</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#benefits_of_testing_code">Benefits of Testing Code</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#designing_a_test_suite">Designing a Test Suite</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#test_size">Test Size</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#test_scope">Test Scope</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#the_beyonceacutesemicolon_rule">The Beyoncé Rule</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#a_note_on_code_coverage">A Note on Code Coverage</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#testing_at_google_scale">Testing at Google Scale</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#the_pitfalls_of_a_large_test_suite">The Pitfalls of a Large Test Suite</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#history_of_testing_at_google">History of Testing at Google</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#orientation_classes">Orientation Classes</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#test_certified">Test Certified</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#testing_on_the_toilet">Testing on the Toilet</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#testing_culture_today">Testing Culture Today</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#the_limits_of_automated_testing">The Limits of Automated Testing</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#conclusion-id00015">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch11.html#tlsemicolondrs-id00113">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html">Unit Testing</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#the_importance_of_maintainability">The Importance of Maintainability</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#preventing_brittle_tests">Preventing Brittle Tests</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#strive_for_unchanging_tests">Strive for Unchanging Tests</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#test_via_public_apis">Test via Public APIs</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#test_statecomma_not_interactions">Test State, Not Interactions</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#writing_clear_tests">Writing Clear Tests</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#make_your_tests_complete_and_concise">Make Your Tests Complete and Concise</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#test_behaviorscomma_not_methods">Test Behaviors, Not Methods</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#donapostrophet_put_logic_in_tests">Don’t Put Logic in Tests</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#write_clear_failure_messages">Write Clear Failure Messages</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#tests_and_code_sharing_dampcomma_not_dr">Tests and Code Sharing: DAMP, Not DRY</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#shared_values">Shared Values</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#shared_setup">Shared Setup</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#shared_helpers_and_validation">Shared Helpers and Validation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#defining_test_infrastructure">Defining Test Infrastructure</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#conclusion-id00016">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch12.html#tlsemicolondrs-id00114">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html">Test Doubles</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#the_impact_of_test_doubles_on_software">The Impact of Test Doubles on Software Development</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#test_doubles_at_google">Test Doubles at Google</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#basic_concepts">Basic Concepts</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#an_example_test_double">An Example Test Double</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#seams">Seams</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#mocking_frameworks">Mocking Frameworks</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#techniques_for_using_test_doubles">Techniques for Using Test Doubles</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#faking-id00042">Faking</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#stubbing-id00089">Stubbing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#interaction_testing">Interaction Testing</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#real_implementations">Real Implementations</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#prefer_realism_over_isolation">Prefer Realism Over Isolation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#how_to_decide_when_to_use_a_real_implem">How to Decide When to Use a Real Implementation</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#faking-id00043">Faking</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#why_are_fakes_importantquestion_mark">Why Are Fakes Important?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#when_should_fakes_be_writtenquestion_ma">When Should Fakes Be Written?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#the_fidelity_of_fakes">The Fidelity of Fakes</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#fakes_should_be_tested">Fakes Should Be Tested</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#what_to_do_if_a_fake_is_not_available">What to Do If a Fake Is Not Available</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#stubbing-id00091">Stubbing</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#the_dangers_of_overusing_stubbing">The Dangers of Overusing Stubbing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#when_is_stubbing_appropriatequestion_ma">When Is Stubbing Appropriate?</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#interaction_testing-id00047">Interaction Testing</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#prefer_state_testing_over_interaction_t">Prefer State Testing Over Interaction Testing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#when_is_interaction_testing_appropriate">When Is Interaction Testing Appropriate?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#best_practices_for_interaction_testing">Best Practices for Interaction Testing</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#conclusion-id00017">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch13.html#tlsemicolondrs-id00116">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html">Larger Testing</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#what_are_larger_testsquestion_mark">What Are Larger Tests?</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#fidelity">Fidelity</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#common_gaps_in_unit_tests">Common Gaps in Unit Tests</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#why_not_have_larger_testsquestion_mark">Why Not Have Larger Tests?</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#larger_tests_at_google">Larger Tests at Google</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#larger_tests_and_time">Larger Tests and Time</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#larger_tests_at_google_scale">Larger Tests at Google Scale</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#structure_of_a_large_test">Structure of a Large Test</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#the_system_under_test">The System Under Test</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#test_data">Test Data</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#verification">Verification</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#types_of_larger_tests">Types of Larger Tests</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#functional_testing_of_one_or_more_inter">Functional Testing of One or More Interacting Binaries</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#browser_and_device_testing">Browser and Device Testing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#performancecomma_loadcomma_and_stress_t">Performance, Load, and Stress testing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#deployment_configuration_testing">Deployment Configuration Testing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#exploratory_testing">Exploratory Testing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#asolidusb_diff_regression_testing">A/B Diff Regression Testing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#uat">UAT</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#probers_and_canary_analysis">Probers and Canary Analysis</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#disaster_recovery_and_chaos_engineering">Disaster Recovery and Chaos Engineering</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#user_evaluation">User Evaluation</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#large_tests_and_the_developer_workflow">Large Tests and the Developer Workflow</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#authoring_large_tests">Authoring Large Tests</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#running_large_tests">Running Large Tests</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#owning_large_tests">Owning Large Tests</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#conclusion-id00018">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch14.html#tlsemicolondrs-id00118">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html">Deprecation</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#why_deprecatequestion_mark">Why Deprecate?</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#why_is_deprecation_so_hardquestion_mark">Why Is Deprecation So Hard?</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#deprecation_during_design">Deprecation During Design</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#types_of_deprecation">Types of Deprecation</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#advisory_deprecation">Advisory Deprecation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#compulsory_deprecation">Compulsory Deprecation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#deprecation_warnings">Deprecation Warnings</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#managing_the_deprecation_process">Managing the Deprecation Process</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#process_owners">Process Owners</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#milestones">Milestones</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#deprecation_tooling">Deprecation Tooling</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#conclusion-id00019">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch15.html#tlsemicolondrs-id00120">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="part">
    <a href="https://abseil.io/resources/swe-book/html/part4.html">Tools</a>
            <ol>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html">Version Control and Branch Management</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#what_is_version_controlquestion_markone">What Is Version Control?</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#why_is_version_control_importantquestio">Why Is Version Control Important?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#centralized_vcs_versus_distributed_vcs">Centralized VCS Versus Distributed VCS</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#source_of_truth">Source of Truth</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#version_control_versus_dependency_manag">Version Control Versus Dependency Management</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#branch_management">Branch Management</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#work_in_progress_is_akin_to_a_branch">Work in Progress Is Akin to a Branch</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#dev_branches">Dev Branches</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#release_branches">Release Branches</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#version_control_at_google">Version Control at Google</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#one_version">One Version</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#scenario_multiple_available_versions">Scenario: Multiple Available Versions</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#the_quotation_markone_versionquotation">The “One-Version” Rule</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#left_parenthesisnearlyright_parenthesis">(Nearly) No Long-Lived Branches</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#what_about_release_branchesquestion_mar">What About Release Branches?</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#monorepos">Monorepos</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#future_of_version_control">Future of Version Control</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#conclusion-id00020">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch16.html#tlsemicolondrs-id00122">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html">Code Search</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#the_code_search_u">The Code Search UI</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#how_do_googlers_use_code_searchquestion">How Do Googlers Use Code Search?</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#wherequestion_mark">Where?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#whatquestion_mark">What?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#howquestion_mark">How?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#whyquestion_mark">Why?</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#who_and_whenquestion_mark">Who and When?</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#why_a_separate_web_toolquestion_mark">Why a Separate Web Tool?</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#scale">Scale</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#zero_setup_global_code_view">Zero Setup Global Code View</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#specialization">Specialization</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#integration_with_other_developer_tools">Integration with Other Developer Tools</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#api_exposure">API Exposure</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#impact_of_scale_on_design">Impact of Scale on Design</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#search_query_latency">Search Query Latency</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#index_latency">Index Latency</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#googleapostrophes_implementation">Google’s Implementation</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#search_index">Search Index</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#ranking">Ranking</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#selected_trade-offs">Selected Trade-Offs</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#completeness_repository_at_head">Completeness: Repository at Head</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#completeness_all_versus_most-relevant_r">Completeness: All Versus Most-Relevant Results</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#completeness_head_versus_branches_versu">Completeness: Head Versus Branches Versus All History Versus Workspaces</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#expressiveness_token_versus_substring_v">Expressiveness: Token Versus Substring Versus Regex</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#conclusion-id00021">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch17.html#tlsemicolondrs-id00123">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html">Build Systems and Build Philosophy</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#purpose_of_a_build_system">Purpose of a Build System</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#what_happens_without_a_build_systemques">What Happens Without a Build System?</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#but_all_i_need_is_a_compilerexclamation">But All I Need Is a Compiler!</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#shell_scripts_to_the_rescuequestion_mar">Shell Scripts to the Rescue?</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#modern_build_systems">Modern Build Systems</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#itapostrophes_all_about_dependencies">It’s All About Dependencies</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#task-based_build_systems">Task-Based Build Systems</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#artifact-based_build_systems">Artifact-Based Build Systems</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#distributed_builds">Distributed Builds</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#timecomma_scalecomma_trade-offs">Time, Scale, Trade-Offs</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#dealing_with_modules_and_dependencies">Dealing with Modules and Dependencies</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#using_fine-grained_modules_and_the_oneo">Using Fine-Grained Modules and the 1:1:1 Rule</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#minimizing_module_visibility">Minimizing Module Visibility</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#managing_dependencies">Managing Dependencies</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#conclusion-id00022">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch18.html#tlsemicolondrs-id00124">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html">Critique: Google’s Code Review Tool</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#code_review_tooling_principles">Code Review Tooling Principles</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#code_review_flow">Code Review Flow</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#notifications">Notifications</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#stage_one_creating_a_change">Stage 1: Create a Change</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#diffing">Diffing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#analysis_results-id00001">Analysis Results</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#tight_tool_integration">Tight Tool Integration</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#stage_two_request_review">Stage 2: Request Review</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#stage_three_and_four_understanding_and">Stages 3 and 4: Understanding and Commenting on a Change</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#commenting">Commenting</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#understanding_the_state_of_a_change">Understanding the State of a Change</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#stage_five_change_approvals_left_parent">Stage 5: Change Approvals (Scoring a Change)</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#stage_six_commiting_a_change">Stage 6: Commiting a Change</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#after_commit_tracking_history">After Commit: Tracking History</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#conclusion-id00023">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch19.html#tlsemicolondrs-id00125">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html">Static Analysis</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#characteristics_of_effective_static_ana">Characteristics of Effective Static Analysis</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#scalability">Scalability</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#usability">Usability</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#key_lessons_in_making_static_analysis_w">Key Lessons in Making Static Analysis Work</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#focus_on_developer_happiness">Focus on Developer Happiness</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#make_static_analysis_a_part_of_the_core">Make Static Analysis a Part of the Core Developer Workflow</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#empower_users_to_contribute">Empower Users to Contribute</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#tricorder_googleapostrophes_static_anal">Tricorder: Google’s Static Analysis Platform</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#integrated_tools">Integrated Tools</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#integrated_feedback_channels">Integrated Feedback Channels</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#suggested_fixes">Suggested Fixes</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#per-project_customization">Per-Project Customization</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#presubmits">Presubmits</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#compiler_integration">Compiler Integration</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#analysis_while_editing_and_browsing_cod">Analysis While Editing and Browsing Code</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#conclusion-id00024">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch20.html#tlsemicolondrs-id00126">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html">Dependency Management</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#why_is_dependency_management_so_difficu">Why Is Dependency Management So Difficult?</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#conflicting_requirements_and_diamond_de">Conflicting Requirements and Diamond Dependencies</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#importing_dependencies">Importing Dependencies</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#compatibility_promises">Compatibility Promises</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#considerations_when_importing">Considerations When Importing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#how_google_handles_importing_dependende">How Google Handles Importing Dependencies</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#dependency_managementcomma_in_theory">Dependency Management, In Theory</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#nothing_changes_left_parenthesisaka_the">Nothing Changes (aka The Static Dependency Model)</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#semantic_versioning">Semantic Versioning</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#bundled_distribution_models">Bundled Distribution Models</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#live_at_head">Live at Head</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#the_limitations_of_semver">The Limitations of SemVer</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#semver_might_overconstrain">SemVer Might Overconstrain</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#semver_might_overpromise">SemVer Might Overpromise</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#motivations-id00080">Motivations</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#minimum_version_selection">Minimum Version Selection</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#socomma_does_semver_workquestion_mark">So, Does SemVer Work?</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#dependency_management_with_infinite_res">Dependency Management with Infinite Resources</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#exporting_dependencies">Exporting Dependencies</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#conclusion-id00025">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch21.html#tlsemicolondrs-id00127">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html">Large-Scale Changes</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#what_is_a_large-scale_changequestion_ma">What Is a Large-Scale Change?</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#who_deals_with_lscsquestion_mark">Who Deals with LSCs?</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#barriers_to_atomic_changes">Barriers to Atomic Changes</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#technical_limitations">Technical Limitations</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#merge_conflicts">Merge Conflicts</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#no_haunted_graveyards">No Haunted Graveyards</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#heterogeneity">Heterogeneity</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#testing-id00096">Testing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#code_review">Code Review</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#lsc_infrastructure">LSC Infrastructure</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#policies_and_culture">Policies and Culture</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#codebase_insight">Codebase Insight</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#change_management">Change Management</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#testing">Testing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#language_support">Language Support</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#the_lsc_process">The LSC Process</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#authorization">Authorization</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#change_creation">Change Creation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#sharding_and_submitting">Sharding and Submitting</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#cleanup">Cleanup</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#conclusion-id00026">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch22.html#tlsemicolondrs-id00128">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html">Continuous Integration</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#ci_concepts">CI Concepts</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#fast_feedback_loops">Fast Feedback Loops</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#automation">Automation</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#continuous_testing">Continuous Testing</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#ci_challenges">CI Challenges</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#hermetic_testing">Hermetic Testing</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#ci_at_google">CI at Google</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#ci_case_study_google_takeout">CI Case Study: Google Takeout</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#but_i_canapostrophet_afford_ci">But I Can’t Afford CI</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#conclusion-id00027">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch23.html#tlsemicolondrs-id00129">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html">Continuous Delivery</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#idioms_of_continuous_delivery_at_google">Idioms of Continuous Delivery at Google</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#velocity_is_a_team_sport_how_to_break_u">Velocity Is a Team Sport: How to Break Up a Deployment into Manageable Pieces</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#evaluating_changes_in_isolation_flag-gu">Evaluating Changes in Isolation: Flag-Guarding Features</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#striving_for_agility_setting_up_a_relea">Striving for Agility: Setting Up a Release Train</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#no_binary_is_perfect">No Binary Is Perfect</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#meet_your_release_deadline">Meet Your Release Deadline</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#quality_and_user-focus_ship_only_what_g">Quality and User-Focus: Ship Only What Gets Used</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#shifting_left_making_data-driven_decisi">Shifting Left: Making Data-Driven Decisions Earlier</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#changing_team_culture_building_discipli">Changing Team Culture: Building Discipline into Deployment</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#conclusion-id00029">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch24.html#tlsemicolondrs-id00130">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="chapter">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html">Compute as a Service</a>
            <ol>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#taming_the_compute_environment">Taming the Compute Environment</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#automation_of_toil">Automation of Toil</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#containerization_and_multitenancy">Containerization and Multitenancy</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#summary">Summary</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#writing_software_for_managed_compute">Writing Software for Managed Compute</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#architecting_for_failure">Architecting for Failure</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#batch_versus_serving">Batch Versus Serving</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#managing_statetwosixthree">Managing State</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#connecting_to_a_service">Connecting to a Service</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#one-off_code">One-Off Code</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#caas_over_time_and_scale">CaaS Over Time and Scale</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#containers_as_an_abstraction">Containers as an Abstraction</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#one_service_to_rule_them_all">One Service to Rule Them All</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#submitted_configuration">Submitted Configuration</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#choosing_a_compute_service">Choosing a Compute Service</a>
            <ol>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#centralization_versus_customization">Centralization Versus Customization</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#level_of_abstraction_serverless">Level of Abstraction: Serverless</a>
  </li>
  <li data-type="sect2">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#public_versus_private">Public Versus Private</a>
  </li>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#conclusion-id00030">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="sect1">
    <a href="https://abseil.io/resources/swe-book/html/ch25.html#tlsemicolondrs-id00131">TL;DRs</a>
            <ol>
</ol>
      </li>
</ol>
      </li>
  <li data-type="part">
    <a href="https://abseil.io/resources/swe-book/html/part5.html">Conclusion</a>
            <ol>
</ol>
      </li>
  <li data-type="afterword">
    <a href="https://abseil.io/resources/swe-book/html/ch26.html">Afterword</a>
            <ol>
</ol>
      </li>
  <li data-type="index">
    <a href="https://abseil.io/resources/swe-book/html/ix.html">Index</a>
            <ol>
</ol>
      </li>
</ol>
</nav>

  

</div>]]></description>
        </item>
        <item>
            <title><![CDATA[Inside The Decline of Stack Exchange (125 pts)]]></title>
            <link>https://www.thediff.co/archive/inside-the-decline-of-stack-exchange/</link>
            <guid>37120982</guid>
            <pubDate>Mon, 14 Aug 2023 13:48:53 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.thediff.co/archive/inside-the-decline-of-stack-exchange/">https://www.thediff.co/archive/inside-the-decline-of-stack-exchange/</a>, See on <a href="https://news.ycombinator.com/item?id=37120982">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      <p>Today's free newsletter is brought to you by our sponsor, <a href="https://calendly.com/cloudsavings/demo?back=1&amp;month=2023-08&amp;ref=thediff.co">Antimetal</a>. Antimetal makes cloud savings automated, effortless, and risk-free.</p><!--kg-card-begin: markdown-->
<p>Stack Exchange is one of the greatest compendia of human knowledge ever produced. Where else can you ask questions and get answers from <a href="https://en.wikipedia.org/wiki/Stack_Exchange?ref=thediff.co#Notable_users">ten different Fields Medalists</a>? (Not to mention Peter Shor of Shor's algorithm <a href="https://literature.stackexchange.com/questions/5373/why-did-the-alexandrine-become-the-natural-metre-for-french-verse-drama-where/5399?ref=thediff.co#5399">explaining why French and English renaissance poetry use different metres</a>? You can even use it to see <a href="https://stackoverflow.com/questions/15445285/how-can-i-connect-to-a-tor-hidden-service-using-curl-in-php?ref=thediff.co">a snapshot of the early efforts</a> behind <a href="https://en.wikipedia.org/wiki/Silk_Road_(marketplace)?ref=thediff.co">a once-thriving e-commerce site</a>.) Plus, all of this knowledge is <a href="https://stackoverflow.com/help/licensing?ref=thediff.co">Creative Commons-licensed</a>, so anyone can "remix, transform, and build upon the material for any purpose, even commercially," as long as they give credit. As a consequence, it's a big chunk of the programming-specific data ingested by AI models.</p>
<p>And, as a result of <em>that</em>, Stack Exchange has seen a material decline in usage. The first sign was the most ominous Google Trends graph I've ever seen:</p>
<p><img src="https://www.thediff.co/content/images/2023/08/so_vs_chatgpt.png" alt="so_vs_chatgpt" loading="lazy"></p>
<p>(This one cuts off at the beginning of December, because if it's extended any further it re-scales until Stack Overflow is just a flat line.)</p>
<p>Q&amp;A sites like Stack Exchange combine two kinds of businesses that are usually distinct, but have historically been incredibly powerful together: two-sided networks and SEO plays. The two-sidedness of two-sided networks is always a bit blurred (some fraction of Uber riders own cars, the vast majority of Airbnb users have homes—with at least one unoccupied bed when they're staying at an Airbnb), and, at least for programming, that’s the case here as well. Stack Exchange’s most well known forum, Stack Overflow, must maintain a critical mass in two groups: people with questions about programming and people with answers. And, luckily for them, programming is an incredibly heterogeneous space, where many people end up mastering one set of technologies but get stuck using another one. So, if a site is big enough, someone can be a beginner in one set of questions and an expert when it comes to providing a different set of answers.</p>
<p>On the SEO side, this kind of content naturally generates pages that rank well in search (and Stack Exchange has done its work to ensure that they get the credit they deserve). In long-tail SEO, there are often either zero good results for a query or exactly one. And SEO has many feedback loops. For example, search engines use autocomplete to guide users towards the queries they're trying to write. And those autocompletes are at least partially influenced by what information is available. So queries tend to converge on the phrasing used by the most prominent site that answers them.</p>
<p>One takeaway from this is that if you want to look at the health of a company with this kind of model, you actually have several options: revenue and traffic will be fairly backwards-looking—the way to get revenue from job ads is <em>to have had traffic in the past</em>, and the way to get traffic is <em>to have had good answers and questions even further in the past</em>. By looking at specific kinds of questions we can even look at the historical shape of technology trends and at the granular impact of AI on developer behavior.</p>
<p>Very fortunately for us, Stack Exchange is committed to transparency, and offers a <a href="https://archive.org/details/stackexchange">quarterly data dump of all questions and answers</a>. So, if you're truly curious, you can track trends in tags over time. For example, here's a chart of the volume of questions about programming languages:</p>
<p><img src="https://www.thediff.co/content/images/2023/08/so_pl.png" alt="so_pl" loading="lazy"></p>
<p>There are a few things worth remarking on: question volume generally grew until about 2014, and then stabilized for a while before going into a gentle decline. There's a seasonal pattern that's common for informational, non-commercial queries: a big drop associated with the holidays, a moderate rise in late spring and in mid-December (coinciding with exam season).<sup><a href="#fn1" id="fnref1">[1]</a></sup> There was a surge in question volume during Covid, as a combination of pandemic hobby projects and hasty reworking of existing infrastructure to accommodate work-from-home (for B2B software) and the shift from brick-and-mortar to digital (for consumer-facing products).</p>
<p>And then ChatGPT hit: the holiday lull never really ended; question volume in January 2022 was running at basically the same pace as December 2020, but in 2023 the question volume only recovered about half of the holiday drop, and then went almost straight down from there. Question volume in May 2023 was about half the level of November 2022, was below the holiday drops typical throughout mid to late 2010s, and was around the level of late 2011.</p>
<p>The earlier slowdown makes some sense. Like <a href="https://www.thediff.co/archive/its-hard-to-build-a-durable-business-selling-durable-goods/">the durable goods business</a>, question volume is some function of 1) new features, new edge cases, new performance bottlenecks, etc., and 2) the one-time effect of answering questions <em>everyone</em> has when they're new to a language. "<a href="https://stackoverflow.com/questions/252703/what-is-the-difference-between-pythons-list-methods-append-and-extend?ref=thediff.co">What is the difference between <code>append()</code> and <code>extend()</code>?</a>" only needs to be asked once, and will be answered forevermore, so any Q&amp;A site that wins its vertical should, in fact, show a peak in question volume that doesn't imply a peak in utility.<sup><a href="#fn2" id="fnref2">[2]</a></sup></p>
<p>You can see this pattern clearly by looking at languages that have been in use for a long time. Here's Java, for example:</p>
<p><img src="https://www.thediff.co/content/images/2023/08/so_java.png" alt="so_java" loading="lazy"></p>
<p>Questions about Java had already declined by almost three quarters from their peak <em>before</em> the introduction of ChatGPT, and are down another 25% since. For something that was adopted a bit later, like React, question volume had just managed to reach the plateau where all the questions beginners ask had been thoroughly answered when ChatGPT hit, and the result was a larger drop of around a third year-over-year:</p>
<p><img src="https://www.thediff.co/content/images/2023/08/so_react.png" alt="so_react" loading="lazy"></p>
<p>But there are some counterexamples, with telling commonalities. Consider this set of technologies (in this case, we're zooming in on recent months and normalizing so the various trends are readable):</p>
<p><img src="https://www.thediff.co/content/images/2023/08/so_proprietary.png" alt="so_proprietary" loading="lazy"></p>
<p>There really isn't much to see here. Which is surprising! A new competitor was introduced, rapidly got massive mindshare, and yet it didn't have much of an impact on user behavior! What's probably going on is that these are ecosystems controlled by individual companies, which has a paradoxical effect: it means there's an economic incentive to provide excellent up-to-date documentation, but it also means that some knowledge is locked up inside organizations rather than being posted about on Stack Overflow.</p>
<p>Now consider another set of queries: the ones revolving around cloud hosting services like AWS, Azure, and GCP. In this case, what we see is that question volume is roughly flat year-over-year.<sup><a href="#fn3" id="fnref3">[3]</a></sup></p>
<p><img src="https://www.thediff.co/content/images/2023/08/so_infra.png" alt="so_infra" loading="lazy"></p>
<p>Two features set these apart:</p>
<ol>
<li>They're products with a fairly high launch cadence, whose offerings have materially changed since GPT-4's September 2021 knowledge cutoff. ChatGPT is great at answering "How do I do X?" questions, but if X was invented after the model was trained, it's flummoxed.</li>
<li>Infrastructure problems are often more situational. If writing a program is analogous to designing a plane, the infrastructure-related questions are a lot closer to asking how to repair an engine in mid-flight. It's harder to refactor something that's already running at scale, so many of the questions that arise will need more context, and perhaps more back-and-forth. (There's a somewhat similar split with questions about Git, because the two categories of questions are 1) I have no idea how to use this, and 2) I thought I knew how to use it but it's hopelessly broken.)</li>
</ol>
<p>And there is one other category that has helped Stack Overflow AI-proof itself: AI tools themselves!</p>
<p><img src="https://www.thediff.co/content/images/2023/08/so_ailibs.png" alt="so_ailibs" loading="lazy"></p>
<p>It's a delightful-but-temporary irony that the biggest thing Stack Overflow has a competitive advantage in is helping people build clones of the tools that are causing the site so much trouble in the first place. These products are new enough that there weren't many answers in the training data, or, in the case of Langchain, any answers whatsoever (it launched in October 2022, making it a colicky newborn of a library).</p>
<p>ChatGPT isn't just changing the way people ask questions about languages. It also seems to be changing the pace of adoption. One obstacle to switching platforms is that, in general, you know the one you're switching <em>from</em> better than you know the one you're switching <em>to</em>. The basic trade is to accept something like an 80% drop in productivity for a few months in exchange for, say, a 20% increase in productivity indefinitely thereafter. If new frameworks are faster to learn, and in particular if there's a trivial way to answer "How do I convert this code using library X to code using library Y instead," that switching process is accelerated. And even though this is happening in part because people are using ChatGPT rather than Stack Overflow, it shows up in the Stack Overflow data. Here's how the transition from Tensorflow to Pytorch is going:</p>
<p><img src="https://www.thediff.co/content/images/2023/08/so_pytorch_tensorflow.png" alt="so_pytorch_tensorflow" loading="lazy"></p>
<p>Stack Overflow remains a great tool for knowledge creation and aggregation. It's unfortunate for the company that the single best way to search that priceless corpus of knowledge involves using someone else's service, probably paying them $20, and sending exactly $0 of that back to Stack Overflow. But it's hard to imagine Stack Overflow existing in the first place without being vulnerable to this: the site taps into what is, in pure dollar terms, one of the most valuable pools of human capital in existence. They knew that they weren't in a position to dictate terms to their users, and ensured that users were getting credit and could freely share the information they had. This has happened before: encyclopedias were a nice, slow-growth business for about a century. And then Microsoft licensed the contents of the Funk &amp; Wagnalls Encyclopedia, put them on CD-ROM with color illustrations, and started selling Encarta in 1993. And, soon after that, they realized that the near-zero marginal cost of CD-ROMs meant that computers could be pitched as educational, a nice bit of market segmentation that coincidentally obliterated the encyclopedia business' pricing power. And then the same problem happened to Microsoft, when Wikipedia supplanted Encarta.</p>
<p>It's just fundamentally hard to be in the business of selling information at a time when information aggregation and delivery mechanisms are somewhat hardware-bound and hardware keeps improving. This risk is generally invisible until it's unavoidable; generative AI spent a long time as a novelty product whose most useful product was <a href="https://twitter.com/jamieabrew/status/695060640931549184?ref=thediff.co">surreal humor</a>. And then suddenly, they could write code, and a few months after that, they could write code at a human level, faster than people could. (Though, as with the surrealist humor, it took some handholding and iteration to come up with the right prompts and edit things into good working order.) The company is <a href="https://stackoverflow.blog/2023/07/27/announcing-overflowai/?ref=thediff.co">launching its own AI tools</a>, mostly around search. Better search does help Q&amp;A sites directly, by making it more likely that someone will find the answer to the question they should have asked and less likely that they'll add a low-quality question that gets a rude answer in return. They're also making it easier to incorporate answers into the usual flow of work.</p>
<p>But they seem to be sticking with human-written text as the core offering. When someone's asking a question because they want to be in a position to independently produce the answer and to fully understand the principles behind it, a good Stack Overflow answer will beat what ChatGPT produces. But even though that's the most socially-valuable service Stack Overflow offers, it's not a good description of the typical user interaction, where the task at hand is less "I want to finally understand the Rust borrow checker" and more like "I want to fix this bug so I can finally log off." And LLMs are a better way to access Stack Overflow's knowledge base in order to provide that answer—it's visible right there in the data.</p>
<hr>
<p>The data analysis for this post would have taken much longer without Stack Exchange. And, if the site didn't exist, ChatGPT would have had a <em>lot</em> more trouble answering questions and providing code to build the web app you can use to interact with that data. Paying subscribers can access the tool that generated these charts, and generate their own charts of Stack Overflow trends.</p>
<p>Disclosure: Long Amazon, Microsoft.</p>
<hr>
<section>
<ol>
<li id="fn1"><p>Students aren't the main users of Stack Overflow, at least in my experience, but shifts in their participation will still show up on the chart even if the typical user is a full-time professional; the seasonality of the overall economy is the sum of non-overlapping seasons for other businesses: homebuying is stronger at the start of the year, travel and construction towards the middle, and retail in the fourth quarter. <a href="#fnref1">↩︎</a></p>
</li>
<li id="fn2"><p>This pattern also shows up at the individual level: when you first start studying a topic, you can passively absorb knowledge without necessarily having many questions; a good tutorial is probably one that answers every question it would raise for the typical reader, unless the question is deliberately left as an exercise. As you advance, you have enough knowledge to notice that things don't seem to make sense, or are done in counterintuitive ways. And then, once you've learned something really well, you have fewer questions about the topic as such and more about applications, intersections with other domains, etc. Often the difference between intermediate and expert skill at something is being able to answer a question with “Yes, that way would have made sense and if we were starting over we would have done it like that, but now we’re stuck with it.” <a href="#fnref2">↩︎</a></p>
</li>
<li id="fn3"><p>There's some kind of weird seasonal effect where search volume tends to drop in April relative to earlier in the year. The reasons for this are mysterious, but it repeats. <a href="#fnref3">↩︎</a></p>
</li>
</ol>
</section>
<!--kg-card-end: markdown--><figure><a href="https://calendly.com/cloudsavings/demo?back=1&amp;month=2023-08&amp;ref=thediff.co"><img src="https://www.thediff.co/content/images/2023/08/image.png" alt="" loading="lazy" width="1200" height="630" srcset="https://www.thediff.co/content/images/size/w600/2023/08/image.png 600w, https://www.thediff.co/content/images/size/w1000/2023/08/image.png 1000w, https://www.thediff.co/content/images/2023/08/image.png 1200w" sizes="(min-width: 720px) 720px"></a></figure><p><br><strong>Save up to 75% on your AWS bill.</strong></p><p>Antimetal makes cloud savings automated, effortless, and risk-free. You can start saving in less than 2 minutes with zero code or engineering required. Best of all — Antimetal only takes a small percentage of the savings they generate.</p><p>They are already helping 700+ companies including Politico, Polygon, Mercury, and others save an average of 62% on their bill.</p><p>To get your first six months free, <a href="https://calendly.com/cloudsavings/demo?back=1&amp;month=2023-08&amp;ref=thediff.co">request a demo</a> and mention “The Diff”.</p><!--kg-card-begin: markdown--><h2 id="elsewhere">Elsewhere</h2>
<h3 id="the-other-x">The Other X</h3>
<p>Steel company Cleveland Cliffs has <a href="https://finance.yahoo.com/news/cleveland-cliffs-proposes-acquire-u-193200326.html?ref=thediff.co">made an offer to acquire US Steel at a 42% premium</a>. If this offer goes through, it will end US Steel's life as a public company, which started with a bang in 1901 when it was put together through the largest buyout ever and then taken public as the largest IPO ever, making it the first company with a $1bn enterprise value ($1.4bn, to be exact). It's underperformed a bit since then; the company's current enterprise value is $6.5bn.</p>
<p>The last few years have been an amazing cycle for the steel business; they've responded to mostly-low demand by curtailing investment, so when demand finally picked up during the post-Covid boom, earnings followed. One result of that is that steel companies are, optically, incredibly cheap; the offer still values the company at just 8.6x earnings, and that excludes any cost savings from a merger. (Which, in fairness, could be limited; the press release notes that the United Steelworkers have approved the deal, presumably because there aren't too many layoffs planned.) Of course, the cycle is a cycle, but even so, consensus estimates put the deal at 10.5x 2025's estimated earnings. One of the things that drives low long-term returns for cyclical businesses is that, when the cycle is good, it's easy to pencil out a plan for a merger where it's immediately accretive and the excess debt from the acquisition is paid down in just a few years. But that also means that a cyclical upswing has two simultaneous forces: companies use their excess cash to finally pay down debt (since the start of 2020, US Steel has reduced its net debt from $3.6bn to $1.3bn). Meanwhile, low leverage and high earnings make companies a tempting target for acquirers, so their financial leverage can end up rising right when operating leverage starts cutting in the wrong direction.</p>
<h3 id="refinancing-china">Refinancing China</h3>
<p>Last year, <em>The Diff</em> <a href="https://www.thediff.co/archive/how-to-make-another-reserve-currency/">noted two problems with China trying to create a reserve currency</a>: there's a shortage of renminbi-denominated risk-free assets, and there's far too much off-balance-sheet debt issued by entities associated with lower-level governments. The post proposed that China could centralize some of this debt, issuing bonds on behalf of the central government in order to pay off province-level borrowing (a negotiation that would presumably involve some transfer of decision-making ability in the other direction). China isn't doing that, exactly, but <a href="https://www.bloomberg.com/news/articles/2023-08-11/china-to-shift-139-billion-of-troubled-lgfv-debt-to-provinces?ref=thediff.co">is pushing provinces to raise $139bn in order to pay off local debt</a>. One function this serves is to move debt onto the balance sheet, which means it makes China's financial system more legible to outsiders—but also means that insiders get to see which local governments achieved their growth targets through good management and which ones just borrowed their way to success.</p>
<h3 id="the-activist-short-death-spiral">The Activist Short Death Spiral</h3>
<p>In January, short seller Hindenburg Research issued a negative report on the Adani complex of companies. That's cost the companies some market value, but hasn't led to a full-blown crisis just yet. But the crisis is getting closer: <a href="https://www.ft.com/content/5b0cafdb-52ec-404e-9efc-a9630acc9315?ref=thediff.co">Adani's auditor, Deloitte, has resigned, saying it can't properly understand certain inter-group transactions</a> ($, <em>FT</em>). This is sometimes the way large, complex, levered entities die: once skepticism gets expressed, it becomes riskier to deal with them; even if the auditors believe that the odds of fraud are only, say, 5%, that makes it a poor risk-reward to audit them. And a second auditor has less information than the first, and thus a wider confidence interval for what Deloitte thought the odds were. Meanwhile, lenders will <em>also</em> rethink their loans—any given lender might be confident that the company is fine, but also might worry that if other lenders don't think so, and might decline to roll over their loans accordingly. Just as many companies, from coffee shops to phone designers, eventually evolve into banks, some companies continuously add complexity until they're vulnerable to a bank run.</p>
<h3 id="rebundling">Rebundling</h3>
<p>Some of the large-but-not-largest streaming companies, including Paramount and Warner Bros. Discover, have <a href="https://www.vulture.com/2023/08/streaming-bundle-future.html?ref=thediff.co">mused publicly about bundling with other companies' streaming offerings</a>. One of the surprises about the streaming business is that even though it's existence for over a decade and a half, we're still learning about how the economics actually work. Part of that is because the streaming bundle exists in the context of other bundles whose economics are more mature, meaning that certain IP libraries were late or intermittent to streaming and that some of the industry's structure was determined by the cohort of determined contrarians who made streaming work in the first place. (They were right about trends in home broadband and in customer expectations for on-demand entertainment, but turned out to be wrong so far about whether or not ads worked.) That legacy creates legal and economic friction around the streaming business, so companies are still iterating.</p>
<h3 id="fitness-bands">Fitness Bands</h3>
<p><em>The Verge</em> has a story in an undersupplied category: products that used to be popular and slowly faded away. In this case, they're writing about <a href="https://www.theverge.com/23820207/fitness-bands-less-popular-wearables-smartwatches?ref=thediff.co">where all the fitness bands went</a>. It's a classic durables story: for a while, the products kept getting cheaper and better, which meant that every seller had an incentive to clear out their inventory as quickly as possible. Past a certain point, sensors were so cheap that fitness bands could be an app in a more general-purpose smartwatch, and it was easier for Apple to incorporate the relevant subset of Fitbit than for Fitbit to somehow recreate the whole Apple ecosystem. The other option was subscription, but even there it's difficult to get the economics exactly right (though Apple is, naturally, trying): every subscription fitness product wants people to keep all of their fitness in one ecosystem, but that either means lots of integrations across different platforms that may have the same incentive for lock-in, or requiring customers to do a lot of data entry in order to use the product.</p>
<!--kg-card-end: markdown--><h3 id="diff-jobs">Diff Jobs</h3><p>Diff Jobs</p><p>Companies in the <em>Diff</em> network are actively looking for talent. A sampling of current open roles:</p><ul><li>A concentrated crossover fund is looking for an intellectually curious data scientist with demonstrated mastery in analytics. Experience with alt data, web scraping, and financial modeling preferred. (SF)</li><li>A firm using machine learning to customize investments is looking for a data engineer. (NYC)</li><li>A company building zero-knowledge proof-based tools to enable novel financial arrangements is looking for a senior engineer with a research bent. Ideal experience includes demonstrations of extraordinary coding and/or math ability. (NYC or San Diego preferred, remote also a possibility.)</li><li>A crypto proprietary trading firm is actively seeking systematic-oriented traders with crypto experience—ideally someone with experience across a variety of exchanges and tokens. (Remote)</li><li>A new health startup that gives customers affordable access to preventative care and lifestyle interventions seeks a founding engineer. 7+ years of JavaScript experience preferred (TypeScript is ideal), and payments experience is a plus. A great opportunity for anyone excited to make healthcare better by treating problems cost-effectively before they're catastrophic. (US, remote; Austin preferred)</li></ul><p>Even if you don't see an exact match for your skills and interests right now, we're happy to talk early so we can let you know if a good opportunity comes up.</p><p>If you’re at a company that's looking for talent, we should talk! Diff Jobs works with companies across fintech, hard tech, consumer software, enterprise software, and other areas—any company where finding unusually effective people is a top priority.</p>
            
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I built a garbage collector for a language that doesn’t need one (159 pts)]]></title>
            <link>https://claytonwramsey.github.io/2023/08/14/dumpster.html</link>
            <guid>37120967</guid>
            <pubDate>Mon, 14 Aug 2023 13:48:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://claytonwramsey.github.io/2023/08/14/dumpster.html">https://claytonwramsey.github.io/2023/08/14/dumpster.html</a>, See on <a href="https://news.ycombinator.com/item?id=37120967">Hacker News</a></p>
<div id="readability-page-1" class="page"><div aria-label="Content">
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>If carcinization happens when languages evolve to be more like Rust, then what do you call
it when Rust evolves to be more like Java? Caffeination?</p>









<p>Over this summer, I’ve had a decent amount of time to kill.
What better way to spend a beautiful hot summer than sitting inside, staring at core dumps in a
supposedly memory-safe language?
I built a garbage collector - in short, a piece of software that manages allocations for another,
more exciting piece of software.
The cool part: I made it in Rust, for Rust - a language designed to eliminate garbage
collection and which provides few facilities for making it work properly.
Not only that, I managed to make my garbage collector work with relatively few compromises, which
I’ll describe in further detail lower down.</p>

<p>If you don’t like reading, don’t care about the journey to implement it, or just want to get a
sales pitch for the final result, check out the source code on GitHub
<a href="https://github.com/claytonwramsey/dumpster">here</a>.
You can also download it directly from <a href="https://crates.io/crates/dumpster">crates.io</a>.</p>

<h2 id="background">Background</h2>

<p>If you’re familiar with the details of Rust and its standard library, feel free to skip this
section.</p>

<p>The core backing behind Rust’s memory model is <em>affine typing</em> and the <em>borrow checker</em>.
Values may only be bound to one identifier at a time, and borrows (a.k.a. references) may not
outlive the scope binding their referent.</p>

<p>For example, the following code is invalid:</p>

<div><pre><code><span>let</span> <span>x</span> <span>=</span> <span>vec!</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>];</span>
<span>let</span> <span>y</span> <span>=</span> <span>x</span><span>;</span>
<span>println!</span><span>(</span><span>"{x:?}"</span><span>);</span> <span>// compile error - x has already been moved</span>
</code></pre></div>

<p>Normally, we work around this by borrowing against a binding, such as by making <code>y = &amp;x</code> in the
example above.
However, we often need to share some heap-allocated value without knowing which binding will live
the longest.
The solution to this problem is shared ownership via garbage collection.</p>

<p>Rust’s standard library offers two simple reference-counted garbage collectors: the single-threaded
<a href="https://doc.rust-lang.org/std/rc/index.html"><code>Rc</code></a> and its atomically-indexed counterpart
<a href="https://doc.rust-lang.org/std/sync/struct.Arc.html"><code>Arc</code></a>.
They operate by maintaining a reference count in each heap allocation.
Under most circumstances, these work great, but they can’t handle cyclic references.
Combined with interior mutability, it’s trivial to refute them.</p>

<div><pre><code><span>use</span> <span>std</span><span>::{</span><span>cell</span><span>::</span><span>OnceCell</span><span>,</span> <span>rc</span><span>::</span><span>Rc</span><span>};</span>
<span>struct</span> <span>Foo</span><span>(</span><span>OnceCell</span><span>&lt;</span><span>Rc</span><span>&lt;</span><span>Foo</span><span>&gt;&gt;</span><span>);</span>

<span>let</span> <span>x</span> <span>=</span> <span>Rc</span><span>::</span><span>new</span><span>(</span><span>Foo</span><span>(</span><span>OnceCell</span><span>::</span><span>new</span><span>()));</span>
<span>x</span><span>.0</span><span>.set</span><span>(</span><span>Rc</span><span>::</span><span>clone</span><span>(</span><span>&amp;</span><span>x</span><span>));</span>
<span>// My foo has a reference to itself. It can never be freed!</span>
</code></pre></div>

<p>This is why people actually get paid money to build garbage collectors.
If using a reference counter were all you needed, a number of people working at Oracle would be out
of a job.</p>

<h2 id="battle-plan">Battle plan</h2>

<p>We’d like to create some <code>Gc</code> data structure with a similar API to <code>Rc</code> and <code>Arc</code>, which can accept
nearly any data type contained within, and still manage to detect and collect cycles.</p>

<p>We have a few weapons at our disposal:</p>

<ul>
  <li><strong><code>Drop</code></strong>: Every non-copiable data type in Rust can implement the <code>Drop</code> trait to ensure some
code is called every time it is dropped.
In our case, we can implement <code>Drop</code> for <code>Gc</code> to try to glean some knowledge about when an
allocation becomes inaccessible.</li>
  <li><strong>Traits</strong>: We can construct some trait (in our case, let’s call it <code>Collectable</code>) as a mandatory
requirement to be contained in a <code>Gc</code>.
Creating this trait has some major downsides (libraries upstream of <code>dumpster</code> can’t implement it)
but it’s a necessary evil.</li>
</ul>

<p>However, our formidable tools are matched by equally formidable challenges:</p>

<ul>
  <li><strong>Undetectable moves</strong>. When a value is moved in Rust, there is no way to detect that fact from
within that value.
If we had some sort of trait like <code>OnMove</code> which could allow for a function to be called every
time it had moved, we could use it to detect when a <code>Gc</code> moved inside another <code>Gc</code>, making it
unrooted, and allowing us to create a simple mark-sweep collector.
At this rate, though, we would just reinvent C++’s copy constructors.</li>
  <li><strong>Variable-sized data</strong>. I foolishly decided to make it so that <code>Gc</code> could store <code>?Sized</code> types,
which is more flexible for library users (enabling things like <code>Gc&lt;[T]&gt;</code>).</li>
  <li><strong>Type erasure</strong>. In a typical Rust program, generics are implemented via monomorphization, and
no type information is retained at runtime.
This makes it harder to clean up an allocation without prior context.</li>
</ul>

<p>With these two, relatively simple tools, we have enough to build a collector which can handle just
about any data type inside.</p>

<h2 id="my-approach">My approach</h2>

<p>We need to detect whether a <code>Gc</code> is reachable without actually scanning the stack.
I’ll start with a few definitions, using graph-theoretical language.</p>

<ol>
  <li>An allocation graph \(G = (V, E, r)\) is a directed graph with a root node \(r \in V\) whose
indegree is zero.</li>
  <li>A node \(v\) in an allocation graph is said to be <em>accessible</em> if and only if there exists a
path from \(r\) to \(v\) in the graph.</li>
</ol>

<p>It should be clear to see why these definitions are useful to us.
We can imagine each node being one allocation, pretending that all data not indirected through a
<code>Gc</code> is part of an imaginary allocation for the root.
Additionally, each <code>Gc</code> acts as an edge connecting two allocations.
If an allocation is accessible in the graph-theoretical sense, it’s still possible for a program to
reach it, and if not, it’s safe to free that allocation.
Note that the indegree of a node is precisely equal to the reference count of its corresponding
allocation.</p>

<p>I’ll roughly outline our approach to determining whether some node \(n: \neq r\) is accessible.</p>

<ol>
  <li>Find \(W\), the set of all descendants of \(n\).
Construct the subgraph \(H\) of \(G\) whose vertex set is \(W\), preserving all edges
connecting nodes in \(W\).</li>
  <li>Find the set of nodes \(A \subseteq W\) for which the indegree of each \(a \in A\) in \(H\)
is <em>not</em> equal to its indegree in \(G\).</li>
  <li>For each \(a \in A\), mark it and its descendants as accessible.</li>
  <li>If and only if \(n\) was marked as accessible, it is accessible.</li>
</ol>

<p>Here’s a serpentine implementation in pseudocode, if that’s what you prefer.</p>

<div><pre><code><span>def</span> <span>is_accessible</span><span>(</span><span>n</span><span>):</span>
    <span>counts</span> <span>=</span> <span>{</span><span>n</span><span>:</span> <span>n</span><span>.</span><span>indegree</span><span>()}</span>
    <span>for</span> <span>(</span><span>_</span><span>,</span> <span>m</span><span>)</span> <span>in</span> <span>n</span><span>.</span><span>edges</span><span>():</span>
        <span>dfs</span><span>(</span><span>m</span><span>,</span> <span>counts</span><span>)</span>

    <span>reachable</span> <span>=</span> <span>set</span><span>()</span>
    <span>for</span> <span>(</span><span>a</span><span>,</span> <span>count</span><span>)</span> <span>in</span> <span>counts</span><span>:</span>
        <span>if</span> <span>count</span> <span>!=</span> <span>0</span><span>:</span>
            <span>mark</span><span>(</span><span>a</span><span>,</span> <span>reachable</span><span>)</span>

    <span>return</span> <span>n</span> <span>in</span> <span>reachable</span>


<span>def</span> <span>dfs</span><span>(</span><span>n</span><span>,</span> <span>counts</span><span>):</span>
    <span>if</span> <span>n</span> <span>not</span> <span>in</span> <span>counts</span><span>.</span><span>keys</span><span>():</span>
        <span>counts</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>n</span><span>.</span><span>indegree</span><span>()</span>
        <span>for</span> <span>(</span><span>_</span><span>,</span> <span>m</span><span>)</span> <span>in</span> <span>n</span><span>.</span><span>edges</span><span>():</span>
            <span>dfs</span><span>(</span><span>m</span><span>,</span> <span>counts</span><span>)</span>

    <span>counts</span><span>[</span><span>n</span><span>]</span> <span>-=</span> <span>1</span>


<span>def</span> <span>mark</span><span>(</span><span>a</span><span>,</span> <span>reachable</span><span>):</span>
    <span>if</span> <span>a</span> <span>not</span> <span>in</span> <span>reachable</span><span>:</span>
        <span>reachable</span><span>.</span><span>add</span><span>(</span><span>a</span><span>)</span>
        <span>for</span> <span>(</span><span>_</span><span>,</span> <span>b</span><span>)</span> <span>in</span> <span>a</span><span>.</span><span>edges</span><span>():</span>
            <span>mark</span><span>(</span><span>b</span><span>,</span> <span>reachable</span><span>)</span>
</code></pre></div>

<p>It should be pretty clear to see that <code>is_accessible</code> runs in \(O(|V| + |E|)\) time.</p>



<p>Our single-threaded <code>Gc</code> will behave much like an <code>Rc</code>, but with some minor details changed.</p>

<p>First, we define a <code>Gc</code> and the allocation it points to, a <code>GcBox</code>.</p>

<div><pre><code><span>pub</span> <span>struct</span> <span>Gc</span><span>&lt;</span><span>T</span><span>:</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>{</span>
    <span>ptr</span><span>:</span> <span>NonNull</span><span>&lt;</span><span>GcBox</span><span>&lt;</span><span>T</span><span>&gt;&gt;</span>
<span>}</span>

<span>#[repr(C)]</span>
<span>struct</span> <span>GcBox</span><span>&lt;</span><span>T</span><span>:</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>{</span>
    <span>ref_count</span><span>:</span> <span>Cell</span><span>&lt;</span><span>usize</span><span>&gt;</span><span>,</span>
    <span>value</span><span>:</span> <span>T</span>
<span>}</span>
</code></pre></div>

<p>We can then hook into the <code>Drop</code> behavior for our <code>Gc</code> to make it all work.</p>

<div><pre><code><span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>Drop</span> <span>for</span> <span>Gc</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>drop</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>)</span> <span>{</span>
        <span>let</span> <span>box_ref</span> <span>=</span> <span>unsafe</span> <span>{</span> <span>self</span><span>.ptr</span><span>.as_ref</span><span>()</span> <span>};</span>
        <span>match</span> <span>box_ref</span><span>.ref_count</span><span>.get</span><span>()</span> <span>{</span>
            <span>0</span> <span>=&gt;</span> <span>(),</span>
            <span>n</span> <span>=&gt;</span> <span>{</span>
                <span>box_ref</span><span>.ref_count</span><span>.set</span><span>(</span><span>n</span> <span>-</span> <span>1</span><span>);</span>
                <span>if</span> <span>n</span> <span>==</span> <span>1</span> <span>||</span> <span>!</span><span>is_accessible</span><span>(</span><span>box_ref</span><span>)</span> <span>{</span>
                    <span>box_ref</span><span>.ref_count</span><span>.set</span><span>(</span><span>0</span><span>);</span>
                    <span>unsafe</span> <span>{</span>
                        <span>drop_in_place</span><span>(</span><span>addr_of_mut!</span><span>(</span><span>ptr</span><span>.as_mut</span><span>()</span><span>.value</span><span>));</span>
                        <span>dealloc</span><span>(</span><span>ptr</span><span>.as_ptr</span><span>()</span><span>.cast</span><span>(),</span> <span>Layout</span><span>::</span><span>for_value</span><span>(</span><span>ptr</span><span>.as_ref</span><span>()));</span>
                    <span>}</span>
                <span>}</span>
            <span>}</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>I, being very clever, decided to use a sentinel value of 0 for the reference count when an
allocation is being cleaned up (to prevent spurious double-frees).</p>

<p>However, this code has a problem - how the hell are we supposed to implement <code>is_accessible</code>?</p>

<h3 id="trait-hackery">Trait hackery</h3>

<p>Our pseudocode for <code>is_accessible</code> required us to be able to access the set of edges going out from
a node.
Doing so is kind of hard.
If we were writing this in C, we would scan the allocation on the heap, looking for data that
looked like they could be pointers into other allocations.
In Rust, though, we can be a lot more precise by adding a small constraint to every
garbage-collected type.</p>

<p>If the garbage collector wasn’t enough, we’re bringing the visitor pattern over from Java.
We force every garbage-collected value to implement the <code>Collectable</code> trait, which will delegate
some <code>Visitor</code> to each of its garbage-collected fields.</p>

<div><pre><code><span>pub</span> <span>struct</span> <span>Gc</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>{</span>
   <span>// same as before ...</span>
<span>}</span>

<span>pub</span> <span>trait</span> <span>Collectable</span> <span>{</span>
    <span>fn</span> <span>accept</span><span>&lt;</span><span>V</span><span>:</span> <span>Visitor</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>visitor</span><span>:</span> <span>&amp;</span><span>mut</span> <span>V</span><span>);</span>
<span>}</span>

<span>pub</span> <span>trait</span> <span>Visitor</span> <span>{</span>
    <span>fn</span> <span>visit_gc</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>,</span> <span>gc</span><span>:</span> <span>&amp;</span><span>Gc</span><span>&lt;</span><span>T</span><span>&gt;</span><span>);</span>
<span>}</span>
</code></pre></div>

<p>For example, an array might implement it by delegating to <code>accept</code> on each of its elements.</p>

<div><pre><code><span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span><span>&gt;</span> <span>Collectable</span> <span>for</span> <span>[</span><span>T</span><span>]</span> <span>{</span>
    <span>fn</span> <span>accept</span><span>&lt;</span><span>V</span><span>:</span> <span>Visitor</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>visitor</span><span>:</span> <span>&amp;</span><span>mut</span> <span>V</span><span>)</span> <span>{</span>
        <span>self</span><span>.iter</span><span>()</span><span>.for_each</span><span>(|</span><span>elem</span><span>|</span> <span>elem</span><span>.accept</span><span>(</span><span>visitor</span><span>));</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>We can now write code that finds the outgoing edges from each allocation by simply applying a
visitor to the allocation.
I ended up writing two visitors - one for the <code>dfs</code> step and one for the <code>mark</code> step.</p>

<p>I would have liked to make <code>Collectable</code> object-safe, but that would also require <code>Visitor</code> to be
object safe.
That, in turn, would cause every garbage collector to be coercible to <code>Gc&lt;dyn Collectable&gt;</code>, which
would only be possible on nightly, making it impossible to write a stable crate.</p>

<h3 id="bulk-dropping">Bulk dropping</h3>

<p>A cursory analysis of the implementation of <code>Drop</code> above shows that the call to <code>is_accessible</code> runs
in linear time with respect to the total number of <code>Gc</code>s existing.
You would be excused for thinking that <code>drop</code>, as written, runs in linear time.
However, the call to <code>drop_in_place</code> could also result in another <code>Gc</code> being dropped, yielding
a quadratic-time cleanup.
This is unacceptable, especially since our first call to <code>is_accessible</code> actually did all the work
of determining whether the allocations are reachable from the original one - if the original
allocation being freed was inaccessible, any allocation referred to by it should also be
inaccessible.</p>

<p>We can save our time on marking by a pretty simple method: we’ll do one more pass through the
reference graph, recording a pointer to each allocation to be destroyed and its implementation of
<code>drop</code>. Then, once we’ve found every inaccessible allocation, we’ll drop them all in one quick go.</p>

<p>There’s one final problem, though: each <code>Gc</code> owned by a dropped value could itself try to manipulate
the reference counts of its pointees, resulting in undefined behavior, or worse, slow code.
However, all problems in computer science can be solved by adding more state or more indirection.
We opt to solve it with extra state this time, creating a thread-local value called <code>COLLECTING</code>.</p>

<p>When we do a bulk-drop, we set <code>COLLECTING</code> to <code>true</code>.
Then, when we call <code>drop</code> on a <code>Gc</code>, it checks the state of <code>COLLECTING</code>.
If <code>COLLECTING</code> is true, the <code>Gc</code> does nothing when dropped (not even affecting its reference
count).
To handle outbound edges to still-accessible allocations, we add one more traversal before the final
cleanup to handle outbound edges.</p>

<p>Let’s take a look at what the code for that roughly looks like now.</p>

<div><pre><code><span>thread_local!</span> <span>{</span>
    <span>static</span> <span>COLLECTING</span><span>:</span> <span>Cell</span><span>&lt;</span><span>bool</span><span>&gt;</span> <span>=</span> <span>Cell</span><span>::</span><span>new</span><span>(</span><span>false</span><span>);</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>Drop</span> <span>for</span> <span>Gc</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>drop</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>)</span> <span>{</span>
        <span>if</span> <span>COLLECTING</span><span>.with</span><span>(</span><span>Cell</span><span>::</span><span>get</span><span>)</span> <span>{</span> <span>return</span><span>;</span> <span>}</span>
        <span>let</span> <span>box_ref</span> <span>=</span> <span>unsafe</span> <span>{</span> <span>self</span><span>.ptr</span><span>.as_ref</span><span>()</span> <span>};</span>
        <span>match</span> <span>box_ref</span><span>.ref_count</span><span>.get</span><span>()</span> <span>{</span>
            <span>0</span> <span>=&gt;</span> <span>(),</span>
            <span>1</span> <span>=&gt;</span> <span>{</span>
                <span>box_ref</span><span>.ref_count</span><span>.set</span><span>(</span><span>0</span><span>);</span>
                <span>unsafe</span> <span>{</span>
                    <span>drop_in_place</span><span>(</span><span>addr_of_mut!</span><span>(</span><span>ptr</span><span>.as_mut</span><span>()</span><span>.value</span><span>));</span>
                    <span>dealloc</span><span>(</span><span>ptr</span><span>.as_ptr</span><span>()</span><span>.cast</span><span>(),</span> <span>Layout</span><span>::</span><span>for_value</span><span>(</span><span>ptr</span><span>.as_ref</span><span>()));</span>
                <span>}</span>
            <span>}</span>
            <span>n</span> <span>=&gt;</span> <span>{</span>
                <span>box_ref</span><span>.ref_count</span><span>.set</span><span>(</span><span>n</span> <span>-</span> <span>1</span><span>);</span>
                <span>unsafe</span> <span>{</span> <span>collect</span><span>(</span><span>self</span><span>.ptr</span><span>)</span> <span>};</span>
            <span>}</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p><code>collect</code> is the function we’ll write to check if the allocation is accessible and perform a bulk
cleanup if needed.
There’s one more problem before we can implement <code>collect</code>, though: our psuedocode required us to be
able to store each allocation as a key in <code>counts</code> and also to access the allocation’s neighbors.
This means we have to use a little bit of type erasure to achieve our ends.
I won’t go into too much detail, but we need to be able to do two things:</p>

<ul>
  <li>Store pointers to allocations as keys in a hash-map.</li>
  <li>Reconstruct a stored pointer using type information to make it possible to do work.</li>
</ul>

<p>Due to the limitations of Rust, these are actually mutually exclusive.
Because it’s undefined behavior (due to provenance issues) to compare the raw data in pointers, we
can’t erase a pointer and then use it as a key in a hash-map.
However, we can’t just get a pointer to the first byte of the allocation, because our allocation
could be <code>?Sized</code>.</p>

<p>As a result, my implementation actually has two different kinds of erased pointers: a thin pointer
which can be used for comparisons and a fat pointer which can be used to reconstruct a pointer to
any type.</p>

<div><pre><code><span>struct</span> <span>AllocationId</span><span>(</span><span>NonNull</span><span>&lt;</span><span>Cell</span><span>&lt;</span><span>usize</span><span>&gt;&gt;</span><span>);</span> <span>// used as a key in hash-maps</span>
<span>struct</span> <span>ErasedPtr</span><span>([</span><span>usize</span><span>;</span> <span>2</span><span>]);</span>              <span>// used as a reconstructible pointer to the allocation</span>
</code></pre></div>

<p>Then, all the functions which need to know the type information of the allocation (such as <code>dfs</code> and
<code>mark</code>) can be stored opaquely as function pointers, and when called, they can “rehydrate” the
<code>ErasedPtr</code> passed in with type information.</p>

<p>Below, I’ve included an example of how it can be used to implement <code>dfs</code>.</p>

<div><pre><code><span>unsafe</span> <span>fn</span> <span>dfs</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span><span>(</span>
    <span>ptr</span><span>:</span> <span>ErasedPtr</span><span>,</span>
    <span>counts</span><span>:</span> <span>&amp;</span><span>mut</span> <span>HashMap</span><span>&lt;</span><span>AllocationId</span><span>,</span> <span>usize</span><span>&gt;</span>
<span>)</span> <span>{</span>
    <span>struct</span> <span>DfsVisitor</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>{</span>
       <span>counts</span><span>:</span> <span>&amp;</span><span>'a</span> <span>mut</span> <span>HashMap</span><span>&lt;</span><span>AllocationId</span><span>,</span> <span>usize</span><span>&gt;</span><span>,</span>
    <span>}</span>

    <span>impl</span> <span>Visitor</span> <span>for</span> <span>DfsVisitor</span><span>&lt;</span><span>'_</span><span>&gt;</span> <span>{</span>
        <span>fn</span> <span>visit_gc</span><span>&lt;</span><span>U</span><span>&gt;</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>,</span> <span>gc</span><span>:</span> <span>&amp;</span><span>Gc</span><span>&lt;</span><span>U</span><span>&gt;</span><span>)</span> <span>{</span>
            <span>let</span> <span>id</span> <span>=</span> <span>AllocationId</span><span>::</span><span>new</span><span>(</span><span>gc</span><span>.ptr</span><span>);</span>

            <span>if</span> <span>counts</span><span>.insert</span><span>(</span><span>id</span><span>,</span> <span>unsafe</span> <span>{</span> <span>gc</span><span>.ptr</span><span>.as_ref</span><span>()</span><span>.ref_count</span><span>.get</span><span>()</span> <span>})</span> <span>{</span>
                <span>(</span><span>**</span><span>gc</span><span>)</span><span>.accept</span><span>(</span><span>self</span><span>);</span>
            <span>}</span>

            <span>*</span><span>counts</span><span>.get_mut</span><span>(</span><span>&amp;</span><span>id</span><span>)</span><span>.unwrap</span><span>()</span> <span>-=</span> <span>1</span><span>;</span>
        <span>}</span>
    <span>}</span>
    <span>// pretend that `specify` converts the pointer back into NonNull&lt;T&gt;</span>
    <span>let</span> <span>specified</span> <span>=</span> <span>ptr</span><span>.specify</span><span>::</span><span>&lt;</span><span>T</span><span>&gt;</span><span>();</span>
    <span>specified</span><span>.as_ref</span><span>()</span><span>.accept</span><span>(</span><span>&amp;</span><span>mut</span> <span>DfsVisitor</span> <span>{</span> <span>counts</span> <span>});</span>
<span>}</span>
</code></pre></div>

<p>I won’t include the implementation of <code>collect</code> here because it’s lengthy and not even the
final revision of the cleanup algorithm, but you can trust me that it works.
After much gnashing of teeth and tearing of hair, this is finally enough to achieve bulk dropping,
making calling <code>drop()</code> on a <code>Gc</code> a linear-time operation.</p>

<h3 id="amortizing">Amortizing</h3>

<p>What’s that, you say?
You need your reference operations to work in \(O(1)\) time?
Why are programmers these days so picky?</p>

<p>Luckily, it isn’t too hard to make our garbage-collection efforts terminate in average-case
\(O(1)\) time.
Instead of calling <code>collect</code> directly, we’ll just punt the allocation, which may be inaccessible,
into a set of “dirty” allocations.
In my code, I call that set a dumpster.
Then, once every \(|E|\) times an allocation is dropped, we’ll go through the whole dumpster and
collect them all in \(O(|E|)\) time.
Amortized across all allocations, that’s technically \(O(1)\), enabled by the same accounting
wizardry that makes array-backed lists useful and that caused the 2008 financial crisis.</p>

<p>To save ourselves a little bit of work, whenever an allocation is accessed (such as by dereferencing
or cloning), we can yank the allocation away from that same dirty set since it was just proven to be
accessible.</p>

<h2 id="are-we-concurrent-yet">Are we concurrent yet?</h2>

<p>So far, the garbage collector I’ve been outlining to you has been a single-threaded collector, which
can only store thread-local garbage-collected values.
I’m told that all code worth writing ends up being concurrent, so we have to do better than that.
Lucky for us, this algorithm can be made to operate concurrently with little effort, assuming that
only one thread collects at a time.</p>

<p>However, even if only one thread is collecting, we can still run into some nasty concurrency issues.
Let’s imagine that we have 2 allocations, \(a\) and \(b\), plus the imaginary “root” allocation
\(r\), where \(a\) can only be accessed from \(r\) and \(b\) can only be accessed from
\(a\).</p>

<pre><code>flowchart LR
  r("r")

  a --&gt; b
  r --&gt; a
</code></pre>

<p>Now, consider performing a depth-first search starting from \(a\).
First, we record that \(a\) has 1 unaccounted-for-reference in <code>counts</code>.
Then, we move on to looking at \(b\) because it’s one of \(a\)’s children.</p>

<p>However, between when we record \(a\)’s reference count and examine \(b\), another malicious
thread mutates \(b\), adding a back-reference from \(b\) to \(a\).</p>

<pre><code>flowchart LR
  r("r")

  a --&gt; b
  b --&gt; a
  r --&gt; a
</code></pre>

<p>Then, the depth-first search will return to \(a\), decrement the number of unaccounted references,
and assume that all incoming references to \(a\) and \(b\) were totally accounted for (and
therefore inaccessible).
Then the garbage collector would happily destroy \(a\) and \(b\)’s allocations, leaving a
dangling reference to the heap, potentially causing a use-after-free or other gnarly memory errors.</p>

<h3 id="resolving-concurrency">Resolving concurrency</h3>

<p>The simplest solution to this concurrency issue is to just wrap everything in a big fat lock by
forcing every single operation involving a <code>Gc</code> to acquire a single global mutex, preventing any
sort of concurrency bugs at all.
However, that’s ridiculously slow.</p>

<p>We’d like to have an approach that only needs to achieve mutual exclusion over a small subset of
all allocations if at all possible.
To do so, let’s take a closer look at our concurrency problem: we can see that we only really get
erroneous results when another thread mutates the subgraph \(H\) as we interact with it.
The solution is quite clever - we tag every <code>Gc</code> with a special number, which I’ll call a collecting
tag.</p>

<p>First, we’ll add a global atomic integer called the <code>COLLECTING_TAG</code>.</p>

<div><pre><code><span>static</span> <span>COLLECTING_TAG</span><span>:</span> <span>AtomicUsize</span> <span>=</span> <span>AtomicUsize</span><span>::</span><span>new</span><span>(</span><span>0</span><span>);</span>
</code></pre></div>

<p>Whenever we create or clone a new <code>Gc</code>, we’ll annotate it with the current value of
<code>COLLECTING_TAG</code>.</p>

<div><pre><code><span>// this new `Gc` type is intended to be `Sync`.</span>

<span>pub</span> <span>struct</span> <span>Gc</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>Send</span> <span>+</span> <span>Sync</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>{</span>
    <span>ptr</span><span>:</span> <span>NonNull</span><span>&lt;</span><span>GcBox</span><span>&lt;</span><span>T</span><span>&gt;&gt;</span><span>,</span>
    <span>tag</span><span>:</span> <span>AtomicUsize</span><span>,</span>
<span>}</span>

<span>impl</span> <span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>Send</span> <span>+</span> <span>Sync</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>Gc</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>pub</span> <span>fn</span> <span>new</span><span>(</span><span>x</span><span>:</span> <span>T</span><span>)</span> <span>-&gt;</span> <span>Gc</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
        <span>// (other bookkeeping hidden)</span>

        <span>Gc</span> <span>{</span>
            <span>ptr</span><span>:</span> <span>/* initialization of GcBox&lt;T&gt; */</span><span>,</span>
            <span>tag</span><span>:</span> <span>COLLECTING_TAG</span><span>.load</span><span>(</span><span>Ordering</span><span>::</span><span>Relaxed</span><span>),</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>Next, at the start of the collection process, we’ll increment the value of <code>COLLECTING_TAG</code> just
before we call <code>dfs</code>.</p>

<div><pre><code><span>fn</span> <span>collect</span><span>()</span> <span>{</span>
    <span>COLLECTING_TAG</span><span>.fetch_add</span><span>(</span><span>1</span><span>,</span> <span>Ordering</span><span>::</span><span>Relaxed</span><span>);</span>
    <span>// carry on with DFS and such</span>
<span>}</span>
</code></pre></div>

<p>Lastly, whenever we encounter a <code>Gc</code> during the <code>dfs</code> process, we’ll check its tag.
If the tag is equal to the current value of <code>COLLECTING_TAG</code>, that means the <code>Gc</code> was created after
<code>dfs</code> started.
If so, then whatever spot we found the <code>Gc</code> in must have been accessible, and we can mark it as so.
To prevent us from visiting the same edge twice (due to shenanigans), we’ll also update the tag
on every edge we visit to the value of <code>COLLECTING_TAG</code>.</p>

<p>Let’s return to our broken example to show how this modification fixes it.
We return to our reference graph with \(a\) pointing to \(b\) and \(r\) pointing to \(a\).
Since every <code>Gc</code> must be annotated with a tag, let’s say they’re all tagged with 0.</p>

<pre><code>graph LR
  r("r")

  r -- "0" --&gt; a
  a -- "0" --&gt; b
</code></pre>

<p>Next, when <code>dfs</code> begins, <code>COLLECTING_TAG</code> is incremented to 1.
As a result, the new reference created by a malicious thread must be tagged with 1.</p>

<pre><code>graph LR
   r("r")
   r -- "0" --&gt; a
   a -- "0" --&gt; b
   b -- "1" --&gt; a
</code></pre>

<p>Now, when <code>dfs</code> visits the edge pointing from \(b\) to \(a\), it sees that the reference is
labeled with a tag of 1, and therefore both \(b\) and \(a\) must be accessible - no accidental
early deallocations here.</p>

<h3 id="moving-in-and-out">Moving in and out</h3>

<p>We might hope that tagging the pointers is sufficient to prevent all concurrency bugs.
However, this is sadly not enough.
To show why, we’ll begin with an example.</p>

<p>First, let’s imagine an allocation called \(x\), which contains two optional references to itself.</p>

<div><pre><code><span>struct</span> <span>X</span> <span>{</span>
    <span>x1</span><span>:</span> <span>Mutex</span><span>&lt;</span><span>Option</span><span>&lt;</span><span>Gc</span><span>&lt;</span><span>X</span><span>&gt;&gt;&gt;</span><span>,</span>
    <span>x2</span><span>:</span> <span>Mutex</span><span>&lt;</span><span>Option</span><span>&lt;</span><span>Gc</span><span>&lt;</span><span>X</span><span>&gt;&gt;&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>At the start of our example, there will be only one <code>Gc</code> pointing from inside \(x\) to itself, and
the other slot that can hold a <code>Gc</code> will be empty.
\(x\) is accessible directly from the root allocation \(r\), and all existing references are
tagged with 0.
For the sake of clarity, I’ll draw the arrow representing the first slot in \(x\) with a solid
line and the second slot with a dashed line.</p>

<pre><code>graph LR
  r("r")

  r -- "0" --&gt; x
  x -- "0" --&gt; x
  x -.-&gt; nowhere[ ]

  style nowhere fill:#FFFFFF00, stroke:#FFFFFF00;
</code></pre>

<p>Now, let’s have <code>dfs</code> begin, starting at \(x\).</p>

<ol>
  <li>We increment <code>COLLECTING_TAG</code> to 1.</li>
  <li><code>dfs</code> records that \(x\) has 2 unaccounted-for references at the start.</li>
  <li><code>dfs</code> visits the \(x\)’s first slot and tags the currently-existing self reference in that
slot.
\(x\) now has 1 unaccounted-for reference.</li>
</ol>

<pre><code>graph LR
  r("r")

  r -- "0" --&gt; x
  x -- "1" --&gt; x
  x -.-&gt; nowhere[ ]

  style nowhere fill:#FFFFFF00, stroke:#FFFFFF00;
</code></pre>

<ol start="4">
  <li>A malicious thread intervenes, first moving the <code>Gc</code> from \(x\)’s first slot to \(r\),
then moving the original <code>Gc</code> which connected \(r\) to \(x\) into \(x\)’s second slot.</li>
</ol>

<div><pre><code><span>fn</span> <span>do_evil</span><span>(</span><span>r_to_x</span><span>:</span> <span>Gc</span><span>&lt;</span><span>X</span><span>&gt;</span><span>)</span> <span>{</span>
    <span>let</span> <span>z</span> <span>=</span> <span>std</span><span>::</span><span>mem</span><span>::</span><span>take</span><span>(</span><span>&amp;</span><span>mut</span> <span>*</span><span>r_to_x</span><span>.x1</span><span>.lock</span><span>()</span><span>.unwrap</span><span>());</span>
    <span>*</span><span>z</span><span>.x2</span><span>.lock</span><span>()</span><span>.unwrap</span><span>()</span> <span>=</span> <span>r_to_x</span><span>;</span>
<span>}</span>
</code></pre></div>

<pre><code>graph LR
  r("r")

  r -- "1" --&gt; x
  x --&gt; nowhere[ ]
  x -. "0" .-&gt; x

  style nowhere fill:#FFFFFF00, stroke:#FFFFFF00;
</code></pre>

<ol start="5">
  <li><code>dfs</code> continues, now visiting the second slot in \(x\).
Seeing another reference to \(x\), we decrement the number of unaccounted-for references to 0.</li>
  <li><code>dfs</code> found no ancestors of \(x\) with unaccounted-for ancestors, so we free \(x\).
However, \(x\) is still accessible!</li>
</ol>

<p>This problem stumped me for a decent while.
It seems impossible to prevent other threads from do-si-do-ing every <code>Gc</code> pointing to an allocation
in order to fool our search.
Luckily, there is a way through.
Since tagging every <code>Gc</code> worked out for us before, we’ll try tagging every allocation.</p>

<div><pre><code><span>#[repr(C)]</span>
<span>struct</span> <span>GcBox</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>Send</span> <span>+</span> <span>Sync</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>{</span>
    <span>ref_count</span><span>:</span> <span>AtomicUsize</span><span>,</span>
    <span>tag</span><span>:</span> <span>AtomicUsize</span><span>,</span>
    <span>value</span><span>:</span> <span>T</span>
<span>}</span>
</code></pre></div>

<p>Next, every time a <code>Gc</code> is dereferenced, we’ll update the tag in the allocation to the current
value of <code>COLLECTING_TAG</code>.</p>

<div><pre><code><span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>Send</span> <span>+</span> <span>Sync</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>std</span><span>::</span><span>ops</span><span>::</span><span>Deref</span> <span>for</span> <span>GcBox</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>type</span> <span>Target</span> <span>=</span> <span>T</span><span>;</span>

    <span>fn</span> <span>deref</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>&amp;</span><span>Self</span><span>::</span><span>Target</span> <span>{</span>
        <span>let</span> <span>box_ref</span><span>:</span> <span>&amp;</span><span>GcBox</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>=</span> <span>unsafe</span> <span>{</span> <span>self</span><span>.ptr</span><span>.as_ref</span><span>()</span> <span>};</span>
        <span>box_ref</span><span>.tag</span><span>.store</span><span>(</span><span>COLLECTING_TAG</span><span>.load</span><span>(</span><span>Ordering</span><span>::</span><span>Acquire</span><span>),</span> <span>Ordering</span><span>::</span><span>Release</span><span>);</span>
        <span>&amp;</span><span>box_ref</span><span>.value</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>Whenever <code>dfs</code> observes that the tag on an allocation is equal to <code>COLLECTING_TAG</code>, that means that
the allocation was accessed, and therefore accessible.
In order to shuffle references around in our above example, the malicious thread would have to
dereference a <code>Gc</code>, notifying the search and preventing an early deallocation.</p>

<p>In fact, this is enough to prove that <code>dfs</code> will <em>never</em> incorrectly mark an allocation as
inaccessible, even under concurrent execution.
This blog post is already rather long, so I’ll only provide a rough sketch of the proof.</p>

<p><strong>Theorem: <code>dfs</code> will never erroneously mark an allocation as inaccessible.</strong></p>

<p>Proof:</p>

<ol>
  <li>If <code>dfs</code> encounters a <code>Gc</code> created after <code>dfs</code> begins, it will know that the referent is
accessible.</li>
  <li>Due to (1), if <code>dfs</code> marked some allocation \(a\) as inaccessible, it must have only visited
<code>Gc</code>s pointing to \(a\) which existed before <code>dfs</code> began.</li>
  <li>Weakening the statement from (2), if <code>dfs</code> marked some allocation \(a\) as inaccessible, it
must have only visited <code>Gc</code>s pointing to \(a\) which existed when \(a\)’s reference count was
recorded.</li>
  <li><code>dfs</code> never visits a <code>Gc</code> while it points from the root allocation \(r\) to any other
allocation.</li>
  <li><code>dfs</code> must visit every <code>Gc</code> which pointed to an allocation at the point when its reference count
was recorded in order to mark it as inaccessible.</li>
  <li>Due to (4) and (5), if \(a\) is marked as inaccesssible, any <code>Gc</code> which at any point connected
\(r\) to \(a\) must have been moved to connect another node (not \(r\)) to \(a\).</li>
  <li>Due to (6), there is no lifetime <code>'x</code> which can borrow against a <code>Gc</code> pointing from \(r\) to
\(a\) and last between when <code>dfs</code> first visits \(a\) and when it last visits \(a\).</li>
  <li>The final <code>Gc</code> to move into \(a\) before <code>dfs</code> must have been moved while another borrow
against a <code>Gc</code> pointing from \(r\) to \(a\) existed.
Let the lifetime of that borrow be <code>'y</code>.</li>
  <li>Because <code>'y</code> lasts longer than the final move, <code>'y</code> can be extended to last arbitrarily long,
even until after <code>dfs</code> has finished visiting every <code>Gc</code> pointing to \(a\).</li>
  <li>Due to (7), <code>'y</code> must not have existed before <code>dfs</code> first visited \(a\).
Therefore, if \(a\) is erroneously marked as inaccessible, a <code>Gc</code> pointing to \(a\) must have
been dereferenced to generate a borrow with lifetime <code>'y</code>.</li>
  <li>If a <code>Gc</code> pointing to \(a\) was dereferenced before the last time <code>dfs</code> visited a <code>Gc</code> pointing
to \(a\), then <code>dfs</code> would have observed that \(a\)’s tag had changed.
Therefore, if an allocation was erroneously marked as inaccessible, it must have been marked as
accessible.
Therefore no allocations were ever erroneously marked as inacessible by <code>dfs</code>.
QED.</li>
</ol>

<p>This proof is relatively handwavy, but it should be possible for an astute reader to fill in the
details.
I will leave it to such astute readers to prove the complementary proof to this; namely, that <code>dfs</code>
will never erroneously mark an allocation as accessible.</p>

<p>I also think that it’s really cool that the entire mechanism of the correctness of this approach is
totally supported by Rust’s borrow checking semantics.
It makes the whole thing feel like it fits right in.</p>

<h3 id="its-the-weak-ones-that-count">It’s the weak ones that count</h3>

<p>There’s one more cause for memory safety issues from concurrency.
If an allocation is freed because its reference count reached zero, it could still be accessible
by another thread because it was stored in the global dumpster.
We can’t guarantee that we’ve obliterated all references to that allocation from every other
thread’s memory, so it seems like we’re hosed.</p>

<p>However, there’s no problem in computer science that can’t be solved by adding more state.
Taking a leaf from <code>Rc</code>’s book and adapting it liberally, we annotate each allocation with a “weak”
reference count, which is the number of times it’s referenced by a dumpster or cleanup thread.
We’ll rename our original reference count to be the strong count instead.</p>

<div><pre><code><span>#[repr(C)]</span>
<span>struct</span> <span>GcBox</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>Send</span> <span>+</span> <span>Sync</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>{</span>
    <span>strong</span><span>:</span> <span>AtomicUsize</span><span>,</span>
    <span>weak</span><span>:</span> <span>AtomicUsize</span><span>,</span>
    <span>tag</span><span>:</span> <span>AtomicUsize</span><span>,</span>
    <span>value</span><span>:</span> <span>T</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>Then, when dropping the last strong reference to a <code>Gc</code>, we first check that its weak reference
count is nonzero before we can deallocate it.
If not, it’s the cleanup threads’ problem to take care of it.</p>

<p>Whenever an allocation is removed from a dumpster and about to be thrown away by a thread running
a cleanup procedure, the thread decrements the weak count of the allocation and checks if both the
weak and strong count have reached zero.
If so, that thread can then safely destroy the allocation.</p>

<h3 id="deadlocked">Deadlocked!</h3>

<p>Imagine that we want to create a <code>Gc&lt;Mutex&lt;()&gt;&gt;</code>, and then drop a <code>Gc</code> pointing to it while the
<code>Mutex</code> is locked.</p>

<div><pre><code><span>let</span> <span>gc1</span> <span>=</span> <span>Gc</span><span>::</span><span>new</span><span>(</span><span>Mutex</span><span>::</span><span>new</span><span>(()));</span>
<span>let</span> <span>gc2</span> <span>=</span> <span>gc1</span><span>.clone</span><span>();</span>

<span>let</span> <span>guard</span> <span>=</span> <span>gc1</span><span>.lock</span><span>()</span><span>?</span><span>;</span>
<span>drop</span><span>(</span><span>gc2</span><span>);</span> <span>// suppose this triggers a cleanup</span>
<span>drop</span><span>(</span><span>guard</span><span>);</span>
</code></pre></div>

<p>While traversing the reference graph, the <code>dfs</code> visitor would attempt to visit the mutex, lock it,
and try to carry on.
However, since the same thread that triggered the allocation still holds a guard to that mutex, the
thread would deadlock disastrously.
Lucky for us, we know that any allocation with a held mutex guard must still be accessible (due to
<code>Mutex</code>’s excellent API), so we can be certain that if we fail to acquire a mutex, we have immediate
proof that an allocation is accessible.</p>

<p>To take advantage of that, we’ll make visiting a collectable type a fallible operation, and make it
so that failing to acquire a lock also fails the visit.</p>

<div><pre><code><span>pub</span> <span>trait</span> <span>Collectable</span> <span>{</span>
    <span>fn</span> <span>accept</span><span>&lt;</span><span>V</span><span>:</span> <span>Visitor</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>visitor</span><span>:</span> <span>&amp;</span><span>mut</span> <span>V</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>(),</span> <span>()</span><span>&gt;</span><span>;</span>
<span>}</span>

<span>pub</span> <span>trait</span> <span>Visitor</span> <span>{</span>
    <span>fn</span> <span>visit_gc</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>,</span> <span>gc</span><span>:</span> <span>&amp;</span><span>Gc</span><span>&lt;</span><span>T</span><span>&gt;</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>(),</span> <span>()</span><span>&gt;</span><span>;</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Collectable</span> <span>+</span> <span>?</span><span>Sized</span><span>&gt;</span> <span>Collectable</span> <span>for</span> <span>Mutex</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>accept</span><span>&lt;</span><span>V</span><span>:</span> <span>Visitor</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>visitor</span><span>:</span> <span>&amp;</span><span>mut</span> <span>V</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>(),</span> <span>()</span><span>&gt;</span> <span>{</span>
        <span>// pretend poison errors don't exist</span>
        <span>self</span><span>.try_lock</span><span>()</span><span>.map_err</span><span>(|</span><span>_</span><span>|</span> <span>())</span><span>?</span><span>.accept</span><span>(</span><span>visitor</span><span>);</span>
        <span>Ok</span><span>(())</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<h3 id="sharing-your-dumpsters">Sharing your dumpsters</h3>

<p><img src="https://claytonwramsey.github.io/assets/img/dumpster/garbagetruck.jpg" alt="
    A hand-drawn garbage truck in ink on a white background.
    It's crudely done, as if drawn by the sort of person who knows what perspective is but doesn't
    quite understand how it works.
"></p>

<p>You’ve made it this far into this (admittedly rather lengthy) post.
Enjoy this hand-drawn picture by yours truly.</p>

<p>When implementing this garbage collector, one of the biggest bottlenecks with concurrent performance
is accessing the one, global dumpster every single time a <code>Gc</code> is dropped.
If using a <code>Mutex&lt;HashMap&gt;</code>, this will remove nearly all parallelism from the whole system and
make you wonder why you paid all that money for a 16-core computer.</p>

<p>As a result, any sane person might lean for a concurrent hashmap.
There are many Rust implementations - I tried
<a href="https://gitlab.redox-os.org/redox-os/chashmap"><code>chashmap</code></a> but gave up on it due to a
<a href="https://gitlab.redox-os.org/redox-os/chashmap/-/issues/3">rare panic bug</a>, and then I tried
<a href="https://github.com/xacrimon/dashmap"><code>dashmap</code></a>, which worked fine but was too slow as thread
counts increased.</p>

<p>The heart of the issue is that concurrently updating any data structure is going to be slow.
Even so-called “concurrent” data structures which use clever sharded locks have this issue - there’s
always some contention overhead.
The best workaround to concurrency slowdowns is to just not do things concurrently.
We can fix this by making every thread have its own dumpster, and then having a global collection
of to-be-cleaned allocations which I’ll call the <em>garbage truck</em>.
Whenever another allocation is marked dirty, we can check if this thread’s dumpster is full
according to some heuristic, and if so, transfer all the allocations from this thread’s dumpster
to the garbage truck.
I’ve included some pseudocode for the whole process below.</p>

<div><pre><code><span>dumpster</span> <span>=</span> <span>set</span><span>()</span> <span># local to this thread
</span><span>garbage_truck</span> <span>=</span> <span>mutex</span><span>(</span><span>set</span><span>())</span> <span># global to all threads
</span>
<span>def</span> <span>mark_dirty</span><span>(</span><span>allocation</span><span>):</span>
    <span>dumpster</span><span>.</span><span>add</span><span>(</span><span>allocation</span><span>)</span>
    <span>if</span> <span>is_full</span><span>(</span><span>dumpster</span><span>):</span>
        <span>garbage_truck</span><span>.</span><span>lock</span><span>()</span>
        <span>for</span> <span>trash_bag</span> <span>in</span> <span>dumpster</span><span>:</span>
            <span>garbage_truck</span><span>.</span><span>add</span><span>(</span><span>trash_bag</span><span>)</span>
        <span>garbage_truck</span><span>.</span><span>unlock</span><span>()</span>
        <span>dumpster</span> <span>=</span> <span>set</span><span>()</span>
</code></pre></div>

<p>If <code>is_full</code> returns <code>true</code> rarely enough, there will be almost no contention over the garbage
truck.
This means that the concurrency overhead is vastly reduced and we get to pocket some great
performance returns.</p>

<h2 id="okay-but-how-fast-is-it">Okay, but how fast is it?</h2>

<p>In short, this garbage collector runs pretty fast!</p>

<p>In the end, I made two different garbage collector implementations - one which is thread-local,
saving us from all the concurrency headaches, and another thread-safe one that has all the bells and
whistles at the cost of some performance.
Borrowing from <a href="https://github.com/matklad/once_cell"><code>once_cell</code></a>’s API, the former lives in the
<code>unsync</code> module of the crate and the latter in <code>sync</code>.</p>

<p>Next, I collected all the garbage collectors I could find in order to compare them.
I selected all the ones which had a similar API to <code>dumpster</code>, were published on
<a href="https://crates.io/">crates.io</a>, and actually worked.</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Concurrent?</th>
      <th>Like <code>dumpster</code>?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dumpster</code> (unsync)</td>
      <td>❌</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code>dumpster</code> (sync)</td>
      <td>✅</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="https://doc.rust-lang.org/std/rc/struct.Rc.html"><code>Rc</code></a></td>
      <td>❌</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="https://doc.rust-lang.org/std/sync/struct.Arc.html"><code>Arc</code></a></td>
      <td>✅</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="https://github.com/fitzgen/bacon-rajan-cc"><code>bacon-rajan-cc</code></a></td>
      <td>❌</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="https://github.com/artichoke/cactusref"><code>cactusref</code></a></td>
      <td>❌</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><a href="https://github.com/wusyong/elise"><code>elise</code></a></td>
      <td>✅</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><a href="https://github.com/Manishearth/rust-gc"><code>gc</code></a></td>
      <td>❌</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="https://github.com/quark-zju/gcmodule"><code>gcmodule</code></a></td>
      <td>yes, but with a different API</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="https://github.com/jonas-schievink/rcgc"><code>rcgc</code></a></td>
      <td>❌</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><a href="https://github.com/Others/shredder"><code>shredder</code></a></td>
      <td>✅</td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p>I excluded the ones that didn’t have a <code>dumpster</code>-like API because it would have been a pain to set
up a benchmarking harness to handle them.
If you feel this is poor diligence, you can go benchmark them yourself.
I also included <code>Rc</code> and <code>Arc</code>, even though they don’t collect cycles, because they’re a decent
baseline for the minimum performance of a garbage collector.
During my research, I also found that <code>bacon-rajan-cc</code> doesn’t initiate collections of its own
accord, so I added a version of each of <code>dumpster</code>’s garbage collectors which doesn’t automatically
trigger collections in the spirit of competitive fairness.
Those versions are labeled as “manual.”
Lastly, I found that <code>gcmodule</code> simply stack-overflows and sometimes segfaults when facing extremely
large collection loads, so I removed it from the benchmark set.</p>

<p>As my benchmark, I decided to do the very simplest thing I could think of: have a bunch of
allocations randomly add and remove references to each other in a loop, dropping and creating new
allocations as well.
To account for random noise, I ran 100 trials of each garbage collector doing 1 million operations.
Each operation is either the creation of a reference or a deletion.</p>

<p>First, I ran a benchmark of all the garbage collectors, measuring pure single-threaded performance.
I’ve shown my benchmark results as a set of violin plots below, relating runtime to frequency.</p>

<p><img src="https://claytonwramsey.github.io/assets/img/dumpster/single_threaded.png" alt="
    A violin plot, titled &quot;Single-threaded GC comparison.&quot;
    The x-axis is labeled &quot;Runtime for 1M ops (ms),&quot; and the y-axis is labeled &quot;Garbage collector,&quot;
    with various collectors labeled on the ticks.
    In order, the garbage collectors on the y-axis are Arc, Rc, shredder, bacon-rajan-cc, gc,
    dumpster (sync/manual), dumpster (sync), dumpster (unsync/manual), and dumpster (unsync).
    The x-axis ranges from 0 ms to 4000 ms. All of the violins, except for shredder's, are very near
    to the left side.
    The violin labeled &quot;shredder&quot; is far off to the right side, with a mean of roughly 3700ms.
"></p>

<p>This plot doesn’t tell us much other than that <code>shredder</code> is slow.
To take a closer look, let’s remove <code>shredder</code> from the list and see what we find.</p>

<p><img src="https://claytonwramsey.github.io/assets/img/dumpster/single_threaded_sans_shredder.png" alt="
    The same violin plot as before, but now shredder's violin and y-axis label have been removed.
    The x-axis now varies from 40 to 160 ms.
    The violin labeled Rc is furthest to the left, followed by Arc, bacon-rajan-cc, dumpster
    (unsync), dumpster (unsync/manual), dumpster (sync/manual), gc, and finally dumpster (sync).
"></p>

<p><code>dumpster</code>’s unsync implementation is in a decent position, beat out only by the non-cycle-detecting
allocators and <code>bacon-rajan-cc</code>.
<code>bacon-rajan-cc</code> has very little overhead and is quite performant.</p>

<p>I think there are two main reasons why the concurrent version of the garbage collector is much
slower than the single-threaded one.
First, moving allocations from a thread-local dumpster to the global garbage truck takes some time.
Second, the <code>dfs</code> operation in a concurrent environment must record the current set of children of
an allocation, typically in a separate heap-allocated structure, to prevent some concurrency bugs.
It’s certainly possible to mitigate the losses from the first issue, but the second is harder to
handle.</p>

<p>My guess as to why the concurrent version is significantly slower when using automatic collection
triggering is that it’s a consequence of my testing harness. Currently, it runs all the tests in
a loop, so the single-threaded benchmark could run directly after the multi-threaded one and be
forced to clean up some of its garbage.</p>

<p>In any event, let’s move on to the results from the multi-threaded benchmark.</p>

<p><img src="https://claytonwramsey.github.io/assets/img/dumpster/scaling.png" alt="
    A scatter plot, titled &quot;Parallel garbage collector scaling.&quot;
    The x-axis is labeled &quot;Number of threads&quot; and varies from 1 to 16.
    The y-axis is labeled &quot;Time for 1M ops (ms)&quot; and varies from 0 to 3500.
    On the legend, there are four series: dumpster (sync), dumpster (sync/manual), shredder, and
    Arc.
    The points associated with shredder's series start out at 3500ms for 1 thread, scaling
    asymptotically down to roughly 1800ms at 6 threads.
    All other points are very close to zero.
"></p>

<p>The only other concurrent garbage collector available for me to test against was <code>shredder</code>, and it
looks like it wasn’t much of a competition.</p>

<p><img src="https://claytonwramsey.github.io/assets/img/dumpster/scaling_sans_shredder.png" alt="
    A scatter plot, titled &quot;Parallel garbage collector scaling (sans shredder).&quot;
    The x-axis remains the same as before, but now the y-axis only goes up to 200ms.
    &quot;shredder&quot; has been removed from the legend, but otherwise it is the same as the previous image.
    The points associated with dumpster (sync) and dumpster (sync/manual) start out at roughly
    80 ms for 1 thread, jump up to about 110 ms for 2 threads, then decrease asymptotically to
    around 70 ms for 16 threads.
    Meanwhile, the points associated with Arc start out at roughly 70 ms for 1 thread and decrease
    asymptotically with the thread count to around 25 ms for 15 threads.
"></p>

<p><code>dumpster</code> doesn’t scale as smoothly as I’d like with thread count, but it’s a relief that
performance does actually improve with thread count, except for the jump from one thread to two.
I think being only 3x slower than Arc is a decent victory, especially for a project that I wasn’t
paid any money to do.
I’m not much of an expert at high-performance computing in concurrent situations, so trying to
optimize this further would likely just be an adventure in trying random things and seeing if they
yield an improvement.
If anyone out there has clever ideas on how to optimize this approach, let me know!
My email is on the “About” page.</p>

<h2 id="coda">Coda</h2>

<p>Over the last few months, I built a garbage collector for Rust from scratch.
I implemented a novel (ish) algorithm of my own design, got it to work in both single-threaded and
multi-threaded contexts, and showed that it was actually pretty performant.</p>

<p>The implementation of this crate is now <a href="https://crates.io/crates/dumpster">up on crates.io</a> and
available for anyone to download.
It’s licensed under the GNU GPLv3.</p>

<p>Special thanks to <a href="https://wisha.page/">Wisha</a>, <a href="https://seniormars.github.io/">Charlie</a>,
and <a href="https://shreyasminocha.me/">Shreyas</a> for reviewing this post, fielding my bad questions, and
putting up with me rambling about this for nearly two months straight.</p>

<h2 id="postscript">Postscript</h2>

<p>I have a few things that I thought were interesting along the way but didn’t quite have a good spot
to include in the story above, so they’ll all be mish-mashed in here.</p>

<h3 id="ode-to-bad-good-ideas">Ode to bad good ideas</h3>

<p>The final, polished solution you see in this blog post is actually quite far from my original idea.
In particular, almost all of my first ideas for handling concurrency didn’t work.
Here’s a quick roll of them all:</p>

<ul>
  <li>Wrap a <code>Mutex</code> around every single allocation’s reference count and hold them while doing <code>dfs</code></li>
  <li>Save on space in <code>Gc</code>s by tagging only the lowest bit instead of adding an entire <code>usize</code></li>
  <li>Make everything enable dynamic dispatch so we can have real Java-like objects</li>
  <li>Clean up allocations locally on every thread</li>
  <li>Avoid directly dropping allocations and instead cleverly decrement their reference count</li>
</ul>

<h3 id="cool-nightly-tricks">Cool nightly tricks</h3>

<p><code>Rc</code> and the other pointer types are somewhat “blessed” in that they can access nightly features
from the Rust compiler and still be consumed by stable projects.
<code>dumpster</code> has no such blessings.</p>

<p>I would like to implement <code>CoerceUnsized</code> unconditionally for all my garbage collectors, but that’s
simply not possible on stable yet.</p>

<p>Likewise, pending the implementation of strict provenance, there’s actually no way for a stable
crate to manipulate the address portion of a fat pointer.
This means that even if I found some space optimization using lower bit tagging, I wouldn’t be able
to use it because it’s gated behind a nightly feature.</p>

<h3 id="another-path-to-gcdyn-t">Another path to <code>Gc&lt;dyn T&gt;</code></h3>

<p>Without the ability to coerce <code>Gc</code> as an unsized type, I can’t make <code>Collectable</code> object safe due to
the function signature of <code>accept</code>, which forces <code>Visitor</code> to also be object-safe, forcing <code>visit</code>
operations to also be object-safe.</p>

<p>I’ve thought of a slightly different approach, though.
We can make <code>Visitor</code> a single concrete type, and that makes <code>Collectable</code> trivially object-safe.
The downside here is that I would then have to store all 5 of my current visitor implementations in
the same structure, and that loses a lot of my nice type safety features and adds a large runtime
penalty.
I’m not very happy with that idea, though.</p>

<h3 id="miri-rules">Miri rules</h3>

<p>I would probably not have been able to finish this project without
<a href="https://github.com/rust-lang/miri"><code>cargo miri</code></a>.
If you haven’t heard of it, you should download it right now and run all of your Rust projects with
it.
It’s such a fantastic tool for debugging unsafe code that I wish I could have it in other languages,
too - valgrind is a poor substitute for it when using C.</p>

<h3 id="testing-and-debugging">Testing and debugging</h3>

<p>Early on, I had just a few handwritten tests.
The first reference graph that I found that gave me trouble looked like this:</p>

<pre><code>graph LR
  a --&gt; b
  b --&gt; d
  d --&gt; a
  a --&gt; c
  c --&gt; d
</code></pre>

<p>However, once I had simple graphs with multiple cycles down, it was hard to come up with new tests.
As a result, I resorted to fuzzing, using the same approach as my benchmark - randomly generating
references and then seeing if they got cleaned up properly.</p>

<p>Debugging the results of those fuzzed tests absolutely sucked, though.
The experience of trying to find the source of an issue was awful, so I ended up having to make
some (crude) tools to make the process easier.
Eventually, I had settled on printing out the reference graph at choice times during the run of my
tests and then visualizing them to get a good guess of what was wrong.
However, when making the concurrent implementation, printing something can change the execution
behavior of the program.
Not only that, it’s not always obvious what the issue is.
I had one bug which only occurred after several thousand operations had completed, resulting in
reference graphs that looked like this:</p>

<pre><code>graph LR
  2892 --&gt; 2883
  2892 --&gt; 2852

  2849 --&gt; 2848
  2849 --&gt; 2852

  2868 --&gt; 2890
  2868 --&gt; 2837

  2776 --&gt; 2762

  2853 --&gt; 2857
  2853 --&gt; 2871

  2822 --&gt; 2814

  2836 --&gt; 2822

  2837 --&gt; 2868

  2848 --&gt; 2801

  2835 --&gt; 2765

  2851 --&gt; 2783
  2851 --&gt; 2852

  2828 --&gt; 2878

  2857 --&gt; 2862
  2857 --&gt; 2837

  2713 --&gt; 2698
  2713 --&gt; 2835

  2698 --&gt; 2685
  2698 --&gt; 2712
  2698 --&gt; 2742

  2813 --&gt; 2819
  2813 --&gt; 2783

  2772 --&gt; 2713
  2772 --&gt; 2813
  2772 --&gt; 2823
  2772 --&gt; 2846

  2771 --&gt; 2807
  2771 --&gt; 2759
  2771 --&gt; 2851

  2881 --&gt; 2771
  2881 --&gt; 2837

  2783 --&gt; 2836
  2783 --&gt; 2807
  2783 --&gt; 2849
  2783 --&gt; 2843

  2890 --&gt; 2901

  2765 --&gt; 2750
  2765 --&gt; 2776
  2765 --&gt; 2776
  2765 --&gt; 2849

  2819 --&gt; 2853

  root --&gt; 2871
  root --&gt; 2890
  root --&gt; 2902
  root --&gt; 2900
  root --&gt; 2842
  root --&gt; 2837
  root --&gt; 2877
  root --&gt; 2869
  root --&gt; 2873
  root --&gt; 2867
  root --&gt; 2881
  root --&gt; 2868
  root --&gt; 2897
  root --&gt; 2884
  root --&gt; 2855
  root --&gt; 2892
  root --&gt; 2852
  root --&gt; 2822
  root --&gt; 2901
  root --&gt; 2874
  root --&gt; 2899
  root --&gt; 2893
  root --&gt; 2828
  root --&gt; 2883
  root --&gt; 2896
  root --&gt; 2903
  root --&gt; 2904
  root --&gt; 2772

  2892 --&gt; 2867
</code></pre>

<p>The graph above was made by fuzzing my garbage collector, using the same approach as my benchmarks.</p>

  </div>
</article>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Analysis of the data job market using HN job posts (106 pts)]]></title>
            <link>https://emiruz.com/post/2023-08-12-data-jobs/</link>
            <guid>37120874</guid>
            <pubDate>Mon, 14 Aug 2023 13:36:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://emiruz.com/post/2023-08-12-data-jobs/">https://emiruz.com/post/2023-08-12-data-jobs/</a>, See on <a href="https://news.ycombinator.com/item?id=37120874">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      


<div id="summary">
<h2>SUMMARY</h2>
<p>I parse HackerNews (HN) “Ask HN: Who is hiring?” posts from 2013 to time of
writing and analyse them to better understand the trends in the data job
market with a focus on the fate of data science. Here are my main conclusions:</p>
<ol>
<li><p>It is likely that the Data Scientist role is in a long term decline and that
skills such as data mining and visualisation are also out of favour. I argue
from data that the Data Scientist role is poorly differentiated and that its
responsibilities are being eroded by better specified roles such as ML
Engineer and Data Engineer.</p></li>
<li><p>It is likely that the ML Engineer role has seen a sustained increase in
demand which is now on par with the Data Scientist role but trending in the
opposite direction (upward!). The ML Engineer is positioned as an AI aligned
role focused on deploying custom models to production. It is a continuity of
the data engineer which, in contrast, is focused on data preparation and
other infrastructural concerns.</p></li>
</ol>
<p>If you do not have time to read the whole post I suggest skipping to the
“Discussion and conclusions” section for a fuller discussion including a
<em>caveat emptor</em> section.</p>
</div>
<div id="motivation-and-introduction">
<h2>MOTIVATION AND INTRODUCTION</h2>
<p>I have worked in “big data”, “data science” or something adjacent for around
12 years, and in that time I have observed these fields (and their
associated roles) change a lot. I had never thought about it much because it
was never very difficult to find work, however, recent times have been a bit
different because my neck of the woods – nestled within some subset of
“data science” jobs – has been rather quite, and the few jobs popping up have
been rather specialised. I would not find the lull concerning – especially
given the back drop of an economic down turn – if it wasn’t for a suspicion
I’ve had for some time that the field is long overdue a refactoring. Some
conjecture:</p>
<ol>
<li><p>“Data science” roles are not exchangeable: you couldn’t swap the role
description from two companies in the same domain and expect it to approximate
the needs of either in most cases.</p></li>
<li><p>“Data scientists” are not exchangeable: you couldn’t swap out equally
senior data scientists in the same domain and expect to get similar skills.</p></li>
<li><p>For most consumers of it, “data science” is a functional requirement, and
its commoditisation is strongly desirable.</p></li>
</ol>
<p>Granted 1-3 above, the factoring of the “data science” job market into a better
defined set of roles for which the converse of 1 and 2 hold, seems all but
inevitable. I wanted to investigate whether this was afoot, and if so, to what
extent. I decided an exploratory analysis of the job market was in order.</p>
<p>In this post I’m going to be using HN job posting data with a lick of old
school NLP and statistics to analyse how noun phrases featuring a controlled
list of terms have changed since 2013. I’ll start by explaining the data and
how it is processed. I’ll then jump straight into exploratory analysis.
Finally, I’ll investigate some specific hypotheses regarding how “data science”
and associated roles are defined, and then end with a discussion of the
results.</p>
</div>
<div id="data-and-processing">
<h2>DATA AND PROCESSING</h2>
<p>You can download the final processed data used in this portion of the analysis
<a href="https://emiruz.com/post/2023-08-12-data-jobs/data/compile.csv">here</a>.</p>
<p><a href="https://news.ycombinator.com/">Hacker News</a> is to tech and practice what
“Paris fashion week” is to fashion. HN hosts an automated monthly recurring
post titled
<a href="https://hn.algolia.com/?dateRange=all&amp;page=0&amp;prefix=false&amp;query=%22Ask%20HN%3A%20Who%20is%20hiring%22&amp;sort=byDate&amp;type=story">“Ask HN: Who is hiring?”</a>
in which hundreds of companies post job opportunities all over the world. As a
data source for job postings, it is unlikely that HN is representative of any
given IT job market. Those who post are more likely to be start-ups or
scale-ups, the tech and mission is likely to be trendy, the base of operation
is most likely to be somewhere cool, and so on. However, in so far as HN is an
<em>avant-garde</em> community, its adoption of tech and practices likely foreshadow
adoption writ large.</p>
<p>Collecting data from HN is easy because they make it available via a free
public <a href="https://github.com/HackerNews/API">Firebase API</a>. The common URL
prefix for the API is:</p>
<pre><code>https://hacker-news.firebaseio.com/v0</code></pre>
<p>All the hiring posts of interests are automatically created on a schedule by a
user called “whoishiring”. So I can easily find all these posts using the
following endpoint:</p>
<pre><code>/user/whoishiring.json</code></pre>
<p>Thereafter its just a matter of iteratively collecting the top level comments
from every “Ask HN: Who is hiring?” post using the <em>/item/{item_id}.json</em>
endpoint.</p>
<p>Once the data is collected, I extract all noun phrases matching the following
set of constraints:</p>
<ol>
<li><p>Must be two words. E.g. data science, ml engineer, ai platform, etc. The
main reason is that it becomes exponentially difficult to pair down noun
phrases which mean the same thing if they can be any length. E.g. “data
engineer” versus “data engineer job”.</p></li>
<li><p>The first word must be in the following list: statistical, deeplearning,
data, nlp, llm, mlops, ai, ml. Note that the expansions of the acronyms are
reduced to acronyms in the text prior to this stage.</p></li>
<li><p>The second word must be a noun.</p></li>
</ol>
<p>In the code below “pairs” is the operative function. Note that I also do some
adhoc contraction of phrases into their standard acronyms or forms to reduce
the incidence of terms which mean the same but have different names.</p>
<pre><code>import json, re, nltk

CTRL=[
  "statistical", "deeplearning",
  "data", "nlp", "llm",
  "mlops", "ai", "ml"]

ZAP=[
  ("scientists", "scientist"),
  ("engineers", "engineer"),
  ("analysts", "analyst"),
  ("researchers", "researcher"),
  ("large +language +model(s*)", "llm"),
  ("natural +language +processing","nlp"),
  ("deep +learning", "deeplearning"),
  ("artificial +intelligence", "ai"),
  ("ai +ai", "ai"),
  ("machine +learning", "ml"),
  ("machinelearning", "ml"),
  ("ml +ai", "ml"),
  ("ai +ml", "ml")]

def is_noun(w):
  w = nltk.word_tokenize(w)
  w = nltk.pos_tag(w)
  return w[0][1].startswith('NN')

def pairs(txt):
  txt = txt.replace("\n"," ")
  txt = re.sub(r"\&lt;.+?\&gt;"," ",txt.lower())
  txt = re.sub(r"\&amp;[a-zA-Z0-9#]{1,5};"," ",txt)
  txt = re.sub(r"[^A-Za-z0-9 ]"," ",txt)
  for k,v in ZAP:
    txt = re.sub(k, v, txt)
  txt = re.split(" +", txt)
  txt = [t for t in txt if t]
  for a,b in zip(txt[:-1], txt[1:]):
    if a in CTRL and is_noun(b):
      yield a, b</code></pre>
<p>I run each comment through the “pairs” function, collect the <strong>unique</strong> noun
phrases, add the comments timestamp and save it into the CSV file available for
download above. I also add a few convenient fields used later (such as year).
The final table looks like this:</p>
<pre><code>## # A tibble: 56,481 × 5
##          time  year root        next.         term                
##         &lt;int&gt; &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;               
##  1 1354374283  2012 data        hero          data hero           
##  2 1354375006  2012 statistical analysis      statistical analysis
##  3 1354378098  2012 data        analysis      data analysis       
##  4 1354378098  2012 data        systems       data systems        
##  5 1354378098  2012 data        visualization data visualization  
##  6 1354378427  2012 data        sets          data sets           
##  7 1354379964  2012 data        analyst       data analyst        
##  8 1354382106  2012 data        analyst       data analyst        
##  9 1354383248  2012 data        scientist     data scientist      
## 10 1354383248  2012 data        engineer      data engineer       
## # ℹ 56,471 more rows</code></pre>
<p>There are 56481 rows, and 3479 unique terms. The
terms are distributed as follows across years.</p>
<div><p><span id="fig:unnamed-chunk-3"></span>
<img src="https://emiruz.com/post/2023-08-12-data-jobs/index_files/figure-html/unnamed-chunk-3-1.png" alt="Distribution of job posts over time." width="672"></p><p>
Figure 1: Distribution of job posts over time.
</p>
</div>
<p>My main analytical artefact is the year/term cross tabulation of occurrences
normalised by yearly totals. It can be calculated like this:</p>
<pre><code>crosstab &lt;- read.csv("data/compile.csv") %&gt;% 
  filter(year &gt; 2012) %&gt;%
  { table(.$year, .$term) } %&gt;%
  { sweep(., 1, rowSums(.), "/") }</code></pre>
<p>Note that I remove posts prior to 2013 since there are too few to represent the
year.</p>
</div>
<div id="analysis">
<h2>ANALYSIS</h2>
<div id="directions-of-change">
<h2>Directions of change</h2>
<p>There are a large number of spurious and uncommon terms in the cross-tabulation
above. A useful way of cutting through the noise is to imagine the data as
residing in a high dimensional space (wherein each term is a dimension of each
year), and then considering along which axes the data tends to vary most;
otherwise known as principal component analysis (PCA). There are however two
problems with using PCA in this example:</p>
<ol>
<li><p>Principal components (PCs) are not easy to interpret especially when the
principal vectors are as long as they are here.</p></li>
<li><p>The fitting procedure is sensitive to outliers, and outliers (particularly
large fractions in this case) are likely in this sort of analysis due to
happenstances of parsing text.</p></li>
</ol>
<p>I can remedy (1) by using sparse PCA (PCA with regularisation) to reduce PC
vectors to just a few non-zero components, and I can remedy (2) by using a
fitting procedure for sparse PCA robust to outliers. It is trivial to implement
in R as follows:</p>
<pre><code>require(sparsepca)</code></pre>
<pre><code>## Loading required package: sparsepca</code></pre>
<pre><code>pca &lt;- robspca(crosstab, k=5, verbose=F, alpha=1e-2)

row.names(pca$loadings) &lt;- colnames(crosstab)
summary(pca)</code></pre>
<pre><code>##                          PC1   PC2   PC3   PC4   PC5
## Explained variance     0.001 0.001 0.000 0.000 0.000
## Standard deviations    0.036 0.027 0.008 0.007 0.006
## Proportion of variance 0.518 0.294 0.027 0.020 0.016
## Cumulative proportion  0.518 0.812 0.838 0.858 0.874</code></pre>
<p>Note that despite the huge number of terms, over 80% of the variance can be
explained in just two components. The non-zero constituents of the first PC
are:</p>
<pre><code>pca$loadings[,1][pca$loadings[,1]!=0] %&gt;% round(2)</code></pre>
<pre><code>##        data mining data visualization        ml engineer 
##              -0.11              -1.07               1.11</code></pre><p>
That is, over 50% of the variance in the cross tabulation is positively aligned
with “ml engineer” and negatively aligned with “data mining” and “data
visualization”. I can see this effect clearly by plotting the series. All
of them exhibit a clear trend.
</p><div><p><span id="fig:unnamed-chunk-7"></span>
<img src="https://emiruz.com/post/2023-08-12-data-jobs/index_files/figure-html/unnamed-chunk-7-1.png" alt="Term trends over time for the non-zero loadings of the first principal component account for over 50% of explained variance." width="672"></p><p>
Figure 2: Term trends over time for the non-zero loadings of the first principal component account for over 50% of explained variance.
</p>
</div>
<p>I can similarly investigate the second principal component which accounts for a
further <span>\(\sim 30\)</span>% explained variance.</p>
<pre><code>pca$loadings[,2][pca$loadings[,2]!=0] %&gt;% round(2)</code></pre>
<pre><code>## data scientist    ml engineer 
##          -1.09           0.11</code></pre>
<p>It is positively aligned with “ml engineer” but much more strongly negatively
aligned with “data scientist”. As before I visualise the series (below) and
confirm that there are clear trends in both. Note the peak at which the “data
scientist” term starts and where it ends up!</p>
<div><p><span id="fig:unnamed-chunk-9"></span>
<img src="https://emiruz.com/post/2023-08-12-data-jobs/index_files/figure-html/unnamed-chunk-9-1.png" alt="Term trends over time for the non-zero loadings of the second principal component account for about 30% of explained variance." width="672"></p><p>
Figure 3: Term trends over time for the non-zero loadings of the second principal component account for about 30% of explained variance.
</p>
</div>
</div>
<div id="role-definitions">
<h2>Role definitions</h2>
<p>In the following analysis I define three response terms related to whether a
post contains mention of ML Engineer, Data Engineer and Data Scientist
respectively. I’ve added the Data Engineer role into considerations because I
am curious about how it is distinguished from the ML Engineer. I also define a
collection of other terms that I think should distinguish the data scientist
from the others. That is, I expect that the engineering roles will be more
closely associated with the infrastructure and concepts, whilst the data
science role will be more associated with the verbs and artefacts. The dataset
is implemented as follows:</p>
<pre><code>txt   &lt;- read.csv("data/texts.csv")$txt

dt &lt;- 
  tibble(
    
    # Response
    is_ml = grepl("(ml|machine learning) engineers*($|[^a-z0-9])", txt),
    is_de = grepl("data engineers*($|[^a-z0-9])", txt),
    is_ds = grepl("data scientists*($|[^a-z0-9])", txt),

    # Concepts
    AI = grepl(" ai |artificial intelligence", txt),
    
    # Infrastructure
    pipeline = grepl("pipeline", txt),
    deploy   = grepl("deploy", txt),
    cloud    = grepl("cloud", txt),
    infra    = grepl("infrastructure", txt),
    dataset  = grepl("dataset|data set", txt),
    
    # Verbs
    analyse   = grepl("analy[sz]", txt),
    optimize  = grepl("optimi[sz]", txt),
    visualize = grepl("visuali[sz]", txt),
    decide    = grepl("decision|decide", txt),
    explore   = grepl("explor", txt),
    research  = grepl("research", txt),
    discover  = grepl("discover", txt),
    mine      = grepl("mining|mine", txt),

    # Artefacts
    insight    = grepl("insight", txt),
    experiment = grepl("experiment", txt),
    model      = grepl("model", txt)

) %&gt;% filter(is_ml | is_ds | is_de)</code></pre>
<p>Note that the data is filtered for recency to include only posts since 2021,
in which period there are 681 posts mentioning “ML Engineer”,
1197 mentioning “Data Engineer” and 1020 mentioning
“Data Scientist”. I’ll now model each response using a logistic regression to
get some sense of how terms line up with roles.</p>
<div id="ml-engineer">
<h3>ML Engineer</h3>
<p>The ML Engineer is the role most closely positively aligned with “AI”,
“deployment”, “experimentation”, “research” and “modelling”. It is negatively
aligned with “pipeline”, “infrastructure” and “analysis”. This fits the
impression that ML Engineer is the new role most aptly aligned to “AI” which
emphasises above all the deployment of custom models to production.</p>
<pre><code>glm(is_ml ~ . -is_ds -is_de, data=dt, family=binomial) %&gt;%
  summary()</code></pre>
<pre><code>## 
## Call:
## glm(formula = is_ml ~ . - is_ds - is_de, family = binomial, data = dt)
## 
## Coefficients:
##                Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)    -1.50220    0.07831 -19.184  &lt; 2e-16 ***
## AITRUE          1.57483    0.11298  13.939  &lt; 2e-16 ***
## pipelineTRUE   -0.65204    0.20284  -3.215 0.001307 ** 
## deployTRUE      0.98356    0.15669   6.277 3.45e-10 ***
## cloudTRUE       0.19663    0.13984   1.406 0.159691    
## infraTRUE      -0.65800    0.15324  -4.294 1.76e-05 ***
## datasetTRUE    -0.01751    0.23005  -0.076 0.939336    
## analyseTRUE    -0.81394    0.16136  -5.044 4.55e-07 ***
## optimizeTRUE   -0.54522    0.22832  -2.388 0.016942 *  
## visualizeTRUE  -0.46430    0.28715  -1.617 0.105898    
## decideTRUE     -0.04420    0.21752  -0.203 0.838986    
## exploreTRUE    -0.94946    0.42975  -2.209 0.027152 *  
## researchTRUE    0.58429    0.12700   4.601 4.21e-06 ***
## discoverTRUE    0.27907    0.21526   1.296 0.194823    
## mineTRUE       -0.30678    0.49821  -0.616 0.538048    
## insightTRUE     0.03740    0.19834   0.189 0.850425    
## experimentTRUE  1.95033    0.26226   7.437 1.03e-13 ***
## modelTRUE       0.49789    0.14574   3.416 0.000635 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 2899.2  on 2454  degrees of freedom
## Residual deviance: 2428.3  on 2437  degrees of freedom
## AIC: 2464.3
## 
## Number of Fisher Scoring iterations: 5</code></pre>
</div>
<div id="data-engineer">
<h3>Data Engineer</h3>
<p>The Data Engineer is the role most closely positively aligned with
“data mining”, “cloud”, “infrastructure” and “pipeline”. It is negatively
aligned with “AI”, “discovery”, “experimentation” and “modelling”. This fits
the impression that a Data Engineer is largely an infrastructural role.</p>
<pre><code>glm(is_de ~ . -is_ds -is_ml, data=dt, family=binomial) %&gt;%
  summary()</code></pre>
<pre><code>## 
## Call:
## glm(formula = is_de ~ . - is_ds - is_ml, family = binomial, data = dt)
## 
## Coefficients:
##                Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)     0.16811    0.06303   2.667 0.007651 ** 
## AITRUE         -1.05108    0.11235  -9.356  &lt; 2e-16 ***
## pipelineTRUE    0.41964    0.15224   2.756 0.005843 ** 
## deployTRUE     -0.15895    0.14599  -1.089 0.276229    
## cloudTRUE       0.67076    0.12211   5.493 3.95e-08 ***
## infraTRUE       0.31841    0.11764   2.707 0.006796 ** 
## datasetTRUE    -0.41583    0.20718  -2.007 0.044741 *  
## analyseTRUE    -0.01336    0.11688  -0.114 0.908985    
## optimizeTRUE   -0.25130    0.18746  -1.341 0.180068    
## visualizeTRUE  -0.41398    0.23209  -1.784 0.074473 .  
## decideTRUE      0.06901    0.18210   0.379 0.704691    
## exploreTRUE     0.33694    0.31087   1.084 0.278436    
## researchTRUE   -0.12425    0.11725  -1.060 0.289316    
## discoverTRUE   -0.64970    0.20558  -3.160 0.001575 ** 
## mineTRUE        1.66962    0.39846   4.190 2.79e-05 ***
## insightTRUE     0.08239    0.17255   0.477 0.633023    
## experimentTRUE -1.12961    0.28763  -3.927 8.59e-05 ***
## modelTRUE      -0.48789    0.13809  -3.533 0.000411 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 3401.8  on 2454  degrees of freedom
## Residual deviance: 3138.4  on 2437  degrees of freedom
## AIC: 3174.4
## 
## Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div id="data-scientist">
<h3>Data Scientist</h3>
<p>The Data Scientist is only closely aligned with “analysis”. It is only
negatively aligned with “cloud”, “data mining”. Perhaps more surprisingly it
is not distinguished by terms such as “research”, “experimentation”,
“decision”, “insight”, “discovery”, “visualisation” and so on.</p>
<pre><code>glm(is_ds ~ . -is_ml -is_de, data=dt, family=binomial) %&gt;%
  summary()</code></pre>
<pre><code>## 
## Call:
## glm(formula = is_ds ~ . - is_ml - is_de, family = binomial, data = dt)
## 
## Coefficients:
##                Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)    -0.39486    0.06296  -6.272 3.56e-10 ***
## AITRUE         -0.10060    0.10501  -0.958 0.338043    
## pipelineTRUE   -0.14751    0.14757  -1.000 0.317521    
## deployTRUE     -0.15263    0.14444  -1.057 0.290642    
## cloudTRUE      -0.39824    0.12114  -3.288 0.001010 ** 
## infraTRUE      -0.07645    0.11482  -0.666 0.505506    
## datasetTRUE     0.35528    0.18941   1.876 0.060687 .  
## analyseTRUE     0.42458    0.11300   3.757 0.000172 ***
## optimizeTRUE   -0.15792    0.17764  -0.889 0.374016    
## visualizeTRUE   0.53357    0.21880   2.439 0.014742 *  
## decideTRUE      0.12115    0.17523   0.691 0.489323    
## exploreTRUE     0.33444    0.30234   1.106 0.268643    
## researchTRUE   -0.12752    0.11464  -1.112 0.265984    
## discoverTRUE    0.44181    0.18780   2.353 0.018646 *  
## mineTRUE       -1.53762    0.43302  -3.551 0.000384 ***
## insightTRUE     0.33272    0.16327   2.038 0.041571 *  
## experimentTRUE  0.17052    0.22946   0.743 0.457401    
## modelTRUE       0.22076    0.12919   1.709 0.087503 .  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 3332.9  on 2454  degrees of freedom
## Residual deviance: 3243.0  on 2437  degrees of freedom
## AIC: 3279
## 
## Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
</div>
<div id="discussion-and-conclusions">
<h2>DISCUSSION AND CONCLUSIONS</h2>
<p>It serves to start with the <em>caveat emptor</em>. The study relies on HN being a
fairly accurate bellweather for trends in IT practices broadly. I think this is
the case but herein it is stated without evidence. Throughtout the study period
there are posts missing (for reasons unknown to me) which may therefore under
represent those months. I have no idea whether the proportions of roles hired
is very seasonal, but I rely on it not being the case in light of missing
months. Further, the last year or two have seen a general global economic
downturn. This may change the proportions of roles companies are hiring for,
which may inflate/deflate figures in 2022/2023 which may not hold in the longer
run.</p>
<p>There are also more technical problems. The data processing heavily leans on
NLP and the extraction of noun phrases constrained around a short control
vocabulary. Missing out key terms, or just failing to parse the text properly
may change the relative distribution of terms. Besides this, many companies
post frequently, and many posts contain multiple roles in the same text which
will likely contribute to the confounding of terms with roles.</p>
<p>Bare in mind also that this is more of an intelligence analysis which uses some
statistics, the implication being that the judgment rests on the consilience of
the conclusions herein with those from other sources, rather than the power and
correctness of the study.</p>
<p>With the caveats out of the way. I’d reason about the results as follows in so
far as it pertains to my original objective of better understanding what is
happening with the data science job market.</p>
<div id="data-science-is-in-decline-and-vaguely-defined">
<h3>1. Data science is in decline and vaguely defined</h3>
<p>It is likely that the Data Scientist role is in a long term downward
trend and that skills such as data mining and visualisation are also out of
favour. This is evidenced by a consistent downward slope for the term “data
scientist” since 2015, whilst other data roles retained or increased their
share of mentions as shown in the plot below.</p>
<div><p><span id="fig:unnamed-chunk-14"></span>
<img src="https://emiruz.com/post/2023-08-12-data-jobs/index_files/figure-html/unnamed-chunk-14-1.png" alt="Data scientist role over time  in contrast to other data jobs." width="672"></p><p>
Figure 4: Data scientist role over time in contrast to other data jobs.
</p>
</div>
<p>Further, the second principal component which accounts for about 30% of
explained variance is associated mostly with the “data scientist” term making
the case that (1) it is a significant HN trend (i.e.&nbsp;the correlation
structure of other terms align with it), (2) it is relatively orthogonal to
other changes (in terms of direction of variance, not trend) and (3) it is
outsized in comparison to other trends.</p>
<p>In contrast to the ML/Data Engineer role, the Data Scientist role is difficult
to distinguish. Of the terms which I had tried, the Data Scientist is only
closely aligned with “analysis”, but not with “research”, “experimentation”,
“decision”, “insight”, “discovery”, “visualization” and so on. I speculate that
the Data Scientist role was more of a catch all bucket which encompassed data
engineering, deployment and other responsibilities, and now that better aligned
roles are are being sought after, there is less work for data scientists to do.</p>
<p>Finally, the Data Scientist role doesn’t appear to be aligned with “artificial
intelligence” related terms. In so far as these are poised to define how data
roles are marketed, I would take this to be another negative indicator for the
prospect of the data science role.</p>
</div>
<div id="the-ml-engineer-is-up-and-coming-ai-aligned-and-better-specified">
<h3>2. The ML Engineer is up and coming, AI aligned and better specified</h3>
<p>It is likely that the ML Engineer role has seen a sustained increase in demand
which is now on par with “Data Scientist” (as a fraction of mentions) but
trending in the opposite direction (upwards). This is evidenced in the plots
above but also in that the trend when combined with changes in “data
visualization” and “data mining” accounts for more than 50% of explained
variance. I.e. it is a significant trend for the correlation structure of all
terms considered.</p>
<p>Much like the Data Engineer role, the ML Engineer is fairly well defined. It is
closely positively aligned with “AI”, “deployment”, “experimentation”,
“research” and “modelling”, but unaligned with data engineering and data
science terms such as “pipeline”, “infrastructure” and “analysis”. I therefore
suspect that ML Engineers will specialise towards the training of custom models
and their deployment to production.</p>
</div>
</div>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Bomb threat causes mass evacuation at DEF CON hacking convention (107 pts)]]></title>
            <link>https://www.theregister.com/2023/08/14/def_con_roundup/</link>
            <guid>37120697</guid>
            <pubDate>Mon, 14 Aug 2023 13:17:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theregister.com/2023/08/14/def_con_roundup/">https://www.theregister.com/2023/08/14/def_con_roundup/</a>, See on <a href="https://news.ycombinator.com/item?id=37120697">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body">
<p><span>DEF CON</span> A bomb threat against Caesars Forum, the main venue for this week's DEF CON hacking convention, led to the halls being cleared on Saturday evening and the building searched by fire crews and police officers.</p>
<p>The timing was very bad, coming in the evening of the main party night for the event. The conference Goons, the red-shirted volunteers who serve as guides and organizers, were praised by attendees for managing the evacuation with aplomb, but when it became clear that the search for the suspect device was going to be hard to find, the DEC CON team cancelled the evening's festivities at Caesars, to the disappointment of thousands.</p>
<p>"Last night we were asked to evacuate the building due to a report of a suspicious package. Local police and fire departments conducted a thorough investigation and ultimately determined that the package was safe," the organizers said.</p>

    

<p>"They also conducted additional sweeps of the building as a precaution before allowing our team to return and prepare for today’s con. We are working quickly to keep the original schedule on track, but please check here for additional updates before arriving at DEF CON."</p>

        


        

<p>The event kicked off on August 10 and wrapped up by August 13.</p>
<p>Presumably the hoax caller thought of themselves as a merry prankster, rather than the selfish idiot who ruined everyone's night - particularly the timing for those in the Track Four hall who were enjoying <em>2001: A Space Odyssey</em> and who were forced to miss the crucial last 10 minutes of the movie. While tricks and pranks are something of a tradition, they only get respect if they are clever and intricate, not some fool showing they could use a telephone.</p>
<div><p><a href="https://regmedia.co.uk/2023/08/14/gravy.jpg" target="_blank"><img src="https://regmedia.co.uk/2023/08/14/gravy.jpg?x=648&amp;y=863&amp;infer_y=1" alt="gravy" title="gravy" height="863" width="648"></a></p><p>Gravy SEALs maybe, but they made a swatting call impossible</p>
</div>
<p>It's not like security at the show wasn't heavy enough. The event was patrolled regularly by security guards in body armor with handguns, tasers, the occasional police dog, and a host of other equipment that was a bit of an overkill for a bunch of peaceable hackers.</p>
<p>Dubbed by some as "Gravy SEALs," by the end of the show they were visibly warming up, and this hack saw several of them accepting stickers from attendees.</p>
<h3>The great badge fiasco</h3>
<p>The badge situation at the conference's start did peeve quite a few people, and one of them may have been the wazzock behind the bomb hoax.</p>
<p>DEF CON badges are legendary. Usually consisting of a circuit board, a port or too, and an interesting puzzle to solve or challenge to complete – such as a scavenger hunt – they are highly collectable and can fetch high prices if resold. So it came as a shock to many when they were told that the badges weren't available in large numbers and were given paper badges.</p>

        

<p>What made this particularly hard to swallow was that DEF CON really jacked up its prices this year. Last year's tickets cost $360 each, whereas this year the price rose to $440. While the venue was much better than previous years, and the DJ lineup in the chillout rooms was much improved, not getting the prized badge annoyed many people – some of whom got up early to queue in the infamous LineCon queue to pick one up.</p>
<div><p><a href="https://regmedia.co.uk/2023/08/14/defcon.jpg" target="_blank"><img src="https://regmedia.co.uk/2023/08/14/defcon.jpg?x=648&amp;y=486&amp;infer_y=1" alt="defcon" title="defcon" height="486" width="648"></a></p><p>DEF CON 31: from tiny acorns mighty oak trees grow</p>
</div>
<p>Officially the excuse was that production and shipping problems had led to the shortage. However, two Goons told this hack that the issue had been one of oversupply at previous conventions, and that only those who had preordered their tickets were guaranteed a badge.</p>
<p>Some more did show up during the show, but were quickly grabbed by attendees, leading to jokes about LineCon 2. Still, it's not a good look and left a sour taste in the mouth of some.</p>
<h3>My god, it's full of hackers!</h3>
<p>The badge kerfuffle certainly didn't seem to put too many people off attending.</p>
<p>While official attendance figures haven't been released, sources close to the matter tell us that over 30,000 people attended DEF CON this year, compared to about 20,000 for Black Hat. The halls were noticeably fuller than past years and on day one only one hall was open for speakers and the lines were very long.</p>
<p>But the new venue had space for almost everyone to get in or stand at the back. This is a huge improvement over previous years, where you'd have to get in line more than half an hour before some talks.</p>
<ul>

<li><a href="https://www.theregister.com/2023/08/12/veilid_privacy_data/">Veilid: A secure peer-to-peer network for apps that flips off the surveillance economy</a></li>

<li><a href="https://www.theregister.com/2023/08/12/def_con_datacenter_power_bugs/">Let's play... Turn off the power to datacenter boxen</a></li>

<li><a href="https://www.theregister.com/2023/08/14/us_government_investigates_microsoft_breach/">US government to investigate China's Microsoft email breach</a></li>

<li><a href="https://www.theregister.com/2023/08/10/google_ai_red_team_lead/">Google AI red team lead says this is how criminals will likely use ML for evil</a></li>
</ul>
<p>This wasn't true everywhere however. The queues for the AI Village were initially immense, and for some others, including the Blacks in Cybersecurity Village. The Aerospace Village was seldom not jam packed, and even lines for the official merchandising room were immense.</p>
<div><p><a href="https://regmedia.co.uk/2023/08/14/pilot.jpg" target="_blank"><img src="https://regmedia.co.uk/2023/08/14/pilot.jpg?x=648&amp;y=679&amp;infer_y=1" alt="pilot" title="pilot" height="679" width="648"></a></p><p>Not anatomically correct: the inflation valve was on the inner thigh</p>
</div>
<p>Still, the quality of the talks was better than average, even if the timing wasn't. On the Friday 0900, opening sessions we covered included the Veilid keynote, but at the same time DEF CON founder Jeff Moss, aka Dark Tangent, hosted the opening speech and then sat down for an extra 30 minutes with the Secretary of the DHS Alejandro Mayorkas to discuss the policy and practice of America's online government role and how it interacts with the security community.</p>
<p>Also in the same time slot was the official start of the AI hacking challenge and separate session on the Security Research Legal Defense Fund – an initiative to provide free legal advice and support for white-hat hackers who are being prosecuted for conducting legitimate research in a way that could break onerous laws like the DMCA.</p>
<h3>Doctorow's prescription for a new internet</h3>
<p>And speaking of the DMCA and other restrictive laws, Cory Doctorow was on form with a talk entitled "An audacious plan to halt the internet's enshitification."</p>
<p>His argument is that a lack of antitrust laws, specifically allowing companies to sell goods below cost to drive out competition and a relaxed attitude to mega mergers, has left almost every major market in the US – from broadband to media to even candy makers, in the hands of a few corporations who then abuse their market position.</p>
<p>When the internet first became a thing it was a great disruptor, he pointed out, because open standards allowed free competition and a thriving state of innovation. Then the very companies that benefited from things like being able to reverse-engineer APIs and coding, such as Apple, Google, and Facebook, have since supported laws to ban such practices and ensure their continued dominance.</p>

        

<p>As this has happened the internet has in many ways gone backwards. Originally envisaged as a way to cut out the middleman and reduce costs and speed transaction, this plan worked - for a while. Now it's back with a vengeance and the middlemen hold the whip hand, for the moment, and are squeezing consumers, businesses, and now their own workers hard.</p>
<p>"Remember when tech workers dreamed of working for a big company before striking out on their own to start and put that big company out of business? Then that dream shrank, to working for a few years, quitting and doing a fake startup to get hired back by your old boss in the world's most inefficient way to get a raise," he said.</p>
<p>"Next it shrank even further, you're working for a tech giant your whole life but you get free kombucha and massages. And now that dream is over and all that's left is work with a tech giant until they fire your ass, like those 12,000 Googlers who got fired six months after a stock buyback that would have paid their salaries for the next 27 years. We deserve better than this."</p>
<div><p><a href="https://regmedia.co.uk/2023/08/14/cory.jpg" target="_blank"><img src="https://regmedia.co.uk/2023/08/14/cory.jpg?x=648&amp;y=486&amp;infer_y=1" alt="cory" title="cory" height="486" width="648"></a></p><p>Time to ring in some changes</p>
</div>
<p>While President Carter might have started the move against antitrust enforcement, his Democratic successor President Biden has become the first occupant of the White House to try and stop this consolidation. FTC chair Lina Khan might have had a couple of high-profile failures, he opined, but many more smaller cases and some corporate consolidations have been dropped or suspended</p>
<p>And it's becoming a bipartisan issue that's making strange bedfellows in the normally closed ranks of bipartisan politics in America.</p>
<p>"There's a bill in Congress right now called the <a target="_blank" rel="nofollow" href="https://www.congress.gov/bill/118th-congress/senate-bill/1073?s=1&amp;r=38">America Act</a> that will break up Facebook and Google and its sponsors are Ted Cruz (R-TX) and Elizabeth Warren (D-MA)!"</p>
<p>This appears to be a global phenomenon too. The EU and even China are working on interoperability and breaking up companies that get too big and powerful for free markets. The tide seems to be shifting, yet there remains a long way to go.</p>
<h3>War stories</h3>
<p>The War Stories track, held this year in Harrah's, produced two standout talks.</p>
<p>The first, from EFF security analyst and top boffin Cooper Quintin, covered the Dark Caracal spyware slinger. Cooper and his team have been tracking this miscreant for over six years now and it appears that the protagonist is a worker with the Lebanese government intelligence agency who freelances in crime in their spare time.</p>
<p>When first spotted they weren't very good, forgetting to register the domain for one of their command and control servers for the Bandook spyware which allowed the EFF to bag it first and then monitor traffic. The criminal has since come back with a better Bandook 2 version, which is harder to track.</p>
<p>But recently the EFF team noticed something odd - Dark Caracal was hitting a huge number of targets in the Dominican Republic and infecting them with Clop ransomware. Cooper speculated that the Dominican Republic was targeted because it's low tech and Interpol and others aren't too focussed on the country right now, as they have bigger fish to fry.</p>
<p>He speculated that we are seeing a new breed of cyber mercenaries that are crossing over from national state spyware into more lucrative fields and said this could be the biggest threat for 30 years. That seems a little pessimistic, but this is going to be an area to watch.</p>
<p>Another great talk was from Mikko Hypponen, chief research officer at WithSecure, about the history between his native Finland (NATO's newest member) and Russia. He described how, at the start of the 20th Century, Finland was forced to give up land to Russia in exchange for independence and that - rather than live under Russian rule - a man and his family packed up their house (and sauna) and moved West to freedom.</p>
<div><p><a href="https://regmedia.co.uk/2023/08/14/mikko.jpg" target="_blank"><img src="https://regmedia.co.uk/2023/08/14/mikko.jpg?x=648&amp;y=391&amp;infer_y=1" alt="mikko" title="mikko" height="391" width="648"></a></p><p>Don't make us go sisu on you</p>
</div>
<p>That man was Mikko's ancestor and the CRO's mother became one of the first women to operate Finland's computer infrastructure, and she taught her son all about coding. What follows is one of the best talks on the history of Russian computer crime this hack has seen in a long time.</p>
<p>Russia pioneered this stuff, first on Bluetooth and then on other platforms - almost always avoiding interfering in their own country but wreaking havoc elsewhere. Unlike shy Western agencies who hate being exposed, the Russian operatives are very blatant and as long as its operators stay within the borders of the largest country in the world they are almost always safe.</p>
<p>This talk is well worth a look once the video comes out and the organizers have already started <a target="_blank" rel="nofollow" href="https://www.youtube.com/@DEFCONConference">putting content up</a> for free. If you couldn't make it to the sweaty hell that was Las Vegas this year, you can still get the data without paying Black Hat rates. ®</p>                                


                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The 2002 Überlingen midair collision (120 pts)]]></title>
            <link>https://admiralcloudberg.medium.com/tears-in-the-rain-the-2002-%C3%BCberlingen-midair-collision-591232d0c51e</link>
            <guid>37120372</guid>
            <pubDate>Mon, 14 Aug 2023 12:41:33 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://admiralcloudberg.medium.com/tears-in-the-rain-the-2002-%C3%BCberlingen-midair-collision-591232d0c51e">https://admiralcloudberg.medium.com/tears-in-the-rain-the-2002-%C3%BCberlingen-midair-collision-591232d0c51e</a>, See on <a href="https://news.ycombinator.com/item?id=37120372">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div><a rel="noopener follow" href="https://admiralcloudberg.medium.com/?source=post_page-----591232d0c51e--------------------------------"><div aria-hidden="false"><p><img alt="Admiral Cloudberg" src="https://miro.medium.com/v2/resize:fill:88:88/2*pZPMtIONqtJYi2xHYD_Ivg.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"></p></div></a></div><p id="9441"><em>Note: this accident was previously featured in episode 18 of the plane crash series on January 6th, 2018, prior to the series’ arrival on Medium. This article is written without reference to and supersedes the original.</em></p><figure><figcaption>The tail section of Bashkirian Airlines flight 2937 lies in a field where it came to rest outside Überlingen, Germany. (Bureau of Aircraft Accidents Archives)</figcaption></figure><p id="fc3c">It is perhaps one of the saddest stories in the history of commercial aviation: a plane full of a Russian republic’s brightest young students — her aspiring artists, musicians, and athletes — ripped so cruelly from the sky, their hopes and dreams scattered across the fields of southern Germany. It is a story of split-second decisions, made amid a fog of confusion in the dead of night, which sent two airliners careening into one another at 35,000 feet. It is a story of a tragedy which could have been avoided, and of a man in the throes of grief who sought his own perverted justice in the murder of the air traffic controller he deemed responsible.</p><p id="2f2c">The tragic tale of the Überlingen disaster and its aftermath comes across like a modern-day Shakespearean drama. But the crash was also about a fundamental blind spot in the global air traffic control system, a gap whose existence authorities had failed to close. And it was perhaps a distant echo of the collapse of the USSR, a reminder that the Russian and Western aviation industries still possessed divergent impulses, whose untimely intersection could plant the seeds of disaster. Now, twenty years after the accident, long after the closure of its final chapters, we can look back upon the events of the 1st of July 2002 from both perspectives — literary and scientific — to tell the story of a profound human tragedy and the deficient system which made it inevitable.</p><figure><figcaption>The city of Ufa as it appears today. (UNESCO)</figcaption></figure><p id="8621">Far to the east of Moscow, in the rolling hills along the margin of the Ural Mountains, lies the city of Ufa, capital of the autonomous Republic of Bashkortostan. Like most of the Russian interior, it fell on hard times during the 1990s, as the collapse of the Soviet Union devastated the local manufacturing industry and plunged thousands into poverty. Even by 2002, as Russia’s economy started to turn around, travel opportunities for the people of Ufa were limited.</p><p id="b847">It was therefore quite a cause for celebration when the city’s special UNESCO-affiliated school announced that its parent agency, the United Nations Educational, Scientific, and Cultural Organization, would organize a field trip to a planned UNESCO youth festival on Spain’s prestigious Costa Dorada. A few dozen of the school’s top students were selected, some for their academic prowess, others for their skill in art, music, athletics, and other fields. Others bought their way in: the parents of some schoolchildren paid several hundred dollars apiece to send their children on the trip, a substantial sum of money which some could only afford at the expense of their own planned vacations.</p><figure><figcaption>This photo appears to show the children in Moscow before their flight to Barcelona. (Mayday)</figcaption></figure><p id="2a8f">The school group, including some 44 children between the ages of 8 and 18, traveled to Moscow on June 29th, 2002, where they planned to catch a commercial flight to Barcelona. But their bus driver accidentally took them to the wrong airport — Moscow has several — and they missed the flight.</p><p id="7511">While most travelers could simply go to the check-in counter and arrange to board a later flight, the group of 44 kids and five adult chaperones would need special accommodation. Stuck in Moscow while the trip organizers frantically searched for a transportation solution, the children toured the Red Square, the Kremlin, and other national landmarks, snapping photos of each other’s smiling faces in front of the high, red walls. They could not have known that their unexpected layover in the capital would be the first link in a deadly chain of events that would shock the world.</p><p id="be5c">After two days in Moscow, the school group received a lucky break: a local airline, having heard of the plight of the kids from Ufa, was able to arrange a charter flight to Barcelona on the night of July 1st. The company in question was Bashkirian Airlines, the de facto flag carrier of the Republic of Bashkortostan, which had split off from a regional Aeroflot subsidiary in 1992 and now carried passengers throughout central Russia and to popular holiday destinations abroad, including Barcelona. Between its local connections and its experience with the destination airport, it was ideally positioned to carry out the flight on short notice. And so, late on the night of the 1st of July, the kids and their chaperones boarded a Bashkirian Airlines Tupolev Tu-154 at Moscow’s Domodedovo International Airport.</p><figure><figcaption>Konstantin Kaloyev and his sister Diana before the accident. (Unknown author via Getty Images)</figcaption></figure><p id="13bb">They were joined by eight passengers who were not part of the school group, but had also missed earlier flights to Barcelona. A family of four from Belarus is thought to have been among them. Also on board were Svetlana Kaloyeva and her two children, Konstantin, 10, and Diana, 4, who were on their way to visit their father Vitaly Kaloyev, an architect from the North Caucasus town of Vladikavkaz who was working in Barcelona that summer on a vacation home for a Russian oligarch. Added onto the school group, the five other unaffiliated passengers, and the twelve crewmembers, the Kaloyev family brought the total number of people on board to 69.</p><figure><figcaption>RA-85816, theTupolev Tu-154 involved in the accident. (Torsten Maiwald)</figcaption></figure><p id="c78a">Although their three-engine Tupolev Tu-154 was designed in the 1960s in the Soviet Union, this particular example was much newer, having been produced in Russia in 1995, and was equipped with some of the latest technology. Nevertheless, a large cockpit crew was required to fly it. That night, there would be no less than five pilots aboard, including 52-year-old Captain Aleksandr Gross; 41-year-old Instructor Captain Oleg Grigoriev, the chief pilot at Bashkirian Airlines, who was overseeing Gross as he familiarized himself with the procedures at Barcelona; 50-year-old Navigator Sergei Kharlov; 37-year-old Flight Engineer Oleg Valeev; and 41-year-old First Officer Murat Itkulov. However, Instructor Captain Grigoriev was sitting in the right seat performing the duties of pilot not flying, so First Officer Itkulov simply rode along in the jump seat without being assigned any specific duties. Also on board were four flight attendants and three other Bashkirian Airlines employees riding behind as passengers, totaling twelve crewmembers.</p><figure><figcaption>The route of flight 2937 with the location of the Zürich ACC. (Google + own work)</figcaption></figure><p id="ce51">All seemed routine as the Bashkirian Tu-154, operating under the flight number BTC 2937, departed Moscow and headed west across Europe, cruising at 36,000 feet. One air traffic control sector gave way to another, and by 23:30 Central European time they were over southern Germany, passing overhead Munich. At that time, anticipating its imminent entrance into neighboring airspace controlled from Zürich, Switzerland, the Munich area controller handed the flight over to his Zürich-based counterpart.</p><p id="4ac0">That night, a single controller was handling all the airspace within the Zürich air traffic control sector. The facility handled all mid- and high-level traffic in an area covering northeastern Switzerland and southwestern Germany, as well as approach services for aircraft descending into airports in St. Gallen and Friedrichshafen. Tonight, all of these duties fell on the shoulders of just one man: Danish-born air traffic controller Peter Nielsen. Normally, this would not be a particularly stressful arrangement. Traffic in the region at this hour was usually light, since all the nearby major airports had closed for the night, leaving only high-level transiting aircraft bound for other parts of Europe. At the facility, it had become common practice for one of the two controllers on duty to take an extended rest in the break room during the middle of the night shift once the last planes had landed in St. Gallen and Friedrichshafen, and tonight was no exception. The other qualified controller left the control room at 23:15, and their assistant left ten minutes later, leaving only Nielsen and another assistant who was not authorized to control aircraft.</p><figure><figcaption>The work station where Peter Nielsen was working that night. (BFU)</figcaption></figure><p id="4daa">For Nielsen, this wasn’t an unusual situation, and he anticipated no difficulties controlling the two or three aircraft that were typically in his airspace at this time of night. But on the night of July 1st, there were additional complications. The air traffic control company had recently decided to make modifications to the way it divided the upper level airspace, necessitating several changes to the computer hardware that kept the control center running. Part way through Nielsen’s shift, a group of technicians arrived to install the update, and he was informed that his work station’s main computer would have to be shut down, causing his displays to operate in fallback mode — a secondary condition in which several features provided by the main computer became unavailable. In fallback mode, the system which automatically correlated an aircraft’s radar return with its filed flight plan would not work, forcing him to enter the information manually, and the Short-Term Conflict Alert light, which illuminates when the system predicts that two planes will pass too close, would be rendered inoperative. But Nielsen had no idea what features would be lost in fallback mode, nor did he have any obvious way of finding out. And as if that wasn’t enough, a few minutes later the technicians informed him that they would also have to disconnect the control center’s direct telephone landline to neighboring centers. The glitches were adding up, but with so few planes in the air, how dangerous could it be?</p><figure><figcaption>(Google + own work)</figcaption></figure><p id="15ec">But, just moments after the Tu-154 entered Zürich airspace, Nielsen faced another complication: an Airbus A320 belonging to German charter airline Aero Lloyd contacted Zürich, reporting that their flight had been delayed and they wanted to perform a late approach to Friedrichshafen Airport. When the second controller went off duty, no one had anticipated that an aircraft would try to land at Friedrichshafen after its nominal closing time, so Nielsen was forced to abruptly switch his focus to the approach sector, which normally wouldn’t have been his responsibility. It would have been possible to call and wake the second controller, who normally handled approach services, but for just one plane, it didn’t seem worth it. After all, with the Aero Lloyd plane already lined up for approach, all Nielsen needed to do was tell Friedrichshafen that it was coming. He picked up the direct landline to the Friedrichshafen control tower, but it had been disconnected. He tried using the regular phone system to call a posted phone number for the tower, but that didn’t work either. This was starting to become more complicated than he had anticipated.</p><figure><figcaption>An example of a TCAS display with aircraft of various threat levels. (BFU)</figcaption></figure><p id="498a">Meanwhile on board the Tu-154, the pilots spotted another plane in the distance, appearing on the situational display of their Traffic Collision Avoidance System. The system, or TCAS (tee-cas), incorporates altitude, speed, and heading information broadcast by the transponders of nearby aircraft, compares it to the aircraft’s own trajectory, and automatically assesses the relative threat of a collision. If the planes’ projected paths come too close, both airplanes’ collision avoidance systems will simultaneously issue opposite “resolution advisories,” telling one plane to climb and the other to descend. But so far, this other plane was still more than 10 nautical miles away, too distant for the system to suggest such drastic action.</p><p id="c766">Despite the distance, however, Instructor Captain Grigoriev could already see the plane’s flashing anti-collision lights blinking against the blackness of the moonless night. “Here, visually,” he said, pointing out the window. “[And] here it’s showing us zero,” he added, referring to the TCAS display, where the number representing the height difference between his aircraft and the intruder indicated zero feet.</p><figure><figcaption>A9C-DHL, the Boeing 757 involved in the accident. (Koen Gladines)</figcaption></figure><p id="76d6">This other plane was in fact DHL flight 611, a Boeing 757 cargo plane hauling packages from Bergamo, Italy to Brussels, Belgium. The flight had departed earlier that day from Bahrain, where DHL has its own local subsidiary airline, and was now on the second leg of its trip after a scheduled cargo swap in Bergamo. In command were two experienced pilots: 47-year-old Captain Paul Phillips, and 34-year-old First Officer Brant Campioni. Although they lived in Bahrain, they were originally from the UK and Canada, respectively. No one else was on board.</p><p id="bb68">Phillips and Campioni had made contact with Nielsen at 23:21 and were cleared five minutes later to climb to 36,000 feet in accordance with their flight plan. Unbeknownst to the crew or the controller, this put DHL flight 611 and Bashkirian Airlines flight 2937 on course to cross paths at the same height above an undefined point near Lake Constance on the Swiss-German border.</p><p id="4437">Now, at 23:34 and 24 seconds, First Officer Campioni said, “Excuse me, I’ll use the facilities,” and got up to go to the bathroom.</p><p id="961a">Eighteen seconds later, an automated voice called out, “TRAFFIC, TRAFFIC.” Captain Phillips’ attention was suddenly drawn to his TCAS display, where he saw an unidentified aircraft approaching from the right at approximately the same altitude. He watched it attentively, waiting to see if TCAS would issue a resolution advisory.</p><figure><figcaption>The route of DHL flight 611. (Google + own work)</figcaption></figure><p id="647e">At exactly the same moment, the same automated voice called out “TRAFFIC, TRAFFIC” in the cockpit of the Tupolev.</p><p id="05d3">“There, fucking traffic,” Instructor Captain Grigoriev said.</p><p id="6796">In the control center, Peter Nielsen suddenly noticed that the two planes appeared to be on a collision course. The Short-Term Conflict Alert light would have illuminated two minutes ago, but it wasn’t working, and Nielsen had noticed the conflict quite late. He quickly rolled his chair from the approach control station, where he had been speaking to the Aero Lloyd flight, back to the upper sector station. Leaning into the mic, he contacted the Tupolev and said, “Bravo Tango Charlie 2937, descend flight level 350, expedite, I have crossing traffic.”</p><p id="68c6">“Descend!” Grigoriev immediately ordered.</p><p id="8ac6">The instant he said this, the TCAS computer, detecting an imminent collision, issued a resolution advisory, and the robotic voice called out, “CLIMB! CLIMB!”</p><p id="bcb3">Captain Gross was already pushing his yoke forward to descend when First Officer Itkulov, observing from the jump seat, called out, “Climb, it says!”</p><p id="7aa5">“He’s guiding us down!” Grigoriev emphatically replied.</p><p id="9a3d">It was a situation for which they had never been trained: a controller telling them to descend to avoid another aircraft, while TCAS simultaneously instructed them to climb. It would obviously be impossible to comply with both. So which order should they trust? Which took priority?</p><figure><figcaption>The relative positions of the two planes as they approached one another. (BFU)</figcaption></figure><p id="adca">Meanwhile on the Boeing 757, Captain Phillips received an opposite resolution advisory. “DESCEND! DESCEND!” the robotic voice called out, and he immediately pushed his yoke forward to reach the target descent rate. The instruction came concurrently with Nielsen’s identical instruction to the Tupolev, causing him to miss this critical exchange. Both planes were now descending toward each other at a closing speed of more than 1,300 kilometers per hour.</p><p id="9963">Hearing the sound of the alarms, First Officer Campioni hurried back to the cockpit. Glancing out the window, he could clearly see the lights of the Tupolev at approximately their 2:00 position, blinking in the void. “Traffic right there,” he announced. But it was impossible to tell, without any visual reference point, whether the plane was above them or below them. All they could do was trust the TCAS resolution advisory.</p><p id="84ad">But as flight 611 descended, the projected separation distance between the two planes wasn’t changing. “INCREASE DESCENT,” the TCAS commanded. Phillips pushed forward on his yoke even harder.</p><figure><figcaption>This timeline shows just how quickly events unfolded. Communications involving the 757 are on the left, and those involving the Tupolev are on the right. (BFU)</figcaption></figure><p id="348d">In the control center, Peter Nielsen hadn’t received any acknowledgement of his instruction to the Tupolev. “Bravo Tango Charlie 2937, descend level 350, expedite descent!” he repeated.</p><p id="d55d">“Expedite descent level 350, Bravo Tango Charlie 2937,” Instructor Captain Grigoriev acknowledged.</p><p id="e5a2">For the pilots of the Tupolev, this second order removed any doubt about whom to obey. Captain Gross immediately pitched down even more, faithfully following the command to “expedite.”</p><p id="bdff">Ten seconds later, Nielsen hurriedly added, “Ja, you have traffic at your two o’clock, now at 360.” But from the perspective of the Tupolev, the traffic was at their 10:00 position, not their 2:00 position, and his misleading transmission led to confusion in the cockpit.</p><p id="d5cb">“It’s going below us!” said Navigator Kharlov.</p><p id="7f9c">“Where is it?” Grigoriev asked, peering out the window.</p><p id="4645">“Here on the left side!” said First Officer Itkulov.</p><p id="d0f8">“INCREASE CLIMB!” came the robotic voice of the TCAS.</p><p id="6bf8">“It says ‘climb’!” Itkulov repeated. But they kept descending, accelerating through -1,800 feet per minute.</p><p id="e0c2">As the Tupolev pilots frantically tried to work out what to do, Peter Nielsen, thinking he had ordered the Russian jet out of harm’s way, slid his chair back over to the approach control station, where the Aero Lloyd flight was calling him yet again. At his other station, First Officer Campioni on the Boeing 757 could be heard announcing over the radio, “Dilmun six hundred, TCAS descent!” But Nielsen never heard him.</p><figure><figcaption>A dramatized CGI animation of the moment of the collision from Mayday: Season 2 episode 4, “Deadly Crossroads.” In reality the left wing separated first, followed by the forward fuselage a full three seconds later.</figcaption></figure><p id="3ab3">Aboard the 757, it suddenly became apparent that the Tupolev, which just a few seconds ago appeared far away, was rapidly closing on their position. “Descend!” First Officer Campioni shouted. “Fuck, descend hard!”</p><p id="5918">At the same moment, the Tupolev pilots saw the Boeing 757 hurtling out of the night, headed straight for them. “Oh shit,” Captain Gross exclaimed, hauling back on his control column and pushing the engines to full power. On the 757, Captain Phillips pushed his yoke all the way to the stop in a desperate attempt to dive. And for a moment, 71 lives hung in the balance.</p><p id="2544">But it was already too late. At 23:35 and 32 seconds, the vertical tail of the 757 slammed into the underside of the Tupolev’s left wing as it passed overhead.</p><p id="c65f">“I told you it was coming from the left!” one of the Russian pilots managed to scream over the horrible roar of the impact.</p><p id="db99">Sliced nearly in two by the 757’s tailfin, its left wing ripped clean from its root, the Tu-154 began to disintegrate within seconds, spinning itself apart in a great cloud of fire. It rolled rapidly to the left, and then the fuselage failed and the plane broke in half, its cockpit and forward cabin folding back and ripping away, while the tail section and right wing, engulfed in flames, arced like a falling star across the night sky over Lake Constance.</p><figure><figcaption>The Mayday animation continues with both planes’ uncontrolled plunges toward the ground.</figcaption></figure><p id="fe16">On board the 757, the pilots felt a massive jolt, and then the plane yawed and rolled sharply as the loss of its vertical tail fatally compromised its directional stability. As it careened into this extreme maneuver, aerodynamic forces ripped off both engines, and the plane began to plunge from the sky, corkscrewing down into the dark forest below. The pilots likely fought until the end, but there was nothing they could do. About two minutes after the collision, DHL flight 611 plowed nose-first into a forest outside the village of Taisersdorf, instantly killing both crewmembers.</p><p id="ce2d">At the same time, local residents in the town of Überlingen and neighboring villages heard an explosion in the sky and looked up to see burning pieces of the shattered Tupolev raining down over an area encompassing more than 200 square kilometers. A dinner party near Owingen was interrupted when the flaming remains of the center section and right wing crashed down in the hostess’s rear garden. Nearby, the tail section slammed into a road and a field in front of a boarding school for disabled children, and about 300 meters away the severed cockpit fell to earth in an apple orchard. Other pieces of debris from both planes — the remains of the left wing, sections of the fuselage ceiling, a landing gear fairing, the tip of the 757’s stabilizer — fell like hail across a zone approximately 20 kilometers long.</p><figure><figcaption>Map of the distribution of major wreckage components. (BFU)</figcaption></figure><p id="90c9">As witnesses rushed outside, already struck with terror by the sight of the burning plane falling from 35,000 feet, they came across something even more horrible: the bodies of dozens of children, strewn for kilometers over streets, fields, and forests. The headmaster of the boarding school emerged to find about twenty dead children on his property; others found bodies in their yards, on the streets in front of their houses, and scattered in the fields around the shattered remnants of the fuselage. Not one among them had survived the fall — in fact, investigators would later determine that 40 of the 69 passengers and crew aboard the Tupolev were ejected from the plane before it hit the ground. This was a sight which would stay forever with those who witnessed it. The horror of a plane crash is bad enough when the victims are adults — but to be faced with such carnage wrought upon children is an experience which simply cannot be described.</p><figure><figcaption>Officials examine the tail section of the fallen Tupolev. (Bureau of Aircraft Accidents Archives)</figcaption></figure><p id="afa4">◊◊◊</p><p id="914d">Within about 15 to 20 minutes of the crash, a witness contacted Germany’s Federal Bureau of Aircraft Accident Investigation, or BFU, reporting a collision of two planes over Überlingen. Upon confirming that a crash had indeed taken place, the BFU launched one of the most significant investigations in the history of modern German aviation.</p><p id="15b2">As dawn broke over Lake Constance, investigators were already on the scene, confronting a vast crash site unlike any they had previously encountered. Thousands of people worked to cordon off the area, locate wreckage, and recover human remains. It would ultimately take several days to find all the bodies, confirming a grim, self-evident truth: that none of the 71 people on board the two planes had survived. Among the dead were one Briton and one Canadian — the DHL pilots — as well as four Belarusians and 65 Russians. Forty-eight of them were children.</p><p id="515b">In the city of Ufa, home to most of the dead, the population was left in a state of shock. In addition to the talented artists and athletes, several of the victims were the children of high-ranking officials in Bashkortostan, including members of the administration of the President of the Republic. Local authorities declared a period of mourning; businesses shut their doors, festivals were cancelled, and radio stations only played sad classical music. One restaurateur who tried to put on a pop song was nearly run out of town, so intense was the city’s collective grief.</p><figure><figcaption>A reconstruction of the exact configuration in which the planes came together. (BFU)</figcaption></figure><p id="41c0">Meanwhile, by examining the wreckage, BFU investigators were able to conclude that the planes collided at an angle close to 90 degrees, and that the tail of the 757 sliced through the fuselage and left wing of the Tu-154 from underneath. The Tu-154 subsequently broke up in flight, while the 757 lost control and crashed nearby. But the mystery only deepened: how could two relatively new airplanes, both equipped with the latest Traffic Collision Avoidance Systems, collide in the tightly controlled airspace of Central Europe? Western media, apparently citing the Swiss air traffic control agency, suggested that the Russian pilots had failed to follow the controller’s instruction to descend. Russian authorities lashed out at the reports, implying that the controller was at fault for telling them to descend in the first place. It was only several days later that Swiss authorities admitted that controller Peter Nielsen had only warned the Tupolev crew 50 seconds before the collision, and that they appeared to have complied within a relatively short period.</p><figure><figcaption>The Tupolev’s forward fuselage section lies crumpled in an orchard. (BFU)</figcaption></figure><p id="6e87">The answers to the mystery lay in the planes’ black boxes, which recorded the critical conversations on both flight decks in the minutes leading up to the collision. The BFU noted that both flight recorders on the 757 cut out nine seconds after it hit the Tupolev, when the engines separated from the wings, leading to a loss of power. The Tupolev’s flight data recorder also ceased operation three seconds after the collision when the fuselage broke in two, but investigators were horrified to discover that the cockpit voice recorder, mounted in the cockpit and powered by a backup battery, continued to record for a further two minutes as the severed cockpit plunged toward the ground.</p><p id="bd91">Their disturbing final contents aside, the black boxes revealed the fundamental misunderstanding which led to the crash. Unaware that TCAS was about to issue a resolution advisory, Peter Nielsen ordered the Russian crew to descend, while TCAS simultaneously told them to climb and instructed the 757 to descend. The Russian crew, faced with a choice between the controller and their TCAS, chose to obey the controller and descended directly into the path of the 757. This raised three primary questions: could either crew still have prevented the collision, why did the Russian crew choose not to obey their TCAS, and why did the controller allow the situation to become so critical before intervening?</p><figure><figcaption>An aerial view of the forward fuselage. (FlightGlobal)</figcaption></figure><p id="437d">To answer the first question, investigators carried out a second-by-second analysis of the last minute of the two flights, from the time the crews became aware of a conflict up until the moment of the collision.</p><p id="35c8">It should be noted that both aircraft were operating on the same radio frequency, and in theory could have heard every relevant ATC communication. But a series of timing coincidences prevented either crew from realizing what was taking place. Captain Phillips on the 757 might have heard Nielsen’s order for the Tupolev to descend had it not come at exactly the same moment as his own TCAS resolution advisory, which obviously commanded greater attention. First Officer Campioni wasn’t in the cockpit at the time and could not have heard it either. The same thing happened all over again during the controller’s second order for the Tupolev to descend, which corresponded temporally with the order from Phillips’ own TCAS to “increase descent.” In this dynamic environment, Phillips’ brain would have prioritized the more immediate command from the TCAS before considering the overall situation. And again, Campioni hadn’t put his headset back on yet and couldn’t have heard the transmission.</p><p id="926f">Subsequently, the 757 crew waited 23 seconds to inform air traffic control that they were in a TCAS descent, a delay which some felt was inappropriately long. But it seemed that Captain Phillips was primarily concerned with achieving the required rate of descent, and First Officer Campioni was neither in his seat nor wearing his headset until shortly before the transmission was in fact issued. The coincidental fact that Campioni decided to go to the bathroom right before the TCAS came to life evidently contributed to the lateness of the message, and in fact had he been in the cockpit throughout the event he might have been able to inform Nielsen in time to avert the collision, but that this did not happen could only be put down to random chance.</p><figure><figcaption>One of the 757’s engines came to rest in this cornfield, totally flattened by the force of the impact. (BFU)</figcaption></figure><p id="1068">Although Nielsen didn’t hear the 757’s “TCAS descent” call, it was recorded on the CVR of the Tupolev, and yet none of her crewmembers reacted either. Investigators theorized that amid the animated conversation and high stress levels in the Tupolev cockpit, the pilots simply didn’t hear it. This was the only communication which occurred between ATC and the 757 during the entire time the Tupolev was in Zürich airspace, hence there was no other opportunity for the crew to hear what the 757 was doing.</p><p id="1829">The BFU also noted that a misleading cue from the controller could have convinced the crew that descending was indeed the only way to avoid the collision. When Nielsen reported that the crossing traffic was at flight level 360 — that is, 36,000 feet — it was actually passing through 35,600 feet and descending rapidly. By placing it at 360, he put it above the Tupolev, which had already begun its own descent a few seconds earlier, when it was actually slightly below. This discrepancy occurred because Nielsen’s radar display only updated once every 12 seconds, and was still showing the 757 at 35,900 feet when he issued the transmission, rendering him unaware that it was descending.</p><figure><figcaption>An aerial view of the Tu-154’s tail section. (Bureau of Aircraft Accidents Archives)</figcaption></figure><p id="658a">Based on statements made on both cockpit voice recordings, it appeared that both crews were able to visually locate the other aircraft from an early stage, and in the case of the Tupolev this occurred even before the resolution advisory was issued. The blinking anti-collision lights against the moonless sky were in fact quite easy to see, even from a great distance, but judging the relative height of the planes and their future trajectories under such conditions was completely impossible. The human brain relies on points of reference to determine an object’s relative motion, but the conditions that night presented none. Only in the last few seconds before the collision would the planes have been large enough in the field of view for their respective crews to have understood their relative positions. Consequently, both crews did take evasive actions about two or three seconds before impact, but by then it was too late for their inputs to take effect.</p><figure><figcaption>The Tupolev’s tail came to rest across a rural road. (Bureau of Aircraft Accidents Archives)</figcaption></figure><p id="1cc0">Considering these facts, it could not be said that either crew was in a good position to avoid the other plane, either by visually anticipating a collision or by understanding the situation through overheard ATC communications. The more important question, therefore, was why the Tupolev pilots chose to obey ATC over their TCAS.</p><p id="c72c">In fact, this decision was deeply rooted in both the history of TCAS and the unique circumstances of aviation in Russia. It was a decision born not of faulty judgment, but of a fundamental cultural misunderstanding between the Russian crew and the Western engineers and regulators who designed the TCAS and then mandated its use.</p><p id="df11">Although traffic collision avoidance systems had been required in the United States since 1993 and in the European Union and the Middle East since 2000, at the time of the accident they were not required in Russia. In fact, the only reason the accident Tu-154 even had a TCAS was so that it could fly to destinations in Europe — after all, back home in Russia, where most traffic wasn’t equipped with the system, it would have been of little use. Training on the system was therefore quite sparse. Bashkirian Airlines didn’t have access to a Tu-154 simulator equipped with TCAS, and it’s not clear such a thing even existed. In the absence of an appropriately outfitted simulator, the pilots only received theoretical training on TCAS, followed by a brief demonstration of the system in a plane parked on the ground. Furthermore, the pilots gained minimal TCAS experience in the line of duty because they rarely flew to Europe — in fact, so far in 2002 the two captains put together had a mere 16 flights into airspace where TCAS was active. They almost certainly had never encountered so much as a TCAS traffic alert, let alone a full-on resolution advisory, and this would have been their first time responding to one, either in training or in real life.</p><figure><figcaption>The crash site of the 757. (Bureau of Aircraft Accidents Archives)</figcaption></figure><p id="930c">In addition to their unfamiliarity with the system, the airline’s Tu-154 operating manual contained language which contradicted that used by the manufacturer and undermined the very purpose of TCAS. As it was conceived in America, TCAS is a last line of defense, a surefire way to prevent a collision if the principles of air traffic control and “see and avoid” should prove inadequate. As such, there is no circumstance under which a TCAS resolution advisory should be disregarded, as its very activation implies that other means of collision avoidance have already failed. In fact, guidance issued by the US Federal Aviation Administration explicitly stated that a TCAS resolution advisory overrides even an order from air traffic control. But most everywhere else, the rules were nowhere near as clear-cut. Official guidance from the International Civil Aviation Organization, or ICAO, which signatory nations use to create their own regulations, did not say what to do if TCAS and ATC issued conflicting avoidance instructions. Similarly, European regulations failed to cover this scenario.</p><p id="2f76">But in Russia, the regulations not only lacked clarity, but appeared to directly contradict those suggested by ICAO. Notably, the Bashkirian Airlines Tu-154 operating manual said the following: <em>“For the avoidance of in-flight collisions … the visual control of the situation in the airspace by the crew and the correct execution of all instructions issued by ATC [is] to be regarded as the most important tool. TCAS is an additional instrument which ensures the timely determination of oncoming traffic, the classification of the risk and, if necessary, planning of an advice for a vertical avoidance manoeuvre.”</em> And after minimizing the importance of TCAS as a last line of defense, the manual went on to say, <em>“The ATC service [is] to be the basic system for the collision avoidance. Nevertheless, in case of no link with ATC, the TCAS will help the crew avoid a collision,” </em>implying that TCAS only needs to be followed in the absence of input from ATC. This advice was in line with the policies that existed under the Soviet Union, when controllers wielded a level of absolute authority that they never held in the West, but it did not correspond well to modern principles of traffic separation.</p><figure><figcaption>The damage to the 757’s tail where it struck the Tupolev. (BFU)</figcaption></figure><p id="6ad7">In practice, the idea that anything can override a TCAS resolution advisory defeats the purpose of the system, which is to prevent a collision after all other means of safe separation are exhausted. But the pilots of the Tu-154 certainly never considered it this way, and in their minds there would have been little ambiguity as to the precedence of Nielsen’s command to descend over the TCAS instruction to climb. This logic would have fallen apart had they recalled that TCAS would send an opposite instruction to the other plane, but their experience with the system was so limited that they probably forgot. First Officer Itkulov, who repeatedly called attention to the TCAS order to climb, may have remembered this fact, but he never clearly articulated it, and no one listened to him anyway.</p><p id="a2cf">It is also worth noting that the ATC order, unlike the TCAS resolution advisory, corresponded to the pilots’ conception of the way traffic conflicts are typically resolved in Russia. While the airplane on the left is expected to give way under Western right-of-way rules, Russian rules hold that both planes must change course, with the plane on the left — the 757 — climbing, while the plane on the right — the Tupolev — descends. In a TCAS environment, right of way is not very meaningful, but for these pilots it would have been the acting principle during 95% of their careers, and it would have reinforced the apparent correctness of Nielsen’s order.</p><figure><figcaption>One of the Tupolev’s wings came to rest in front of this house. (BFU)</figcaption></figure><p id="09a6">It was now apparent why the Tupolev pilots made their decision, and that this decision was entirely in line with their training. The largest remaining question then was why Peter Nielsen allowed the situation to escalate to the point of TCAS becoming involved in the first place.</p><p id="9189">The roots of Nielsen’s predicament go back to the very structure of the Swiss air traffic control system. For most of history, Switzerland’s air traffic control services were run by the state, but in 2001 this service was privatized, becoming an independent company known as Skyguide. Although the government still owned 99% of the shares in Skyguide, it did not receive government funding and was expected to support itself financially through contracts. This reorganization came at a time when air traffic controllers were in high demand across Europe due to an estimated 12% continent-wide shortfall in ATC personnel. Consequently, in the year before the accident, the number of controllers on duty in Zürich during the night shift was reduced from three to two.</p><p id="fd75">Back when three controllers were present, it had become common practice for one controller to take an extended break during the middle of the night. This habit was not officially sanctioned but had been tolerated by management for years. But when the standard night shift roster was reduced to two controllers, this practice continued, even though it left just one controller on duty through the middle of the night shift. This violated Skyguide rules, which required separate controllers to work the approach and upper sectors, but given that all nearby airports were closed to landing traffic by 23:00, no one seemed to think it would be a big problem if there wasn’t a dedicated approach controller during this time of night.</p><figure><figcaption>Part of the center fuselage section also fell near that same house. (BFU)</figcaption></figure><p id="4d9b">Most of the time, the workload at night was low enough that one controller could handle it without difficulty, and Peter Nielsen had become accustomed to this arrangement. But the addition of the maintenance work significantly increased his workload by disabling systems that would normally assist him with his duties. In combination with the unexpected arrival of the Aero Lloyd flight to Friedrichshafen, this directly contributed to the accident. Under normal circumstances, it would have been easy enough for Nielsen to call the Friedrichshafen tower to hand over control of the Aero Lloyd flight, then return his attention to the upper sector. But with the direct phone lines down, he and his assistant had to search for alternative means of communication, which occupied his attention for the first three out of the five minutes leading up to the collision. However, calling the approach controller, who was likely asleep in another part of the building, would have been even less efficient.</p><p id="4cd1">It also could not be ignored that the optical Short-Term Conflict Alert, which would normally have drawn his attention to the developing situation, was not working due to the disconnection of the main computer. And on top of this, the fact that the planes would cross paths in between scheduled waypoints meant that it was not obvious that their flight plans would conflict until the planes began to visibly converge on radar.</p><figure><figcaption>Another view of the Tu-154’s tail section. (Bureau of Aircraft Accidents Archives)</figcaption></figure><p id="358a">By the time Nielsen noticed the conflict, the planes were already closer together than the minimum allowed by regulations, and even if he had successfully averted the collision at that moment, this fact alone meant there would probably have been an investigation. At this point, he decided to contact the plane to which he had spoken most recently, which was the Tupolev, and because its flight plan showed it was scheduled to do so soon anyway, he chose to instruct it to descend. These spur of the moment decisions planted the seeds of disaster, but Nielsen had no way of predicting the confusion his order would cause. The TCAS resolution advisories had not yet been issued, nor could he have been aware that they would be issued less than one second after the end of his transmission. Although controllers are prohibited from issuing instructions which contradict a TCAS resolution advisory, the pilots must tell the controller about the advisory before this rule is applicable, and neither crew did so until much later.</p><figure><figcaption>The 757’s other engine came to rest in a different field. (BFU)</figcaption></figure><p id="465d">Once the Tu-154 crew had acknowledged his instructions to descend, Nielsen believed that the conflict was resolved. If he had watched the radar screen a few seconds longer, he would have noticed the 757 begin to descend as well, but before he could do so, the Aero Lloyd flight called him again. He spent the next 30 seconds or so informing this flight how to contact Friedrichshafen without an official control handover having taken place. Around the time that this conversation began, an aural alert sounded in the control center, calling out “CONFLICT, CONFLICT,” to warn that the distance between the planes was less than 6.5 nautical miles. However, no one present in the room could recall hearing the alarm, and even if Nielsen had noticed it, he would have disregarded it, believing that he had already put the planes on course to correct the situation.</p><p id="38df">Almost concurrently with these events, the 757’s first officer called to report that they were in a TCAS descent, but because he was at a different work station talking to a different plane, Nielsen didn’t hear the transmission. At that point, disaster became all but inevitable. In fact, by the time Nielsen next turned his attention back to the upper sector, the collision had already taken place. Just 50 seconds had passed since his first instruction to the Tupolev.</p><figure><figcaption>The tail section partially burned over both before and after impact. (BFU)</figcaption></figure><p id="0dfd">One final chance to prevent the collision was also foiled by the maintenance work. Heartbreakingly, controllers in neighboring Karlsruhe saw the collision coming, but they did not have the authority to speak to planes in another sector without permission from the responsible controller. The Karlsruhe controllers tried several times to call Nielsen in the minute before the crash, but the landlines were down and they couldn’t get through. By the time they gave up on this effort, it was too late to prevent the crash even by breaking the rules. The controllers were forced to watch, helpless, as the two planes collided and then disappeared from radar, knowing that dozens of people were dying before their eyes, and that there was nothing they could do to save them.</p><figure><figcaption>The Tupolev’s severed left wing landed in yet another field. (BFU)</figcaption></figure><p id="f0fd">Having already absolved the two crews of blame, the BFU was forced to conclude that Nielsen didn’t hold any personal responsibility for the disaster either — every decision he made was relatively sensible under the circumstances, with the exception of his mistaken report that the 757 was at the Tupolev’s 2:00 position. However, this slip-up did not contribute to the accident, since the Tu-154 crew already had the 757 in sight.</p><p id="6d0c">In the end, systemic deficiencies at the Zürich control center prevented Nielsen from doing his job safely and led more or less directly to the disaster. Skyguide had come to tolerate single-controller operations without conducting any risk assessment, believing that the practice was common throughout Europe. Skyguide also did not assess the potential risks involved in the maintenance work, and it failed to inform controllers of the work’s potential side effects. It was this apparent lack of interest in safety which created the circumstances for the accident to occur. That night, Nielsen was doing the jobs of three people — supervisor, upper sector controller, and approach controller — with inadequate information and multiple inoperative systems. Such a situation should never be allowed to develop, and Skyguide ultimately bore responsibility for the fact that it did.</p><figure><figcaption>A diagram of the 2001 Japan Airlines mid-air incident. (ARAIC Japan)</figcaption></figure><p id="80f9">In its final report on the accident, the BFU painted a picture of a series of wild coincidences which, in the presence of systemic deficiencies, led to disaster. But to come away from the report believing that the Überlingen collision was a one-off would be incorrect. In fact, the lack of clarity in many parts of the world about the relative authority of an ATC order and a TCAS resolution advisory was already known to the industry. In January 2001, this very same loophole nearly led to what would have been the worst air disaster of all time. As a Japan Airlines Boeing 747 with 427 people on board climbed toward 39,000 feet after takeoff from Tokyo, an overwhelmed trainee controller allowed it to embark on a collision course with another Japan Airlines flight, a DC-10 carrying 250 passengers and crew. As the planes drew near each other, the controller instructed the 747 to descend, but three seconds later, its TCAS instructed it to climb.</p><p id="e0d0">Trusting the controller over the automated system, the pilots of the 747 put their plane into a descent, unaware that the DC-10, having received a TCAS advisory to descend, was doing the same. Amid the confusion, the trainee controller’s supervisor attempted to order the 747 to climb, but her transmission was lost in the chaos of the moment. As the two planes descended directly toward each other, the crew of the 747 suddenly caught sight of the DC-10 and executed a last-second evasive maneuver, pitching steeply downward in a desperate effort to avoid a collision. Seconds later, the 747 passed just 135 meters underneath the DC-10, avoiding disaster, but only by the narrowest of margins.</p><figure><figcaption>This drinks cart was thrown into the 747’s attic during the avoidance maneuver. (ARAIC Japan)</figcaption></figure><p id="efae">The evasive maneuver was so abrupt that flight attendants, passengers, and loose objects were thrown into the ceiling, only to crash down again two seconds later. The violent change in direction injured 100 people, nine of them seriously, including a woman who suffered a broken leg. Damage to the cabin interior, particularly the ceiling, was extensive; most notably, a drinks cart, shown above, was thrown through the cabin ceiling and into the attic behind the first class lounge, where it remained for the rest of the flight. In the end, the 747 safely returned to Tokyo, and the injured passengers were released for medical treatment, many of them unaware that they had come frighteningly close to death.</p><figure><figcaption>An artist’s impression of the near miss, by Wikimedia user Anynobody.</figcaption></figure><p id="0c6f">Within a short time after the near miss, it became apparent that one plane had obeyed its TCAS while the other followed a conflicting instruction from ATC. The potential danger of this type of misunderstanding should have been plainly apparent. But by the time of the Überlingen disaster 17 months later, nothing had fundamentally changed.</p><p id="e308">Part of the problem was that the system by which such changes make their way around the world is very slow-moving. Japanese investigators would have had to issue a recommendation to the International Civil Aviation Organization; ICAO would then have had to adopt the new guidance; this guidance would have to have been propagated to signatory nations; those nations would have had to agree to adopt the new wording into their own regulatory systems; and then the new concept would have had to be passed on to pilots during recurrent training. Even if ICAO had immediately begun proceedings to clarify the relative precedence of TCAS resolution advisories and ATC commands (which it does not seem they did), it’s not clear that the changes would have reached the Bashkirian Airlines crew in time to prevent the accident. This is especially true considering that Russia’s TCAS-related regulations already diverged even from the original, flawed ICAO guidance, suggesting that bringing Russian rules into compliance would be quite difficult. On the other hand, had the two Japanese airliners actually collided, almost assuredly resulting in the deaths of an unprecedented 677 people, it’s quite likely that no one would ever make the same mistake again, even if ICAO did nothing. In this way, it becomes apparent how fatal accidents command much swifter change than near misses even in the absence of any conscious decision by regulators to treat them as such.</p><figure><figcaption>Part of the Tu-154’s landing gear fairing which was ripped off during the collision. (BFU)</figcaption></figure><p id="fa5c">In the years since the disaster over Überlingen, prescribed responses to TCAS resolution advisories have been standardized around the world, systems have been introduced which can alert controllers directly whenever a resolution advisory is issued to an aircraft, and TCAS is now capable of reversing its commands if one aircraft does not comply. Thanks to these changes, it is unlikely that a similar accident will happen again. And 20 years later, the Überlingen disaster remains the only major midair collision involving two planes with properly operating traffic collision avoidance systems.</p><p id="6a42">On the legal side, fault for the accident was officially placed on Skyguide, and several Skyguide officials were charged with manslaughter. Although they were found guilty, no real punishment was handed down — three Skyguide managers who tolerated rule violations were given suspended prison sentences, while a fourth was ordered to pay a small fine, a judgment widely considered inadequate. However, the company itself was forced to pay compensation to the victims and take corrective actions to improve its safety culture. It has managed Swiss airspace without incident ever since, as a vase of white flowers in memory of the victims permanently watches over the work station where Peter Nielsen once sat, forever reminding controllers of their responsibility to the public.</p><p id="9cc5">And the story of the Überlingen disaster should have ended there, with the necessary changes having been made to ensure the safety of future air travelers. But in fact, one tragic twist remained in store.</p><figure><figcaption>Vitaly Kaloyev at the memorial to his wife and kids.</figcaption></figure><p id="f4e8">◊◊◊</p><p id="55a3">Vitaly Kaloyev, the Russian architect, was waiting for his family in the airport in Barcelona when he received the unimaginable news: their plane had crashed, and there were no survivors. Stunned by the loss of his wife and two young children, Kaloyev immediately traveled to Germany, where he arrived in Überlingen the day after the accident. Consumed by grief, he joined the search for the remains of his four-year-old daughter Diana, against the recommendation of authorities. By some stroke of luck, her body was found intact, lying on the forest floor beside the pearl necklace Kaloyev had given to her. She was the youngest of the 71 victims, not even old enough to begin school. It seemed beyond cruel that she should lie dead in a forest in Germany while her bereaved father wept over her lifeless body.</p><figure><figcaption>Vitaly Kaloyev, right, confronts the CEO of Skyguide, left. (Keystone)</figcaption></figure><p id="7a20">Kaloyev subsequently returned to his native Vladikavkaz, where he buried his wife and children side by side and erected a sprawling shrine to their memory. It is never easy to move on from such a profound grief, but Kaloyev found it especially difficult. He could be found lingering by the memorial at any time of day and in any weather, for months on end. He barely slept or ate, and how could he? Everything which gave his life meaning had been taken away.</p><p id="0613">As the events which led to the crash started to become clear, Kaloyev became fixated on a singular goal: to convince Skyguide to apologize for its role in the accident. He attended gatherings of victims’ relatives and press conferences in Germany, where he confronted Skyguide officials and demanded that they apologize. But Skyguide, embroiled in lawsuits over the accident, had instructed its spokespeople not to admit any fault until a verdict had been handed down. Instead, the company offered him a total of 160,000 Swiss francs in compensation for his loss, on the condition that he refrain from any lawsuits. This is standard procedure in the West, and Europeans and Americans tend to respond to the practice by rolling their eyes, muttering obscenities about the company in question, and then suing to increase the payout. But in the cultures of the North Caucasus, there is an expectation that such a high-stakes dispute will end with either an admission of guilt and a request for forgiveness, or with justified revenge by the injured party. Not only would a failure to apologize be considered a damnable provocation, but the failure of the injured party to respond proportionately would be considered a dereliction of his duty as a man.</p><figure><figcaption>Vitaly Kaloyev and his family’s grave. (The Los Angeles Times)</figcaption></figure><p id="163b">Kaloyev soon changed course and asked instead if it would be possible to meet Peter Nielsen, to speak with him and convince him to apologize instead. But this too was denied — Nielsen was in no fit state to speak to the unstable relative of a Überlingen victim. And so Kaloyev drifted back and forth between Germany and Vladikavkaz, growing progressively angrier as the legal proceedings dragged on without any conclusion. Many in Russia felt that the slow pace of justice amounted to a coverup, and Kaloyev agreed. This was another cultural misunderstanding — in Russia, following an accident, everyone involved is usually arrested immediately and then released if they are not found at fault. In contrast, Western nations don’t typically arrest aviation professionals for making mistakes, unless gross negligence can be demonstrated, and company officials will only be charged after lengthy investigations. Kaloyev, however, had no patience for this lenient approach, and in late 2003 or early 2004, he decided to take matters into his own hands.</p><figure><figcaption>An undated photo of a young Peter Nielsen. (Lars Lindskov)</figcaption></figure><p id="d4a5">Having hired a private investigator to find Peter Nielsen’s address, Kaloyev arrived in Zürich in February 2004 and checked into a hotel. A few days later, on the 24th of February, he traveled to Nielsen’s house, armed with a 22-centimeter jack knife and photographs of his dead family members.</p><p id="fdd0">Initially, Kaloyev sat down in Nielsen’s garden, seemingly unsure what to do. When Nielsen eventually emerged to investigate, he did not respond kindly to the presence of Kaloyev on his property. Nielsen had been affected deeply by the crash, to the point where he required medical treatment for acute PTSD, and this unexpected visitation only rubbed salt in his wounds. A brief, unfriendly conversation ensued. Kaloyev then got up in Nielsen’s face and showed him the photos of the bodies of his children. Backed into a corner, Nielsen pushed them aside. It was at that moment that Kaloyev apparently snapped: blinded by rage, he stabbed Nielsen several times in the chest, mortally wounding him. He then ran away down the street, blood still dripping from his reddened hands, as Nielsen died in the arms of his family.</p><p id="ff3e">The following day, police arrested Kaloyev in his hotel room and charged him with premeditated killing. Public reactions to the revelation of the murder varied significantly. Europeans were largely outraged, while the response within Russia was much more mixed. Many people, while denouncing the murder, nevertheless sympathized with Kaloyev’s plight. A significant minority outright endorsed the killing, which drew heated condemnation from the other side, including from another man who also lost his entire family in the crash, who said he could see no justification for Kaloyev’s actions.</p><figure><figcaption>Vitaly Kaloyev speaks to reporters after his release from prison. (AFP)</figcaption></figure><p id="a7ae">In court, Kaloyev initially denied intending to kill Nielsen, but could not explain why he had brought the knife if his only goal was to talk. Later, he expressed no remorse for the murder, which he considered to be justified under his North Caucasus code of honor. In the end, a Swiss court, considering the mitigating circumstances, sentenced him to eight years for manslaughter. Even this relatively light sentence was seen by many Russians as too harsh, and the government began to put pressure on its Swiss counterpart to reduce the punishment. Switzerland ultimately caved under the pressure, and Kaloyev was released from prison without a clear explanation in 2007, having served only two years out of his eight year sentence.</p><figure><figcaption>A large crowd of reporters and well-wishers welcomed Kaloyev back home to Vladikavkaz. (Reuters)</figcaption></figure><p id="af3e">Kaloyev returned home to a triumphant welcome, where he was ushered off the plane by an adoring crowd of Vladikavkaz residents and members of the pro-Putin youth group Nashi. Although Russians overall were split on whether he was a hero or a criminal, his home province did not hesitate to pull out all the stops to celebrate his release. People cheered for him in the streets and stores refused to take his money when he shopped for groceries. Journalists selected him as Vladikavkaz’s “Man of 2007,” and the leader of North Ossetia-Alania appointed him Deputy Construction Minister for the autonomous republic. “<em>I don’t really take offense at people who call me a murderer,</em>” Kaloyev told the Los Angeles Times upon his return. “<em>People who say that would betray their own children, their own motherland… I protected the honor of my children and the memory of my children.”</em></p><figure><figcaption>Victims’ family members gather around the Tupolev’s tail after the crash. (AFP)</figcaption></figure><p id="88c4">All of this fanfare ignored the fact that Nielsen was never found at fault in the accident in the first place. As Russian nationalists hailed Kaloyev as a hero for carrying out “justice” on behalf of the victims, few could explain what Nielsen had actually done wrong, besides issuing a relatively late warning to the Tupolev crew. The way this particular segment of Russian society reacted to the crash and the murder was an ugly reflection of a national tendency to blame whoever happens to be present at the moment of a tragedy, while those responsible for creating the unsafe condition go unnamed and unpunished.</p><p id="7196">No doubt buoyed by his celebrity status, Kaloyev eventually recovered from his crippling grief, remarried, and had two more children, who are both three years old as of this writing. He retired from his post as Deputy Construction Minister in 2016, but he continues to live a fairly comfortable life in Vladikavkaz. In contrast, Nielsen’s family, hurt beyond words by Kaloyev’s callous and misguided revenge, returned to their native Denmark and retreated from the public eye.</p><figure><figcaption>A memorial near the site of the crash evokes the pearl necklace which belonged to Diana Kaloyeva. (Unknown author)</figcaption></figure><p id="de7a">◊◊◊</p><p id="2232">In the end, the Überlingen disaster was not the result of one man’s split-second decisions, but the inevitable product of a deficient system — of an air traffic control company which paid too little attention to safety, and of international and national-level regulators who were too slow to correct a glaring flaw in the rules which keep airplanes apart. It is also a reminder that cultural norms play as much of a role in aviation safety as they do in our perception of justice. As the two planes sped toward each other that night, a sequence of events took place in which eight people in three different locations all tried to avert disaster as best they could, only for their divergent expectations to steer them inexorably into the jaws of catastrophe. And as so often seems to happen, the most innocent among us paid the price, leaving in their wake a trail of broken dreams and broken families. Shedding more blood did not and cannot make those dreams whole again. They have vanished with the children of Ufa, like so many tears in the rain.</p><p id="6030">_____________________________________________________________</p><p id="7a57"><a href="https://www.reddit.com/r/CatastrophicFailure/comments/sqsjf5/the_crash_of_bashkirian_airlines_flight_2937_and/?" rel="noopener ugc nofollow" target="_blank">Join the discussion of this article on Reddit!</a></p><p id="bb9a">Visit <a href="https://www.reddit.com/r/AdmiralCloudberg/" rel="noopener ugc nofollow" target="_blank">r/admiralcloudberg</a> to read and discuss over 200 similar articles.</p><p id="5c8a">You can also <a href="https://www.patreon.com/Admiral_Cloudberg" rel="noopener ugc nofollow" target="_blank">support me on Patreon.</a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Police raid of a Kansas newsroom raises alarms about violations of press freedom (314 pts)]]></title>
            <link>https://www.npr.org/2023/08/14/1193676139/newspaper-marion-county-kansas-police-raid-first-amendment</link>
            <guid>37120350</guid>
            <pubDate>Mon, 14 Aug 2023 12:38:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.npr.org/2023/08/14/1193676139/newspaper-marion-county-kansas-police-raid-first-amendment">https://www.npr.org/2023/08/14/1193676139/newspaper-marion-county-kansas-police-raid-first-amendment</a>, See on <a href="https://news.ycombinator.com/item?id=37120350">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="storytext">
      <div id="res1193676499">
            <div data-crop-type="">
        <picture>
            <source srcset="https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s400-c85.webp 400w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s600-c85.webp 600w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s800-c85.webp 800w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s900-c85.webp 900w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1200-c85.webp 1200w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1600-c85.webp 1600w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1800-c85.webp 1800w" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/webp">
            <source srcset="https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s400-c85.jpg 400w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s600-c85.jpg 600w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s800-c85.jpg 800w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s900-c85.jpg 900w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1200-c85.jpg 1200w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1600-c85.jpg 1600w,
https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1800-c85.jpg 1800w" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/jpeg">
            <img src="https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1100-c50.jpg" alt="" loading="lazy">
        </picture>
        
</div>
<div>
    <div>
        <p>
                The offices of the <em>Marion County Record</em> sit across from the Marion County Courthouse in Marion, Kan., on Sunday.
                <b aria-label="Image credit">
                    
                    John Hanna/AP
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        John Hanna/AP
        
    </span>
</p></div>
<div>
        <picture>
            <source data-original="https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1200.webp" type="image/webp">
            <source data-original="https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1200.jpg" type="image/jpeg">
            <img data-original="https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1200.jpg" alt="" src="https://media.npr.org/assets/img/2023/08/13/ap23225722130724-705695a80ce7e30095161466f252c7787e283b93-s1200.jpg">
        </picture>
    </div>
<div>
        <p>The offices of the <em>Marion County Record</em> sit across from the Marion County Courthouse in Marion, Kan., on Sunday.</p>
        <p><span aria-label="Image credit">
            
            John Hanna/AP
            
        </span>
    </p></div>
   </div>
   <p>Law enforcement officers in Kansas raided the office of a local newspaper and a journalist's home on Friday, prompting outrage over what First Amendment experts are calling a likely violation of federal law. </p>   <p>The police department in Marion, Kansas — a town of about 2,000 — raided the <em>Marion County Record</em> under a search warrant signed by a county judge. Officers confiscated computers, cellphones, reporting materials and other items essential to the weekly paper's operations. </p>   <p>"It took them several hours," Eric Meyer, the <em>Marion County Record</em>'s co-owner and publisher, told NPR. "They forbid our staff to come into the newspaper office during that time."</p>   
   <p>Local authorities said they were investigating the newsroom for "identity theft," according to the warrant. The raid was linked to alleged violations of a local restaurant owner's privacy, when journalists obtained information about her driving record. </p>   <h3>Publisher says raid contributed to his mother's death</h3>   <p>Meyer's mother, Joan Meyer, collapsed and died one day after police raided her home, the <a href="http://marionrecord.com/direct/updated_illegal_raids_contribute_to_death_of_newspaper_co_owner+5447raid+555044415445443a20496c6c6567616c20726169647320636f6e7472696275746520746f206465617468206f66206e657773706170657220636f2d6f776e65723c212d2d2d2d3e?">Record reported</a> in an update. She was the newspaper's co-owner.</p>   <p>Joan Meyer was 98 and was "otherwise in good health for her age," the newspaper said. But, it added, she had been unable to eat or sleep after police entered her home Friday under a search warrant.</p>   <p>Joan Meyer "tearfully watched during the raid as police not only carted away her computer and a router used by an Alexa smart speaker but also dug through her son Eric's personal bank and investments statements to photograph them," according to the <em>Record</em>.</p>   <p>Without the devices, she was left unable to stream shows onto her TV or use devices if she needed help, the newspaper said. It also alleged that during the police operation, officers seized a number of devices that went beyond the search warrant's scope and were unrelated to their apparent investigation.</p>   <p>Officers came to Meyer's home around the same time police seized computers, cellphones and other equipment during a search of the <em>Record's</em> offices. </p>   
   <p>Another injury occurred, the newspaper said, when police chief Gideon Cody "forcibly grabbed" a cellphone from reporter Deb Gruver, alleging that the act injured Gruver's finger that had previously been dislocated.</p>   <h3>The raid appears to violate federal law</h3>   <p>Newsroom raids are rare in the United States, said Lynn Oberlander, a First Amendment attorney.</p>   <p>"It's very rare because it's illegal," Oberlander said. "It doesn't happen very often because most organizations understand that it's illegal."</p>   
   
<!-- END ID="RES1193676853" CLASS="BUCKETWRAP INTERNALLINK INSETTWOCOLUMN INSET2COL " -->
   <p>Several media law experts told NPR the raid appears to be a violation of federal law, which protects journalists from this type of action. The Privacy Protection Act of 1980 broadly prohibits law enforcement officials from searching for or seizing information from reporters. </p>   <p>Oberlander said exceptions to the Privacy Protection Act are "important but very limited." </p>   <p>One such exception allows authorities to raid a newsroom if the journalists themselves are suspected to be involved in the crime at hand. In a statement sent to NPR, Marion Police Chief Gideon Cody cited this exception to justify his department's raid of the <em>Marion County Record</em>. </p>   <p>"It is true that in most cases, [the Privacy Protection Act] requires police to use subpoenas, rather than search warrants, to search the premises of journalists unless they themselves are suspects in the offense that is the subject of the search," Cody said.</p>   <p>But Oberlander said that exception doesn't apply when the alleged crime is connected to newsgathering — which appears to be the case in Marion. </p>   <p>"It raises concern for me," Oberlander said. "It normalizes something that shouldn't be happening — that Congress has said should not happen, that the First Amendment says should not happen."</p>   
   
<!-- END ID="RES1193677313" CLASS="BUCKETWRAP INTERNALLINK INSETTWOCOLUMN INSET2COL " -->
   <p>Ken White, a First Amendment litigator, said police raids of newsrooms used to be more common in the U.S., which led Congress to bolster federal protections against such searches.</p>   <p>White said the police raid of the <em>Marion County Record</em> could also be a violation of the Fourth Amendment, which protects people from "unreasonable" searches and seizures by the government. The search warrant in Marion, signed by county magistrate judge Laura Viar on Friday morning, allowed officers to confiscate a wide range of items, from computers and hardware to reporting documents. </p>   
   <p>"It's an abuse of power by the police and it's a serious dereliction of duty by the judge who signed off on it," White said.  </p>   <p>Viar could not immediately be reached for comment. </p>   <h3>Identity theft allegations</h3>   <div id="res1193676145">
            <div data-crop-type="">
        <picture>
            <source srcset="https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s400-c85.webp 400w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s600-c85.webp 600w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s800-c85.webp 800w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s900-c85.webp 900w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1200-c85.webp 1200w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1600-c85.webp 1600w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1800-c85.webp 1800w" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/webp">
            <source srcset="https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s400-c85.jpg 400w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s600-c85.jpg 600w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s800-c85.jpg 800w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s900-c85.jpg 900w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1200-c85.jpg 1200w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1600-c85.jpg 1600w,
https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1800-c85.jpg 1800w" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/jpeg">
            <img src="https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1100-c50.jpg" alt="" loading="lazy">
        </picture>
        
</div>
<div>
    <div>
        <p>
                Eric Meyer, the publisher of the <em>Marion County Record</em>, is pictured on Sunday in Marion, Kan. Law enforcement officers seized the paper's computers and cellphones.
                <b aria-label="Image credit">
                    
                    John Hanna/AP
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        John Hanna/AP
        
    </span>
</p></div>
<div>
        <picture>
            <source data-original="https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1200.webp" type="image/webp">
            <source data-original="https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1200.jpg" type="image/jpeg">
            <img data-original="https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1200.jpg" alt="" src="https://media.npr.org/assets/img/2023/08/13/ap23225717589736-12d0249cae8ea00fc957108e8ea48fa53f1f29c8-s1200.jpg">
        </picture>
    </div>
<div>
        <p>Eric Meyer, the publisher of the <em>Marion County Record</em>, is pictured on Sunday in Marion, Kan. Law enforcement officers seized the paper's computers and cellphones.</p>
        <p><span aria-label="Image credit">
            
            John Hanna/AP
            
        </span>
    </p></div>
   </div>
   <p>Meyer, the <em>Marion County Record</em>'s publisher, said local restaurateur Kari Newell accused the paper of illegally obtaining drunk-driving records about her. </p>   <p>But the paper, Meyer said, received this information about Newell from a separate source, independently verified it on the Kansas Department of Revenue's Division of Vehicles website — and decided not to publish it. The paper instead opted to notify local police. </p>   <p>The search warrant, as published by the <a href="https://kansasreflector.com/2023/08/11/police-stage-chilling-raid-on-marion-county-newspaper-seizing-computers-records-and-cellphones/">Kansas Reflector</a> and verified by the police chief, specifically allowed officers to confiscate documents and records pertaining to "the identity theft of Kari Newell." The warrant also ties the search to "unlawful acts concerning computers" that were used to access the Kansas Department of Revenue records website.</p>   <p>"We never attempted to steal anyone's identity," Meyer said. </p>   <p>Jeff Kosseff, a law professor at the United States Naval Academy who specializes in the First Amendment, said he was surprised the county judge found there was sufficient probable cause to sign off on the search warrant. Kosseff said there would need to be "a whole lot more for this to be a correct decision."</p>   <p>"I can't imagine a scenario in which all of these other protections would be overcome to allow a raid on a newsroom," Kosseff said, referencing the First Amendment, the Fourth Amendment and the Privacy Protection Act. "This raid has been more than just potentially compromising sources. This has threatened the ability of the newsroom to operate altogether — and that's why we have these protections."</p>   <p>James Risen, former director of the Press Freedom Defense Fund, called the raid an "outrageous abuse of power by the local authorities." </p>   
   <p>Risen said all authorities involved in the raid should be investigated for carrying it out. </p>   <p>"There's lots of precedent for bad behavior of local officials against the press," Risen said. "In each case, it has to be called out and stopped if we're going to protect the First Amendment in this country."</p>   <p>Meyer said the confiscation of the paper's computers and phones makes it difficult to continue operations — but the paper, which has five full-time staffers, still plans to publish its weekly edition this Wednesday.</p>   <p>And, Meyer added, he's working with an attorney to challenge the police's right to inspect the items they confiscated.</p>   <p>"We cannot let this stand. They cannot put us out of business over this," Meyer said. "That just is too bad of a precedent to set for the United States, to allow anything like that to happen."</p>   <p><em>Emily Olson contributed reporting.</em></p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Small Kansas newspaper says co-owner, 98, collapsed and died after police raid (132 pts)]]></title>
            <link>https://www.cbsnews.com/news/kansas-newspaper-police-raid-marion-county-record-joan-meyer-dies/</link>
            <guid>37120188</guid>
            <pubDate>Mon, 14 Aug 2023 12:20:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cbsnews.com/news/kansas-newspaper-police-raid-marion-county-record-joan-meyer-dies/">https://www.cbsnews.com/news/kansas-newspaper-police-raid-marion-county-record-joan-meyer-dies/</a>, See on <a href="https://news.ycombinator.com/item?id=37120188">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                    
                            
                                    
                                                        
<article id="article-0" data-index="0" data-path="/news/kansas-newspaper-police-raid-marion-county-record-joan-meyer-dies/" data-infinite-scroll-options="{&quot;toggleClass&quot;:&quot;has--infinite-scroll&quot;,&quot;baseEl&quot;:&quot;.content__body&quot;,&quot;assetId&quot;:&quot;e23f494f-682b-4bdd-8376-70592a0ff0cd&quot;}" data-component="[&quot;infinite-scroll&quot;]">

  <div id="article-header" data-sort-time="1691957335000" data-update-time="1691957335000">
    <header><p>
        <a href="https://www.cbsnews.com/us?ftag=CNM-16-10abg0d" data-invalid-url-rewritten-http="">
          U.S.
          </a>
      </p>
      
      
      <div>

        <!-- show SVG here -->
                <!-- end show SVG -->

                  
        
        <p>
          <time datetime="2023-08-13T16:08:00-0400">Updated on:  August 13, 2023 / 4:08 PM</time>
          / CBS News
        </p>
        


</div>
          </header></div>

      
  
  <section><p>Joan Meyer, the 98-year-old co-owner of a small Kansas newspaper, collapsed and died at her home on Saturday, a day after police raided her home and the <a href="http://marionrecord.com/" target="_blank" rel="nofollow noopener">Marion County Record</a>'s office, the newspaper said. Meyer had been "stressed beyond her limits and overwhelmed by hours of shock and grief," the Record said, calling the raids illegal.</p><p>Marion Police Chief Gideon Cody on Saturday defended the raid and said that once all the information is available, "the judicial system that is being questioned will be vindicated." Police have not shared an update since Meyer's death was announced.</p><p>Police took Meyer's computer and a router used by an Alexa smart speaker during the raid at her home, according to the paper. Officers at the Record's office seized personal cellphones, computers, the newspaper's file server and other equipment. Cody also allegedly forcibly grabbed reporter Deb Gruver's cellphone, injuring a finger that had previously been dislocated.</p>    
  <p>"Our first priority is to be able to publish next week," publisher Eric Meyer said. "But we also want to make sure no other news organization is ever exposed to the Gestapo tactics we witnessed today. We will be seeking the maximum sanctions possible under law."</p><p>The federal <a href="https://www.justice.gov/archives/jm/criminal-resource-manual-661-privacy-protection-act-1980" target="_blank" rel="nofollow noopener">Privacy Protection Act</a> protects journalists and newsrooms from most searches by law enforcement, requiring police usually to issue subpoenas rather than search warrants.&nbsp;</p>

    

<p>"It is true that in most cases, it requires police to use subpoenas, rather than search warrants, to search the premises of journalists unless they themselves are suspects in the offense that is the subject of the search," Cody said.&nbsp;</p><p>Friday's raid was conducted on the basis of a search warrant. The search warrant, posted online by the <a href="https://kansasreflector.com/2023/08/11/police-stage-chilling-raid-on-marion-county-newspaper-seizing-computers-records-and-cellphones/" target="_blank" rel="nofollow noopener">Kansas Reflector</a>, indicates police were investigating identity theft and unlawful acts concerning computers. It also indicated police were looking for documents and records pertaining to local restauranteur Kari Newell.&nbsp;</p><p>According to the Record, Newell had accused the newspaper of illegally obtaining drunk driving information about Newell and supplying it to Marion Councilwoman <a href="https://www.marionks.net/people/ruth-herbel" target="_blank" rel="nofollow noopener">Ruth Herbel</a>.&nbsp;</p><p>"The Record did not seek out the information," the newspaper wrote. "Rather, it was provided by a source who sent it to the newspaper via social media and also sent it to Herbel."</p>

    
    

<p>The Record verified the information about Newell through public records but did not plan to publish it, believing that the information had "been intentionally leaked to the newspaper as part of legal sparring between Newell and her estranged husband," the paper wrote.&nbsp;</p><p>"The victim asks that we do all the law allows to ensure justice is served," Cody said. "The Marion Kansas Police Department will [do] nothing less."</p><p>The Kansas Bureau of Investigation assisted in the investigation "into allegations of illegal access and dissemination of confidential criminal justice information," the bureau said in a statement.&nbsp;</p><p>"Director Mattivi believes very strongly that freedom of the press is a vanguard of American democracy... But another principle of our free society is equal application of the law," the bureau said, adding, "No one is above the law, whether a public official or a representative of the media."</p><p>Police have fallen under scrutiny due to the search, with free speech advocates expressing concern about its implications.&nbsp;</p><p>The raid appears to have violated federal law and the First Amendment, according to Seth Stern, advocacy director of&nbsp;<a href="https://freedom.press/news/fpf-statement-on-alarming-police-raid-of-kansas-newspaper/" target="_blank" rel="nofollow noopener">Freedom of the Press Foundation</a>.&nbsp;</p><p>"This looks like the latest example of American law enforcement officers treating the press in a manner previously associated with authoritarian regimes," Stern said Friday. "The anti-press rhetoric that's become so pervasive in this country has become more than just talk and is creating a dangerous environment for journalists trying to do their jobs."</p>

    
    

<p>PEN America on Saturday said law enforcement should be held accountable for violating the Record's rights.&nbsp;</p><p>"Journalists rely on confidential sources to report on matters of vital public concern," Shannon Jankowski, PEN America's journalism and disinformation program director, said in a statement. "Law enforcement's sweeping raid on The Marion County Record and confiscation of its equipment almost certainly violates federal law and puts the paper's very ability to publish the news in jeopardy."</p>
                  
        
      
        
    <!-- data-recirc-source="chartbeat" -->

    <!-- tags --><ul>In:
          <li><a href="https://www.cbsnews.com/tag/kansas/">Kansas</a></li>
      </ul><div>
    <p><a href="https://www.cbsnews.com/search/author/aliza-chasan/" data-invalid-url-rewritten-http="">Aliza Chasan</a></p><div>
        <p>Aliza Chasan is a digital producer at 60 Minutes and CBS News.</p>
                <p>
                                                    
            <a href="https://twitter.com/AlizaChasan" rel="nofollow noopener">
                
                Twitter
            </a>
            
            
            
                    </p>
            </div>
</div>
    </section><div id="soft-login-gate" data-soft-login-gate-options="{&quot;url&quot;:&quot;https:\/\/www.cbsnews.com\/user\/email-check\/&quot;}" data-smart-banner-options="{&quot;cookieName&quot;:&quot;SB_soft-login-gate&quot;,&quot;bannerVisibleClass&quot;:&quot;soft-login-gate--visible&quot;,&quot;bannerHiddenClass&quot;:&quot;soft-login-gate--hidden&quot;,&quot;retryDays&quot;:0}" data-component="[&quot;soft-login-gate&quot;,&quot;smart-banner&quot;,&quot;logingate-cookie-check&quot;]">
    <p>Thanks for reading CBS NEWS. </p>
    <p>Create your free account or log in <br> for more features.</p>

    <form method="post" id="soft-login-gate__form">
        
        <div>
            <p>
                Please enter email address to continue
            </p>
            <p>
                Please enter valid email address to continue
            </p>
        </div>
    </form>
</div>
  
  </article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Little Rat – Chrome extension monitors network calls of all extensions (195 pts)]]></title>
            <link>https://github.com/dnakov/little-rat</link>
            <guid>37119942</guid>
            <pubDate>Mon, 14 Aug 2023 11:49:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/dnakov/little-rat">https://github.com/dnakov/little-rat</a>, See on <a href="https://news.ycombinator.com/item?id=37119942">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      
          <p>      A tag already exists with the provided branch name. Many Git commands accept both tag and branch names, so creating this branch may cause unexpected behavior. Are you sure you want to create this branch?
</p>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Testing on production (146 pts)]]></title>
            <link>https://marcochiappetta.medium.com/yes-you-should-test-on-production-61f6dc61908b</link>
            <guid>37118983</guid>
            <pubDate>Mon, 14 Aug 2023 09:14:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://marcochiappetta.medium.com/yes-you-should-test-on-production-61f6dc61908b">https://marcochiappetta.medium.com/yes-you-should-test-on-production-61f6dc61908b</a>, See on <a href="https://news.ycombinator.com/item?id=37118983">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><h2 id="ea2c">Shipping confidence</h2><p id="025f">We can define “shipping confidence” as the feeling a mentally sane developer has when they know their code is about to be deployed to production (whether it can be updated over the air or not). Like with any feeling, shipping confidence is a spectrum.</p><p id="cf9a">A company can be placed on such spectrum as shown in this example:</p></div><div><p id="e3d7">If Boeing makes a mistake in their flight control software, people will most likely die.</p><p id="4e2e">If Tesla makes a mistake in their autopilot software, people might die.</p><p id="6a04">If JP Morgan makes a mistake in their funding software they will lose $ and some people might see funky numbers in their accounts, leading them to changing bank.</p><p id="2801">If Netflix makes a mistake in their streaming software millions of people’s dates and lunch breaks will be ruined and they might not renew. They would also lose credibility with their partners.</p><p id="646a">If GitHub makes a mistake it can affect thousands of businesses but they’ll likely shrug and their DevOps team will just post “GitHub is down, nothing we can do” on some Slack channel. They might offer <a href="https://github.com/customer-terms/github-online-services-sla" rel="noopener ugc nofollow" target="_blank">some credits you can use within 30 days</a>.</p><p id="6ded">If <a href="https://x.com/levels.io" rel="noopener ugc nofollow" target="_blank">Pieter Levels</a> (👑) makes a mistake some customer <em>might</em> request a refund. He’ll fix it, then go back to shitposting about threadbois.</p><p id="25c2">It’s clear that shipping confidence is tightly coupled with the loss of money (even the loss of life can be quantified in $, sad truth but truth nonetheless), whether direct or as a consequence of reputational damage. This is something that is normally explained to sophomore CS/CE students in some “software engineering” or “software architecture” kind of course.</p><p id="0305">The reason it’s usually taught to sophomores is because freshmen are too busy to understand what it means (they are only, rightfully, worried about making something work <em>no matter what</em>). And junior/senior students have likely already experienced this through an internship or a job.</p><p id="9375">Intuitively there’s also a direct relationship between shipping confidence and developer experience. And since the latter has a direct impact on throughput, correctness and, in general, team morale, it is important to understand how they behave together.</p><h2 id="f644">Cannon and flies</h2><p id="0431">We have seen that the two main dimensions of shipping software are confidence and financial impact. Sometimes it’s hard to estimate the latter so we’ll just name it “criticality”.</p><p id="5ffa">Changing the name from “financial impact” to “criticality” allows us to turn the question “how much $ would we lose if this went wrong?” to a more generic, yet easier to estimate, “what’s the worst that can happen?”.</p><p id="99ed">Some examples:</p><p id="fa3a"><strong>What’s the financial impact of a SpaceX rocket exploding?</strong></p><p id="bdcf">Too hard to estimate the financial impact. How many man hours were spent on building it? What about the materials? Was anyone injured? Does it open the company to a lawsuit?</p><p id="8d42">Instead we can ask:</p><p id="cf90"><strong>What’s the worst that can happen if a SpaceX rocket explodes?</strong></p><p id="6c60">Well, we can absolutely limit the criticality of such event. Stay as far as possible from any inhabited area, make sure everything can be remotely controlled, avoid a human payload for the first N tests etc.</p><p id="c51b">Obviously SpaceX already does all that but it helps to outline some of the steps because they tell us something very important: it is <em>fundamental</em> for SpaceX to decrease criticality as much as possible, so time spent doing so <em>is time well spent</em>.</p><p id="62b5">But not all companies deal with this kind of criticality. In fact the four quadrants below help us determine what degree of preparation is necessary once we can answer the question “what’s the worst that can happen?”.</p></div><div><p id="37bc">The ideal quadrant is obviously “Safe and fast” but not everyone is lucky enough to be able to stay there. A small project that starts there might move to “Safe but slow” (e.g. a company that scales up and can’t afford downtime) or to “Move fast and break things™️ zone” (e.g. a weekend project that gets funding and becomes a growth oriented startup).</p><p id="d0b4">There is <em>absolutely no reason</em> why any software project should stay in the bottom left quadrant. The “opportunity cost zone” should be avoided like you would with nuclear waste.</p><p id="869b">Yet so many projects end up right there. Why is that?</p><h2 id="017d">Premature optimization</h2><figure><figcaption>I’ve embedded a xkcd (1691) to improve the credibility of this article</figcaption></figure><p id="c2f9">I hate the terms “junior” and “senior” so I’ll replace them with “smart” and “<a href="https://grugbrain.dev/" rel="noopener ugc nofollow" target="_blank">grug brained</a>”, respectively.</p><p id="667b">Most smart engineers are primarily moved by one thing: wanting to prove themselves. So they dive into best practises, elegant patterns, flamboyant versioning strategies and they often ask “what’s the best way to do X?”. How I know? Because I used to be one. And I was lucky enough to meet grug brained peers that were willing to question my choices.</p><p id="2532">Grug brained engineers start with a much simpler question “what’s the point of doing X?”. For a grug brained dev it’s truly soul crushing to work on X when the impact of X isn’t clearly defined, or at the very least estimated.</p><p id="9a01">A great example of this is, lo and behold:</p><blockquote><p id="0ffd"><em>microservices.</em></p></blockquote><p id="448b">Microservices are a <em>great</em> pattern when you have multiple teams and you want each team to have a high degree of autonomy in things like the choice of stack, deployment processes etc. As long as the edges of these services are clearly specced and documented (whether this is true is purely a matter of diligence and competence) things will be fine.</p><p id="bd50">Microservices are <em>utter crap </em>when your team is made up of 5–10 people, everyone <em>kinda </em>works on everything, you’re not even sure of what you’re building yet and maybe you even rely on a monorepo because you read that Google does it so why shouldn’t you? Increased complexity and friction for no benefit whatsoever.</p><p id="b64d">A smart developer might read somewhere that microservices are a great solution to complexity. What he fails to understand is that there’s <a href="https://en.wikipedia.org/wiki/No_such_thing_as_a_free_lunch" rel="noopener ugc nofollow" target="_blank">no such thing as a free lunch</a>. Employing a pattern like microservices (or whatever else) will decrease overall complexity by N% but add a fixed amount of inherent complexity due to the added constraints.</p><p id="32e4">This translates into the single worst thing you can do to (figuratively) kill your engineering department by a thousand (churn) cuts: <strong>poor developer experience.</strong></p></div><div><h2 id="8ad7">Developer experience</h2><p id="66ce">Developer experience is how much your (present and potential) devs want to work on a specific project. Poor developer experience is a byproduct of dissonance between perceived complexity of a project and tangible complexity of the systems and processes related to it.</p><p id="b4a6">Imagine taking a big, satisfying dump and then having to solve a Rubik’s cube to get some toilet paper. The perceived complexity of taking some paper to wipe your ass is (I hope we agree) low. When you’re presented with a Rubik’s cube your only thought is that you’ll never use that toilet ever again.</p><p id="0713">In the best case you end up spending minutes or hours (opportunity cost!) solving the cube and leave in frustration (but with a clean butt). In the worst case you throw away your underwear.</p><p id="c52c">Now, I’m sure whoever designed the toilet had a good reason to put that Rubik’s cube there. Maybe someone kept stealing the toilet paper. Maybe it’s a test to determine whether you’re worthy of having a clean butt. Who knows, but most of all, who cares!</p><p id="d81e">The only people who’ll keep enduring that kind of pain are desperate people. People who <em>need</em> that paycheck, people who can’t be bothered to look for something different. Unfortunately there is no easy way to distinguish between people who are good <em>and</em> need a paycheck from people who just need a paycheck. But you sure as hell don’t want the latter in your team.</p><p id="a0a3">Therefore detecting this kind of dissonance becomes increasingly harder the larger the company grows. People will be less motivated to report, and contribute to the resolution of, these issues. Those who try will be dismissed with a vague “yeah, we’re working on it” and find ways to work around it in the hope that one day they’ll be in a position where they are taken more seriously.</p><p id="21ff">A concrete example of this is adding logic to work around issues with <em>internal</em> infrastructure or APIs. Imagine you knew the guy who put the Rubik’s cube there and, because he’s not exactly easy to work with, instead of asking him “dude wtf is this?” you realized you can break the cube and reassemble it solved to get your toilet paper. Most people, believe it or not, will do the latter.</p><p id="f8b8">I’ve been a witness of this negligence in multiple occasions: a team starts working on a new project that needs support from another team, they start using their service only to realize there’s undocumented behavior or nasty bugs, so they try to report it once, twice, three times and those tickets sit in “Backlog” for weeks, sometimes months.</p><p id="926b">At some point frustration takes over and the first team decides they can just implement some additional validation, retries etc. to work around all that. <strong>That’s a terrible mistake and in the long run will be the cause of cost overruns, unmet deadlines, increased churn and overall bad vibes. </strong>And nobody wants bad vibes.</p><p id="8a0c">Easy math: imagine this is a service used by N teams and it has a bug that only comes out under specific circumstances so that it goes unnoticed until the first production deployment is completed. Fixing this bug might take 2 man-days. Let’s say some super senior guy who makes $300k/year has to work on this, which prices the bugfix at around $2400 (considering ~250 working days in a year).</p><p id="8951">Imagine now that it takes 3 days to find such bug, diagnose it and deploy a workaround. And these teams don’t really talk to each other (Big Corp style) so it’s not like they can <em>write once, run anywhere™️ </em>(nor they should, as shown below)<em>. </em>Let’s assume the dev on each of these teams, that has to write the workaround, is paid $150k/year. N = 2 is enough to make fixing the bug the most rational, economically sound choice.</p><p id="bb6e">Even worse: imagine the same devs realize that they share the same pain and come together in a sort of think tank and start contributing to a single client to access this service. This way the workaround will only have to be implemented once and everyone will benefit from them, right? RIGHT?</p><figure></figure><p id="bf2d">Your job as an engineer is to do what’s best for the whole <strong>organization</strong>, not just for your team. Learning to (blamelessly) hold other teams accountable is an art, more than a science, but it’s what eventually helps the whole organization move forward.</p><p id="7215">So what can we do to avoid this dissonance in the first place? Easy: question everything and ask the right questions.</p><p id="b190">There is a fundamental difference between complaining and questioning. A complaint is an expression of frustration that carries no expectation that the source of the frustration will be resolved and no suggestions on how to do it. Questioning is an expression of doubt, accompanied usually by data (to prove the frustration is real and what impact it has) and, when possible, a suggestion on how to resolve it.</p><p id="abf4">And what’s the best question we can ask when trying to determine whether the complexity of a system is justified in comparison with the perceived complexity of the task at hand?</p><h2 id="3d8f">“What’s the worst that can happen?”</h2><p id="fcae">And we’re back at criticality!</p><p id="0001">What’s the worst that can happen if we scp our PHP files straight onto a Linode VPS?</p><ul><li id="55d1">In a team of 1 with a product that has 10 users? Absolutely nothing. (Ironically we’ve seen this is true with thousands of customers too, at least in the B2C world)</li><li id="d2f5">In a team of 10 with a product that hasn’t launched yet? A “wtf” from a colleague on Slack.</li><li id="48b0">In a team of 100 with a product that has 1M customers? Absolute madness.</li></ul><p id="0cd8">What’s the worst that can happen if we go down for 1 hour?<br>(Forget <a href="https://www.youtube.com/watch?v=gVpcPZ2KdpA&amp;ab_channel=BipperMedia" rel="noopener ugc nofollow" target="_blank">that BS scene from The Social Network</a> please)</p><ul><li id="57ad">For a product that turns your selfies into cat photos? Nothing. Maybe a refund.</li><li id="3be7">For a product that handles automation for an HR department of a 150 person company (à la Workday)? A few complaints and a post mortem.</li><li id="f858">For a beta product that handles customer funds but serves like 20 transactions a day? Some frustration (assuming no loss of funds).</li></ul><p id="815e">What’s the worst that can happen if there’s data loss?</p><ul><li id="2788">Can your data be rebuilt from other data sources over a brief enough period of time (e.g. consolidated accounting from multiple cost centers in a day and the report deadline is a week away)? Nothing.</li><li id="f4a6">Is the data from your customers but ephemeral (think WeTransfer)? Maybe a few bug reports, refund requests.</li><li id="0f7a">Is your data customers’ emails and you can’t recover a backup with an acceptable delta (hours, not days)? You’re screwed. (<a href="https://twitter.com/dhh/status/1689634956790669312" rel="noopener ugc nofollow" target="_blank">Video from DHH</a> (👑) that inspired this example)</li></ul><p id="83e3">You get the point.</p><p id="b2dd"><strong>Disclaimer:</strong> it’s one thing to go down 1 hour every 3 months, on average. A completely different thing to go down 1 hour every couple of days. Maybe I’ll add time/SLAs as a 3rd dimension to the confidence/criticality chart.</p><h2 id="9dfd">“Guards!”</h2><p id="f8c2">Once you’ve assessed what the worst case is the follow up should be “is it worth spending time adding guards to avoid it?”.</p><p id="5bf2">In most cases the answer is a resounding “no”.</p><blockquote><p id="9751">“Is it worth hardening my code to make sure there is never an uncaught exception, while processing a selfie that turns into a cat, to keep my logs clean?” — No.</p><p id="d6d2">“Is it worth adding a catch clause for a specific kind of error that I know how to recover from, to prevent a known issue from blocking a series of sequential steps?” — Hell yeah!</p><p id="8765">“Is it worth adding retry logic for a function that is being executed every few minutes and that can fail up to 10% of the total times it’s called with no tangible issues?” — Nope. But you should monitor that % and act accordingly.</p></blockquote><p id="4c09">If the answer is yes and the solution is semi-trivial then go ahead!</p><p id="cb2d">If the answer is maybe but you’re unsure about what it would entail you unfortunately need to estimate the opportunity cost of not avoiding it. If it exceeds the estimated cost for implementing the solution (by a fair margin) then green light. Otherwise, why bother?</p><p id="ccac">Keep in mind that part of the cost comes from something that modern development tools prioritize a lot, and rightfully so…</p><h2 id="2c3e">Feedback loop</h2><p id="71fd">If your guard increases the feedback loop’s completion time, that’s something you won’t get rid of over time, quite the opposite! These changes tend to quickly compound and getting rid of them in the future becomes exponentially harder the longer they are there. (Ok maybe not “exponentially” but you get what I mean)</p><p id="5299">If there are 5 devs on your team and they complete, say, 100 feedback loops (e.g. committing to a remote environment) per day, an increase of 10 seconds leads to an increase of almost 1.5 hours in total time spent every day. At $100/hour (which is fair for experienced devs) that puts our increase in costs at <strong>about $3000/month</strong>. (1.5h/day * $100 * 20 days)</p><p id="87db">What can possibly cause a 10 second delay on each feedback loop, you ask? Easy: a pre commit hook that runs some integration tests. Or misconfigured caching in the CI pipeline that forces Docker to pull all layers every single time.</p><p id="8592">And that’s not considering the increase in frustration (and related decrease in shipping confidence) for the team. It might be tiny, but it’s there.</p><p id="4686">At that point it’s not only suggested, it would be outright wrong not to do it, that you start estimating how effective these changes are in relation to what the consequences might be.</p><blockquote><p id="7193">It’s the small things that, put together, make our life miserable.<br>(Read it somewhere a long time ago, can’t find the source but it’s so true)</p></blockquote><figure></figure><p id="efd5">Let’s take an example: a service’s SLA forces the company to pay out about $1000/hour for downtime.</p><p id="b53f">An obvious guard would be to have a dev environment that mimics production as much as possible (this isn’t always possible of course). Thankfully there’s a ton of leverage here: the reproducible envs can be automated, together with some sanitization (e.g. you don’t want to have real email addresses in your dev database duh) and tests.</p><p id="2933">From my experience this is pretty straightforward up to a few hundred thousand users and a DB under a terabyte, assuming reliance on 3rd parties (e.g. payments) is minimal (or mockable).</p><p id="8792">It becomes pretty much impossible at larger scale. One might be tempted to think “well, if I can’t rely on this when I have 1M users why would I do it at 100k?” and that’s equivalent to asking “well, if I can’t rely on both my legs when I grow so old I can’t use them, why would I do it now?”.</p><p id="c05d">Someone who is overly cautious might think of hiring a QA engineer to run manual tests on some staging environment before shipping. The question becomes: how much are you willing to pay for them and what’s their effectiveness rate?</p><p id="eba3">Assuming that now you go down 1 hour a month and you’d have to pay them $5000/month, the additional resource is clearly anti economic. Things change if the downtime is closer to 3 hours/month and you can outsource the role to someone who’s happy with a $2000/month salary. As long as their effectiveness is ~70% (i.e. they catch 70% of bugs that would lead to a 1h downtime) your monthly savings are $3000 * 70% — $2000 = $100.</p><p id="feb0">Now an overzealous manager might come along and say: “last time we went down the CTO got so angry he almost forced me to switch to a light theme! We <em>cannot</em> go down, no matter what! From now on every deployment will require 2 approvals from selected people”.</p><p id="b0dc">Now each dev who wants to add a feature or fix a bug has to:</p><ul><li id="0534">Clone the sanitized prod environment. (easy, automated, minimal friction)</li><li id="9db8">Get the green light of QA on staging. (takes some time but might be worth it)</li><li id="abcc">Require approval from 2 people, who might not even be familiar with his changes, who might ask him to “jump on a call” to explain what exactly is being deployed and who might eventually tell him they don’t have time to review the changes properly, so better wait until tomorrow. (brutal, brings down morale, dev wonders why 2 people who don’t even know what he’s working on have to review his changes when he’s been writing 80% of the code anyway)</li></ul><p id="da79">Let’s do some math: let’s say this change is a blocker for such dev. He can’t (or doesn’t want to) work on something else because this is way too important, or because the context switch would be too tough or because there isn’t really anything else worth working on (surprisingly common).</p><p id="6943">Let’s also assume that it takes 30 mins for these 2 people to review the changes together with the dev. If the changes get reviewed right away, and we pay these people $100/hour, we are wasting $150. That’s 15% of our hourly SLA loss. Seven deployments and we’re back to square one.</p><p id="986f">In the worst case: time to review (blocking) + requested changes + rollback due to an unexpected issue can exceed, say, 8 hours. That’s $100 * 8 (dev) + $150 * 2 (reviews) = $1100. This policy has just become anti economic with a single deployment.</p><p id="764a">“What if removing this approval layer leads to downtime increasing?”</p><p id="0d13">Ask yourself a question: do you have any reason to think that your engineers will not do a good job? If the answer is no: why are they still there? If the answer is yes: let them do their damn job. If things go south it’s most likely due to someone being undertrained (easily fixable) or incompetent (get rid of them). Making life harder for everyone due to the shortcomings of one person or team is a non refundable one way ticket to high churn.</p><h2 id="8fe5">Testing on production</h2><p id="81c4">Finally the part you were waiting for.</p><p id="ca6b">Testing on production is obviously not the right thing to do if your project sits in the top left quadrant of the criticality/confidence chart. But it can be an effective strategy in the top or bottom right one. It’s laughable that some teams, no matter how small or what stage their project is at, will never even consider something like that, out of pure irrationality.</p><p id="68eb">That’s why determining which quadrant your project sits in and acting accordingly can make or break your engineering team. Processes, practices, patterns and workarounds weren’t born because <em>they are the right thing to do</em>. They were born to address specific concerns in specific teams under specific circumstances.</p><p id="af05">Employing them in a thoughtful manner is the <em>engineering</em> part of, well, software engineering. The absolute worst approach a team can have to “best” practices, patterns and processes is to employ them just because someone wants to or because a team fucked up once and some preventative policy became standard across the whole company.</p><p id="a3ca">Developer experience is as important, if not <em>more</em> important, than customer experience. Because if customers aren’t happy, they won’t buy your product.</p><p id="8489">If developers aren’t happy, that product may never get built.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Write about what you learn. It pushes you to understand topics better (472 pts)]]></title>
            <link>https://addyosmani.com/blog/write-learn/</link>
            <guid>37118883</guid>
            <pubDate>Mon, 14 Aug 2023 08:58:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://addyosmani.com/blog/write-learn/">https://addyosmani.com/blog/write-learn/</a>, See on <a href="https://news.ycombinator.com/item?id=37118883">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>
    <header>
        
        <h2>August 12, 2023</h2>
    </header>
    <section id="post-body">
        <p><strong>Write about what you learn. It pushes you to understand topics better.  Sometimes the gaps in our knowledge only become clear when explaining things to others.</strong></p>

<p>Writing about what you learn is more than just a method of documentation; it's a powerful tool for deepening understanding and revealing the gaps in one's knowledge. This practice pushes us to explore topics more thoroughly and to articulate their thoughts in a coherent and precise manner.</p>

<h2>Learning Through Writing</h2>

<ol>
<li><strong>Exploration</strong>: Writing about a subject can in cases require a comprehensive exploration of the topic. This often leads to uncovering new insights and connections that might not be apparent through mere reading or listening.</li>
<li><strong>Articulation</strong>: Putting thoughts into words forces a person to clarify their understanding. This process of articulation helps in identifying areas where the understanding might be vague or incomplete.</li>
<li><strong>Reflection</strong>: Writing allows for reflection on the subject matter, enabling the learner to connect new information with existing knowledge. This synthesis helps in creating a more robust and interconnected understanding of the subject.</li>
<li><strong>Revelation of Gaps</strong>: Sometimes, the act of writing reveals areas where the knowledge is lacking or inconsistent. Recognizing these gaps is the first step towards filling them and achieving a more complete understanding.</li>
</ol>



<h3>The Benefits</h3>

<ul>
<li><strong>Enhanced Retention</strong>: Writing about what you learn helps in retaining the information for a longer time. The process of translating thoughts into words engages multiple cognitive faculties, reinforcing memory.</li>
<li><strong>Improved Communication Skills</strong>: Regularly writing about various subjects enhances the ability to communicate complex ideas effectively. This skill is invaluable in both professional and personal life.</li>
<li><strong>Personal Growth</strong>: The practice of writing about learning encourages a growth mindset. It fosters curiosity, critical thinking, and a willingness to engage with challenging subjects.</li>
</ul>

<h2>The Feynman Technique</h2>

<p>The Feynman Technique is a method named after the physicist Richard Feynman, designed to help individuals learn and understand subjects deeply. It aligns well with the practice of writing about what you learn, and its principles can be summarized in the following steps:</p>

<ol>
<li><strong>Choose a Concept</strong>: Select a concept or topic you want to understand.</li>
<li><strong>Teach It to a Child</strong>: Try to explain the concept as if you were teaching it to a child. Use simple language and avoid jargon.</li>
<li><strong>Identify Gaps and Go Back to the Source Material</strong>: If you find areas where your explanation falters, go back to the source material to fill in the gaps.</li>
<li><strong>Simplify and Use Analogies</strong>: Create analogies and use simple language to make the concept more relatable and easier to grasp.</li>
<li><strong>Review and Refine</strong>: Continuously review and refine your explanation until you can articulate the concept in the simplest terms possible.</li>
</ol>

<p><img src="https://addyosmani.com/assets/feynman.jpeg" loading="lazy" alt="The technique involves four steps: 1️⃣ Choose a concept or idea that you want to learn about. 2️⃣ ELI5 (Explain It To Me Like I'm 5). Pretend that you are explaining the concept to someone who knows nothing about it. Write out your explanation in simple, plain language, using examples and analogies to make it easier to understand. 3️⃣ Review your explanation and look for any gaps or unclear points. Go back to the original source material (such as a textbook or lecture notes) and fill in any gaps in your understanding. 4️⃣ Simplify your explanations. Test your understanding by trying to explain the concept to someone else, or by asking a friend or colleague to listen to your explanation and provide feedback."></p>

<p>The Feynman Technique emphasizes the importance of clear and simple communication, mirroring the process of writing about what you learn. Both practices encourage a deep and thorough understanding of the subject matter.</p>

<h2>Consistency in Writing and Success</h2>

<p>While motivation might ignite the spark of interest in writing or any other creative effort, it's consistency that truly fuels the flame of success. The act of writing regularly, regardless of inspiration, leads to growth, mastery, and achievement in the long run.</p>

<h3>The Importance of Consistency</h3>

<ol>
<li><strong>Building Habits</strong>: Writing consistently helps in forming a habit. Habits, once established, become automatic and require less effort to maintain. This makes the process of writing more natural and enjoyable over time.</li>
<li><strong>Progressive Improvement</strong>: Consistent practice leads to incremental improvements. Each writing session may contribute a small enhancement in skill, but over time, these small gains accumulate into significant growth.</li>
<li><strong>Maintaining Momentum</strong>: Consistency helps in maintaining momentum. Regular engagement with writing keeps the ideas flowing and the creative muscles flexed, reducing the resistance to start.</li>
<li><strong>Achieving Long-Term Goals</strong>: Success in writing, like in many other fields, is often a result of sustained effort over time. Consistency aligns daily actions with long-term goals, creating a path to success.</li>
</ol>



<h3>The Challenges of Consistency</h3>

<ul>
<li><strong>Overcoming Procrastination</strong>: Procrastination can be a significant barrier to consistency. Setting a regular schedule, creating a conducive environment, and focusing on the process rather than the outcome can help in overcoming this challenge.</li>
<li><strong>Dealing with Burnout</strong>: Writing consistently doesn't mean writing without breaks or self-care. Balance is essential to prevent burnout. Knowing when to rest and recharge is as crucial as knowing when to push forward.</li>
<li><strong>Managing Expectations</strong>: Not every writing session will produce a masterpiece. Embracing the imperfect and focusing on the act of writing itself, rather than the immediate results, fosters a healthier relationship with the craft.</li>
</ul>



<h3>Strategies for Maintaining Consistency</h3>

<ul>
<li><strong>Set Realistic Goals</strong>: Break down long-term goals into smaller, achievable milestones. Focus on progress rather than perfection.</li>
<li><strong>Create a Routine</strong>: Establishing a regular writing routine creates a structure that supports consistency.</li>
<li><strong>Seek Accountability</strong>: Sharing goals with a friend or joining a writing group can provide encouragement and accountability.</li>
<li><strong>Celebrate Progress</strong>: Acknowledging and celebrating progress, even if small, creates positive reinforcement and motivation to continue.</li>
</ul>

<h2>Conclusion</h2>

<p>Writing about what you learn, employing techniques like the Feynman Technique, and maintaining consistency in practice are interconnected practices that foster deeper understanding, skill development, and long-term success. </p>

<p>In a landscape where information is abundant, the ability to learn deeply, articulate clearly, and persevere consistently stands out as a valuable skill set. These practices not only enhance personal and professional growth but also contribute to a lifelong journey of curiosity, exploration, and achievement.</p>

    </section>
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Python: Just Write SQL (159 pts)]]></title>
            <link>https://joaodlf.com/python-just-write-sql</link>
            <guid>37118633</guid>
            <pubDate>Mon, 14 Aug 2023 08:14:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://joaodlf.com/python-just-write-sql">https://joaodlf.com/python-just-write-sql</a>, See on <a href="https://news.ycombinator.com/item?id=37118633">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p>I have been writing a lot more Go this past year. For those not familiar, Go favours a non-ORM, non-query-builder approach to interacting with databases. This comes naturally due to the <a href="https://pkg.go.dev/database/sql">sql package</a>: A common interface to be used alongside database drivers. It’s very common to see actual SQL in Go, even in large projects. On the other hand, Python does not have anything in the standard library that supports database interaction, this has always been a problem for the community to solve. There are many ORMs and query builders for Python:</p>
<ul>
<li><a href="https://www.sqlalchemy.org/">SQLAlchemy</a></li>
<li><a href="https://docs.djangoproject.com/en/4.2/#the-model-layer">Django ORM</a></li>
<li><a href="http://docs.peewee-orm.com/en/latest/">Peewee</a> (my personal favourite)</li>
<li>… plenty more!</li>
</ul>
<p>You can of course just take your favourite adapter and write SQL in Python (which is what we’ll be doing!), but I think most developers will agree that, as soon as you need to interact with a database, it is far more probable to immediately reach for an ORM like SQLAlchemy.</p>
<p>(This is not to say Go doesn’t have popular <a href="https://github.com/go-gorm/gorm">ORMs</a>, but you’re much more likely to see Go devs leveraging the standard library and database adapters, this is the typical approach new Go devs will be directed to.)</p>
<p>In this post, I will aim to approach SQL in Python in the same vein as Go:</p>
<ul>
<li>I want to write SQL.</li>
<li>I don’t want to rely on a query builder (let alone an ORM).</li>
<li>I want to package all of this in an abstraction that allows me to quickly change between database solutions, as well as make it easy to test.</li>
<li>l want a very clear separation between my database(s) and business logic.</li>
</ul>
<h2 id="show-me-the-code">Show me the code</h2>
<p>We are going to start from a typical example:</p>
<div><pre><code data-lang="python"><span># user/domain.py</span>

<span>@dataclass</span>  
<span>class</span> <span>User</span>:  
	<span>id</span>: <span>int</span> <span>=</span> <span>None</span>  
	dt_created: datetime <span>=</span> <span>None</span>
	username: <span>str</span> <span>=</span> <span>None</span>
	email: <span>str</span> <span>=</span> <span>None</span>
	mobile: Optional[<span>str</span>] <span>=</span> <span>None</span>
</code></pre></div><p><code>User</code> is the literal definition of what you might see as a SQL table named <code>user</code>. This includes some columns I like to include in all of my SQL tables:</p>
<ul>
<li><code>id</code> (primary key).</li>
<li><code>dt_created</code> a datetime value, typically defaults to <code>NOW()</code>.</li>
</ul>
<p>All fields default to <code>None</code>, this will allow us to perform <code>SELECT</code> queries that don’t include all of the columns in the table, while still being able to convert rows to <code>User</code> objects. All columns are <code>NOT NULL</code> with the exception of <code>mobile</code>, here I make use of the <code>Optional</code> type hint to stress that this field allows for <code>NULL</code>.</p>
<p>We can now create our repository:</p>
<div><pre><code data-lang="python"><span># user/repository.py</span>

<span>from</span> <span>abc</span> <span>import</span> ABC, abstractmethod

<span>class</span> <span>UserRepository</span>(ABC):  
	<span>@abstractmethod</span>  
	<span>def</span> <span>new</span>(self, new_row: User) <span>-&gt;</span> <span>int</span>:  
	<span>"""  
</span><span>	Create a new record and returns the new id value. 
</span><span>	"""</span>  
	<span>pass</span>  
  
	<span>@abstractmethod</span>  
	<span>def</span> <span>get_by_id</span>(self, id_val: <span>int</span>) <span>-&gt;</span> User:  
	<span>"""  
</span><span>	Get a single record by ID value.  
</span><span>	"""</span>  
	<span>pass</span>  
</code></pre></div><p>I like my repositories to be abstract classes, this makes sure any future implementations need to follow the contract (as much as you can with Python, best intentions and all).</p>
<p>Our first implementation is going to be <strong>PostgreSQL</strong> via <a href="https://www.psycopg.org/psycopg3/docs/index.html">psycopg3</a>:</p>
<div><pre><code data-lang="python"><span># external/postgres.py</span>

<span>import</span> <span>psycopg</span>
<span>from</span> <span>psycopg.rows</span> <span>import</span> class_row  

<span># Load up your config from somewhere...</span>
<span>from</span> <span>config</span> <span>import</span> get_config

cfg <span>=</span> get_config()

conn <span>=</span> psycopg<span>.</span>connect(
    dbname<span>=</span>cfg<span>.</span>database_name,
    user<span>=</span>cfg<span>.</span>database_username,
    password<span>=</span>cfg<span>.</span>database_password,
    host<span>=</span>cfg<span>.</span>database_host,
)

<span>def</span> <span>new_cursor</span>(name<span>=</span><span>None</span>, row_factory<span>=</span><span>None</span>):
    <span>if</span> name <span>is</span> <span>None</span>:
        name <span>=</span> <span>""</span>

    <span>if</span> row_factory <span>is</span> <span>None</span>:
        <span>return</span> conn<span>.</span>cursor(name<span>=</span>name)

    <span>return</span> conn<span>.</span>cursor(name<span>=</span>name, row_factory<span>=</span>class_row(row_factory))
</code></pre></div><p>Firstly, we setup the connection. Secondly, a function that returns psycopg cursors. psycopg3 includes <a href="https://www.psycopg.org/psycopg3/docs/advanced/rows.html">custom row factories</a>, we will shortly see how useful this feature is.</p>
<p>We now implement the repository:</p>
<div><pre><code data-lang="python"><span># user/repository.py</span>
<span>from</span> <span>external.postgres</span> <span>import</span> conn, new_cursor

<span>class</span> <span>UserPostgreSQL</span>(UserRepository):
    <span>def</span> <span>new</span>(self, new_row: User) <span>-&gt;</span> <span>int</span>:
        <span>with</span> new_cursor() <span>as</span> cur:
            cur<span>.</span>execute(
                <span>"""
</span><span>            INSERT INTO user
</span><span>            (username, email)
</span><span>            VALUES
</span><span>            (</span><span>%s</span><span>, </span><span>%s</span><span>)
</span><span>            ON CONFLICT (email)
</span><span>            DO NOTHING
</span><span>            RETURNING id;
</span><span>            """</span>,
                (
                    new_row<span>.</span>username,
                    new_row<span>.</span>email
                ),
            )
            
            new_id <span>=</span> cur<span>.</span>fetchone()
            <span>if</span> new_id <span>and</span> <span>len</span>(new_id):
                conn<span>.</span>commit()
                new_id <span>=</span> new_id[<span>0</span>]
            <span>else</span>:
                new_id <span>=</span> <span>0</span>
        
        <span>return</span> new_id

    <span>def</span> <span>get_by_id</span>(self, id_val: <span>int</span>) <span>-&gt;</span> User:
        <span>with</span> new_cursor(name<span>=</span><span>"get_by_id"</span>, row_factory<span>=</span>User) <span>as</span> cur:
            cur<span>.</span>execute(
                <span>"""
</span><span>            SELECT *
</span><span>            FROM user
</span><span>            WHERE id = </span><span>%s</span><span>
</span><span>            """</span>,
                (id_val,),
            )
            
            <span>return</span> cur<span>.</span>fetchone()
            
<span>def</span> <span>new_user_repo</span>() <span>-&gt;</span> UserRepository:
    <span>return</span> UserPostgreSQL()

</code></pre></div><p>You’ll notice <code>new()</code> uses a basic cursor, but <code>get_by_id()</code> uses a cursor with a <strong>class row factory</strong>, which means the returning row will be of type <code>User</code>. Nifty.</p>
<p><code>new_user_repo()</code> is the function we use in our hypothetical business logic, the implementation itself is never exposed:</p>
<div><pre><code data-lang="python"><span>from</span> <span>user.repository</span> <span>import</span> <span>*</span>  
  
user_repo <span>=</span> new_user_repo()  
  
row <span>=</span> User()  
row<span>.</span>username <span>=</span> <span>"joao"</span>  
row<span>.</span>email <span>=</span> <span>"joao@nospam.com"</span>  
  
<span># Create a new record.  </span>
new_id <span>=</span> user_repo<span>.</span>new(row)  
  
<span># Fetch the record we just created.  </span>
new_row <span>=</span> user_repo<span>.</span>get_by_id(new_id)
<span># User(id=1, dt_created=datetime.datetime(2023, 8, 9, 23, 8, 14, 974074, tzinfo=datetime.timezone.utc), username='joao', email='joao@nospam.com', mobile=None)</span>
</code></pre></div><p><code>new_user_repo()</code> can be modified to return anything that implements  <code>UserRepository</code>, maybe a MySQL implementation, or a SQLite one, possibly even a mock for test purposes.</p>
<h2 id="conclusion">Conclusion</h2>
<p>I have spent enough time in tech to see languages and frameworks fall out of grace, libraries and tools coming and going. <strong>SQL has always been a constant</strong> and I see tremendous benefits in just writing it. In my experience, anything that brings you closer to your database install (even in the age of the cloud), is a good thing.</p>
<p>The implementation above does not break any new ground, in fact, it may even look fairly similar to an ORM API… But that was always the goal: Writing raw SQL does not have to mean unstructured code.</p>
<p>I hope at least one Python developer out there reconsiders their approach to SQL next time a new project is fired up.</p>

  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Veilid is an open-source, P2P, mobile-ﬁrst, networked application framework (143 pts)]]></title>
            <link>https://veilid.com/</link>
            <guid>37118124</guid>
            <pubDate>Mon, 14 Aug 2023 06:32:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://veilid.com/">https://veilid.com/</a>, See on <a href="https://news.ycombinator.com/item?id=37118124">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content"><p><h2 id="page-title">Take Back Control</h2> </p> <p> Veilid is an <span>open-source</span>, <span>peer-to-peer</span>, <span>mobile-ﬁrst</span>, <span>networked</span> application framework. </p><p>Veilid (pronounced Vay-Lid, from 'Valid and Veiled Identification') </p><p> Veilid allows anyone to build a distributed, private app. Veilid gives users the privacy to opt out of data collection and online tracking. Veilid is being built with user experience, privacy, and safety as our top priorities. It is open source and available to everyone to use and build upon. </p><p> Veilid goes above and beyond existing privacy technologies and has the potential to completely change the way people use the Internet. Veilid has no profit motive, which puts us in a unique position to promote ideals without the compromise of capitalism. </p><p> We built Veilid because when the Internet was young and new, we viewed it as an endless and open realm of possibility. </p><p> Instead, the Internet we know now has been heavily commercialized, with users and their data being the most sought-after commodity. The only ways to opt-out of becoming the product for billionaires to exploit are either too technical for the average user, or to simply not go online. </p><p> We don't believe that is fair; we still haven't given up our dream for the entire Internet to be free and accessible without trading privacy to use it. </p><p> We believe that everyone should be able to forge relationships, learn, create, and build online — without being monetized. </p><p> With Veilid, the user is in control, in a way that is approachable and friendly, regardless of technical ability. We want to give the world the Internet we should have had all along. </p> </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Is Venus in some way tidally locked to Earth? (2020) (111 pts)]]></title>
            <link>https://astronomy.stackexchange.com/questions/36488/is-venus-in-some-way-tidally-locked-to-earth</link>
            <guid>37118114</guid>
            <pubDate>Mon, 14 Aug 2023 06:31:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://astronomy.stackexchange.com/questions/36488/is-venus-in-some-way-tidally-locked-to-earth">https://astronomy.stackexchange.com/questions/36488/is-venus-in-some-way-tidally-locked-to-earth</a>, See on <a href="https://news.ycombinator.com/item?id=37118114">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="text">
<p>This is a fun little problem that's remarkably close and the math is pretty easy when you use the right periods.</p>

<p>Venus' synodic period, relative to Earth, is 583.92 days on average.  He uses 584, but lets strive for accuracy.  Venus' solar day is 116.75 days, so 5 solar days is 583.75 days - Venus does 5 rotations in nearly the same amount of time that Earth and Venus line up together.  </p>

<p>More details below:</p>

<p>Eccentricity in this case, doesn't matter, so, even though Earth will move different amounts in those 218 days past the first full year, it's the average that matters.</p>

<p>A cool property of tidal locking is that the locked objects can move ahead or behind and it doesn't undo the locking.  For example, our Moon is tidally locked but its eccentricity still creates <a href="https://earthsky.org/astronomy-essentials/how-much-of-the-moon-can-we-see-from-earth-lunar-libration" rel="noreferrer">libration</a>.   Pluto can move ahead of or fall behind its 3/2 resonance with Neptune, but Neptune's gravity draws it back, so it never laps the 3/2 resonance.  It stays locked. All we need is the average synodic period, or 583.92 days.  </p>

<p>.03% is closer than many tidally locked objects' periods can be, but that doesn't mean they're tidally locked.  One can still lap the other.</p>

<p>We know it's coincidence because orbital periods, which determine the 583.92 ratio, are highly stable and Venus' orbital period might change very slowly, but only very slowly.   </p>

<p>The variation is a little under .03% or 3 parts in 10,000.   It's close enough that we might want to get more decimal points to get more accuracy, but that's where I run into some problems.    I can't find any more decimal points to Venus' solar day, just 116.75 days or 2802 hours.  No mention of fractions of hours.</p>

<p>His numbers on the video looked wrong to me at first, but he uses sidereal year, not the more familiar tropical year.  Most of us think of an Earth year as 365.2422 days, not 365.256 or 365.26 as he writes on his video.  I don't think it makes a big difference which we use, tropical or sidereal years.  That only changes the numbers slightly.  Both still fall to about 3 parts in 10,000.</p>

<p>His numbers posted on the video:</p>

<p>Earth Orbit:   365.26 days*<br>
Venus Orbit:   224.70 days<br>
Earth/Venus closest:   584 days</p>

<p>Venus Sidereal day:  243.03 days<br>
Venus Solar day:  116.75 days</p>

<p><a href="https://web.archive.org/web/20160304130722/http://nssdc.gsfc.nasa.gov/planetary/factsheet/venusfact.html" rel="noreferrer">Numbers I used</a></p>

<p>Footnote:   @BMF posted a research paper that says Earth may have an effect on Venus' rotation speed - <a href="https://www.sciencedirect.com/science/article/abs/pii/0019103569900682" rel="noreferrer">copied here</a>.   I'm going to leave my "it's coincidence" comments above, because it seems more likely to me that it's coincidence, but maybe I'm wrong.</p>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Fediverse and Naive Bayes: The Grandfather of Spam Filters Still Making Waves (108 pts)]]></title>
            <link>https://pixelfed.blog/p/2023/feature/autospam-and-naive-bayes-the-grandfather-of-spam-filters-still-making-waves</link>
            <guid>37118081</guid>
            <pubDate>Mon, 14 Aug 2023 06:25:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pixelfed.blog/p/2023/feature/autospam-and-naive-bayes-the-grandfather-of-spam-filters-still-making-waves">https://pixelfed.blog/p/2023/feature/autospam-and-naive-bayes-the-grandfather-of-spam-filters-still-making-waves</a>, See on <a href="https://news.ycombinator.com/item?id=37118081">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><h2>In the ever-evolving landscape of digital communication, where spam seems to adapt and find new ways to infiltrate our inboxes and social media feeds, it's fascinating to discover that one of the most enduring and effective spam filtering techniques traces its roots all the way back to the 1990s.</h2>
<h2>Meet the Naive Bayes classifier – a true legend in the realm of spam detection. While technology has advanced by leaps and bounds since its inception, this venerable algorithm continues to prove its worth as a stalwart guardian against the relentless tide of unwanted messages.</h2>
<h2>Join us on a journey as we delve into the timeless efficacy of Naive Bayes, unravel its inner workings, and explore how it still stands strong in the modern fight against spam on Pixelfed.</h2>
<hr>
<p><img alt="Picture of an information modal explaining why a post was unlisted" loading="lazy" width="493" height="530" decoding="async" data-nimg="1" srcset="https://pixelfed.blog/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fc8d1ac893f08c6cf-2.66e19805.png&amp;w=640&amp;q=75 1x, https://pixelfed.blog/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fc8d1ac893f08c6cf-2.66e19805.png&amp;w=1080&amp;q=75 2x" src="https://pixelfed.blog/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fc8d1ac893f08c6cf-2.66e19805.png&amp;w=1080&amp;q=75"></p>
<p>In a world where the fight against spam has grown increasingly complex, it's almost poetic that one of the oldest players in the game, the Naive Bayes classifier, remains an essential tool in the arsenal of spam detection. Born in the late 18th century as a probabilistic theorem and later adapted for machine learning applications, Naive Bayes gained prominence in the early days of the internet as a solution to the rising tide of unwanted emails flooding inboxes.</p>
<p>The concept behind Naive Bayes is elegantly simple: it calculates the probability that a given message is spam or not spam based on the presence of certain words in its content. What makes it "naive" is its assumption of word independence – it treats each word in a message as if it's unrelated to the others, which is a bit oversimplified but surprisingly effective. By examining the frequency of specific words in both spam and non-spam messages during a training phase, Naive Bayes builds a model that can then classify new messages accordingly.</p>
<p><img alt="Picture of Pixelfed notification of a post that was detected by the Autospam feature" loading="lazy" width="346" height="120" decoding="async" data-nimg="1" srcset="https://pixelfed.blog/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Ffc1b093c12b148f8-2.99f42961.png&amp;w=384&amp;q=75 1x, https://pixelfed.blog/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Ffc1b093c12b148f8-2.99f42961.png&amp;w=750&amp;q=75 2x" src="https://pixelfed.blog/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Ffc1b093c12b148f8-2.99f42961.png&amp;w=750&amp;q=75"></p>
<p>While it might seem like a throwback to a simpler time, Naive Bayes possesses remarkable staying power due to its reliability and efficiency. In an era where machine learning models can become astonishingly intricate, the straightforward nature of Naive Bayes can be a breath of fresh air. It requires relatively less computational resources compared to its more complex counterparts, making it an attractive choice for applications where speed and simplicity are key.</p>
<p>Even as the digital world has transformed over the years, with social media platforms like Pixelfed becoming hubs for visual sharing and communication, the challenge of spam remains as relevant as ever. Pixelfed's ingenious implementation of the Naive Bayes classifier to combat spam is a testament to the algorithm's versatility. By analyzing the captions accompanying images, Pixelfed's spam filter can swiftly determine whether a post contains genuine content or is simply trying to clutter your feed with unwanted promotions or irrelevant information.</p>
<blockquote>In a landscape where cutting-edge algorithms and artificial intelligence solutions often grab the spotlight, it's important to remember the foundational techniques that laid the groundwork for today's sophisticated technologies. The Naive Bayes classifier is a true pioneer in the field of spam detection, proving that sometimes, the simplest solutions can be the most effective.</blockquote>
<p>In conclusion, as we marvel at the rapid progress of technology, it's refreshing to acknowledge the lasting impact of the Naive Bayes classifier in the realm of spam filtering. Its ability to adapt and stay relevant over the decades is a testament to its intrinsic value. Whether it's filtering out unwanted emails from the 90s or tackling modern challenges like image captions on social media platforms, Naive Bayes continues to remind us that the classics never truly go out of style. So, the next time you hit the 'mark as spam' button on Pixelfed, take a moment to appreciate the enduring legacy of an algorithm that's been defending our digital spaces for generations.</p>
<hr>
<h2>How to enable Autospam + Advanced Autospam</h2>
<p>We made it super easy to get started and use.</p>
<ol><li>Make sure you are running v0.11.8 or later</li>
<li>Navigate to the Admin Dashboard</li>
<li>Navigate to the Settings page</li>
<li>Check the <code>Spam detection</code> box and then press save (stop here if you only want classic detection, you probably want Advanced though)</li>
<li>Navigate to the Autospam page</li>
<li>Press the <code>Enable Advanced Detection</code> button</li>
<li>Press the <code>Train Autospam</code> tab on the <code>Autospam</code> page</li>
<li>Press the <code>Train Spam</code> button, then press the <code>Train Non-Spam</code> button</li></ol>
<p>Congrats, you've successfully enabled Advanced Autospam detection!</p>
<hr>
<h2>How to configure Autospam email notifications</h2>
<p>You can easily configure an email address to send Autospam detection notifications if you have properly configured <a href="https://docs.pixelfed.org/running-pixelfed/installation/#email-variables">mail delivery</a> settings.</p>
<ol><li>Make sure you are running v0.11.8 or later</li>
<li>Open your <code>.env</code> file in an editor and add the following lines:</li><pre><code>INSTANCE_REPORTS_EMAIL_ADDRESSES=''
INSTANCE_REPORTS_EMAIL_ENABLED=true
INSTANCE_REPORTS_EMAIL_AUTOSPAM=true
</code></pre><li>Replace the <code>INSTANCE_REPORTS_EMAIL_ADDRESSES=''</code> with your email address like the example below</li><pre><code>INSTANCE_REPORTS_EMAIL_ADDRESSES='admin@example.org'
</code></pre><li>Save the <code>.env</code> file</li>
<li>Then run the following CLI command to update your config:</li><pre><code>php artisan config:cache &amp;&amp; php artisan cache:clear
</code></pre></ol>
<p>Congrats, you successfully setup email notifications for Autospam!</p>
<hr>
<h2>How to add custom tokens</h2>
<p>The "custom token" feature allows users to personalize their spam detection in Pixelfed.</p>
<!-- -->
<!-- -->
<p>Users can define specific words or phrases as "spam" or "not spam" tokens. These tokens serve as personalized indicators for the system to identify content that matches the user's preferences.</p>
<!-- -->
<!-- -->
<p>This feature empowers users to take an active role in fine-tuning their spam filter, tailoring it to their unique needs and enhancing the accuracy of content classification on the platform.</p>
<ol><li>Make sure you are running v0.11.8 or later</li>
<li>Navigate to the Admin Dashboard</li>
<li>Navigate to the Autospam page</li>
<li>Press the <code>Manage Tokens</code> tab on the <code>Autospam</code> page</li>
<li>Press the <code>Create New Token</code> button</li>
<li>Define the token in the <code>token</code> input</li>
<li>Set an optional weight (defines precidence, safe to leave set to default value)</li>
<li>Set the category, either <code>spam</code> or <code>not spam</code></li>
<li>Set an optional <code>note</code> to explain for future reference (never shown to users)</li>
<li>Make sure the <code>active</code> checkbox is checked</li>
<li>Press Save</li></ol>
<p>Congrats, you successfully trained Autospam with a custom token!</p>
<hr>
<h2>How to import/export training data</h2>
<p>The <strong>Autospam Import/Export</strong> feature in Pixelfed enables users to transfer their training data, which helps improve the accuracy of the spam detection system. Users can export their training data to save or share with others.</p>
<!-- -->
<!-- -->
<p><strong>However, it's crucial to exercise caution when sharing this data, as in the hands of spammers, it can potentially make the spam filter less effective.</strong></p>
<!-- -->
<!-- -->
<p>By safeguarding the training data and being mindful of who it's shared with, users can help maintain the integrity of the spam detection mechanism and its ability to accurately differentiate between genuine and spam content.</p>
<ol><li>Make sure you are running v0.11.8 or later</li>
<li>Navigate to the Admin Dashboard</li>
<li>Navigate to the Autospam page</li>
<li>Press the <code>Import/Export</code> tab on the <code>Autospam</code> page</li>
<li>Press either the <code>Upload Import</code> or <code>Download Export</code> button</li>
<li>If you are importing training data, follow the instructions</li></ol></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Bypassing YouTube video download throttling (420 pts)]]></title>
            <link>https://blog.0x7d0.dev/history/how-they-bypass-youtube-video-download-throttling/</link>
            <guid>37117338</guid>
            <pubDate>Mon, 14 Aug 2023 04:02:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.0x7d0.dev/history/how-they-bypass-youtube-video-download-throttling/">https://blog.0x7d0.dev/history/how-they-bypass-youtube-video-download-throttling/</a>, See on <a href="https://news.ycombinator.com/item?id=37117338">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Have you ever tried to download videos from YouTube? I mean manually without relying on software like youtube-dl, yt-dlp or one of “these” websites. It’s much more complicated than you might think.</p><p>Youtube generates revenue from user ad views, and it’s logical for the platform to implement restrictions to prevent people from downloading videos or even watching them on an unofficial client like YouTube Vanced. In this article, I will explain the technical details of these security mechanisms and how it’s possible to bypass them.</p><p><a href="https://blog.0x7d0.dev/assets/img/how-they-bypass-youtube-video-download-throttling/googlesearch-youtube-downloader.png"><img data-src="/assets/img/how-they-bypass-youtube-video-download-throttling/googlesearch-youtube-downloader.png" alt="A google search for youtube downloader" data-proofer-ignore="" src="https://blog.0x7d0.dev/assets/img/how-they-bypass-youtube-video-download-throttling/googlesearch-youtube-downloader.png"></a> <em>A google search for: youtube downloader</em></p><p>The first step is to find the actual URL containing the video file. For this, we can communicate with the YouTube API. Specifically, the <code>/youtubei/v1/player</code> endpoint allows us to retrieve all the details of a video, such as the title, description, thumbnails, and most importantly, the formats. It is within these formats that we can locate the URL of the file based on the desired quality (SD, HD, UHD, etc.).</p><p>Here’s an example for the video with the ID <code>aqz-KE-bpKQ</code>, where we will get the URL for one of the format. Note that the other variables contained within the <code>context</code> object are preconditions validated by the API. The accepted values were found by observing the requests sent by the web browser.</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
</pre></td><td><pre><span>echo</span> <span>-n</span> <span>'{"videoId":"aqz-KE-bpKQ","context":{"client":{"clientName":"WEB","clientVersion":"2.20230810.05.00"}}}'</span> | 
  http post <span>'https://www.youtube.com/youtubei/v1/player'</span> |
  jq <span>-r</span> <span>'.streamingData.adaptiveFormats[0].url'</span>

https://rr1---sn-8qu-t0aee.googlevideo.com/videoplayback?expire<span>=</span>1691828966&amp;ei<span>=</span>hu7WZOCJHI7T8wTSrr_QBg <span>[</span>TRUNCATED]
</pre></td></tr></tbody></table></code></p></div><p>However, attempting to download from this URL leads to really slow download:</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
</pre></td><td><pre>http <span>--print</span><span>=</span>b <span>--download</span> <span>'https://rr1---sn-8qu-t0aee.googlevideo.com/videoplayback?expire=1691828966&amp;ei=hu7WZOCJHI7T8wTSrr_QBg [TRUNCATED]'</span>

Downloading to videoplayback.webm
<span>[</span> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span>]</span>   0% <span>(</span> 0.0/1.5 GB <span>)</span> 6:23:45 66.7 kB/s
</pre></td></tr></tbody></table></code></p></div><p>The speed is always limited to around 40-70kB/s. Unfortunately for this 10-minute video, it would take approximately 6 and a half hours to download the entire video. Clearly, the video is not downloaded at this speed when using a web browser. So what’s different?</p><p>Here’s the complete URL broken down. It’s rather complicated, but there’s a specific parameter that interests us.</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td><pre><span>Protocol</span><span>:</span> <span>https</span>
<span>Hostname</span><span>:</span> <span>rr1---sn-8qu-t0aee.googlevideo.com</span>
<span>Path name</span><span>:</span> <span>/videoplayback</span>
<span>Query Parameters</span><span>:</span>
  <span>expire</span><span>:</span> <span>1691829310</span>
  <span>ei</span><span>:</span> <span>3u_WZJT7Cbag_9EPn7mi0A8</span>
  <span>ip</span><span>:</span> <span>203.0.113.30</span>
  <span>id</span><span>:</span> <span>o-ABGboQn9qMKsUdClvQHd6cHm6l1dWkRw4WNj3V7wBgY1</span>
  <span>itag</span><span>:</span> <span>315</span>
  <span>aitags</span><span>:</span> <span>133,134,135,136,160,242,243,244,247,278,298,299,302,303,308,315,394,395,396,397,398,399,400,401</span>
  <span>source</span><span>:</span> <span>youtube</span>
  <span>requiressl</span><span>:</span> <span>yes</span>
  <span>mh</span><span>:</span> <span>aP</span>
  <span>mm</span><span>:</span> <span>31,29</span>
  <span>mn</span><span>:</span> <span>sn-8qu-t0aee,sn-t0a7ln7d</span>
  <span>ms</span><span>:</span> <span>au,rdu</span>
  <span>mv</span><span>:</span> <span>m</span>
  <span>mvi</span><span>:</span> <span>1</span>
  <span>pcm2cms</span><span>:</span> <span>yes</span>
  <span>pl</span><span>:</span> <span>18</span>
  <span>initcwndbps</span><span>:</span> <span>1422500</span>
  <span>spc</span><span>:</span> <span>UWF9fzkQbIbHWdKe8-ahg0uWbE_UrbUM0U6LbQfFxg</span>
  <span>vprv</span><span>:</span> <span>1</span>
  <span>svpuc</span><span>:</span> <span>1</span>
  <span>mime</span><span>:</span> <span>video/webm</span>
  <span>ns</span><span>:</span> <span>dn5MLRkBtM4BWwzNNOhVxHIP</span>
  <span>gir</span><span>:</span> <span>yes</span>
  <span>clen</span><span>:</span> <span>1536155487</span>
  <span>dur</span><span>:</span> <span>634.566</span>
  <span>lmt</span><span>:</span> <span>1662347928284893</span>
  <span>mt</span><span>:</span> <span>1691807356</span>
  <span>fvip</span><span>:</span> <span>3</span>
  <span>keepalive</span><span>:</span> <span>yes</span>
  <span>fexp</span><span>:</span> <span>24007246,24363392</span>
  <span>c</span><span>:</span> <span>WEB</span>
  <span>txp</span><span>:</span> <span>553C434</span>
  <span>n</span><span>:</span> <span>mAq3ayrWqdeV_7wbIgP</span>
  <span>sparams</span><span>:</span> <span>expire,ei,ip,id,aitags,source,requiressl,spc,vprv,svpuc,mime,ns,gir,clen,dur,lmt</span>
  <span>sig</span><span>:</span> <span>AOq0QJ8wRgIhAOx29gNeoiOLRe1GhEfE52PAiXW64ZEWX7nNdAiJE6ezAiEA0Plw6Yn0kmSFFZHO2JZPZyMGd0O-gEblUXPRrexQgrY=</span>
  <span>lsparams</span><span>:</span> <span>mh,mm,mn,ms,mv,mvi,pcm2cms,pl,initcwndbps</span>
  <span>lsig</span><span>:</span> <span>AG3C_xAwRQIgZVOkDl4rGPGnlK6IGCAXpzxk-cB5RRFmXDesEqOWTRoCIQCzIdPKE6C6_JQVpH6OKMF3woIJ2yVYaztT9mXIVtE6xw==</span>
</pre></td></tr></tbody></table></code></p></div><p>Since mid-2021, YouTube has included the query parameter <code>n</code> in the majority of file URLs. This parameter needs to be transformed using a JavaScript algorithm located in the file <code>base.js</code>, which is distributed with the web page. YouTube utilizes this parameter as a challenge to verify that the download originates from an “official” client. If the challenge is not resolved and <code>n</code> is not transformed correctly, YouTube will silently apply throttling to the video download.</p><p>The JavaScript algorithm is obfuscated and changes frequently, so it’s not practical to attempt reverse engineering to understand it. The solution is simply to download the JavaScript file, extract the algorithm code, and execute it by passing the <code>n</code> parameter to it. The following code accomplishes this.</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre></td><td><pre><span>import</span> <span>axios</span> <span>from</span> <span>'</span><span>axios</span><span>'</span><span>;</span>
<span>import</span> <span>vm</span> <span>from</span> <span>'</span><span>vm</span><span>'</span>

<span>const</span> <span>videoId</span> <span>=</span> <span>'</span><span>aqz-KE-bpKQ</span><span>'</span><span>;</span>

<span>/**
 * From the Youtube API, retrieve metadata about the video (title, video format and audio format)
 */</span>
<span>async</span> <span>function</span> <span>retrieveMetadata</span><span>(</span><span>videoId</span><span>)</span> <span>{</span>
    <span>const</span> <span>response</span> <span>=</span> <span>await</span> <span>axios</span><span>.</span><span>post</span><span>(</span><span>'</span><span>https://www.youtube.com/youtubei/v1/player</span><span>'</span><span>,</span> <span>{</span>
        <span>"</span><span>videoId</span><span>"</span><span>:</span> <span>videoId</span><span>,</span>
        <span>"</span><span>context</span><span>"</span><span>:</span> <span>{</span>
            <span>"</span><span>client</span><span>"</span><span>:</span> <span>{</span> <span>"</span><span>clientName</span><span>"</span><span>:</span> <span>"</span><span>WEB</span><span>"</span><span>,</span> <span>"</span><span>clientVersion</span><span>"</span><span>:</span> <span>"</span><span>2.20230810.05.00</span><span>"</span> <span>}</span>
        <span>}</span>
    <span>});</span>

    <span>const</span> <span>formats</span> <span>=</span> <span>response</span><span>.</span><span>data</span><span>.</span><span>streamingData</span><span>.</span><span>adaptiveFormats</span><span>;</span>

    <span>return</span> <span>[</span>
        <span>response</span><span>.</span><span>data</span><span>.</span><span>videoDetails</span><span>.</span><span>title</span><span>,</span>
        <span>formats</span><span>.</span><span>filter</span><span>(</span><span>w</span> <span>=&gt;</span> <span>w</span><span>.</span><span>mimeType</span><span>.</span><span>startsWith</span><span>(</span><span>"</span><span>video/webm</span><span>"</span><span>))[</span><span>0</span><span>],</span> 
        <span>formats</span><span>.</span><span>filter</span><span>(</span><span>w</span> <span>=&gt;</span> <span>w</span><span>.</span><span>mimeType</span><span>.</span><span>startsWith</span><span>(</span><span>"</span><span>audio/webm</span><span>"</span><span>))[</span><span>0</span><span>],</span>
    <span>];</span>
<span>}</span>

<span>/**
 * From the Youtube Web Page, retrieve the challenge algorithm for the n query parameter
 */</span>
<span>async</span> <span>function</span> <span>retrieveChallenge</span><span>(</span><span>video_id</span><span>){</span>

    <span>/**
     * Find the URL of the javascript file for the current player version
     */</span>
    <span>async</span> <span>function</span> <span>retrieve_player_url</span><span>(</span><span>video_id</span><span>)</span> <span>{</span>
        <span>let</span> <span>response</span> <span>=</span> <span>await</span> <span>axios</span><span>.</span><span>get</span><span>(</span><span>'</span><span>https://www.youtube.com/embed/</span><span>'</span> <span>+</span> <span>video_id</span><span>);</span>
        <span>let</span> <span>player_hash</span> <span>=</span> <span>/</span><span>\/</span><span>s</span><span>\/</span><span>player</span><span>\/(\w</span><span>+</span><span>)\/</span><span>player_ias.vflset</span><span>\/\w</span><span>+</span><span>\/</span><span>base.js/</span><span>.</span><span>exec</span><span>(</span><span>response</span><span>.</span><span>data</span><span>)[</span><span>1</span><span>]</span>
        <span>return</span> <span>`https://www.youtube.com/s/player/</span><span>${</span><span>player_hash</span><span>}</span><span>/player_ias.vflset/en_US/base.js`</span>
    <span>}</span>

    <span>const</span> <span>player_url</span> <span>=</span> <span>await</span> <span>retrieve_player_url</span><span>(</span><span>video_id</span><span>);</span>

    <span>const</span> <span>response</span> <span>=</span> <span>await</span> <span>axios</span><span>.</span><span>get</span><span>(</span><span>player_url</span><span>);</span>
    <span>let</span> <span>challenge_name</span> <span>=</span> <span>/</span><span>\.</span><span>get</span><span>\(</span><span>"n"</span><span>\)\)</span><span>&amp;&amp;</span><span>\(</span><span>b=</span><span>([</span><span>a-zA-Z0-9$</span><span>]</span><span>+</span><span>)(?:\[(\d</span><span>+</span><span>)\])?\([</span><span>a-zA-Z0-9</span><span>]\)</span><span>/</span><span>.</span><span>exec</span><span>(</span><span>response</span><span>.</span><span>data</span><span>)[</span><span>1</span><span>];</span>
    <span>challenge_name</span> <span>=</span> <span>new</span> <span>RegExp</span><span>(</span><span>`var </span><span>${</span><span>challenge_name</span><span>}</span><span>\\</span><span>s*=</span><span>\\</span><span>s*</span><span>\\</span><span>[(.+?)</span><span>\\</span><span>]</span><span>\\</span><span>s*[,;]`</span><span>).</span><span>exec</span><span>(</span><span>response</span><span>.</span><span>data</span><span>)[</span><span>1</span><span>];</span>

    <span>const</span> <span>challenge</span> <span>=</span> <span>new</span> <span>RegExp</span><span>(</span><span>`</span><span>${</span><span>challenge_name</span><span>}</span><span>\\</span><span>s*=</span><span>\\</span><span>s*function</span><span>\\</span><span>s*</span><span>\\</span><span>(([</span><span>\\</span><span>w$]+)</span><span>\\</span><span>)</span><span>\\</span><span>s*{(.+?}</span><span>\\</span><span>s*return</span><span>\\</span><span> [</span><span>\\</span><span>w$]+.join</span><span>\\</span><span>(""</span><span>\\</span><span>))};`</span><span>,</span> <span>"</span><span>s</span><span>"</span><span>).</span><span>exec</span><span>(</span><span>response</span><span>.</span><span>data</span><span>)[</span><span>2</span><span>];</span>

    <span>return</span> <span>challenge</span><span>;</span>
<span>}</span>

<span>/**
 * Solve the challenge and replace the n query parameter from the url
 */</span>
<span>function</span> <span>solveChallenge</span><span>(</span><span>challenge</span><span>,</span> <span>formatUrl</span><span>)</span> <span>{</span>
    <span>const</span> <span>url</span> <span>=</span> <span>new</span> <span>URL</span><span>(</span><span>formatUrl</span><span>);</span>

    <span>const</span> <span>n</span> <span>=</span> <span>url</span><span>.</span><span>searchParams</span><span>.</span><span>get</span><span>(</span><span>"</span><span>n</span><span>"</span><span>);</span>
    <span>const</span> <span>n_transformed</span> <span>=</span> <span>vm</span><span>.</span><span>runInNewContext</span><span>(</span><span>`((a) =&gt; {</span><span>${</span><span>challenge</span><span>}</span><span>})('</span><span>${</span><span>n</span><span>}</span><span>')`</span><span>);</span>

    <span>url</span><span>.</span><span>searchParams</span><span>.</span><span>set</span><span>(</span><span>"</span><span>n</span><span>"</span><span>,</span> <span>n_transformed</span><span>);</span>
    <span>return</span> <span>url</span><span>.</span><span>toString</span><span>();</span>
<span>}</span>


<span>const</span> <span>[</span><span>title</span><span>,</span> <span>video</span><span>,</span> <span>audio</span><span>]</span> <span>=</span> <span>await</span> <span>retrieveMetadata</span><span>(</span><span>videoId</span><span>);</span>
<span>const</span> <span>challenge</span> <span>=</span> <span>await</span> <span>retrieveChallenge</span><span>(</span><span>videoId</span><span>);</span>

<span>video</span><span>.</span><span>url</span> <span>=</span> <span>solveChallenge</span><span>(</span><span>challenge</span><span>,</span> <span>video</span><span>.</span><span>url</span><span>);</span>
<span>audio</span><span>.</span><span>url</span> <span>=</span> <span>solveChallenge</span><span>(</span><span>challenge</span><span>,</span> <span>audio</span><span>.</span><span>url</span><span>);</span>

<span>console</span><span>.</span><span>log</span><span>(</span><span>video</span><span>.</span><span>url</span><span>);</span>
</pre></td></tr></tbody></table></code></p></div><p>With this new URL containing the correctly transformed <code>n</code> parameter, the next step is to download the video. However, YouTube still enforces a throttling rule. This rule imposes a variable download speed limit based on the size and length of the video, aiming to provide a download time that’s approximately half the duration of the video. This aligns with the streaming nature of videos. It would be a massive waste of bandwidth for YouTube to always provide the media file as quickly as possible.</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
</pre></td><td><pre>http <span>--print</span><span>=</span>b <span>--download</span> <span>'https://rr1---sn-8qu-t0aee.googlevideo.com/videoplayback?expire=1691888702&amp;ei=3tfXZIXSI72c_9EP1NGHqA8 [TRUNCATED]'</span>

Downloading to videoplayback.webm
<span>[</span> ━╸━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span>]</span>   4% <span>(</span> 0.1/1.5 GB <span>)</span> 0:06:07 4.0 MB/s
</pre></td></tr></tbody></table></code></p></div><p>To bypass this limitation, we can break the download into several smaller parts using the HTTP <code>Range</code> header. This header allows you to specify which part of the file you want to download with each request (eg: <code>Range bytes=2000-3000</code>). The following code implements this logic.</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td><pre><span>/**
 * Download a media file by breaking it into several 10MB segments
 */</span>
<span>async</span> <span>function</span> <span>download</span><span>(</span><span>url</span><span>,</span> <span>length</span><span>,</span> <span>file</span><span>){</span>
    <span>const</span> <span>MEGABYTE</span> <span>=</span> <span>1024</span> <span>*</span> <span>1024</span><span>;</span>

    <span>await</span> <span>fs</span><span>.</span><span>promises</span><span>.</span><span>rm</span><span>(</span><span>file</span><span>,</span> <span>{</span> <span>force</span><span>:</span> <span>true</span> <span>});</span>

    <span>let</span> <span>downloadedBytes</span> <span>=</span> <span>0</span><span>;</span>

    <span>while </span><span>(</span><span>downloadedBytes</span> <span>&lt;</span> <span>length</span><span>)</span> <span>{</span>
        <span>let</span> <span>nextSegment</span> <span>=</span> <span>downloadedBytes</span> <span>+</span>  <span>10</span> <span>*</span> <span>MEGABYTE</span><span>;</span>
        <span>if </span><span>(</span><span>nextSegment</span> <span>&gt;</span> <span>length</span><span>)</span> <span>nextSegment</span> <span>=</span> <span>length</span><span>;</span>

        <span>// Download segment</span>
        <span>const</span> <span>start</span> <span>=</span> <span>Date</span><span>.</span><span>now</span><span>();</span>
        <span>let</span> <span>response</span> <span>=</span> <span>await</span> <span>axios</span><span>.</span><span>get</span><span>(</span><span>url</span><span>,</span> <span>{</span> <span>headers</span><span>:</span> <span>{</span> <span>"</span><span>Range</span><span>"</span><span>:</span> <span>`bytes=</span><span>${</span><span>downloadedBytes</span><span>}</span><span>-</span><span>${</span><span>nextSegment</span><span>}</span><span>`</span> <span>},</span> <span>responseType</span><span>:</span> <span>'</span><span>stream</span><span>'</span> <span>});</span>
        
        <span>// Write segment</span>
        <span>await</span> <span>fs</span><span>.</span><span>promises</span><span>.</span><span>writeFile</span><span>(</span><span>file</span><span>,</span> <span>response</span><span>.</span><span>data</span><span>,</span> <span>{</span><span>flag</span><span>:</span> <span>'</span><span>a</span><span>'</span><span>});</span>
        <span>const</span> <span>end</span> <span>=</span> <span>Date</span><span>.</span><span>now</span><span>();</span>
        
        <span>// Print download stats</span>
        <span>const</span> <span>progress</span> <span>=</span> <span>(</span><span>nextSegment</span> <span>/</span> <span>length</span> <span>*</span> <span>100</span><span>).</span><span>toFixed</span><span>(</span><span>2</span><span>);</span>
        <span>const</span> <span>total</span> <span>=</span> <span>(</span><span>length</span> <span>/</span> <span>MEGABYTE</span><span>).</span><span>toFixed</span><span>(</span><span>2</span><span>);</span>
        <span>const</span> <span>speed</span> <span>=</span> <span>((</span><span>nextSegment</span> <span>-</span> <span>downloadedBytes</span><span>)</span> <span>/</span> <span>(</span><span>end</span> <span>-</span> <span>start</span><span>)</span> <span>*</span> <span>1000</span> <span>/</span> <span>MEGABYTE</span><span>).</span><span>toFixed</span><span>(</span><span>2</span><span>);</span>
        <span>console</span><span>.</span><span>log</span><span>(</span><span>`</span><span>${</span><span>progress</span><span>}</span><span>% of </span><span>${</span><span>total</span><span>}</span><span>MB at </span><span>${</span><span>speed</span><span>}</span><span>MB/s`</span><span>);</span>
        
        <span>downloadedBytes</span> <span>=</span> <span>nextSegment</span> <span>+</span> <span>1</span><span>;</span>
    <span>}</span>
<span>}</span>
</pre></td></tr></tbody></table></code></p></div><p>This works because the throttling rule takes some time to apply, and the small segments are downloaded very rapidly, always utilizing a new connection.</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td><pre>node index.js

0.68% of 1464.99MB at 46.73MB/s
1.37% of 1464.99MB at 60.98MB/s
2.05% of 1464.99MB at 71.94MB/s
2.73% of 1464.99MB at 70.42MB/s
3.41% of 1464.99MB at 68.49MB/s
4.10% of 1464.99MB at 68.97MB/s
4.78% of 1464.99MB at 74.07MB/s
5.46% of 1464.99MB at 81.97MB/s
6.14% of 1464.99MB at 104.17MB/s
</pre></td></tr></tbody></table></code></p></div><p>We are now able to download videos much faster. During my tests, certain download were close to fully utilizing a 1 Gb/s connection. However, the average speeds typically ranged between 50-70 MB/s or 400-560 Mb/s, which is still pretty fast.</p><h2 id="post-processing"><span>Post-processing</span><a href="#post-processing"><i></i></a></h2><p>YouTube distributes the video and audio channels in two separate files. This approach helps save space, as an HD or UHD video can reuse the same audio file. Additionally, some videos now offer different audio channels based on the language. Therefore, the final step is to combine these two channels into a single file, and for that, we can simply use <code>ffmpeg</code>.</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td><pre><span>/**
 * Using ffmpeg, combien the audio and video file into one
 */</span>
<span>async</span> <span>function</span> <span>combineChannels</span><span>(</span><span>destinationFile</span><span>,</span> <span>videoFile</span><span>,</span> <span>audioFile</span><span>)</span>
<span>{</span>
    <span>await</span> <span>fs</span><span>.</span><span>promises</span><span>.</span><span>rm</span><span>(</span><span>destinationFile</span><span>,</span> <span>{</span> <span>force</span><span>:</span> <span>true</span> <span>});</span>
    <span>child_process</span><span>.</span><span>spawnSync</span><span>(</span><span>'</span><span>ffmpeg</span><span>'</span><span>,</span> <span>[</span>
        <span>"</span><span>-y</span><span>"</span><span>,</span>
        <span>"</span><span>-i</span><span>"</span><span>,</span> <span>videoFile</span><span>,</span>
        <span>"</span><span>-i</span><span>"</span><span>,</span> <span>audioFile</span><span>,</span>
        <span>"</span><span>-c</span><span>"</span><span>,</span> <span>"</span><span>copy</span><span>"</span><span>,</span>
        <span>"</span><span>-map</span><span>"</span><span>,</span> <span>"</span><span>0:v:0</span><span>"</span><span>,</span>
        <span>"</span><span>-map</span><span>"</span><span>,</span> <span>"</span><span>1:a:0</span><span>"</span><span>,</span>
        <span>destinationFile</span>
    <span>]);</span>

    <span>await</span> <span>fs</span><span>.</span><span>promises</span><span>.</span><span>rm</span><span>(</span><span>videoFile</span><span>,</span> <span>{</span> <span>force</span><span>:</span> <span>true</span> <span>});</span>
    <span>await</span> <span>fs</span><span>.</span><span>promises</span><span>.</span><span>rm</span><span>(</span><span>audioFile</span><span>,</span> <span>{</span> <span>force</span><span>:</span> <span>true</span> <span>});</span>
<span>}</span>
</pre></td></tr></tbody></table></code></p></div><p>Finally, for those interested, the full code can be downloaded <a href="https://blog.0x7d0.dev/assets/download/how-they-bypass-youtube-video-download-throttling/youtube-download.js">here</a>.</p><h2 id="conclusion"><span>Conclusion</span><a href="#conclusion"><i></i></a></h2><p>Many projects currently use these techniques to circumvent the limitations put in place by YouTube in order to prevent video downloads. The most popular one is yt-dlp (a fork of youtube-dl) programmed in Python, but it includes its own custom JavaScript interpreter to transform the <code>n</code> parameter.</p><dl><dt>yt-dlp</dt><dd><a href="https://github.com/ytdl-org/youtube-dl/blob/master/youtube_dl/extractor/youtube.py">https://github.com/ytdl-org/youtube-dl/blob/master/youtube_dl/extractor/youtube.py</a></dd><dt>VLC media player</dt><dd><a href="https://github.com/videolan/vlc/blob/master/share/lua/playlist/youtube.lua">https://github.com/videolan/vlc/blob/master/share/lua/playlist/youtube.lua</a></dd><dt>NewPipe</dt><dd><a href="https://github.com/Theta-Dev/NewPipeExtractor/blob/dev/extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/YoutubeJavaScriptExtractor.java">https://github.com/Theta-Dev/NewPipeExtractor/blob/dev/extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/YoutubeJavaScriptExtractor.java</a></dd><dt>node-ytdl-core</dt><dd><a href="https://github.com/fent/node-ytdl-core/blob/master/lib/sig.js">https://github.com/fent/node-ytdl-core/blob/master/lib/sig.js</a></dd></dl><p><a href="https://blog.0x7d0.dev/assets/img/how-they-bypass-youtube-video-download-throttling/pixel.png"><img data-src="/assets/img/how-they-bypass-youtube-video-download-throttling/pixel.png" alt="" data-proofer-ignore="" src="https://blog.0x7d0.dev/assets/img/how-they-bypass-youtube-video-download-throttling/pixel.png"></a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Things Unix can do atomically (2010) (147 pts)]]></title>
            <link>https://rcrowley.org/2010/01/06/things-unix-can-do-atomically.html</link>
            <guid>37117291</guid>
            <pubDate>Mon, 14 Aug 2023 03:53:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://rcrowley.org/2010/01/06/things-unix-can-do-atomically.html">https://rcrowley.org/2010/01/06/things-unix-can-do-atomically.html</a>, See on <a href="https://news.ycombinator.com/item?id=37117291">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<h2><a href="https://rcrowley.org/2010/01/06/things-unix-can-do-atomically">Things UNIX can do atomically</a> <small>2010/01/06</small></h2>
<p>This is a catalog of things UNIX-like/POSIX-compliant operating systems can do atomically, making them useful as building blocks for thread-safe and multi-process-safe programs without mutexes or read/write locks.&nbsp; The list is by no means exhaustive and I expect it to be updated frequently for the foreseeable future.</p>

<p>The philosophy here is to let the kernel do as much work as possible.&nbsp; At my most pessimistic, I trust the kernel developers more than a trust myself.&nbsp; More practically, it’s stupid to spend CPU time locking around an operation that’s already atomic.&nbsp; <em>Added 2010-01-07.</em></p>

<h2>Operating on a pathname</h2>

<p>The operations below are best left to local filesystems.&nbsp; More than a few people have written in crying foul if any of these techniques are used on an NFS mount.&nbsp; True.&nbsp; When there are multiple kernels involved, the kernel can’t very well take care of all the locking for us.&nbsp; <em>Added 2010-01-06.</em></p>

<ul>
	<li id="mv"><code>mv -T &lt;oldsymlink&gt; &lt;newsymlink&gt;</code> atomically changes the target of <code>&lt;newsymlink&gt;</code> to the directory pointed to by <code>&lt;oldsymlink&gt;</code> and is indispensable when deploying new code.&nbsp; <em>Updated 2010-01-06: both operands are symlinks.</em>&nbsp; (So this isn’t a system call, it’s still useful.)&nbsp; <del>A reader pointed out that <code>ln -Tfs &lt;directory&gt; &lt;symlink&gt;</code> accomplishes the same thing without the second symlink.&nbsp; <em>Added 2010-01-06.</em></del>&nbsp; <em>Deleted 2010-01-06: <code>strace(1)</code> shows that <code>ln -Tfs &lt;directory&gt; &lt;symlink&gt;</code> actually calls <code>symlink(2)</code>, <code>unlink(2)</code>, and <code>symlink(2)</code> once more, disqualifying it from this page.&nbsp; <code>mv -T &lt;oldsymlink&gt; &lt;newsymlink&gt;</code> ends up calling <code>rename(2)</code> which can atomically replace <code>&lt;newsymlink&gt;</code>.</em>&nbsp; <em>Caveat 2013-01-07: this does not apply to Mac OS X, whose <a href="https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/mv.1.html"><code>mv(1)</code></a> doesn’t call <code>rename(2)</code>.</em>&nbsp; <a href="http://linux.die.net/man/1/mv"><code>mv(1)</code></a>.</li>
	<li id="link"><code>link(oldpath, newpath)</code> creates a new hard link called <code>newpath</code> pointing to the same inode as <code>oldpath</code> and increases the link count by one.&nbsp; This will fail with the error code <code>EEXIST</code> if <code>newpath</code> already exists, making this a useful mechanism for locking a file amongst threads or processes that can all agree upon the name <code>newpath</code>.&nbsp; I prefer this technique for whole-file locking because the lock is visible to <code>ls(1)</code>.&nbsp; <a href="http://linux.die.net/man/2/link"><code>link(2)</code></a>.</li>
	<li id="symlink"><code>symlink(oldpath, newpath)</code> operates very much like <code>link(2)</code> but creates a symbolic link at a new inode rather than a hard link to the same inode.&nbsp; Symbolic links can point to directories, which hard links cannot, making them a perfect analogy to <code>link(2)</code> when locking entire directories.&nbsp; This will fail with the error code <code>EEXIST</code> if <code>newpath</code> already exists, making this a perfect analogy to <code>link(2)</code> that works for directories, too.&nbsp; Be careful of symbolic links whose target inode has been removed ("dangling" symbolic links) — <code>open(2)</code> will fail with the error code <code>ENOENT</code>.&nbsp; It should be mentioned that inodes are a finite resource (this particular machine has 1,245,184 inodes).&nbsp; <a href="http://linux.die.net/man/2/symlink"><code>symlink(2)</code></a>.&nbsp; <em>Added 2010-01-07</em></li>
	<li id="rename"><code>rename(oldpath, newpath)</code> can change a pathname atomically, provided <code>oldpath</code> and <code>newpath</code> are on the same filesystem.&nbsp; This will fail with the error code <code>ENOENT</code> if <code>oldpath</code> does not exist, enabling interprocess locking much like <code>link(oldpath, newpath)</code> above.&nbsp; I find this technique more natural when the files in question will be <code>unlink</code>ed later.&nbsp; <a href="http://linux.die.net/man/2/rename"><code>rename(2)</code></a>.</li>
	<li id="open"><code>open(pathname, O_CREAT | O_EXCL, 0644)</code> creates and opens a new file.&nbsp; (Don’t forget to set the mode in the third argument!)&nbsp; <code>O_EXCL</code> instructs this to fail with the error code <code>EEXIST</code> if <code>pathname</code> exists.&nbsp; This is a useful way to decide which process should handle a task: whoever successfully creates the file.&nbsp; <a href="http://linux.die.net/man/2/open"><code>open(2)</code></a>.</li>
	<li id="mkdir"><code>mkdir(dirname, 0755)</code> creates a new directory but fails with the error code <code>EEXIST</code> if <code>dirname</code> exists.&nbsp; This provides for directories the same mechanism <del><code>link(2)</code></del> <code>open(2)</code> with <code>O_EXCL</code> provides for files.&nbsp; <a href="http://linux.die.net/man/2/mkdir"><code>mkdir(2)</code></a>.&nbsp; <em>Added 2010-01-06; edited 2013-01-07.</em></li>
</ul>

<h2>Operating on a file descriptor</h2>

<ul>
	<li id="fcntl-lock"><code>fcntl(fd, F_GETLK, &amp;lock)</code>, <code>fcntl(fd, F_SETLK, &amp;lock)</code>, and <code>fcntl(fd, F_SETLKW, &amp;lock)</code> allow cooperating processes to lock regions of a file to serialize their access.&nbsp; <code>lock</code> is of type <code>struct flock</code> and describes the type of lock and the region being locked.&nbsp; <code>F_SETLKW</code> is particularly useful as it blocks the calling process until the lock is acquired.&nbsp; There is a “mandatory locking” mode but Linux’s implementation is unreliable as it’s subject to a race condition.&nbsp; <a href="http://linux.die.net/man/2/fcntl"><code>fcntl(2)</code></a>.</li>
	<li id="fcntl-lease"><code>fcntl(fd, F_GETLEASE)</code> and <code>fcntl(fd, F_SETLEASE, lease)</code> ask the kernel to notify the calling process with <code>SIGIO</code> when another process <code>open</code>s or <code>truncate</code>s the file referred to by <code>fd</code>.&nbsp; When that signals arrives, the lease needs to be removed by <code>fcntl(fd, F_SETLEASE, F_UNLCK)</code>.&nbsp; <code>fcntl(fd, F_NOTIFY, arg)</code> is similar but doesn’t block other processes, so it isn’t useful for synchronization.&nbsp; <a href="http://linux.die.net/man/2/fcntl"><code>fcntl(2)</code></a>.</li>
	<li id="mmap"><code>mmap(0, length, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0)</code> returns a pointer from which a file’s contents can be read and written by normal memory operations.&nbsp; By making frequent use of <code>msync(addr, length, MS_INVALIDATE)</code>, data written in this manner can be shared between processes that both map the same file.&nbsp; <a href="http://linux.die.net/man/2/mmap"><code>mmap(2)</code></a>, <a href="http://linux.die.net/man/2/msync"><code>msync(2)</code></a>.</li>
</ul>

<h2>Operating on virtual memory</h2>

<ul>
	<li id="gcc-atomic-builtins"><code>__sync_fetch_and_add</code>, <code>__sync_add_and_fetch</code>, <code>__sync_val_compare_and_swap</code>, and friends provide a full barrier so “no memory operand will be moved across the operation, either forward or backward.” These operations are the basis for most (all?) lock-free algorithms.&nbsp; <a href="http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Atomic-Builtins.html">GCC Atomic Builtins</a>.</li>
</ul>

<p>Something I should add to my repertoire?&nbsp; Race condition?&nbsp; Let me know at <a href="mailto:r@rcrowley.org">r@rcrowley.org</a> or <a href="http://twitter.com/rcrowley">@rcrowley</a> and I’ll fix it.</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Jitsi Meet Flutter SDK (167 pts)]]></title>
            <link>https://jitsi.org/blog/introducing-the-jitsi-meet-flutter-sdk/</link>
            <guid>37116539</guid>
            <pubDate>Mon, 14 Aug 2023 01:47:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jitsi.org/blog/introducing-the-jitsi-meet-flutter-sdk/">https://jitsi.org/blog/introducing-the-jitsi-meet-flutter-sdk/</a>, See on <a href="https://news.ycombinator.com/item?id=37116539">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
				<p><span><strong>Blog</strong></span></p>
				
				<p><a href="https://flutter.dev/">Flutter</a>‘s initial release occurred in 2017, the same year as the introduction of our mobile apps and mobile SDKs. For those who are unfamiliar with it, Flutter is one of the most popular frameworks for developing cross-platform applications.</p>
<p>Now a few years after their first release, <strong>we are thrilled to announce that our mobile SDKs and Flutter cross paths as the <a href="https://github.com/jitsi/jitsi-meet-flutter-sdk">Jitsi Meet Flutter SDK</a>.</strong> Yes that’s right, after multiple requests, an official Jitsi Meet Plugin for Flutter is now available.</p>
<p>As of now, our family of mobile SDKs is more complete than ever.</p>
<p>Android and iOS are supported, of course. The plugin serves as a wrapper for the iOS and Android SDKs, on top of which a Flutter API was created with functionality similar to those found in native APIs.</p>
<h3>Add Jitsi Meet to your Flutter app</h3>
<p>The plugin is available on pub.dev under the<a href="https://pub.dev/packages/jitsi_meet_flutter_sdk"> jitsi_meet_flutter_sdk</a> name. Discover it there, follow the instructions, and you’ll be able to utilize the API to the fullest extent.</p>
<p>Here is a sneak peek of how simple it is to add a meeting to a fresh page.</p>
<p><a href="https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46.png"><img decoding="async" src="https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46-255x300.png" alt="" width="255" height="300" srcset="https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46-255x300.png 255w, https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46-870x1024.png 870w, https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46-768x904.png 768w, https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46.png 926w" sizes="(max-width: 255px) 100vw, 255px" data-srcset="https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46-255x300.png 255w, https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46-870x1024.png 870w, https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46-768x904.png 768w, https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46.png 926w" data-src="https://jitsi.org/wp-content/uploads/2023/08/Screenshot-2023-08-02-at-15.08.46-255x300.png" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></a></p>
<p>Here is how that looks like:</p>
<p><a href="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26.png"><img decoding="async" loading="lazy" src="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-472x1024.png" alt="" width="472" height="1024" srcset="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-472x1024.png 472w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-138x300.png 138w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-768x1665.png 768w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-709x1536.png 709w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-945x2048.png 945w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26.png 1179w" sizes="(max-width: 472px) 100vw, 472px" data-srcset="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-472x1024.png 472w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-138x300.png 138w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-768x1665.png 768w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-709x1536.png 709w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-945x2048.png 945w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26.png 1179w" data-src="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.13.26-472x1024.png" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></a> <a href="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13.png"><img decoding="async" loading="lazy" src="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-472x1024.png" alt="" width="472" height="1024" srcset="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-472x1024.png 472w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-138x300.png 138w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-768x1665.png 768w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-709x1536.png 709w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-945x2048.png 945w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13.png 1179w" sizes="(max-width: 472px) 100vw, 472px" data-srcset="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-472x1024.png 472w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-138x300.png 138w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-768x1665.png 768w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-709x1536.png 709w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-945x2048.png 945w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13.png 1179w" data-src="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.13-472x1024.png" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></a> <a href="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34.png"><img decoding="async" loading="lazy" src="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-472x1024.png" alt="" width="472" height="1024" srcset="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-472x1024.png 472w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-138x300.png 138w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-768x1665.png 768w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-709x1536.png 709w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-945x2048.png 945w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34.png 1179w" sizes="(max-width: 472px) 100vw, 472px" data-srcset="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-472x1024.png 472w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-138x300.png 138w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-768x1665.png 768w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-709x1536.png 709w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-945x2048.png 945w, https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34.png 1179w" data-src="https://jitsi.org/wp-content/uploads/2023/08/Simulator-Screenshot-iPhone-14-Pro-2023-08-02-at-15.09.34-472x1024.png" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></a></p>
<p>In your own Flutter app, you’ll have the same view as the one from the Jitsi Meet mobile apps, with just a few additional lines of code, amazing, right?</p>
<h3>Have a look at the sample apps</h3>
<p>We developed two apps using the Jitsi Meet Flutter SDK, one of which is the example app in the plugin <a href="https://github.com/jitsi/jitsi-meet-flutter-sdk/tree/main/example">repository</a> and primarily acts as a tester app by displaying the majority of the plugin’s features in the user interface, and the other of which is an official sample app in the <a href="https://github.com/jitsi/jitsi-meet-sdk-samples/tree/master/flutter">repository</a> that contains all of our samples for all mobile SDKs and is just a straightforward example of integrating Jitsi Meet.</p>
<p>Flutter is new to us, and we hope this new SDK will make it easier for our users and <a href="https://jaas.8x8.vc/">JaaS</a> customers to embed video meetings into their existing Flutter apps we agerly await your feedback!</p>
<p>❤️ Your personal meetings team.</p>
<hr>
<p>Author: <a href="https://github.com/gabiborlea">Gabriel Borlea</a></p>

							</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The world in which IPv6 was a good design (2017) (161 pts)]]></title>
            <link>https://apenwarr.ca/log/20170810</link>
            <guid>37116487</guid>
            <pubDate>Mon, 14 Aug 2023 01:38:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://apenwarr.ca/log/20170810">https://apenwarr.ca/log/20170810</a>, See on <a href="https://news.ycombinator.com/item?id=37116487">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><b>The world in which IPv6 was a good design</b></p>
<p>Last November I went to an IETF meeting for the first time.  The IETF is an
interesting place; it seems to be about 1/3 maintenance grunt work, 1/3
extending existing stuff, and 1/3 blue sky insanity.  I attended mostly
because I wanted to see how people would react to <a href="https://datatracker.ietf.org/meeting/97/materials/slides-97-iccrg-bbr-congestion-control">TCP BBR, which was being
presented there for the first time</a>.  (Answer: mostly positively, but
with suspicion.  It kinda seemed too good to be true.)</p>
<p>Anyway, the IETF meetings contain lots and lots of presentations about IPv6,
the thing that was supposed to replace IPv4, which is what the Internet runs
on.  (Some would say IPv4 is already being replaced; some would say it has
already happened.) Along with those presentations about IPv6, there were
lots of people who think it's great, the greatest thing ever, and they're
pretty sure it will finally catch on Any Day Now, and IPv4 is just a giant
pile of hacks that really needs to die so that the Internet can be elegant
again.</p>
<p>I thought this would be a great chance to really try to figure out what was
going on.  Why is IPv6 such a complicated mess compared to IPv4?  Wouldn't
it be better if it had just been <a href="https://tools.ietf.org/html/rfc1710">IPv4 with more address bits</a>?  But it's not,
oh goodness, is it ever not.  So I started asking around.  Here's what I found.</p>
<p><b>Buses ruined everything</b></p>
<p>Once upon a time, there was the telephone network, which used physical
circuit switching.  Essentially, that meant moving connectors around so that
your phone connection was literally just a very long wire ("<a href="https://en.wikipedia.org/wiki/OSI_model">OSI layer</a> 1").  A
"leased line" was a very long wire that you leased from the phone
company.  You would put bits in one end of the wire, and they'd come out the
other end, a fixed amount of time later.  You didn't need addresses because
there was exactly one machine at each end.</p>
<p>Eventually the phone company optimized that a bit.  Time-division
multiplexing (TDM) and "virtual circuit switching" was born.  The phone
company could transparently take the bits at a slower bit rate from multiple
lines, group them together with multiplexers and demultiplexers, and let
them pass through the middle of the phone system using fewer wires than
before.  Making that work was a little complicated, but as far as we
modem users were concerned, you still put bits in one end and they
came out the other end.  No addresses needed.</p>
<p>The Internet (not called the Internet at the time) was built on top of these
circuits.  You had a bunch of wires that you could put bits
into and have them come out the other side.  If one computer had two or
three interfaces, then it could, if given the right instructions, forward
bits from one line to another, and you could do something a lot more
efficient than a separate line between each pair of computers.  And so IP
addresses ("layer 3"), subnets, and routing were born.  Even then, with
these point-to-point links, you didn't need MAC addresses, because once a
packet went into the wire, there was only one place it could come out.  You
used IP addresses to decide where it should go after that.</p>
<p>Meanwhile, LANs got invented as an alternative.  If you wanted to connect
computers (or terminals and a mainframe) together at your local site, it was
pretty inconvenient to need multiple interfaces, one for each wire to each
satellite computer, arranged in a star configuration.  To save on
electronics, people wanted to have a "bus" network (also known as a
"broadcast domain," a name that will be important later) where multiple
stations could just be plugged into a single wire, and talk to any other
station plugged into the same wire.  These were not the same people as the
ones building the Internet, so they didn't use IP addresses for this.  They
all invented their own scheme ("layer 2").</p>
<p>One of the early local bus networks was arcnet, which is dear to my heart (I
wrote the first Linux arcnet driver <a href="http://apenwarr.ca/arcnet/howto/intro.html">and arcnet poetry</a> way
back in the 1990s, long after arcnet was obsolete).  Arcnet layer 2
addresses were very simplistic: just 8 bits, set by jumpers or DIP switches
on the back of the network card.  As the network owner, it was your job to
configure the addresses and make sure you didn't have any duplicates, or all
heck would ensue.  This was kind of a pain, but arcnet networks were usually
pretty small, so it was only <i>kind</i> of a pain.</p>
<p>A few years later, ethernet came along and solved that problem once and for
all, by using many more bits (48, in fact) in the layer 2 address.  That's
enough bits that you can assign a different (sharded-sequential) address to
every device that has ever been manufactured, and not have any overlaps. 
And that's exactly what they did!  Thus the ethernet MAC address was born.</p>
<p>Various LAN technologies came and went, including one of my favourites, IPX
(Internetwork Packet Exchange, though it had nothing to do with the "real"
Internet) and Netware, which worked great as long as all the clients and
servers were on a single bus network.  You never had to configure any
addresses, ever.  It was beautiful, and reliable, and worked.  The golden
age of networking, basically.</p>
<p>Of course, someone had to ruin it: big company/university networks.  They
wanted to have so many computers that sharing 10 Mbps of a single bus
network between them all became a huge bottleneck, so they needed a way to
have multiple buses, and then interconnect - "internetwork," if you will -
those buses together.  You're probably thinking, of course! Use the Internet
Protocol for that, right?  Ha ha, no.  The Internet protocol, still not
called that, wasn't mature or popular back then, and nobody took it
seriously.  Netware-over-IPX (and the many other LAN protocols at the time)
were serious business, so as serious businesses do, they invented their own
thing(s) to extend the already-popular thing, ethernet.  Devices on
ethernet already had addresses, MAC addresses, which were about the only
thing the various LAN protocol people could agree on, so they decided to use
ethernet addresses as the keys for their routing mechanisms.  (Actually they
called it bridging and switching instead of routing.)</p>
<p>The problem with ethernet addresses is they're assigned sequentially at the
factory, so they can't be hierarchical.  That means the "bridging table" is
not as nice as a modern IP routing table, which can talk about the route for
a whole subnet at a time.  In order to do efficient bridging, you had to
remember which network bus each MAC address could be found on.  And humans
didn't want to configure each of those by hand, so it needed to figure
itself out automatically.  If you had a complex internetwork of bridges,
this could get a little complicated.  As I understand it, that's what led to
the <a href="http://etherealmind.com/algorhyme-radia-perlman/">spanning tree
poem</a>, and I think I'll just leave it at that.  Poetry is very important
in networking.</p>
<p>Anyway, it mostly worked, but it was a bit of a mess, and you got broadcast floods
every now and then, and the routes weren't always optimal, and it was pretty
much impossible to debug.  (You definitely couldn't write something like
traceroute for bridging, because none of the tools you need to make it work
- such as the ability for an intermediate bridge to even have an address -
exist in plain ethernet.)</p>
<p>On the other hand, all these bridges were hardware-optimized.  The whole
system was invented by hardware people, basically, as a way of fooling the
software, which had no idea about multiple buses and bridging between them,
into working better on large networks.  Hardware bridging means the bridging
could go really really fast - as fast as the ethernet could go.  Nowadays
that doesn't sound very special, but at the time, it was a big deal. 
Ethernet was 10 Mbps, because you could maybe saturate it by putting a bunch
of computers on the network all at once, not because any one computer could
saturate 10 Mbps.  That was crazy talk.</p>
<p>Anyway, the point is, bridging was a mess, and impossible to debug, but it
was fast.</p>
<p><b>Internet over buses</b></p>
<p>While all that was happening, those Internet people were getting busy, and
were of course not blind to the invention of cool cheap LAN technologies.  I
think it might have been around this time that the ARPANET got actually
renamed to the Internet, but I'm not sure.  Let's say it was, because the
story is better if I sound confident.</p>
<p>At some point, things progressed from connecting individual Internet
computers over point-to-point long distance links, to the desire to connect
whole LANs together, over point-to-point links.  Basically, you wanted a
long-distance bridge.</p>
<p>You might be thinking, hey, no big deal, why not just build a long distance
bridge and be done with it?  Sounds good, doesn't work.  I won't go into the
details right now, but basically the problem is <a href="https://en.wikipedia.org/wiki/Network_congestion">congestion
control</a>.  The deep dark secret of ethernet bridging is that it assumes
all your links are about the same speed, and/or completely uncongested,
because they have no way to slow down.  You just blast data as fast as you
can, and expect it to arrive.  But when your ethernet is 10 Mbps and your
point-to-point link is 0.128 Mbps, that's completely hopeless.  Separately,
the idea of figuring out your routes by flooding all the links to see which
one is right - this is the actual way bridging typically works - is hugely
wasteful for slow links.  And sub-optimal routing, an annoyance on local
networks with low latency and high throughput, is nasty on slow, expensive
long-distance links.  It just doesn't scale.</p>
<p>Luckily, those Internet people (if it was called the Internet yet) had been
working on that exact set of problems.  If we could just use Internet stuff
to connect ethernet buses together, we'd be in great shape.</p>
<p>And so they designed a "frame format" for Internet packets over ethernet
(and arcnet, for that matter, and every other kind of LAN).</p>
<p>And that's when everything started to go wrong.</p>
<p>The first problem that needed solving was that now, when you put an Internet
packet onto a wire, it was no longer clear which machine was supposed to
"hear" it and maybe forward it along.  If multiple Internet routers were on
the same ethernet segment, you couldn't have them all picking it up and
trying to forward it; that way lies packet storms and routing loops.  No,
you had to choose <i>which</i> router on the ethernet bus is supposed to
pick it up.  We can't just use the IP destination field for that, because
we're already using that for the <i>final</i> destination, not the router
destination.  Instead, we identify the desired router using its MAC address
in the ethernet frame.</p>
<p>So basically, to set up your local IP routing table, you want to be able to
say something like, "send packets to IP address 10.1.1.1 via the router at
MAC address 11:22:33:44:55:66."  That's the actual thing you want to
express.  This is important!  Your destination is an IP address, but your
router is a MAC address.  But if you've ever configured a routing table, you
might have noticed that nobody writes it like that.  Instead, because the
writers of your operating system's TCP/IP stack are stubborn, you write
something like "send packets to IP address 10.1.1.1 via the router at IP
address 192.168.1.1."</p>
<p>In truth, that really is just complicating things.  Now your operating
system has to first look up the ethernet address of 192.168.1.1, find out
it's 11:22:33:44:55:66, and finally generate a packet with destination
ethernet address 11:22:33:44:55:66 and destination IP address 10.1.1.1. 
192.168.1.1 shows up nowhere in the packet; it's just an abstraction at the
human level.</p>
<p>To do that pointless intermediate step, you need to add ARP (address
resolution protocol), a simple non-IP protocol whose job it is to convert IP
addresses to ethernet addresses.  It does this by broadcasting to everyone
on the local ethernet bus, asking them all to answer if they own that
particular IP address.  If you have bridges, they all have to forward all
the ARP packets to all their interfaces, because they're ethernet broadcast
packets, and that's what broadcasting means.  On a big, busy ethernet with
lots of interconnected LANs, excessive broadcasts start becoming one of your
biggest nightmares.  It's especially bad on wifi.  As time went on, people
started making bridges/switches with special hacks to avoid forwarding ARP
as far as it's technically supposed to go, to try to cut down on this
problem.  Some devices (especially wifi access points) just make fake ARP
answers to try to help.  But doing any of that is a hack, albeit sometimes a
necessary hack.</p>
<p><b>Death by legacy</b></p>
<p>Time passed.  Eventually (and this actually took quite a while), people
pretty much stopped using non-IP protocols on ethernet at all.  So basically
all networks became a physical wire (layer 1), with multiple stations on a
bus (layer 2), with multiple buses connected over bridges (gotcha!  still
layer 2!), and those inter-buses connected over IP routers (layer 3).</p>
<p>After a while, people got tired of manually configuring IP addresses, arcnet
style, and wanted them to auto-configure, ethernet style, except it was too
late to literally do it ethernet style, because a) the devices had already
been manufactured with ethernet addresses, not IP addresses, and b) IP
addresses were only 32 bits, which is not enough to just manufacture them
forever with no overlaps, and c) just assigning IP addresses sequentially
instead of using subnets would bring us back to square one: it would just be
ethernet over again, and we already have ethernet.</p>
<p>So that's where bootp
and DHCP came from.  Those protocols, by the way, are special kinda like ARP
is special (except they pretend not to be special, by technically being IP
packets).  They have to be special, because an IP node has to be able to
transmit them before it has an IP address, which is of course impossible, so
it just fills the IP headers with essentially nonsense (albeit nonsense
specified by an RFC), so the headers might as well have been left out.  (You
know these "IP" headers are nonsense because the DHCP server has to open a raw
socket and fill them in by hand; the kernel IP layer can't do it.)  But
nobody would feel nice if they were inventing a whole new protocol that
wasn't IP, so they pretended it was IP, and then they felt nice.  Well, as
nice as one can feel when one is inventing DHCP.</p>
<p>Anyway, I digress.
The salient detail here is that unlike real IP services, bootp and DHCP need to
know about ethernet addresses, because after all, it's their job to hear
your ethernet address and assign you an IP address to go with it.  They're
basically the reverse of ARP, except we can't say that, because there's a
protocol called RARP that is literally the reverse of ARP.  Actually, RARP
worked quite fine and did the same thing as bootp and DHCP while being
much simpler, but we don't talk about that.</p>
<p>The point of all this is that ethernet and IP were getting further and
further intertwined.  They're nowadays almost inseparable.  It's hard to
imagine a network interface (except ppp0) without a 48-bit MAC address, and it's hard to imagine
that network interface working without an IP address.  You write your IP
routing table using IP addresses, but of course you know you're lying when
you name the router by IP address; you're just indirectly saying that you
want to route via a MAC address.  And you have ARP, which gets bridged but
not really, and DHCP, which is an IP packet but is really an ethernet
protocol, and so on.</p>
<p>Moreover, we still have both bridging and routing, and they both get more
and more complicated as the LANs and the Internet get more and more
complicated, respectively.  Bridging is still, mostly, hardware based and
defined by IEEE, the people who control the ethernet standards.  Routing is
still, mostly, software based and defined by the IETF, the people who
control the Internet standards.  Both groups still try to pretend the other
group doesn't exist.  Network operators basically choose bridging vs routing
based on how fast they want it to go and how much they hate configuring DHCP
servers, which they really hate very much, which means they use bridging as
much as possible and routing when they have to.</p>
<p>In fact, bridging has gotten so completely out of control that people
decided to extract the layer 2 bridging decisions out completely to a higher
level (with configuration exchanged between bridges using a protocol layered
over IP, of course!) so it can be centrally managed.  That's called
software-defined networking (SDN).  It helps a lot, compared to letting your
switches and bridges just do whatever they want, but it's also fundamentally
silly, because you know what's software defined networking?  IP.  It is
literally and has always been the software-defined network you use for
interconnecting networks that have gotten too big.  But the problem is, IPv4
was initially too hard to hardware accelerate, and anyway, it didn't get
hardware accelerated, and configuring DHCP really is a huge pain, so network
operators just learned how to bridge bigger and bigger things.  And nowadays
big data centers are basically just SDNed, and you might as well not be
using IP in the data center at all, because nobody's routing the packets. 
It's all just one big virtual bus network.</p>
<p>It is, in short, a mess.</p>
<p><b>Now forget I said all that...</b></p>
<p>Great story, right?  Right.  Now pretend none of that happened, and we're
back in the early 1990s, when most of that had in fact already happened,
but people at the IETF were anyway pretending that it hadn't happened and
that the "upcoming" disaster could all be avoided.  This is the good part!</p>
<p>There's one thing I forgot to mention in that big long story above:
somewhere in that whole chain of events, <b>we completely stopped using bus
networks</b>.  Ethernet is not actually a bus anymore.  It just
<i>pretends</i> to be a bus.  Basically, we couldn't get ethernet's famous
<a href="https://en.wikipedia.org/wiki/Carrier-sense_multiple_access_with_collision_detection">CSMA/CD</a>
to keep working as speeds increased, so we went back to the good old star
topology.  We run bundles of cables from the switch, so that we can run one
cable from each station all the way back to the center point.  Walls and
ceilings and floors are filled with big, thick, expensive bundles of
ethernet, because we couldn't figure out how to make buses work well...  at
layer 1.  It's kinda funny actually when you think about it.  If you find
sad things funny.</p>
<p>In fact, in a bonus fit of insanity, even wifi - the ultimate bus network,
right, where literally everybody is sharing the same open-air "bus" - we
almost universally use wifi in a mode, called "infrastructure mode," which
simulates a giant star topology.  If you have two wifi stations
connected to the same access point, they don't talk to each other directly,
even when they can hear each other just fine. 
They send a packet to the access point, but addressed to the MAC address of
the other node.  The access point then bounces it back out to the
destination node.</p>
<p>HOLD THE HORSES LET ME JUST REVIEW THAT FOR YOU.  There's a little catch
there.  When node X wants to send to Internet node Z, via IP router Y, via
wifi access point A, what does the packet look like?  Just to draw a
picture, here's what we want to happen:</p>
<pre><code>X -&gt; [wifi] -&gt; A -&gt; [wifi] -&gt; Y -&gt; [internet] -&gt; Z
</code></pre>
<p>Z is the IP destination, so obviously the IP destination field has to be Z. 
Y is the router, which we learned above that we specify by using its
ethernet MAC address in the ethernet destination field.  But in wifi, X
can't just send out a packet to Y, for various reasons (including that they
don't know each other's WPA2 encryption keys).  We have to send to A.  Where do
we put A's address, you might ask?</p>
<p>No problem!  802.11 has a thing called 3-address mode.  They add a <em>third</em>
ethernet MAC address to every frame, so they can talk about the real
ethernet destination, and the intermediate ethernet destination.  On top of
that, there are bit fields called "to-AP" and "from-AP," which tell you if
the packet is going from a station to an AP, or from an AP to a station,
respectively.  But actually they can both be true at the same time, because
that's how you make wifi repeaters (APs send packets to APs).</p>
<p>Speaking of wifi repeaters!  If A is a repeater, it has to send back to the
base station, B, along the way, which looks like this:</p>
<pre><code>X -&gt; [wifi] -&gt; A -&gt; [wifi-repeater] -&gt; B -&gt; [wifi] -&gt; Y -&gt; [internet] -&gt; Z
</code></pre>
<p>X-&gt;A uses three-address mode, but A-&gt;B has a problem: the ethernet source
address is X, and the ethernet destination address is Y, but the packet on
the air is actually being sent from A to B; X and Y aren't involved at all. 
Suffice it to say that there's a thing called 4-address mode, and it works
pretty much like you think.</p>
<p>(In 802.11s mesh networks, there's a 6-address mode, and that's about where
I gave up trying to understand.)</p>
<p><b>Avery, I was promised IPv6, and you haven't even mentioned IPv6</b></p>
<p>Oh, oops. This post went a bit off the rails, didn't it?</p>
<p>Here's the point of the whole thing.  The IETF people, when they were
thinking about IPv6, saw this mess getting made - and maybe predicted some
of the additional mess that would happen, though I doubt they could have
predicted SDN and wifi repeater modes - and they said, hey wait a minute,
stop right there.  We don't need any of this crap!  What if instead the
world worked like this?</p>
<ul>
<li>No more physical bus networks (already done!)</li>
<li>No more layer 2 internetworks (that's what layer 3 is for)</li>
<li>No more broadcasts (layer 2 is always point-to-point, so where would you
   send the broadcast to?  replace it with multicast instead)</li>
<li>No more MAC addresses (on a point-to-point network, it's obvious who the
   sender and receiver are, and you can do multicast using IP addresses)</li>
<li>No more ARP and DHCP (no MAC addresses, no so mapping IP addresses to MAC
   addresses)</li>
<li>No more complexity in IP headers (so you can hardware accelerate IP
   routing)</li>
<li>No more IP address shortages (so we can go back to routing big subnets
   again)</li>
<li>No more manual IP address configuration except at the core (and there are
   so many IP addresses that we can recursively hand out subnets down the
   tree from there)</li>
</ul>
<p>Imagine that we lived in such a world: wifi repeaters would just be IPv6
routers.  So would wifi access points.  So would ethernet switches.  So
would SDN.  ARP storms would be gone.  "IGMP snooping bridges" would be
gone.  Bridging loops would be gone.  Every routing problem would be
traceroute-able.  And best of all, we could drop 12 bytes (source/dest ethernet
addresses) from every ethernet packet, and 18 bytes (source/dest/AP
addresses) from every wifi packet.  Sure, IPv6 adds an extra 24 bytes of
address (vs IPv4), but you're dropping 12 bytes of ethernet, so the added
overhead is only 12 bytes - pretty comparable to using two 64-bit IP addresses
but having to keep the ethernet header.  The idea that we could someday drop
ethernet addresses helped to justify the oversized IPv6 addresses.</p>
<p>It would have been beautiful.  Except for one problem: it never happened.</p>
<p><b>Requiem for a dream</b></p>
<p>One person at work put it best: "layers are only ever added, never removed."</p>
<p>All this wonderfulness depended on the ability to start over and throw away
the legacy cruft we had built up.  And that is, unfortunately, pretty much
impossible.  Even if IPv6 hits 99% penetration, that doesn't mean we'll be
rid of IPv4.  And if we're not rid of IPv4, we won't be rid of ethernet
addresses, or wifi addresses.  And if we have to keep the IEEE 802.3 and
802.11 framing standards, we're never going to save those bytes.  So we will
always need the "IPv6 neighbour discovery" protocol, which is just a
more complicated ARP.  Even though we no longer have bus networks, we'll
always need some kind of simulator for broadcasts, because that's how ARP
works.  We'll need to keep running a local DHCP server at home so that our
obsolete IPv4 light bulbs keep working.  We'll keep needing NAT so that our
obsolete IPv4 light bulbs can keep reaching the Internet.</p>
<p>And that's not the worst of it. The worst of it is we still need the
infinite abomination that is layer 2 bridging, because of one more mistake
the IPv6 team <i>forgot to fix</i>.  Unfortunately, while they were
blue-skying IPv6 back in the 1990s, they neglected to solve the "mobile IP"
problem.  As I understand it, the idea was to get IPv6 deployed first - it
should only take a few years - and then work on it after IPv4 and MAC
addresses had been eliminated, at which time it should be much easier to
solve, and meanwhile, nobody really has a "mobile IP" device yet anyway.  I
mean, what would that even mean, like carrying your laptop around and
plugging into a series of one ethernet port after another while you ftp a
file?  Sounds dumb.</p>
<p><b>The killer app: mobile IP</b></p>
<p>Of course, with a couple more decades of history behind us, now we know a
few use cases for carrying around a computer - your phone - and letting it
plug into one <strike>ethernet port</strike> wireless access point
after another.  We do it all the time.  And with LTE, it even mostly works! 
With wifi, it works sometimes.  Good, right?</p>
<p>Not really, because of the Internet's secret shame: all that stuff only
works because of layer 2 bridging.  Internet routing can't handle mobility -
at all.  If you move around on an IP network, your IP address changes, and
that breaks any connections you have open.</p>
<p>Corporate wifi networks fake it for you, bridging their whole LAN together
at layer 2, so that the giant central DHCP server always hands you the same
IP address no matter which corporate wifi access point you join, and then
gets your packets to you, with at most a few seconds of confusion while the
bridge reconfigures.  Those newfangled home wifi systems with multiple
extenders/repeaters do the same trick.  But if you switch from one wifi network to
another as you walk down the street - like if there's a "Public Wifi"
service in a series of stores - well, too bad.  Each of those gives you a
new IP address, and each time your IP address changes, you kill all your
connections.</p>
<p>LTE tries even harder.  You keep your IP address (usually an IPv6 address in
the case of mobile networks), even if you travel miles and miles and hop
between numerous cell towers.  How?  Well... they typically just tunnel all
your traffic back to a central location, where it all gets bridged together
(albeit with lots of firewalling) into one super-gigantic virtual layer 2
LAN.  And your connections keep going.  At the expense of a ton of
complexity, and a truly embarrassing amount of extra latency, which they
would really like to fix, but it's almost impossible.</p>
<p><b>Making mobile IP actually work<sup>1</sup></b></p>
<p>So okay, this has been a long story, but I managed to extract it from those
IETF people eventually.  When we got to this point - the problem of mobile
IP - I couldn't help but ask.  What went wrong?  Why can't we make it work?</p>
<p>The answer, it turns out, is surprisingly simple.  The great design flaw was
in how the famous "4-tuple" (source ip, source port, destination ip,
destination port) was defined.  We use the 4-tuple to identify a given TCP
or UDP session; if a packet has those four fields the same, then it belongs
to a given session, and we can deliver it to whatever socket is handling that
session.  But the 4-tuple crosses two layers: internetwork (layer 3) and
transport (layer 4).  If, instead, we had identified sessions using
<i>only</i> layer 4 data, then mobile IP would have worked perfectly.</p>
<p>Let's do a quick example.  X port 1111 is talking to Y port 80, so it sends
a packet with 4-tuple (X,1111,Y,80).  The response comes back with
(Y,80,X,1111), and the kernel delivers it to the socket that generated the
original packet.  When X sends more packets tagged (X,1111,Y,80), then Y
delivers them all to the same server socket, and so on.</p>
<p>Then, if X hops IP addresses, it gets a new name, say Q.  Now it'll start
sending packets with (Q,1111,Y,80).  Y has no idea what that means, and
throws it away.  Meanwhile, if Y sends packets tagged (Y,80,X,1111), they
get lost, because there is no longer an X to receive them.</p>
<p>Imagine now that we tagged sockets without reference to their IP address. 
For that to work, we'd need much bigger port numbers (which are currently 16
bits).  Let's make them, say, 128 or 256 bits, some kind of unique hash.</p>
<p>Now X sends out packets to Y with tag (uuid,80).  Note, the packets
themselves still contain the (X,Y) addressing information, down at layer 3
- that's how they get routed to the right machine in the first place. 
But the kernel doesn't <i>use</i> the layer 3 information to decide which
socket to deliver to; it just uses the uuid.  The destination port (80 in
this case) is only needed to initiate a new session, to identify what
service you want to connect to, and can be ignored or left out after that.</p>
<p>For the return direction, Y's kernel caches the fact that packets for (uuid)
go to IP address X, which is the address it most recently received (uuid)
packets from.</p>
<p>Now imagine that X changes addresses to Q.  It still sends out packets
tagged with (uuid,80), to IP address Y, but now those packets come
from address Q.  On machine
Y, it receives the packet and matches it to the socket associated with
(uuid), notes that the packets for that socket are now coming from address
Q, and updates its cache.  Its return packets can now be sent, tagged as
(uuid), back to Q instead of X.  Everything works! (Modulo some care
to prevent connection hijacking by impostors.<sup>2</sup>)</p>
<p>There's only one catch: that's not how UDP and TCP work, and it's too late
to update them.  Updating UDP and TCP would be like updating IPv4 to IPv6; a
project that sounded simple, back in the 1990s, but decades later, is less
than half accomplished (and the first half was the easy part; the long tail
is much harder).</p>
<p>The positive news is we may be able to hack around it with yet another
layering violation.  If we throw away TCP - it's getting rather old anyway -
and instead use QUIC over UDP, then we can just stop using the UDP 4-tuple
as a connection identifier at all.  Instead, if the UDP port number is
the "special mobility layer" port, we unwrap the content, which can be
another packet with a proper uuid tag, match it to the right session, and
deliver those packets to the right socket.</p>
<p>There's even more good news: the experimental QUIC protocol already, at
least in theory, has the right packet structure to work like this.  It turns
out you need unique session identifiers (keys) anyhow if you want to use stateless
packet encryption and authentication, which QUIC does.  So, perhaps with not
much work, QUIC could support transparent roaming.  What a world that would
be!</p>
<p>At that point, all we'd have to do is eliminate all remaining UDP and TCP
from the Internet, and then we would definitely not need layer 2
bridging anymore, for real this time, and then we could get rid of
broadcasts and MAC addresses and SDN and DHCP and all that stuff.</p>
<p>And then the Internet would be elegant again.</p>
<p><b><sup>1</sup> Edit 2017-08-16:</b> It turns out that nothing in this
section requires IPv6.  It would work fine with IPv4 and NAT, even roaming
across multiple NATs.</p>
<p><b><sup>2</sup> Edit 2017-08-15:</b> Some people asked what "some care to
prevent connection hijacking" might look like.  There are various ways to do
it, but the simplest would be to do something like the SYN-ACK-SYNACK
exchange TCP does at connection startup.  If Y just trusts the first packet
from the new host Q, then it's too easy for any attacker to take over the
X-&gt;Y connection by simply sending a packet to Y from anywhere on the
Internet.  (Although it's a bit hard to guess which 256-bit uuid to fill
in.) But if Y sends back a cookie that Q must receive and process and send
back to Y, that ensures that Q is at least a man-in-the-middle and not just
an outside attacker (which is all TCP would guarantee anyway).  If you're
using an encrypted protocol (like QUIC<sup>3</sup>), the handshake can also be protected
by your session key.</p>
<p><b><sup>3</sup> Edit 2017-10-24:</b> Besides QUIC, there are several other
candidates for such a protocol, including <a href="https://cr.yp.to/papers.html#minimalt">MinimaLT</a>.  I didn't mention
MinimaLT originally because it wasn't part of my original conversation with
the IETF people, but I don't mean to imply that QUIC is the only possible
option as a roaming-capable TCP replacement.  In fact, MinimaLT is the first
protocol I heard of that elegantly solved the roaming problem.  Future
solutions that might get adopted, including by QUIC, will likely be modeled
after MinimaLT's solution.</p>
<p><b>Update 2020-07-09:</b> I've posted <a href="https://tailscale.com/blog/two-internets-both-flakey/">more thoughts on IPv4/IPv6 migration
and interoperability</a> on the Tailscale blog.</p>




</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A video game where you are an operating system (578 pts)]]></title>
            <link>https://plbrault.com/blog-posts/i-created-the-nerdierst-game-ever-en/</link>
            <guid>37115626</guid>
            <pubDate>Sun, 13 Aug 2023 23:21:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://plbrault.com/blog-posts/i-created-the-nerdierst-game-ever-en/">https://plbrault.com/blog-posts/i-created-the-nerdierst-game-ever-en/</a>, See on <a href="https://news.ycombinator.com/item?id=37115626">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>It was in last November that I texted the following to my good friend Sam, a fellow computer nerd:</p>
<blockquote>
<p>Imagine a videogame where you are an operating system. You have to manage CPU cores, processes, memory pages and swap space. You have to make sure that no process starves, and to swap memory pages when necessary. Your goal is to avoid angering the user by being too slow.</p><p>So, what to you think?</p>
</blockquote>
<p>"I think you're a big nerd!" was his answer.</p>
<p>So I proceeded to start developing my nerdy game. First I had to pick a tech. I didn't feel like learning how to use a full-fledged game engine for my quite simple project, so I figured a simple 2D library would do. I also had been wanting to get back into Python. Naturally, Pygame was the obvious choice. Pygame also had the added benefit of making it possible to compile a game to WebAssembly (using <a href="https://pypi.org/project/pygbag/">pygbag</a>), making it playable in a web browser. With Pygame I started my journey, and completed it in what was probably a single week spread across eight months.</p>
<h2 id="game-mechanics"><a href="#game-mechanics" aria-label="game mechanics permalink"></a>Game Mechanics</h2>
<p>At the core of the game, there are processes and CPU's. You can click on an idle process to assign it to an available CPU, and click on an active process to remove it from its CPU. Over time, idle processes go through six starvation levels represented by colours and emojis. If a process spends too much time in the last starvation level, the user becomes impatient and kills it. After having killed 10 processes, the user becomes so angry that they reboot you — the operating system —, ending the game. The goal is to survive as long as possible without getting rebooted. That means making sure that every process spends enough time on a CPU to not go through all the starvation levels.</p>
<p>
    <img alt="Images of the six starvation levels" src="https://plbrault.com/blog-images/youre-the-os-starvation-level.png">
</p>
<p>An active process can also become blocked because it is waiting for an I/O event. Blocked processes waste CPU time and it is therefore a good idea to remove them from their CPU. I/O events must be processed by clicking on a button that changes appearance when events are available.</p>
<p>
    <img alt="The I/O events button" src="https://plbrault.com/blog-images/youre-the-os-io-events.png">
</p>
<p>As the game progresses, more processes appear, making the game increasingly difficult. At some point, all these processes start taking more memory than is available in the RAM, so you need to start swapping memory pages between the RAM and the disk. An active  process starts blinking when it is trying to access pages that are on disk, and the corresponding pages also blink. This is when you know you need to swap pages.</p>
<p>
    <img alt="The I/O events button" src="https://plbrault.com/blog-images/youre-the-os-pages.png">
</p>
<p>A process that is trying to access pages that are on disk will stay blocked until the pages are placed back in RAM. If it stays blocked for too long, it will keep going through the starvation levels and eventually get killed.</p>
<p>Finally, the game has multiple difficulty levels available, which influence things such as the number of CPU's, the amount of RAM, the number of processes existing when starting the game, the probability of I/O events, etc. It also has a custom mode where all these settings can be tweaked independently.</p>
<h2 id="does-this-game-have-educational-value"><a href="#does-this-game-have-educational-value" aria-label="does this game have educational value permalink"></a>Does This Game Have Educational Value?</h2>
<p>One has to keep in mind that this game is primarily, well, a game, and as such, has been designed to prioritize playability over realism. The first way in which it is not entirely realistic is the obvious fact that the player is not expected to have the speed of an actual computer! Many other details are technically wrong, such as processes using WAY LESS memory pages than typical actual processes would do, and the fact that a computer user does not usually keep launching new processes indefinitely — that is solely a game mechanic to make the game increasingly difficult.</p>
<p>In other words, this game has not been created with education in mind. All that being said, I do believe it can have some value in introducing computer science students to operating system principles like process scheduling and memory swapping, as long as it is made clear that it is not an exact depiction. As a computer science teacher myself, I might use it this fall while teaching a class about computer components, to better illustrate what it actually means for a processor to have more cores, or what happens when we run out of RAM.</p>
<h2 id="compiling-to-webassembly"><a href="#compiling-to-webassembly" aria-label="compiling to webassembly permalink"></a>Compiling to WebAssembly</h2>
<p>Compiling the game to WebAssembly was easier than expected, thanks to the documentation available <a href="https://pygame-web.github.io/">here</a>. The main steps are to install pygbag and implement the modifications to the code that are detailed in the documentation. The biggest problem I encountered was with <a href="https://pypi.org/project/pygame-emojis/">the library</a> I was using to render emojis, which I could not make work with pygbag. I ended up downloading SVG files from <a href="https://openmoji.org/">OpenMoji</a> and using GIMP to resize them as needed and export them to PNG.</p>
<p>By default, the game adapts its size to the browser's viewport, while maintaining the same ratio as the desktop version. It ends up being stretched if the desktop version uses a smaller window size. This does not result in unbearable pixelization for my game, which has a somewhat retro style, but your mileage may vary.</p>
<h2 id="try-the-game"><a href="#try-the-game" aria-label="try the game permalink"></a>Try the Game!</h2>
<p>If I piqued your interest, you can play the game directly in your browser on <a href="https://drfreckles42.itch.io/youre-the-os">itch.io</a>. Furthermore, like most things I do, the game is open source, and its source code is available on <a href="https://github.com/plbrault/youre-the-os">GitHub</a>.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Tenable CEO says Microsoft security is blatantly negligent (109 pts)]]></title>
            <link>https://www.bleepingcomputer.com/news/microsoft/microsoft-fixes-flaw-after-being-called-irresponsible-by-tenable-ceo/</link>
            <guid>37115407</guid>
            <pubDate>Sun, 13 Aug 2023 22:47:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bleepingcomputer.com/news/microsoft/microsoft-fixes-flaw-after-being-called-irresponsible-by-tenable-ceo/">https://www.bleepingcomputer.com/news/microsoft/microsoft-fixes-flaw-after-being-called-irresponsible-by-tenable-ceo/</a>, See on <a href="https://news.ycombinator.com/item?id=37115407">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><img alt="Microsoft Azure" height="800" src="https://www.bleepstatic.com/content/hl-images/2023/06/12/microsoft-azure.jpg" width="1600"></p>
<p>Microsoft fixed a security flaw in the Power Platform Custom Connectors feature that let unauthenticated attackers access cross-tenant applications and Azure customers' sensitive data&nbsp;after being called "grossly irresponsible" by Tenable’s CEO.</p>
<p>The root cause of the issue stemmed from inadequate access control measures for Azure Function hosts launched by connectors within the Power Platform. These connectors use custom C# code integrated into a Microsoft-managed Azure Function featuring an HTTP trigger.</p>
<p>Although customer interaction with custom connectors usually happens via authenticated APIs, the API endpoints facilitated requests to the Azure Function without enforcing authentication.</p>
<p>This created an opportunity for attackers to exploit unsecured Azure Function hosts and intercept&nbsp;OAuth client IDs and secrets.</p>
<p>"It should be noted that this is not exclusively an issue of information disclosure, as being able to access and interact with the unsecured Function hosts, and trigger behavior defined by custom connector code, could have further impact," <a href="https://www.tenable.com/security/research/tra-2023-25" target="_blank" rel="nofollow noopener">says</a> cybersecurity firm Tenable which discovered the flaw and reported it on March 30th.</p>
<p>"However, because of the nature of the service, the impact would vary for each individual connector, and would be difficult to quantify without exhaustive testing."</p>
<p>"To give you an idea of how bad this is, our team very quickly discovered authentication secrets to a bank. They were so concerned about the seriousness and the ethics of the issue that we immediately notified Microsoft," Tenable CEO Amit Yoran <a href="https://www.linkedin.com/pulse/microsoftthe-truth-even-worse-than-you-think-amit-yoran/" target="_blank" rel="nofollow noopener">added</a>.</p>
<p>Tenable also shared&nbsp;proof of concept exploit code and information on the steps required to find vulnerable connector hostnames and how to craft the POST requests to interact with the unsecured API endpoints.</p>
<div>
<figure><img alt="Attack flow Power Platform bug" height="300" src="https://www.bleepstatic.com/images/news/u/1109292/2023/Attack%20flow%20Power%20Platform%20bug.png" width="810"><figcaption><em>Attack flow Power Platform bug (Tenable)</em></figcaption></figure></div>
<p>While investigating Tenable's report, the company initially found that the researcher was the only one who exploited the issue. After further analysis in July, Microsoft determined that there were some Azure Functions in a "soft delete" state that had not been properly mitigated.</p>
<p>Microsoft finally resolved the issue for all customers on August 2nd&nbsp;after an initial fix deployed by Redmond on June 7th was tagged by Tenable as incomplete.</p>
<p>"This issue has been fully addressed for all customers and no customer remediation action is required," Microsoft&nbsp;<a data-sk="tooltip_parent" data-stringify-link="https://msrc.microsoft.com/blog/2023/08/microsoft-mitigates-power-platform-custom-code-information-disclosure-vulnerability/" delay="150" href="https://msrc.microsoft.com/blog/2023/08/microsoft-mitigates-power-platform-custom-code-information-disclosure-vulnerability/" rel="noopener noreferrer" target="_blank">said</a>&nbsp;on Friday.</p>
<p>Redmond has since notified all impacted customers through the Microsoft 365 Admin Center starting August 4th.</p>
<p>Even though Microsoft says the information disclosure issue was addressed for all Azure customers, Tenable believes the fix applies only to newly deployed Power Apps and Power Automation custom connectors.</p>
<p>"Microsoft has fixed the issue for newly deployed connectors by requiring Azure Function keys to access the Function hosts and their HTTP trigger," Tenable says.</p>
<p>"We would refer customers who require additional details regarding the nature of the deployed remediations to Microsoft for authoritative answers."</p>
<h2>Fix only came after public criticism</h2>
<p>Microsoft addressed the flaw after a five-month period, but not before the CEO of Tenable voiced vehement criticism against the initial response. Yoran condemned Microsoft's approach as "grossly irresponsible" and "blatantly negligent."</p>
<p>To make matters even worse, Redmond's initial commitment to fixing the issue in September&nbsp;deviated by a large margin&nbsp;from the expected 90-day deadline, typically adhered to by most vendors&nbsp;when it comes to patching security vulnerabilities.</p>
<p>This extended delay added to the concerns and raised additional&nbsp;questions about the timeliness of Microsoft's&nbsp;response to security issues affecting its products.</p>
<p>"Did Microsoft quickly fix the issue that could effectively lead to the breach of multiple customers' networks and services? Of course not. They took more than 90 days to implement a partial fix – and only for new applications loaded in the service," Yoran said.</p>
<p>"That means that as of today, the bank I referenced above is still vulnerable, more than 120 days since we reported the issue, as are all of the other organizations that had launched the service prior to the fix.</p>
<p>"And, to the best of our knowledge, they still have no idea they are at risk and therefore can’t make an informed decision about compensating controls and other risk mitigating actions."</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Tech salaries largely unchanged as skills shortages continue (254 pts)]]></title>
            <link>https://www.reseller.co.nz/article/708342/tech-salaries-largely-unchanged-as-skills-shortages-continue/</link>
            <guid>37115286</guid>
            <pubDate>Sun, 13 Aug 2023 22:32:38 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.reseller.co.nz/article/708342/tech-salaries-largely-unchanged-as-skills-shortages-continue/">https://www.reseller.co.nz/article/708342/tech-salaries-largely-unchanged-as-skills-shortages-continue/</a>, See on <a href="https://news.ycombinator.com/item?id=37115286">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemscope="" itemtype="http://schema.org/Article" id="article_wrap_708342" data-article-id="708342" data-article-headline="Tech salaries largely unchanged as skills shortages continue" data-article-url="/article/708342/tech-salaries-largely-unchanged-as-skills-shortages-continue/">

    <meta itemprop="sourceOrganization" content="New Zealand Reseller News">
    <article>

      

      <div itemprop="articleBody">

      
      
      
      
      <div>
        <figure>
          
          <img alt="Graeme Muller (NZTech)" src="https://d1abomko0vm8t1.cloudfront.net/article/images/740x500/dimg/graeme_muller_32017_1.jpg">
          

          
          <figcaption><p>Graeme Muller (NZTech)</p></figcaption>
           
          
          
          <span>
            
            <span>Credit:  Supplied </span>
            
            
          </span>
          

        </figure>
        

        
      </div>
      
      
      



      

      













	
<p>Ninety six per cent of New Zealand IT employers expect the skills shortage to impact their operations in 2023, according to the latest Tech Alliance digital skills report.&nbsp;</p><p>Seventy-nine per cent of the 159 organisations that responded to the third <em>New Zealand Digital Skills Survey&nbsp;</em>reported they faced recruitment challenges, while many employers identified the challenge of finding skilled IT workers as an ongoing concern.</p><p>The ongoing demand for workers with advanced digital skills meant that ICT and other digital roles remain some of the highest paid jobs in Aotearoa.&nbsp;&nbsp;</p>

<p>However, despite the demand, the national median for tech salaries remains <a href="https://www.reseller.co.nz/article/689591/new-zealand-facing-critical-digital-skills-crisis/" target="_blank">unchanged since 2021</a> while the median salary for digital specific roles have increased by just two percent.&nbsp;</p><p>Job mobility remains high in ICT, with&nbsp;59 per cent of tech workers reporting they were considering a move to a new workplace in 2023. This was slightly down from the 64 per cent considering a move at the time of the 2020 report.&nbsp;&nbsp;</p><p>“As we strive to harness the opportunities presented by the digital revolution, it is crucial we equip our workforce with the necessary skills,” NZTech CEO Graeme Muller said.&nbsp;</p><p>Plenty of activity aimed at addressing the digital skills gap was observed through the research with numerous initiatives were under way, Muller said. However, despite these the statistics showed little improvement.&nbsp;&nbsp;</p><p>There had also been a significant decline in learners engaging in digital technology studies, which flowed into low numbers graduating.&nbsp;</p><p>“It is now abundantly clear that systemic change is required – a transformation that encompasses the collective efforts of industry, government and the education sector," Muller said.&nbsp;</p><p>The challenge demanded an approach where resources could be pooled and knowledge shared to develop innovative solutions. Collaboration with government and the education sector was crucial.</p><p>Unsurprisingly given the shortages, tech employees remained highly confident in the job market, with 72 per cent saying they expected finding a job in their specialty to be as easy or easier than last year a figure that has doubled since 2021.&nbsp;</p><p>"The specialised nature of many new roles requires employees with workplace experience and advanced skills in specific areas," the report says.&nbsp;&nbsp;</p><p>Immigration had been the primary source of this specialised talent, filling a significant portion of all new digital technology jobs created.&nbsp;&nbsp;</p><p>"While it is important to grow the local pipeline, immigration will continue to be needed to ensure the right mix of advanced digital skills in the workforce," the report said.</p><p>The<em>&nbsp;</em>survey was conducted in January and February 2023.&nbsp;</p>




      





<div id="article_bottom_promo">
  
  
  <br><center>
<a href="https://www.reseller.co.nz/user/register/?destination=/user/mailing_list/" target="_blank"><img src="https://demo.idg.com.au/arn/ARNSurvey.png" width="280"></a>
</center>
  
</div>




      

        
      



















      


      
      

      
      <div>
  <h3>Join the  newsletter!</h3>
  <!-- <small>The premier provider of daily news to the IT channel, covering business, technology, products, and services.</small> -->

  

  <p>Error: Please check your email address.</p>
</div>

      


        
      
      <p>
        Tags <a href="https://www.reseller.co.nz/tag/skills-shortage/">skills shortage</a><a href="https://www.reseller.co.nz/tag/jobs/">jobs</a><a href="https://www.reseller.co.nz/tag/employment/">employment</a><a href="https://www.reseller.co.nz/tag/skills/">skills</a><a href="https://www.reseller.co.nz/tag/job-market/">job market</a><a href="https://www.reseller.co.nz/tag/nztech/">NZTech</a><a href="https://www.reseller.co.nz/tag/tech-alliance/">Tech Alliance</a>
      </p>
      
      
      
      



      




      </div><!-- body -->

    </article>


    



    

    


    
    
      
    
    


    
    





    

    
    <!-- art-wrap -->




</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Thoughts on Elixir, Phoenix and LiveView after 18 months of commercial use (280 pts)]]></title>
            <link>https://korban.net/posts/2023-08-11-thoughts-on-elixir-phoenix-liveview/</link>
            <guid>37114457</guid>
            <pubDate>Sun, 13 Aug 2023 21:03:53 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://korban.net/posts/2023-08-11-thoughts-on-elixir-phoenix-liveview/">https://korban.net/posts/2023-08-11-thoughts-on-elixir-phoenix-liveview/</a>, See on <a href="https://news.ycombinator.com/item?id=37114457">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>I’ve been leading a team developing an application using Elixir, Phoenix and LiveView for the last 18 months and accumulated some thoughts on the stack. For the most part, it has been a very pleasant experience. </p>
<p>Compared to my initial evaluation of Elixir that I’d done prior to diving in in earnest, it exceeded my expectations in terms of availability of tools &amp; packages and the overall quality of dev experience. </p>
<p>Prior to Elixir, I was working primarily with Elm which probably colours my experience, but I have used a bunch of languages and have switched from static to dynamic types and back several times. </p>

<p>First of all, I find Elixir quite enjoyable: </p>
<ul>
<li>The combination of FP features and BEAM features is really good. </li>
<li>The concurrency model is really intuitive and powerful. </li>
<li>There is just enough FP to satisfy everyday needs, provided in a way that makes it easy for non-FP people to get comfortable quickly. </li>
<li>There is no ceremony involved with effects, which is sometimes very convenient and sometimes very lax (much like dynamic typing).</li>
<li>The language isn’t overly bloated and is very stable at this point. </li>
<li>Pattern matching is quite a powerful feature and becomes second nature very quickly (although it can be overused for extracting nested values).</li>
<li>Pipelines are of course very handy and used extensively. Coming from Elm, I found the pipeline operator weird in that it literally shunts the first argument into the function argument list instead of being a proper operator that you get with curried functions (it confuses code completion too!), but on the plus side its limited nature prevents the excesses of point-free style of programming. </li>
<li>Surprisingly, I don’t miss currying as much as I expected. I was initially quite wary of this. </li>
<li>The deployment story is quite straightforward these days, which is particularly helpful in cloud environments. </li>
</ul>
<p>As the pipeline example illustrates, Elixir seems to me to be one of those projects where instead of chasing the perfect design of every feature it’s OK to put in place pragmatic solutions even if they have warts. Some things are messy as a result but that’s an acceptable compromise: </p>
<ul>
<li>Parts of the standard library are clunky; I’m thinking about the combination of functions for working with data structures in<code>Enum</code>/<code>Map</code>/<code>List</code>/<code>Keyword</code> and <code>Kernel</code>, or things like <code>MapSet</code> instead of <code>Set</code>, or charlists (needed for compatibility with Erlang), or inconsistent naming (<code>is_map</code> vs <code>empty?</code>).</li>
<li>There are things that are unnecessary, such as <code>unless</code> or the ability to define some custom operators, or all the different ways to access values in maps &amp; structs that seem to be a bit confusing to newcomers.</li>
<li>Similarly, I don’t like comprehensions as everything they do can be achieved with functions, and they are not composable. </li>
<li>I can see why keyword lists exist but I don’t like that they overlap in functionality with maps. It’s another pragmatic solution that won over finding a more elegant way to support named arguments. </li>
<li>Grouped aliases/imports/requires are a mis-feature in my view. They save a few characters when typing but they complicate searching for module uses and refactoring (unless all your unqualified module names happen to be unique). Languages should really optimise for reading code! Luckily there is a Credo check that disallows grouping.</li>
<li>Having different syntax for calling anonymous functions (<code>f.()</code>) is weird for an FP language.</li>
<li>Outside the language itself, ExUnit is pretty good but setup for tests accessing a DB is finicky, and I wish there was a way to warn on tests without asserts (we’ve had a production bug slip through due to an accidentally removed assert). </li>
</ul>
<h2 id="phoenix">Phoenix</h2>
<p>My experience with Phoenix has been almost entirely with a LiveView lens, so I don’t have that much to say about Phoenix itself. It seems to be a reasonable MVC framework. The very welcome addition of compile-time checked verified routes in Phoenix 1.7 fixed one of  my complaints about dealing with routes. </p>
<p>Another thing I don’t like is the default separation of HEEX templates from the rest of the view code. For any non-trivial views, this approach doesn’t scale and you end up with HEEX in your view code anyway, so why not keep all of the template together with the code from the beginning and benefit from improved locality?  </p>
<p>I’m still somewhat unsure about the purpose and value of contexts. The idea is that contexts somehow provide a nice API for related functionality, sitting in front of a bunch of other modules with the actual implementation and hiding details of things like DB and external API access. There is even a longish guide about the use of contexts, but in the end it’s still unclear where and how to draw the context boundaries in practice. </p>
<p>For example, if I have to deal with users who have accounts which belong to companies and I want a function which gets me the stats on active accounts by company combined with each user’s last login time, should that function live in the <code>Users</code>, <code>Companies</code> or <code>Accounts</code> context? Should I even have these three contexts, or should I just have one <code>Accounts</code> context? It turns out that this isn’t easy to answer. </p>
<p>My approach to date has been to use contexts as the effectful infrastructure layer on top of the functional core. I also try to avoid multiplying contexts unnecessarily. The idea is that there shouldn’t be one context per model but only one for each of the “central” entities in the system, so for example in the oft-used blog implementation, I might have a <code>Users</code> context which deals both with users and their accounts, and an <code>Articles</code> context which deals both with posts and their comments (eg if we’re only interested in getting comments for posts and not for specific users). </p>
<h2 id="liveview">LiveView</h2>
<p>What’s great: </p>
<ul>
<li>Having a single code base for backend and frontend is great in terms of simplifying the mental model and also allowing people to work on “vertical” slices of functionality, which I think is far more effective than trying to break work by layers such as frontend &amp; backend. </li>
<li>Purely functional management of state in <code>assigns</code> (putting live components aside) is also a great simplification (and is a comfortable transition from Elm). </li>
<li>Being able to write UI interaction tests for live views directly in ExUnit, without relying on complex tools like Selenium (or whatever the latest alternative is) has been very useful. Of course, functional components being pure functions is also a boon for testing. </li>
</ul>
<p>What’s not so great: </p>
<ul>
<li>It’s unfortunate how the authentication logic (and any kind of state-based restrictions really) needs to be duplicated in an <code>on_mount</code> hook in addition to being defined in plug pipelines in the router. Relatedly, <code>live_session</code> feels like a hack that is required to enforce running through the Plug pipeline in certain situations. It feels like LiveViews actually need their own equivalent of Plug pipelines.</li>
<li>Storing client data is not particularly straightforward because websockets naturally limit the opportunities to store stuff in cookies, and using <code>localStorage</code> is also not quite trivial. </li>
<li>Live components are best avoided if possible, in my view. The documentation is quite bullish on them, presenting them as just another thing alongside functional components, but I think they should be more of a last resort, with functional components used whenever possible. This is because live components immediately raise questions about what is the source of truth for the state (view or component), they are harder to test given that they are stateful, and they have some warts like inconsistency in how messages have to be passed depending on whether the live component is a child of a view or another live component (although I know this is on the roadmap to be fixed). </li>
<li>We occasionally see weird bugs that look like events being routed to the wrong place or hiccups in reconnection logic. I guess we knew what we were getting into, seeing as LiveView hasn’t reached 1.0 yet. </li>
<li>I’m not a fan of the ad-hoc DSL that’s emerging within HTML attributes in HEEX templates (<code>:if</code> etc.). It means there are two or three different ways to express logic in templates, and it’s yet another thing to learn. </li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>Both Elixir and Phoenix are very solid tools although of course they have their share of things that I don’t agree with. LiveView is an extremely impressive addition to Phoenix that melds backend and frontend, and is just on the cusp of becoming a mature option for more complex applications. </p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Babylon 5 Is a Perfect, Terrible Series (137 pts)]]></title>
            <link>https://www.tor.com/2023/08/09/babylon-5-is-a-perfect-terrible-series/</link>
            <guid>37114420</guid>
            <pubDate>Sun, 13 Aug 2023 21:00:40 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.tor.com/2023/08/09/babylon-5-is-a-perfect-terrible-series/">https://www.tor.com/2023/08/09/babylon-5-is-a-perfect-terrible-series/</a>, See on <a href="https://news.ycombinator.com/item?id=37114420">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>Image: Warner Bros.</p><div>
<p>Babylon 5 is one of the best science fiction shows ever made. It also kind of sucks, and that’s okay.</p>
<p>“I hope the future will be like <em>Star Trek</em>, but I’m afraid it’s going to be like <em>Babylon 5</em>.”</p>
<p>This is how a friend convinced me to watch <em>Babylon 5</em> close to a decade ago, and it’s a statement that gets both more and less prescient by the day. <em>Babylon 5</em> depicts a future rife with stratified poverty, union busting corporations, xenophobic hate crimes, colonial legacies blossoming into new conflicts, and the tide of fascism rising right in our own backyard. In J. Michael Straczynski’s imagined future, the smug neoliberal western hegemony that arose from the ashes of the Cold War really <em>was</em> “the end of history”, and the results are simultaneously anodyne and horrific. Psychic powers are real, but those born with them are enslaved by the state. There are ancient terrors lurking on the edges of the map—civilizations who long ago ascended but refuse to let the children of the galaxy play unattended in the sandbox. People who live on the titular station still have to pay for their freaking healthcare in the year <em>2258</em>.</p>

<p>And, of course, <span data-footnote="The oft mentioned but never elaborated upon destruction of San Diego always struck me as a hilarious bit of world building. Why San Diego? What’s in San Diego? Were they nuking Comic-con????" data-footnote-index="1">let us not forget what happened to San Diego</span>.</p>
<div id="attachment_459393"><p><img aria-describedby="caption-attachment-459393" decoding="async" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/001.png?resize=559%2C311&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="559" height="311" data-recalc-dims="1"></p><p id="caption-attachment-459393">Pour one out. (Screenshot: Warner Bros.)</p></div>
<p>Here’s what <em>Babylon 5</em> also has: a complete, pre-planned, serialized story arc that is arguably one of the first successful examples of such on American television. A bisexual second-in-command and a nod to legalized gay marriage (in 1994!). An episode where “King Arthur” visits the station and knights an alien ambassador while drunk and actually this all has deep and ultimately painful relevance to the show’s immediate backstory, I <em>promise</em>. There’s a collective of time-travelling alien janitors all named Zathras who inexplicably become the most important hinge on which the stable time loop that ties together the first three seasons hangs. The heroes of <em>Babylon 5</em> quite literally tell the universe’s most powerful threat to “get the hell out of their galaxy” eight episodes into the penultimate season and then spend the rest of the series mopping up civil wars, succession debates and personal crises. Yeah, that’s nearly two whole seasons the show keeps going without the Big Bad and most of it is <em>very, very good</em> (some of it is <em>very, very not</em>).</p>
<p><em>Babylon 5</em> is both exactly as wild as it sounds, and utterly underwhelming in terms of execution versus expectation. Because, honestly, a modern show with a <em>Game of Thrones</em> level budget would have a difficult time living up to the vision B5 presents in its five-year-arc, which attempts to suggest a history extending a million years in either direction; a great hand reaching out of the stars… and then doing absolutely nothing else. That <em>Babylon 5</em> manages to grant us even a sliver of of that vision—like peeking through a crack in the door—is mind-blowing when you really examine <span data-footnote="For example, the unstable ancillary cast that saw Straczynski playing musical chairs with narrative roles behind the scenes for over half the series, including the departure of the show’s leading man at the end of Season 1. And did I mention Warner Bros. losing virtually all of B5’s effects shots? Making a Hi-Def—or even normal def—version of the show a pipe dream." data-footnote-index="2">all the things the show had going against it</span> .</p>
<p>—which is kind of the critical equivalent of giving the show a gold star, or a participation trophy, isn’t it? This show won two Hugos once upon a time, but the legacy it has today tends to buzz around in the form of its “firsts” and the “in spite ofs”. <em>Nothing</em> else was doing serialization like this in the ’90s! Oh, it got cancelled, then un-cancelled! They never had the budget to do what they wanted! But… but! But, but, but!</p>
<div id="attachment_459394"><p><img aria-describedby="caption-attachment-459394" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/002.png?resize=560%2C351&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="560" height="351" data-recalc-dims="1"></p><p id="caption-attachment-459394">Hugo winning dialogue. (Screenshot: Warner Bros.)</p></div>
<p>So here’s the question I want to ask—<em>is </em>the show actually worth it, beyond the novelty of it simply being what it is? Because so often <em>Babylon 5</em> is recommended in terms of those novelties, a piece of art that only justifies its existence in a self referential, metatextual sense because of its place in history. But aside from all that, is it really… <em>any good</em>?</p>
<p>I mean, obviously <em>I</em> think it is. It’s one of my favourite shows, and I’ve been known to be somewhat evangelical about it. I’ve marathoned it with friends and family members no less than five times in the nine years since I first watched it. I’ve witnessed more than one person cry during the series finale. My mother balefully admitted to me in a horrid whisper that she thought it was better than <em>Star Trek</em>. That it’s<em> worth it </em>seems self evident to me.</p>
<p>However, B5 is not a <em>straightforward</em> recommendation. There are many things about the show that are <em>bad</em>. And not just “cringey” or “cheap”, but legitimately, objectively awful or misjudged. The thing is, I don’t think that these flaws particularly detract from Babylon 5’s <em>goodness</em>. In fact I think they enhance it. They are thematically cogent and cohesive with what’s good about it, and I think that it would lose something in translation if that Big Budget, technically “perfect” modern adaptation everyone is dreaming about actually happened.</p>
<p>Don’t believe me? Well, consider <em>Babylon 5</em>’s cast: an eclectic mix of outstanding character actors, career genre gutter dwellers, and true amateurs, many of whom grew into their roles in various ways. Can you really imagine any of these characters being recast? It’s not controversial to sing the praises of the more colourful members of the dramatis personae, of course; Andreas Katsulas and Peter Jurasik’s lightning-in-a-bottle chemistry as adversarial Ambassadors Londo and G’kar is legendary. Mira Furlan brings both her effortlessly luminous demeanour and sobering real-world experience with war, to the destiny-obsessed and destiny-<em>defying</em> Delenn in a performance that is as effervescent as it is complete. Claudia Christian might be the only one who loves Susan Ivanova more than we do, and <em>everyone </em>adores Captain Sheridan. Well, a lot of fans these days actually hate Sheridan, who commits the twin sins of being both terribly earnest and also being right most of the time, but you can’t deny that Bruce Boxleitner bleeds sunshine out both his ears.</p>
<div id="attachment_459395"><p><img aria-describedby="caption-attachment-459395" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/003.png?resize=560%2C355&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="560" height="355" data-recalc-dims="1"></p><p id="caption-attachment-459395">The blocking and body language here is so good I bet you could make some pretty accurate guesses about what’s going on between these two characters even if you’ve never seen the show. (Screenshot: Warner Bros.)</p></div>
<p>It doesn’t stop there: No one forgets the first time they meet the slimy, self-righteous Psi-Cop Alfred Bester. The Ambassadorial Aides are irreplaceable [even Na’toth (<em>especially </em>Na’toth [the joke here is that she was replaced; it wasn’t the same])]. Richard Briggs brings an understated naturalism to the ship’s head medical officer Doctor Franklin that makes him carefully invisible until his demons start to leak out. Jason Carter? Who even is that guy even? I have no idea, but he was so pitch perfect as the charmingly annoying and quixotic Ranger Marcus Cole that for the longest time I thought his British accent was fake. There’s <em>layers</em>.</p>
<p>For example: Jerry Doyle—who played the station’s wise-cracking and entertainingly damaged security chief, Michael Garibaldi—had a notably short career as an actor, cushioned on either side by stints as a Wall Street trader and a right wing radio host. This is the kind of extra-canonical knowledge that would usually ruin a character for me but, y’know, I don’t like Garibaldi because I agree with him politically; I mean—he’s a <em>cop</em>. I like him because he feels real, and he feels real because Doyle was on, some level, playing himself. You really can’t say there’s a single actor in the main cast who didn’t truly and thoroughly make the role <em>their own</em>. In the same way your high school’s production of <em>Les Miserables</em> might create a stronger visceral memory of the barricade scenes than Colm Wilkinson’s flawless recitation of ‘<em>Bring Him Home</em>’ in the 10th Anniversary Concert, it’s the imperfections that make this stagey, un-subtle, occasionally overwrought Space Opera seem <em>authentic</em>.</p>
<div id="attachment_459396"><p><img aria-describedby="caption-attachment-459396" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/004.png?resize=560%2C355&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="560" height="355" data-recalc-dims="1"></p><p id="caption-attachment-459396">This episode is brave enough to show alien genitalia on screen. A landmark milestone that Star Trek has yet to match. (Screenshot: Warner Bros.)</p></div>
<p>That authenticity is underscored by the world these characters inhabit. <em>Babylon 5</em>’s production design is inspired. Unique. <em>Gorgeous</em>—I will not budge on this point. I’ve seen the Season 1 Ambassador outfits in real life: they’re incredible works of sartorial art that the current DVD transfers simply do not do justice. Instead of streamlined and sterile, B5 is rich and gaudy and grandiose. It’s peak ’90s pop art aesthetic, and it’s bargain bin film noir: smokey and dark and grimy, shot through with bursts of neon and pastels. Lounge singers are backed by bands with Christmas lights glued to their guitars to make them look “space”-y. The drum-sets have glowing fluorescent rims. Every room on the station is crafted with a careful eye for detail that often gets lost in the sumptuous shadow-drenched lighting.</p>
<div id="attachment_459397"><p><img aria-describedby="caption-attachment-459397" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/005.png?resize=560%2C355&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="560" height="355" data-recalc-dims="1"></p><p id="caption-attachment-459397">Screenshot: Warner Bros.</p></div>
<p>Colours <em>mean </em>things in <em>Babylon 5</em>, they have thematic and character associations. Hazy reds dominate G’kar’s living quarters and illuminate his steps as he treads the path to prophethood. The dazzling, abstract shards of light in Minbari architecture express both their complex, sharp-edged fragility and the Platonic foundations of their religious beliefs. The peaks and valleys of Londo Mollari’s fall-from-and-rise-to-grace are marked by him literally changing his coat. That last one’s kind of gauche, I know, but so is the character, so it works.</p>
<p><img decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/006.png?resize=559%2C311&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="559" height="311" data-recalc-dims="1"></p>
<div id="attachment_459399"><p><img aria-describedby="caption-attachment-459399" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/007.png?resize=559%2C311&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="559" height="311" data-recalc-dims="1"></p><p id="caption-attachment-459399">In purple, he’s stunning. In navy blue, he’s a war criminal. (Screenshots: Warner Bros.)</p></div>
<p>The show does its best to break monotony in the endless parade of flat-lighting, shot-reverse-shot film-making popularly seen in network spec shows pre-dating the revolution brought about by later seasons of <em>The X-Files </em>and <em>Buffy</em>. Which isn’t to say the directing is <em>good</em>—it’s not. In fact, sometimes it’s laughably amateur, the kind of dumb camera tricks I’d have thought to do if someone handed me a Super 35 in high school and told me to to go nuts; dutch angles, weird zooms, filming a tense exchange from the most obscure angle in the room possible… but there’s a sort of artistic innocence and freedom that comes from that lack of expertise, from filming a show that doesn’t need to be as <em>safe</em> as the TNGs of the world. Often the camera is doing something really stupid, but it’s rarely resting on its laurels. The show is at its worst—visually and atmospherically I mean, but also in terms of writing, yeah—during its fifth season, when it had the financial security to “look good”. Something is lost in the transition. It loses the fervent passion and becomes workmanship-like. The lights have come on and chased the shadows away.</p>
<div id="attachment_459400"><p><img aria-describedby="caption-attachment-459400" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/008.png?resize=560%2C355&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="560" height="355" data-recalc-dims="1"></p><p id="caption-attachment-459400">Screenshot: Warner Bros.</p></div>
<p>Which only makes sense. The <em>literal</em> Shadows are gone from the galaxy too, and all the wars are over. The fifth season weaves so many narrative threads—some elegant, some nearly unwatchable—together that the plot hooks could set up a whole other five-season arc. Telepaths demanding the postponed freedoms they were promised, servants of the vanished Old Gods trying to fill the power vacuum left by their departed masters, beloved characters falling prey to destructive patterns and desires you would have hoped they’d overcome, while other members of the cast prosper in their roles as historical figures in the making. None of it is wrapped up.</p>
<p>Which is the point—that peace is difficult to maintain and there’s no magic fix. That when you kill your Gods you have to find something to replace them. That the needs of the truly oppressed are often treated as an after-thought by the bigwigs fighting the war, and their freedom will be used as a bargaining chip. For all these reasons, toppling oppressive regimes can have unexpected consequences that persist for years. For <em>decades</em>. The heroes have brought down the pillars of corruption with in such a way that the structure is still standing, and so they are forced to rebuild with the tools they already had.</p>
<p>But what if they had new tools? This is a possibility the show never even considers, and while there is a strong degree of intentionality to that point, Babylon 5 makes a big deal from the word go about the fact that we are supposedly witnessing the beginning of a “New Age”, so I think it’s valid to ask if perhaps the show could muster a bit more <em>vision </em>in its soft revolution.</p>
<div id="attachment_459401"><p><img aria-describedby="caption-attachment-459401" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/009.png?resize=560%2C355&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="560" height="355" data-recalc-dims="1"></p><p id="caption-attachment-459401">Screenshot: Warner Bros.</p></div>
<p>The literal text of the show suggests that the natural result of Capitalism’s decay is a re-emergence of Fascism, and Earth is already locked in what we can now recognize as a familiar pattern of increasing technocratic censorship paired with a loss of political efficacy on the part of normal people when the series begins. There’s an election going on in the first episode and the conservative party wins on the basis of what we are to assume is reactionary rhetoric. He’s not the guy our protagonists were supporting, but the whole thing is treated with a shrug. It eventually leads to a civil war. We’re immediately thrust into a cynical world wracked with bureaucratic inertia and callow appeasement. Our heroes emerge as heroic because they choose to <em>reject </em>apathy, normalization and compliance. Watching Earth inexorably slip further into violent authoritarianism is gripping stuff, brilliantly played as background noise for the first two and a half seasons and just as novel as it was in 1994 even when expressed in the silliest possible terms (Earth Gov is really out there literally quoting <em>Nineteen Eighty-Four </em>on its propaganda posters, huh?). But I’m not sure how cognizant the show <em>is</em> of its own political subtext, or, y’know, <em>text </em>in general.</p>
<p>Actually, the real problem is that I <em>am</em> sure.</p>
<p>What I’m saying is that <em>Babylon 5</em> is… a little politically <em>naive</em>. It succumbs powerfully to the temptation to paint its central characters as the Great Men (and Women!) of History. The solutions it offers are not much different from the problems it wants to solve. This—in some regards—is fine, because we know what happens a million years after the end of the series: Earth falls to fascism again. Human civilization is boiled down to its bones in a nuclear war. Eventually, we rebuild. Eventually we ascend and go beyond the furthest ring to hang out with Kosh and Sheridan, and it’s all very <em>Lord of the Rings</em> in a way that has you half-expecting Gandalf to pop out from behind a corner at points. Like I said: it’s ‘<em>The End of History’</em>, the zeitgeist of the 1990s taken to its logical conclusion. It’s a Liberal hellscape, and that’s <em>intentional </em>at least 50% of the time. It might be asking a lot for a major network show from the Clinton-era to offer a more cogent critique of the system everyone was happily drowning in at the time than this.</p>
<div id="attachment_459403"><p><img aria-describedby="caption-attachment-459403" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/010.png?resize=559%2C311&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="559" height="311" data-recalc-dims="1"></p><p id="caption-attachment-459403">This one’s a <em>Canticle for Leibowitz</em> pastiche, but the monks are all drawing fanart of the show’s main characters. (Screenshot: Warner Bros.)</p></div>
<p>The show can be crassly broad when broaching topics such as the AIDS epidemic, McCarthyism or Jehovah’s Witness medical restrictions, but it is simultaneously also very good at presenting situations in which no one is exactly right, or subverting its own subversions. <em>Babylon 5</em>’s parallel to the Cardassian/Bajoran conflict is initially problematized by presenting the formerly colonized Narn as a bloodthirsty, ambitious Regime in their own right, eager to make a mark on the galaxy and give back every inch of pain meted upon them by their former oppressors the Centauri. But it’s still the Narn Ambassador G’kar who learns to look towards the future, and the Centauri Ambassador Londo who helps his Empire re-brutalize the Narn twice as bad as has been done before out of a petty desire to feel important again. The wheel does not turn: the Centauri’s Imperial desire to see themselves as martyrs now under the boot of their victims is the poison tooth at the heart of the show’s many conflicts.</p>
<p>However, this all looks very First Year PoliSci even when compared to that contemporary non-blood relative <em>Star Trek:</em> <em>Deep Space Nine</em>, which stumbles all over the place in its own Star Trekky way, but was perhaps more astute in its attempts at social criticisms with episodes like ‘Past Tense’ and ‘Far Beyond the Stars’ as well as notably more mature in its engagement with colonial war crimes. But what Babylon 5 lacks in wisdom it gains back in boldness and specificity. The reason I can respect this narrative, as outdated and self-defeating it is at points, is because B5 is never afraid—or embarrassed, even when it should be—to state its positions and their proximity to the world outside its narrative confines.</p>
<p>This specificity of framing is in sharp contrast to Star Trek, which presents a vibrant playground in which to pose infinite number of philosophical moral quandaries but has shockingly little to say about the political architecture <em>of</em> that playground. We all <em>know</em> that the Federation is a glorious Fully Automated Luxury Space Communism paradise, right? I mean, it <em>is</em>—there’s nothing else it could be, but no writer has ever told us this directly. Starfleet Officers are awfully self righteous about a way of life that the franchise seems averse to actual spelling out in explicit terms. And if you don’t <em>say</em> something out loud, it turns out you don’t actually have a whole lot to say about it in the end after all. I find specificity more valuable the older I get. I can have a conversation with <em>Babylon 5</em>, all the parts I find illuminating as well as the ones I find odious. I can interact with its ideas about capitalism and extremism and religion and western interventionism without getting lost in the weeds of polite innuendo post-Cold War Star Trek often malingered in. (NOTE: I also love Star Trek)</p>
<p><em>Babylon 5</em>’s willingness to engage heavily with the material conditions of the world it depicts is the reason I get nerd snobby about classifying the show as a Space Opera, not! a science fiction show, despite its many fascinating hard sci-fi elements. B5 has some very obvious fantasy trappings—ripped directly from Tolkien here, quoting Arthurian legends there—but what makes it capital-F <em>Fantasy</em> in my opinion is its preoccupation with communicating story and theme through the evocation of historical verisimilitude in its world-building. <em>Babylon 5</em> uses its world to tell a mythic tale with contemporary tools rather than to posit questions about our future. With the philosophical and allegorical framework of the “primary world” removed, the story gets a whole lot easier to swallow.</p>
<p>This convincing world-building is achieved not just through the beauty of the production design, but also through its storytelling format which, for all B5’s pretensions of being a “novel for television”, is actually a hybrid of arc-focused serialization and stand-alone episodes. This was a format that American television was experimenting with a lot at the time, but what makes <em>Babylon 5</em> unique is that it does not separate the two narrative approaches into neat, tidy bins like, say, <em>The X-Files</em> did with its “mythology” and “monster-of-the-week” episodes, which can essentially be watched independently of each other to create two very different television shows starring the same characters. In <em>Babylon 5</em>, lore-heavy episodes often have frivolous B-plots and seemingly inane stand-alone adventures can affect the course of the series in unexpected ways.</p>
<div id="attachment_459405"><p><img aria-describedby="caption-attachment-459405" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/012.png?resize=560%2C355&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="560" height="355" data-recalc-dims="1"></p><p id="caption-attachment-459405">Screenshot: Warner Bros.</p></div>
<p>Each episode shows you a new facet of the world. It doesn’t hand you the puzzle pieces in order and it’s not shoving them at you aggressively, begging you to guess its secrets. Season 1 is a world-building venture more than it is a storytelling one, sketching the extremes of the B5 universe’s unique elements in surprising detail, from the depressingly mundane horrors of anti-alien hate crimes and union busting to the startling implication six episodes in that psychic powers can manifest in such a way that they will cause a human being to surpass their physical form and become something akin to a God. In this same episode, we learn that the galaxy is full of “bermuda triangles”—places where people have incomprehensible encounters and, sometimes, disappear.</p>
<p>“There are things in the Universe billions of years older than either of our races,” explains Ambassador G’kar—until this point, presented as a villain, soon proved to be a Cassandra. “They are vast, timeless, and if they are aware of us at all, it is as little more than ants and we have as much chance of communicating with them as an ant has with us.”</p>
<p>The most tense conflict we experience in the episode before this is watching the station’s Commander try to save face coming up with a demonstration of Earth’s religious traditions for a cultural exchange festival while melodramatically distracted by an old girlfriend. It’s this patient see-saw between present-day material conflicts and universe-shattering metaphysical overtones that allow the show’s various foreshadowing elements to pile up almost unnoticed, so that when the first major shake up happens at the end of Season 1 it feels like a genuine gut-punch.</p>
<div id="attachment_459406"><p><img aria-describedby="caption-attachment-459406" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/013.png?resize=559%2C311&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="559" height="311" data-recalc-dims="1"></p><p id="caption-attachment-459406">The show has <em>a lot</em> of gut-punches. (Screenshot: Warner Bros.)</p></div>
<p>Amid a tangle of diverging plotlines involving almost every major character on the show, the B5 staff discover signs of an assassination plot within Earth’s Government. They scramble to decode where this evidence leads in a race against the clock that they ultimately lose—by a shockingly wide margin. By the time anyone found indication of foul-play, it was already too late to stop the the gears from turning. <em>“</em>The avalanche has begun,” warns the enigmatic Ambassador Kosh, representative of a species so ancient and advanced that he possesses no corporeal form, “it’s too late for the pebbles to vote”<em>. </em>He’s talking about bigger, older things than the political machinations of Earth-bound xenophobes, but the characters aren’t far enough away from the frame to see the entire picture yet. Earth welcomes the New Year with a sinister change in regime and the protagonists are left empty handed, disbelieved, and alone in the night.</p>
<p>At the time, this episode was shocking because it broke the rules set up by <em>Star Trek: The Next Generation</em>, a show that JMS was actively and obviously reacting against. In the 1990s, heroes didn’t fail to the extreme degree that <em>Babylon 5</em>’s protagonists do in that first season finale. The twist remains shocking even now because it still breaks the rules set up by its own premise; an episodic story where the world doesn’t get reset at the end of each episode. And the show <em>continues </em>its mostly episodic pace afterwards, so that the next paradigm shift hits just as hard. And the next one, and the <em>next</em> one, until the entire galaxy is on the brink of collapse.</p>
<p>This structure is so effective that even the plot twists and status quo shifts which are poorly foreshadowed, or ill-explained, or <em>over-explained</em> feel natural and world-shaking because <em>Babylon 5</em>’s pace always gives you time to breathe, and the world is so believably <em>lived</em> in, that any crisis that strikes it feels immeasurably more impactful than damage wrought onto a world that we’re meant to understand changes from the get go. By the time the show starts hurtling along a set of <em>truly</em> serialized arcs in Season 4 there’s a feeling that anything could happen. It still feels fresh today, maybe even fresher than it did in the 1990s simply because very few people are making shows like this anymore. Modern serialized television asks you to be a voyeur to the chaos, to consume it as fast as possible, or to consume it as a communal project. You and your friends waiting for the next big bombshell and treating everything between like treading water. A show paced like <em>Babylon 5</em> asks you to come live in those in-between moments. It wants you to watch the chaos from inside the world and to stick with it during the long silences.</p>
<div id="attachment_459407"><p><img aria-describedby="caption-attachment-459407" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/014.png?resize=559%2C311&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="559" height="311" data-recalc-dims="1"></p><p id="caption-attachment-459407">Maybe it’s just because I grew up in the ’90s, but this blurry screenshot of objectively hideous neon interior design feels like home to me. (Screenshot: Warner Bros.)</p></div>
<p>And it is <em>very</em> easy to inhabit those silences. <em>Babylon 5</em> has a very particular kind of tonal variety that makes the world inviting—an appealing balance of drama and playfulness. A lot has been said about the show’s occasionally regrettable sense of humour, and there are certainly some epic clunkers in almost every script (the less said about a certain Season 3 episode that effectuates a kooky, sitcom-esque tone while discussing ethnic cleansing the better), but I find myself laughing along with Babylon 5 more often than not. A lot of the humour is character derived, and I love the characters. I really do—I love the contrast between their realistic flaws and depressing personal lives and the cheesy, stage-play poeticism of the dialogue. I know more about the lives of Babylon 5’s senior staff than I know about <em>any </em>Starfleet Officer. They’re all a mess of workaholism, addictions, failed relationships, PTSD, broken paternal bonds—except for shining paragon of All-American Gee Whiz’ism, John Sheridan, who is broken down piece by piece during a war that reveals him to be a ruthless, “means justify the ends”-style General. He grows a beard while being tortured by his own government and never shaves it off. No one’s arc is static. No character ends where they begin. Most characters shed their comfortable roles for new directions on a season by season basis. B5 is a show that flourishes upon rewatch, largely because it’s very satisfying to start over again with all these characters knowing that most of them end up so, so far away from where they begin, in both edifying and tragic ways.</p>
<p><em>Babylon 5</em> is a station full of weirdos and failures. It attracts alien ambassadors with lists of sins ten miles long, disgraced nobles that no one else wants, military officers desperate to either escape their demons or build their careers on their own terms, rejecting the path laid out for them by mentors and patriarchs. It’s the staging point of a successful rebellion, the nucleus of several catastrophically failed peace treaties. It bears witness to the extinction of an entire species and the destruction of the key to immortality. Some dark shit goes down in this show, yet the unflagging ’90s-style optimism and local-theater-esque presentation keeps it from dipping into the kind of “gritty” grim-ness that defined TV spec fiction in the post 9/11 era. And oh, don’t get me wrong. I am a big fan of grimdarkness. I don’t inherently reject it the way a lot of people (understandably) have in the last few years, but I <em>do </em>reject the idea that it’s <em>embarrassing</em> for fantasy to be, well… <em>fanciful</em>. <em>Babylon 5</em> is <em>shamelessly</em> fanciful.</p>
<div id="attachment_459408"><p><img aria-describedby="caption-attachment-459408" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/015.png?resize=559%2C311&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="559" height="311" data-recalc-dims="1"></p><p id="caption-attachment-459408">Here it is: King Arthur knighting a guy in a rubber alien mask. (Screenshot: Warner Bros.)</p></div>
<p>I’ve been very tongue in cheek about the quality of B5’s writing up until this point, but there are lines in this show that have stuck with me for years. I can quote many of them off the top of my head, and I bet every fan of the show can sing along at home:</p>
<blockquote><p>My shoes are too tight, and I’ve forgotten how to dance.</p></blockquote>
<p>* * *</p>
<blockquote><p>Understanding is a three edged sword: your side, their side, and the truth.</p></blockquote>
<p>* * *</p>
<blockquote><p>The wheel turns, does it not?</p></blockquote>
<p>* * *</p>
<blockquote><p>All life is transitory, a dream… if I don’t see you again here, I will see you, in a little while, in a place where no shadows fall.</p></blockquote>
<p>* * *</p>
<blockquote><p>It’s all a game—a paper fantasy of names and borders.</p></blockquote>
<p>* * *</p>
<blockquote><p>I have seen what power does, and I have seen what power costs. The one is never equal to the other.</p></blockquote>
<p>* * *</p>
<blockquote><p>I used to think it was awful that life was so unfair. Then I thought, wouldn’t it be much worse if life were fair, and all the terrible things that happen to us come because we actually deserve them?</p></blockquote>
<p>* * *</p>
<blockquote><p>There comes a time when you look into the mirror and you realize that what you see is all that you will ever be. Then you accept it or you kill yourself or you stop looking into mirrors.</p></blockquote>
<p>* * *</p>
<blockquote><p>Who are you?</p>
<p>What do you want?</p>
<p>Do you have anything worth living for?</p></blockquote>
<p>* * *</p>
<blockquote><p>Will you lay down your life—not for millions, not for glory, not for fame—but for one person, in the dark, where no one will ever know or see?</p></blockquote>
<div id="attachment_459409"><p><img aria-describedby="caption-attachment-459409" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/016.png?resize=559%2C311&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="559" height="311" data-recalc-dims="1"></p><p id="caption-attachment-459409">Will you? (Screenshot: Warner Bros.)</p></div>
<p>I’ve talked a lot about politics in this essay, but no piece of art can truly endure solely on what it <em>means</em> in the substantive, theoretical sense. It’s exhilarating to read or watch or play something that was truly prophetic, however those stories are far and few between. Storytellers can’t predict the future, they can only survive it. The further away from the original context of a work we get, the more its ephemeral aspects begin to matter over its literal ones. And the aspect that leaves the deepest impression in the sands of time is always how something <em>feels</em>.</p>
<p><em>Babylon 5</em> remains emotionally evocative in all the places it has become perhaps thematically irrelevant: in the jagged edges of the sets, the stumbling waltz of its plot threads, the lush indulgence of its dialogue, the patchwork aspects held together by glue and determination, as imperfect and brimming with colourful quirks as its most beloved characters. My favourite scenes in the show are the little things: Ivanova’s illegal coffee-plant, Londo and Vir singing Centauri opera together in the station’s hallways, Marcus regailing a beleaguered Doctor Franklin with his nerdy headcanons about which characters in <em>Le Morte d’Arthur</em> he thinks the B5 crew are most like, Delenn and Sheridan telling each other quiet, ordinary anecdotes about their very different childhoods. Babylon 5 is a story that is truly greater than the sum of its parts. Modern plot-driven shows tend to do one thing, and do it <em>very</em> well. Babylon 5 does a little bit of everything: mostly okay, sometimes horribly, and occasionally with an earnest beauty that is almost transcendent.</p>
<p>I think the value of <em>Babylon 5</em>, and indeed its entire thesis statement, is best summed by Ambassador Delenn’s sage invocation of Carl Sagan. She says:</p>
<blockquote><p>“I will tell you a great secret… the molecules of your body are the same molecules that make up this station , and the nebula outside, that burn inside the stars themselves. We are starstuff. We are the universe made manifest, trying to figure itself out.”</p></blockquote>
<p>Everything is interconnected, the ugly and the beautiful, our triumphs and our mistakes. Our best work and our worst. It’s only when we embrace both that we can leave behind something worth remembering.</p>
<div id="attachment_459410"><p><img aria-describedby="caption-attachment-459410" decoding="async" loading="lazy" src="https://i0.wp.com/www.tor.com/wp-content/uploads/2019/05/017.png?resize=559%2C311&amp;type=vertical&amp;quality=100&amp;ssl=1" alt="" width="559" height="311" data-recalc-dims="1"></p><p id="caption-attachment-459410">Screenshot: Warner Bros.</p></div>
<blockquote><p>I believe that when we leave a place, part of it goes with us and part of us remains […] when it is quiet, just listen […] you will hear the echoes of all our conversations, every thought and word we’ve exchanged. Long after we are gone our voices will linger in these walls…</p></blockquote>
<p>Originally published June 2019.</p>
<p>Jennifer Giesbrecht is a native of Halifax, Nova Scotia where she earned an undergraduate degree in History, spent her formative years as a professional street performer, and developed a deep and reverent respect for the ocean. She currently works as a game writer for What Pumpkin Studios. In 2013 she attended the Clarion West Writers Workshop. Her work has appeared in Nightmare Magazine, XIII: ‘Stories of Resurrection’, Apex, and Imaginarium: The Best of Canadian Speculative Fiction. She lives in a quaint, historic neighbourhood with two of her best friends and five cats. <a href="https://us.macmillan.com/books/9781250225689"><em>The Monster of Elendhaven</em></a> is her first book.</p>
 <div id="entry-content__citation-popup">
<h4><i></i> <span>citation</span></h4>
</div>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: I wrote a RDBMS (SQLite clone) from scratch in pure Python (341 pts)]]></title>
            <link>https://github.com/spandanb/learndb-py</link>
            <guid>37114141</guid>
            <pubDate>Sun, 13 Aug 2023 20:32:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/spandanb/learndb-py">https://github.com/spandanb/learndb-py</a>, See on <a href="https://news.ycombinator.com/item?id=37114141">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" dir="auto">LearnDB</h2>
<blockquote>
<p dir="auto">What I Cannot Create, I Do Not Understand -Richard Feynman</p>
</blockquote>
<p dir="auto">In the spirit of Feynman's immortal words, the goal of this project is to better understand the internals of databases by
implementing a relational database management system (RDBMS) (sqlite clone) from scratch.</p>
<p dir="auto">This project was motivated by a desire to: 1) understand databases more deeply and 2) work on a fun project. These dual
goals led to a:</p>
<ul dir="auto">
<li>relatively simple code base</li>
<li>relatively complete RDBMS implementation</li>
<li>written in pure python
<ul dir="auto">
<li>No build step</li>
</ul>
</li>
<li>zero configuration
<ul dir="auto">
<li>configuration can be overriden</li>
</ul>
</li>
</ul>
<p dir="auto">This makes the learndb codebase great for tinkering with. But the product has some key limitations that means it
shouldn't be used as an actual storage solution.</p>
<h3 tabindex="-1" dir="auto">Features</h3>
<p dir="auto">Learndb supports the following:</p>
<ul dir="auto">
<li>it has a rich sql (learndb-sql) with support for <code>select, from, where, group by, having, limit, order by</code></li>
<li>custom lexer and parser built using <a href="https://github.com/lark-parser/lark"><code>lark</code></a></li>
<li>at a high-level, there is an engine that can accept some SQL statements. These statements expresses operations on a
database (a collection of tables which contain data)</li>
<li>allows users/agents to connect to RDBMS in multiple ways:
<ul dir="auto">
<li>REPL</li>
<li>importing python module</li>
<li>passing a file of commands to the engine</li>
</ul>
</li>
<li>on-disk btree implementation as backing data structure</li>
</ul>
<h3 tabindex="-1" dir="auto">Limitations</h3>
<ul dir="auto">
<li>Very simplified <sup><a href="#user-content-fn-1-d48de89051581155cfb113b38fb4a1f2" id="user-content-fnref-1-d48de89051581155cfb113b38fb4a1f2" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup> implementation of floating point number arithmetic, e.g. compared to
<a href="https://en.wikipedia.org/wiki/IEEE_754" rel="nofollow">IEEE754</a>).</li>
<li>No support for common utility features, like wildcard column expansion, e.g. <code>select * ...</code></li>
<li>More <a href="https://github.com/spandanb/learndb-py/blob/master/docs/tutorial.md">limitations</a></li>
</ul>
<h2 tabindex="-1" dir="auto">Getting Started: Tinkering and Beyond</h2>
<ul dir="auto">
<li>To get started with <code>learndb</code> first start with <a href="https://github.com/spandanb/learndb-py/blob/master/docs/tutorial.md"><code>tutorial.md</code></a>.</li>
<li>Then to understand the system at a deeper technical level read <a href="https://github.com/spandanb/learndb-py/blob/master/docs/reference.md"><code>reference.md</code></a>.
This is essentially a complete reference manual directed at a user of the system. This outlines the operations and
capabilities of the system. It also describes what is (un)supported and undefined behavior.</li>
<li>`Architecture.md`` - this provides a component level breakdown of the repo and the system</li>
</ul>
<h2 tabindex="-1" dir="auto">Hacking</h2>
<h3 tabindex="-1" dir="auto">Install</h3>
<ul dir="auto">
<li>System requirements
<ul dir="auto">
<li>requires a linux/macos system, since it uses <code>fcntl</code> to get exclusive read access on database file</li>
<li>python &gt;= 3.9</li>
</ul>
</li>
<li>To install for development, i.e. src can be edited from without having to reinstall:
<ul dir="auto">
<li><code>cd &lt;repo_root&gt;</code></li>
<li>create virtualenv: <code>python3 -m venv venv </code></li>
<li>activate venv: <code>source venv/bin/activate</code></li>
<li>install requirements: <code>python -m pip install -r requirements.txt</code></li>
<li>install <code>Learndb</code> in edit mode: <code>python3 -m pip install -e .</code></li>
</ul>
</li>
</ul>
<h3 tabindex="-1" dir="auto">Run REPL</h3>
<div data-snippet-clipboard-copy-content="source venv/bin/activate
python run_learndb.py repl"><pre><code>source venv/bin/activate
python run_learndb.py repl
</code></pre></div>
<h3 tabindex="-1" dir="auto">Run Tests</h3>
<ul dir="auto">
<li>
<p dir="auto">Run all tests:</p>
</li>
<li>
<p dir="auto"><code>python -m pytest tests/*.py</code></p>
</li>
<li>
<p dir="auto">Run btree tests:
-<code>python -m pytest -s tests/btree_tests.py</code>  # stdout</p>
</li>
<li>
<p dir="auto"><code>python -m pytest tests/btree_tests.py</code>  # suppressed out</p>
</li>
<li>
<p dir="auto">Run end-to-end tests:
<code>python -m pytest -s  tests/e2e_tests.py</code></p>
</li>
<li>
<p dir="auto">Run end-to-end tests (employees):
<code>python -m pytest -s  tests/e2e_tests_employees.py</code></p>
</li>
</ul>
<p dir="auto"><code>python -m pytest -s  tests/e2e_tests_employees.py -k test_equality_select</code></p>
<ul dir="auto">
<li>
<p dir="auto">Run serde tests:
<code>... serde_tests.py</code></p>
</li>
<li>
<p dir="auto">Run language parser tests:
<code>... lang_tests.py</code></p>
</li>
<li>
<p dir="auto">Run specific test:
<code>python -m pytest tests.py -k test_name</code></p>
</li>
<li>
<p dir="auto">Clear pytest cache
<code>python -m pytest --cache-clear</code></p>
</li>
</ul>
<h2 tabindex="-1" dir="auto">References consulted</h2>
<ul dir="auto">
<li>I started this project by following cstack's awesome <a href="https://cstack.github.io/db_tutorial/" rel="nofollow">tutorial</a></li>
<li>Later I was primarily referencing: <a href="https://books.google.com/books?id=9Z6IQQnX1JEC&amp;source=gbs_similarbooks" rel="nofollow">SQLite Database System: Design and Implementation (1st ed)</a></li>
<li>Sqlite file format: <a href="https://www.sqlite.org/fileformat2.html" rel="nofollow">docs</a></li>
<li>Postgres for how certain SQL statements are implemented and how their <a href="https://www.postgresql.org/docs/11/index.html" rel="nofollow">documentation</a> is organized</li>
</ul>
<h2 tabindex="-1" dir="auto">Project Management</h2>
<ul dir="auto">
<li>immanent work/issues are tracked in <code>tasks.md</code></li>
<li>long-term ideas are tracked in <code>docs/future-work.md</code></li>
</ul>
<section data-footnotes="">
<ol dir="auto">
<li id="user-content-fn-1-d48de89051581155cfb113b38fb4a1f2">
<p dir="auto">When evaluating the difference between two floats, e.g. <code>3.2 &gt; 4.2</code>, I consider the condition True if the
difference between the two is some fixed delta. The accepted epsilon should scale with the magnitude of the number <a href="#user-content-fnref-1-d48de89051581155cfb113b38fb4a1f2" data-footnote-backref="" aria-label="Back to reference 1"><g-emoji alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">↩</g-emoji></a></p>
</li>
</ol>
</section>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mexico’s underground vanilla economy (115 pts)]]></title>
            <link>https://thehustle.co/why-the-worlds-best-vanilla-is-so-easy-to-steal/</link>
            <guid>37114109</guid>
            <pubDate>Sun, 13 Aug 2023 20:29:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://thehustle.co/why-the-worlds-best-vanilla-is-so-easy-to-steal/">https://thehustle.co/why-the-worlds-best-vanilla-is-so-easy-to-steal/</a>, See on <a href="https://news.ycombinator.com/item?id=37114109">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p>Riding in the back seat of a crew-cab pickup truck, 67-year-old vanilla farmer <strong>José Cortéz</strong> peers down a narrow dirt road amid jungle-covered mountains in eastern Mexico, one of the most corrupt regions of North America.</p>
<p>His vanilla farm, a 15-acre expanse just outside Papantla, Veracruz, is up ahead. He calls it his “edible forest.”&nbsp;</p>
<p>Papantla is the <strong>birthplace of vanilla</strong>, and Cortéz is part of a small community of farmers from the Totonaco indigenous group who have been cultivating and harvesting the majority of Mexico’s vanilla beans for hundreds of years — beans that some regard as the greatest in the world.&nbsp;</p>
<p>“The finest vanilla, the product with the best flavor…comes from Mexico,” wrote the historian <strong>Henry Bruman</strong> in 1948.&nbsp;</p>
<p>But the work, already cumbersome because of the difficulty of growing vanilla, now comes with added stress. Cortéz, who usually carries a machete when he visits his farmland, worries about jaguars, pumas, coyotes, and a local bird called the <em>chachalaca</em> destroying his crop. And then there’s the biggest threat of all: <strong>crime</strong>.&nbsp;</p>
<p>Cortéz has stumbled across armed men walking through the woods on his land. Every year, he hears about thefts of other farmers’ crops. He never hears about vanilla thieves being caught and prosecuted.&nbsp;</p>
<p>The justice system in Veracruz can’t be relied on to investigate, punish, or deter criminals, nor has the government launched a major campaign to boost the vanilla industry to help the sector match the recent success of export crops like raspberries and avocados.&nbsp;</p>
<p>That means the remaining practitioners of one of Mexico’s oldest agricultural traditions must fend for themselves. On a recent visit, Cortéz told us his method for protecting his harvest.&nbsp;</p>
<p>“Always bring a shotgun,” he said.&nbsp;</p>

<p>Cortéz, who’s been farming for 35 years — continuing a family tradition that goes back generations — tends some <strong>10k plants</strong> here. That’s enough to produce <strong>440-660 pounds</strong> of green vanilla beans (the crop that gets processed into vanilla) every year.</p>
<div>
<h2>Enjoying this article?</h2>
<p>Get the Hustle’s 5-minute weekday roundup that keeps you hip to happenings in tech, business, and internet… things.</p>

<p>Delivered weekdays plus a bonus Sunday feature. Unsubscribe whenever.</p>
</div>
<figure><img decoding="async" src="https://lh5.googleusercontent.com/D7EDYXFeSi_-VKGXB8g1V8FQAVSpJAayxXd82yp3qlX7syQfhEMa-LpTroCpBz5Y54uS9oO1J5zb57_dYe45zSUMz4ZuXL8h2N62K3shU8eCrMLVMPRG_6krpO1VQkN4qNO02RahInNez4QwzTDFJA" alt="" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='0'%20height='0'%20viewBox='0%200%200%200'%3E%3C/svg%3E"></figure>
<p><em>José Cortéz stands in front of a vanilla plant on his farm in Papantla.</em><strong> </strong><em>(Nathaniel Parish Flannery)</em></p>
<p>Centuries ago, the Totonaco people used the vanilla in perfumes and medicines and for sacred rituals. The Totonacos were conquered in the 15th century by the Aztecs, who used vanilla to flavor chocolate and also wore amulets stuffed with the plant’s aromatic flower petals as necklaces.&nbsp;</p>
<p>It wasn’t until the 17th century that a commercial market emerged for vanilla, and local Totonacos began actively cultivating and collecting the plants’ fragrant bean pods for sale. The spice became a sensation with the Spanish, who conquered the Aztecs, and brought vanilla back to Europe.&nbsp;</p>
<p>A major problem then, as it remains today: the difficulty of growing the crop.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<ul>
<li>Unlike other cash crops, vanilla is not suited for growth on large monocrop plantations. It grows best in smaller plots, mixed among other plants.&nbsp;</li>
<li>Growing, cultivating, and preparing vanilla for sale is a hands-on process that can take a full year.&nbsp;</li>
</ul>
<p>Cortéz plants seedlings, guides their growth, and hand-pollinates the flowers in the spring and prunes and fertilizes the vanilla vines in the summers.</p>
<p>At the end of the year he clips the six- to nine-inch-long vanilla pods, which are filled with thousands of tiny black seeds. Then there’s a month-long drying process under the sun. No part of the endeavor has been mechanized.&nbsp;</p>
<p>Timing is key. In the spring, <strong>the flowers bloom for just one day</strong>. If Cortéz doesn’t find them in time, he misses out on valuable vanilla pods.</p>
<p>Today, <a href="https://www.smithsonianmag.com/science-nature/bittersweet-story-vanilla-180962757/"><strong>less than 1%</strong> </a>of the world’s vanilla comes from flowers similar to those grown by Cortéz, with the vast majority coming from an artificial process that, according to <em>Smithsonian</em> magazine, has been around since the 19th century and leads to less flavorful vanilla.&nbsp;</p>
<p>Even in the niche market for real vanilla, Mexico contributes a tiny — and dwindling — share. In the 1930s, the country was responsible for <a href="https://www.latimes.com/archives/la-xpm-2000-jan-22-fi-56403-story.html"><strong>roughly half</strong></a> of the world’s vanilla exports. It recently ranked <a href="https://oec.world/en/profile/bilateral-product/vanilla/reporter/mex"><strong>35th</strong></a>, far behind Madagascar, which led the world by exporting <strong>$619m</strong> in 2021, according to the Observatory of Economic Complexity.&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>Simple economics are one reason for vanilla’s decline in Mexico. The crop is largely ignored as a tool for rural economic development because farmers have other options that are easier to grow and pack onto trucks going north to mass-market commercial importers in the US.&nbsp;</p>
<p>Berries, tomatoes, and avocados each represent <strong>billion-dollar Mexican export industries</strong>.&nbsp;</p>
<figure><img decoding="async" src="https://lh6.googleusercontent.com/pOFW9bGAPvqkdBgHR2_dd6VlAl6YuS9QCx-yOnoFhJbdo4GCFIJ3jFgh3Pq836scm5LMM7IXHufPcYbniRfcx6sofC0xms-4OGgzrrMMpJdq4zUR0Y3sH1SzsLexOxmXnPDFfGv266vyHAxUSRvv5Q" alt="" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='0'%20height='0'%20viewBox='0%200%200%200'%3E%3C/svg%3E"></figure>
<p><em>The Hustle</em></p>
<p>As for vanilla? Exports officially totaled<a href="https://www.economia.gob.mx/datamexico/en/profile/product/vanilla"> <strong>~$582k</strong> in 2022</a>, although that’s likely an undercount. <strong>Nadja Shumann</strong>, cofounder of the Veracruz exporting company Vanilla Trade, told <em>The Hustle</em> her company alone exported enough vanilla to nearly reach that figure and suggests the national number is at least <strong>10x</strong> higher.&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>For vanilla farmers like Cortéz, who number <strong>~1.5k</strong> in Papantla, vanilla is a lifeline.&nbsp;</p>
<ul>
<li>Most of them mix vanilla plants among other crops on their land and use vanilla sales — sold to exporters like Shumann — as a supplemental source of undeclared cash income. (In Mexico, the majority of businesses are small, informal, and off the books.)&nbsp;&nbsp;&nbsp;&nbsp;</li>
<li>Cortéz can earn as much as <strong>$28k</strong> annually from his crop, enough to put him in the top decile of income earners in Veracruz (half of all households in Mexico make less than <strong>$7.8k</strong> per year).&nbsp;&nbsp;&nbsp;</li>
</ul>
<figure><img decoding="async" src="https://lh3.googleusercontent.com/VMLBgWqRWqzFKUDAzxm5VhtoMBEtc5L0xy1SGRVXrw3M4_usD2Jkye-awDs6DUR6KYDFmXU3q1VnP5hbaUTX8gg1P4C5nGybw6ZfPfdkD4blI3kyH-7YDvk7oyMdGzlMpvw-bD-tEgVaNPZ_MBIAsg" alt="" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='0'%20height='0'%20viewBox='0%200%200%200'%3E%3C/svg%3E"></figure>
<p><em>José Cortéz walks near a garden of seedlings near his home. (Nathaniel Parish Flannery)</em></p>
<p>That makes vanilla vital for many local farmers but dispensable to big businesses and the Mexican government. As Veracruz reels from murders, kidnappings, and cartel violence, vanilla theft is simply not a priority for anyone who could stop it.</p>
<h4 id="h-a-uniquely-corrupt-government"><strong>A ‘uniquely corrupt’ government</strong></h4>
<p>How often does vanilla get stolen from local farmers in Mexico?&nbsp;</p>
<ul>
<li>A few years ago, Mexican academics gathered to discuss the problem at the Campesino Forum in Mexico City, where professor <strong>Juan Carlos Guzmán Salas</strong> <a href="https://www.proceso.com.mx/nacional/2017/10/10/carteles-acaban-con-la-vainilla-en-mexico-alerta-investigador-de-chapingo-192993.html">estimated</a> <strong>80%</strong> of the country’s growers had experienced theft.&nbsp;</li>
<li>In April, the mayor of Gutierrez Zamora, a town 30 minutes from Papantla, warned that during the months of July and August, local growers <a href="https://jornadaveracruz.com.mx/estado/con-certificacion-intentaran-frenar-el-robo-de-la-vainilla/">report</a> up to <strong>four vanilla robberies every week</strong>.&nbsp;</li>
</ul>
<p>“At night, there’s nobody at the plantation,” <strong>Juan Salazar</strong>, a 43-year-old vanilla grower and exporter in Papantla, told <em>The Hustle</em>. “People steal. It’s frustrating. It’s a [lot of] work to take care of it, and it can be lost in one night to robbery.”&nbsp;</p>
<p>It hasn’t been nearly as easy to catch the culprits. Despite vanilla thefts being well-documented anecdotally, farmers and Mexican legal experts say municipal police and state prosecutors have done little to investigate.</p>
<p>“Veracruz is quite uniquely corrupt, even by the standards of a Mexican state,” said <strong>Stephen Woodman</strong>, a Mexico-based organized crime researcher at Advanced Intelligence Solutions. “It’s run by political bosses, <em>caciques</em>. Veracruz is a hotbed for all sorts of brazen links between organized crime and municipal officials.”</p>
<figure><img decoding="async" src="https://lh3.googleusercontent.com/Km5Vk1zBXS_3xQYrA9UtwPQ_oF5___9-SBeQKE76TINAh2aEaFOQZJ6DA9ifWz023eSPTFtVvLHx6PCiqv0cgzrCkt3w9kILVZLRUXGQGiNKGqODUmlQ84GczRMyA8Tw9XYmQ1F7b8hS28sumLaEvw" alt="" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='0'%20height='0'%20viewBox='0%200%200%200'%3E%3C/svg%3E"></figure>
<p><em>Dried vanilla with an export value of ~$74k ready to be packed for export inside a vanilla drying facility in Papantla, Veracruz.</em><em> </em><em>(Nathaniel Parish Flannery)</em></p>
<p>Over the last few years, thieves connected to larger organized crime groups in Veracruz <a href="https://www.eleconomista.com.mx/politica/Cuales-son-las-entidades-con-mas-tomas-clandestinas-a-ductos-de-Pemex-20230721-0040.html"><strong>have stolen billions of dollars</strong></a> of fuel from Mexico’s state-owned oil company, Pemex. In 2018, the state’s former governor, Javier Duarte, <a href="https://www.theguardian.com/world/2018/sep/27/javier-duarte-mexico-veracruz-guilty-sentenced-corruption">was sentenced</a> to nine years in prison for racketeering and money laundering.&nbsp;</p>
<p>Guzmán Salas <a href="https://www.proceso.com.mx/nacional/2017/10/10/carteles-acaban-con-la-vainilla-en-mexico-alerta-investigador-de-chapingo-192993.html">has publicly warned</a> that vanilla thieves could have direct relationships with organized crime syndicates and corrupt business groups that aggregate, process, and export dried vanilla pods and extracts. Cartels have already inserted themselves in <a href="https://www.npr.org/2022/02/19/1081948884/mexican-drug-cartels-are-getting-into-the-avocado-and-lime-business">the lime and avocado trade</a>.&nbsp;</p>
<p>But with few arrests for vanilla theft, there’s a serious lack of evidence.&nbsp;</p>
<p>Local farmers guess that thefts are carried out by local, low-level criminals rather than by outside organized crime groups.&nbsp;</p>
<p>“The people who steal are locals. It’s small scale. With vanilla, a neighbor can rob you. But it’s not armed robbery,” Salazar said.</p>
<p>Either way, farmers face the consequences. One Veracruz-based grower told <em>The Hustle</em> that it’s taken a toll on the crop’s quality and value, as the fear of theft drives farmers to harvest as soon as possible and buyers to reduce prices.&nbsp;</p>
<h4 id="h-can-mexico-grow-its-vanilla-industry"><strong>Can Mexico grow its vanilla industry?</strong></h4>
<p>To combat theft, one local politician in Veracruz has proposed creating a registry of producers to certify the legal provenance of vanilla bought and sold in the state.</p>
<p>It’s similar to a tactic in Madagascar, where producers have reduced the incentive for theft by “branding” their individual pods with producer-specific numbers that provide a paper trail for sourcing.&nbsp;</p>
<figure><img decoding="async" src="https://lh6.googleusercontent.com/FV4i7ce0k4kBWTbAcML_MPcTI2kAPqok0PjWcnYkorj9pWjOWelmH3I4oiQ4L2ukVwrfobMjandtbfPtuMdLDnLecRZpuUpO5LTewlASWi3laPfHygKjHAMi_CvtgP3JS4NQumSxxeqbsUu7VDNJgQ" alt="" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='0'%20height='0'%20viewBox='0%200%200%200'%3E%3C/svg%3E"></figure>
<p><em>The Hustle</em></p>
<p>Despite theft concerns, supporters of Mexican vanilla are bullish on the crop’s revival.&nbsp;</p>
<ul>
<li>Mexico’s Ministry of Agriculture <a href="https://www.gob.mx/cms/uploads/attachment/file/257086/Potencial-Vainilla.pdf">calculates</a> that if producers used improved cultivation methods, the country could export 234 tonnes of vanilla worth <strong>~$8 million by 2030</strong> while using basically the same amount of land. That’s roughly <strong>20x more</strong> than the baseline estimate of what Shumann, the exporter with Vanilla Trade, believes the country exports today.&nbsp;</li>
<li>Savvy producers like <strong>Lizbeth Jiménez</strong>, the 33-year-old owner of Cosecha Totonaco in Papantla, have started <strong>selling directly to international buyers</strong>, bypassing traditional aggregators and processors who act as middlemen.&nbsp;</li>
</ul>
<p>Jiménez’s farm produces around 150 pounds of dried vanilla annually, which she can sell for as much as <strong>$19k</strong>. She also dries, processes, and sells green vanilla that she buys wholesale from local farmers.</p>
<p>Her biggest sale last year was a bulk order for 440 pounds, which she sold for just over <strong>$69k</strong>.&nbsp;</p>
<figure><img decoding="async" src="https://lh3.googleusercontent.com/hmDrmMVyZZgsgDpb0Y4Qh1LCpGHZhpLzFLCcMBxgSeobmmd_OVOzpDU760cXNYB_oeWnlAnhRIJtCsLicQl5QFW2O7oQkZ74tUUC50LIO-MpGZ2CF-pYTnH_4pbZD1g9WVub2zuAkdYiI4F0iWVVow" alt="" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='0'%20height='0'%20viewBox='0%200%200%200'%3E%3C/svg%3E"></figure>
<p><em>Lizbeth Jim</em>é<em>nez, the owner of Cosecha Totonaco, a Papantla company that dries, processes, and exports vanilla, holds up a small package of dried vanilla worth $468.</em><em> </em><em>(Nathaniel Parish Flannery)</em></p>
<p>But many farmers are wary of growing the industry. Securing business loans and developing modern, intensive growing techniques would require producers to create formal businesses, hire accountants, and pay taxes on their income.&nbsp;</p>
<p>Then there’s the crime problem: Producers must already contend with theft. More output might draw scrutiny from cartels, a la the lime and avocado industries.&nbsp;&nbsp;</p>
<p>However it shakes out, Cortéz knows he’ll continue working on his farm, just like his parents and grandparents and the generations before them — harvesting with a shotgun nearby.</p>
<p>“I’ll never stop planting vanilla,” he said. “It’s my culture and it’s my main source of income.”</p>
<div>
<h2>Get the 5-minute roundup you’ll actually read in your inbox​</h2>
<p>Business and tech news in 5 minutes or less​</p>

<p>100% free. We don’t spam. Unsubscribe whenever.</p>
</div> </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[ZFSBootMenu (173 pts)]]></title>
            <link>https://docs.zfsbootmenu.org/en/v2.2.x/#</link>
            <guid>37113917</guid>
            <pubDate>Sun, 13 Aug 2023 20:13:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://docs.zfsbootmenu.org/en/v2.2.x/#">https://docs.zfsbootmenu.org/en/v2.2.x/#</a>, See on <a href="https://news.ycombinator.com/item?id=37113917">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody" role="main" itemscope="itemscope" itemtype="http://schema.org/Article">
             
  <p><img alt="ZFSBootMenu logo" src="https://docs.zfsbootmenu.org/en/v2.2.x/_images/Logo_TextOnly_Color.svg"></p>

<p><a href="https://github.com/zbm-dev/zfsbootmenu/actions/workflows/build.yml">
    <img alt="Build check" src="https://github.com/zbm-dev/zfsbootmenu/actions/workflows/build.yml/badge.svg?branch=master">
  </a>
  <a href="https://repology.org/project/zfsbootmenu/versions">
    <img alt="latest packaged version(s)" src="https://repology.org/badge/latest-versions/zfsbootmenu.svg">
  </a>
</p>




<p>ZFSBootMenu is a bootloader that provides a powerful and flexible discovery, manipulation and booting of Linux on ZFS.
Originally inspired by the FreeBSD bootloader, ZFSBootMenu leverages the features of modern OpenZFS to allow users to
choose among multiple "boot environments" (which may represent different versions of a Linux distribution, earlier
snapshots of a common root, or entirely different distributions), manipulate snapshots in a pre-boot environment and,
for the adventurous user, even bootstrap a system installation via <code><span>zfs</span> <span>recv</span></code>.</p>
<p>In essence, ZFSBootMenu is a small, self-contained Linux system that knows how to find other Linux kernels and initramfs
images within ZFS filesystems. When a suitable kernel and initramfs are identified (either through an automatic process
or direct user selection), ZFSBootMenu launches that kernel using the <code><span>kexec</span></code> command.</p>
<p><img alt="ZFSBootMenu screenshot" src="https://docs.zfsbootmenu.org/en/v2.2.x/_images/v2.1.0-multi-be.png"></p><section id="overview">

<nav id="contents">
<ul>
<li><p><a href="#distribution-agnostic" id="id1">Distribution Agnostic</a></p></li>
<li><p><a href="#easily-deployed-and-extensively-configurable" id="id2">Easily Deployed and Extensively Configurable</a></p>
<ul>
<li><p><a href="#local-installation" id="id3">Local Installation</a></p></li>
<li><p><a href="#building-in-a-container" id="id4">Building in a Container</a></p></li>
</ul>
</li>
<li><p><a href="#zfs-boot-environments" id="id5">ZFS Boot Environments</a></p>
<ul>
<li><p><a href="#command-line-arguments" id="id6">Command-Line Arguments</a></p></li>
</ul>
</li>
<li><p><a href="#run-time-configuration-of-zfsbootmenu" id="id7">Run-time Configuration of ZFSBootMenu</a></p></li>
<li><p><a href="#signature-verification-and-prebuilt-efi-executables" id="id8">Signature Verification and Prebuilt EFI Executables</a></p></li>
</ul>
</nav>
<p>In broad strokes, ZFSBootMenu works as follows:</p>
<ul>
<li><p>Via direct EFI booting, an EFI boot manager like <code><span>rEFInd</span></code>, a BIOS bootloader like <code><span>syslinux</span></code>, or some other means,
boot a ZFSBootMenu image (as either a self-contained UEFI application or a dedicated Linux kernel and initramfs).</p></li>
<li><p>Find all healthy ZFS pools and import them (or, at the user's option, find and import only a specific pool).</p></li>
<li><p>If appropriate, select a preferred boot environment:</p>
<ul>
<li><p>If the ZFSBootMenu command line specifies a pool preference, and that pool has been imported, prefer the filesystem
indicated by its <code><span>bootfs</span></code> property (if defined).</p></li>
<li><p>If the ZFSBootMenu command line specifies no pool preference or the preferred pool is not found, prefer the
filesystem indicated by the <code><span>bootfs</span></code> property (if defined) on the first-found pool.</p></li>
<li><p>If a suitable <code><span>bootfs</span></code> has been identified, start an interruptable countdown (by default, 10 seconds) to
automatically boot that environment.</p></li>
<li><p>If no <code><span>bootfs</span></code> value can be identified or the automatic countdown was interrupted, search all imported pools for
filesystems that set <code><span>mountpoint=/</span></code> and contain Linux kernels and initramfs images in their <code><span>/boot</span></code>
subdirectories. Present a list of matching environments for user selection via <code><span>fzf</span></code>.</p></li>
</ul>
</li>
<li><p>Mount the filesystem representing the selected boot environment and find either the highest versioned kernel or a
specifically selected kernel version in its <code><span>/boot</span></code> directory.</p></li>
<li><p>Using <code><span>kexec</span></code>, load the selected kernel and its initramfs image into memory, setting the kernel command line with
the contents of the <code><span>org.zfsbootmenu:commandline</span></code> property for that filesystem.</p></li>
<li><p>Unmount all ZFS filesystems.</p></li>
<li><p>Boot the final kernel and initramfs.</p></li>
</ul>
<p>At this point, the system will be booting into your usual OS-managed kernel and initramfs, along with any arguments
needed to correctly boot your system.</p>
<p>Whenever ZFSBootMenu encounters natively encrypted ZFS filesystems that it intends to scan for boot environments, it
will prompt the user to enter a passphrase as necessary.</p>
<section id="distribution-agnostic">
<h2>Distribution Agnostic<a href="#distribution-agnostic" title="Permalink to this heading"></a></h2>
<p>ZFSBootMenu is capable of booting just about any Linux distribution. Major distributions that are known to boot without
requiring any special configuration include:</p>
<ul>
<li><p>Void</p></li>
<li><p>Arch</p></li>
<li><p>Alpine</p></li>
<li><p>Gentoo</p></li>
<li><p>Fedora</p></li>
<li><p>Debian and its descendants (Ubuntu, Linux Mint, Devuan, etc.)</p></li>
</ul>
<p>Red Hat and its descendants (RHEL, CentOS, etc.) are expected to work as well but have never been tested.</p>
<p>ZFSBootMenu provides several configuration options that can be used to fine-tune the boot process for nonstandard
configurations.</p>
</section>
<section id="easily-deployed-and-extensively-configurable">
<h2>Easily Deployed and Extensively Configurable<a href="#easily-deployed-and-extensively-configurable" title="Permalink to this heading"></a></h2>
<p>Each release includes pre-generated boot images, based on Void Linux, that should work for the majority of users. Images
are distributed for <code><span>x86_64</span></code> platforms both as monolithic UEFI applications as well a separate kernel an initramfs
image that are suitable for use on both UEFI and legacy BIOS systems. Users of other platforms or that require custom
configurations can build local images, running the ZFSBootMenu image generator either in a host installation or in the
controlled environment of an OCI (Docker) container.</p>
<p>Modern UEFI platforms provide a wide range of <a href="https://docs.zfsbootmenu.org/en/v2.2.x/guides/general/uefi-booting.html"><span>options for launching ZFSBootmenu</span></a>.
For legacy BIOS systems, <code><span>syslinux</span></code> is a convenient choice. A
<a href="https://docs.zfsbootmenu.org/en/v2.2.x/guides/void-linux/syslinux-mbr.html"><span>syslinux guide for Void Linux</span></a> describes the <code><span>syslinux</span></code>
installation and configuration process in the context of a broader Void Linux installation.</p>
<section id="local-installation">
<h3>Local Installation<a href="#local-installation" title="Permalink to this heading"></a></h3>
<p>The ZFSBootMenu repository includes a <a href="https://github.com/zbm-dev/zfsbootmenu/blob/v2.2.0/Makefile">Makefile</a> with targets to install the
<a href="https://docs.zfsbootmenu.org/en/v2.2.x/man/generate-zbm.8.html"><span>generate-zbm</span></a> builder, all necessary components, manual pages and some convenient helpers. A
local ZFSBootMenu installation requires some additional software that may be available as packages in your distribution
or may need to be manually installed. The following components are required or recommended for inclusion in the
bootloader image:</p>
<blockquote>
<div><ul>
<li><p><a href="https://github.com/junegunn/fzf">fzf</a></p></li>
<li><p><a href="https://github.com/horms/kexec-tools">kexec-tools</a></p></li>
<li><p><a href="http://www.maier-komor.de/mbuffer.html">mbuffer</a> (recommended, but not required)</p></li>
</ul>
</div></blockquote>
<p>In addition, <code><span>generate-zbm</span></code> requires a few Perl modules:</p>
<blockquote>
<div><ul>
<li><p><a href="https://metacpan.org/pod/Sort::Versions">perl Sort::Versions</a></p></li>
<li><p><a href="https://metacpan.org/pod/YAML::PP">perl YAML::PP</a></p></li>
<li><p><a href="https://metacpan.org/pod/boolean">perl boolean</a></p></li>
</ul>
</div></blockquote>
<p>If you will create unified EFI executables (which bundles the kernel, initramfs and command line), you will also need a
an EFI stub loader, which is typically included with
<a href="https://www.freedesktop.org/wiki/Software/systemd/systemd-boot/">systemd-boot</a> or
<a href="https://pkgs.alpinelinux.org/package/edge/main/x86/gummiboot">gummiboot</a>.</p>
<p>Most or all of these software components may be available as packages in your distribution.</p>
<p>Locally created ZFSBootMenu images use your your regular system kernel, ZFS drivers and user-space utilities. The
ZFSBootMenu image is constructed using standard Linux initramfs generators. ZFSBootMenu is known to work and is
explicitly supported with:</p>
<ul>
<li><p><a href="https://github.com/dracutdevs/dracut">dracut</a></p></li>
<li><p><a href="https://github.com/archlinux/mkinitcpio">mkinitcpio</a></p></li>
</ul>
<p>Building a custom image is known to work in the following configurations:</p>
<ul>
<li><p>With <code><span>mkinitcpio</span></code> or <code><span>dracut</span></code> on Void (the <code><span>zfsbootmenu</span></code> package will make sure all prerequisites are available)</p></li>
<li><p>With <code><span>mkinitcpio</span></code> or <code><span>dracut</span></code> on Arch</p></li>
<li><p>With <code><span>dracut</span></code> on Debian or Ubuntu (installed as <code><span>dracut-core</span></code> to avoid replacing the system <code><span>initramfs-tools</span></code> setup)</p></li>
</ul>
<p>Configuration of the ZFSBootMenu build process is accomplished via a <a href="https://docs.zfsbootmenu.org/en/v2.2.x/man/generate-zbm.5.html"><span>YAML configuration file</span></a>
for <code><span>generate-zbm</span></code>.</p>
</section>
<section id="building-in-a-container">
<h3>Building in a Container<a href="#building-in-a-container" title="Permalink to this heading"></a></h3>
<p>The official ZFSBootMenu release images are built in a standard Void Linux OCI container that provides a predictable
environment that is known to be supported with ZFSBootMenu. The container entrypoint provides full access to all of the
configurability of ZFSBootMenu, and a helper script simplifies the process or running the container and managing the
images that it produces. The <a href="https://docs.zfsbootmenu.org/en/v2.2.x/guides/general/container-building.html"><span>ZFSBootMenu container guide</span></a> provides a detailed
description of the containerized build process as well as a straightforward example of local image management using the
helper script.</p>
</section>
</section>
<section id="zfs-boot-environments">
<h2>ZFS Boot Environments<a href="#zfs-boot-environments" title="Permalink to this heading"></a></h2>
<p>The concept of a "boot environment" is very loosely defined in ZFSBootMenu. Fundamentally, ZFSBootMenu treats any
filesystem that appears to be an operating system root and contains an identifiable Linux kernel and initramfs as a boot
environment. A <a href="https://docs.zfsbootmenu.org/en/v2.2.x/guides/general/bootenvs-and-you.html"><span>primer</span></a> provides more details about the identification process.</p>
<section id="command-line-arguments">
<h3>Command-Line Arguments<a href="#command-line-arguments" title="Permalink to this heading"></a></h3>
<p>When booting a particular enviornment, ZFSBootMenu reads the <code><span>org.zfsbootmenu:commandline</span></code>
<a href="https://docs.zfsbootmenu.org/en/v2.2.x/man/zfsbootmenu.7.html#zfs-properties"><span>property</span></a> for that filesystem to discover kernel command-line arguments that should be passed to
the kernel it will boot.</p>
<div>
<p>Note</p>
<p>Do not set a <code><span>root=</span></code> option (or any similar indicator of the root filesystem) in this property; ZFSBootMenu will add
an appropriate <code><span>root=</span></code> argument when it boots the environment and will actively suppress any conflicting option.</p>
</div>
<p>Because ZFS properties are inherited by default, it is possible to set the <code><span>org.zfsbootmenu:commandline</span></code> property on a
common parent to apply the same KCL arguments to multiple environments. Setting the property locally on individual boot
environments will override the common defaults.</p>
<p>As a special accommodation, the substitution keyword <code><span>%{parent}</span></code> in the KCL property will be recursively expanded to
whatever the value of <code><span>org.zfsbootmenu:commandline</span></code> would be on the parent dataset. This allows, for example, mixing
options common to multiple environments with those specific to each:</p>
<div><pre><span></span>zfs<span> </span><span>set</span><span> </span>org.zfsbootmenu:commandline<span>=</span><span>""</span>zfs.zfs_arc_max<span>=</span><span>8589934592</span><span>""</span><span> </span>zroot/ROOT
zfs<span> </span><span>set</span><span> </span>org.zfsbootmenu:commandline<span>=</span><span>"%{parent} loglevel=4"</span><span> </span>zroot/ROOT/void.2019.11.01
zfs<span> </span><span>set</span><span> </span>org.zfsbootmenu:commandline<span>=</span><span>"loglevel=7 %{parent}"</span><span> </span>zroot/ROOT/void.2019.10.04
</pre></div>
<p>will cause ZFSBootMenu to interpret the KCL for <code><span>zroot/ROOT/void.2019.11.01</span></code> as:</p>
<div><pre><span></span>zfs.zfs_arc_max<span>=</span><span>8589934592</span><span> </span><span>loglevel</span><span>=</span><span>4</span>
</pre></div>
<p>while the KCL for <code><span>zroot/ROOT/void.2019.10.04</span></code> would be:</p>
<div><pre><span></span><span>loglevel</span><span>=</span><span>7</span><span> </span>zfs.zfs_arc_max<span>=</span><span>8589934592</span>
</pre></div>
<p>To simplify the manipulation of command-line parameters for boot environments, the <a href="https://docs.zfsbootmenu.org/en/v2.2.x/man/zbm-kcl.8.html"><span>zbm-kcl</span></a> helper
facilitates live review and edits.</p>
</section>
</section>

<section id="signature-verification-and-prebuilt-efi-executables">
<h2>Signature Verification and Prebuilt EFI Executables<a href="#signature-verification-and-prebuilt-efi-executables" title="Permalink to this heading"></a></h2>
<p>All release assets, including EFI executables and kernel/initramfs pairs, are signed with
<a href="https://flak.tedunangst.com/post/signify">signify</a>, which provides a simple method for verifying that the contents of
the file are as this project intended. Once you've installed <code><span>signify</span></code> (that's left as an exercise, although Void
Linux provides the <code><span>signify</span></code> package for this purpose), just download the desired assets from the
<a href="https://github.com/zbm-dev/zfsbootmenu/releases">ZFSBootMenu release page</a>, download the file <code><span>sha256.sig</span></code>
alongside it, and run:</p>

<p>You will need the public key used to sign ZFSBootMenu executables. The key is available at
<a href="https://github.com/zbm-dev/zfsbootmenu/blob/v2.2.0/releng/keys/zfsbootmenu.pub">releng/keys/zfsbootmenu.pub</a>. Install this file as <code><span>/etc/signify/zfsbootmenu.pub</span></code> if you like; this key can be
used for all subsequent verifications. Otherwise, look at the <code><span>-p</span></code> command-line option for <code><span>signify</span></code> to provide a
path to the key.</p>
<p>The signature file <code><span>sha256.sig</span></code> also includes a signature for the source tarball corresponding to the release. If this
file is not present alongside the EFI bundle and the signature file, <code><span>signify</span></code> will complain about its signature. This
error message is OK to ignore; alternatively, tell <code><span>signify</span></code> to verify only the EFI bundle, or download the source
tarball alongside the other files.</p>
<p>The signify key <code><span>zfsbootmenu.pub</span></code> may itself be verified; alongside the public key is the GPG signature
<a href="https://github.com/zbm-dev/zfsbootmenu/blob/v2.2.0/releng/keys/zfsbootmenu.pub.gpg">releng/keys/zfsbootmenu.pub.gpg</a>, produced with a <a href="https://github.com/ahesford.gpg">personal key from @ahesford</a>,
one of the members of the ZFSBootMenu project. This personal key is also available on public key servers. To verify the
<code><span>signify</span></code> key, download the key <code><span>zfsbootmenu.pub</span></code> and its signature file <code><span>zfsbootmenu.pub.gpg</span></code>, then run:</p>
<div><pre><span></span>gpg<span> </span>--recv-key<span> </span>0x312485BE75E3D7AC
gpg<span> </span>--verify<span> </span>zfsbootmenu.pub.gpg
</pre></div>
<div>
<p>Note</p>
<p>On some distributions, <code><span>gpg</span></code> may instead by <code><span>gpg2</span></code>.</p>
</div>
</section>
</section>


           </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Desktop Linux has a Firefox problem (108 pts)]]></title>
            <link>https://www.osnews.com/story/136653/desktop-linux-has-a-firefox-problem/</link>
            <guid>37113884</guid>
            <pubDate>Sun, 13 Aug 2023 20:09:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.osnews.com/story/136653/desktop-linux-has-a-firefox-problem/">https://www.osnews.com/story/136653/desktop-linux-has-a-firefox-problem/</a>, See on <a href="https://news.ycombinator.com/item?id=37113884">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody">
								
<p>There’s no denying that the browser is the single-most important application on any operating system, whether that be on desktops and laptops or on mobile devices. Without a capable, fast, and solid browser, the usefulness of an operating system decreases exponentially, to the point where I’m quite sure virtually nobody’s going to use an operating system for regular, normal use if it doesn’t have a browser. Having an at least somewhat useable browser is what elevates an operating system from a hobby toy to something you could use for more than 10 minutes as a fun novelty.</p>



<p>The problem here is that making a capable browser is actually incredibly hard, as the browser has become a hugely capable platform all of its own. Undertaking the mammoth task of building a browser from scratch is not something a lot of people are interested in – <a href="https://www.ladybird.dev/">save for the crazy ones</a> – made worse by the fact that competing with the three remaining browser engines is basically futile due to market consolidation and monopolisation. Chrome and its various derivatives are <a href="https://gs.statcounter.com/browser-market-share">vastly dominant</a>, followed by Safari on iOS, if only because you can’t use anything else on iOS. And then there’s Firefox, trailing far behind as a distant third – and falling.</p>



<p>This is the environment desktop Linux distributions find themselves in. For the longest time now, desktop Linux has relied virtually exclusively on shipping Firefox – and the Mozilla suite before that – as their browser, with some users opting to download Chrome post-install. While both GNOME and KDE nominally invest in their own two browsers, <a href="https://wiki.gnome.org/Apps/Web">GNOME Web</a> and <a href="https://www.falkon.org/">Falkon</a>, their uptake is limited and releases few and far between. For instance, none of the major Linux distributions ship GNOME Web as their default browser, and it lacks many of the features users come to expect from a browser. Falkon, meanwhile, is updated only sporadically, often going years between releases. Worse yet, Falkon uses Chromium through <a href="https://wiki.qt.io/QtWebEngine">QtWebEngine</a>, and GNOME Web uses WebKit (which are updated separately from the browser, so browser releases are not always a solid metric!), so both are dependent on the goodwill of two of the most ruthless corporations in the world, Google and Apple respectively.</p>



<p>Even Firefox itself, even though it’s clearly the browser of choice of distributions and Linux users alike, does not consider Linux a first-tier platform. Firefox is first and foremost a Windows browser, followed by macOS second, and Linux third. The love the Linux world has for Firefox is not reciprocated by Mozilla in the same way, and this shows in various places where issues fixed and addressed on the Windows side are ignored on the Linux side for years or longer.</p>



<p>The best and most visible example of that is hardware video acceleration. This feature has been a default part of the Windows version since forever, but it wasn’t enabled by default for Linux until <a href="https://www.omgubuntu.co.uk/2023/07/firefox-115-intel-gpu-video-decoding-on-linux">Firefox 115</a>, released only in early July 2023. Even then, the feature is only enabled by default for users of Intel graphics – AMD and Nvidia users need not apply. This lack of video acceleration was – and for AMD and Nvidia users, still is – a major contributing factor to Linux battery life on laptops taking a serious hit compared to their Windows counterparts.</p>



<p>The road to even getting here has been a long, hard, and bumpy one. For years and years now, getting video acceleration to work on Firefox for Linux was complicated and unreliable, with every release of the browser possibly changing what flags you needed to set, and sometimes it would just stop working for several releases in a row altogether, no matter what you did. There’s a venerable encyclopaedia of forum messages, blog posts, and website articles with outdated instructions and <a href="https://en.wikipedia.org/wiki/Hail_Mary">Hail Mary</a>-like suggestions for users trying to get it to work. Conventional wisdom would change with every release, and keeping track of it all was a nightmare.</p>



<p>It’s not just hardware accelerated video decoding. Gesture support has taken much longer to arrive on the Linux version than it did on the Windows version – things like using swipes to go back and forward, or pinch to zoom on images. Similarly, touchscreen support took a longer time to arrive on the Linux version of Firefox, too. Often, such features could be enabled with about:config incantations for years before becoming enabled by default, at least, but that’s far from an ideal situation.</p>



<p>With desktop Linux trailing both Windows and macOS in popularity, there’s nothing unexpected or inherently malicious about this, and the point of the previous few paragraphs is not to complain about the state of Firefox for Linux or to suggest Mozilla transfers precious resources from the Windows and macOS versions to the Linux version. While I obviously wouldn’t complain if they did so, it wouldn’t make much sense. The real reason I’m highlighting these issues is that if Firefox for Linux is already treated as a third wheel today, with Mozilla’s current financial means and resources, what would happen if Mozilla saw a drastic reduction in its financial means and resources?</p>



<p>Firefox is not doing well. Its market share has dropped radically over the years, and now sits at a meagre 3% on desktops and laptops, and a negligible 0.5% on mobile. Chrome and to a lesser extent Safari have trampled all over the venerable browser, to a point where it’s effectively an also-ran for Linux/BSD users, and a few more nerds on other platforms. I’m not saying this to disparage those who use Firefox – I’m one of them – but to underline just how dire Firefox’ current market position really is. This shrinking market share must already be harming the development and future prospects of Firefox, especially if the slide continues.</p>



<p>The declining market share is far from the biggest problem, however. The giant sword of Damocles dangling above Firefox’ head are Mozilla’s really odd and lopsided revenue sources. As most of us are probably aware, Mozilla makes most of its money from a search deal with Google. <a href="https://www.bloomberg.com/news/newsletters/2023-05-05/why-google-keeps-paying-mozilla-s-firefox-even-as-chrome-dominates">Roughly 80% of Mozilla’s revenue comes from Google</a>, who pays the browser maker to set Google Search as the default search engine.</p>



<p>How long will this deal continue? Will it be renewed indefinitely, regardless of how much farther Firefox slides into irrelevance? Will the size of the deal drop, or will it end altogether? When will Google decide that spending hundreds of millions of dollars every year in what is essentially charity for a competitor is no longer worth it, or needed? Google’s similar search deal with Apple is <a href="https://www.businessinsider.com/google-apple-search-deal-doj-antitrust-suit-2020-10?op=1&amp;r=US&amp;IR=T">already facing legal scrutiny</a>; will that scrutiny have consequences for the deal with Mozilla, too?</p>



<p>Just ask yourself this question – if Mozilla’s funding dries up because Firefox’ market share declines further, the Google deal falls through, a combination of the two, or even other factors not mentioned here – <em>which version of Firefox is going to feel the cuts first</em>? What will Mozilla do to soften the blow? Are we going to see sleazy deals with other companies as Mozilla grows increasingly desperate? Shady crypto nonsense? “Allowed” ads in exchange for revenue? More suggested websites and extensions, for a price? Or will the Linux version just get cut entirely, left to the community to take over?</p>



<p>Exactly this <a href="https://www.osnews.com/story/26159/mozilla-to-cease-development-on-thunderbird/">happened to Thunderbird</a>. It took Thunderbird almost a decade to fully recover. This could happen to Firefox for Linux, too.</p>



<p>This is desktop Linux’ Firefox problem. The single most important desktop Linux application is already in dire straits, and it seems inevitable that things are only going to get worse from here on out. Yet, I don’t see anyone talking about this problem, or planning for the eventual possible demise of Firefox, what that would mean for the Linux desktop, and how it can be avoided or mitigated.</p>



<p>In an ideal world, the major stakeholders of the Linux desktop – KDE, GNOME, the various major distributions – would get together and seriously consider a plan of action. The best possible solution, in my view, would be to fork one of the major browser engines (or pick one and significantly invest in it), and modify this engine and tailor it specifically for the Linux desktop. Stop living off the scraps and leftovers thrown across the fence from Windows and macOS browser makers, and focus entirely on making a browser engine that is optimised fully for Linux, its graphics stack, and its desktops. Have the major stakeholders work together on a Linux-first – or even Linux-only – browser engine, leaving the graphical front-end to the various toolkits and desktop environments.</p>



<p>Obviously, this won’t be easy, and will take serious investments in time, resources, and people. However, by focusing entirely on Linux alone, you wouldn’t really be competing with Blink and WebKit, who don’t take desktop Linux seriously at all (Chrome still doesn’t have hardware video acceleration on Linux). Let those other engines fight for the various proprietary platforms – Linux needs a browser engine that is independent of Google (and Apple), and takes Linux seriously as a platform.</p>



<p>I’m genuinely worried about the state of browsers on Linux, and the future of Firefox on Linux in particular. I think it’s highly irresponsible of the various prominent players in the desktop Linux community, from GNOME to KDE, from Ubuntu to Fedora, to seemingly have absolutely zero contingency plans for when Firefox enshittifies or dies, despite everything we know about the current state of the browser market, the state of Mozilla’s finances, and the future prospects of both.</p>



<p>Desktop Linux has a Firefox problem, but nobody seems willing to acknowledge it.</p>
<p>Visited 1 times, 1 visit(s) today</p>															</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[If you succeed you will fail (184 pts)]]></title>
            <link>https://boyter.org/posts/if-you-succeed-you-will-fail/</link>
            <guid>37113415</guid>
            <pubDate>Sun, 13 Aug 2023 19:30:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://boyter.org/posts/if-you-succeed-you-will-fail/">https://boyter.org/posts/if-you-succeed-you-will-fail/</a>, See on <a href="https://news.ycombinator.com/item?id=37113415">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<blockquote>
<p>If you succeed, you will fail.</p>
</blockquote>
<p>Something said at a client engagement I was at some time ago. I figure enough time has passed that it is worth sharing this story.</p>
<p>One of the early engagements was to deliver for a very large company an iOS Application powered by a RESTful API. This was problematic due to what is common for every large organisation, a collection of older legacy backends. Some with their own API’s, and bizzare authentication processes. Part of the deliverable was also working with push notifications for things like billing updates, documenting the systems (since few people knew how everything worked) and load testing.</p>
<p>Delivering the API… looking back had some pain points, but nothing exceptional. After 6 months of development, we had built out a full AWS environment, including deployment pipelines for all infrastructure, the API, with tests, monitoring and such. The authentication process was particularly bizarre in the way it worked. It was what I would expect OAuth to work like, if you faxed the details of it a few times before handing over the final copy to someone to implement. It worked, but was bespoke.</p>
<p>Early on we had discussed performance. The company insisted that they were going to advertise the app pretty heavily and with their expected customer base that tens of thousands of customers would login and use the application within a few days. Further prodding, with estimates based on existing load and such we settled on a target of about 100 RPS.</p>
<p>For the portions that we were in control of this was easy. We have built out using AWS API-GW with Lambda. So we got 300 concurrent lambdas per endpoint by default. Since most requests were processed in 100ms or so we could comfortably deliver over 1,000 RPS without actually having to do anything.</p>
<p>Where we needed to talk to backend systems was a different story however. SAP was the system driving the business and it had most of the integration we had to work with. The lead developer for the system was a fairly nasty piece of work. He was not the most incompetent person I had ever worked with, in fact far from it. But he is certainly one of the most hostile.</p>
<p>There were multiple ways to query his system, and getting straight answers as to the most efficient way to do so was met with “well you could do that”. In short he was actively trying to sabotage the project, even pointing out his system offered an API already, so why build another? Ignoring of course that we integrated with multiple systems, and were managing things like push notifications.</p>
<p>Anyway once we added load tests for anything that depended on SAP it became apparent that the downstream systems could deliver something like 25-50 RPS depending on what we were querying for. Optimisation of the calls had already been done at this point, with his insistence as to things being slow met with “Well its processing a lot of data” and “We don’t have AWS so we cannot be lazy and have to optimise properly”.</p>
<blockquote>
<p>We need to halt the release till this is resolved.</p>
</blockquote>
<p>Pointing out that this was going to be problematic eventually resulted in an upgrade of the SAP systems. At which point they could perform over 100 RPS and everyone was happy.</p>
<p>However there is always a bottleneck. You just remove one to uncover another.</p>
<p>However, remember that oddly implemented authentication system? Because of quirks with how it was implemented it meant when tokens to it expired, they expired at once for every user. Also with the release coming there was going to be a huge amount of requests to start. When this was load tested it became apparent it could only sustain about 5 RPS.</p>
<p>This became a huge issue, especially once we started load testing against staging which was the closest environment to production. Whenever we load tested, not only would staging go down for hours once it had tipped over, production would soon follow. This resulted in a lot of massive conference calls with myself and a few others running an automated script to fire the requests, while an army of op’s and developers would monitor systems to work out the problem.</p>
<p>Turned out that at some point someone had configured the production network systems to fall over to staging in the event of a failure. However they had also configured the reverse. This took a few weeks to discover why however. Now this would probably be fine were it limited to the app, but it actually ended up taking down the production web application at the same time. The best part? We weren’t even load testing in a distributed way. In fact most of our “load” tests were run on a single EC2 instance, or even local laptop over WiFi. We realised that we could probably take down the system, on prem or remotely using a raspberry pi and a ADSL2+ connection.</p>
<p>Even more alarming was that when this was done it would take down the web portal application used by customers around the country.</p>
<blockquote>
<p>We need to halt the release till this is resolved.</p>
</blockquote>
<p>Having already heard this, clearly it fell on deaf ears. After all, they already upgraded… So why do it again?</p>
<p>The release date was fixed, and going ahead no matter what. No amount of discussion or push back could change their mind. It was then someone (I don’t even know if it was me) pointed out in a meeting that, if as many people as they want or expect use the system on the release, it’s going to be a success in terms of users, and then an epic fail when the system falls over.</p>
<blockquote>
<p>If you succeed, you will fail.</p>
</blockquote>
<p>We ended up trying to cover our company by sending out an email listing the problems, what the likely result was and asking for their acceptance of this outcome. Which I think we got.</p>
<p>Sadly it did happen just as expected. There was a large party celebrating the launch, and while many were eating cupcakes and drinking sparkling wine to celebrate, I and my colleagues were watching the production system crash and burn. Eventually we had to severely limit the login using API-GW before calling it a day and going home.</p>
<p>I think the worst thing was knowing that a new authentication system was just weeks away. Which would have ensured this would not happen.</p>
<p>Several weeks later we were out. Considering we had delivered I was not too upset by this, although I do wish it had been the success that we all wanted to be.</p>
<p>I learnt a few things from this. The first is, some companies or organisations within them need failure in order to progress. Warnings, no matter how prophetic, are seen as being unhelpful and negative. Blind optimism up till the failure is their modus operandi. Fall back on blaming the process when failure comes around and avoid ever pointing fingers or owning it.</p>
<p>I also learnt to only become as involved and care as much as the customer. If they aren’t willing to go that extra mile then why should I?</p>
<p>Am I a bitter person because of this experience? Not really. I still have enthusiasm for projects and helping out. But I am far wiser as to when I care as much as I did this time.</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Judge denies HP's plea to throw out all-in-one printer lockdown lawsuit (312 pts)]]></title>
            <link>https://www.theregister.com/2023/08/11/judge_denies_hps_request_to/</link>
            <guid>37113336</guid>
            <pubDate>Sun, 13 Aug 2023 19:23:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theregister.com/2023/08/11/judge_denies_hps_request_to/">https://www.theregister.com/2023/08/11/judge_denies_hps_request_to/</a>, See on <a href="https://news.ycombinator.com/item?id=37113336">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body">
<p>HP all-in-one printer owners, upset that their devices wouldn't scan or fax when low on ink, were handed a partial win in a northern California court this week after a judge denied HP's motion to dismiss their suit.</p>
<p>The plaintiffs argued in their amended class action <a href="https://regmedia.co.uk/2023/08/11/freund-hp-amended-complaint.pdf" rel="nofollow">complaint</a> [PDF] that HP withheld vital information by including software in its all-in-one printer/scanner/fax machines that disabled non-printing functions when out of ink and not telling buyers that was the case.</p>
<p>"It is well-documented that ink is not required in order to scan or to fax a document, and it is certainly possible to manufacture an All-in-One printer that scans or faxes when the device is out of ink," the plaintiffs argued in their complaint. The amended complaint was filed in February this year after US federal Judge Beth Labson Freeman dismissed the suit on the grounds that it hadn't properly stated a claim.</p>

    

<p>Armed with their amended complaint, lawyers for San Francsican Gary Freund and Minneapolis resident Wayne McMath have succeeded at not only making relevant claims, but also surviving an attempt by HP to have the entire case dismissed for a second time.&nbsp;</p>

        


        

<p>In the amended complaint, Freund and McMath's lawyers argue that HP's move to disable devices that were low on ink was intentional, citing HP's own comments from a support forum post in which an HP support agent told a user complaining of similar issues that their "HP printer is designed in such a way that with the empty cartridge or without the cartridge [the] printer will not function."&nbsp;</p>
<p>"At this stage, the message board post amounts to a factual allegation that bolster plaintiffs' allegations that HP designed its printers to disable certain functions when their ink is depleted," Judge Freeman said in her <a href="https://regmedia.co.uk/2023/08/11/freund-hp-judge-order.pdf" rel="nofollow">order</a> [PDF] handed down yesterday.&nbsp;</p>
<ul>

<li><a href="https://www.theregister.com/2022/09/13/hp_euconsumers_settlement_dynamic_security_printers_third_party_supplies/">HP pays $1.3m to settle dispute over printer security chip</a></li>

<li><a href="https://www.theregister.com/2022/11/23/hp_inc_q4_2022/">HP Inc to lay off up to 6,000 staff, cut costs by $1.4 billion</a></li>

<li><a href="https://www.theregister.com/2020/04/28/hp_ink_officejet_drm/">Florida man might just stick it to HP for injecting sneaky DRM update into his printers that rejected non-HP ink</a></li>

<li><a href="https://www.theregister.com/2020/11/12/hp_free_printing/">HP: That print-free-for-life deal we promised you? Well, now it's pay-per-month to continue using your printer ink</a></li>
</ul>
<p>Additionally, Judge Freeman found the plaintiffs had "adequately" described "the alleged defect and HP's knowledge of that defect," they had adequately pleaded that HP had a duty to disclose the restrictions, and that the defect occurred within the warranty period since the devices were shipped with ink cartridge limitations for non-printing features.</p>
<p>Judge Freeman allowed other claims to stand as well, only dismissing the plaintiffs' request for equitable restitution under the Minnesota Deceptive Trade Practices Act. Otherwise, Freeman said, "these allegations are sufficient" to allow the case to proceed.&nbsp;</p>

        

<p>This isn't the first time HP has been taken to court over claims it improperly locked printers down. In 2022 the IT giant settled a European lawsuit for $1.35 million alleging it used security chips and DRM-like software to prevent any third-party cartridges from functioning in HP printers. The US corporation has dealt with similar cases in Australia and America, which were settled.&nbsp;</p>
<p>HP hasn't responded to our questions about the latest lawsuit.</p>
<p>Canon, another printer manufacturer that sells all-in-one devices, was <a href="https://www.theregister.com/2021/10/19/canon_lawsuit_ink/">sued</a> in 2021 for the exact same reasons as Freund and McMath's suit against HP - that Canon all-in-ones disabled non-printing functions when ink was low. That case was settled late last year for an undisclosed sum. ®</p>                                


                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Metro 2033 author Dmitry Glukhovsky sentenced to 8 years in prison (209 pts)]]></title>
            <link>https://www.pcgamer.com/metro-2033-author-dmitry-glukhovsky-sentenced-to-8-years-in-prison-for-criticizing-russias-invasion-of-ukraine/</link>
            <guid>37113330</guid>
            <pubDate>Sun, 13 Aug 2023 19:23:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.pcgamer.com/metro-2033-author-dmitry-glukhovsky-sentenced-to-8-years-in-prison-for-criticizing-russias-invasion-of-ukraine/">https://www.pcgamer.com/metro-2033-author-dmitry-glukhovsky-sentenced-to-8-years-in-prison-for-criticizing-russias-invasion-of-ukraine/</a>, See on <a href="https://news.ycombinator.com/item?id=37113330">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="article-body">
<p>An <a href="https://apnews.com/article/russia-crackdown-navalny-court-dmitry-glukhovsky-4d35046224f7f0f2cba076bb1544fe4a" target="_blank" data-url="https://apnews.com/article/russia-crackdown-navalny-court-dmitry-glukhovsky-4d35046224f7f0f2cba076bb1544fe4a">Associated Press</a> report says Metro 2033 author Dmitry Glukhovsky has been sentenced to eight years in prison after being found guilty of spreading false information about the Russian military in online posts.</p><p>Charges were first leveled against Glukhovsky in <a href="https://www.pcgamer.com/metro-2033-author-put-on-russian-government-wanted-list-for-condemning-invasion-of-ukraine/" target="_blank">June 2022</a>, a few months after the Russian government outlawed independent reporting and protest of the invasion of Ukraine. The charges appeared to arise from a March 12 Instagram post in which Glukhovsky invoked the city of Mariupol, which stood for months as a focal point of Ukrainian resistance, and called on readers to "recognize that this is a real war against an entire nation and stop it!"</p><p>Glukhovsky was found guilty of posting text and video messages on his social media channels accusing Russian soldiers of committing crimes in Ukraine. Prosecutors dismissed Glukhovsky's allegations as fake.</p><p>Despite the charges and being declared a "<a href="https://www.theguardian.com/world/2022/oct/07/russia-declares-popular-rapper-and-writer-foreign-agents" target="_blank" data-url="https://www.theguardian.com/world/2022/oct/07/russia-declares-popular-rapper-and-writer-foreign-agents">foreign agent</a>," Glukhovsky has remained vocally critical of the invasion of Ukraine, and of Russian ruler Vladimir Putin. "Ukraine has been resisting Putin's aggression for a year now," he <a href="https://www.instagram.com/p/CpDV6gfMIiG/" target="_blank" data-url="https://www.instagram.com/p/CpDV6gfMIiG/">wrote in February</a>. "As it was a year ago, I am quite convinced that this war is just as destructive for Russia and our people as it is lethal and destructive for the people of Ukraine I love.</p><p>"I feel terribly sorry for all the human lives lost in this monstrous unjust war by a tyrant who just wanted to preserve power and make history. I still demand from the Russian authorities to immediately stop this senseless and futile anti-national war and to withdraw troops from the territory of Ukraine."</p><p>Glukhovsky has also paid tribute to other victims of Russia's crackdown on dissent, including theater director <a href="https://www.instagram.com/p/Cr2jh1Uscnj/" target="_blank" data-url="https://www.instagram.com/p/Cr2jh1Uscnj/">Evgeniya Berkovich</a> and opposition leaders <a href="https://www.instagram.com/p/ClTgsu1tEm_/" target="_blank" data-url="https://www.instagram.com/p/ClTgsu1tEm_/">Ilya Yashin</a> and <a href="https://www.instagram.com/p/CtD_eC_sfUM/" target="_blank" data-url="https://www.instagram.com/p/CtD_eC_sfUM/">Alexei Navalny</a>.</p><p>Glukhovsky became known to gamers through the FPS based on his novel <a href="https://www.pcgamer.com/metro-2033-redux-review/" target="_blank">Metro 2033</a>, developed by Ukrainian studio 4A Games and released in 2010. It became a surprise hit and spawned two sequels, <a href="https://www.pcgamer.com/metro-last-light-redux-review/" target="_blank">Metro: Last Light</a> and <a href="https://www.pcgamer.com/metro-exodus-enhanced-edition-personal-pick-game-of-the-year/" target="_blank">Metro Exodus</a>; they did not follow the events of his sequel novels, Metro 2034 and Metro 2035, but he worked on the Last Light script with 4A Games and is credited with "inspiring" Exodus.</p><p>Fortunately for Glukhovsky, he is not actually in Russia, and was sentenced in absentia. His current whereabouts are unknown.</p>
</div><div data-hydrate="true" id="slice-container-newsletterForm-articleInbodyContent"><section><p>Sign up to get the best content of the week, and great gaming deals, as picked by the editors.</p></section></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Dolphin Emulator Progress Report: May, June, and July 2023 (166 pts)]]></title>
            <link>https://dolphin-emu.org/blog/2023/08/13/dolphin-progress-report-may-june-and-july-2023/</link>
            <guid>37113314</guid>
            <pubDate>Sun, 13 Aug 2023 19:21:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://dolphin-emu.org/blog/2023/08/13/dolphin-progress-report-may-june-and-july-2023/">https://dolphin-emu.org/blog/2023/08/13/dolphin-progress-report-may-june-and-july-2023/</a>, See on <a href="https://news.ycombinator.com/item?id=37113314">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      <header>
<img src="https://dolphin-emu.org/m/user/blog/progress-report/2023-july/progressreportheader-july2023.jpg"> 
<img src="https://dolphin-emu.org/m/user/blog/progress-report/2023-july/progressreportheader-july2023-mini.jpg"> 
</header>

<p>It has been a bit of a tumultuous summer for the project, but now things are returning to normalcy.  For those who somehow missed it, the Dolphin on Steam project <a href="https://dolphin-emu.org/blog/2023/07/20/what-happened-to-dolphin-on-steam/">has ceased</a> after contact between Valve and Nintendo.  Though we disagree with their stance and decision, we respect Valve's right to impose whatever restrictions they want within their private storefront. Please read the full article for details.</p>


<p>Fortunately, all that means is that nothing is going to change. We're going to continue working hard to improve Dolphin and make it the best emulator it can be. </p>
<p>Speaking of which, we hope you enjoy this Dolphin Progress Report!</p>

<h3 id="notable-changes"><strong>Notable Changes</strong><a href="#notable-changes" title="Permanent link">¶</a></h3>
<h4 id="50-19611-implement-custom-driver-support-by-k0bin"><strong><a href="https://dolphin-emu.org/download/dev/master/5.0-19611/">5.0-19611 - Implement Custom Driver Support</a></strong>  by <strong><a href="https://github.com/K0bin">K0bin</a></strong><a href="#50-19611-implement-custom-driver-support-by-k0bin" title="Permanent link">¶</a></h4>
<p><img src="https://dolphin-emu.org/m/user/blog/progress-report/2017-april/android-logo-peeking.png"></p>

<p>GPU drivers for Android devices have come a long way from the <a href="https://dolphin-emu.org/blog/2013/09/26/dolphin-emulator-and-opengl-drivers-hall-fameshame/">nightmare they once were</a>, but they still lag behind their desktop counterparts in many ways. Missing features, performance problems, and plain old bugs are still plentiful on Android drivers. Furthermore, while drivers are improving over time, these improvements <a href="https://www.esper.io/blog/android-dessert-bites-14-gpu-driver-updates-3819534">rarely make their way to existing devices</a>, which is considerably worse than desktop. However, for Dolphin, Android GPU drivers are now at least good enough to <em>work</em> most of the time. There may be bugs or issues, but usually you'll get an image and the emulated title will function.</p>
<p>Emulators for newer consoles weren't so lucky, however, and Android drivers have been an intense pain point for them. This spurred <strong><a href="https://github.com/bylaws">ByLaws</a></strong> to take action and develop the library <a href="https://github.com/bylaws/libadrenotools">libadrenotools</a>, which lets apps temporarily switch out the system driver for a user-provided driver. libadrenotools has tremendously improved the experience of emulating newer consoles on Android devices, as not only does it allow loading of newer versions of official drivers, but it also allows the loading of <em>unofficial</em> open source drivers that are substantially better than their official counterparts. Specifically of note is Freedreno Vulkan, also known as Turnip.  It's a custom driver primarily for Adreno 600 GPUs (though support for Adreno 700 GPUs is in development as well) that is by far the most complete Vulkan driver available for Adreno.</p>
<p><strong><a href="https://github.com/K0bin">K0bin</a></strong> saw all of the improvements that libadrenotools and Turnip granted other emulators and realized that Dolphin could take advantage of them too. With this change, libadrenotools is now integrated into Dolphin, allowing Android users to choose which Vulkan GPU drivers they prefer. While Android driver issues were not as critical for us, the Freedreno driver is a breath of fresh air.  Tons of Vulkan issues that have plagued our Adreno users are <em>gone</em> when using it.</p>


<p>If your GPU is among those supported, Turnip offers an opportunity to get a driver that's much closer to desktop quality.  However, we've only been talking about compatibility and bugs so far. How does Turnip compare to the official drivers in performance? Well, performance can be better, but it isn't always going to be.  Sometimes the more complete implementation of features allows Dolphin to go faster than other drivers, sometimes the fact it's able to emulate things in a more complete manner means that the game might run a little slower.  And, of course, the driver might not implement all features optimally, causing some variations that are out of the control of Dolphin.</p>
<p>Using an older phone, we can compare the Turnip driver to the latest supported Adreno driver and compare performance.  We also compared to the Adreno OpenGL driver - as Turnip is for Vulkan only.  All tests were done at 1x internal resolution in order to test the raw efficiency of the driver to keep maximum performance.</p>

<p>The results vary quite a bit, with a different driver being faster for each game!  However, for the most part performance is pretty similar between the different backends with the main benefit being that Turnip mostly just works.  While there are the occasional bugs, much like with the <em>official</em> Adreno drivers, overall Turnip provides a more consistent experience.  And with it under active development, the problems we have seen are likely to get fixed.</p>
<h5 id="a-note-to-non-adreno-users">A Note to Non-Adreno Users<a href="#a-note-to-non-adreno-users" title="Permanent link">¶</a></h5>
<p>There is nothing fundamentally Adreno-specific about loading custom drivers.  Unfortunately for users with other GPUs, there aren't any viable custom drivers at this time.  If custom drivers do show up for these devices, we'll be able to update Dolphin to load them.</p>
<h4 id="50-19274-add-wiiconnect24-support-via-wiilink-by-sketch"><strong><a href="https://dolphin-emu.org/download/dev/master/5.0-19724/">5.0-19274 - Add WiiConnect24 Support via WiiLink</a></strong>  by <strong><a href="https://github.com/noahpistilli">Sketch</a></strong><a href="#50-19274-add-wiiconnect24-support-via-wiilink-by-sketch" title="Permanent link">¶</a></h4>
<p>When WiiConnect24 shut down so suddenly just over ten years ago in June of 2013, there was a thought among Dolphin developers that WiiConnect24 would never be emulated - at least in Dolphin.  For nearly 10 years, <a href="https://dolphin-emu.org/blog/2022/12/21/dolphin-progress-report-september-october-november-2022/#50-17613-implement-missing-features-for-wiiconnect24-support-by-noahpistilli">that remained true</a>.  However, a lot of the core features of WiiConnect24 were still missing in Dolphin, and setting it up required use of third party tools to patch channels.</p>
<p>In the latest builds of Dolphin, users can now enable WiiConnect24 directly in Dolphin's GUI, allowing you to use the Forecast Channel, Nintendo Channel, and soon the News Channel and Everybody Votes Channel directly in the system menu without the need for patching channel files.  This is all thanks to <strong><a href="https://github.com/noahpistilli">Sketch</a></strong> (aka noahpistilli) who is both implementing critical features in Dolphin's Network/KD and reimplementing the servers which the channels themselves communicate with as the lead developer of <a href="https://www.wiilink24.com/">WiiLink</a>.</p>
<p>This marriage between the two sides of development has led to a WiiConnect24 revolution within Dolphin, and more features will be coming online in the future.</p>


<p>With Dolphin adding support for WiiLink, does this mean RiiConnect24 will not work in Dolphin?  Of course not!  The same methods used to patch channels with RiiConnect24 will continue to work in the latest versions of Dolphin.</p>
<p>Choosing between WiiLink and RiiConnect24 for a default service was not an easy task.  RiiConnect24 has been an invaluable part of the WiiConnect24 preservation scene and will continue to work in Dolphin.  However, with <strong><a href="https://github.com/noahpistilli">Sketch</a></strong> working on both the server side (WiiLink) and the client side (Dolphin), compatibility and stability is currently higher with WiiLink.  As well, there are some features of RiiConnect24 that use cIOS features that do not currently work in Dolphin that are handled without cIOSes in WiiLink.</p>
<p>Something to keep in mind is that Dolphin's priority is to emulate <strong>WiiConnect24</strong> to the best of its ability.  Currently, <strong><a href="https://github.com/noahpistilli">Sketch</a></strong> is reimplementing WiiConnect24 features in a manner that would work alike to the original WiiConnect24 servers.  We are aware that some bugs/inaccuracies in Dolphin's implementation of Network/KD that, when fixed, will require changes from RiiConnect24 in order to maintain compatibility.</p>
<p>We also request that users who have used the RiiConnect24 VFF downloader delete any VFF files created by it,  as well as disable the downloader. The VFFs created by it are made to never expire, meaning new files will never be downloaded by Dolphin. To locate these, click <code>File -&gt; Open User Folder</code> and then navigate to <code>Wii/title/00010002/484146xx/data</code> for the Forecast Channel and <code>Wii/title/00010002/484147xx/data</code> for the News Channel, where <code>xx</code> is <code>45</code> for NTSC-U consoles, <code>50</code> for PAL and <code>4a</code> for Japanese. If you're having problems with WiiLink/RiiConnect24 on the latest builds and have used the VFF downloader in the past, that may be the source of your troubles.</p>
<p>Note for those who want to use an unmodified Nintendo Channel: <strong>Cheats must be enabled in order for the channel to work.</strong></p>
<h4 id="50-19448-android-disney-infinity-base-support-by-dereeperjosh"><strong><a href="https://dolphin-emu.org/download/dev/master/5.0-19448/">5.0-19448 - Android - Disney Infinity Base Support</a></strong>  by <strong><a href="https://github.com/deReeperJosh">deReeperJosh</a></strong><a href="#50-19448-android-disney-infinity-base-support-by-dereeperjosh" title="Permanent link">¶</a></h4>
<p>If everyone is being honest, there probably isn't much point to this feature, at least right now.  The only game that supports the Disney Infinity Base on the Wii is <a href="https://wiki.dolphin-emu.org/index.php?title=Disney_Infinity">Disney Infinity</a>, possibly the crown jewel of the Disney Trio of Destruction.  There is no existing <em>desktop</em> computer that can run the game full speed given how Dolphin currently emulates the game.  For phones, the situation is even worse.</p>


<p>But, maybe some day, some AArch64 JIT improvement and/or some future phone will somehow emulate Disney Infinity at a playable framerate.  Whenever that happens, future Android users will be able to emulate the Infinity Base and get in game without the need for physical hardware.</p>
<h4 id="50-19554-android-fix-trigger-detection-issue-by-josjuice"><strong><a href="https://dolphin-emu.org/download/dev/master/5.0-19554/">5.0-19554 - Android - Fix Trigger Detection Issue</a></strong>  by <strong><a href="https://github.com/JosJuice">JosJuice</a></strong><a href="#50-19554-android-fix-trigger-detection-issue-by-josjuice" title="Permanent link">¶</a></h4>
<p><img src="https://dolphin-emu.org/m/user/blog/progress-report/2023-july/BSPD3_thumb.jpg">
</p>

<p>After the release of the <a href="https://dolphin-emu.org/blog/2023/05/21/dolphin-progress-report-february-march-april-2023/#50-18920-rewrite-android-input-handling-by-josjuice">input handling rewrite</a> a few months ago, there have been a few growing pains.  A rather annoying one for many users was an issue causing trigger inputs from certain controllers to simply be ignored in the menu.  More frustratingly, you could actually <em>manually</em> add them if you knew your way around the advanced mapping options!</p>
<p>This turned out to be relatively easy to fix in the end, though.  The input handling rewrite brought a lot of code from the PC version of Dolphin to the Android version, including a piece of code that is designed to skip over button inputs in case a gamepad provided both a button input and an axis input for a trigger at the same time.  But the affected controllers on Android were doing something that the PC version of Dolphin had never ran into: each trigger provided <em>two</em> axis inputs. Because the code wasn't expecting this, both of the inputs were getting skipped by accident.  With the cause of the problem known, <strong><a href="https://github.com/JosJuice">JosJuice</a></strong> was able to change the code to let both inputs through.</p>
<p>Users that suffered from this regression should be able to configure their controllers directly in the GUI again in the latest Play Store release.</p>
<h4 id="50-19863-add-filesize-checks-to-check-nand-by-admiralcurtiss"><strong><a href="https://dolphin-emu.org/download/dev/master/5.0-19863/">5.0-19863 - Add Filesize Checks to Check NAND</a></strong>  by <strong><a href="https://github.com/AdmiralCurtiss">AdmiralCurtiss</a></strong><a href="#50-19863-add-filesize-checks-to-check-nand-by-admiralcurtiss" title="Permanent link">¶</a></h4>
<p>With the Wii NAND coming more to the forefront with some of Dolphin's latest features, <em>Check NAND</em> has been seeing a lot more usage.  The long-story-short of it is that the Wii File System is <em>extremely</em> tempermental and prone to breaking, so back in the day <strong><a href="https://github.com/leoetlino">leoetlino</a></strong> created a feature that allowed Dolphin to check the Wii NAND for certain common problems and automatically fix them.</p>
<p>Check NAND was mostly a tool used to fix the NAND to get the Wii Shop and <a href="https://wiki.dolphin-emu.org/index.php?title=Dragon_Quest_X:_Mezameshi_Itsutsu_no_Shuzoku_Online">Dragon Quest X</a> working - as even the slightest problem with the NAND would prevent them from booting.  However, it wasn't designed to fix everything, and it'll often say no problems found when in fact there are critical problems with the NAND.</p>
<p>Enter <strong><a href="https://github.com/AdmiralCurtiss">AdmiralCurtiss</a></strong>.  Having debugged an issue where a user's NAND was "overfilled" due to spurious files being placed in the NAND directory, they decided that it was time to expand the scope of Check NAND a bit more.  In the latest versions of Dolphin, Check NAND will now make sure that the NAND size is within the bounds of the Wii NAND.</p>


<p>On a modern computer with terabytes of storage, you might think that the Wii NAND being limited to just 512MB is a bit archaic and that Dolphin should just allow any NAND size.  And we technically do - you can keep adding things to the NAND even if it is over that maximum size.  Unfortunately, the Wii System Menu and many games have checks to make sure that the NAND isn't getting close to full.  Even if we tell the Wii it has way more NAND space, it is <em>hardcoded</em> to use exactly 512MB, with certain portions of it being reserved.</p>
<p>In the past, Dolphin has tried to lie to the emulated Wii about the size of installed files, saying that they were one block no matter how big they were, but this just caused other problems and we ran into other limitations even in situations where that hack did seem to help.  So for now, we're handling things as accurately as possible in order to make sure users don't jeopardize their Wii Save Data.</p>
<p>It's possible there is some magic combination of hacks that could <em>maybe</em> trick the emulated Wii into supporting more/bigger files, but so far we haven't found it.  And considering how many people run into the Wii's paltry NAND size limits, a hack like this wouldn't see much resistance into being merged as an option.</p>
<h4 id="50-19716-support-accurate-ntscpal-color-spaces-by-filoppi"><strong><a href="https://dolphin-emu.org/download/dev/master/5.0-19716/">5.0-19716 - Support Accurate NTSC/PAL Color Spaces</a></strong>  by <strong><a href="https://github.com/Filoppi">Filoppi</a></strong><a href="#50-19716-support-accurate-ntscpal-color-spaces-by-filoppi" title="Permanent link">¶</a></h4>
<p>The GameCube and Wii were designed with analog CRT televisions in mind. In this era, "close enough" was the rule of the day. For example, each region had their own slightly different color spaces and gamma targets. Games almost never accounted for these differences, so how each game would appear varied slightly from region to region! To emulate this, Filoppi (helped by <a href="https://github.com/EndlesslyFlowering">Lilium</a>) has implemented a suit of color space and gamma correction settings.</p>
<p>Dolphin's color correction provides several color space options. Using these profiles, you can now set Dolphin to match the colour space of any given region and either make it match how you remember it in your region, or just see how your game would look in an entirely different region!</p>


<p>Something a little more impactful from these changes is <em>gamma correction</em>.  Most GameCube games (and some Wii games) targeted a gamma value of roughly 2.35.  Modern televisions and monitors normally use a value of 2.2, which can result in these games looking a tiny bit brighter than they would have (by default) on hardware of the day.</p>


<p>While it's possible for users to adjust their monitor's settings, and <em>some</em> games come with built-in gamma correction, <strong><a href="https://github.com/Filoppi">Filoppi</a></strong> added gamma correction to the color space features within Dolphin's settings in order to streamline the experience.</p>
<p>Note that these settings and features have not been ported to the Android version of Dolphin yet, however that is <a href="https://github.com/dolphin-emu/dolphin/pull/12095">in progress</a>.</p>
<h3 id="last-months-contributors"><strong>Last Month's Contributors...</strong><a href="#last-months-contributors" title="Permanent link">¶</a></h3>
<p>Special thanks to <a href="https://github.com/dolphin-emu/dolphin/graphs/contributors?from=2023-05-01&amp;to=2023-07-01&amp;type=c">all of the contributors</a> that incremented Dolphin from <a href="https://dolphin-emu.org/download/dev/master/5.0-19370/">5.0-19370</a> through to <a href="https://dolphin-emu.org/download/dev/master/5.0-19870/">5.0-19870</a>! </p>




    
    
    

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Toki Pona: an attempted universal language with only ~120 words (432 pts)]]></title>
            <link>https://cohost.org/mcc/post/59045-mi-kama-sona-e-toki</link>
            <guid>37113307</guid>
            <pubDate>Sun, 13 Aug 2023 19:20:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://cohost.org/mcc/post/59045-mi-kama-sona-e-toki">https://cohost.org/mcc/post/59045-mi-kama-sona-e-toki</a>, See on <a href="https://news.ycombinator.com/item?id=37113307">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-post-body="true" data-testid="post-body"><p>So I stumbled a few weeks ago on <!-- --><a href="https://www.youtube.com/watch?v=E4y7tf3VJAM" target="_blank" rel="nofollow noopener noreferrer">this video<!-- --></a> about the world's smallest conlang and I've been thinking about it ever since.<!-- --></p>
<!-- --><p><a href="https://www.youtube.com/watch?v=E4y7tf3VJAM" target="_blank" rel="nofollow noopener noreferrer"><img src="https://staging.cohostcdn.org/attachment/91c54129-9425-4695-bd68-6f65d83ae793/maxresdefault.jpeg"></a></p>
<!-- --><p><i>(You will probably have the idea more than fully by the ten minute mark.)<!-- --></i></p>
<!-- --><p>This fascinated me. I think languages are really interesting but I'm also really <!-- --><i>bad<!-- --></i> at them. I cannot hack the memorization. I've mostly avoided conlangs (that's Constructed Languages, like Esperanto or Klingon) because like, oh no, now there's <!-- --><i>even more languages<!-- --></i> for me to fail at memorizing. So like, a language so minimal you can almost learn it by <!-- --><i>accident<!-- --></i>, suddenly my ears perk up.<!-- --></p>
<!-- --><p>Toki pona is <!-- --><i>really interesting<!-- --></i>, on a lot of different axes. It's a thought experiment in Taoist philosophy that turns out to be actually, practically useful. It's Esperanto But It Might Actually Work This Time¹. It has NLP implications— it's a human language which feels natural to speak yet has such a deeply logical structure it seems nearly custom-designed for simple computer programs to read and write it². Beyond all this it's simply beautiful as an intellectual object—&nbsp;nearly every decision it makes feels deeply right. It solves a seemingly insoluble problem³ and does it with a sense of effortlessness and an <!-- --><a href="https://staging.cohostcdn.org/attachment/747b4517-a3cf-438b-a6a0-07ad9e6883fd/Toki_pona.svg.png" target="_blank" rel="nofollow noopener noreferrer">implied "LOL"<!-- --></a> at every step.<!-- --></p>
<!-- --><p>So what toki pona is. Toki pona is a language designed around the idea of being <!-- --><i>as simple as it is possible for a language to be<!-- --></i>. It has 120 words in its original form (now, at the twenty year mark, up to 123), but you can form a lot of interesting sentences with only around twenty or thirty (I know this because this is roughly the size of my current tok vocabulary). <!-- --><a href="https://devurandom.xyz/tokipona/dictionary.html" target="_blank" rel="nofollow noopener noreferrer">The whole tok-&gt;en dictionary fits on seventeen printed pages<!-- --></a>⁴. There are no conjugations or tenses to memorize. There are no <!-- --><i>parts of speech<!-- --></i>, generally: almost every single word can be used as almost any part of speech, drop a pronoun or a preposition⁵ in the right place and it becomes a verb, drop a verb in the right place and it becomes an adjective. There are almost no ambiguities in sentence structure; I've only found one significant one so far (using "of" [<!-- --><tt>pi<!-- --></tt>] twice in the same clause) and the community deals with this by just agreeing not to do that. There's in one sense quite a lot of ambiguity in the vocabulary but in another sense there's none; for example <!-- --><tt>nena<!-- --></tt> is listed in the dictionary as meaning <!-- --><i>hill, mountain, button, bump, nose<!-- --></i>, but the official ideology of Toki Pona is that this is not a word with five definitions, it is <!-- --><i>a word with exactly one definition, that being the concept encompassing all five of hills, mountains, buttons, bumps, and noses<!-- --></i>. Toki pona words are not ambiguous, they're just <!-- --><i>broad<!-- --></i>. I will now teach you enough toki pona to understand most sentences (assuming you consult the <!-- --><a href="https://devurandom.xyz/tokipona/dictionary.html" target="_blank" rel="nofollow noopener noreferrer">dictionary<!-- --></a> as you go) in a paragraph shorter than this one:<!-- --></p>
<!-- --><p>Every sentence has an "verb" or action clause. Most sentences also have a subject clause, which goes before the verb separated by "<!-- --><tt>li<!-- --></tt>". Some sentences also have an "object" or target clause, which goes after the verb clause separated by "<!-- --><tt>e<!-- --></tt>". So "[subject] <!-- --><tt>li<!-- --></tt> [verb] <!-- --><tt>e<!-- --></tt> [object]". All three clauses are any number of words, the first word is the noun (or verb) and the rest are adjectives (or adverbs). If the first word in a sentence is <!-- --><tt>mi<!-- --></tt> or <!-- --><tt>sina<!-- --></tt> you can omit the <!-- -->li in that case <!-- --><i>only<!-- --></i>. There is no "is", a sentence like "a flower is red" is just "[a plant] <!-- --><tt>li<!-- --></tt> [red]" because there are no parts of speech and adjectives are verbs. Pronounce everything the way you would in English except "j" sounds like "y". If you see "<!-- --><tt>tawa<!-- --></tt>", "<!-- --><tt>lon<!-- --></tt>", "<!-- --><tt>tan<!-- --></tt>" or "<!-- --><tt>kepeken<!-- --></tt>" in adjective/adverb position that's a preposition, so treat whatever comes after it as a fourth clause. "<!-- --><tt>a<!-- --></tt>" and "<!-- --><tt>n<!-- --></tt>" are interjections and can go anywhere in a sentence. If you see "<!-- --><tt>o<!-- --></tt>", "<!-- --><tt>pi<!-- --></tt>", "<!-- --><tt>la<!-- --></tt>", "<!-- --><tt>taso<!-- --></tt>, "<!-- --><tt>anu<!-- --></tt>" or "<!-- --><tt>en<!-- --></tt>", then you've found one of the few special words (particles) and you should probably either read the <!-- --><a href="https://www.amazon.com/dp/B012M1RLXS/" target="_blank" rel="nofollow noopener noreferrer">book<!-- --></a> or watch the <!-- --><a href="https://www.youtube.com/playlist?list=PLLIjft6ja7DM70MkOMu56c4Grku7LXR61" target="_blank" rel="nofollow noopener noreferrer">jan Misali instructional videos<!-- --></a> on YouTube.<!-- --></p>
<!-- --><p>That's like… almost it!⁶ Watch one youtube video, or read a half page of grammar summary and keep the dictionary open on your phone, and you're basically ready to jump into conversations. (You'll need those last six particles to make nuanced sentences, but sentences do not have to be nuanced.) In my own case I watched the Langfocus video linked at the top and then lazily over the next week watched the <!-- --><a href="https://www.youtube.com/watch?v=eLn6LC1RpAo" target="_blank" rel="nofollow noopener noreferrer">jan Misali overview<!-- --></a> and two of their instructional videos then read a few chapters of the book, and was already able to construct a full paragraph and be understood by another person:<!-- --></p>
<!-- --><blockquote>
<!-- --><p><tt>o! mi sona e toki pona. mi lukin sona e toki mute... taso mi toki ike e toki ale. toki mute li jo e nimi mute. nimi mute li pona ala tawa mi. toki pona li pona e mi tan ni. toki pona li jo nimi lili. nimi lili li pona e me :)<!-- --></tt></p>
<!-- --></blockquote>
<!-- --><p>(<!-- --><i>Translation:<!-- --></i> <!-- --><span>Hello! I am learning toki pona. I've tried to learn many languages… but I speak all of the[m] badly. Most languages have a lot of words. Lots of words is not good for me. Toki pona is good for me because of this. Toki pona has few words. Few words is good for me :)<!-- --></span>⁷)<!-- --></p>
<!-- --><p>So that's week one. By the end of week three (that'll be this past Sunday) I had hit three milestones:<!-- --></p>
<!-- --><ul>
<!-- --><li>I was able to make a joke in toki pona. Not a good one.<!-- --></li>
<!-- --><li>When the joke misfired, I was able to successfully toss off an entire complex paragraph rapidly without really thinking about it.<!-- --></li>
<!-- --><li>Probably a sign I Am Getting It more significant than anything else: I realized that talking on the Discord I was dropping toki pona words into my English sentences <!-- --><i>solely because the toki pona word seemed to me to communicate a concept I wanted to communicate more precisely than any particular English word<!-- --></i>.<!-- --></li>
<!-- --></ul>
<!-- --><p>(That last one actually kind of excited me when I realized, after the fact, that it had been happening for several days before I noticed it.)<!-- --></p>
<!-- --><p>All of the above happened on the toki pona Discord, which seems to be the largest and healthiest outpost of toki pona community online⁸ and, I assume therefore, the world. Here's my toki pona joke; you'll notice that I begin by preemptively apologizing for it, but by the end it becomes clear I was, at that moment anyway, apparently completely on the Discord's level:⁹<!-- --></p>
<!-- --><p><img src="https://staging.cohostcdn.org/attachment/d5366ff6-ae17-4c70-a900-a02ac307f108/tokipona_conversation.png"></p><!-- --><hr>
<!-- --><p><b>Footnotes<!-- --></b></p><!-- --><p>¹ Esperanto was meant to be an auxillary language simple enough the entire world could learn it as a second language. But it does not seem to me to be actually all that simple to learn (the verb tenses may be free of exceptions, but there are still like six of them) and it seems hard to convince myself to study it when I could put that effort toward a more widespread language. Toki Pona on the other hand is a language simple enough <!-- --><i>the entire world actually could learn it<!-- --></i>, had it reason to, and the buy-in cost in time is a lot lower. Meanwhile Toki Pona just seems to get certain international-accessibility things <!-- --><i>right<!-- --></i>, probably due to the advantage of having over a century of conlang practice <!-- --><i>largely inspired by Esperanto<!-- --></i> to draw from. The difference that's most interesting to me, but which I'm also least qualified to evaluate, is that the Toki Pona author had some basic familiarity with, and gave Toki Pona input from, east Asian languages. Both Toki Pona and Esperanto draw roots from a variety of languages but in Esperanto's case this winds up being mostly European languages, mostly Italian, whereas Toki Pona has Mandarin and Cantonese in its mix. Both languages were intended to have a minimal, universal phonology but Esperanto's is not very universal at all and has some consonant sounds that are going to be be totally unfamiliar unless you speak Polish or a language related to Polish. Toki Pona's phonology is <!-- --><i>actually<!-- --></i> minimal-- it has the letters in the sentence "<!-- --><tt>mi jan pi ko suwi lete<!-- --></tt>" and <!-- --><i>nothing else<!-- --></i> and the legal syllabary is basically hiragana without the combination syllables. Now, what I don't know is whether any of this <!-- --><i>actually helps<!-- --></i> speakers of Asian languages in practice or if it just makes surface choices that make it seem that way to a westerner like me. In practice if you find a toki pona speaker their native language is almost certainly English, so there doesn't seem to have been a great deal of testing as to how learnable it is to people from varied regions.<!-- --></p>
<!-- --><p>² I kept imagining toki pona as being like LLVM IR for human languages or something.<!-- --></p>
<!-- --><p>³ Designing an actually learnable, universal(?) international auxillary language.<!-- --></p>
<!-- --><p>⁴ By which I mean if you print the unofficial web version it's 17 pages long. But you can fit it in sixteen if you remove the web-specific introductory paragraph, the "joke word" <!-- --><tt>kijetesantakalu<!-- --></tt>, and the web footer with the "trans rights now!" banner in it.<!-- --></p>
<!-- --><p>⁵ There's an awkward nuance in the specific case of prepositions: if you drop a preposition into verb position it still winds up "behaving like" a preposition, it's just that the preposition describes an action. It's probably more accurate to say that the <!-- --><i>preposition phrase<!-- --></i> becomes a verb rather than the preposition itself. So for example "<!-- --><tt>mi tawa kalama<!-- --></tt>" means "I went toward the sound" [<!-- --><tt>kamala<!-- --></tt> is a noun and the object of the preposition] not "I went loudly" [as it would be if <!-- --><tt>kamala<!-- --></tt> were an adverb modifying <!-- --><tt>tawa<!-- --></tt> as a verb]. Going into detail on this because I don't want to mislead anyone but "you can form a sentence using an unmodified preposition as a verb" is such a fun fact I wanted to include it.<!-- --></p>
<!-- --><p>⁶ I guess I could say "what I'm calling 'clauses' are called 'word groups' in official sources; word groups are always separated by a particle or preposition" but I'm not sure that's interesting unless you're a linguist.<!-- --></p>
<!-- --><p>⁷ There's a lot of repetition in this paragraph of both kinds that show what's cool about toki pona and what's kinda impractical about it. Cool, it has some sentences where a single word shows up twice conveying two different clear things based only on where it is in the sentence, like "<!-- --><tt>mi toki ike e toki ale<!-- --></tt>" where <!-- --><tt>toki<!-- --></tt> is a verb ("I speak") the first time and a noun ("language") the second. Less cool, because so much of the meaning of the hyper-versatile toki pona words is based on context, you sometimes wind up having to include multiple sentences saying nearly the same thing just to make sure the reader selects the correct context. I may have overdone it here.<!-- --></p>
<!-- --><p>⁸ There's also a low-traffic Mastodon instance, multiple forums including one run by the Merveilles crowd, and something called "<!-- --><tt>Wikipesija<!-- --></tt>"<!-- --></p>
<!-- --><p>⁹ Translation/explanation:<!-- --></p>
<!-- --><ul>
<!-- --><li>ME: <!-- --><tt>jan utala pi toki ni<!-- --></tt> <!-- --><i>["We are the knights who say 'this'!"]<!-- --></i><br>
<!-- --><i>("<!-- --><tt>ni<!-- --></tt>" is "this" in toki pona, which means the Holy Grail scene would seem to be the guy yelling "We are the knights who say 'We are the knights who say this!'" after which everyone else jumps around yelling "this!" "this!" as if agreeing)<!-- --></i></li>
<!-- --><li>PERSON 1: <!-- --><i>(Responding to the fact I initially mispelled "<!-- --><tt>toki<!-- --></tt>" as "toka")<!-- --></i> What is a toka<!-- --></li>
<!-- --><li>ME: ... spelling error :( ... deeply weird one<!-- --><br>
<!-- --><i>(Weird because toki is literally in the name "toki pona" so it is by definition the first toki pona word anyone learns)<!-- --></i></li>
<!-- --><li>BOT 1: a and i are 8 keys apart :/<!-- --></li>
<!-- --><li>BOT 2: <!-- --><i>(Trying to translate my comment)<!-- --></i> Could be "an arguer in this conversation" perhaps?<!-- --></li>
<!-- --><li>ME: <!-- --><tt>mi jo e ijo ike sina pi sijelo pi luka luka luka tu tu lon tenpo suno ni. sona lawa mi li pona ala tawa ni<!-- --></tt> <!-- --><i>["I have [[literal translation: "new bad thing of the body-19"]] today. I am not thinking well because of this."]<!-- --></i><br>
If that doesn't come across that's the best I can do right now<!-- --></li>
<!-- --><li>PERSON 2: "<!-- --><tt>toki<!-- --></tt>" <!-- --><i>[lit. "It communicates!"]<!-- --></i></li>
<!-- --><li>BOT 1: two <!-- --><tt>PI<!-- --></tt>s <!-- --><i>(Complaining you're not supposed to chain "of" clauses like I did)<!-- --></i></li>
<!-- --><li><i>(Skipped)<!-- --></i></li>
<!-- --><li>PERSON 2: <!-- --><tt>tenpo Mopiju li lon<!-- --></tt> <!-- --><i>[literal translation: "It is the time of Morbin'!"]<!-- --></i><br>
EMOJI REACTIONS: <!-- --><i>S O N Y <!-- --><tt>a!<!-- --></tt> <!-- --><i>[apparent intended translation: "Sony is angry now!"]<!-- --></i>
<!-- --></i></li><i>
<!-- --></i></ul></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Azure ChatGPT: Private and secure ChatGPT for internal enterprise use (783 pts)]]></title>
            <link>https://github.com/microsoft/azurechatgpt</link>
            <guid>37112741</guid>
            <pubDate>Sun, 13 Aug 2023 18:35:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/microsoft/azurechatgpt">https://github.com/microsoft/azurechatgpt</a>, See on <a href="https://news.ycombinator.com/item?id=37112741">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" dir="auto">Unleash the Power of Azure Open AI</h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/azurechatgpt/blob/main/images/intro.png"><img src="https://github.com/microsoft/azurechatgpt/raw/main/images/intro.png" alt=""></a></p>
<p dir="auto">ChatGPT has grown explosively in popularity as we all know now. Business users across the globe often tap into the public service to work more productively or act as a creative assistant.</p>
<p dir="auto">However, ChatGPT risks exposing confidential intellectual property. One option is to block corporate access to ChatGPT, but people always find workarounds. This also limits the powerful capabilities of ChatGPT and reduces employee productivity and their work experience.</p>
<p dir="auto">Azure ChatGPT is our enterprise option. This is the exact same service but offered as your private ChatGPT.</p>
<h3 tabindex="-1" dir="auto">Benefits are:</h3>
<p dir="auto"><strong>1. Private:</strong> Built-in guarantees around the privacy of your data and fully isolated from those operated by OpenAI.</p>
<p dir="auto"><strong>2. Controlled:</strong> Network traffic can be fully isolated to your network and other enterprise grade security controls are built in.</p>
<p dir="auto"><strong>3. Value:</strong> Deliver added business value with your own internal data sources (plug and play) or use plug-ins to integrate with your internal services (e.g., ServiceNow, etc).</p>
<p dir="auto">We've built a Solution Accelerator to empower your workforce with Azure ChatGPT.</p>
<h2 tabindex="-1" dir="auto">Getting Started</h2>
<ol dir="auto">
<li><a href="https://github.com/microsoft/azurechatgpt/blob/main/docs/1-introduction.md"> Introduction</a></li>
<li><a href="https://github.com/microsoft/azurechatgpt/blob/main/docs/2-provision-azure-resources.md">Provision Azure Resources</a></li>
<li><a href="https://github.com/microsoft/azurechatgpt/blob/main/docs/3-run-locally.md">Run Azure ChatGPT from your local machine</a></li>
<li><a href="https://github.com/microsoft/azurechatgpt/blob/main/docs/4-deployto-azure.md">Deploy Azure ChatGPT to Azure</a></li>
<li><a href="https://github.com/microsoft/azurechatgpt/blob/main/docs/5-add-Identity.md">Add identity provider</a></li>
<li><a href="https://github.com/microsoft/azurechatgpt/blob/main/docs/6-chat-over-file.md">Chatting with your file</a></li>
<li><a href="https://github.com/microsoft/azurechatgpt/blob/main/docs/7-environment-variables.md">Environment variables</a></li>
</ol>
<h2 tabindex="-1" dir="auto">Contributing</h2>
<p dir="auto">This project welcomes contributions and suggestions. Most contributions require you to agree to a
Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us
the rights to use your contribution. For details, visit <a href="https://cla.opensource.microsoft.com/" rel="nofollow">https://cla.opensource.microsoft.com</a>.</p>
<p dir="auto">When you submit a pull request, a CLA bot will automatically determine whether you need to provide
a CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions
provided by the bot. You will only need to do this once across all repos using our CLA.</p>
<p dir="auto">This project has adopted the <a href="https://opensource.microsoft.com/codeofconduct/" rel="nofollow">Microsoft Open Source Code of Conduct</a>.
For more information see the <a href="https://opensource.microsoft.com/codeofconduct/faq/" rel="nofollow">Code of Conduct FAQ</a> or
contact <a href="mailto:opencode@microsoft.com">opencode@microsoft.com</a> with any additional questions or comments.</p>
<h2 tabindex="-1" dir="auto">Trademarks</h2>
<p dir="auto">This project may contain trademarks or logos for projects, products, or services. Authorized use of Microsoft
trademarks or logos is subject to and must follow
<a href="https://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/usage/general" rel="nofollow">Microsoft's Trademark &amp; Brand Guidelines</a>.
Use of Microsoft trademarks or logos in modified versions of this project must not cause confusion or imply Microsoft sponsorship.
Any use of third-party trademarks or logos are subject to those third-party's policies.</p>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[‘I've got nothing to hide’ and other misunderstandings of privacy (2007) (292 pts)]]></title>
            <link>https://papers.ssrn.com/sol3/papers.cfm?abstract_id=998565</link>
            <guid>37112625</guid>
            <pubDate>Sun, 13 Aug 2023 18:23:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=998565">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=998565</a>, See on <a href="https://news.ycombinator.com/item?id=37112625">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
	
	
		
	

	
	
		
		
	

	
	

	
	
	
	
	
    
        
    

	

	
	<p>
		
		
			<span>28 Pages</span>
		
		

		<span>Posted: 12 Jul 2007</span>
		
			<span>Last revised: 27 Feb 2014</span>
		
		
	</p>
	
		
	
	
	
	
	



	
	
	
	
	
		
	

	
	
		
		
		
		
		
	

	
	
		
	
	<div>
		<h3>Abstract</h3>
		<p>In this short essay, written for a symposium in the San Diego Law Review, Professor Daniel Solove examines the nothing to hide argument.  When asked about government surveillance and data mining, many people respond by declaring: "I've got nothing to hide."  According to the nothing to hide argument, there is no threat to privacy unless the government uncovers unlawful activity, in which case a person has no legitimate justification to claim that it remain private.  The nothing to hide argument and its variants are quite prevalent, and thus are worth addressing.  In this essay, Solove critiques the nothing to hide argument and exposes its faulty underpinnings. </p>
	</div>
	

	<center>
		
		


	

	
	

		
		

	
	


	</center>

	
	
	
		
	
	
	

	
	
		
		
			
				
			
		
		<p><strong>Keywords:</strong> privacy, nothing to hide, data mining, surveillance</p>
	
	

		

	
	
		<p><strong>JEL Classification:</strong> C80, D80</p>
	
	

	
	

	
	

























    	
	
	
	
   	
	
	
	
	
	            
	

























    
    








    
    
    
    
















	






	<p>
		<strong>Suggested Citation:</strong>
		<a href="#">Suggested Citation<i></i></a>
	</p>

	<p>
		
			Solove,  Daniel J., 'I've Got Nothing to Hide' and Other Misunderstandings of Privacy. San Diego Law Review, Vol. 44, p. 745, 2007, GWU Law School Public Law Research Paper No. 289,  Available at SSRN: <a href="https://ssrn.com/abstract=998565" target="_blank">https://ssrn.com/abstract=998565</a>
		
	</p>
	

	
	
	

	
	

	
	
		
	

	
	
	
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Downloading a video should be “fair use” as recording a song from the radio (626 pts)]]></title>
            <link>https://mastodon.social/@HalvarFlake/110883667162838296</link>
            <guid>37112615</guid>
            <pubDate>Sun, 13 Aug 2023 18:22:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mastodon.social/@HalvarFlake/110883667162838296">https://mastodon.social/@HalvarFlake/110883667162838296</a>, See on <a href="https://news.ycombinator.com/item?id=37112615">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[US inflation means families are spending $709 more per month than two years ago (163 pts)]]></title>
            <link>https://www.cnn.com/2023/08/11/economy/inflation-rate-spending/index.html</link>
            <guid>37112604</guid>
            <pubDate>Sun, 13 Aug 2023 18:21:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cnn.com/2023/08/11/economy/inflation-rate-spending/index.html">https://www.cnn.com/2023/08/11/economy/inflation-rate-spending/index.html</a>, See on <a href="https://news.ycombinator.com/item?id=37112604">Hacker News</a></p>
<div id="readability-page-1" class="page"><section data-editable="main" data-track-zone="main" data-reorderable="main">  <article data-uri="cms.cnn.com/_components/article/instances/h_0911581eec816454e32abc5942dbedfb@published" role="main" data-unselectable="true">
      
  <section data-tabcontent="Content">
    <main>
                <div data-uri="cms.cnn.com/_components/video-inline/instances/h_48dc7d12e77cbf033cbe747cc832112f-h_0911581eec816454e32abc5942dbedfb-pageTop@published" data-editable="lede" data-freewheel-lede="true">
        <div data-uri="cms.cnn.com/_components/video-resource/instances/h_48dc7d12e77cbf033cbe747cc832112f-h_0911581eec816454e32abc5942dbedfb-pageTop@published" data-component-name="video-resource" data-editable="featuredVideo" data-video-id="business/2023/08/11/exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business.cnn" data-live="" data-analytics-aggregate-events="true" data-custom-experience="" data-asset-type="" data-medium-env="prod" data-autostart="true" data-show-ads="true" data-source="CNN" data-featured-video="true" data-headline="U.S. inflation increases for the first time in a year" data-description="CNN's Matt Egan goes through the latest U.S. inflation numbers with Richard Quest.<br />" data-duration="03:04" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230811020010-exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business-00002001.png?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230811020010-exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business-00002001.png?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-018118af269c433735eb813719a6ce28@published" data-name="exp us inflation higher rates egan live 081003PSEG1 cnni business_00002001" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230811020010-exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business-00002001.png?c=original" data-unselectable="true" id="player-cms.cnn.com/_components/video-resource/instances/h_48dc7d12e77cbf033cbe747cc832112f-h_0911581eec816454e32abc5942dbedfb-pageTop@published">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230811020010-exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business-00002001.png?c=16x9&amp;q=w_850,c_fill" alt="exp us inflation higher rates egan live 081003PSEG1 cnni business_00002001.png" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920"></picture>
    </div>
            
            <div>
                <p>U.S. inflation increases for the first time in a year</p>
                <p><span>
                            03:04
                        </span>
                        <span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p>
            </div>
        </div>
          <div data-uri="cms.cnn.com/_components/video-playlist/instances/h_997b8afb5be042ec69eeccc4d3764d98-h_0911581eec816454e32abc5942dbedfb@published" data-items-layout="list" data-component-name="video-playlist" data-editable="settings">
    <p><span data-editable="headline">Top business news</span>
      <span>16 videos</span>
    </p>
    <div data-editable="videos" data-reorderable-component="videos">
                
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_48dc7d12e77cbf033cbe747cc832112f-h_0911581eec816454e32abc5942dbedfb-pageTop@published" data-component-name="video-resource" data-editable="settings" data-index="idx-0" data-canonical-url-path="/videos/business/2023/08/11/exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_48dc7d12e77cbf033cbe747cc832112f-h_0911581eec816454e32abc5942dbedfb-pageTop@published" data-video-id="business/2023/08/11/exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business.cnn" data-live="" data-headline="U.S. inflation increases for the first time in a year" data-description="CNN's Matt Egan goes through the latest U.S. inflation numbers with Richard Quest.<br />" data-duration="03:04" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230811020010-exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business-00002001.png?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230811020010-exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business-00002001.png?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-018118af269c433735eb813719a6ce28@published" data-name="exp us inflation higher rates egan live 081003PSEG1 cnni business_00002001" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230811020010-exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business-00002001.png?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230811020010-exp-us-inflation-higher-rates-egan-live-081003pseg1-cnni-business-00002001.png?c=16x9&amp;q=w_250,c_fill" alt="exp us inflation higher rates egan live 081003PSEG1 cnni business_00002001.png" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920"></picture>
    </div>
            
            <div>
                <p>U.S. inflation increases for the first time in a year</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            03:04
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_a8fb1c573f63264eeca9b467c48b57d4-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-1" data-canonical-url-path="/videos/business/2023/07/31/twitter-x-sign-san-francisco-elon-musk-cnntm-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_a8fb1c573f63264eeca9b467c48b57d4-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/07/31/twitter-x-sign-san-francisco-elon-musk-cnntm-vpx.cnn" data-live="" data-headline="Why San Francisco is frustrated with Twitter's new, giant 'X' sign" data-description="The city of San Francisco has filed a complaint against the headquarters of the company formerly known as Twitter for installing the new flashing &quot;X&quot; logo on top of the building without a permit. CNN's Sara Fischer has more. " data-duration="01:58" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230731093157-twitter-x-sign-night.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230731093157-twitter-x-sign-night.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-70640b4fcb1eb71c1a74ee42525fa649@published" data-name="twitter x sign night" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230731093157-twitter-x-sign-night.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230731093157-twitter-x-sign-night.jpg?c=16x9&amp;q=w_250,c_fill" alt="twitter x sign night" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920"></picture>
    </div>
            
            <div>
                <p>Why San Francisco is frustrated with Twitter's new, giant 'X' sign</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            01:58
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_cb388558603faf509956c031a0160a11-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-2" data-canonical-url-path="/videos/business/2023/07/13/ai-music-song-drake-weeknd-midler-orig.cnn-business" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_cb388558603faf509956c031a0160a11-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/07/13/ai-music-song-drake-weeknd-midler-orig.cnn-business" data-live="" data-headline="A 1980's Bette Midler case could decide the fate of AI in music" data-description="AI voice cloning has already made a fake viral Drake collaboration with The Weeknd and this could be just the beginning. See how people are stealing singers' likenesses and why an old Bette Midler copyright case could have major ramifications." data-duration="04:47" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                CNN Business
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230712215934-jay-stoller-music-ai.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230712215934-jay-stoller-music-ai.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-a65024fa8d89567324c0f495ca2e3c96@published" data-name="Jay stoller music ai" data-component-name="image" data-observe-resizes="" data-original-ratio="0.75" data-original-height="1080" data-original-width="1440" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230712215934-jay-stoller-music-ai.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230712215934-jay-stoller-music-ai.jpg?c=16x9&amp;q=w_250,c_fill" alt="Jay stoller music ai" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1440"></picture>
    </div>
            
            <div>
                <p>A 1980's Bette Midler case could decide the fate of AI in music</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            04:47
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                CNN Business
    </span>
                </p></div>
            </div>
        </div>

                
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_d6b42fa5ab3612a1ff62adb569581bbd-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-3" data-canonical-url-path="/videos/business/2023/07/17/writer-responds-disney-ceo-bob-iger-strike-alex-okeefe-the-bear-sot-amanpour-mwrmx-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_d6b42fa5ab3612a1ff62adb569581bbd-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/07/17/writer-responds-disney-ceo-bob-iger-strike-alex-okeefe-the-bear-sot-amanpour-mwrmx-vpx.cnn" data-live="" data-headline="He says he lived below the poverty line while working on hit show. Hear his reaction to CEO's strike comments" data-description="Alex O'Keefe wrote on the hit Hulu show &quot;The Bear,&quot; but says he was severely underpaid. Hear his response to Disney CEO Bob Iger saying the expectations of the writers and actors who are striking are unrealistic." data-duration="01:29" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230717200648-okeefe-writer-amanpour-vpx.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230717200648-okeefe-writer-amanpour-vpx.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<a data-uri=&quot;cms.cnn.com/_components/show/instances/show_5A051FE7-EB3F-8AA8-CC85-FA08194B5219@published&quot; href=&quot;https://www.cnn.com/shows/amanpour&quot; class=&quot;show show__showlink-url&quot;> Amanpour
    </a>" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-85fbfbb3639561deacb1b38af3e1177c@published" data-name="okeefe writer amanpour vpx" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230717200648-okeefe-writer-amanpour-vpx.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230717200648-okeefe-writer-amanpour-vpx.jpg?c=16x9&amp;q=w_250,c_fill" alt="okeefe writer amanpour vpx" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920"></picture>
    </div>
            
            <div>
                <p>He says he lived below the poverty line while working on hit show. Hear his reaction to CEO's strike comments</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            01:29
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_93331c9ae8be9e02596d09e341f532eb-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-4" data-canonical-url-path="/videos/business/2023/07/11/bud-light-kid-rock-nashville-bar-young-cprog-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_93331c9ae8be9e02596d09e341f532eb-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/07/11/bud-light-kid-rock-nashville-bar-young-cprog-vpx.cnn" data-live="" data-headline="Kid Rock declared a Bud Light boycott. Here's what CNN saw at his bar" data-description="CNN's Ryan Young visits the country music hot spot Nashville, Tennessee, to see how the controversy surrounding Bud Light is playing out amongst bar patrons." data-duration="03:24" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230711194438-kid-rock-nashville-bar.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230711194438-kid-rock-nashville-bar.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-11bf97a2d15bcf377025ae455e96a9fc@published" data-name="kid rock nashville bar" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230711194438-kid-rock-nashville-bar.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230711194438-kid-rock-nashville-bar.jpg?c=16x9&amp;q=w_250,c_fill" alt="kid rock nashville bar" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>
            
            <div>
                <p>Kid Rock declared a Bud Light boycott. Here's what CNN saw at his bar</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            03:24
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_b393392a1e8ff93bcbc699bc077300f9-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-5" data-canonical-url-path="/videos/business/2023/07/07/elon-musk-spacex-launch-texas-environment-lavandera-pkg-ebof-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_b393392a1e8ff93bcbc699bc077300f9-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/07/07/elon-musk-spacex-launch-texas-environment-lavandera-pkg-ebof-vpx.cnn" data-live="" data-headline="Debris from Elon Musk's SpaceX launch scattered, raising environmental concerns" data-description="CNN's Ed Lavandera explores the surroundings of Elon Musk's SpaceX launch pad tower in Brownsville, Texas where remnants from April's launch, in which the rocket blew up before reaching space, are scattered. A group is tracking the environmental impact of SpaceX launches on the peninsula.  " data-duration="05:16" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230707201901-spacex-lavandera-pkg.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230707201901-spacex-lavandera-pkg.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<a data-uri=&quot;cms.cnn.com/_components/show/instances/show_4E71F009-862D-73F6-CD76-6FE946F4C52F@published&quot; href=&quot;https://www.cnn.com/shows/erin-burnett-out-front&quot; class=&quot;show show__showlink-url&quot;> Erin Burnett Out Front
    </a>" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-89ae11a2f70299d0825852230bb90ffc@published" data-name="SpaceX lavandera pkg" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230707201901-spacex-lavandera-pkg.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230707201901-spacex-lavandera-pkg.jpg?c=16x9&amp;q=w_250,c_fill" alt="SpaceX lavandera pkg" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>
            
            <div>
                <p>Debris from Elon Musk's SpaceX launch scattered, raising environmental concerns</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            05:16
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_0a8fc618bdf4a0499481f845332fa9e1-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-6" data-canonical-url-path="/videos/business/2023/07/05/fast-fashion-impact-climate-environment-shein-china-cnntm-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_0a8fc618bdf4a0499481f845332fa9e1-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/07/05/fast-fashion-impact-climate-environment-shein-china-cnntm-vpx.cnn" data-live="" data-headline="Consumers have 'five times' more clothes than they did in the 80s. This is the impact" data-description="CNN Chief Climate Correspondent Bill Weir and Director of New Standard Institute Maxine Bédat, join &quot;CNN This Morning&quot; to discuss the impact fast fashion brands like Shein are having on the environment. " data-duration="03:09" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230502100650-02-shein-congress.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230502100650-02-shein-congress.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-a90d90d9a4d992a20f906b2ba12a38b1@published" data-name="02 Shein Congress" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230502100650-02-shein-congress.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230502100650-02-shein-congress.jpg?c=16x9&amp;q=w_250,c_fill" alt="A worker makes clothes at a garment factory that supplies SHEIN, a cross-border fast fashion e-commerce company in Guangzhou, in Chinas southern Guangdong province on July 18, 2022." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>
            
            <div>
                <p>Consumers have 'five times' more clothes than they did in the 80s. This is the impact</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            03:09
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_4a85de8af2c9c834fe9703e3c20aa5c5-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-7" data-canonical-url-path="/videos/business/2023/06/27/commercial-real-estate-vacancy-new-york-yurkevich-cnntm-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_4a85de8af2c9c834fe9703e3c20aa5c5-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/06/27/commercial-real-estate-vacancy-new-york-yurkevich-cnntm-vpx.cnn" data-live="" data-headline="The US has an empty office building problem. Here's what landlords are doing about it" data-description="Commercial real estate is facing major pressure as vacancy rates grow across the US. CNN's Vanessa Yurkevich reports on how companies and landlords are being forced to get creative as spaces sit empty. " data-duration="03:20" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230627075152-pickleball-vpx.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230627075152-pickleball-vpx.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-1dc60d16cfb089eb592b54df50160c3c@published" data-name="pickleball vpx" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230627075152-pickleball-vpx.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230627075152-pickleball-vpx.jpg?c=16x9&amp;q=w_250,c_fill" alt="pickleball vpx" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>
            
            <div>
                <p>The US has an empty office building problem. Here's what landlords are doing about it</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            03:20
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_6c02c6b1b2643fb9d39bdeb55c47ad3f-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-8" data-canonical-url-path="/videos/business/2023/06/13/bull-market-stocks-economy-orig-jc.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_6c02c6b1b2643fb9d39bdeb55c47ad3f-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/06/13/bull-market-stocks-economy-orig-jc.cnn" data-live="" data-headline="Why there's a new bull market despite recession fears" data-description="The S&amp;P 500 is up 20% since its October 2022 lows. Christine Romans explains why stocks have been so resilient despite fears of an economic contraction." data-duration="01:44" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230613132745-bull-market-explainer-thumb.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230613132745-bull-market-explainer-thumb.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-1aca3eba8163679b2f537dcfdad76786@published" data-name="Bull market Explainer Thumb" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230613132745-bull-market-explainer-thumb.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230613132745-bull-market-explainer-thumb.jpg?c=16x9&amp;q=w_250,c_fill" alt="Bull market Explainer Thumb" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>
            
            <div>
                <p>Why there's a new bull market despite recession fears</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            01:44
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_1497ccd690b01d659c17d7895da8f908-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-9" data-canonical-url-path="/videos/business/2023/06/05/apple-vision-pro-headset-mixed-reality-contd-orig-ht.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_1497ccd690b01d659c17d7895da8f908-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/06/05/apple-vision-pro-headset-mixed-reality-contd-orig-ht.cnn" data-live="" data-headline="Video: See Apple's new $3,499 mixed reality headset" data-description="Apple has unveiled a mixed reality headset that offers both virtual and augmented reality experiences, marking its first major hardware launch since the Apple Watch in 2015." data-duration="00:59" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230605161738-appleheadset3.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230605161738-appleheadset3.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-832e29d0e16e1c58b5843ef47435032a@published" data-name="AppleHeadset3" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230605161738-appleheadset3.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230605161738-appleheadset3.jpg?c=16x9&amp;q=w_250,c_fill" alt="AppleHeadset3" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>
            
            <div>
                <p>Video: See Apple's new $3,499 mixed reality headset</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            00:59
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_c022755e64987a2ca34168a741045a09-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-10" data-canonical-url-path="/videos/business/2023/06/02/gun-store-owner-closes-doors-cnntm-sot-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_c022755e64987a2ca34168a741045a09-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/06/02/gun-store-owner-closes-doors-cnntm-sot-vpx.cnn" data-live="" data-headline="Gun shop owner explains decision to close his business" data-description="A gun store owner in Georgia explains what led to his decision to shut down his business." data-duration="01:10" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230602080901-georgia-gun-store-owner.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230602080901-georgia-gun-store-owner.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-6c4061a311a53e773d8c22f278010337@published" data-name="georgia gun store owner" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230602080901-georgia-gun-store-owner.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230602080901-georgia-gun-store-owner.jpg?c=16x9&amp;q=w_250,c_fill" alt="georgia gun store owner" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>
            
            <div>
                <p>Gun shop owner explains decision to close his business</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            01:10
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_0aa08f2b13ae8365bb106bb7aa458137-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-11" data-canonical-url-path="/videos/business/2023/05/25/target-products-pulled-pride-month-backlash-cnntm-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_0aa08f2b13ae8365bb106bb7aa458137-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/05/25/target-products-pulled-pride-month-backlash-cnntm-vpx.cnn" data-live="" data-headline="Target facing backlash following removal of merchandise ahead of Pride Month" data-description="CNN business reporter Nathaniel Meyersohn breaks down the backlash Target is facing for pulling merchandise ahead of Pride Month. The company announced the decision after receiving threats on the safety and well-being of its workers from an anti-LGBTQ campaign that went viral on social media." data-duration="01:50" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230524105202-target-department-store-0517.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230524105202-target-department-store-0517.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-a738a5069f85195c1a5bde75ea658151@published" data-name="Target department store 0517" data-component-name="image" data-observe-resizes="" data-original-ratio="0.666875" data-original-height="1067" data-original-width="1600" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230524105202-target-department-store-0517.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230524105202-target-department-store-0517.jpg?c=16x9&amp;q=w_250,c_fill" alt="A Target department store on May 17, 2023 in North Miami Beach, Florida." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1067" width="1600" loading="lazy"></picture>
    </div>
            
            <div>
                <p>Target facing backlash following removal of merchandise ahead of Pride Month</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            01:50
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_19a124d1773c6263a15bab546a6ee205-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-12" data-canonical-url-path="/videos/business/2023/05/24/jeopardy-contestant-misspelling-cprog-orig-jm.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_19a124d1773c6263a15bab546a6ee205-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/05/24/jeopardy-contestant-misspelling-cprog-orig-jm.cnn" data-live="" data-headline="'Jeopardy!' fans in uproar after a single letter ends nine-day winning streak" data-description="&quot;Jeopardy!&quot; fans made their disappointment known after contestant Ben Chan's nine-game winning streak ended over a misspelled word." data-duration="01:03" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230524164547-jeopardy-ben-chan-contestant.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230524164547-jeopardy-ben-chan-contestant.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-7a24e9e753871e273c3b0cde8e874124@published" data-name="jeopardy ben chan contestant" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6081794195250659" data-original-height="922" data-original-width="1516" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230524164547-jeopardy-ben-chan-contestant.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230524164547-jeopardy-ben-chan-contestant.jpg?c=16x9&amp;q=w_250,c_fill" alt="jeopardy ben chan contestant" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="922" width="1516" loading="lazy"></picture>
    </div>
            
            <div>
                <p>'Jeopardy!' fans in uproar after a single letter ends nine-day winning streak</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            01:03
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_321f40e6f78626aafde598c118012974-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-13" data-canonical-url-path="/videos/business/2023/05/24/netflix-password-sharing-enten-cnntm-cprog-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_321f40e6f78626aafde598c118012974-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/05/24/netflix-password-sharing-enten-cnntm-cprog-vpx.cnn" data-live="" data-headline="This is how much Netflix is charging to share your password" data-description="Netflix is officially beginning its <a href=&quot;https://www.cnn.com/2023/05/23/business/netflix-password-sharing/index.html&quot; target=&quot;_blank&quot;>crackdown on users who share passwords</a> in the United States. The streaming video company is trying to limit password sharing and gain new subscribers. CNN's Senior Data Reporter Harry Enten breaks down the numbers." data-duration="01:59" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/210113104107-netflix-logo.jpg?q=x_4,y_178,h_2246,w_3991,c_crop/h_540,w_960&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/210113104107-netflix-logo.jpg?q=x_4,y_178,h_2246,w_3991,c_crop/h_540,w_960&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-d12197e85eeb9793bf846061407eb8ae@published" data-name="NETFLIX LOGO" data-component-name="image" data-observe-resizes="" data-original-ratio="0.652" data-original-height="2608" data-original-width="4000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/210113104107-netflix-logo.jpg?q=w_4000,h_2608,x_0,y_0,c_fill" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/210113104107-netflix-logo.jpg?q=x_4,y_178,h_2246,w_3991,c_crop/w_250" alt="In this photo illustration a computer screen and mobile phone display the Netflix logo on March 31, 2020 in Arlington, Virginia. - According to Netflix chief content officer Ted Sarandos, Netflix viewership is on the rise during the coronavirus outbreak. (Photo by Olivier DOULIERY / AFP) (Photo by OLIVIER DOULIERY/AFP via Getty Images)" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="2608" width="4000" loading="lazy"></picture>
    </div>
            
            <div>
                <p>This is how much Netflix is charging to share your password</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            01:59
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_5275178baefbfca4595c74cea9f1f604-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-14" data-canonical-url-path="/videos/business/2023/05/23/adobe-photoshop-ai-image-generator-tool-firefly-firstmove-intl-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_5275178baefbfca4595c74cea9f1f604-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/05/23/adobe-photoshop-ai-image-generator-tool-firefly-firstmove-intl-vpx.cnn" data-live="" data-headline="See Adobe's new art tool that gives images life-like effects" data-description="Adobe is incorporating an AI-powered image generator tool into Photoshop called Firefly that allows users to add or delete elements from images with just a text prompt. CNN's Julia Chatterley reports.<br />" data-duration="00:40" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230523151701-adobe-ai-generator.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230523151701-adobe-ai-generator.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<!-- unable to render partial show without a supplied context -->" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-143b99bddf9e6fbf4352c02c1229851d@published" data-name="adobe ai generator" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5625" data-original-height="1080" data-original-width="1920" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230523151701-adobe-ai-generator.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230523151701-adobe-ai-generator.jpg?c=16x9&amp;q=w_250,c_fill" alt="adobe ai generator" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1080" width="1920" loading="lazy"></picture>
    </div>
            
            <div>
                <p>See Adobe's new art tool that gives images life-like effects</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            00:40
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

                
                    
                
    
    

<div data-uri="cms.cnn.com/_components/video-resource/instances/h_7ea5ee00b0f7430b783f00f9367314d1-h_997b8afb5be042ec69eeccc4d3764d98@published" data-component-name="video-resource" data-editable="settings" data-index="idx-15" data-canonical-url-path="/videos/business/2023/05/22/pentagon-fake-explosion-image-twitter-osullivan-lead-vpx.cnn" data-video-instance="cms.cnn.com/_components/video-resource/instances/h_7ea5ee00b0f7430b783f00f9367314d1-h_997b8afb5be042ec69eeccc4d3764d98@published" data-video-id="business/2023/05/22/pentagon-fake-explosion-image-twitter-osullivan-lead-vpx.cnn" data-live="" data-headline="See fake image of an 'explosion' near the Pentagon that caused confusion" data-description="A fake image purporting to show an explosion near the Pentagon was shared by multiple verified Twitter accounts, causing confusion and leading to a brief dip in the stock market. CNN's Donie O'Sullivan has more. " data-duration="02:41" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230522144735-pentagon-aerial-0308.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/230522144735-pentagon-aerial-0308.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="" data-show-html="<a data-uri=&quot;cms.cnn.com/_components/show/instances/show_00E11A3E-A80E-6443-B504-FFF32537C2F7@published&quot; href=&quot;https://www.cnn.com/shows/the-lead&quot; class=&quot;show show__showlink-url&quot;> The Lead
    </a>" data-check-event-based-preview="" data-network-id="" data-details="">
            <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/thumbnail-image-1e52d9d2d8f9b11b02c0cf9daaba526c@published" data-name="Pentagon aerial 0308" data-component-name="image" data-observe-resizes="" data-original-ratio="0.75" data-original-height="1500" data-original-width="2000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/230522144735-pentagon-aerial-0308.jpg?c=original" data-unselectable="true">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/230522144735-pentagon-aerial-0308.jpg?c=16x9&amp;q=w_250,c_fill" alt="This aerial photograph taken on March 8, 2023 shows The Pentagon, the headquarters of the US Department of Defense, located in Arlington County, across the Potomac River from Washington, DC." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1500" width="2000" loading="lazy"></picture>
    </div>
            
            <div>
                <p>See fake image of an 'explosion' near the Pentagon that caused confusion</p>
                <div>
                        <p><span>
                              <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.333c-4.779 0-8.667 3.888-8.667 8.667S7.221 20.667 12 20.667s8.667-3.888 8.667-8.667S16.779 3.333 12 3.333M12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10m-1.064-6.793l4.61-2.74a.715.715 0 00-.003-1.23l-4.61-2.712a.714.714 0 00-1.076.616v5.452c0 .554.603.897 1.08.614"></path></svg>

                            02:41
                        </span></p><p>
                            Now playing
                        </p>
                        <p><span> - Source:
                <a href="https://www.cnn.com/">CNN</a>
    </span>
                </p></div>
            </div>
        </div>

      </div>
    
  </div>

        
    </div>
            <div data-editable="content" itemprop="articleBody" data-reorderable="content">
                    <p><cite>
      <span data-editable="location">New York</span>
      <span data-editable="source">CNN</span>
        &nbsp;—&nbsp;
    </cite>
</p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_B4106792-8FAF-0A5D-8604-E4CEB1740E7C@published" data-editable="text" data-component-name="paragraph">
      US inflation has had a snowballing effect on family budgets.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_E48A7932-800E-2F64-047D-E4CEB177EF9D@published" data-editable="text" data-component-name="paragraph">
      The typical American household spent $709 more in July than they did two years ago to buy the same goods and services, according to Moody’s Analytics. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_59173825-B7AD-0621-94CB-E4CEB178233D@published" data-editable="text" data-component-name="paragraph">
      That figure underscores the cumulative impact high inflation has had on consumer finances — even as price growth has<a href="https://www.cnn.com/2023/08/10/economy/cpi-inflation-july/index.html" target="_blank"> cooled considerably in recent months.</a>
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_380C6CCE-2789-521D-4456-E4CEB17A4E21@published" data-editable="text" data-component-name="paragraph">
      “High inflation of the past 2+ years has done lots of economic damage,” Mark Zandi, chief economist at Moody’s Analytics, wrote in a <a href="https://twitter.com/Markzandi/status/1689626766875254786" target="_blank">post on X</a>, the platform formerly known as Twitter.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_FD88B6FC-7138-AF55-F04D-E4CEB17BC366@published" data-editable="text" data-component-name="paragraph">
      Most of that increase in spending is driven by housing costs, which have surged, Zandi told CNN in an email on Friday. He added that families are also spending more at the grocery store; on buying, maintaining and insuring vehicles and on recreational services like cable.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_9D468FB1-E4A1-893D-1B9C-E4CEB17CC254@published" data-editable="text" data-component-name="paragraph">
      Of course, paychecks have also grown over the past two years — but not by as much as the cost of living.
  </p>

  

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_DD051C6D-6EE4-75A2-2B9B-E4CEB17E1BE1@published" data-editable="text" data-component-name="paragraph">
      Even though prices have soared,<a href="https://fred.stlouisfed.org/series/LES1252881600Q" target="_blank"> real earnings</a>, which adjust for inflation, are stuck at late 2019 levels. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_E9ADA8B1-1E13-109A-7101-E4CEB17F863A@published" data-editable="text" data-component-name="paragraph">
      “Real earnings remain below what they would have been if not for the pandemic and the Russian war, which is weighing on the collective psyche,” Zandi told CNN in an email on Friday.
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_34E62407-1189-6185-BE7A-E4CEB1807132@published" data-editable="text" data-component-name="paragraph">
      The good news is that wages <a href="https://www.cnn.com/2023/07/16/economy/real-wage-gains-inflation" target="_blank">are finally starting to outpace inflation</a> and consumer price growth has eased significantly, so much so that many investors are betting the Federal Reserve is done raising interest rates. 
  </p>

  



  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_DCF86B5C-1487-2EC4-C7E1-E4CEB182F80E@published" data-editable="text" data-component-name="paragraph">
      Looking at just the last year, Zandi calculates that the typical household spent $202 more this July than they did a year ago to buy the same goods and services. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_A98F030F-4C56-754C-EEE2-E4CEB1837347@published" data-editable="text" data-component-name="paragraph">
      That’s significant, but it’s still below the peak of $536 for this year-over-year metric — a record hit back June 2022, <a href="https://www.cnn.com/2022/06/11/business/gas-prices-five-dollars-national-june/index.html" target="_blank">when gas prices spiked above $5 a gallon</a> for the first time. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_AC3466BA-4DF0-04F3-94B5-E4CEB184A43C@published" data-editable="text" data-component-name="paragraph">
      Consumer prices increased by a cooler-than-expected 3.2% in July compared with the year before, according to a <a href="https://www.cnn.com/2023/08/10/economy/cpi-inflation-july/index.html" target="_blank">government report released Wednesday</a>. Even though that was slightly higher than the annual inflation rate in June, most of the impact was <a href="https://www.cnn.com/2023/08/11/investing/premarket-stocks-trading-inflation/index.html" target="_blank">driven by calendar effects.</a>
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_A1E2CF0A-C1F4-9088-B93B-E4CEB18636DC@published" data-editable="text" data-component-name="paragraph">
      “In sum, the report was encouraging,” Bank of America economists wrote in a note to clients on Thursday, adding they “wouldn’t be surprised to see another soft” inflation reading in August. 
  </p>

  <p data-uri="cms.cnn.com/_components/paragraph/instances/paragraph_7955BA62-2C6F-BEB9-12CC-E4CEB187EE7B@published" data-editable="text" data-component-name="paragraph">
      Although month-over-month inflation readings are “still likely to be bumpy,” Bank of America economists said they “believe that the current disinflation is not a ‘head fake.’”
  </p>

                </div>
    </main>
  </section>
</article>

</section></div>]]></description>
        </item>
    </channel>
</rss>